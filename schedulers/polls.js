const a225_0x32cb=['name','POLL\x20ENDED','push','embeds','value','COLORS','fetch','fields','users','client','slice','then','get','default','edit','channels','guilds','\x20/\x20','test','toFixed','Scheduler','readyTimestamp','0\x20*/15\x20*\x20*\x20*\x20*','_id','constructor','find','filter','channel','catch','SOMEWHAT_DARK','map','error','Logger','length','reactions','deleteMany','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','Ended','Constants','../models/Poll','size','cache'];(function(_0x1e9bdb,_0x8bec60){const _0x32cb0b=function(_0x535a3f){while(--_0x535a3f){_0x1e9bdb['push'](_0x1e9bdb['shift']());}},_0x2f9e78=function(){const _0x5e6e01={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3089eb,_0x4649a0,_0x5ae0ab,_0x1bd273){_0x1bd273=_0x1bd273||{};let _0x58ac06=_0x4649a0+'='+_0x5ae0ab,_0x3d4164=0x0;for(let _0xc26f43=0x0,_0x3bda04=_0x3089eb['length'];_0xc26f43<_0x3bda04;_0xc26f43++){const _0x281c07=_0x3089eb[_0xc26f43];_0x58ac06+=';\x20'+_0x281c07;const _0x286663=_0x3089eb[_0x281c07];_0x3089eb['push'](_0x286663),_0x3bda04=_0x3089eb['length'],_0x286663!==!![]&&(_0x58ac06+='='+_0x286663);}_0x1bd273['cookie']=_0x58ac06;},'removeCookie':function(){return'dev';},'getCookie':function(_0x521ba9,_0x5615f2){_0x521ba9=_0x521ba9||function(_0x1bb5cb){return _0x1bb5cb;};const _0x93a829=_0x521ba9(new RegExp('(?:^|;\x20)'+_0x5615f2['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x2dcf64=function(_0x437f09,_0x16c30b){_0x437f09(++_0x16c30b);};return _0x2dcf64(_0x32cb0b,_0x8bec60),_0x93a829?decodeURIComponent(_0x93a829[0x1]):undefined;}},_0x3bef98=function(){const _0x39197a=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x39197a['test'](_0x5e6e01['removeCookie']['toString']());};_0x5e6e01['updateCookie']=_0x3bef98;let _0x125cd8='';const _0x4c543c=_0x5e6e01['updateCookie']();if(!_0x4c543c)_0x5e6e01['setCookie'](['*'],'counter',0x1);else _0x4c543c?_0x125cd8=_0x5e6e01['getCookie'](null,'counter'):_0x5e6e01['removeCookie']();};_0x2f9e78();}(a225_0x32cb,0x112));const a225_0x2f9e=function(_0x1e9bdb,_0x8bec60){_0x1e9bdb=_0x1e9bdb-0x184;let _0x32cb0b=a225_0x32cb[_0x1e9bdb];return _0x32cb0b;};const a225_0xbeaef6=a225_0x2f9e,a225_0x3bef98=function(){let _0x4c543c=!![];return function(_0x3089eb,_0x4649a0){const _0x5ae0ab=_0x4c543c?function(){if(_0x4649a0){const _0x1bd273=_0x4649a0['apply'](_0x3089eb,arguments);return _0x4649a0=null,_0x1bd273;}}:function(){};return _0x4c543c=![],_0x5ae0ab;};}(),a225_0x5e6e01=a225_0x3bef98(this,function(){const _0x58ac06=function(){const _0x126961=a225_0x2f9e,_0x3d4164=_0x58ac06[_0x126961(0x186)]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()['constructor'](_0x126961(0x192));return!_0x3d4164[_0x126961(0x1aa)](a225_0x5e6e01);};return _0x58ac06();});a225_0x5e6e01();'use strict';const tesseract_1=require('@bastion/tesseract'),Poll_1=require(a225_0xbeaef6(0x195));module['exports']=class PollScheduler extends tesseract_1[a225_0xbeaef6(0x1ac)]{constructor(){const _0x8fffcb=a225_0xbeaef6;super('polls',{'cronTime':_0x8fffcb(0x184)}),this['exec']=async()=>{const _0x37256f=_0x8fffcb;try{if(!this[_0x37256f(0x1a1)][_0x37256f(0x1ad)])return;if(!this[_0x37256f(0x1a1)][_0x37256f(0x1a8)][_0x37256f(0x197)]['size'])return;const _0xc26f43=await Poll_1['default'][_0x37256f(0x187)]({'$or':this[_0x37256f(0x1a1)][_0x37256f(0x1a8)]['cache']['map'](_0x281c07=>({'guild':_0x281c07['id']})),'ends':{'$lte':new Date()}}),_0x3bda04=[];for(const _0x286663 of _0xc26f43){const _0x521ba9=this[_0x37256f(0x1a1)][_0x37256f(0x1a8)][_0x37256f(0x197)]['get'](_0x286663['guild']);if(_0x521ba9['channels']['cache']['has'](_0x286663[_0x37256f(0x189)])){const _0x5615f2=_0x521ba9[_0x37256f(0x1a7)]['cache'][_0x37256f(0x1a4)](_0x286663[_0x37256f(0x189)]),_0x93a829=await _0x5615f2['messages'][_0x37256f(0x19e)](_0x286663[_0x37256f(0x185)])['catch'](()=>{});if(!_0x93a829)continue;const _0x2dcf64=_0x93a829[_0x37256f(0x19b)][0x0][_0x37256f(0x19f)][_0x37256f(0x18c)](_0x39197a=>_0x39197a[_0x37256f(0x19c)]),_0x1bb5cb=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'],_0x437f09={};let _0x16c30b=0x0;for(const _0x36482b in _0x1bb5cb[_0x37256f(0x1a2)](0x0,_0x2dcf64[_0x37256f(0x18f)])){if(_0x93a829[_0x37256f(0x190)][_0x37256f(0x197)]['has'](_0x1bb5cb[_0x36482b])){await _0x93a829[_0x37256f(0x190)][_0x37256f(0x197)]['get'](_0x1bb5cb[_0x36482b])['users'][_0x37256f(0x19e)]()[_0x37256f(0x18a)](()=>{});const _0x49993d=_0x93a829[_0x37256f(0x190)][_0x37256f(0x197)]['get'](_0x1bb5cb[_0x36482b])[_0x37256f(0x1a0)][_0x37256f(0x197)][_0x37256f(0x188)](_0x317d90=>!_0x317d90['bot'])[_0x37256f(0x196)];_0x437f09[_0x1bb5cb[_0x36482b]]=_0x49993d,_0x16c30b+=_0x49993d;}}await _0x93a829[_0x37256f(0x1a6)]({'embed':{'color':tesseract_1[_0x37256f(0x194)][_0x37256f(0x19d)][_0x37256f(0x18b)],'author':{'name':_0x37256f(0x199)},'title':_0x93a829[_0x37256f(0x19b)][0x0]['title'],'fields':_0x93a829['embeds'][0x0][_0x37256f(0x19f)]['map'](_0x237122=>({'name':_0x237122[_0x37256f(0x198)]+'\x20'+_0x237122[_0x37256f(0x19c)],'value':(_0x437f09[_0x237122[_0x37256f(0x198)]]||0x0)+_0x37256f(0x1a9)+_0x16c30b+'\x20votes\x20('+(_0x437f09[_0x237122[_0x37256f(0x198)]]?_0x437f09[_0x237122['name']]/_0x16c30b*0x64:0x0)[_0x37256f(0x1ab)](0x2)+'%)'})),'footer':{'text':_0x37256f(0x193)},'timestamp':new Date()}})[_0x37256f(0x1a3)](()=>{const _0x2f6115=_0x37256f;_0x3bda04[_0x2f6115(0x19a)](_0x93a829['id']);})[_0x37256f(0x18a)](()=>{});}}_0x3bda04[_0x37256f(0x18f)]&&await Poll_1[_0x37256f(0x1a5)][_0x37256f(0x191)]({'$or':_0x3bda04[_0x37256f(0x18c)](_0x34e1e0=>({'_id':_0x34e1e0}))})['catch'](()=>{});}catch(_0x5d54dd){tesseract_1[_0x37256f(0x18e)][_0x37256f(0x18d)](_0x5d54dd);}};}};
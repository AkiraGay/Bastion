const a204_0x5c0e=['map','channel','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','deleteMany','\x20votes\x20(','../models/Poll','default','edit','get','find','then','value','name','constructor','push','has','guild','size','reactions','fields','messages','POLL\x20ENDED','embeds','apply','\x20/\x20','Ended','Logger','test','toFixed','filter','slice','guilds','error','client','length','channels','SOMEWHAT_DARK','fetch','cache','title','@bastion/tesseract','Constants','polls','exec','catch','return\x20/\x22\x20+\x20this\x20+\x20\x22/','_id'];(function(_0x2e6a16,_0x5c0e5e){const _0x5e794d=function(_0x3547ab){while(--_0x3547ab){_0x2e6a16['push'](_0x2e6a16['shift']());}},_0x42bc92=function(){const _0x254731={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4ee6a2,_0x1e36af,_0x2bc350,_0x3d20ac){_0x3d20ac=_0x3d20ac||{};let _0xb96f44=_0x1e36af+'='+_0x2bc350,_0x62c1d4=0x0;for(let _0x3eb0c5=0x0,_0xfd30c=_0x4ee6a2['length'];_0x3eb0c5<_0xfd30c;_0x3eb0c5++){const _0x2bddfc=_0x4ee6a2[_0x3eb0c5];_0xb96f44+=';\x20'+_0x2bddfc;const _0x107cf8=_0x4ee6a2[_0x2bddfc];_0x4ee6a2['push'](_0x107cf8),_0xfd30c=_0x4ee6a2['length'],_0x107cf8!==!![]&&(_0xb96f44+='='+_0x107cf8);}_0x3d20ac['cookie']=_0xb96f44;},'removeCookie':function(){return'dev';},'getCookie':function(_0xfb310b,_0xefbd15){_0xfb310b=_0xfb310b||function(_0x40bb01){return _0x40bb01;};const _0x5abf66=_0xfb310b(new RegExp('(?:^|;\x20)'+_0xefbd15['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x528bd9=function(_0x4b1e67,_0x4348da){_0x4b1e67(++_0x4348da);};return _0x528bd9(_0x5e794d,_0x5c0e5e),_0x5abf66?decodeURIComponent(_0x5abf66[0x1]):undefined;}},_0x44bd23=function(){const _0x455397=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x455397['test'](_0x254731['removeCookie']['toString']());};_0x254731['updateCookie']=_0x44bd23;let _0xb6364c='';const _0x2a8073=_0x254731['updateCookie']();if(!_0x2a8073)_0x254731['setCookie'](['*'],'counter',0x1);else _0x2a8073?_0xb6364c=_0x254731['getCookie'](null,'counter'):_0x254731['removeCookie']();};_0x42bc92();}(a204_0x5c0e,0x127));const a204_0x5e79=function(_0x2e6a16,_0x5c0e5e){_0x2e6a16=_0x2e6a16-0x0;let _0x5e794d=a204_0x5c0e[_0x2e6a16];return _0x5e794d;};const a204_0x2bc350=function(){let _0x4aabf9=!![];return function(_0x18347a,_0x1ee3cc){const _0x58b864=_0x4aabf9?function(){if(_0x1ee3cc){const _0xe4c12e=_0x1ee3cc[a204_0x5e79('0xa')](_0x18347a,arguments);return _0x1ee3cc=null,_0xe4c12e;}}:function(){};return _0x4aabf9=![],_0x58b864;};}(),a204_0x1e36af=a204_0x2bc350(this,function(){const _0x1f53b2=function(){const _0x37d9c1=_0x1f53b2[a204_0x5e79('0x0')](a204_0x5e79('0x20'))()[a204_0x5e79('0x0')](a204_0x5e79('0x24'));return!_0x37d9c1[a204_0x5e79('0xe')](a204_0x1e36af);};return _0x1f53b2();});a204_0x1e36af();'use strict';const tesseract_1=require(a204_0x5e79('0x1b')),Poll_1=require(a204_0x5e79('0x27'));module['exports']=class PollScheduler extends tesseract_1['Scheduler']{constructor(){super(a204_0x5e79('0x1d'),{'cronTime':'0\x20*/15\x20*\x20*\x20*\x20*'}),this[a204_0x5e79('0x1e')]=async()=>{try{if(!this[a204_0x5e79('0x14')]['readyTimestamp'])return;if(!this[a204_0x5e79('0x14')][a204_0x5e79('0x12')]['cache'][a204_0x5e79('0x4')])return;const _0x229810=await Poll_1['default'][a204_0x5e79('0x2b')]({'$or':this['client']['guilds'][a204_0x5e79('0x19')][a204_0x5e79('0x22')](_0x507d5b=>({'guild':_0x507d5b['id']})),'ends':{'$lte':new Date()}}),_0x3b0fb1=[];for(const _0x58f89f of _0x229810){const _0x5ceef6=this[a204_0x5e79('0x14')][a204_0x5e79('0x12')][a204_0x5e79('0x19')]['get'](_0x58f89f[a204_0x5e79('0x3')]);if(_0x5ceef6[a204_0x5e79('0x16')][a204_0x5e79('0x19')]['has'](_0x58f89f['channel'])){const _0x31bf9b=_0x5ceef6[a204_0x5e79('0x16')]['cache']['get'](_0x58f89f[a204_0x5e79('0x23')]),_0x5941e4=await _0x31bf9b[a204_0x5e79('0x7')][a204_0x5e79('0x18')](_0x58f89f[a204_0x5e79('0x21')])[a204_0x5e79('0x1f')](()=>{});if(!_0x5941e4)continue;const _0x105924=_0x5941e4[a204_0x5e79('0x9')][0x0]['fields']['map'](_0x146c40=>_0x146c40[a204_0x5e79('0x2d')]),_0x2229be=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'],_0x42ed8e={};let _0x599986=0x0;for(const _0x139f22 in _0x2229be[a204_0x5e79('0x11')](0x0,_0x105924[a204_0x5e79('0x15')])){if(_0x5941e4[a204_0x5e79('0x5')][a204_0x5e79('0x19')][a204_0x5e79('0x2')](_0x2229be[_0x139f22])){await _0x5941e4['reactions'][a204_0x5e79('0x19')][a204_0x5e79('0x2a')](_0x2229be[_0x139f22])['users'][a204_0x5e79('0x18')]()[a204_0x5e79('0x1f')](()=>{});const _0x1d62c8=_0x5941e4[a204_0x5e79('0x5')]['cache'][a204_0x5e79('0x2a')](_0x2229be[_0x139f22])['users'][a204_0x5e79('0x19')][a204_0x5e79('0x10')](_0x2b6539=>!_0x2b6539['bot'])[a204_0x5e79('0x4')];_0x42ed8e[_0x2229be[_0x139f22]]=_0x1d62c8,_0x599986+=_0x1d62c8;}}await _0x5941e4[a204_0x5e79('0x29')]({'embed':{'color':tesseract_1[a204_0x5e79('0x1c')]['COLORS'][a204_0x5e79('0x17')],'author':{'name':a204_0x5e79('0x8')},'title':_0x5941e4['embeds'][0x0][a204_0x5e79('0x1a')],'fields':_0x5941e4['embeds'][0x0][a204_0x5e79('0x6')][a204_0x5e79('0x22')](_0x4b72d3=>({'name':_0x4b72d3[a204_0x5e79('0x2e')]+'\x20'+_0x4b72d3['value'],'value':(_0x42ed8e[_0x4b72d3['name']]||0x0)+a204_0x5e79('0xb')+_0x599986+a204_0x5e79('0x26')+(_0x42ed8e[_0x4b72d3['name']]?_0x42ed8e[_0x4b72d3['name']]/_0x599986*0x64:0x0)[a204_0x5e79('0xf')](0x2)+'%)'})),'footer':{'text':a204_0x5e79('0xc')},'timestamp':new Date()}})[a204_0x5e79('0x2c')](()=>{_0x3b0fb1[a204_0x5e79('0x1')](_0x5941e4['id']);})[a204_0x5e79('0x1f')](()=>{});}}_0x3b0fb1['length']&&await Poll_1[a204_0x5e79('0x28')][a204_0x5e79('0x25')]({'$or':_0x3b0fb1['map'](_0x66d0ab=>({'_id':_0x66d0ab}))})['catch'](()=>{});}catch(_0x42f984){tesseract_1[a204_0x5e79('0xd')][a204_0x5e79('0x13')](_0x42f984);}};}};
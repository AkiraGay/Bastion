const a194_0x14c8=['reactions','channel','channels','slice','fields','compile','size','COLORS','\x20/\x20','find','\x20votes\x20(','catch','embeds','name','readyTimestamp','POLL\x20ENDED','get','cache','return\x20/\x22\x20+\x20this\x20+\x20\x22/','bot','edit','test','Constants','users','guilds','push','constructor','guild','messages','@bastion/tesseract','map','Scheduler','fetch','then','value','has','Ended','default','client'];(function(_0x165fa4,_0x14c870){const _0x568e9b=function(_0x459190){while(--_0x459190){_0x165fa4['push'](_0x165fa4['shift']());}};const _0x532902=function(){const _0x10c05d={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0xb38128,_0x2f6004,_0x53a644,_0x1b9309){_0x1b9309=_0x1b9309||{};let _0x37fcb3=_0x2f6004+'='+_0x53a644;let _0x4a5ec1=0x0;for(let _0x501fe5=0x0,_0x442e9c=_0xb38128['length'];_0x501fe5<_0x442e9c;_0x501fe5++){const _0x4bff43=_0xb38128[_0x501fe5];_0x37fcb3+=';\x20'+_0x4bff43;const _0x5ee62a=_0xb38128[_0x4bff43];_0xb38128['push'](_0x5ee62a);_0x442e9c=_0xb38128['length'];if(_0x5ee62a!==!![]){_0x37fcb3+='='+_0x5ee62a;}}_0x1b9309['cookie']=_0x37fcb3;},'removeCookie':function(){return'dev';},'getCookie':function(_0x52f75c,_0x48d76e){_0x52f75c=_0x52f75c||function(_0x1c7e03){return _0x1c7e03;};const _0x421b8e=_0x52f75c(new RegExp('(?:^|;\x20)'+_0x48d76e['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x1efddb=function(_0x46c5db,_0x25c46b){_0x46c5db(++_0x25c46b);};_0x1efddb(_0x568e9b,_0x14c870);return _0x421b8e?decodeURIComponent(_0x421b8e[0x1]):undefined;}};const _0x3da5fa=function(){const _0x3899ee=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3899ee['test'](_0x10c05d['removeCookie']['toString']());};_0x10c05d['updateCookie']=_0x3da5fa;let _0x569d97='';const _0x38a345=_0x10c05d['updateCookie']();if(!_0x38a345){_0x10c05d['setCookie'](['*'],'counter',0x1);}else if(_0x38a345){_0x569d97=_0x10c05d['getCookie'](null,'counter');}else{_0x10c05d['removeCookie']();}};_0x532902();}(a194_0x14c8,0xc2));const a194_0x568e=function(_0x165fa4,_0x14c870){_0x165fa4=_0x165fa4-0x0;let _0x568e9b=a194_0x14c8[_0x165fa4];return _0x568e9b;};const a194_0x10c05d=function(){let _0x532ca8=!![];return function(_0x54755f,_0x7163e2){const _0x5cce27=_0x532ca8?function(){if(_0x7163e2){const _0x40cd55=_0x7163e2['apply'](_0x54755f,arguments);_0x7163e2=null;return _0x40cd55;}}:function(){};_0x532ca8=![];return _0x5cce27;};}();const a194_0x459190=a194_0x10c05d(this,function(){const _0x4d0533=function(){const _0x3f222e=_0x4d0533[a194_0x568e('0x1b')](a194_0x568e('0x13'))()[a194_0x568e('0x6')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x3f222e[a194_0x568e('0x16')](a194_0x459190);};return _0x4d0533();});a194_0x459190();'use strict';const tesseract_1=require(a194_0x568e('0x1e'));const Poll_1=require('../models/Poll');module['exports']=class PollScheduler extends tesseract_1[a194_0x568e('0x20')]{constructor(){super('polls',{'cronTime':'0\x20*/15\x20*\x20*\x20*\x20*'});this['exec']=async()=>{if(!this['client'][a194_0x568e('0xf')])return;if(!this[a194_0x568e('0x0')][a194_0x568e('0x19')][a194_0x568e('0x12')][a194_0x568e('0x7')])return;const _0x393d6b=await Poll_1[a194_0x568e('0x26')][a194_0x568e('0xa')]({'$or':this['client'][a194_0x568e('0x19')][a194_0x568e('0x12')][a194_0x568e('0x1f')](_0x5e3aed=>({'guild':_0x5e3aed['id']})),'ends':{'$lte':new Date()}});const _0x2fe158=[];for(const _0x19dd91 of _0x393d6b){const _0xbf8080=this[a194_0x568e('0x0')]['guilds'][a194_0x568e('0x12')][a194_0x568e('0x11')](_0x19dd91[a194_0x568e('0x1c')]);if(_0xbf8080['channels'][a194_0x568e('0x12')][a194_0x568e('0x24')](_0x19dd91[a194_0x568e('0x2')])){const _0x2b9de7=_0xbf8080[a194_0x568e('0x3')][a194_0x568e('0x12')][a194_0x568e('0x11')](_0x19dd91[a194_0x568e('0x2')]);const _0x2a5e51=await _0x2b9de7[a194_0x568e('0x1d')][a194_0x568e('0x21')](_0x19dd91['_id'])[a194_0x568e('0xc')](()=>{});if(!_0x2a5e51)continue;const _0x53d71c=_0x2a5e51[a194_0x568e('0xd')][0x0][a194_0x568e('0x5')][a194_0x568e('0x1f')](_0x2cb5ad=>_0x2cb5ad[a194_0x568e('0x23')]);const _0x12eac5=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'];const _0x21c335={};let _0x41e2c0=0x0;for(const _0x33d29f in _0x12eac5[a194_0x568e('0x4')](0x0,_0x53d71c['length'])){if(_0x2a5e51['reactions'][a194_0x568e('0x12')][a194_0x568e('0x24')](_0x12eac5[_0x33d29f])){await _0x2a5e51['reactions'][a194_0x568e('0x12')][a194_0x568e('0x11')](_0x12eac5[_0x33d29f])[a194_0x568e('0x18')][a194_0x568e('0x21')]()[a194_0x568e('0xc')](()=>{});const _0x22e7cf=_0x2a5e51[a194_0x568e('0x1')][a194_0x568e('0x12')][a194_0x568e('0x11')](_0x12eac5[_0x33d29f])[a194_0x568e('0x18')]['cache']['filter'](_0x652a0f=>!_0x652a0f[a194_0x568e('0x14')])[a194_0x568e('0x7')];_0x21c335[_0x12eac5[_0x33d29f]]=_0x22e7cf;_0x41e2c0+=_0x22e7cf;}}await _0x2a5e51[a194_0x568e('0x15')]({'embed':{'color':tesseract_1[a194_0x568e('0x17')][a194_0x568e('0x8')]['SOMEWHAT_DARK'],'author':{'name':a194_0x568e('0x10')},'title':_0x2a5e51[a194_0x568e('0xd')][0x0]['title'],'fields':_0x2a5e51['embeds'][0x0][a194_0x568e('0x5')][a194_0x568e('0x1f')](_0x4b79cc=>({'name':_0x4b79cc[a194_0x568e('0xe')]+'\x20'+_0x4b79cc['value'],'value':(_0x21c335[_0x4b79cc[a194_0x568e('0xe')]]||0x0)+a194_0x568e('0x9')+_0x41e2c0+a194_0x568e('0xb')+(_0x21c335[_0x4b79cc['name']]?_0x21c335[_0x4b79cc[a194_0x568e('0xe')]]/_0x41e2c0*0x64:0x0)['toFixed'](0x2)+'%)'})),'footer':{'text':a194_0x568e('0x25')},'timestamp':new Date()}})[a194_0x568e('0x22')](()=>{_0x2fe158[a194_0x568e('0x1a')](_0x2a5e51['id']);})['catch'](()=>{});}}if(_0x2fe158['length']){await Poll_1[a194_0x568e('0x26')]['deleteMany']({'$or':_0x2fe158['map'](_0x1efa2e=>({'_id':_0x1efa2e}))})[a194_0x568e('0xc')](()=>{});}};}};
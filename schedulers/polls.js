const a195_0x270a=['toFixed','slice','title','guild','filter','client','push','_id','bot','guilds','POLL\x20ENDED','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','Constants','compile','users','embeds','\x20/\x20','Scheduler','cache','channels','deleteMany','constructor','\x20votes\x20(','edit','return\x20/\x22\x20+\x20this\x20+\x20\x22/','COLORS','has','fields','value','name','exec','reactions','Ended','catch','apply','test','0\x20*/15\x20*\x20*\x20*\x20*','get','default','@bastion/tesseract','then','messages','channel','size','map'];(function(_0x3c5077,_0x270aa5){const _0x1122b2=function(_0x5b7e6c){while(--_0x5b7e6c){_0x3c5077['push'](_0x3c5077['shift']());}};const _0x1f2213=function(){const _0x342d6b={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x42c77e,_0x2e66f5,_0xe18ec4,_0x443853){_0x443853=_0x443853||{};let _0x14436f=_0x2e66f5+'='+_0xe18ec4;let _0x5e0806=0x0;for(let _0x4eb79e=0x0,_0x1086ad=_0x42c77e['length'];_0x4eb79e<_0x1086ad;_0x4eb79e++){const _0x4bf0cf=_0x42c77e[_0x4eb79e];_0x14436f+=';\x20'+_0x4bf0cf;const _0x42c5e5=_0x42c77e[_0x4bf0cf];_0x42c77e['push'](_0x42c5e5);_0x1086ad=_0x42c77e['length'];if(_0x42c5e5!==!![]){_0x14436f+='='+_0x42c5e5;}}_0x443853['cookie']=_0x14436f;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2d450a,_0x25775a){_0x2d450a=_0x2d450a||function(_0x337e64){return _0x337e64;};const _0x4ab6ed=_0x2d450a(new RegExp('(?:^|;\x20)'+_0x25775a['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x31374b=function(_0x2d84e4,_0x455580){_0x2d84e4(++_0x455580);};_0x31374b(_0x1122b2,_0x270aa5);return _0x4ab6ed?decodeURIComponent(_0x4ab6ed[0x1]):undefined;}};const _0x1f9c50=function(){const _0x59ce66=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x59ce66['test'](_0x342d6b['removeCookie']['toString']());};_0x342d6b['updateCookie']=_0x1f9c50;let _0x1e215a='';const _0x129ee3=_0x342d6b['updateCookie']();if(!_0x129ee3){_0x342d6b['setCookie'](['*'],'counter',0x1);}else if(_0x129ee3){_0x1e215a=_0x342d6b['getCookie'](null,'counter');}else{_0x342d6b['removeCookie']();}};_0x1f2213();}(a195_0x270a,0x161));const a195_0x1122=function(_0x3c5077,_0x270aa5){_0x3c5077=_0x3c5077-0x0;let _0x1122b2=a195_0x270a[_0x3c5077];return _0x1122b2;};const a195_0x342d6b=function(){let _0x55be49=!![];return function(_0x58f3df,_0x4d8e0c){const _0xa52046=_0x55be49?function(){if(_0x4d8e0c){const _0x47f653=_0x4d8e0c[a195_0x1122('0x29')](_0x58f3df,arguments);_0x4d8e0c=null;return _0x47f653;}}:function(){};_0x55be49=![];return _0xa52046;};}();const a195_0x5b7e6c=a195_0x342d6b(this,function(){const _0x2a4cf6=function(){const _0x3bbaa2=_0x2a4cf6[a195_0x1122('0x1c')](a195_0x1122('0x1f'))()[a195_0x1122('0x14')](a195_0x1122('0x12'));return!_0x3bbaa2[a195_0x1122('0x2a')](a195_0x5b7e6c);};return _0x2a4cf6();});a195_0x5b7e6c();'use strict';const tesseract_1=require(a195_0x1122('0x1'));const Poll_1=require('../models/Poll');module['exports']=class PollScheduler extends tesseract_1[a195_0x1122('0x18')]{constructor(){super('polls',{'cronTime':a195_0x1122('0x2b')});this[a195_0x1122('0x25')]=async()=>{if(!this[a195_0x1122('0xc')]['readyTimestamp'])return;if(!this[a195_0x1122('0xc')][a195_0x1122('0x10')][a195_0x1122('0x19')][a195_0x1122('0x5')])return;const _0x3c383c=await Poll_1['default']['find']({'$or':this['client'][a195_0x1122('0x10')]['cache'][a195_0x1122('0x6')](_0x1cda90=>({'guild':_0x1cda90['id']})),'ends':{'$lte':new Date()}});const _0x62873e=[];for(const _0x456d18 of _0x3c383c){const _0x3dd8c3=this[a195_0x1122('0xc')][a195_0x1122('0x10')]['cache'][a195_0x1122('0x2c')](_0x456d18[a195_0x1122('0xa')]);if(_0x3dd8c3['channels'][a195_0x1122('0x19')]['has'](_0x456d18[a195_0x1122('0x4')])){const _0x3e0e44=_0x3dd8c3[a195_0x1122('0x1a')][a195_0x1122('0x19')]['get'](_0x456d18[a195_0x1122('0x4')]);const _0x590fc5=await _0x3e0e44[a195_0x1122('0x3')]['fetch'](_0x456d18[a195_0x1122('0xe')])['catch'](()=>{});if(!_0x590fc5)continue;const _0x79a8a4=_0x590fc5[a195_0x1122('0x16')][0x0][a195_0x1122('0x22')][a195_0x1122('0x6')](_0x18b8d5=>_0x18b8d5[a195_0x1122('0x23')]);const _0x57f8dd=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'];const _0x4659d2={};let _0x50285a=0x0;for(const _0x12acc1 in _0x57f8dd[a195_0x1122('0x8')](0x0,_0x79a8a4['length'])){if(_0x590fc5['reactions']['cache'][a195_0x1122('0x21')](_0x57f8dd[_0x12acc1])){await _0x590fc5[a195_0x1122('0x26')][a195_0x1122('0x19')][a195_0x1122('0x2c')](_0x57f8dd[_0x12acc1])['users']['fetch']()[a195_0x1122('0x28')](()=>{});const _0x47ae10=_0x590fc5['reactions'][a195_0x1122('0x19')]['get'](_0x57f8dd[_0x12acc1])[a195_0x1122('0x15')][a195_0x1122('0x19')][a195_0x1122('0xb')](_0x201ab1=>!_0x201ab1[a195_0x1122('0xf')])[a195_0x1122('0x5')];_0x4659d2[_0x57f8dd[_0x12acc1]]=_0x47ae10;_0x50285a+=_0x47ae10;}}await _0x590fc5[a195_0x1122('0x1e')]({'embed':{'color':tesseract_1[a195_0x1122('0x13')][a195_0x1122('0x20')]['SOMEWHAT_DARK'],'author':{'name':a195_0x1122('0x11')},'title':_0x590fc5[a195_0x1122('0x16')][0x0][a195_0x1122('0x9')],'fields':_0x590fc5[a195_0x1122('0x16')][0x0][a195_0x1122('0x22')][a195_0x1122('0x6')](_0x1d847c=>({'name':_0x1d847c[a195_0x1122('0x24')]+'\x20'+_0x1d847c[a195_0x1122('0x23')],'value':(_0x4659d2[_0x1d847c['name']]||0x0)+a195_0x1122('0x17')+_0x50285a+a195_0x1122('0x1d')+(_0x4659d2[_0x1d847c['name']]?_0x4659d2[_0x1d847c[a195_0x1122('0x24')]]/_0x50285a*0x64:0x0)[a195_0x1122('0x7')](0x2)+'%)'})),'footer':{'text':a195_0x1122('0x27')},'timestamp':new Date()}})[a195_0x1122('0x2')](()=>{_0x62873e[a195_0x1122('0xd')](_0x590fc5['id']);})[a195_0x1122('0x28')](()=>{});}}if(_0x62873e['length']){await Poll_1[a195_0x1122('0x0')][a195_0x1122('0x1b')]({'$or':_0x62873e['map'](_0x2c1633=>({'_id':_0x2c1633}))})[a195_0x1122('0x28')](()=>{});}};}};
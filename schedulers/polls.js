const a194_0x1343=['0\x20*/15\x20*\x20*\x20*\x20*','name','polls','fetch','embeds','COLORS','exec','test','Scheduler','return\x20/\x22\x20+\x20this\x20+\x20\x22/','constructor','_id','title','guilds','size','toFixed','has','get','@bastion/tesseract','reactions','catch','guild','compile','../models/Poll','then','readyTimestamp','channel','SOMEWHAT_DARK','edit','length','find','cache','client','\x20votes\x20(','exports','push','filter','users','default','\x20/\x20','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','value','POLL\x20ENDED','map','fields','bot'];(function(_0x381dbf,_0x134336){const _0x18bf67=function(_0x118a64){while(--_0x118a64){_0x381dbf['push'](_0x381dbf['shift']());}};const _0x44dce5=function(){const _0x49bc44={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0xa82599,_0x1f2d87,_0x438e05,_0x44a314){_0x44a314=_0x44a314||{};let _0x31f3fd=_0x1f2d87+'='+_0x438e05;let _0xa10d14=0x0;for(let _0x1f5aae=0x0,_0x39585f=_0xa82599['length'];_0x1f5aae<_0x39585f;_0x1f5aae++){const _0x3d9fd0=_0xa82599[_0x1f5aae];_0x31f3fd+=';\x20'+_0x3d9fd0;const _0x1279f0=_0xa82599[_0x3d9fd0];_0xa82599['push'](_0x1279f0);_0x39585f=_0xa82599['length'];if(_0x1279f0!==!![]){_0x31f3fd+='='+_0x1279f0;}}_0x44a314['cookie']=_0x31f3fd;},'removeCookie':function(){return'dev';},'getCookie':function(_0x13d88d,_0x2740c3){_0x13d88d=_0x13d88d||function(_0x14da10){return _0x14da10;};const _0x29b74b=_0x13d88d(new RegExp('(?:^|;\x20)'+_0x2740c3['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x443f55=function(_0x12a963,_0x127867){_0x12a963(++_0x127867);};_0x443f55(_0x18bf67,_0x134336);return _0x29b74b?decodeURIComponent(_0x29b74b[0x1]):undefined;}};const _0x1a0a3f=function(){const _0x73798f=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x73798f['test'](_0x49bc44['removeCookie']['toString']());};_0x49bc44['updateCookie']=_0x1a0a3f;let _0x5dfb56='';const _0x3910ee=_0x49bc44['updateCookie']();if(!_0x3910ee){_0x49bc44['setCookie'](['*'],'counter',0x1);}else if(_0x3910ee){_0x5dfb56=_0x49bc44['getCookie'](null,'counter');}else{_0x49bc44['removeCookie']();}};_0x44dce5();}(a194_0x1343,0x14f));const a194_0x18bf=function(_0x381dbf,_0x134336){_0x381dbf=_0x381dbf-0x0;let _0x18bf67=a194_0x1343[_0x381dbf];return _0x18bf67;};const a194_0x49bc44=function(){let _0x19f7ac=!![];return function(_0x1f37db,_0x32b416){const _0x28e3b8=_0x19f7ac?function(){if(_0x32b416){const _0x23eae2=_0x32b416['apply'](_0x1f37db,arguments);_0x32b416=null;return _0x23eae2;}}:function(){};_0x19f7ac=![];return _0x28e3b8;};}();const a194_0x118a64=a194_0x49bc44(this,function(){const _0x3f627e=function(){const _0x25c11a=_0x3f627e[a194_0x18bf('0x2b')](a194_0x18bf('0x2a'))()[a194_0x18bf('0x9')](a194_0x18bf('0x1b'));return!_0x25c11a[a194_0x18bf('0x28')](a194_0x118a64);};return _0x3f627e();});a194_0x118a64();'use strict';const tesseract_1=require(a194_0x18bf('0x5'));const Poll_1=require(a194_0x18bf('0xa'));module[a194_0x18bf('0x15')]=class PollScheduler extends tesseract_1[a194_0x18bf('0x29')]{constructor(){super(a194_0x18bf('0x23'),{'cronTime':a194_0x18bf('0x21')});this[a194_0x18bf('0x27')]=async()=>{if(!this[a194_0x18bf('0x13')][a194_0x18bf('0xc')])return;if(!this[a194_0x18bf('0x13')][a194_0x18bf('0x0')][a194_0x18bf('0x12')][a194_0x18bf('0x1')])return;const _0x572f5e=await Poll_1[a194_0x18bf('0x19')][a194_0x18bf('0x11')]({'$or':this[a194_0x18bf('0x13')][a194_0x18bf('0x0')]['cache'][a194_0x18bf('0x1e')](_0x6c1007=>({'guild':_0x6c1007['id']})),'ends':{'$lte':new Date()}});const _0x580a21=[];for(const _0x554168 of _0x572f5e){const _0x468962=this[a194_0x18bf('0x13')][a194_0x18bf('0x0')]['cache']['get'](_0x554168[a194_0x18bf('0x8')]);if(_0x468962['channels'][a194_0x18bf('0x12')]['has'](_0x554168[a194_0x18bf('0xd')])){const _0x525507=_0x468962['channels']['cache']['get'](_0x554168[a194_0x18bf('0xd')]);const _0x348996=await _0x525507['messages'][a194_0x18bf('0x24')](_0x554168[a194_0x18bf('0x2c')])[a194_0x18bf('0x7')](()=>{});if(!_0x348996)continue;const _0x4c5ace=_0x348996[a194_0x18bf('0x25')][0x0][a194_0x18bf('0x1f')][a194_0x18bf('0x1e')](_0x135e8b=>_0x135e8b['value']);const _0x9af205=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'];const _0x21edd8={};let _0x4b9688=0x0;for(const _0x3354e3 in _0x9af205['slice'](0x0,_0x4c5ace[a194_0x18bf('0x10')])){if(_0x348996[a194_0x18bf('0x6')][a194_0x18bf('0x12')][a194_0x18bf('0x3')](_0x9af205[_0x3354e3])){await _0x348996[a194_0x18bf('0x6')][a194_0x18bf('0x12')][a194_0x18bf('0x4')](_0x9af205[_0x3354e3])[a194_0x18bf('0x18')][a194_0x18bf('0x24')]()['catch'](()=>{});const _0x3176f0=_0x348996[a194_0x18bf('0x6')][a194_0x18bf('0x12')]['get'](_0x9af205[_0x3354e3])[a194_0x18bf('0x18')][a194_0x18bf('0x12')][a194_0x18bf('0x17')](_0x5f203b=>!_0x5f203b[a194_0x18bf('0x20')])['size'];_0x21edd8[_0x9af205[_0x3354e3]]=_0x3176f0;_0x4b9688+=_0x3176f0;}}await _0x348996[a194_0x18bf('0xf')]({'embed':{'color':tesseract_1['Constants'][a194_0x18bf('0x26')][a194_0x18bf('0xe')],'author':{'name':a194_0x18bf('0x1d')},'title':_0x348996[a194_0x18bf('0x25')][0x0][a194_0x18bf('0x2d')],'fields':_0x348996[a194_0x18bf('0x25')][0x0][a194_0x18bf('0x1f')][a194_0x18bf('0x1e')](_0x293775=>({'name':_0x293775[a194_0x18bf('0x22')]+'\x20'+_0x293775[a194_0x18bf('0x1c')],'value':(_0x21edd8[_0x293775[a194_0x18bf('0x22')]]||0x0)+a194_0x18bf('0x1a')+_0x4b9688+a194_0x18bf('0x14')+(_0x21edd8[_0x293775[a194_0x18bf('0x22')]]?_0x21edd8[_0x293775[a194_0x18bf('0x22')]]/_0x4b9688*0x64:0x0)[a194_0x18bf('0x2')](0x2)+'%)'})),'footer':{'text':'Ended'},'timestamp':new Date()}})[a194_0x18bf('0xb')](()=>{_0x580a21[a194_0x18bf('0x16')](_0x348996['id']);})[a194_0x18bf('0x7')](()=>{});}}if(_0x580a21[a194_0x18bf('0x10')]){await Poll_1[a194_0x18bf('0x19')]['deleteMany']({'$or':_0x580a21['map'](_0x493464=>({'_id':_0x493464}))})[a194_0x18bf('0x7')](()=>{});}};}};
const a225_0x5262=['embeds','_id','POLL\x20ENDED','channels','edit','guilds','default','exec','channel','length','title','name','then','0\x20*/15\x20*\x20*\x20*\x20*','cache','client','size','constructor','value','fetch','fields','has','deleteMany','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','map','return\x20/\x22\x20+\x20this\x20+\x20\x22/','Logger','get','reactions','SOMEWHAT_DARK','@bastion/tesseract','catch','guild','users','\x20/\x20','test'];(function(_0x3fde1a,_0x3bd99f){const _0x5262ef=function(_0x4d553f){while(--_0x4d553f){_0x3fde1a['push'](_0x3fde1a['shift']());}},_0x487a89=function(){const _0x2ec804={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3ec073,_0x2edcc0,_0x5de5cf,_0x39e1c3){_0x39e1c3=_0x39e1c3||{};let _0x12c582=_0x2edcc0+'='+_0x5de5cf,_0x3b0d11=0x0;for(let _0x649b05=0x0,_0x2ca2e8=_0x3ec073['length'];_0x649b05<_0x2ca2e8;_0x649b05++){const _0x33d89f=_0x3ec073[_0x649b05];_0x12c582+=';\x20'+_0x33d89f;const _0x3919e7=_0x3ec073[_0x33d89f];_0x3ec073['push'](_0x3919e7),_0x2ca2e8=_0x3ec073['length'],_0x3919e7!==!![]&&(_0x12c582+='='+_0x3919e7);}_0x39e1c3['cookie']=_0x12c582;},'removeCookie':function(){return'dev';},'getCookie':function(_0x29c2c6,_0x89b35f){_0x29c2c6=_0x29c2c6||function(_0x14ed53){return _0x14ed53;};const _0x471eb0=_0x29c2c6(new RegExp('(?:^|;\x20)'+_0x89b35f['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x1db908=function(_0xf1e23a,_0x2b6796){_0xf1e23a(++_0x2b6796);};return _0x1db908(_0x5262ef,_0x3bd99f),_0x471eb0?decodeURIComponent(_0x471eb0[0x1]):undefined;}},_0x3fdaf6=function(){const _0x51f8b2=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x51f8b2['test'](_0x2ec804['removeCookie']['toString']());};_0x2ec804['updateCookie']=_0x3fdaf6;let _0x4c64f1='';const _0x4e96e9=_0x2ec804['updateCookie']();if(!_0x4e96e9)_0x2ec804['setCookie'](['*'],'counter',0x1);else _0x4e96e9?_0x4c64f1=_0x2ec804['getCookie'](null,'counter'):_0x2ec804['removeCookie']();};_0x487a89();}(a225_0x5262,0xc4));const a225_0x487a=function(_0x3fde1a,_0x3bd99f){_0x3fde1a=_0x3fde1a-0x11c;let _0x5262ef=a225_0x5262[_0x3fde1a];return _0x5262ef;};const a225_0x20e292=a225_0x487a,a225_0x3fdaf6=function(){let _0x4e96e9=!![];return function(_0x3ec073,_0x2edcc0){const _0x5de5cf=_0x4e96e9?function(){if(_0x2edcc0){const _0x39e1c3=_0x2edcc0['apply'](_0x3ec073,arguments);return _0x2edcc0=null,_0x39e1c3;}}:function(){};return _0x4e96e9=![],_0x5de5cf;};}(),a225_0x2ec804=a225_0x3fdaf6(this,function(){const _0x12c582=function(){const _0x413e12=a225_0x487a,_0x3b0d11=_0x12c582[_0x413e12(0x11d)](_0x413e12(0x125))()[_0x413e12(0x11d)](_0x413e12(0x123));return!_0x3b0d11[_0x413e12(0x12f)](a225_0x2ec804);};return _0x12c582();});a225_0x2ec804();'use strict';const tesseract_1=require(a225_0x20e292(0x12a)),Poll_1=require('../models/Poll');module['exports']=class PollScheduler extends tesseract_1['Scheduler']{constructor(){const _0x9b55c9=a225_0x20e292;super('polls',{'cronTime':_0x9b55c9(0x13d)}),this[_0x9b55c9(0x137)]=async()=>{const _0x5e7802=_0x9b55c9;try{if(!this[_0x5e7802(0x13f)]['readyTimestamp'])return;if(!this[_0x5e7802(0x13f)][_0x5e7802(0x135)][_0x5e7802(0x13e)]['size'])return;const _0x649b05=await Poll_1['default']['find']({'$or':this['client'][_0x5e7802(0x135)][_0x5e7802(0x13e)][_0x5e7802(0x124)](_0x33d89f=>({'guild':_0x33d89f['id']})),'ends':{'$lte':new Date()}}),_0x2ca2e8=[];for(const _0x3919e7 of _0x649b05){const _0x29c2c6=this[_0x5e7802(0x13f)][_0x5e7802(0x135)][_0x5e7802(0x13e)][_0x5e7802(0x127)](_0x3919e7[_0x5e7802(0x12c)]);if(_0x29c2c6[_0x5e7802(0x133)][_0x5e7802(0x13e)][_0x5e7802(0x121)](_0x3919e7[_0x5e7802(0x138)])){const _0x89b35f=_0x29c2c6[_0x5e7802(0x133)][_0x5e7802(0x13e)][_0x5e7802(0x127)](_0x3919e7['channel']),_0x471eb0=await _0x89b35f['messages'][_0x5e7802(0x11f)](_0x3919e7[_0x5e7802(0x131)])[_0x5e7802(0x12b)](()=>{});if(!_0x471eb0)continue;const _0x1db908=_0x471eb0[_0x5e7802(0x130)][0x0][_0x5e7802(0x120)]['map'](_0x51f8b2=>_0x51f8b2[_0x5e7802(0x11e)]),_0x14ed53=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'],_0xf1e23a={};let _0x2b6796=0x0;for(const _0x415ddb in _0x14ed53['slice'](0x0,_0x1db908['length'])){if(_0x471eb0[_0x5e7802(0x128)][_0x5e7802(0x13e)][_0x5e7802(0x121)](_0x14ed53[_0x415ddb])){await _0x471eb0[_0x5e7802(0x128)][_0x5e7802(0x13e)][_0x5e7802(0x127)](_0x14ed53[_0x415ddb])[_0x5e7802(0x12d)]['fetch']()[_0x5e7802(0x12b)](()=>{});const _0x2c174e=_0x471eb0[_0x5e7802(0x128)][_0x5e7802(0x13e)][_0x5e7802(0x127)](_0x14ed53[_0x415ddb])['users'][_0x5e7802(0x13e)]['filter'](_0x22c92c=>!_0x22c92c['bot'])[_0x5e7802(0x11c)];_0xf1e23a[_0x14ed53[_0x415ddb]]=_0x2c174e,_0x2b6796+=_0x2c174e;}}await _0x471eb0[_0x5e7802(0x134)]({'embed':{'color':tesseract_1['Constants']['COLORS'][_0x5e7802(0x129)],'author':{'name':_0x5e7802(0x132)},'title':_0x471eb0[_0x5e7802(0x130)][0x0][_0x5e7802(0x13a)],'fields':_0x471eb0[_0x5e7802(0x130)][0x0]['fields'][_0x5e7802(0x124)](_0x5e0d38=>({'name':_0x5e0d38['name']+'\x20'+_0x5e0d38['value'],'value':(_0xf1e23a[_0x5e0d38[_0x5e7802(0x13b)]]||0x0)+_0x5e7802(0x12e)+_0x2b6796+'\x20votes\x20('+(_0xf1e23a[_0x5e0d38[_0x5e7802(0x13b)]]?_0xf1e23a[_0x5e0d38[_0x5e7802(0x13b)]]/_0x2b6796*0x64:0x0)['toFixed'](0x2)+'%)'})),'footer':{'text':'Ended'},'timestamp':new Date()}})[_0x5e7802(0x13c)](()=>{_0x2ca2e8['push'](_0x471eb0['id']);})[_0x5e7802(0x12b)](()=>{});}}_0x2ca2e8[_0x5e7802(0x139)]&&await Poll_1[_0x5e7802(0x136)][_0x5e7802(0x122)]({'$or':_0x2ca2e8[_0x5e7802(0x124)](_0x142e57=>({'_id':_0x142e57}))})[_0x5e7802(0x12b)](()=>{});}catch(_0x31694a){tesseract_1[_0x5e7802(0x126)]['error'](_0x31694a);}};}};
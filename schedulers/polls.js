const a226_0x5bfe=['Scheduler','Ended','deleteMany','guilds','SOMEWHAT_DARK','has','POLL\x20ENDED','@bastion/tesseract','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','filter','guild','639926uDUvpZ','639256SARAVF','Logger','67728HTOUWi','bot','channels','length','then','1kFEQpG','get','test','169484SelISe','reactions','client','channel','1AiWxFS','find','exec','cache','default','value','1KXQWkF','exports','toFixed','apply','../models/Poll','embeds','size','constructor','edit','87129dFoNNQ','title','fields','fetch','push','polls','COLORS','catch','\x20/\x20','513657aOQFbS','517118kSzhJM','name','Constants','messages','map'];const a226_0x2fc9=function(_0x15053d,_0x1f753c){_0x15053d=_0x15053d-0x18e;let _0x1f7b27=a226_0x5bfe[_0x15053d];return _0x1f7b27;};const a226_0x43bcc0=a226_0x2fc9;(function(_0x4866be,_0xaef5bf){const _0x266d25=a226_0x2fc9;while(!![]){try{const _0x9da5cd=parseInt(_0x266d25(0x1b0))*-parseInt(_0x266d25(0x197))+-parseInt(_0x266d25(0x198))+parseInt(_0x266d25(0x18e))+-parseInt(_0x266d25(0x1bd))*-parseInt(_0x266d25(0x1a9))+parseInt(_0x266d25(0x1b7))*parseInt(_0x266d25(0x1b3))+parseInt(_0x266d25(0x1a8))+parseInt(_0x266d25(0x1ab));if(_0x9da5cd===_0xaef5bf)break;else _0x4866be['push'](_0x4866be['shift']());}catch(_0xfa2c50){_0x4866be['push'](_0x4866be['shift']());}}}(a226_0x5bfe,0x8bd4c));const a226_0x420220=function(){let _0x552c8b=!![];return function(_0xae004a,_0x2cb73f){const _0x5966e5=_0x552c8b?function(){const _0x2b1f96=a226_0x2fc9;if(_0x2cb73f){const _0x422735=_0x2cb73f[_0x2b1f96(0x1c0)](_0xae004a,arguments);return _0x2cb73f=null,_0x422735;}}:function(){};return _0x552c8b=![],_0x5966e5;};}(),a226_0x16b469=a226_0x420220(this,function(){const _0xd84cbb=function(){const _0x3e9b45=a226_0x2fc9,_0x25c27a=_0xd84cbb[_0x3e9b45(0x1c4)]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[_0x3e9b45(0x1c4)](_0x3e9b45(0x1a5));return!_0x25c27a[_0x3e9b45(0x1b2)](a226_0x16b469);};return _0xd84cbb();});a226_0x16b469();'use strict';const tesseract_1=require(a226_0x43bcc0(0x1a4)),Poll_1=require(a226_0x43bcc0(0x1c1));module[a226_0x43bcc0(0x1be)]=class PollScheduler extends tesseract_1[a226_0x43bcc0(0x19d)]{constructor(){const _0x59b9eb=a226_0x43bcc0;super(_0x59b9eb(0x193),{'cronTime':'0\x20*/15\x20*\x20*\x20*\x20*'}),this[_0x59b9eb(0x1b9)]=async()=>{const _0x3a2e76=_0x59b9eb;try{if(!this[_0x3a2e76(0x1b5)]['readyTimestamp'])return;if(!this[_0x3a2e76(0x1b5)][_0x3a2e76(0x1a0)][_0x3a2e76(0x1ba)][_0x3a2e76(0x1c3)])return;const _0xffba93=await Poll_1[_0x3a2e76(0x1bb)][_0x3a2e76(0x1b8)]({'$or':this[_0x3a2e76(0x1b5)]['guilds'][_0x3a2e76(0x1ba)]['map'](_0xd594fa=>({'guild':_0xd594fa['id']})),'ends':{'$lte':new Date()}}),_0x4bb10f=[];for(const _0x2eac18 of _0xffba93){const _0x3d750c=this['client'][_0x3a2e76(0x1a0)][_0x3a2e76(0x1ba)][_0x3a2e76(0x1b1)](_0x2eac18[_0x3a2e76(0x1a7)]);if(_0x3d750c[_0x3a2e76(0x1ad)][_0x3a2e76(0x1ba)]['has'](_0x2eac18['channel'])){const _0x35df24=_0x3d750c[_0x3a2e76(0x1ad)][_0x3a2e76(0x1ba)][_0x3a2e76(0x1b1)](_0x2eac18[_0x3a2e76(0x1b6)]),_0x2f3676=await _0x35df24[_0x3a2e76(0x19b)][_0x3a2e76(0x191)](_0x2eac18['_id'])[_0x3a2e76(0x195)](()=>{});if(!_0x2f3676)continue;const _0x1bc544=_0x2f3676[_0x3a2e76(0x1c2)][0x0][_0x3a2e76(0x190)][_0x3a2e76(0x19c)](_0x3c968e=>_0x3c968e[_0x3a2e76(0x1bc)]),_0x13f292=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'],_0x48db6b={};let _0x870cf1=0x0;for(const _0x108cec in _0x13f292['slice'](0x0,_0x1bc544[_0x3a2e76(0x1ae)])){if(_0x2f3676[_0x3a2e76(0x1b4)]['cache'][_0x3a2e76(0x1a2)](_0x13f292[_0x108cec])){await _0x2f3676[_0x3a2e76(0x1b4)][_0x3a2e76(0x1ba)][_0x3a2e76(0x1b1)](_0x13f292[_0x108cec])['users'][_0x3a2e76(0x191)]()['catch'](()=>{});const _0x28079f=_0x2f3676[_0x3a2e76(0x1b4)][_0x3a2e76(0x1ba)][_0x3a2e76(0x1b1)](_0x13f292[_0x108cec])['users'][_0x3a2e76(0x1ba)][_0x3a2e76(0x1a6)](_0x35bfcb=>!_0x35bfcb[_0x3a2e76(0x1ac)])['size'];_0x48db6b[_0x13f292[_0x108cec]]=_0x28079f,_0x870cf1+=_0x28079f;}}await _0x2f3676[_0x3a2e76(0x1c5)]({'embed':{'color':tesseract_1[_0x3a2e76(0x19a)][_0x3a2e76(0x194)][_0x3a2e76(0x1a1)],'author':{'name':_0x3a2e76(0x1a3)},'title':_0x2f3676[_0x3a2e76(0x1c2)][0x0][_0x3a2e76(0x18f)],'fields':_0x2f3676[_0x3a2e76(0x1c2)][0x0][_0x3a2e76(0x190)]['map'](_0x5a3b6f=>({'name':_0x5a3b6f[_0x3a2e76(0x199)]+'\x20'+_0x5a3b6f['value'],'value':(_0x48db6b[_0x5a3b6f[_0x3a2e76(0x199)]]||0x0)+_0x3a2e76(0x196)+_0x870cf1+'\x20votes\x20('+(_0x48db6b[_0x5a3b6f[_0x3a2e76(0x199)]]?_0x48db6b[_0x5a3b6f[_0x3a2e76(0x199)]]/_0x870cf1*0x64:0x0)[_0x3a2e76(0x1bf)](0x2)+'%)'})),'footer':{'text':_0x3a2e76(0x19e)},'timestamp':new Date()}})[_0x3a2e76(0x1af)](()=>{const _0x9880c5=_0x3a2e76;_0x4bb10f[_0x9880c5(0x192)](_0x2f3676['id']);})[_0x3a2e76(0x195)](()=>{});}}_0x4bb10f['length']&&await Poll_1['default'][_0x3a2e76(0x19f)]({'$or':_0x4bb10f[_0x3a2e76(0x19c)](_0x320f6b=>({'_id':_0x320f6b}))})[_0x3a2e76(0x195)](()=>{});}catch(_0x4bb3db){tesseract_1[_0x3a2e76(0x1aa)]['error'](_0x4bb3db);}};}};
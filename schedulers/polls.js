const a206_0x3cf1=['embeds','guild','Ended','COLORS','../models/Poll','has','name','return\x20/\x22\x20+\x20this\x20+\x20\x22/','channels','error','get','client','length','edit','catch','find','fields','_id','size','Scheduler','SOMEWHAT_DARK','reactions','test','Logger','constructor','slice','apply','map','filter','@bastion/tesseract','fetch','polls','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','cache','value','messages','0\x20*/15\x20*\x20*\x20*\x20*','\x20/\x20','channel','exec','then','POLL\x20ENDED','bot','users','guilds','default','push','exports'];(function(_0x72e7cc,_0x3cf151){const _0x4b5e86=function(_0x5988c1){while(--_0x5988c1){_0x72e7cc['push'](_0x72e7cc['shift']());}},_0x5d4239=function(){const _0x31182a={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3c497f,_0x262cde,_0x264aa0,_0x15cbcc){_0x15cbcc=_0x15cbcc||{};let _0x2538de=_0x262cde+'='+_0x264aa0,_0x10a993=0x0;for(let _0x5bde71=0x0,_0x1a2535=_0x3c497f['length'];_0x5bde71<_0x1a2535;_0x5bde71++){const _0x210654=_0x3c497f[_0x5bde71];_0x2538de+=';\x20'+_0x210654;const _0x3a3cb0=_0x3c497f[_0x210654];_0x3c497f['push'](_0x3a3cb0),_0x1a2535=_0x3c497f['length'],_0x3a3cb0!==!![]&&(_0x2538de+='='+_0x3a3cb0);}_0x15cbcc['cookie']=_0x2538de;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1feb09,_0x38a8c2){_0x1feb09=_0x1feb09||function(_0x43d451){return _0x43d451;};const _0x525ebd=_0x1feb09(new RegExp('(?:^|;\x20)'+_0x38a8c2['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x1e8a6e=function(_0x32a434,_0x38fc3b){_0x32a434(++_0x38fc3b);};return _0x1e8a6e(_0x4b5e86,_0x3cf151),_0x525ebd?decodeURIComponent(_0x525ebd[0x1]):undefined;}},_0x6655e3=function(){const _0x798504=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x798504['test'](_0x31182a['removeCookie']['toString']());};_0x31182a['updateCookie']=_0x6655e3;let _0x37eedc='';const _0x553e35=_0x31182a['updateCookie']();if(!_0x553e35)_0x31182a['setCookie'](['*'],'counter',0x1);else _0x553e35?_0x37eedc=_0x31182a['getCookie'](null,'counter'):_0x31182a['removeCookie']();};_0x5d4239();}(a206_0x3cf1,0x82));const a206_0x4b5e=function(_0x72e7cc,_0x3cf151){_0x72e7cc=_0x72e7cc-0x0;let _0x4b5e86=a206_0x3cf1[_0x72e7cc];return _0x4b5e86;};const a206_0x31182a=function(){let _0x37eedc=!![];return function(_0x553e35,_0x3c497f){const _0x262cde=_0x37eedc?function(){if(_0x3c497f){const _0x264aa0=_0x3c497f[a206_0x4b5e('0x28')](_0x553e35,arguments);return _0x3c497f=null,_0x264aa0;}}:function(){};return _0x37eedc=![],_0x262cde;};}(),a206_0x5988c1=a206_0x31182a(this,function(){const _0x15cbcc=function(){const _0x2538de=_0x15cbcc[a206_0x4b5e('0x26')](a206_0x4b5e('0x15'))()[a206_0x4b5e('0x26')](a206_0x4b5e('0x2e'));return!_0x2538de[a206_0x4b5e('0x24')](a206_0x5988c1);};return _0x15cbcc();});a206_0x5988c1();'use strict';const tesseract_1=require(a206_0x4b5e('0x2b')),Poll_1=require(a206_0x4b5e('0x12'));module[a206_0x4b5e('0xd')]=class PollScheduler extends tesseract_1[a206_0x4b5e('0x21')]{constructor(){super(a206_0x4b5e('0x2d'),{'cronTime':a206_0x4b5e('0x2')}),this[a206_0x4b5e('0x5')]=async()=>{try{if(!this[a206_0x4b5e('0x19')]['readyTimestamp'])return;if(!this[a206_0x4b5e('0x19')][a206_0x4b5e('0xa')][a206_0x4b5e('0x2f')][a206_0x4b5e('0x20')])return;const _0x10a993=await Poll_1[a206_0x4b5e('0xb')][a206_0x4b5e('0x1d')]({'$or':this['client'][a206_0x4b5e('0xa')]['cache'][a206_0x4b5e('0x29')](_0x1a2535=>({'guild':_0x1a2535['id']})),'ends':{'$lte':new Date()}}),_0x5bde71=[];for(const _0x210654 of _0x10a993){const _0x3a3cb0=this[a206_0x4b5e('0x19')][a206_0x4b5e('0xa')][a206_0x4b5e('0x2f')][a206_0x4b5e('0x18')](_0x210654[a206_0x4b5e('0xf')]);if(_0x3a3cb0['channels'][a206_0x4b5e('0x2f')]['has'](_0x210654[a206_0x4b5e('0x4')])){const _0x1feb09=_0x3a3cb0[a206_0x4b5e('0x16')][a206_0x4b5e('0x2f')]['get'](_0x210654['channel']),_0x38a8c2=await _0x1feb09[a206_0x4b5e('0x1')][a206_0x4b5e('0x2c')](_0x210654[a206_0x4b5e('0x1f')])['catch'](()=>{});if(!_0x38a8c2)continue;const _0x525ebd=_0x38a8c2[a206_0x4b5e('0xe')][0x0][a206_0x4b5e('0x1e')][a206_0x4b5e('0x29')](_0x38fc3b=>_0x38fc3b[a206_0x4b5e('0x0')]),_0x1e8a6e=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'],_0x43d451={};let _0x32a434=0x0;for(const _0x798504 in _0x1e8a6e[a206_0x4b5e('0x27')](0x0,_0x525ebd[a206_0x4b5e('0x1a')])){if(_0x38a8c2[a206_0x4b5e('0x23')][a206_0x4b5e('0x2f')][a206_0x4b5e('0x13')](_0x1e8a6e[_0x798504])){await _0x38a8c2[a206_0x4b5e('0x23')]['cache']['get'](_0x1e8a6e[_0x798504])[a206_0x4b5e('0x9')]['fetch']()[a206_0x4b5e('0x1c')](()=>{});const _0x58dabf=_0x38a8c2['reactions'][a206_0x4b5e('0x2f')][a206_0x4b5e('0x18')](_0x1e8a6e[_0x798504])[a206_0x4b5e('0x9')]['cache'][a206_0x4b5e('0x2a')](_0x1cdef6=>!_0x1cdef6[a206_0x4b5e('0x8')])['size'];_0x43d451[_0x1e8a6e[_0x798504]]=_0x58dabf,_0x32a434+=_0x58dabf;}}await _0x38a8c2[a206_0x4b5e('0x1b')]({'embed':{'color':tesseract_1['Constants'][a206_0x4b5e('0x11')][a206_0x4b5e('0x22')],'author':{'name':a206_0x4b5e('0x7')},'title':_0x38a8c2[a206_0x4b5e('0xe')][0x0]['title'],'fields':_0x38a8c2[a206_0x4b5e('0xe')][0x0][a206_0x4b5e('0x1e')][a206_0x4b5e('0x29')](_0x12e223=>({'name':_0x12e223[a206_0x4b5e('0x14')]+'\x20'+_0x12e223[a206_0x4b5e('0x0')],'value':(_0x43d451[_0x12e223[a206_0x4b5e('0x14')]]||0x0)+a206_0x4b5e('0x3')+_0x32a434+'\x20votes\x20('+(_0x43d451[_0x12e223[a206_0x4b5e('0x14')]]?_0x43d451[_0x12e223[a206_0x4b5e('0x14')]]/_0x32a434*0x64:0x0)['toFixed'](0x2)+'%)'})),'footer':{'text':a206_0x4b5e('0x10')},'timestamp':new Date()}})[a206_0x4b5e('0x6')](()=>{_0x5bde71[a206_0x4b5e('0xc')](_0x38a8c2['id']);})[a206_0x4b5e('0x1c')](()=>{});}}_0x5bde71[a206_0x4b5e('0x1a')]&&await Poll_1[a206_0x4b5e('0xb')]['deleteMany']({'$or':_0x5bde71[a206_0x4b5e('0x29')](_0x100333=>({'_id':_0x100333}))})[a206_0x4b5e('0x1c')](()=>{});}catch(_0x39e710){tesseract_1[a206_0x4b5e('0x25')][a206_0x4b5e('0x17')](_0x39e710);}};}};
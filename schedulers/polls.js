const a226_0x4961=['fetch','1207898LajLhx','embeds','reactions','75655tpYjPr','4968nzCRCI','test','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','../models/Poll','client','has','name','guilds','Ended','_id','edit','615091ykzzax','filter','exports','toFixed','SOMEWHAT_DARK','catch','messages','size','28tKoqHR','polls','return\x20/\x22\x20+\x20this\x20+\x20\x22/','1FRGTzL','bot','Constants','constructor','error','272402svqkWv','2QyqRYO','value','channels','default','map','fields','push','then','cache','length','218SgDUGW','2327356eENbOV','deleteMany','channel','find','get','readyTimestamp','exec','users','title','\x20/\x20','3879BQItGj','slice'];const a226_0x2e45=function(_0xe1072,_0x2c3582){_0xe1072=_0xe1072-0x154;let _0x16e2e9=a226_0x4961[_0xe1072];return _0x16e2e9;};const a226_0x48b27c=a226_0x2e45;(function(_0x2c1734,_0x1b3cc2){const _0x5394df=a226_0x2e45;while(!![]){try{const _0x5b2127=-parseInt(_0x5394df(0x169))*parseInt(_0x5394df(0x156))+parseInt(_0x5394df(0x16c))*parseInt(_0x5394df(0x161))+parseInt(_0x5394df(0x18a))+parseInt(_0x5394df(0x187))*parseInt(_0x5394df(0x17c))+parseInt(_0x5394df(0x171))+parseInt(_0x5394df(0x172))*parseInt(_0x5394df(0x155))+-parseInt(_0x5394df(0x17d));if(_0x5b2127===_0x1b3cc2)break;else _0x2c1734['push'](_0x2c1734['shift']());}catch(_0x1d83c4){_0x2c1734['push'](_0x2c1734['shift']());}}}(a226_0x4961,0x98cc7));const a226_0xc4b755=function(){let _0x4fc21d=!![];return function(_0x63ae2e,_0x544d00){const _0x3efdd8=_0x4fc21d?function(){if(_0x544d00){const _0xe66870=_0x544d00['apply'](_0x63ae2e,arguments);return _0x544d00=null,_0xe66870;}}:function(){};return _0x4fc21d=![],_0x3efdd8;};}(),a226_0x4f1f4e=a226_0xc4b755(this,function(){const _0x14d460=function(){const _0x3bd62e=a226_0x2e45,_0x336494=_0x14d460[_0x3bd62e(0x16f)](_0x3bd62e(0x16b))()[_0x3bd62e(0x16f)](_0x3bd62e(0x158));return!_0x336494[_0x3bd62e(0x157)](a226_0x4f1f4e);};return _0x14d460();});a226_0x4f1f4e();'use strict';const tesseract_1=require('@bastion/tesseract'),Poll_1=require(a226_0x48b27c(0x159));module[a226_0x48b27c(0x163)]=class PollScheduler extends tesseract_1['Scheduler']{constructor(){const _0xad4176=a226_0x48b27c;super(_0xad4176(0x16a),{'cronTime':'0\x20*/15\x20*\x20*\x20*\x20*'}),this[_0xad4176(0x183)]=async()=>{const _0x32128f=_0xad4176;try{if(!this[_0x32128f(0x15a)][_0x32128f(0x182)])return;if(!this[_0x32128f(0x15a)][_0x32128f(0x15d)][_0x32128f(0x17a)][_0x32128f(0x168)])return;const _0x49781f=await Poll_1['default'][_0x32128f(0x180)]({'$or':this['client'][_0x32128f(0x15d)][_0x32128f(0x17a)]['map'](_0xe49806=>({'guild':_0xe49806['id']})),'ends':{'$lte':new Date()}}),_0x5afea6=[];for(const _0x2cf37c of _0x49781f){const _0x1f8a47=this['client'][_0x32128f(0x15d)]['cache'][_0x32128f(0x181)](_0x2cf37c['guild']);if(_0x1f8a47['channels'][_0x32128f(0x17a)]['has'](_0x2cf37c[_0x32128f(0x17f)])){const _0x22dda0=_0x1f8a47[_0x32128f(0x174)][_0x32128f(0x17a)][_0x32128f(0x181)](_0x2cf37c[_0x32128f(0x17f)]),_0x788b49=await _0x22dda0[_0x32128f(0x167)][_0x32128f(0x189)](_0x2cf37c[_0x32128f(0x15f)])['catch'](()=>{});if(!_0x788b49)continue;const _0x3af3c2=_0x788b49[_0x32128f(0x18b)][0x0]['fields']['map'](_0x25273e=>_0x25273e[_0x32128f(0x173)]),_0x38f8de=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'],_0x33e7fa={};let _0x26713b=0x0;for(const _0x58ee9d in _0x38f8de[_0x32128f(0x188)](0x0,_0x3af3c2['length'])){if(_0x788b49[_0x32128f(0x154)][_0x32128f(0x17a)][_0x32128f(0x15b)](_0x38f8de[_0x58ee9d])){await _0x788b49[_0x32128f(0x154)][_0x32128f(0x17a)][_0x32128f(0x181)](_0x38f8de[_0x58ee9d])[_0x32128f(0x184)][_0x32128f(0x189)]()[_0x32128f(0x166)](()=>{});const _0x4ff60a=_0x788b49[_0x32128f(0x154)][_0x32128f(0x17a)][_0x32128f(0x181)](_0x38f8de[_0x58ee9d])['users'][_0x32128f(0x17a)][_0x32128f(0x162)](_0x367f1a=>!_0x367f1a[_0x32128f(0x16d)])[_0x32128f(0x168)];_0x33e7fa[_0x38f8de[_0x58ee9d]]=_0x4ff60a,_0x26713b+=_0x4ff60a;}}await _0x788b49[_0x32128f(0x160)]({'embed':{'color':tesseract_1[_0x32128f(0x16e)]['COLORS'][_0x32128f(0x165)],'author':{'name':'POLL\x20ENDED'},'title':_0x788b49[_0x32128f(0x18b)][0x0][_0x32128f(0x185)],'fields':_0x788b49['embeds'][0x0][_0x32128f(0x177)][_0x32128f(0x176)](_0x277848=>({'name':_0x277848[_0x32128f(0x15c)]+'\x20'+_0x277848['value'],'value':(_0x33e7fa[_0x277848[_0x32128f(0x15c)]]||0x0)+_0x32128f(0x186)+_0x26713b+'\x20votes\x20('+(_0x33e7fa[_0x277848[_0x32128f(0x15c)]]?_0x33e7fa[_0x277848[_0x32128f(0x15c)]]/_0x26713b*0x64:0x0)[_0x32128f(0x164)](0x2)+'%)'})),'footer':{'text':_0x32128f(0x15e)},'timestamp':new Date()}})[_0x32128f(0x179)](()=>{const _0x396a3e=_0x32128f;_0x5afea6[_0x396a3e(0x178)](_0x788b49['id']);})[_0x32128f(0x166)](()=>{});}}_0x5afea6[_0x32128f(0x17b)]&&await Poll_1[_0x32128f(0x175)][_0x32128f(0x17e)]({'$or':_0x5afea6[_0x32128f(0x176)](_0x1f73fe=>({'_id':_0x1f73fe}))})[_0x32128f(0x166)](()=>{});}catch(_0x227754){tesseract_1['Logger'][_0x32128f(0x170)](_0x227754);}};}};
const a228_0x5044a4=a228_0x3bd3;(function(_0x3fa83b,_0x24a965){const _0x2823e7=a228_0x3bd3,_0x4bbe28=_0x3fa83b();while(!![]){try{const _0x423e23=parseInt(_0x2823e7(0xb7))/0x1+parseInt(_0x2823e7(0xa9))/0x2+parseInt(_0x2823e7(0x99))/0x3+-parseInt(_0x2823e7(0xca))/0x4*(parseInt(_0x2823e7(0xbf))/0x5)+parseInt(_0x2823e7(0xb6))/0x6+-parseInt(_0x2823e7(0xc3))/0x7*(-parseInt(_0x2823e7(0xb4))/0x8)+-parseInt(_0x2823e7(0xa6))/0x9;if(_0x423e23===_0x24a965)break;else _0x4bbe28['push'](_0x4bbe28['shift']());}catch(_0x529f88){_0x4bbe28['push'](_0x4bbe28['shift']());}}}(a228_0x1ab6,0xb86be));function a228_0x1ab6(){const _0x5ee670=['has','510936ZfHZap','Scheduler','search','exec','guilds','map','then','toString','\x20votes\x20(','title','Ended','11830616NoBZSu','size','1595544niNBei','519021pNtlqh','deleteMany','(((.+)+)+)+$','cache','get','Logger','catch','apply','5wpYmOB','reactions','bot','client','7WYeeRs','length','exports','embeds','filter','value','SOMEWHAT_DARK','265452tkHjpZ','messages','../models/Poll','3480369hJbaiv','constructor','edit','\x20/\x20','push','name','users','toFixed','Constants','channels','fields','find','fetch','25718490hDxeaO','POLL\x20ENDED'];a228_0x1ab6=function(){return _0x5ee670;};return a228_0x1ab6();}const a228_0x34a598=(function(){let _0x2141ac=!![];return function(_0x545398,_0x574e9a){const _0x4d3551=_0x2141ac?function(){const _0xd907fd=a228_0x3bd3;if(_0x574e9a){const _0x518af0=_0x574e9a[_0xd907fd(0xbe)](_0x545398,arguments);return _0x574e9a=null,_0x518af0;}}:function(){};return _0x2141ac=![],_0x4d3551;};}()),a228_0x40b917=a228_0x34a598(this,function(){const _0x106ba1=a228_0x3bd3;return a228_0x40b917[_0x106ba1(0xb0)]()[_0x106ba1(0xab)](_0x106ba1(0xb9))[_0x106ba1(0xb0)]()[_0x106ba1(0x9a)](a228_0x40b917)[_0x106ba1(0xab)]('(((.+)+)+)+$');});function a228_0x3bd3(_0x280ebe,_0x4844f4){const _0xf35e9=a228_0x1ab6();return a228_0x3bd3=function(_0x40b917,_0x34a598){_0x40b917=_0x40b917-0x99;let _0x1ab65b=_0xf35e9[_0x40b917];return _0x1ab65b;},a228_0x3bd3(_0x280ebe,_0x4844f4);}a228_0x40b917();'use strict';const tesseract_1=require('@bastion/tesseract'),Poll_1=require(a228_0x5044a4(0xcc));module[a228_0x5044a4(0xc5)]=class PollScheduler extends tesseract_1[a228_0x5044a4(0xaa)]{constructor(){super('polls',{'cronTime':'0\x20*/15\x20*\x20*\x20*\x20*'});}[a228_0x5044a4(0xac)]=async()=>{const _0x192cd1=a228_0x5044a4;try{if(!this[_0x192cd1(0xc2)]['readyTimestamp'])return;if(!this[_0x192cd1(0xc2)][_0x192cd1(0xad)]['cache'][_0x192cd1(0xb5)])return;const _0xce13d7=await Poll_1['default'][_0x192cd1(0xa4)]({'$or':this[_0x192cd1(0xc2)][_0x192cd1(0xad)][_0x192cd1(0xba)]['map'](_0x33f0b1=>({'guild':_0x33f0b1['id']})),'ends':{'$lte':new Date()}}),_0x308dde=[];for(const _0xfb0c80 of _0xce13d7){const _0x47ff9d=this['client'][_0x192cd1(0xad)][_0x192cd1(0xba)][_0x192cd1(0xbb)](_0xfb0c80['guild']);if(_0x47ff9d[_0x192cd1(0xa2)]['cache']['has'](_0xfb0c80['channel'])){const _0x1c1aed=_0x47ff9d[_0x192cd1(0xa2)][_0x192cd1(0xba)][_0x192cd1(0xbb)](_0xfb0c80['channel']),_0x37a3ec=await _0x1c1aed[_0x192cd1(0xcb)][_0x192cd1(0xa5)](_0xfb0c80['_id'])['catch'](()=>{});if(!_0x37a3ec)continue;const _0x1c8b9a=_0x37a3ec[_0x192cd1(0xc6)][0x0][_0x192cd1(0xa3)][_0x192cd1(0xae)](_0x21d873=>_0x21d873[_0x192cd1(0xc8)]),_0x248a35=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'],_0x502fe1={};let _0x47430b=0x0;for(const _0x3701d9 in _0x248a35['slice'](0x0,_0x1c8b9a[_0x192cd1(0xc4)])){if(_0x37a3ec['reactions'][_0x192cd1(0xba)][_0x192cd1(0xa8)](_0x248a35[_0x3701d9])){await _0x37a3ec['reactions'][_0x192cd1(0xba)][_0x192cd1(0xbb)](_0x248a35[_0x3701d9])[_0x192cd1(0x9f)]['fetch']()[_0x192cd1(0xbd)](()=>{});const _0x4789f1=_0x37a3ec[_0x192cd1(0xc0)][_0x192cd1(0xba)][_0x192cd1(0xbb)](_0x248a35[_0x3701d9])[_0x192cd1(0x9f)][_0x192cd1(0xba)][_0x192cd1(0xc7)](_0x5c4211=>!_0x5c4211[_0x192cd1(0xc1)])[_0x192cd1(0xb5)];_0x502fe1[_0x248a35[_0x3701d9]]=_0x4789f1,_0x47430b+=_0x4789f1;}}await _0x37a3ec[_0x192cd1(0x9b)]({'embed':{'color':tesseract_1[_0x192cd1(0xa1)]['COLORS'][_0x192cd1(0xc9)],'author':{'name':_0x192cd1(0xa7)},'title':_0x37a3ec[_0x192cd1(0xc6)][0x0][_0x192cd1(0xb2)],'fields':_0x37a3ec[_0x192cd1(0xc6)][0x0][_0x192cd1(0xa3)][_0x192cd1(0xae)](_0x244059=>({'name':_0x244059[_0x192cd1(0x9e)]+'\x20'+_0x244059[_0x192cd1(0xc8)],'value':(_0x502fe1[_0x244059['name']]||0x0)+_0x192cd1(0x9c)+_0x47430b+_0x192cd1(0xb1)+(_0x502fe1[_0x244059[_0x192cd1(0x9e)]]?_0x502fe1[_0x244059['name']]/_0x47430b*0x64:0x0)[_0x192cd1(0xa0)](0x2)+'%)'})),'footer':{'text':_0x192cd1(0xb3)},'timestamp':new Date()}})[_0x192cd1(0xaf)](()=>{const _0x1c77a8=_0x192cd1;_0x308dde[_0x1c77a8(0x9d)](_0x37a3ec['id']);})[_0x192cd1(0xbd)](()=>{});}}_0x308dde['length']&&await Poll_1['default'][_0x192cd1(0xb8)]({'$or':_0x308dde['map'](_0x4710b4=>({'_id':_0x4710b4}))})[_0x192cd1(0xbd)](()=>{});}catch(_0x4d6afa){tesseract_1[_0x192cd1(0xbc)]['error'](_0x4d6afa);}};};
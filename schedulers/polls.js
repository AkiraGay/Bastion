const a207_0x5e29=['get','then','Scheduler','client','default','SOMEWHAT_DARK','fields','readyTimestamp','map','edit','slice','find','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','cache','Constants','name','embeds','deleteMany','title','0\x20*/15\x20*\x20*\x20*\x20*','apply','reactions','Ended','messages','value','constructor','_id','polls','POLL\x20ENDED','error','fetch','return\x20/\x22\x20+\x20this\x20+\x20\x22/','has','users','guilds','../models/Poll','\x20votes\x20(','exec','size','channel','bot','toFixed','guild','channels','catch','push','test'];(function(_0x108606,_0x5e2994){const _0x207e2d=function(_0x29d60b){while(--_0x29d60b){_0x108606['push'](_0x108606['shift']());}},_0x2bbd70=function(){const _0xd50262={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x331117,_0x42626a,_0x3926e6,_0x533281){_0x533281=_0x533281||{};let _0x4a2608=_0x42626a+'='+_0x3926e6,_0x348112=0x0;for(let _0x6b2bc4=0x0,_0x45a087=_0x331117['length'];_0x6b2bc4<_0x45a087;_0x6b2bc4++){const _0x1c73f4=_0x331117[_0x6b2bc4];_0x4a2608+=';\x20'+_0x1c73f4;const _0x107bc0=_0x331117[_0x1c73f4];_0x331117['push'](_0x107bc0),_0x45a087=_0x331117['length'],_0x107bc0!==!![]&&(_0x4a2608+='='+_0x107bc0);}_0x533281['cookie']=_0x4a2608;},'removeCookie':function(){return'dev';},'getCookie':function(_0x43bef7,_0x4a6728){_0x43bef7=_0x43bef7||function(_0x3fa505){return _0x3fa505;};const _0x37373e=_0x43bef7(new RegExp('(?:^|;\x20)'+_0x4a6728['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x1fb0c8=function(_0x1c6ba5,_0x1ebbe3){_0x1c6ba5(++_0x1ebbe3);};return _0x1fb0c8(_0x207e2d,_0x5e2994),_0x37373e?decodeURIComponent(_0x37373e[0x1]):undefined;}},_0x1029cc=function(){const _0x307143=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x307143['test'](_0xd50262['removeCookie']['toString']());};_0xd50262['updateCookie']=_0x1029cc;let _0x1ede8f='';const _0x40c952=_0xd50262['updateCookie']();if(!_0x40c952)_0xd50262['setCookie'](['*'],'counter',0x1);else _0x40c952?_0x1ede8f=_0xd50262['getCookie'](null,'counter'):_0xd50262['removeCookie']();};_0x2bbd70();}(a207_0x5e29,0xa9));const a207_0x207e=function(_0x108606,_0x5e2994){_0x108606=_0x108606-0x0;let _0x207e2d=a207_0x5e29[_0x108606];return _0x207e2d;};const a207_0xd50262=function(){let _0x1ede8f=!![];return function(_0x40c952,_0x331117){const _0x42626a=_0x1ede8f?function(){if(_0x331117){const _0x3926e6=_0x331117[a207_0x207e('0x27')](_0x40c952,arguments);return _0x331117=null,_0x3926e6;}}:function(){};return _0x1ede8f=![],_0x42626a;};}(),a207_0x29d60b=a207_0xd50262(this,function(){const _0x533281=function(){const _0x4a2608=_0x533281[a207_0x207e('0x2c')](a207_0x207e('0x3'))()[a207_0x207e('0x2c')](a207_0x207e('0x1f'));return!_0x4a2608[a207_0x207e('0x12')](a207_0x29d60b);};return _0x533281();});a207_0x29d60b();'use strict';const tesseract_1=require('@bastion/tesseract'),Poll_1=require(a207_0x207e('0x7'));module['exports']=class PollScheduler extends tesseract_1[a207_0x207e('0x15')]{constructor(){super(a207_0x207e('0x2e'),{'cronTime':a207_0x207e('0x26')}),this[a207_0x207e('0x9')]=async()=>{try{if(!this[a207_0x207e('0x16')][a207_0x207e('0x1a')])return;if(!this[a207_0x207e('0x16')][a207_0x207e('0x6')][a207_0x207e('0x20')][a207_0x207e('0xa')])return;const _0x348112=await Poll_1[a207_0x207e('0x17')][a207_0x207e('0x1e')]({'$or':this[a207_0x207e('0x16')][a207_0x207e('0x6')][a207_0x207e('0x20')][a207_0x207e('0x1b')](_0x45a087=>({'guild':_0x45a087['id']})),'ends':{'$lte':new Date()}}),_0x6b2bc4=[];for(const _0x1c73f4 of _0x348112){const _0x107bc0=this[a207_0x207e('0x16')][a207_0x207e('0x6')][a207_0x207e('0x20')][a207_0x207e('0x13')](_0x1c73f4[a207_0x207e('0xe')]);if(_0x107bc0[a207_0x207e('0xf')][a207_0x207e('0x20')][a207_0x207e('0x4')](_0x1c73f4[a207_0x207e('0xb')])){const _0x43bef7=_0x107bc0[a207_0x207e('0xf')][a207_0x207e('0x20')][a207_0x207e('0x13')](_0x1c73f4['channel']),_0x4a6728=await _0x43bef7[a207_0x207e('0x2a')][a207_0x207e('0x2')](_0x1c73f4[a207_0x207e('0x2d')])[a207_0x207e('0x10')](()=>{});if(!_0x4a6728)continue;const _0x37373e=_0x4a6728['embeds'][0x0][a207_0x207e('0x19')]['map'](_0x1ebbe3=>_0x1ebbe3['value']),_0x1fb0c8=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'],_0x3fa505={};let _0x1c6ba5=0x0;for(const _0x307143 in _0x1fb0c8[a207_0x207e('0x1d')](0x0,_0x37373e['length'])){if(_0x4a6728[a207_0x207e('0x28')]['cache'][a207_0x207e('0x4')](_0x1fb0c8[_0x307143])){await _0x4a6728[a207_0x207e('0x28')][a207_0x207e('0x20')][a207_0x207e('0x13')](_0x1fb0c8[_0x307143])[a207_0x207e('0x5')][a207_0x207e('0x2')]()[a207_0x207e('0x10')](()=>{});const _0x4cee4b=_0x4a6728[a207_0x207e('0x28')][a207_0x207e('0x20')][a207_0x207e('0x13')](_0x1fb0c8[_0x307143])[a207_0x207e('0x5')]['cache']['filter'](_0x73c1b9=>!_0x73c1b9[a207_0x207e('0xc')])[a207_0x207e('0xa')];_0x3fa505[_0x1fb0c8[_0x307143]]=_0x4cee4b,_0x1c6ba5+=_0x4cee4b;}}await _0x4a6728[a207_0x207e('0x1c')]({'embed':{'color':tesseract_1[a207_0x207e('0x21')]['COLORS'][a207_0x207e('0x18')],'author':{'name':a207_0x207e('0x0')},'title':_0x4a6728[a207_0x207e('0x23')][0x0][a207_0x207e('0x25')],'fields':_0x4a6728[a207_0x207e('0x23')][0x0][a207_0x207e('0x19')][a207_0x207e('0x1b')](_0xe3bccb=>({'name':_0xe3bccb[a207_0x207e('0x22')]+'\x20'+_0xe3bccb[a207_0x207e('0x2b')],'value':(_0x3fa505[_0xe3bccb['name']]||0x0)+'\x20/\x20'+_0x1c6ba5+a207_0x207e('0x8')+(_0x3fa505[_0xe3bccb['name']]?_0x3fa505[_0xe3bccb['name']]/_0x1c6ba5*0x64:0x0)[a207_0x207e('0xd')](0x2)+'%)'})),'footer':{'text':a207_0x207e('0x29')},'timestamp':new Date()}})[a207_0x207e('0x14')](()=>{_0x6b2bc4[a207_0x207e('0x11')](_0x4a6728['id']);})[a207_0x207e('0x10')](()=>{});}}_0x6b2bc4['length']&&await Poll_1[a207_0x207e('0x17')][a207_0x207e('0x24')]({'$or':_0x6b2bc4[a207_0x207e('0x1b')](_0x50b15a=>({'_id':_0x50b15a}))})['catch'](()=>{});}catch(_0x1941a0){tesseract_1['Logger'][a207_0x207e('0x1')](_0x1941a0);}};}};
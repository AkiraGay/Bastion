const a195_0x4d16=['fetch','filter','size','Scheduler','has','test','return\x20/\x22\x20+\x20this\x20+\x20\x22/','channel','users','get','default','Constants','guilds','client','title','@bastion/tesseract','POLL\x20ENDED','constructor','length','../models/Poll','find','channels','value','toFixed','\x20/\x20','name','SOMEWHAT_DARK','reactions','cache','guild','messages','0\x20*/15\x20*\x20*\x20*\x20*','exec','push','deleteMany','map','embeds','exports','polls','catch','bot','Ended','compile','_id'];(function(_0x5959e1,_0x4d1683){const _0x728e22=function(_0x33800a){while(--_0x33800a){_0x5959e1['push'](_0x5959e1['shift']());}};const _0x712564=function(){const _0x2f9df4={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3b2206,_0x2f6163,_0x4c30a1,_0x2e9dc7){_0x2e9dc7=_0x2e9dc7||{};let _0xc17597=_0x2f6163+'='+_0x4c30a1;let _0x3b0689=0x0;for(let _0x2bdd2f=0x0,_0x1ac17d=_0x3b2206['length'];_0x2bdd2f<_0x1ac17d;_0x2bdd2f++){const _0x3c2839=_0x3b2206[_0x2bdd2f];_0xc17597+=';\x20'+_0x3c2839;const _0x349123=_0x3b2206[_0x3c2839];_0x3b2206['push'](_0x349123);_0x1ac17d=_0x3b2206['length'];if(_0x349123!==!![]){_0xc17597+='='+_0x349123;}}_0x2e9dc7['cookie']=_0xc17597;},'removeCookie':function(){return'dev';},'getCookie':function(_0x274305,_0x338716){_0x274305=_0x274305||function(_0x55d6fb){return _0x55d6fb;};const _0x517911=_0x274305(new RegExp('(?:^|;\x20)'+_0x338716['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x576341=function(_0x5885bb,_0x52c16c){_0x5885bb(++_0x52c16c);};_0x576341(_0x728e22,_0x4d1683);return _0x517911?decodeURIComponent(_0x517911[0x1]):undefined;}};const _0x2e32f8=function(){const _0x40184a=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x40184a['test'](_0x2f9df4['removeCookie']['toString']());};_0x2f9df4['updateCookie']=_0x2e32f8;let _0x5141a1='';const _0x1d2718=_0x2f9df4['updateCookie']();if(!_0x1d2718){_0x2f9df4['setCookie'](['*'],'counter',0x1);}else if(_0x1d2718){_0x5141a1=_0x2f9df4['getCookie'](null,'counter');}else{_0x2f9df4['removeCookie']();}};_0x712564();}(a195_0x4d16,0x1db));const a195_0x728e=function(_0x5959e1,_0x4d1683){_0x5959e1=_0x5959e1-0x0;let _0x728e22=a195_0x4d16[_0x5959e1];return _0x728e22;};const a195_0x2f9df4=function(){let _0x2da221=!![];return function(_0x2c5818,_0x38f0e6){const _0x160eba=_0x2da221?function(){if(_0x38f0e6){const _0x545194=_0x38f0e6['apply'](_0x2c5818,arguments);_0x38f0e6=null;return _0x545194;}}:function(){};_0x2da221=![];return _0x160eba;};}();const a195_0x33800a=a195_0x2f9df4(this,function(){const _0x1f50eb=function(){const _0x302ed7=_0x1f50eb[a195_0x728e('0x1a')](a195_0x728e('0xf'))()[a195_0x728e('0x7')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x302ed7[a195_0x728e('0xe')](a195_0x33800a);};return _0x1f50eb();});a195_0x33800a();'use strict';const tesseract_1=require(a195_0x728e('0x18'));const Poll_1=require(a195_0x728e('0x1c'));module[a195_0x728e('0x2')]=class PollScheduler extends tesseract_1[a195_0x728e('0xc')]{constructor(){super(a195_0x728e('0x3'),{'cronTime':a195_0x728e('0x28')});this[a195_0x728e('0x29')]=async()=>{if(!this[a195_0x728e('0x16')]['readyTimestamp'])return;if(!this['client']['guilds']['cache'][a195_0x728e('0xb')])return;const _0x3b68bd=await Poll_1[a195_0x728e('0x13')][a195_0x728e('0x1d')]({'$or':this[a195_0x728e('0x16')][a195_0x728e('0x15')][a195_0x728e('0x25')][a195_0x728e('0x0')](_0x46c8ab=>({'guild':_0x46c8ab['id']})),'ends':{'$lte':new Date()}});const _0x386e6a=[];for(const _0x192091 of _0x3b68bd){const _0x36ba9d=this['client'][a195_0x728e('0x15')][a195_0x728e('0x25')][a195_0x728e('0x12')](_0x192091[a195_0x728e('0x26')]);if(_0x36ba9d[a195_0x728e('0x1e')][a195_0x728e('0x25')][a195_0x728e('0xd')](_0x192091[a195_0x728e('0x10')])){const _0x259ce2=_0x36ba9d[a195_0x728e('0x1e')][a195_0x728e('0x25')][a195_0x728e('0x12')](_0x192091[a195_0x728e('0x10')]);const _0x1f682a=await _0x259ce2[a195_0x728e('0x27')][a195_0x728e('0x9')](_0x192091[a195_0x728e('0x8')])['catch'](()=>{});if(!_0x1f682a)continue;const _0x636742=_0x1f682a[a195_0x728e('0x1')][0x0]['fields'][a195_0x728e('0x0')](_0x1f7c5d=>_0x1f7c5d[a195_0x728e('0x1f')]);const _0xac9d19=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'];const _0x2416eb={};let _0x44856f=0x0;for(const _0x227e1d in _0xac9d19['slice'](0x0,_0x636742[a195_0x728e('0x1b')])){if(_0x1f682a['reactions'][a195_0x728e('0x25')][a195_0x728e('0xd')](_0xac9d19[_0x227e1d])){await _0x1f682a['reactions'][a195_0x728e('0x25')][a195_0x728e('0x12')](_0xac9d19[_0x227e1d])[a195_0x728e('0x11')][a195_0x728e('0x9')]()[a195_0x728e('0x4')](()=>{});const _0x46faaf=_0x1f682a[a195_0x728e('0x24')]['cache'][a195_0x728e('0x12')](_0xac9d19[_0x227e1d])[a195_0x728e('0x11')][a195_0x728e('0x25')][a195_0x728e('0xa')](_0x20dd3d=>!_0x20dd3d[a195_0x728e('0x5')])[a195_0x728e('0xb')];_0x2416eb[_0xac9d19[_0x227e1d]]=_0x46faaf;_0x44856f+=_0x46faaf;}}await _0x1f682a['edit']({'embed':{'color':tesseract_1[a195_0x728e('0x14')]['COLORS'][a195_0x728e('0x23')],'author':{'name':a195_0x728e('0x19')},'title':_0x1f682a[a195_0x728e('0x1')][0x0][a195_0x728e('0x17')],'fields':_0x1f682a[a195_0x728e('0x1')][0x0]['fields'][a195_0x728e('0x0')](_0x591e4c=>({'name':_0x591e4c['name']+'\x20'+_0x591e4c['value'],'value':(_0x2416eb[_0x591e4c[a195_0x728e('0x22')]]||0x0)+a195_0x728e('0x21')+_0x44856f+'\x20votes\x20('+(_0x2416eb[_0x591e4c[a195_0x728e('0x22')]]?_0x2416eb[_0x591e4c[a195_0x728e('0x22')]]/_0x44856f*0x64:0x0)[a195_0x728e('0x20')](0x2)+'%)'})),'footer':{'text':a195_0x728e('0x6')},'timestamp':new Date()}})['then'](()=>{_0x386e6a[a195_0x728e('0x2a')](_0x1f682a['id']);})[a195_0x728e('0x4')](()=>{});}}if(_0x386e6a[a195_0x728e('0x1b')]){await Poll_1['default'][a195_0x728e('0x2b')]({'$or':_0x386e6a[a195_0x728e('0x0')](_0x169672=>({'_id':_0x169672}))})[a195_0x728e('0x4')](()=>{});}};}};
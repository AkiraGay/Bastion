const a217_0x2243=['\x20/\x20','_id','channel','constructor','client','find','bot','cache','COLORS','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','has','return\x20/\x22\x20+\x20this\x20+\x20\x22/','@bastion/tesseract','messages','size','guilds','error','fields','Scheduler','get','readyTimestamp','Constants','reactions','length','embeds','catch','map','channels','SOMEWHAT_DARK','edit','Logger','\x20votes\x20(','slice','test','users','guild','apply','fetch','name','default','exec','../models/Poll'];(function(_0xa06132,_0x224355){const _0x838463=function(_0x1a632a){while(--_0x1a632a){_0xa06132['push'](_0xa06132['shift']());}},_0x400ec2=function(){const _0x548a60={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0xa0a975,_0xf62ceb,_0x46a635,_0x25b720){_0x25b720=_0x25b720||{};let _0x4e0dc2=_0xf62ceb+'='+_0x46a635,_0x4a8818=0x0;for(let _0x1609e5=0x0,_0x353b73=_0xa0a975['length'];_0x1609e5<_0x353b73;_0x1609e5++){const _0x1195c0=_0xa0a975[_0x1609e5];_0x4e0dc2+=';\x20'+_0x1195c0;const _0x34b560=_0xa0a975[_0x1195c0];_0xa0a975['push'](_0x34b560),_0x353b73=_0xa0a975['length'],_0x34b560!==!![]&&(_0x4e0dc2+='='+_0x34b560);}_0x25b720['cookie']=_0x4e0dc2;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5243ce,_0x169a29){_0x5243ce=_0x5243ce||function(_0xcc1bd9){return _0xcc1bd9;};const _0x14c16c=_0x5243ce(new RegExp('(?:^|;\x20)'+_0x169a29['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x4b1765=function(_0x5766a6,_0x1de640){_0x5766a6(++_0x1de640);};return _0x4b1765(_0x838463,_0x224355),_0x14c16c?decodeURIComponent(_0x14c16c[0x1]):undefined;}},_0x43ed85=function(){const _0x2b0c7a=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x2b0c7a['test'](_0x548a60['removeCookie']['toString']());};_0x548a60['updateCookie']=_0x43ed85;let _0x178e63='';const _0x1380cc=_0x548a60['updateCookie']();if(!_0x1380cc)_0x548a60['setCookie'](['*'],'counter',0x1);else _0x1380cc?_0x178e63=_0x548a60['getCookie'](null,'counter'):_0x548a60['removeCookie']();};_0x400ec2();}(a217_0x2243,0x73));const a217_0x8384=function(_0xa06132,_0x224355){_0xa06132=_0xa06132-0x0;let _0x838463=a217_0x2243[_0xa06132];return _0x838463;};const _0x2c5c93=a217_0x8384,a217_0x548a60=function(){let _0x178e63=!![];return function(_0x1380cc,_0xa0a975){const _0xf62ceb=_0x178e63?function(){const _0x137c09=a217_0x8384;if(_0xa0a975){const _0x46a635=_0xa0a975[_0x137c09('0x5')](_0x1380cc,arguments);return _0xa0a975=null,_0x46a635;}}:function(){};return _0x178e63=![],_0xf62ceb;};}(),a217_0x1a632a=a217_0x548a60(this,function(){const _0x25b720=function(){const _0x5b1f00=a217_0x8384,_0x4e0dc2=_0x25b720[_0x5b1f00('0xe')](_0x5b1f00('0x16'))()['constructor'](_0x5b1f00('0x14'));return!_0x4e0dc2[_0x5b1f00('0x2')](a217_0x1a632a);};return _0x25b720();});a217_0x1a632a();'use strict';const tesseract_1=require(_0x2c5c93('0x17')),Poll_1=require(_0x2c5c93('0xa'));module['exports']=class PollScheduler extends tesseract_1[_0x2c5c93('0x1d')]{constructor(){const _0x877fef=_0x2c5c93;super('polls',{'cronTime':'0\x20*/15\x20*\x20*\x20*\x20*'}),this[_0x877fef('0x9')]=async()=>{const _0x22f1d6=_0x877fef;try{if(!this['client'][_0x22f1d6('0x1f')])return;if(!this['client'][_0x22f1d6('0x1a')][_0x22f1d6('0x12')][_0x22f1d6('0x19')])return;const _0x4a8818=await Poll_1[_0x22f1d6('0x8')][_0x22f1d6('0x10')]({'$or':this[_0x22f1d6('0xf')][_0x22f1d6('0x1a')]['cache']['map'](_0x353b73=>({'guild':_0x353b73['id']})),'ends':{'$lte':new Date()}}),_0x1609e5=[];for(const _0x1195c0 of _0x4a8818){const _0x34b560=this[_0x22f1d6('0xf')][_0x22f1d6('0x1a')]['cache'][_0x22f1d6('0x1e')](_0x1195c0[_0x22f1d6('0x4')]);if(_0x34b560['channels'][_0x22f1d6('0x12')][_0x22f1d6('0x15')](_0x1195c0['channel'])){const _0x5243ce=_0x34b560[_0x22f1d6('0x26')][_0x22f1d6('0x12')][_0x22f1d6('0x1e')](_0x1195c0[_0x22f1d6('0xd')]),_0x169a29=await _0x5243ce[_0x22f1d6('0x18')][_0x22f1d6('0x6')](_0x1195c0[_0x22f1d6('0xc')])[_0x22f1d6('0x24')](()=>{});if(!_0x169a29)continue;const _0x14c16c=_0x169a29[_0x22f1d6('0x23')][0x0][_0x22f1d6('0x1c')][_0x22f1d6('0x25')](_0x1de640=>_0x1de640['value']),_0x4b1765=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'],_0xcc1bd9={};let _0x5766a6=0x0;for(const _0x2b0c7a in _0x4b1765[_0x22f1d6('0x1')](0x0,_0x14c16c['length'])){if(_0x169a29['reactions'][_0x22f1d6('0x12')][_0x22f1d6('0x15')](_0x4b1765[_0x2b0c7a])){await _0x169a29[_0x22f1d6('0x21')][_0x22f1d6('0x12')][_0x22f1d6('0x1e')](_0x4b1765[_0x2b0c7a])[_0x22f1d6('0x3')][_0x22f1d6('0x6')]()[_0x22f1d6('0x24')](()=>{});const _0x500eb6=_0x169a29[_0x22f1d6('0x21')]['cache']['get'](_0x4b1765[_0x2b0c7a])[_0x22f1d6('0x3')][_0x22f1d6('0x12')]['filter'](_0x16b676=>!_0x16b676[_0x22f1d6('0x11')])[_0x22f1d6('0x19')];_0xcc1bd9[_0x4b1765[_0x2b0c7a]]=_0x500eb6,_0x5766a6+=_0x500eb6;}}await _0x169a29[_0x22f1d6('0x28')]({'embed':{'color':tesseract_1[_0x22f1d6('0x20')][_0x22f1d6('0x13')][_0x22f1d6('0x27')],'author':{'name':'POLL\x20ENDED'},'title':_0x169a29[_0x22f1d6('0x23')][0x0]['title'],'fields':_0x169a29['embeds'][0x0][_0x22f1d6('0x1c')]['map'](_0x41db02=>({'name':_0x41db02[_0x22f1d6('0x7')]+'\x20'+_0x41db02['value'],'value':(_0xcc1bd9[_0x41db02[_0x22f1d6('0x7')]]||0x0)+_0x22f1d6('0xb')+_0x5766a6+_0x22f1d6('0x0')+(_0xcc1bd9[_0x41db02[_0x22f1d6('0x7')]]?_0xcc1bd9[_0x41db02[_0x22f1d6('0x7')]]/_0x5766a6*0x64:0x0)['toFixed'](0x2)+'%)'})),'footer':{'text':'Ended'},'timestamp':new Date()}})['then'](()=>{_0x1609e5['push'](_0x169a29['id']);})[_0x22f1d6('0x24')](()=>{});}}_0x1609e5[_0x22f1d6('0x22')]&&await Poll_1[_0x22f1d6('0x8')]['deleteMany']({'$or':_0x1609e5[_0x22f1d6('0x25')](_0x5d4943=>({'_id':_0x5d4943}))})['catch'](()=>{});}catch(_0x28b2a1){tesseract_1[_0x22f1d6('0x29')][_0x22f1d6('0x1b')](_0x28b2a1);}};}};
const a414_0x3e04=['Ended','length','push','0\x20*/15\x20*\x20*\x20*\x20*','Scheduler','map','then','fields','compile','POLL\x20ENDED','name','apply','title','\x20/\x20','readyTimestamp','bot','edit','_id','test','catch','channels','client','get','Constants','reactions','has','embeds','exec','find','cache','@bastion/tesseract','value','size','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','default','\x20votes\x20(','../models/Poll','guild','filter','messages','COLORS','return\x20/\x22\x20+\x20this\x20+\x20\x22/','users','channel','guilds','polls'];(function(_0x330c85,_0x3e0476){const _0xb23fb1=function(_0xc1ce13){while(--_0xc1ce13){_0x330c85['push'](_0x330c85['shift']());}};const _0x2b4bba=function(){const _0x418f88={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0xc918b5,_0x26149a,_0x254303,_0x432f9d){_0x432f9d=_0x432f9d||{};let _0x4a066e=_0x26149a+'='+_0x254303;let _0x42164d=0x0;for(let _0x54526c=0x0,_0x18844d=_0xc918b5['length'];_0x54526c<_0x18844d;_0x54526c++){const _0x40bbee=_0xc918b5[_0x54526c];_0x4a066e+=';\x20'+_0x40bbee;const _0x3cad20=_0xc918b5[_0x40bbee];_0xc918b5['push'](_0x3cad20);_0x18844d=_0xc918b5['length'];if(_0x3cad20!==!![]){_0x4a066e+='='+_0x3cad20;}}_0x432f9d['cookie']=_0x4a066e;},'removeCookie':function(){return'dev';},'getCookie':function(_0x6bc104,_0x246379){_0x6bc104=_0x6bc104||function(_0x51052d){return _0x51052d;};const _0x43e96e=_0x6bc104(new RegExp('(?:^|;\x20)'+_0x246379['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x378c2d=function(_0x4fe39f,_0x673c85){_0x4fe39f(++_0x673c85);};_0x378c2d(_0xb23fb1,_0x3e0476);return _0x43e96e?decodeURIComponent(_0x43e96e[0x1]):undefined;}};const _0x140c29=function(){const _0x5c856b=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x5c856b['test'](_0x418f88['removeCookie']['toString']());};_0x418f88['updateCookie']=_0x140c29;let _0x272b0f='';const _0x52d85c=_0x418f88['updateCookie']();if(!_0x52d85c){_0x418f88['setCookie'](['*'],'counter',0x1);}else if(_0x52d85c){_0x272b0f=_0x418f88['getCookie'](null,'counter');}else{_0x418f88['removeCookie']();}};_0x2b4bba();}(a414_0x3e04,0x13a));const a414_0xb23f=function(_0x330c85,_0x3e0476){_0x330c85=_0x330c85-0x0;let _0xb23fb1=a414_0x3e04[_0x330c85];return _0xb23fb1;};const a414_0x418f88=function(){let _0xc51ed0=!![];return function(_0x38ddf2,_0x588410){const _0x21ad73=_0xc51ed0?function(){if(_0x588410){const _0x40e1a0=_0x588410[a414_0xb23f('0x13')](_0x38ddf2,arguments);_0x588410=null;return _0x40e1a0;}}:function(){};_0xc51ed0=![];return _0x21ad73;};}();const a414_0xc1ce13=a414_0x418f88(this,function(){const _0x1eb1d5=function(){const _0x17b8e5=_0x1eb1d5['constructor'](a414_0xb23f('0x3'))()[a414_0xb23f('0x10')](a414_0xb23f('0x29'));return!_0x17b8e5[a414_0xb23f('0x1a')](a414_0xc1ce13);};return _0x1eb1d5();});a414_0xc1ce13();'use strict';const tesseract_1=require(a414_0xb23f('0x26'));const Poll_1=require(a414_0xb23f('0x2c'));module['exports']=class PollScheduler extends tesseract_1[a414_0xb23f('0xc')]{constructor(){super(a414_0xb23f('0x7'),{'cronTime':a414_0xb23f('0xb')});this[a414_0xb23f('0x23')]=async()=>{if(!this[a414_0xb23f('0x1d')][a414_0xb23f('0x16')])return;if(!this[a414_0xb23f('0x1d')]['guilds']['cache'][a414_0xb23f('0x28')])return;const _0x1935c4=await Poll_1['default'][a414_0xb23f('0x24')]({'$or':this[a414_0xb23f('0x1d')][a414_0xb23f('0x6')][a414_0xb23f('0x25')]['map'](_0x10c068=>({'guild':_0x10c068['id']})),'ends':{'$lte':new Date()}});const _0x45246d=[];for(const _0x4cb581 of _0x1935c4){const _0xd61b98=this[a414_0xb23f('0x1d')][a414_0xb23f('0x6')]['cache'][a414_0xb23f('0x1e')](_0x4cb581[a414_0xb23f('0x2d')]);if(_0xd61b98[a414_0xb23f('0x1c')][a414_0xb23f('0x25')][a414_0xb23f('0x21')](_0x4cb581[a414_0xb23f('0x5')])){const _0x56453e=_0xd61b98['channels']['cache'][a414_0xb23f('0x1e')](_0x4cb581['channel']);const _0x196218=await _0x56453e[a414_0xb23f('0x1')]['fetch'](_0x4cb581[a414_0xb23f('0x19')])[a414_0xb23f('0x1b')](()=>{});if(!_0x196218)continue;const _0x21c78e=_0x196218[a414_0xb23f('0x22')][0x0]['fields'][a414_0xb23f('0xd')](_0x3586bc=>_0x3586bc['value']);const _0x21def4=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'];const _0x82cef8={};let _0xbc7930=0x0;for(const _0x2a2999 in _0x21def4['slice'](0x0,_0x21c78e[a414_0xb23f('0x9')])){if(_0x196218[a414_0xb23f('0x20')][a414_0xb23f('0x25')][a414_0xb23f('0x21')](_0x21def4[_0x2a2999])){await _0x196218[a414_0xb23f('0x20')][a414_0xb23f('0x25')][a414_0xb23f('0x1e')](_0x21def4[_0x2a2999])[a414_0xb23f('0x4')]['fetch']()[a414_0xb23f('0x1b')](()=>{});const _0x3b7a7a=_0x196218[a414_0xb23f('0x20')][a414_0xb23f('0x25')]['get'](_0x21def4[_0x2a2999])[a414_0xb23f('0x4')][a414_0xb23f('0x25')][a414_0xb23f('0x0')](_0x2f5c6f=>!_0x2f5c6f[a414_0xb23f('0x17')])[a414_0xb23f('0x28')];_0x82cef8[_0x21def4[_0x2a2999]]=_0x3b7a7a;_0xbc7930+=_0x3b7a7a;}}await _0x196218[a414_0xb23f('0x18')]({'embed':{'color':tesseract_1[a414_0xb23f('0x1f')][a414_0xb23f('0x2')]['SOMEWHAT_DARK'],'author':{'name':a414_0xb23f('0x11')},'title':_0x196218[a414_0xb23f('0x22')][0x0][a414_0xb23f('0x14')],'fields':_0x196218[a414_0xb23f('0x22')][0x0][a414_0xb23f('0xf')][a414_0xb23f('0xd')](_0x5a273f=>({'name':_0x5a273f[a414_0xb23f('0x12')]+'\x20'+_0x5a273f[a414_0xb23f('0x27')],'value':(_0x82cef8[_0x5a273f['name']]||0x0)+a414_0xb23f('0x15')+_0xbc7930+a414_0xb23f('0x2b')+(_0x82cef8[_0x5a273f[a414_0xb23f('0x12')]]?_0x82cef8[_0x5a273f['name']]/_0xbc7930*0x64:0x0)['toFixed'](0x2)+'%)'})),'footer':{'text':a414_0xb23f('0x8')},'timestamp':new Date()}})[a414_0xb23f('0xe')](()=>{_0x45246d[a414_0xb23f('0xa')](_0x196218['id']);})['catch'](()=>{});}}if(_0x45246d['length']){await Poll_1[a414_0xb23f('0x2a')]['deleteMany']({'$or':_0x45246d[a414_0xb23f('0xd')](_0x441072=>({'_id':_0x441072}))})[a414_0xb23f('0x1b')](()=>{});}};}};
const a194_0x504d=['Ended','get','cache','users','guild','POLL\x20ENDED','Constants','find','length','edit','filter','return\x20/\x22\x20+\x20this\x20+\x20\x22/','map','fetch','reactions','value','default','compile','channel','size','constructor','title','has','fields','polls','name','slice','client','@bastion/tesseract','SOMEWHAT_DARK','deleteMany','../models/Poll','_id','\x20votes\x20(','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','catch','embeds','guilds','exec','toFixed','readyTimestamp'];(function(_0x673b75,_0x504d65){const _0x24e075=function(_0x4b4486){while(--_0x4b4486){_0x673b75['push'](_0x673b75['shift']());}};const _0x400ade=function(){const _0x2984f4={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x28a364,_0x32eb37,_0x9cf846,_0x5bbdc8){_0x5bbdc8=_0x5bbdc8||{};let _0xe67b4=_0x32eb37+'='+_0x9cf846;let _0x259763=0x0;for(let _0x550b06=0x0,_0x4b7bde=_0x28a364['length'];_0x550b06<_0x4b7bde;_0x550b06++){const _0x1923a4=_0x28a364[_0x550b06];_0xe67b4+=';\x20'+_0x1923a4;const _0x58c60a=_0x28a364[_0x1923a4];_0x28a364['push'](_0x58c60a);_0x4b7bde=_0x28a364['length'];if(_0x58c60a!==!![]){_0xe67b4+='='+_0x58c60a;}}_0x5bbdc8['cookie']=_0xe67b4;},'removeCookie':function(){return'dev';},'getCookie':function(_0x450678,_0x179919){_0x450678=_0x450678||function(_0x28573a){return _0x28573a;};const _0x2007f8=_0x450678(new RegExp('(?:^|;\x20)'+_0x179919['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x2f6564=function(_0x55f6b9,_0x182a91){_0x55f6b9(++_0x182a91);};_0x2f6564(_0x24e075,_0x504d65);return _0x2007f8?decodeURIComponent(_0x2007f8[0x1]):undefined;}};const _0x2a373e=function(){const _0x2181da=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x2181da['test'](_0x2984f4['removeCookie']['toString']());};_0x2984f4['updateCookie']=_0x2a373e;let _0x47ee02='';const _0x2bf5dd=_0x2984f4['updateCookie']();if(!_0x2bf5dd){_0x2984f4['setCookie'](['*'],'counter',0x1);}else if(_0x2bf5dd){_0x47ee02=_0x2984f4['getCookie'](null,'counter');}else{_0x2984f4['removeCookie']();}};_0x400ade();}(a194_0x504d,0x7f));const a194_0x24e0=function(_0x673b75,_0x504d65){_0x673b75=_0x673b75-0x0;let _0x24e075=a194_0x504d[_0x673b75];return _0x24e075;};const a194_0x2984f4=function(){let _0x4937e9=!![];return function(_0xb101ac,_0x3789af){const _0x497042=_0x4937e9?function(){if(_0x3789af){const _0x680373=_0x3789af['apply'](_0xb101ac,arguments);_0x3789af=null;return _0x680373;}}:function(){};_0x4937e9=![];return _0x497042;};}();const a194_0x4b4486=a194_0x2984f4(this,function(){const _0x56b180=function(){const _0x29b64a=_0x56b180[a194_0x24e0('0x10')](a194_0x24e0('0x7'))()[a194_0x24e0('0xd')](a194_0x24e0('0x1e'));return!_0x29b64a['test'](a194_0x4b4486);};return _0x56b180();});a194_0x4b4486();'use strict';const tesseract_1=require(a194_0x24e0('0x18'));const Poll_1=require(a194_0x24e0('0x1b'));module['exports']=class PollScheduler extends tesseract_1['Scheduler']{constructor(){super(a194_0x24e0('0x14'),{'cronTime':'0\x20*/15\x20*\x20*\x20*\x20*'});this[a194_0x24e0('0x22')]=async()=>{if(!this[a194_0x24e0('0x17')][a194_0x24e0('0x24')])return;if(!this[a194_0x24e0('0x17')][a194_0x24e0('0x21')]['cache'][a194_0x24e0('0xf')])return;const _0x413ba9=await Poll_1[a194_0x24e0('0xc')][a194_0x24e0('0x3')]({'$or':this['client']['guilds'][a194_0x24e0('0x27')][a194_0x24e0('0x8')](_0x22b006=>({'guild':_0x22b006['id']})),'ends':{'$lte':new Date()}});const _0x599936=[];for(const _0x22d5ee of _0x413ba9){const _0x3792da=this[a194_0x24e0('0x17')][a194_0x24e0('0x21')][a194_0x24e0('0x27')][a194_0x24e0('0x26')](_0x22d5ee[a194_0x24e0('0x0')]);if(_0x3792da['channels'][a194_0x24e0('0x27')][a194_0x24e0('0x12')](_0x22d5ee[a194_0x24e0('0xe')])){const _0x4235da=_0x3792da['channels'][a194_0x24e0('0x27')][a194_0x24e0('0x26')](_0x22d5ee[a194_0x24e0('0xe')]);const _0x20d60d=await _0x4235da['messages'][a194_0x24e0('0x9')](_0x22d5ee[a194_0x24e0('0x1c')])[a194_0x24e0('0x1f')](()=>{});if(!_0x20d60d)continue;const _0x1ad2a0=_0x20d60d['embeds'][0x0]['fields'][a194_0x24e0('0x8')](_0x489dfc=>_0x489dfc[a194_0x24e0('0xb')]);const _0xc2e40a=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'];const _0x3a9e23={};let _0x562135=0x0;for(const _0x46e71a in _0xc2e40a[a194_0x24e0('0x16')](0x0,_0x1ad2a0['length'])){if(_0x20d60d[a194_0x24e0('0xa')][a194_0x24e0('0x27')][a194_0x24e0('0x12')](_0xc2e40a[_0x46e71a])){await _0x20d60d[a194_0x24e0('0xa')][a194_0x24e0('0x27')]['get'](_0xc2e40a[_0x46e71a])[a194_0x24e0('0x28')][a194_0x24e0('0x9')]()[a194_0x24e0('0x1f')](()=>{});const _0x23036d=_0x20d60d['reactions'][a194_0x24e0('0x27')]['get'](_0xc2e40a[_0x46e71a])[a194_0x24e0('0x28')][a194_0x24e0('0x27')][a194_0x24e0('0x6')](_0x5ab4ad=>!_0x5ab4ad['bot'])['size'];_0x3a9e23[_0xc2e40a[_0x46e71a]]=_0x23036d;_0x562135+=_0x23036d;}}await _0x20d60d[a194_0x24e0('0x5')]({'embed':{'color':tesseract_1[a194_0x24e0('0x2')]['COLORS'][a194_0x24e0('0x19')],'author':{'name':a194_0x24e0('0x1')},'title':_0x20d60d[a194_0x24e0('0x20')][0x0][a194_0x24e0('0x11')],'fields':_0x20d60d[a194_0x24e0('0x20')][0x0][a194_0x24e0('0x13')][a194_0x24e0('0x8')](_0x13b336=>({'name':_0x13b336['name']+'\x20'+_0x13b336[a194_0x24e0('0xb')],'value':(_0x3a9e23[_0x13b336[a194_0x24e0('0x15')]]||0x0)+'\x20/\x20'+_0x562135+a194_0x24e0('0x1d')+(_0x3a9e23[_0x13b336[a194_0x24e0('0x15')]]?_0x3a9e23[_0x13b336[a194_0x24e0('0x15')]]/_0x562135*0x64:0x0)[a194_0x24e0('0x23')](0x2)+'%)'})),'footer':{'text':a194_0x24e0('0x25')},'timestamp':new Date()}})['then'](()=>{_0x599936['push'](_0x20d60d['id']);})['catch'](()=>{});}}if(_0x599936[a194_0x24e0('0x4')]){await Poll_1[a194_0x24e0('0xc')][a194_0x24e0('0x1a')]({'$or':_0x599936[a194_0x24e0('0x8')](_0x47b60e=>({'_id':_0x47b60e}))})[a194_0x24e0('0x1f')](()=>{});}};}};
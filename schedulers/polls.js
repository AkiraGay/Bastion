const a194_0x5ead=['apply','embeds','exports','fetch','client','has','value','edit','then','Ended','slice','_id','push','length','Constants','@bastion/tesseract','default','cache','guild','constructor','0\x20*/15\x20*\x20*\x20*\x20*','\x20votes\x20(','name','size','filter','map','compile','exec','toFixed','title','users','messages','guilds','SOMEWHAT_DARK','reactions','channel','fields','Scheduler','POLL\x20ENDED','COLORS','../models/Poll','get','polls','deleteMany','catch'];(function(_0x298770,_0x5eada3){const _0x2ee579=function(_0x42c412){while(--_0x42c412){_0x298770['push'](_0x298770['shift']());}};const _0xa48aa3=function(){const _0x43df2e={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x59c57d,_0x23c389,_0x5f1b44,_0x552db7){_0x552db7=_0x552db7||{};let _0x12f81d=_0x23c389+'='+_0x5f1b44;let _0x1afbfa=0x0;for(let _0x16b14c=0x0,_0x22b99e=_0x59c57d['length'];_0x16b14c<_0x22b99e;_0x16b14c++){const _0x2ac9f9=_0x59c57d[_0x16b14c];_0x12f81d+=';\x20'+_0x2ac9f9;const _0xd79ad8=_0x59c57d[_0x2ac9f9];_0x59c57d['push'](_0xd79ad8);_0x22b99e=_0x59c57d['length'];if(_0xd79ad8!==!![]){_0x12f81d+='='+_0xd79ad8;}}_0x552db7['cookie']=_0x12f81d;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3e0baa,_0x3ff8a7){_0x3e0baa=_0x3e0baa||function(_0x5c7797){return _0x5c7797;};const _0x5af091=_0x3e0baa(new RegExp('(?:^|;\x20)'+_0x3ff8a7['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0xa9a113=function(_0x4eb2d8,_0x39bd69){_0x4eb2d8(++_0x39bd69);};_0xa9a113(_0x2ee579,_0x5eada3);return _0x5af091?decodeURIComponent(_0x5af091[0x1]):undefined;}};const _0x37120a=function(){const _0x1055fe=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x1055fe['test'](_0x43df2e['removeCookie']['toString']());};_0x43df2e['updateCookie']=_0x37120a;let _0xd89625='';const _0x3c2381=_0x43df2e['updateCookie']();if(!_0x3c2381){_0x43df2e['setCookie'](['*'],'counter',0x1);}else if(_0x3c2381){_0xd89625=_0x43df2e['getCookie'](null,'counter');}else{_0x43df2e['removeCookie']();}};_0xa48aa3();}(a194_0x5ead,0x112));const a194_0x2ee5=function(_0x298770,_0x5eada3){_0x298770=_0x298770-0x0;let _0x2ee579=a194_0x5ead[_0x298770];return _0x2ee579;};const a194_0x43df2e=function(){let _0x1db8ac=!![];return function(_0x5d8d88,_0x335824){const _0x579a0f=_0x1db8ac?function(){if(_0x335824){const _0x28343c=_0x335824[a194_0x2ee5('0x29')](_0x5d8d88,arguments);_0x335824=null;return _0x28343c;}}:function(){};_0x1db8ac=![];return _0x579a0f;};}();const a194_0x42c412=a194_0x43df2e(this,function(){const _0x21ea23=function(){const _0x2a4698=_0x21ea23[a194_0x2ee5('0xf')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a194_0x2ee5('0x16')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x2a4698['test'](a194_0x42c412);};return _0x21ea23();});a194_0x42c412();'use strict';const tesseract_1=require(a194_0x2ee5('0xb'));const Poll_1=require(a194_0x2ee5('0x24'));module[a194_0x2ee5('0x2b')]=class PollScheduler extends tesseract_1[a194_0x2ee5('0x21')]{constructor(){super(a194_0x2ee5('0x26'),{'cronTime':a194_0x2ee5('0x10')});this[a194_0x2ee5('0x17')]=async()=>{if(!this[a194_0x2ee5('0x0')]['readyTimestamp'])return;if(!this[a194_0x2ee5('0x0')]['guilds']['cache'][a194_0x2ee5('0x13')])return;const _0x1eb464=await Poll_1[a194_0x2ee5('0xc')]['find']({'$or':this['client'][a194_0x2ee5('0x1c')][a194_0x2ee5('0xd')]['map'](_0x1703fb=>({'guild':_0x1703fb['id']})),'ends':{'$lte':new Date()}});const _0xb65bfd=[];for(const _0x9ae7e7 of _0x1eb464){const _0x5b875a=this[a194_0x2ee5('0x0')]['guilds'][a194_0x2ee5('0xd')]['get'](_0x9ae7e7[a194_0x2ee5('0xe')]);if(_0x5b875a['channels'][a194_0x2ee5('0xd')][a194_0x2ee5('0x1')](_0x9ae7e7[a194_0x2ee5('0x1f')])){const _0x5550ab=_0x5b875a['channels']['cache']['get'](_0x9ae7e7[a194_0x2ee5('0x1f')]);const _0x14815a=await _0x5550ab[a194_0x2ee5('0x1b')][a194_0x2ee5('0x2c')](_0x9ae7e7[a194_0x2ee5('0x7')])[a194_0x2ee5('0x28')](()=>{});if(!_0x14815a)continue;const _0x4f6367=_0x14815a[a194_0x2ee5('0x2a')][0x0][a194_0x2ee5('0x20')][a194_0x2ee5('0x15')](_0xdd3362=>_0xdd3362[a194_0x2ee5('0x2')]);const _0x419584=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'];const _0x464569={};let _0x5105fc=0x0;for(const _0x54b859 in _0x419584[a194_0x2ee5('0x6')](0x0,_0x4f6367[a194_0x2ee5('0x9')])){if(_0x14815a['reactions']['cache'][a194_0x2ee5('0x1')](_0x419584[_0x54b859])){await _0x14815a['reactions'][a194_0x2ee5('0xd')]['get'](_0x419584[_0x54b859])[a194_0x2ee5('0x1a')][a194_0x2ee5('0x2c')]()[a194_0x2ee5('0x28')](()=>{});const _0x82f055=_0x14815a[a194_0x2ee5('0x1e')]['cache'][a194_0x2ee5('0x25')](_0x419584[_0x54b859])[a194_0x2ee5('0x1a')][a194_0x2ee5('0xd')][a194_0x2ee5('0x14')](_0x174c72=>!_0x174c72['bot'])[a194_0x2ee5('0x13')];_0x464569[_0x419584[_0x54b859]]=_0x82f055;_0x5105fc+=_0x82f055;}}await _0x14815a[a194_0x2ee5('0x3')]({'embed':{'color':tesseract_1[a194_0x2ee5('0xa')][a194_0x2ee5('0x23')][a194_0x2ee5('0x1d')],'author':{'name':a194_0x2ee5('0x22')},'title':_0x14815a[a194_0x2ee5('0x2a')][0x0][a194_0x2ee5('0x19')],'fields':_0x14815a[a194_0x2ee5('0x2a')][0x0][a194_0x2ee5('0x20')][a194_0x2ee5('0x15')](_0x208bc0=>({'name':_0x208bc0[a194_0x2ee5('0x12')]+'\x20'+_0x208bc0[a194_0x2ee5('0x2')],'value':(_0x464569[_0x208bc0[a194_0x2ee5('0x12')]]||0x0)+'\x20/\x20'+_0x5105fc+a194_0x2ee5('0x11')+(_0x464569[_0x208bc0['name']]?_0x464569[_0x208bc0[a194_0x2ee5('0x12')]]/_0x5105fc*0x64:0x0)[a194_0x2ee5('0x18')](0x2)+'%)'})),'footer':{'text':a194_0x2ee5('0x5')},'timestamp':new Date()}})[a194_0x2ee5('0x4')](()=>{_0xb65bfd[a194_0x2ee5('0x8')](_0x14815a['id']);})[a194_0x2ee5('0x28')](()=>{});}}if(_0xb65bfd[a194_0x2ee5('0x9')]){await Poll_1['default'][a194_0x2ee5('0x27')]({'$or':_0xb65bfd[a194_0x2ee5('0x15')](_0x5f7462=>({'_id':_0x5f7462}))})[a194_0x2ee5('0x28')](()=>{});}};}};
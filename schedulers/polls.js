const a195_0x41d1=['\x20votes\x20(','bot','constructor','catch','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','exports','fetch','embeds','Constants','messages','POLL\x20ENDED','deleteMany','Ended','users','edit','return\x20/\x22\x20+\x20this\x20+\x20\x22/','guilds','length','size','cache','toFixed','has','default','map','fields','channel','0\x20*/15\x20*\x20*\x20*\x20*','SOMEWHAT_DARK','client','Scheduler','filter','COLORS','channels','@bastion/tesseract','reactions','get','then','apply','compile','name','readyTimestamp'];(function(_0x314fe7,_0x41d1bb){const _0x45807f=function(_0x5d15f5){while(--_0x5d15f5){_0x314fe7['push'](_0x314fe7['shift']());}};const _0x532214=function(){const _0x5d70d7={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x12d662,_0x23a536,_0x291739,_0x5185d2){_0x5185d2=_0x5185d2||{};let _0x3a8a1c=_0x23a536+'='+_0x291739;let _0x587442=0x0;for(let _0x175222=0x0,_0x7fa6db=_0x12d662['length'];_0x175222<_0x7fa6db;_0x175222++){const _0x5a097b=_0x12d662[_0x175222];_0x3a8a1c+=';\x20'+_0x5a097b;const _0x32d1b3=_0x12d662[_0x5a097b];_0x12d662['push'](_0x32d1b3);_0x7fa6db=_0x12d662['length'];if(_0x32d1b3!==!![]){_0x3a8a1c+='='+_0x32d1b3;}}_0x5185d2['cookie']=_0x3a8a1c;},'removeCookie':function(){return'dev';},'getCookie':function(_0x50c67a,_0x49aac9){_0x50c67a=_0x50c67a||function(_0x43af86){return _0x43af86;};const _0x1ccca5=_0x50c67a(new RegExp('(?:^|;\x20)'+_0x49aac9['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x1ac01b=function(_0xb5538a,_0x474745){_0xb5538a(++_0x474745);};_0x1ac01b(_0x45807f,_0x41d1bb);return _0x1ccca5?decodeURIComponent(_0x1ccca5[0x1]):undefined;}};const _0x5ded84=function(){const _0x50d78c=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x50d78c['test'](_0x5d70d7['removeCookie']['toString']());};_0x5d70d7['updateCookie']=_0x5ded84;let _0x11d20d='';const _0x442529=_0x5d70d7['updateCookie']();if(!_0x442529){_0x5d70d7['setCookie'](['*'],'counter',0x1);}else if(_0x442529){_0x11d20d=_0x5d70d7['getCookie'](null,'counter');}else{_0x5d70d7['removeCookie']();}};_0x532214();}(a195_0x41d1,0x70));const a195_0x4580=function(_0x314fe7,_0x41d1bb){_0x314fe7=_0x314fe7-0x0;let _0x45807f=a195_0x41d1[_0x314fe7];return _0x45807f;};const a195_0x5d70d7=function(){let _0x394bd6=!![];return function(_0x25792f,_0x161da7){const _0x5aa88f=_0x394bd6?function(){if(_0x161da7){const _0x1d863c=_0x161da7[a195_0x4580('0x7')](_0x25792f,arguments);_0x161da7=null;return _0x1d863c;}}:function(){};_0x394bd6=![];return _0x5aa88f;};}();const a195_0x5d15f5=a195_0x5d70d7(this,function(){const _0x419c9c=function(){const _0x3e2de3=_0x419c9c[a195_0x4580('0xd')](a195_0x4580('0x1a'))()[a195_0x4580('0x8')](a195_0x4580('0xf'));return!_0x3e2de3['test'](a195_0x5d15f5);};return _0x419c9c();});a195_0x5d15f5();'use strict';const tesseract_1=require(a195_0x4580('0x3'));const Poll_1=require('../models/Poll');module[a195_0x4580('0x10')]=class PollScheduler extends tesseract_1[a195_0x4580('0x28')]{constructor(){super('polls',{'cronTime':a195_0x4580('0x25')});this['exec']=async()=>{if(!this['client'][a195_0x4580('0xa')])return;if(!this[a195_0x4580('0x27')][a195_0x4580('0x1b')][a195_0x4580('0x1e')][a195_0x4580('0x1d')])return;const _0x4a0121=await Poll_1['default']['find']({'$or':this[a195_0x4580('0x27')]['guilds'][a195_0x4580('0x1e')][a195_0x4580('0x22')](_0x313882=>({'guild':_0x313882['id']})),'ends':{'$lte':new Date()}});const _0x127021=[];for(const _0x3250d4 of _0x4a0121){const _0x1336e6=this[a195_0x4580('0x27')]['guilds'][a195_0x4580('0x1e')][a195_0x4580('0x5')](_0x3250d4['guild']);if(_0x1336e6[a195_0x4580('0x2')][a195_0x4580('0x1e')][a195_0x4580('0x20')](_0x3250d4[a195_0x4580('0x24')])){const _0x41ed59=_0x1336e6[a195_0x4580('0x2')][a195_0x4580('0x1e')][a195_0x4580('0x5')](_0x3250d4[a195_0x4580('0x24')]);const _0x57387d=await _0x41ed59[a195_0x4580('0x14')][a195_0x4580('0x11')](_0x3250d4['_id'])['catch'](()=>{});if(!_0x57387d)continue;const _0x81013b=_0x57387d['embeds'][0x0]['fields'][a195_0x4580('0x22')](_0x1f0c23=>_0x1f0c23['value']);const _0x2232fa=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'];const _0x2ea10e={};let _0x5ca061=0x0;for(const _0x442907 in _0x2232fa['slice'](0x0,_0x81013b[a195_0x4580('0x1c')])){if(_0x57387d[a195_0x4580('0x4')][a195_0x4580('0x1e')][a195_0x4580('0x20')](_0x2232fa[_0x442907])){await _0x57387d[a195_0x4580('0x4')]['cache'][a195_0x4580('0x5')](_0x2232fa[_0x442907])['users']['fetch']()['catch'](()=>{});const _0x18f741=_0x57387d[a195_0x4580('0x4')][a195_0x4580('0x1e')][a195_0x4580('0x5')](_0x2232fa[_0x442907])[a195_0x4580('0x18')][a195_0x4580('0x1e')][a195_0x4580('0x0')](_0x423db0=>!_0x423db0[a195_0x4580('0xc')])[a195_0x4580('0x1d')];_0x2ea10e[_0x2232fa[_0x442907]]=_0x18f741;_0x5ca061+=_0x18f741;}}await _0x57387d[a195_0x4580('0x19')]({'embed':{'color':tesseract_1[a195_0x4580('0x13')][a195_0x4580('0x1')][a195_0x4580('0x26')],'author':{'name':a195_0x4580('0x15')},'title':_0x57387d[a195_0x4580('0x12')][0x0]['title'],'fields':_0x57387d[a195_0x4580('0x12')][0x0][a195_0x4580('0x23')][a195_0x4580('0x22')](_0x137094=>({'name':_0x137094[a195_0x4580('0x9')]+'\x20'+_0x137094['value'],'value':(_0x2ea10e[_0x137094[a195_0x4580('0x9')]]||0x0)+'\x20/\x20'+_0x5ca061+a195_0x4580('0xb')+(_0x2ea10e[_0x137094['name']]?_0x2ea10e[_0x137094[a195_0x4580('0x9')]]/_0x5ca061*0x64:0x0)[a195_0x4580('0x1f')](0x2)+'%)'})),'footer':{'text':a195_0x4580('0x17')},'timestamp':new Date()}})[a195_0x4580('0x6')](()=>{_0x127021['push'](_0x57387d['id']);})[a195_0x4580('0xe')](()=>{});}}if(_0x127021[a195_0x4580('0x1c')]){await Poll_1[a195_0x4580('0x21')][a195_0x4580('0x16')]({'$or':_0x127021[a195_0x4580('0x22')](_0x13cb13=>({'_id':_0x13cb13}))})[a195_0x4580('0xe')](()=>{});}};}};
const a208_0x2679=['has','messages','return\x20/\x22\x20+\x20this\x20+\x20\x22/','then','catch','deleteMany','_id','get','apply','push','@bastion/tesseract','users','channels','test','map','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','guilds','name','reactions','channel','Constants','length','COLORS','polls','embeds','exports','slice','fields','fetch','default','\x20votes\x20(','size','\x20/\x20','value','readyTimestamp','find','constructor','toFixed','client','filter','cache'];(function(_0x3f999c,_0x267938){const _0x224ddc=function(_0x15da24){while(--_0x15da24){_0x3f999c['push'](_0x3f999c['shift']());}},_0x10a807=function(){const _0x301d19={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3c9cf4,_0x5ac08b,_0x9400f7,_0x34bacd){_0x34bacd=_0x34bacd||{};let _0x5a4726=_0x5ac08b+'='+_0x9400f7,_0x3d3177=0x0;for(let _0x1335bc=0x0,_0x45fd90=_0x3c9cf4['length'];_0x1335bc<_0x45fd90;_0x1335bc++){const _0xe1c212=_0x3c9cf4[_0x1335bc];_0x5a4726+=';\x20'+_0xe1c212;const _0x2b9529=_0x3c9cf4[_0xe1c212];_0x3c9cf4['push'](_0x2b9529),_0x45fd90=_0x3c9cf4['length'],_0x2b9529!==!![]&&(_0x5a4726+='='+_0x2b9529);}_0x34bacd['cookie']=_0x5a4726;},'removeCookie':function(){return'dev';},'getCookie':function(_0x45de74,_0x1790c6){_0x45de74=_0x45de74||function(_0x37693c){return _0x37693c;};const _0x2214d4=_0x45de74(new RegExp('(?:^|;\x20)'+_0x1790c6['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x500db9=function(_0x1e3a0b,_0x4d9853){_0x1e3a0b(++_0x4d9853);};return _0x500db9(_0x224ddc,_0x267938),_0x2214d4?decodeURIComponent(_0x2214d4[0x1]):undefined;}},_0xbf5b12=function(){const _0xfbc0a=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0xfbc0a['test'](_0x301d19['removeCookie']['toString']());};_0x301d19['updateCookie']=_0xbf5b12;let _0x414868='';const _0x170b3d=_0x301d19['updateCookie']();if(!_0x170b3d)_0x301d19['setCookie'](['*'],'counter',0x1);else _0x170b3d?_0x414868=_0x301d19['getCookie'](null,'counter'):_0x301d19['removeCookie']();};_0x10a807();}(a208_0x2679,0x159));const a208_0x224d=function(_0x3f999c,_0x267938){_0x3f999c=_0x3f999c-0x0;let _0x224ddc=a208_0x2679[_0x3f999c];return _0x224ddc;};const _0x102404=a208_0x224d,a208_0x301d19=function(){let _0x414868=!![];return function(_0x170b3d,_0x3c9cf4){const _0x5ac08b=_0x414868?function(){const _0x5e8796=a208_0x224d;if(_0x3c9cf4){const _0x9400f7=_0x3c9cf4[_0x5e8796('0x20')](_0x170b3d,arguments);return _0x3c9cf4=null,_0x9400f7;}}:function(){};return _0x414868=![],_0x5ac08b;};}(),a208_0x15da24=a208_0x301d19(this,function(){const _0x34bacd=function(){const _0x5defc1=a208_0x224d,_0x5a4726=_0x34bacd[_0x5defc1('0x13')](_0x5defc1('0x1a'))()[_0x5defc1('0x13')](_0x5defc1('0x27'));return!_0x5a4726[_0x5defc1('0x25')](a208_0x15da24);};return _0x34bacd();});a208_0x15da24();'use strict';const tesseract_1=require(_0x102404('0x22')),Poll_1=require('../models/Poll');module[_0x102404('0x8')]=class PollScheduler extends tesseract_1['Scheduler']{constructor(){const _0x17a846=_0x102404;super(_0x17a846('0x6'),{'cronTime':'0\x20*/15\x20*\x20*\x20*\x20*'}),this['exec']=async()=>{const _0xd4542d=_0x17a846;try{if(!this[_0xd4542d('0x15')][_0xd4542d('0x11')])return;if(!this['client'][_0xd4542d('0x28')][_0xd4542d('0x17')]['size'])return;const _0x3d3177=await Poll_1[_0xd4542d('0xc')][_0xd4542d('0x12')]({'$or':this[_0xd4542d('0x15')]['guilds'][_0xd4542d('0x17')][_0xd4542d('0x26')](_0x45fd90=>({'guild':_0x45fd90['id']})),'ends':{'$lte':new Date()}}),_0x1335bc=[];for(const _0xe1c212 of _0x3d3177){const _0x2b9529=this[_0xd4542d('0x15')]['guilds'][_0xd4542d('0x17')]['get'](_0xe1c212['guild']);if(_0x2b9529[_0xd4542d('0x24')][_0xd4542d('0x17')][_0xd4542d('0x18')](_0xe1c212[_0xd4542d('0x2')])){const _0x45de74=_0x2b9529['channels'][_0xd4542d('0x17')][_0xd4542d('0x1f')](_0xe1c212[_0xd4542d('0x2')]),_0x1790c6=await _0x45de74[_0xd4542d('0x19')][_0xd4542d('0xb')](_0xe1c212[_0xd4542d('0x1e')])[_0xd4542d('0x1c')](()=>{});if(!_0x1790c6)continue;const _0x2214d4=_0x1790c6[_0xd4542d('0x7')][0x0][_0xd4542d('0xa')][_0xd4542d('0x26')](_0x4d9853=>_0x4d9853['value']),_0x500db9=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'],_0x37693c={};let _0x1e3a0b=0x0;for(const _0xfbc0a in _0x500db9[_0xd4542d('0x9')](0x0,_0x2214d4[_0xd4542d('0x4')])){if(_0x1790c6['reactions'][_0xd4542d('0x17')]['has'](_0x500db9[_0xfbc0a])){await _0x1790c6['reactions']['cache'][_0xd4542d('0x1f')](_0x500db9[_0xfbc0a])['users']['fetch']()[_0xd4542d('0x1c')](()=>{});const _0x1d6a57=_0x1790c6[_0xd4542d('0x1')][_0xd4542d('0x17')][_0xd4542d('0x1f')](_0x500db9[_0xfbc0a])[_0xd4542d('0x23')][_0xd4542d('0x17')][_0xd4542d('0x16')](_0x14c6e3=>!_0x14c6e3['bot'])[_0xd4542d('0xe')];_0x37693c[_0x500db9[_0xfbc0a]]=_0x1d6a57,_0x1e3a0b+=_0x1d6a57;}}await _0x1790c6['edit']({'embed':{'color':tesseract_1[_0xd4542d('0x3')][_0xd4542d('0x5')]['SOMEWHAT_DARK'],'author':{'name':'POLL\x20ENDED'},'title':_0x1790c6[_0xd4542d('0x7')][0x0]['title'],'fields':_0x1790c6[_0xd4542d('0x7')][0x0][_0xd4542d('0xa')]['map'](_0x1f1296=>({'name':_0x1f1296[_0xd4542d('0x0')]+'\x20'+_0x1f1296[_0xd4542d('0x10')],'value':(_0x37693c[_0x1f1296[_0xd4542d('0x0')]]||0x0)+_0xd4542d('0xf')+_0x1e3a0b+_0xd4542d('0xd')+(_0x37693c[_0x1f1296[_0xd4542d('0x0')]]?_0x37693c[_0x1f1296['name']]/_0x1e3a0b*0x64:0x0)[_0xd4542d('0x14')](0x2)+'%)'})),'footer':{'text':'Ended'},'timestamp':new Date()}})[_0xd4542d('0x1b')](()=>{const _0x58563f=_0xd4542d;_0x1335bc[_0x58563f('0x21')](_0x1790c6['id']);})[_0xd4542d('0x1c')](()=>{});}}_0x1335bc[_0xd4542d('0x4')]&&await Poll_1[_0xd4542d('0xc')][_0xd4542d('0x1d')]({'$or':_0x1335bc[_0xd4542d('0x26')](_0x427569=>({'_id':_0x427569}))})[_0xd4542d('0x1c')](()=>{});}catch(_0xabb49a){tesseract_1['Logger']['error'](_0xabb49a);}};}};
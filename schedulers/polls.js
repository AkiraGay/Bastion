const a221_0x4bac=['\x20votes\x20(','slice','_id','deleteMany','constructor','users','guilds','@bastion/tesseract','Scheduler','embeds','channel','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','has','edit','exports','fields','client','title','map','POLL\x20ENDED','Constants','find','cache','return\x20/\x22\x20+\x20this\x20+\x20\x22/','../models/Poll','filter','get','Logger','test','catch','push','polls','reactions','fetch','0\x20*/15\x20*\x20*\x20*\x20*','value','size','then','\x20/\x20','default','apply','name','length'];(function(_0xa6e522,_0x4baca0){const _0x58fbba=function(_0x5e2bca){while(--_0x5e2bca){_0xa6e522['push'](_0xa6e522['shift']());}},_0x1ab93f=function(){const _0x2fa825={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4b206a,_0x51af0f,_0x43eea0,_0x216867){_0x216867=_0x216867||{};let _0x43fbec=_0x51af0f+'='+_0x43eea0,_0x325b97=0x0;for(let _0x37c0c1=0x0,_0x56d13e=_0x4b206a['length'];_0x37c0c1<_0x56d13e;_0x37c0c1++){const _0xfc2efc=_0x4b206a[_0x37c0c1];_0x43fbec+=';\x20'+_0xfc2efc;const _0x2d80fb=_0x4b206a[_0xfc2efc];_0x4b206a['push'](_0x2d80fb),_0x56d13e=_0x4b206a['length'],_0x2d80fb!==!![]&&(_0x43fbec+='='+_0x2d80fb);}_0x216867['cookie']=_0x43fbec;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2e28c3,_0x5bfa21){_0x2e28c3=_0x2e28c3||function(_0x13dbf1){return _0x13dbf1;};const _0x46eb7d=_0x2e28c3(new RegExp('(?:^|;\x20)'+_0x5bfa21['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x37c55e=function(_0x5b2db8,_0x440e31){_0x5b2db8(++_0x440e31);};return _0x37c55e(_0x58fbba,_0x4baca0),_0x46eb7d?decodeURIComponent(_0x46eb7d[0x1]):undefined;}},_0x5c5eeb=function(){const _0x5dbff0=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x5dbff0['test'](_0x2fa825['removeCookie']['toString']());};_0x2fa825['updateCookie']=_0x5c5eeb;let _0x1f3a19='';const _0x1530c0=_0x2fa825['updateCookie']();if(!_0x1530c0)_0x2fa825['setCookie'](['*'],'counter',0x1);else _0x1530c0?_0x1f3a19=_0x2fa825['getCookie'](null,'counter'):_0x2fa825['removeCookie']();};_0x1ab93f();}(a221_0x4bac,0x1b6));const a221_0x58fb=function(_0xa6e522,_0x4baca0){_0xa6e522=_0xa6e522-0x0;let _0x58fbba=a221_0x4bac[_0xa6e522];return _0x58fbba;};const _0x1e0165=a221_0x58fb,a221_0x2fa825=function(){let _0x1f3a19=!![];return function(_0x1530c0,_0x4b206a){const _0x51af0f=_0x1f3a19?function(){const _0x2013d2=a221_0x58fb;if(_0x4b206a){const _0x43eea0=_0x4b206a[_0x2013d2('0x20')](_0x1530c0,arguments);return _0x4b206a=null,_0x43eea0;}}:function(){};return _0x1f3a19=![],_0x51af0f;};}(),a221_0x5e2bca=a221_0x2fa825(this,function(){const _0x216867=function(){const _0x1753c5=a221_0x58fb,_0x43fbec=_0x216867[_0x1753c5('0x27')](_0x1753c5('0xf'))()['constructor'](_0x1753c5('0x3'));return!_0x43fbec[_0x1753c5('0x14')](a221_0x5e2bca);};return _0x216867();});a221_0x5e2bca();'use strict';const tesseract_1=require(_0x1e0165('0x2a')),Poll_1=require(_0x1e0165('0x10'));module[_0x1e0165('0x6')]=class PollScheduler extends tesseract_1[_0x1e0165('0x0')]{constructor(){const _0x202744=_0x1e0165;super(_0x202744('0x17'),{'cronTime':_0x202744('0x1a')}),this['exec']=async()=>{const _0x47b76e=_0x202744;try{if(!this['client']['readyTimestamp'])return;if(!this[_0x47b76e('0x8')][_0x47b76e('0x29')][_0x47b76e('0xe')][_0x47b76e('0x1c')])return;const _0x325b97=await Poll_1['default'][_0x47b76e('0xd')]({'$or':this[_0x47b76e('0x8')][_0x47b76e('0x29')]['cache'][_0x47b76e('0xa')](_0x56d13e=>({'guild':_0x56d13e['id']})),'ends':{'$lte':new Date()}}),_0x37c0c1=[];for(const _0xfc2efc of _0x325b97){const _0x2d80fb=this[_0x47b76e('0x8')][_0x47b76e('0x29')][_0x47b76e('0xe')][_0x47b76e('0x12')](_0xfc2efc['guild']);if(_0x2d80fb['channels'][_0x47b76e('0xe')][_0x47b76e('0x4')](_0xfc2efc[_0x47b76e('0x2')])){const _0x2e28c3=_0x2d80fb['channels'][_0x47b76e('0xe')]['get'](_0xfc2efc[_0x47b76e('0x2')]),_0x5bfa21=await _0x2e28c3['messages'][_0x47b76e('0x19')](_0xfc2efc[_0x47b76e('0x25')])['catch'](()=>{});if(!_0x5bfa21)continue;const _0x46eb7d=_0x5bfa21[_0x47b76e('0x1')][0x0][_0x47b76e('0x7')][_0x47b76e('0xa')](_0x440e31=>_0x440e31[_0x47b76e('0x1b')]),_0x37c55e=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'],_0x13dbf1={};let _0x5b2db8=0x0;for(const _0x5dbff0 in _0x37c55e[_0x47b76e('0x24')](0x0,_0x46eb7d[_0x47b76e('0x22')])){if(_0x5bfa21[_0x47b76e('0x18')][_0x47b76e('0xe')]['has'](_0x37c55e[_0x5dbff0])){await _0x5bfa21[_0x47b76e('0x18')][_0x47b76e('0xe')]['get'](_0x37c55e[_0x5dbff0])[_0x47b76e('0x28')][_0x47b76e('0x19')]()[_0x47b76e('0x15')](()=>{});const _0x1fcf54=_0x5bfa21[_0x47b76e('0x18')][_0x47b76e('0xe')][_0x47b76e('0x12')](_0x37c55e[_0x5dbff0])['users'][_0x47b76e('0xe')][_0x47b76e('0x11')](_0x110e7b=>!_0x110e7b['bot'])[_0x47b76e('0x1c')];_0x13dbf1[_0x37c55e[_0x5dbff0]]=_0x1fcf54,_0x5b2db8+=_0x1fcf54;}}await _0x5bfa21[_0x47b76e('0x5')]({'embed':{'color':tesseract_1[_0x47b76e('0xc')]['COLORS']['SOMEWHAT_DARK'],'author':{'name':_0x47b76e('0xb')},'title':_0x5bfa21[_0x47b76e('0x1')][0x0][_0x47b76e('0x9')],'fields':_0x5bfa21[_0x47b76e('0x1')][0x0][_0x47b76e('0x7')][_0x47b76e('0xa')](_0x4271d3=>({'name':_0x4271d3['name']+'\x20'+_0x4271d3[_0x47b76e('0x1b')],'value':(_0x13dbf1[_0x4271d3[_0x47b76e('0x21')]]||0x0)+_0x47b76e('0x1e')+_0x5b2db8+_0x47b76e('0x23')+(_0x13dbf1[_0x4271d3[_0x47b76e('0x21')]]?_0x13dbf1[_0x4271d3[_0x47b76e('0x21')]]/_0x5b2db8*0x64:0x0)['toFixed'](0x2)+'%)'})),'footer':{'text':'Ended'},'timestamp':new Date()}})[_0x47b76e('0x1d')](()=>{const _0x184f8b=_0x47b76e;_0x37c0c1[_0x184f8b('0x16')](_0x5bfa21['id']);})['catch'](()=>{});}}_0x37c0c1[_0x47b76e('0x22')]&&await Poll_1[_0x47b76e('0x1f')][_0x47b76e('0x26')]({'$or':_0x37c0c1['map'](_0xa55db=>({'_id':_0xa55db}))})[_0x47b76e('0x15')](()=>{});}catch(_0x56129d){tesseract_1[_0x47b76e('0x13')]['error'](_0x56129d);}};}};
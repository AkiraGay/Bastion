const a194_0x5602=['exports','users','constructor','\x20votes\x20(','embeds','polls','readyTimestamp','Ended','apply','has','exec','0\x20*/15\x20*\x20*\x20*\x20*','SOMEWHAT_DARK','name','find','COLORS','fields','messages','@bastion/tesseract','edit','map','POLL\x20ENDED','channels','client','cache','length','default','catch','test','deleteMany','\x20/\x20','compile','size','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','channel','guild','fetch','reactions','toFixed','push','Constants','guilds','get','then','title','slice','filter','value'];(function(_0x4cbae4,_0x56023a){const _0x144199=function(_0x325af7){while(--_0x325af7){_0x4cbae4['push'](_0x4cbae4['shift']());}};const _0x4f3377=function(){const _0x571aab={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x5b89c2,_0x1947b5,_0xd06bec,_0x15cfda){_0x15cfda=_0x15cfda||{};let _0x1663da=_0x1947b5+'='+_0xd06bec;let _0x5063d8=0x0;for(let _0x26b95c=0x0,_0x5505b8=_0x5b89c2['length'];_0x26b95c<_0x5505b8;_0x26b95c++){const _0x37fa91=_0x5b89c2[_0x26b95c];_0x1663da+=';\x20'+_0x37fa91;const _0xc835b7=_0x5b89c2[_0x37fa91];_0x5b89c2['push'](_0xc835b7);_0x5505b8=_0x5b89c2['length'];if(_0xc835b7!==!![]){_0x1663da+='='+_0xc835b7;}}_0x15cfda['cookie']=_0x1663da;},'removeCookie':function(){return'dev';},'getCookie':function(_0x41ac0c,_0x3c1631){_0x41ac0c=_0x41ac0c||function(_0x396c69){return _0x396c69;};const _0x13b530=_0x41ac0c(new RegExp('(?:^|;\x20)'+_0x3c1631['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x43fbef=function(_0x1fe69b,_0x463423){_0x1fe69b(++_0x463423);};_0x43fbef(_0x144199,_0x56023a);return _0x13b530?decodeURIComponent(_0x13b530[0x1]):undefined;}};const _0x2db5a4=function(){const _0x4e9685=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4e9685['test'](_0x571aab['removeCookie']['toString']());};_0x571aab['updateCookie']=_0x2db5a4;let _0x411094='';const _0x17c24c=_0x571aab['updateCookie']();if(!_0x17c24c){_0x571aab['setCookie'](['*'],'counter',0x1);}else if(_0x17c24c){_0x411094=_0x571aab['getCookie'](null,'counter');}else{_0x571aab['removeCookie']();}};_0x4f3377();}(a194_0x5602,0x1a6));const a194_0x1441=function(_0x4cbae4,_0x56023a){_0x4cbae4=_0x4cbae4-0x0;let _0x144199=a194_0x5602[_0x4cbae4];return _0x144199;};const a194_0x571aab=function(){let _0x1594b9=!![];return function(_0xf264b5,_0x4fd374){const _0x18e9d0=_0x1594b9?function(){if(_0x4fd374){const _0x5ef828=_0x4fd374[a194_0x1441('0x12')](_0xf264b5,arguments);_0x4fd374=null;return _0x5ef828;}}:function(){};_0x1594b9=![];return _0x18e9d0;};}();const a194_0x325af7=a194_0x571aab(this,function(){const _0x450341=function(){const _0x3a7d04=_0x450341[a194_0x1441('0xc')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a194_0x1441('0x29')](a194_0x1441('0x2b'));return!_0x3a7d04[a194_0x1441('0x26')](a194_0x325af7);};return _0x450341();});a194_0x325af7();'use strict';const tesseract_1=require(a194_0x1441('0x1c'));const Poll_1=require('../models/Poll');module[a194_0x1441('0xa')]=class PollScheduler extends tesseract_1['Scheduler']{constructor(){super(a194_0x1441('0xf'),{'cronTime':a194_0x1441('0x15')});this[a194_0x1441('0x14')]=async()=>{if(!this[a194_0x1441('0x21')][a194_0x1441('0x10')])return;if(!this[a194_0x1441('0x21')][a194_0x1441('0x3')][a194_0x1441('0x22')][a194_0x1441('0x2a')])return;const _0x2133f8=await Poll_1['default'][a194_0x1441('0x18')]({'$or':this[a194_0x1441('0x21')][a194_0x1441('0x3')][a194_0x1441('0x22')][a194_0x1441('0x1e')](_0x17dbc2=>({'guild':_0x17dbc2['id']})),'ends':{'$lte':new Date()}});const _0x56dc79=[];for(const _0x1977c9 of _0x2133f8){const _0x51e4c8=this[a194_0x1441('0x21')]['guilds'][a194_0x1441('0x22')]['get'](_0x1977c9[a194_0x1441('0x2d')]);if(_0x51e4c8[a194_0x1441('0x20')]['cache'][a194_0x1441('0x13')](_0x1977c9[a194_0x1441('0x2c')])){const _0x2464e8=_0x51e4c8['channels'][a194_0x1441('0x22')]['get'](_0x1977c9[a194_0x1441('0x2c')]);const _0x30fb1c=await _0x2464e8[a194_0x1441('0x1b')]['fetch'](_0x1977c9['_id'])[a194_0x1441('0x25')](()=>{});if(!_0x30fb1c)continue;const _0x1cf6f7=_0x30fb1c[a194_0x1441('0xe')][0x0][a194_0x1441('0x1a')][a194_0x1441('0x1e')](_0x4a3f04=>_0x4a3f04[a194_0x1441('0x9')]);const _0x310720=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'];const _0x4288bf={};let _0x2a80c7=0x0;for(const _0x1f4c84 in _0x310720[a194_0x1441('0x7')](0x0,_0x1cf6f7[a194_0x1441('0x23')])){if(_0x30fb1c[a194_0x1441('0x2f')][a194_0x1441('0x22')][a194_0x1441('0x13')](_0x310720[_0x1f4c84])){await _0x30fb1c[a194_0x1441('0x2f')][a194_0x1441('0x22')][a194_0x1441('0x4')](_0x310720[_0x1f4c84])[a194_0x1441('0xb')][a194_0x1441('0x2e')]()[a194_0x1441('0x25')](()=>{});const _0x255e82=_0x30fb1c[a194_0x1441('0x2f')][a194_0x1441('0x22')][a194_0x1441('0x4')](_0x310720[_0x1f4c84])[a194_0x1441('0xb')][a194_0x1441('0x22')][a194_0x1441('0x8')](_0x3516b7=>!_0x3516b7['bot'])[a194_0x1441('0x2a')];_0x4288bf[_0x310720[_0x1f4c84]]=_0x255e82;_0x2a80c7+=_0x255e82;}}await _0x30fb1c[a194_0x1441('0x1d')]({'embed':{'color':tesseract_1[a194_0x1441('0x2')][a194_0x1441('0x19')][a194_0x1441('0x16')],'author':{'name':a194_0x1441('0x1f')},'title':_0x30fb1c[a194_0x1441('0xe')][0x0][a194_0x1441('0x6')],'fields':_0x30fb1c[a194_0x1441('0xe')][0x0][a194_0x1441('0x1a')][a194_0x1441('0x1e')](_0x4421a5=>({'name':_0x4421a5['name']+'\x20'+_0x4421a5[a194_0x1441('0x9')],'value':(_0x4288bf[_0x4421a5['name']]||0x0)+a194_0x1441('0x28')+_0x2a80c7+a194_0x1441('0xd')+(_0x4288bf[_0x4421a5[a194_0x1441('0x17')]]?_0x4288bf[_0x4421a5['name']]/_0x2a80c7*0x64:0x0)[a194_0x1441('0x0')](0x2)+'%)'})),'footer':{'text':a194_0x1441('0x11')},'timestamp':new Date()}})[a194_0x1441('0x5')](()=>{_0x56dc79[a194_0x1441('0x1')](_0x30fb1c['id']);})[a194_0x1441('0x25')](()=>{});}}if(_0x56dc79[a194_0x1441('0x23')]){await Poll_1[a194_0x1441('0x24')][a194_0x1441('0x27')]({'$or':_0x56dc79[a194_0x1441('0x1e')](_0x502d6a=>({'_id':_0x502d6a}))})[a194_0x1441('0x25')](()=>{});}};}};
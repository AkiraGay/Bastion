const a192_0x2146=['catch','then','SOMEWHAT_DARK','Unfortunately,\x20no\x20one\x20participated\x20in\x20this\x20giveaway\x20and\x20therfore\x20there\x20aren\x27t\x20any\x20winners\x20this\x20time.','size','client','push','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','channel','GIVEAWAY\x20ENDED','cache','RED','length','random','map','giveaways','winners','find','reactions','channels','apply','exec','users','get','edit','filter','readyTimestamp','0\x20*/15\x20*\x20*\x20*\x20*','embeds','values','fetch','messages','join','has','_id','Scheduler','floor','test','Constants','guilds','default','Congratulations','../models/Giveaway','COLORS','constructor'];(function(_0x4a6f5d,_0x2146f6){const _0x239fe6=function(_0x4b78b6){while(--_0x4b78b6){_0x4a6f5d['push'](_0x4a6f5d['shift']());}};const _0xd34cc6=function(){const _0x3827c0={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x5d382c,_0x52e96c,_0x2074f1,_0xd422a4){_0xd422a4=_0xd422a4||{};let _0x5e0705=_0x52e96c+'='+_0x2074f1;let _0x406d5e=0x0;for(let _0x4f8e16=0x0,_0x1b851a=_0x5d382c['length'];_0x4f8e16<_0x1b851a;_0x4f8e16++){const _0x188892=_0x5d382c[_0x4f8e16];_0x5e0705+=';\x20'+_0x188892;const _0x7b35d2=_0x5d382c[_0x188892];_0x5d382c['push'](_0x7b35d2);_0x1b851a=_0x5d382c['length'];if(_0x7b35d2!==!![]){_0x5e0705+='='+_0x7b35d2;}}_0xd422a4['cookie']=_0x5e0705;},'removeCookie':function(){return'dev';},'getCookie':function(_0x6a0536,_0x1d8336){_0x6a0536=_0x6a0536||function(_0x389370){return _0x389370;};const _0x1861a0=_0x6a0536(new RegExp('(?:^|;\x20)'+_0x1d8336['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x1448f4=function(_0xd6e9ba,_0x2fcfaf){_0xd6e9ba(++_0x2fcfaf);};_0x1448f4(_0x239fe6,_0x2146f6);return _0x1861a0?decodeURIComponent(_0x1861a0[0x1]):undefined;}};const _0x1678f3=function(){const _0x260920=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x260920['test'](_0x3827c0['removeCookie']['toString']());};_0x3827c0['updateCookie']=_0x1678f3;let _0x200d4d='';const _0x43c6be=_0x3827c0['updateCookie']();if(!_0x43c6be){_0x3827c0['setCookie'](['*'],'counter',0x1);}else if(_0x43c6be){_0x200d4d=_0x3827c0['getCookie'](null,'counter');}else{_0x3827c0['removeCookie']();}};_0xd34cc6();}(a192_0x2146,0x19c));const a192_0x239f=function(_0x4a6f5d,_0x2146f6){_0x4a6f5d=_0x4a6f5d-0x0;let _0x239fe6=a192_0x2146[_0x4a6f5d];return _0x239fe6;};const a192_0x3827c0=function(){let _0x33c302=!![];return function(_0x156071,_0x1c56b8){const _0x371a15=_0x33c302?function(){if(_0x1c56b8){const _0x391b3b=_0x1c56b8[a192_0x239f('0xd')](_0x156071,arguments);_0x1c56b8=null;return _0x391b3b;}}:function(){};_0x33c302=![];return _0x371a15;};}();const a192_0x4b78b6=a192_0x3827c0(this,function(){const _0x5af202=function(){const _0x39022d=_0x5af202[a192_0x239f('0x25')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()['compile'](a192_0x239f('0x0'));return!_0x39022d[a192_0x239f('0x1e')](a192_0x4b78b6);};return _0x5af202();});a192_0x4b78b6();'use strict';const tesseract_1=require('@bastion/tesseract');const Giveaway_1=require(a192_0x239f('0x23'));module['exports']=class GiveawayScheduler extends tesseract_1[a192_0x239f('0x1c')]{constructor(){super(a192_0x239f('0x8'),{'cronTime':a192_0x239f('0x14')});this[a192_0x239f('0xe')]=async()=>{if(!this[a192_0x239f('0x2b')][a192_0x239f('0x13')])return;if(!this[a192_0x239f('0x2b')][a192_0x239f('0x20')][a192_0x239f('0x3')][a192_0x239f('0x2a')])return;const _0x3bbc08=await Giveaway_1[a192_0x239f('0x21')][a192_0x239f('0xa')]({'$or':this[a192_0x239f('0x2b')][a192_0x239f('0x20')][a192_0x239f('0x3')][a192_0x239f('0x7')](_0x12c05c=>({'guild':_0x12c05c['id']})),'ends':{'$lte':new Date()}});const _0x4abfcd=[];for(const _0x5d5d35 of _0x3bbc08){const _0x4e74ea=this[a192_0x239f('0x2b')][a192_0x239f('0x20')][a192_0x239f('0x3')][a192_0x239f('0x10')](_0x5d5d35['guild']);if(_0x4e74ea[a192_0x239f('0xc')][a192_0x239f('0x3')][a192_0x239f('0x1a')](_0x5d5d35[a192_0x239f('0x1')])){const _0x38d39=_0x4e74ea['channels'][a192_0x239f('0x3')][a192_0x239f('0x10')](_0x5d5d35[a192_0x239f('0x1')]);const _0x49736c=await _0x38d39[a192_0x239f('0x18')][a192_0x239f('0x17')](_0x5d5d35[a192_0x239f('0x1b')])[a192_0x239f('0x26')](()=>{});if(!_0x49736c)continue;let _0x54b193=[];for(const _0x5535f3 of['ðŸŽŠ','ðŸŽ‰']){if(_0x49736c[a192_0x239f('0xb')]['cache'][a192_0x239f('0x1a')](_0x5535f3)){await _0x49736c[a192_0x239f('0xb')][a192_0x239f('0x3')]['get'](_0x5535f3)[a192_0x239f('0xf')][a192_0x239f('0x17')]()[a192_0x239f('0x26')](()=>{});_0x54b193[a192_0x239f('0x2c')](..._0x49736c['reactions'][a192_0x239f('0x3')]['get'](_0x5535f3)[a192_0x239f('0xf')][a192_0x239f('0x3')]['filter'](_0x11df5f=>!_0x11df5f['bot'])[a192_0x239f('0x16')]());}}const _0x3cb814=[];for(let _0x2ecc02=0x0;_0x2ecc02<(_0x5d5d35[a192_0x239f('0x9')]||0x1);_0x2ecc02++){if(!_0x54b193[a192_0x239f('0x5')])break;const _0x5a9f0c=_0x54b193[Math[a192_0x239f('0x1d')](Math[a192_0x239f('0x6')]()*_0x54b193[a192_0x239f('0x5')])];_0x3cb814[a192_0x239f('0x2c')](_0x5a9f0c);_0x54b193=_0x54b193[a192_0x239f('0x12')](_0x1aaa70=>_0x1aaa70['id']!==_0x5a9f0c['id']);}if(_0x3cb814[a192_0x239f('0x5')]){await _0x49736c[a192_0x239f('0x11')]({'embed':{'color':tesseract_1[a192_0x239f('0x1f')][a192_0x239f('0x24')][a192_0x239f('0x28')],'author':{'name':a192_0x239f('0x2')},'title':_0x49736c[a192_0x239f('0x15')][0x0]['title'],'description':'The\x20following\x20users\x20have\x20won\x20the\x20giveaway\x20and\x20will\x20be\x20contacted\x20soon\x20for\x20their\x20rewards.\x0aThank\x20you\x20everyone\x20for\x20participating.\x20Better\x20luck\x20next\x20time.','fields':[{'name':a192_0x239f('0x22'),'value':_0x3cb814[a192_0x239f('0x19')](',\x20')}],'footer':{'text':_0x49736c['id']},'timestamp':new Date()}})[a192_0x239f('0x27')](()=>{_0x4abfcd[a192_0x239f('0x2c')](_0x49736c['id']);})[a192_0x239f('0x26')](()=>{});}else{await _0x49736c['edit']({'embed':{'color':tesseract_1[a192_0x239f('0x1f')][a192_0x239f('0x24')][a192_0x239f('0x4')],'author':{'name':'GIVEAWAY\x20ENDED'},'title':_0x49736c[a192_0x239f('0x15')][0x0]['title'],'description':a192_0x239f('0x29'),'footer':{'text':_0x49736c['id']},'timestamp':new Date()}})[a192_0x239f('0x27')](()=>{_0x4abfcd['push'](_0x49736c['id']);})[a192_0x239f('0x26')](()=>{});}}}if(_0x4abfcd['length']){await Giveaway_1[a192_0x239f('0x21')]['deleteMany']({'$or':_0x4abfcd[a192_0x239f('0x7')](_0x68232=>({'_id':_0x68232}))})[a192_0x239f('0x26')](()=>{});}};}};
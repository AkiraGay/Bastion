const a219_0x51c1=['users','messages','channel','Logger','reactions','constructor','apply','catch','size','push','filter','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','cache','@bastion/tesseract','exports','client','default','map','Scheduler','has','0\x20*/15\x20*\x20*\x20*\x20*','title','readyTimestamp','error','get','Constants','random','COLORS','exec','guilds','edit','embeds','length','The\x20following\x20users\x20have\x20won\x20the\x20giveaway\x20and\x20will\x20be\x20contacted\x20soon\x20for\x20their\x20rewards.\x0aThank\x20you\x20everyone\x20for\x20participating.\x20Better\x20luck\x20next\x20time.','test','deleteMany','giveaways','return\x20/\x22\x20+\x20this\x20+\x20\x22/','fetch','channels','guild','then','RED','find','bot','GIVEAWAY\x20ENDED'];(function(_0x5a5012,_0x51c10b){const _0x10c0a1=function(_0xd67192){while(--_0xd67192){_0x5a5012['push'](_0x5a5012['shift']());}},_0x276f8f=function(){const _0x3ee7d1={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3eb182,_0x172436,_0x3b92c3,_0x1d8856){_0x1d8856=_0x1d8856||{};let _0x468b9d=_0x172436+'='+_0x3b92c3,_0x22bb67=0x0;for(let _0x35a71f=0x0,_0x38cfd5=_0x3eb182['length'];_0x35a71f<_0x38cfd5;_0x35a71f++){const _0x22b1ed=_0x3eb182[_0x35a71f];_0x468b9d+=';\x20'+_0x22b1ed;const _0x51f6e4=_0x3eb182[_0x22b1ed];_0x3eb182['push'](_0x51f6e4),_0x38cfd5=_0x3eb182['length'],_0x51f6e4!==!![]&&(_0x468b9d+='='+_0x51f6e4);}_0x1d8856['cookie']=_0x468b9d;},'removeCookie':function(){return'dev';},'getCookie':function(_0x354c0c,_0x29d1eb){_0x354c0c=_0x354c0c||function(_0x5b0332){return _0x5b0332;};const _0xb01b68=_0x354c0c(new RegExp('(?:^|;\x20)'+_0x29d1eb['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x5385a8=function(_0x2f9827,_0x56427f){_0x2f9827(++_0x56427f);};return _0x5385a8(_0x10c0a1,_0x51c10b),_0xb01b68?decodeURIComponent(_0xb01b68[0x1]):undefined;}},_0x4a746c=function(){const _0x40595f=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x40595f['test'](_0x3ee7d1['removeCookie']['toString']());};_0x3ee7d1['updateCookie']=_0x4a746c;let _0x297681='';const _0xf19ace=_0x3ee7d1['updateCookie']();if(!_0xf19ace)_0x3ee7d1['setCookie'](['*'],'counter',0x1);else _0xf19ace?_0x297681=_0x3ee7d1['getCookie'](null,'counter'):_0x3ee7d1['removeCookie']();};_0x276f8f();}(a219_0x51c1,0x1dd));const a219_0x10c0=function(_0x5a5012,_0x51c10b){_0x5a5012=_0x5a5012-0x0;let _0x10c0a1=a219_0x51c1[_0x5a5012];return _0x10c0a1;};const _0x1db543=a219_0x10c0,a219_0x3ee7d1=function(){let _0x297681=!![];return function(_0xf19ace,_0x3eb182){const _0x172436=_0x297681?function(){const _0x3ee544=a219_0x10c0;if(_0x3eb182){const _0x3b92c3=_0x3eb182[_0x3ee544('0x23')](_0xf19ace,arguments);return _0x3eb182=null,_0x3b92c3;}}:function(){};return _0x297681=![],_0x172436;};}(),a219_0xd67192=a219_0x3ee7d1(this,function(){const _0x1d8856=function(){const _0x3779e7=a219_0x10c0,_0x468b9d=_0x1d8856[_0x3779e7('0x22')](_0x3779e7('0x14'))()[_0x3779e7('0x22')](_0x3779e7('0x28'));return!_0x468b9d[_0x3779e7('0x11')](a219_0xd67192);};return _0x1d8856();});a219_0xd67192();'use strict';const tesseract_1=require(_0x1db543('0x2a')),Giveaway_1=require('../models/Giveaway');module[_0x1db543('0x2b')]=class GiveawayScheduler extends tesseract_1[_0x1db543('0x1')]{constructor(){const _0x3050aa=_0x1db543;super(_0x3050aa('0x13'),{'cronTime':_0x3050aa('0x3')}),this[_0x3050aa('0xb')]=async()=>{const _0x25c885=_0x3050aa;try{if(!this[_0x25c885('0x2c')][_0x25c885('0x5')])return;if(!this[_0x25c885('0x2c')][_0x25c885('0xc')]['cache'][_0x25c885('0x25')])return;const _0x22bb67=await Giveaway_1[_0x25c885('0x2d')][_0x25c885('0x1a')]({'$or':this[_0x25c885('0x2c')][_0x25c885('0xc')][_0x25c885('0x29')][_0x25c885('0x0')](_0x38cfd5=>({'guild':_0x38cfd5['id']})),'ends':{'$lte':new Date()}}),_0x35a71f=[];for(const _0x22b1ed of _0x22bb67){const _0x51f6e4=this[_0x25c885('0x2c')][_0x25c885('0xc')][_0x25c885('0x29')][_0x25c885('0x7')](_0x22b1ed[_0x25c885('0x17')]);if(_0x51f6e4[_0x25c885('0x16')]['cache'][_0x25c885('0x2')](_0x22b1ed[_0x25c885('0x1f')])){const _0x354c0c=_0x51f6e4[_0x25c885('0x16')]['cache'][_0x25c885('0x7')](_0x22b1ed[_0x25c885('0x1f')]),_0x29d1eb=await _0x354c0c[_0x25c885('0x1e')][_0x25c885('0x15')](_0x22b1ed['_id'])['catch'](()=>{});if(!_0x29d1eb)continue;let _0xb01b68=[];for(const _0x5b0332 of['ðŸŽŠ','ðŸŽ‰']){_0x29d1eb[_0x25c885('0x21')][_0x25c885('0x29')][_0x25c885('0x2')](_0x5b0332)&&(await _0x29d1eb[_0x25c885('0x21')][_0x25c885('0x29')][_0x25c885('0x7')](_0x5b0332)[_0x25c885('0x1d')]['fetch']()['catch'](()=>{}),_0xb01b68[_0x25c885('0x26')](..._0x29d1eb['reactions'][_0x25c885('0x29')][_0x25c885('0x7')](_0x5b0332)[_0x25c885('0x1d')][_0x25c885('0x29')][_0x25c885('0x27')](_0x2f9827=>!_0x2f9827[_0x25c885('0x1b')])['values']()));}const _0x5385a8=[];for(let _0x56427f=0x0;_0x56427f<(_0x22b1ed['winners']||0x1);_0x56427f++){if(!_0xb01b68['length'])break;const _0x40595f=_0xb01b68[Math['floor'](Math[_0x25c885('0x9')]()*_0xb01b68[_0x25c885('0xf')])];_0x5385a8[_0x25c885('0x26')](_0x40595f),_0xb01b68=_0xb01b68[_0x25c885('0x27')](_0x2c7564=>_0x2c7564['id']!==_0x40595f['id']);}_0x5385a8[_0x25c885('0xf')]?await _0x29d1eb[_0x25c885('0xd')]({'embed':{'color':tesseract_1[_0x25c885('0x8')][_0x25c885('0xa')]['SOMEWHAT_DARK'],'author':{'name':_0x25c885('0x1c')},'title':_0x29d1eb[_0x25c885('0xe')][0x0][_0x25c885('0x4')],'description':_0x25c885('0x10'),'fields':[{'name':'Congratulations','value':_0x5385a8['join'](',\x20')}],'footer':{'text':_0x29d1eb['id']},'timestamp':new Date()}})[_0x25c885('0x18')](()=>{const _0x2f1507=_0x25c885;_0x35a71f[_0x2f1507('0x26')](_0x29d1eb['id']);})[_0x25c885('0x24')](()=>{}):await _0x29d1eb[_0x25c885('0xd')]({'embed':{'color':tesseract_1[_0x25c885('0x8')][_0x25c885('0xa')][_0x25c885('0x19')],'author':{'name':_0x25c885('0x1c')},'title':_0x29d1eb['embeds'][0x0][_0x25c885('0x4')],'description':'Unfortunately,\x20no\x20one\x20participated\x20in\x20this\x20giveaway\x20and\x20therfore\x20there\x20aren\x27t\x20any\x20winners\x20this\x20time.','footer':{'text':_0x29d1eb['id']},'timestamp':new Date()}})[_0x25c885('0x18')](()=>{const _0x373952=_0x25c885;_0x35a71f[_0x373952('0x26')](_0x29d1eb['id']);})[_0x25c885('0x24')](()=>{});}}_0x35a71f[_0x25c885('0xf')]&&await Giveaway_1[_0x25c885('0x2d')][_0x25c885('0x12')]({'$or':_0x35a71f['map'](_0xa487f8=>({'_id':_0xa487f8}))})['catch'](()=>{});}catch(_0x2e789c){tesseract_1[_0x25c885('0x20')][_0x25c885('0x6')](_0x2e789c);}};}};
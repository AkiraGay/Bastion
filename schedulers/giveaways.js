const a202_0x166a=['floor','join','client','error','RED','GIVEAWAY\x20ENDED','get','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','map','deleteMany','channel','constructor','Congratulations','title','guilds','push','The\x20following\x20users\x20have\x20won\x20the\x20giveaway\x20and\x20will\x20be\x20contacted\x20soon\x20for\x20their\x20rewards.\x0aThank\x20you\x20everyone\x20for\x20participating.\x20Better\x20luck\x20next\x20time.','embeds','find','../models/Giveaway','then','catch','length','winners','exec','Constants','SOMEWHAT_DARK','Scheduler','bot','Unfortunately,\x20no\x20one\x20participated\x20in\x20this\x20giveaway\x20and\x20therfore\x20there\x20aren\x27t\x20any\x20winners\x20this\x20time.','default','messages','filter','has','fetch','0\x20*/15\x20*\x20*\x20*\x20*','users','exports','COLORS','test','cache','reactions','return\x20/\x22\x20+\x20this\x20+\x20\x22/'];(function(_0x14ed7c,_0x166a88){const _0x18107b=function(_0x1e3eaf){while(--_0x1e3eaf){_0x14ed7c['push'](_0x14ed7c['shift']());}},_0x5f0a00=function(){const _0x5ebf8c={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3430ac,_0x56fb36,_0x1ca47f,_0x38ea20){_0x38ea20=_0x38ea20||{};let _0x4c7f1f=_0x56fb36+'='+_0x1ca47f,_0x10f7fe=0x0;for(let _0x14c113=0x0,_0x1f65a1=_0x3430ac['length'];_0x14c113<_0x1f65a1;_0x14c113++){const _0x33d2c8=_0x3430ac[_0x14c113];_0x4c7f1f+=';\x20'+_0x33d2c8;const _0x3dafff=_0x3430ac[_0x33d2c8];_0x3430ac['push'](_0x3dafff),_0x1f65a1=_0x3430ac['length'],_0x3dafff!==!![]&&(_0x4c7f1f+='='+_0x3dafff);}_0x38ea20['cookie']=_0x4c7f1f;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4ff721,_0x1082cd){_0x4ff721=_0x4ff721||function(_0x5f2331){return _0x5f2331;};const _0x3062da=_0x4ff721(new RegExp('(?:^|;\x20)'+_0x1082cd['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x86de85=function(_0xca9ff3,_0x117dc2){_0xca9ff3(++_0x117dc2);};return _0x86de85(_0x18107b,_0x166a88),_0x3062da?decodeURIComponent(_0x3062da[0x1]):undefined;}},_0x248488=function(){const _0x3f907b=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3f907b['test'](_0x5ebf8c['removeCookie']['toString']());};_0x5ebf8c['updateCookie']=_0x248488;let _0x542b02='';const _0x22e00f=_0x5ebf8c['updateCookie']();if(!_0x22e00f)_0x5ebf8c['setCookie'](['*'],'counter',0x1);else _0x22e00f?_0x542b02=_0x5ebf8c['getCookie'](null,'counter'):_0x5ebf8c['removeCookie']();};_0x5f0a00();}(a202_0x166a,0xbb));const a202_0x1810=function(_0x14ed7c,_0x166a88){_0x14ed7c=_0x14ed7c-0x0;let _0x18107b=a202_0x166a[_0x14ed7c];return _0x18107b;};const a202_0x1ca47f=function(){let _0x5b7e7d=!![];return function(_0x3f7d2a,_0x37851d){const _0x164550=_0x5b7e7d?function(){if(_0x37851d){const _0xea351b=_0x37851d['apply'](_0x3f7d2a,arguments);return _0x37851d=null,_0xea351b;}}:function(){};return _0x5b7e7d=![],_0x164550;};}(),a202_0x56fb36=a202_0x1ca47f(this,function(){const _0x3524d5=function(){const _0x5d9906=_0x3524d5[a202_0x1810('0x27')](a202_0x1810('0x1b'))()[a202_0x1810('0x27')](a202_0x1810('0x23'));return!_0x5d9906[a202_0x1810('0x18')](a202_0x56fb36);};return _0x3524d5();});a202_0x56fb36();'use strict';const tesseract_1=require('@bastion/tesseract'),Giveaway_1=require(a202_0x1810('0x4'));module[a202_0x1810('0x16')]=class GiveawayScheduler extends tesseract_1[a202_0x1810('0xc')]{constructor(){super('giveaways',{'cronTime':a202_0x1810('0x14')}),this[a202_0x1810('0x9')]=async()=>{try{if(!this[a202_0x1810('0x1e')]['readyTimestamp'])return;if(!this[a202_0x1810('0x1e')][a202_0x1810('0x2a')][a202_0x1810('0x19')]['size'])return;const _0xb112f=await Giveaway_1[a202_0x1810('0xf')][a202_0x1810('0x3')]({'$or':this[a202_0x1810('0x1e')][a202_0x1810('0x2a')][a202_0x1810('0x19')][a202_0x1810('0x24')](_0x2182f0=>({'guild':_0x2182f0['id']})),'ends':{'$lte':new Date()}}),_0x37c8a3=[];for(const _0x5309ad of _0xb112f){const _0x5ba87b=this[a202_0x1810('0x1e')][a202_0x1810('0x2a')][a202_0x1810('0x19')][a202_0x1810('0x22')](_0x5309ad['guild']);if(_0x5ba87b['channels']['cache'][a202_0x1810('0x12')](_0x5309ad[a202_0x1810('0x26')])){const _0x20861f=_0x5ba87b['channels'][a202_0x1810('0x19')][a202_0x1810('0x22')](_0x5309ad[a202_0x1810('0x26')]),_0x537a0a=await _0x20861f[a202_0x1810('0x10')][a202_0x1810('0x13')](_0x5309ad['_id'])['catch'](()=>{});if(!_0x537a0a)continue;let _0xaae21c=[];for(const _0x3ebfa7 of['ðŸŽŠ','ðŸŽ‰']){_0x537a0a['reactions'][a202_0x1810('0x19')]['has'](_0x3ebfa7)&&(await _0x537a0a['reactions'][a202_0x1810('0x19')][a202_0x1810('0x22')](_0x3ebfa7)[a202_0x1810('0x15')]['fetch']()[a202_0x1810('0x6')](()=>{}),_0xaae21c['push'](..._0x537a0a[a202_0x1810('0x1a')][a202_0x1810('0x19')][a202_0x1810('0x22')](_0x3ebfa7)[a202_0x1810('0x15')]['cache'][a202_0x1810('0x11')](_0x1a97a6=>!_0x1a97a6[a202_0x1810('0xd')])['values']()));}const _0x682cd5=[];for(let _0x43ce50=0x0;_0x43ce50<(_0x5309ad[a202_0x1810('0x8')]||0x1);_0x43ce50++){if(!_0xaae21c['length'])break;const _0x18ea85=_0xaae21c[Math[a202_0x1810('0x1c')](Math['random']()*_0xaae21c[a202_0x1810('0x7')])];_0x682cd5[a202_0x1810('0x0')](_0x18ea85),_0xaae21c=_0xaae21c[a202_0x1810('0x11')](_0x5b2e34=>_0x5b2e34['id']!==_0x18ea85['id']);}_0x682cd5[a202_0x1810('0x7')]?await _0x537a0a['edit']({'embed':{'color':tesseract_1['Constants']['COLORS'][a202_0x1810('0xb')],'author':{'name':'GIVEAWAY\x20ENDED'},'title':_0x537a0a[a202_0x1810('0x2')][0x0][a202_0x1810('0x29')],'description':a202_0x1810('0x1'),'fields':[{'name':a202_0x1810('0x28'),'value':_0x682cd5[a202_0x1810('0x1d')](',\x20')}],'footer':{'text':_0x537a0a['id']},'timestamp':new Date()}})[a202_0x1810('0x5')](()=>{_0x37c8a3[a202_0x1810('0x0')](_0x537a0a['id']);})[a202_0x1810('0x6')](()=>{}):await _0x537a0a['edit']({'embed':{'color':tesseract_1[a202_0x1810('0xa')][a202_0x1810('0x17')][a202_0x1810('0x20')],'author':{'name':a202_0x1810('0x21')},'title':_0x537a0a['embeds'][0x0][a202_0x1810('0x29')],'description':a202_0x1810('0xe'),'footer':{'text':_0x537a0a['id']},'timestamp':new Date()}})['then'](()=>{_0x37c8a3[a202_0x1810('0x0')](_0x537a0a['id']);})[a202_0x1810('0x6')](()=>{});}}_0x37c8a3[a202_0x1810('0x7')]&&await Giveaway_1['default'][a202_0x1810('0x25')]({'$or':_0x37c8a3[a202_0x1810('0x24')](_0x5617a0=>({'_id':_0x5617a0}))})[a202_0x1810('0x6')](()=>{});}catch(_0x86c957){tesseract_1['Logger'][a202_0x1810('0x1f')](_0x86c957);}};}};
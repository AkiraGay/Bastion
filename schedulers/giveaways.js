const a223_0x5f22=['Congratulations','0\x20*/15\x20*\x20*\x20*\x20*','winners','then','filter','The\x20following\x20users\x20have\x20won\x20the\x20giveaway\x20and\x20will\x20be\x20contacted\x20soon\x20for\x20their\x20rewards.\x0aThank\x20you\x20everyone\x20for\x20participating.\x20Better\x20luck\x20next\x20time.','guild','has','Constants','channels','length','reactions','push','Unfortunately,\x20no\x20one\x20participated\x20in\x20this\x20giveaway\x20and\x20therfore\x20there\x20aren\x27t\x20any\x20winners\x20this\x20time.','RED','deleteMany','default','_id','error','apply','exec','get','Logger','map','channel','client','find','@bastion/tesseract','messages','embeds','fetch','floor','edit','test','GIVEAWAY\x20ENDED','title','exports','SOMEWHAT_DARK','guilds','join','COLORS','giveaways','catch','constructor','users','cache'];(function(_0x599308,_0x588943){const _0x5f2290=function(_0x1572e5){while(--_0x1572e5){_0x599308['push'](_0x599308['shift']());}},_0x28bc32=function(){const _0x482302={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0xc23638,_0x27d2b3,_0x123a99,_0x225f8e){_0x225f8e=_0x225f8e||{};let _0x233cf5=_0x27d2b3+'='+_0x123a99,_0x2e8a0f=0x0;for(let _0x1e970b=0x0,_0xdbf752=_0xc23638['length'];_0x1e970b<_0xdbf752;_0x1e970b++){const _0x3767be=_0xc23638[_0x1e970b];_0x233cf5+=';\x20'+_0x3767be;const _0x3a0181=_0xc23638[_0x3767be];_0xc23638['push'](_0x3a0181),_0xdbf752=_0xc23638['length'],_0x3a0181!==!![]&&(_0x233cf5+='='+_0x3a0181);}_0x225f8e['cookie']=_0x233cf5;},'removeCookie':function(){return'dev';},'getCookie':function(_0x555662,_0x53fb19){_0x555662=_0x555662||function(_0x36c790){return _0x36c790;};const _0x27389c=_0x555662(new RegExp('(?:^|;\x20)'+_0x53fb19['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x5309aa=function(_0x53d990,_0x31cf61){_0x53d990(++_0x31cf61);};return _0x5309aa(_0x5f2290,_0x588943),_0x27389c?decodeURIComponent(_0x27389c[0x1]):undefined;}},_0x307e79=function(){const _0x4e73c3=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4e73c3['test'](_0x482302['removeCookie']['toString']());};_0x482302['updateCookie']=_0x307e79;let _0x120cbf='';const _0x17c91f=_0x482302['updateCookie']();if(!_0x17c91f)_0x482302['setCookie'](['*'],'counter',0x1);else _0x17c91f?_0x120cbf=_0x482302['getCookie'](null,'counter'):_0x482302['removeCookie']();};_0x28bc32();}(a223_0x5f22,0x1a6));const a223_0x28bc=function(_0x599308,_0x588943){_0x599308=_0x599308-0x1a7;let _0x5f2290=a223_0x5f22[_0x599308];return _0x5f2290;};const a223_0x3ac8f6=a223_0x28bc,a223_0x307e79=function(){let _0x17c91f=!![];return function(_0xc23638,_0x27d2b3){const _0x123a99=_0x17c91f?function(){const _0x355a7f=a223_0x28bc;if(_0x27d2b3){const _0x225f8e=_0x27d2b3[_0x355a7f(0x1b2)](_0xc23638,arguments);return _0x27d2b3=null,_0x225f8e;}}:function(){};return _0x17c91f=![],_0x123a99;};}(),a223_0x482302=a223_0x307e79(this,function(){const _0x233cf5=function(){const _0xc538d7=a223_0x28bc,_0x2e8a0f=_0x233cf5[_0xc538d7(0x1ca)]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[_0xc538d7(0x1ca)]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x2e8a0f[_0xc538d7(0x1c0)](a223_0x482302);};return _0x233cf5();});a223_0x482302();'use strict';const tesseract_1=require(a223_0x3ac8f6(0x1ba)),Giveaway_1=require('../models/Giveaway');module[a223_0x3ac8f6(0x1c3)]=class GiveawayScheduler extends tesseract_1['Scheduler']{constructor(){const _0x396a91=a223_0x3ac8f6;super(_0x396a91(0x1c8),{'cronTime':_0x396a91(0x1ce)}),this[_0x396a91(0x1b3)]=async()=>{const _0x132722=_0x396a91;try{if(!this[_0x132722(0x1b8)]['readyTimestamp'])return;if(!this[_0x132722(0x1b8)][_0x132722(0x1c5)][_0x132722(0x1cc)]['size'])return;const _0x1e970b=await Giveaway_1[_0x132722(0x1af)][_0x132722(0x1b9)]({'$or':this[_0x132722(0x1b8)][_0x132722(0x1c5)]['cache'][_0x132722(0x1b6)](_0x3767be=>({'guild':_0x3767be['id']})),'ends':{'$lte':new Date()}}),_0xdbf752=[];for(const _0x3a0181 of _0x1e970b){const _0x555662=this[_0x132722(0x1b8)][_0x132722(0x1c5)][_0x132722(0x1cc)]['get'](_0x3a0181[_0x132722(0x1d3)]);if(_0x555662[_0x132722(0x1a8)][_0x132722(0x1cc)][_0x132722(0x1d4)](_0x3a0181[_0x132722(0x1b7)])){const _0x53fb19=_0x555662[_0x132722(0x1a8)][_0x132722(0x1cc)][_0x132722(0x1b4)](_0x3a0181[_0x132722(0x1b7)]),_0x27389c=await _0x53fb19[_0x132722(0x1bb)]['fetch'](_0x3a0181[_0x132722(0x1b0)])[_0x132722(0x1c9)](()=>{});if(!_0x27389c)continue;let _0x5309aa=[];for(const _0x53d990 of['ðŸŽŠ','ðŸŽ‰']){_0x27389c[_0x132722(0x1aa)][_0x132722(0x1cc)][_0x132722(0x1d4)](_0x53d990)&&(await _0x27389c['reactions'][_0x132722(0x1cc)]['get'](_0x53d990)[_0x132722(0x1cb)][_0x132722(0x1bd)]()[_0x132722(0x1c9)](()=>{}),_0x5309aa['push'](..._0x27389c[_0x132722(0x1aa)][_0x132722(0x1cc)][_0x132722(0x1b4)](_0x53d990)['users'][_0x132722(0x1cc)][_0x132722(0x1d1)](_0x31cf61=>!_0x31cf61['bot'])['values']()));}const _0x36c790=[];for(let _0x4e73c3=0x0;_0x4e73c3<(_0x3a0181[_0x132722(0x1cf)]||0x1);_0x4e73c3++){if(!_0x5309aa[_0x132722(0x1a9)])break;const _0x2b2738=_0x5309aa[Math[_0x132722(0x1be)](Math['random']()*_0x5309aa[_0x132722(0x1a9)])];_0x36c790[_0x132722(0x1ab)](_0x2b2738),_0x5309aa=_0x5309aa[_0x132722(0x1d1)](_0x4a6d12=>_0x4a6d12['id']!==_0x2b2738['id']);}_0x36c790[_0x132722(0x1a9)]?await _0x27389c[_0x132722(0x1bf)]({'embed':{'color':tesseract_1[_0x132722(0x1a7)][_0x132722(0x1c7)][_0x132722(0x1c4)],'author':{'name':_0x132722(0x1c1)},'title':_0x27389c[_0x132722(0x1bc)][0x0][_0x132722(0x1c2)],'description':_0x132722(0x1d2),'fields':[{'name':_0x132722(0x1cd),'value':_0x36c790[_0x132722(0x1c6)](',\x20')}],'footer':{'text':_0x27389c['id']},'timestamp':new Date()}})[_0x132722(0x1d0)](()=>{_0xdbf752['push'](_0x27389c['id']);})['catch'](()=>{}):await _0x27389c[_0x132722(0x1bf)]({'embed':{'color':tesseract_1['Constants'][_0x132722(0x1c7)][_0x132722(0x1ad)],'author':{'name':'GIVEAWAY\x20ENDED'},'title':_0x27389c[_0x132722(0x1bc)][0x0]['title'],'description':_0x132722(0x1ac),'footer':{'text':_0x27389c['id']},'timestamp':new Date()}})['then'](()=>{const _0x98825=_0x132722;_0xdbf752[_0x98825(0x1ab)](_0x27389c['id']);})[_0x132722(0x1c9)](()=>{});}}_0xdbf752['length']&&await Giveaway_1['default'][_0x132722(0x1ae)]({'$or':_0xdbf752[_0x132722(0x1b6)](_0x2f43cc=>({'_id':_0x2f43cc}))})['catch'](()=>{});}catch(_0x24782a){tesseract_1[_0x132722(0x1b5)][_0x132722(0x1b1)](_0x24782a);}};}};
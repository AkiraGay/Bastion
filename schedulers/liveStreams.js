const a225_0x20b5=['default','user_name','handleTwitchStreamers','50527wAaZVJ','client','329554vkjifY','214978zMEDJV','4DCRTxd','constructor','16OfmbAA','twitchSubscriptions','{width}','Logger','146526OTOoui','TWITCH','credentials','23339CuQYby','Viewers','title','channelId','json','map','find','thumbnail_url','guilds','message','ðŸ”´\x20LIVE','node-fetch','{height}','return\x20/\x22\x20+\x20this\x20+\x20\x22/','Bearer\x20','Language','viewer_count','get','data','channels','streamers','catch','set','liveStreams','started_at','Scheduler','replace','has','twitch','720','size','0\x20*/5\x20*\x20*\x20*\x20*','language','readyTimestamp','@bastion/tesseract','15242UixaDl','69357upOpkk','application/json','../utils/constants','cache','_id'];const a225_0x58f9=function(_0x523e97,_0x156a9c){_0x523e97=_0x523e97-0x122;let _0x3ecd6e=a225_0x20b5[_0x523e97];return _0x3ecd6e;};const a225_0x1fe796=a225_0x58f9;(function(_0x31197f,_0xbd4c25){const _0x355d30=a225_0x58f9;while(!![]){try{const _0x3fcf90=-parseInt(_0x355d30(0x148))+-parseInt(_0x355d30(0x155))*-parseInt(_0x355d30(0x14e))+-parseInt(_0x355d30(0x152))+-parseInt(_0x355d30(0x14a))+parseInt(_0x355d30(0x140))+-parseInt(_0x355d30(0x13f))*-parseInt(_0x355d30(0x14c))+parseInt(_0x355d30(0x14b));if(_0x3fcf90===_0xbd4c25)break;else _0x31197f['push'](_0x31197f['shift']());}catch(_0x2d6fac){_0x31197f['push'](_0x31197f['shift']());}}}(a225_0x20b5,0x2ee78));const a225_0x4ce826=function(){let _0x34ea2f=!![];return function(_0xdb1f8,_0xfa4fb1){const _0x4727d9=_0x34ea2f?function(){if(_0xfa4fb1){const _0x34627f=_0xfa4fb1['apply'](_0xdb1f8,arguments);return _0xfa4fb1=null,_0x34627f;}}:function(){};return _0x34ea2f=![],_0x4727d9;};}(),a225_0x4e89f9=a225_0x4ce826(this,function(){const _0x310e9b=function(){const _0x3d4d0b=a225_0x58f9,_0x2dc730=_0x310e9b['constructor'](_0x3d4d0b(0x129))()[_0x3d4d0b(0x14d)]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x2dc730['test'](a225_0x4e89f9);};return _0x310e9b();});a225_0x4e89f9();'use strict';const tesseract_1=require(a225_0x1fe796(0x13e)),node_fetch_1=require(a225_0x1fe796(0x127)),Guild_1=require('../models/Guild'),constants=require(a225_0x1fe796(0x142));module['exports']=class LiveStreams extends tesseract_1[a225_0x1fe796(0x135)]{constructor(){const _0x75ea7c=a225_0x1fe796;super(_0x75ea7c(0x133),{'cronTime':_0x75ea7c(0x13b)}),this[_0x75ea7c(0x147)]=async(_0x4d5a87,_0xccb28b,_0x252803)=>{const _0x49d325=_0x75ea7c;if(!this[_0x49d325(0x149)][_0x49d325(0x13d)])return;if(!this[_0x49d325(0x14f)][_0x49d325(0x137)](_0x4d5a87))this[_0x49d325(0x14f)][_0x49d325(0x132)](_0x4d5a87,[]);const _0x16bc35=this[_0x49d325(0x14f)][_0x49d325(0x12d)](_0x4d5a87),_0x2b56c0=await node_fetch_1[_0x49d325(0x145)]('https://api.twitch.tv/helix/streams/?user_login='+_0xccb28b['users']['join']('&user_login='),{'headers':{'Accept':_0x49d325(0x141),'Authorization':_0x49d325(0x12a)+this['client'][_0x49d325(0x154)][_0x49d325(0x138)]['accessToken'],'Client-ID':this[_0x49d325(0x149)][_0x49d325(0x154)]['twitch']['clientId']}}),_0x24f36f=(await _0x2b56c0[_0x49d325(0x159)]())[_0x49d325(0x12e)];for(const _0x10f93d of _0x24f36f){if(_0x16bc35['includes'](_0x10f93d['id']))continue;this[_0x49d325(0x149)][_0x49d325(0x12f)][_0x49d325(0x143)][_0x49d325(0x137)](_0xccb28b[_0x49d325(0x158)])&&await this[_0x49d325(0x149)]['channels'][_0x49d325(0x143)]['get'](_0xccb28b['channelId'])['send'](_0x252803,{'embed':{'color':constants['COLORS'][_0x49d325(0x153)],'author':{'name':_0x10f93d[_0x49d325(0x146)],'url':'https://twitch.tv/'+_0x10f93d[_0x49d325(0x146)]},'description':_0x10f93d[_0x49d325(0x157)],'fields':[{'name':_0x49d325(0x156),'value':_0x10f93d[_0x49d325(0x12c)]['toString'](),'inline':!![]},{'name':_0x49d325(0x12b),'value':_0x10f93d[_0x49d325(0x13c)]['toUpperCase'](),'inline':!![]}],'image':{'url':_0x10f93d[_0x49d325(0x123)][_0x49d325(0x136)](_0x49d325(0x150),'1280')['replace'](_0x49d325(0x128),_0x49d325(0x139))},'footer':{'text':_0x49d325(0x126)},'timestamp':_0x10f93d[_0x49d325(0x134)]}})['then'](()=>{_0x16bc35['push'](_0x10f93d['id']);})[_0x49d325(0x131)](()=>{});}this[_0x49d325(0x14f)][_0x49d325(0x132)](_0x4d5a87,_0x16bc35);},this['exec']=async()=>{const _0x22ee49=_0x75ea7c;try{if(!this[_0x22ee49(0x149)][_0x22ee49(0x124)][_0x22ee49(0x143)][_0x22ee49(0x13a)])return;const _0x4c6949=await Guild_1[_0x22ee49(0x145)][_0x22ee49(0x122)]({'$or':this[_0x22ee49(0x149)]['guilds']['cache'][_0x22ee49(0x15a)](_0x2afe20=>({'_id':_0x2afe20['id']})),'streamers':{'$exists':!![]}});for(const _0x5ca4f2 of _0x4c6949){_0x5ca4f2[_0x22ee49(0x130)][_0x22ee49(0x138)]&&_0x5ca4f2[_0x22ee49(0x130)][_0x22ee49(0x138)][_0x22ee49(0x158)]&&_0x5ca4f2['streamers'][_0x22ee49(0x138)]['users']['length']&&this[_0x22ee49(0x147)](_0x5ca4f2[_0x22ee49(0x144)],_0x5ca4f2[_0x22ee49(0x130)][_0x22ee49(0x138)],_0x5ca4f2[_0x22ee49(0x130)][_0x22ee49(0x125)])[_0x22ee49(0x131)](_0x5e9339=>tesseract_1[_0x22ee49(0x151)]['error'](_0x5e9339));}}catch(_0xfdba16){tesseract_1[_0x22ee49(0x151)]['error'](_0xfdba16);}},this[_0x75ea7c(0x14f)]=new Map();}};
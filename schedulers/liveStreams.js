const a194_0x3ed3=['title','twitch','Language','Bearer\x20','return\x20/\x22\x20+\x20this\x20+\x20\x22/','twitchSubscriptions','constructor','https://twitch.tv/','user_name','data','clientId','application/json','users','{width}','../models/Guild','json','TWITCH','has','toUpperCase','length','liveStreams','credentials','https://api.twitch.tv/helix/streams/?user_login=','viewer_count','handleTwitchStreamers','set','push','client','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','accessToken','send','720','then','0\x20*/5\x20*\x20*\x20*\x20*','default','compile','../utils/constants','{height}','cache','guilds','COLORS','find','channelId','streamers','exec','map','apply','includes','size','toString','_id','get','channels','catch','ðŸ”´\x20LIVE','replace','test'];(function(_0x5a57b9,_0x3ed359){const _0x346994=function(_0x4bfa1c){while(--_0x4bfa1c){_0x5a57b9['push'](_0x5a57b9['shift']());}};const _0x52b10f=function(){const _0x1c138c={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0xaa48f5,_0xf849b3,_0x27d3b5,_0x27ee12){_0x27ee12=_0x27ee12||{};let _0x5f336c=_0xf849b3+'='+_0x27d3b5;let _0x4f5806=0x0;for(let _0x367de1=0x0,_0x37d511=_0xaa48f5['length'];_0x367de1<_0x37d511;_0x367de1++){const _0x4db9e6=_0xaa48f5[_0x367de1];_0x5f336c+=';\x20'+_0x4db9e6;const _0x521dfe=_0xaa48f5[_0x4db9e6];_0xaa48f5['push'](_0x521dfe);_0x37d511=_0xaa48f5['length'];if(_0x521dfe!==!![]){_0x5f336c+='='+_0x521dfe;}}_0x27ee12['cookie']=_0x5f336c;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1d406f,_0x216c74){_0x1d406f=_0x1d406f||function(_0x541b85){return _0x541b85;};const _0x4b2345=_0x1d406f(new RegExp('(?:^|;\x20)'+_0x216c74['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x4b4882=function(_0x16ed24,_0x1af4cf){_0x16ed24(++_0x1af4cf);};_0x4b4882(_0x346994,_0x3ed359);return _0x4b2345?decodeURIComponent(_0x4b2345[0x1]):undefined;}};const _0x1f81e2=function(){const _0xe0e23b=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0xe0e23b['test'](_0x1c138c['removeCookie']['toString']());};_0x1c138c['updateCookie']=_0x1f81e2;let _0x4111c8='';const _0x30cc21=_0x1c138c['updateCookie']();if(!_0x30cc21){_0x1c138c['setCookie'](['*'],'counter',0x1);}else if(_0x30cc21){_0x4111c8=_0x1c138c['getCookie'](null,'counter');}else{_0x1c138c['removeCookie']();}};_0x52b10f();}(a194_0x3ed3,0x1df));const a194_0x3469=function(_0x5a57b9,_0x3ed359){_0x5a57b9=_0x5a57b9-0x0;let _0x346994=a194_0x3ed3[_0x5a57b9];return _0x346994;};const a194_0x1c138c=function(){let _0x5c1aca=!![];return function(_0x169fbd,_0x5eb54c){const _0x394e06=_0x5c1aca?function(){if(_0x5eb54c){const _0x26a77e=_0x5eb54c[a194_0x3469('0x17')](_0x169fbd,arguments);_0x5eb54c=null;return _0x26a77e;}}:function(){};_0x5c1aca=![];return _0x394e06;};}();const a194_0x4bfa1c=a194_0x1c138c(this,function(){const _0x1b567c=function(){const _0x3934c9=_0x1b567c[a194_0x3469('0x28')](a194_0x3469('0x26'))()[a194_0x3469('0xc')](a194_0x3469('0x5'));return!_0x3934c9[a194_0x3469('0x21')](a194_0x4bfa1c);};return _0x1b567c();});a194_0x4bfa1c();'use strict';const tesseract_1=require('@bastion/tesseract');const node_fetch_1=require('node-fetch');const Guild_1=require(a194_0x3469('0x30'));const constants=require(a194_0x3469('0xd'));module['exports']=class LiveStreams extends tesseract_1['Scheduler']{constructor(){super(a194_0x3469('0x36'),{'cronTime':a194_0x3469('0xa')});this['handleTwitchStreamers']=async(_0x328c1c,_0xf0af58)=>{if(!this['client']['readyTimestamp'])return;if(!this[a194_0x3469('0x27')][a194_0x3469('0x33')](_0x328c1c))this[a194_0x3469('0x27')][a194_0x3469('0x2')](_0x328c1c,[]);const _0x4f7b4f=this[a194_0x3469('0x27')]['get'](_0x328c1c);const _0xb52335=await node_fetch_1[a194_0x3469('0xb')](a194_0x3469('0x38')+_0xf0af58[a194_0x3469('0x2e')]['join']('&user_login='),{'headers':{'Accept':a194_0x3469('0x2d'),'Authorization':a194_0x3469('0x25')+this[a194_0x3469('0x4')][a194_0x3469('0x37')]['twitch'][a194_0x3469('0x6')],'Client-ID':this['client'][a194_0x3469('0x37')][a194_0x3469('0x23')][a194_0x3469('0x2c')]}});const _0x9e0af7=(await _0xb52335[a194_0x3469('0x31')]())[a194_0x3469('0x2b')];for(const _0xd78bc9 of _0x9e0af7){if(_0x4f7b4f[a194_0x3469('0x18')](_0xd78bc9['id']))continue;if(this[a194_0x3469('0x4')][a194_0x3469('0x1d')][a194_0x3469('0xf')][a194_0x3469('0x33')](_0xf0af58[a194_0x3469('0x13')])){await this[a194_0x3469('0x4')][a194_0x3469('0x1d')][a194_0x3469('0xf')][a194_0x3469('0x1c')](_0xf0af58[a194_0x3469('0x13')])[a194_0x3469('0x7')]({'embed':{'color':constants[a194_0x3469('0x11')][a194_0x3469('0x32')],'author':{'name':_0xd78bc9[a194_0x3469('0x2a')],'url':a194_0x3469('0x29')+_0xd78bc9[a194_0x3469('0x2a')]},'description':_0xd78bc9[a194_0x3469('0x22')],'fields':[{'name':'Viewers','value':_0xd78bc9[a194_0x3469('0x0')][a194_0x3469('0x1a')](),'inline':!![]},{'name':a194_0x3469('0x24'),'value':_0xd78bc9['language'][a194_0x3469('0x34')](),'inline':!![]}],'image':{'url':_0xd78bc9['thumbnail_url'][a194_0x3469('0x20')](a194_0x3469('0x2f'),'1280')['replace'](a194_0x3469('0xe'),a194_0x3469('0x8'))},'footer':{'text':a194_0x3469('0x1f')},'timestamp':_0xd78bc9['started_at']}})[a194_0x3469('0x9')](()=>{_0x4f7b4f[a194_0x3469('0x3')](_0xd78bc9['id']);})[a194_0x3469('0x1e')](()=>{});}}this[a194_0x3469('0x27')]['set'](_0x328c1c,_0x4f7b4f);};this[a194_0x3469('0x15')]=async()=>{if(!this[a194_0x3469('0x4')][a194_0x3469('0x10')][a194_0x3469('0xf')][a194_0x3469('0x19')])return;const _0x4ee6ca=await Guild_1['default'][a194_0x3469('0x12')]({'$or':this[a194_0x3469('0x4')][a194_0x3469('0x10')][a194_0x3469('0xf')][a194_0x3469('0x16')](_0x436e49=>({'_id':_0x436e49['id']})),'streamers':{'$exists':!![]}});for(const _0x5a4f8e of _0x4ee6ca){if(_0x5a4f8e['streamers'][a194_0x3469('0x23')]&&_0x5a4f8e['streamers'][a194_0x3469('0x23')][a194_0x3469('0x13')]&&_0x5a4f8e['streamers'][a194_0x3469('0x23')]['users'][a194_0x3469('0x35')]){this[a194_0x3469('0x1')](_0x5a4f8e[a194_0x3469('0x1b')],_0x5a4f8e[a194_0x3469('0x14')][a194_0x3469('0x23')]);}}};this[a194_0x3469('0x27')]=new Map();}};
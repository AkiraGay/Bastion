const a193_0x93ff=['Language','node-fetch','twitch','credentials','toUpperCase','client','ðŸ”´\x20LIVE','{width}','readyTimestamp','catch','../utils/constants','started_at','return\x20/\x22\x20+\x20this\x20+\x20\x22/','application/json','channelId','handleTwitchStreamers','cache','users','toString','thumbnail_url','get','user_name','accessToken','0\x20*/5\x20*\x20*\x20*\x20*','../models/Guild','guilds','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','@bastion/tesseract','language','TWITCH','exec','liveStreams','exports','Viewers','streamers','has','includes','channels','json','set','length','then','apply','COLORS','&user_login=','find','https://twitch.tv/','default','test','push','size','constructor','replace','map','_id','twitchSubscriptions','data'];(function(_0x4dc815,_0x93ffc8){const _0x3b523e=function(_0x4b7eb8){while(--_0x4b7eb8){_0x4dc815['push'](_0x4dc815['shift']());}};const _0x2fe53c=function(){const _0x44d0b1={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3d0766,_0x500a08,_0xcbbb23,_0x35c39f){_0x35c39f=_0x35c39f||{};let _0x28c246=_0x500a08+'='+_0xcbbb23;let _0x396c9a=0x0;for(let _0x442818=0x0,_0x13a258=_0x3d0766['length'];_0x442818<_0x13a258;_0x442818++){const _0x2846c0=_0x3d0766[_0x442818];_0x28c246+=';\x20'+_0x2846c0;const _0x5cc196=_0x3d0766[_0x2846c0];_0x3d0766['push'](_0x5cc196);_0x13a258=_0x3d0766['length'];if(_0x5cc196!==!![]){_0x28c246+='='+_0x5cc196;}}_0x35c39f['cookie']=_0x28c246;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2ae812,_0x412c00){_0x2ae812=_0x2ae812||function(_0x2845da){return _0x2845da;};const _0x261f6d=_0x2ae812(new RegExp('(?:^|;\x20)'+_0x412c00['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x23e330=function(_0x1c29c5,_0x1afa8b){_0x1c29c5(++_0x1afa8b);};_0x23e330(_0x3b523e,_0x93ffc8);return _0x261f6d?decodeURIComponent(_0x261f6d[0x1]):undefined;}};const _0x301f03=function(){const _0x35ffda=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x35ffda['test'](_0x44d0b1['removeCookie']['toString']());};_0x44d0b1['updateCookie']=_0x301f03;let _0x330f82='';const _0x1f262f=_0x44d0b1['updateCookie']();if(!_0x1f262f){_0x44d0b1['setCookie'](['*'],'counter',0x1);}else if(_0x1f262f){_0x330f82=_0x44d0b1['getCookie'](null,'counter');}else{_0x44d0b1['removeCookie']();}};_0x2fe53c();}(a193_0x93ff,0x78));const a193_0x3b52=function(_0x4dc815,_0x93ffc8){_0x4dc815=_0x4dc815-0x0;let _0x3b523e=a193_0x93ff[_0x4dc815];return _0x3b523e;};const a193_0x44d0b1=function(){let _0x43d8b6=!![];return function(_0x33139f,_0x5716ac){const _0x322ab3=_0x43d8b6?function(){if(_0x5716ac){const _0x3c2dac=_0x5716ac[a193_0x3b52('0x24')](_0x33139f,arguments);_0x5716ac=null;return _0x3c2dac;}}:function(){};_0x43d8b6=![];return _0x322ab3;};}();const a193_0x4b7eb8=a193_0x44d0b1(this,function(){const _0xb6c58=function(){const _0x2e4f4e=_0xb6c58[a193_0x3b52('0x2d')](a193_0x3b52('0x6'))()['compile'](a193_0x3b52('0x14'));return!_0x2e4f4e[a193_0x3b52('0x2a')](a193_0x4b7eb8);};return _0xb6c58();});a193_0x4b7eb8();'use strict';const tesseract_1=require(a193_0x3b52('0x15'));const node_fetch_1=require(a193_0x3b52('0x34'));const Guild_1=require(a193_0x3b52('0x12'));const constants=require(a193_0x3b52('0x4'));module[a193_0x3b52('0x1a')]=class LiveStreams extends tesseract_1['Scheduler']{constructor(){super(a193_0x3b52('0x19'),{'cronTime':a193_0x3b52('0x11')});this[a193_0x3b52('0x9')]=async(_0x4a7155,_0x42a7d6)=>{if(!this[a193_0x3b52('0x38')][a193_0x3b52('0x2')])return;if(!this[a193_0x3b52('0x31')][a193_0x3b52('0x1d')](_0x4a7155))this[a193_0x3b52('0x31')][a193_0x3b52('0x21')](_0x4a7155,[]);const _0x2facf5=this[a193_0x3b52('0x31')][a193_0x3b52('0xe')](_0x4a7155);const _0x4460d7=await node_fetch_1['default']('https://api.twitch.tv/helix/streams/?user_login='+_0x42a7d6[a193_0x3b52('0xb')]['join'](a193_0x3b52('0x26')),{'headers':{'Accept':a193_0x3b52('0x7'),'Authorization':'Bearer\x20'+this['client'][a193_0x3b52('0x36')][a193_0x3b52('0x35')][a193_0x3b52('0x10')],'Client-ID':this[a193_0x3b52('0x38')][a193_0x3b52('0x36')][a193_0x3b52('0x35')]['clientId']}});const _0x21bcb0=(await _0x4460d7[a193_0x3b52('0x20')]())[a193_0x3b52('0x32')];for(const _0x13f0bb of _0x21bcb0){if(_0x2facf5[a193_0x3b52('0x1e')](_0x13f0bb['id']))continue;if(this[a193_0x3b52('0x38')][a193_0x3b52('0x1f')][a193_0x3b52('0xa')][a193_0x3b52('0x1d')](_0x42a7d6[a193_0x3b52('0x8')])){await this[a193_0x3b52('0x38')]['channels']['cache']['get'](_0x42a7d6[a193_0x3b52('0x8')])['send']({'embed':{'color':constants[a193_0x3b52('0x25')][a193_0x3b52('0x17')],'author':{'name':_0x13f0bb[a193_0x3b52('0xf')],'url':a193_0x3b52('0x28')+_0x13f0bb['user_name']},'description':_0x13f0bb['title'],'fields':[{'name':a193_0x3b52('0x1b'),'value':_0x13f0bb['viewer_count'][a193_0x3b52('0xc')](),'inline':!![]},{'name':a193_0x3b52('0x33'),'value':_0x13f0bb[a193_0x3b52('0x16')][a193_0x3b52('0x37')](),'inline':!![]}],'image':{'url':_0x13f0bb[a193_0x3b52('0xd')][a193_0x3b52('0x2e')](a193_0x3b52('0x1'),'1280')[a193_0x3b52('0x2e')]('{height}','720')},'footer':{'text':a193_0x3b52('0x0')},'timestamp':_0x13f0bb[a193_0x3b52('0x5')]}})[a193_0x3b52('0x23')](()=>{_0x2facf5[a193_0x3b52('0x2b')](_0x13f0bb['id']);})[a193_0x3b52('0x3')](()=>{});}}this[a193_0x3b52('0x31')][a193_0x3b52('0x21')](_0x4a7155,_0x2facf5);};this[a193_0x3b52('0x18')]=async()=>{if(!this[a193_0x3b52('0x38')]['guilds'][a193_0x3b52('0xa')][a193_0x3b52('0x2c')])return;const _0x315594=await Guild_1[a193_0x3b52('0x29')][a193_0x3b52('0x27')]({'$or':this['client'][a193_0x3b52('0x13')][a193_0x3b52('0xa')][a193_0x3b52('0x2f')](_0x38a19c=>({'_id':_0x38a19c['id']})),'streamers':{'$exists':!![]}});for(const _0x461421 of _0x315594){if(_0x461421[a193_0x3b52('0x1c')][a193_0x3b52('0x35')]&&_0x461421[a193_0x3b52('0x1c')][a193_0x3b52('0x35')][a193_0x3b52('0x8')]&&_0x461421[a193_0x3b52('0x1c')][a193_0x3b52('0x35')][a193_0x3b52('0xb')][a193_0x3b52('0x22')]){this[a193_0x3b52('0x9')](_0x461421[a193_0x3b52('0x30')],_0x461421['streamers'][a193_0x3b52('0x35')]);}}};this[a193_0x3b52('0x31')]=new Map();}};
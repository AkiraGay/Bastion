function a227_0x3967(){const _0x85b750=['replace','twitchSubscriptions','readyTimestamp','search','send','length','_id','(((.+)+)+)+$','find','catch','COLORS','title','data','1280','join','client','users','Scheduler','channelId','apply','1791pIutqQ','316652NzqNoK','94865BBrMmB','default','get','user_name','217286GLwkLj','3UupYCR','clientId','guilds','error','viewer_count','constructor','toString','55049GrgrQB','exec','streamers','&user_login=','Viewers','toUpperCase','1615242CnmeKc','map','{width}','application/json','cache','handleTwitchStreamers','https://api.twitch.tv/helix/streams/?user_login=','accessToken','thumbnail_url','22160UkAgSH','../models/Guild','twitch','Language','liveStreams','size','has','@bastion/tesseract','28yWFKWw','575976DTGvtT','Bearer\x20','channels','credentials','set','https://twitch.tv/','push','TWITCH'];a227_0x3967=function(){return _0x85b750;};return a227_0x3967();}const a227_0x494267=a227_0x417f;(function(_0x3cb646,_0x256ee8){const _0x59d876=a227_0x417f,_0x583e5b=_0x3cb646();while(!![]){try{const _0x197482=parseInt(_0x59d876(0xeb))/0x1+-parseInt(_0x59d876(0xe3))/0x2*(parseInt(_0x59d876(0xe4))/0x3)+-parseInt(_0x59d876(0x102))/0x4*(-parseInt(_0x59d876(0xdf))/0x5)+-parseInt(_0x59d876(0xf1))/0x6+parseInt(_0x59d876(0xde))/0x7+-parseInt(_0x59d876(0x103))/0x8+parseInt(_0x59d876(0xdd))/0x9*(parseInt(_0x59d876(0xfa))/0xa);if(_0x197482===_0x256ee8)break;else _0x583e5b['push'](_0x583e5b['shift']());}catch(_0x140a5b){_0x583e5b['push'](_0x583e5b['shift']());}}}(a227_0x3967,0x36be9));const a227_0x41055b=(function(){let _0x100440=!![];return function(_0x5178a7,_0x554b72){const _0x56aad7=_0x100440?function(){const _0xedf53e=a227_0x417f;if(_0x554b72){const _0xff6e2f=_0x554b72[_0xedf53e(0xdc)](_0x5178a7,arguments);return _0x554b72=null,_0xff6e2f;}}:function(){};return _0x100440=![],_0x56aad7;};}()),a227_0x3dedb5=a227_0x41055b(this,function(){const _0x3668de=a227_0x417f;return a227_0x3dedb5[_0x3668de(0xea)]()[_0x3668de(0xcc)](_0x3668de(0xd0))['toString']()[_0x3668de(0xe9)](a227_0x3dedb5)[_0x3668de(0xcc)](_0x3668de(0xd0));});a227_0x3dedb5();'use strict';function a227_0x417f(_0xfd1724,_0x25ff30){const _0x157b4b=a227_0x3967();return a227_0x417f=function(_0x3dedb5,_0x41055b){_0x3dedb5=_0x3dedb5-0xc9;let _0x39677d=_0x157b4b[_0x3dedb5];return _0x39677d;},a227_0x417f(_0xfd1724,_0x25ff30);}const tesseract_1=require(a227_0x494267(0x101)),node_fetch_1=require('node-fetch'),Guild_1=require(a227_0x494267(0xfb)),constants=require('../utils/constants');module['exports']=class LiveStreams extends tesseract_1[a227_0x494267(0xda)]{[a227_0x494267(0xca)];constructor(){const _0x5a75d8=a227_0x494267;super(_0x5a75d8(0xfe),{'cronTime':'0\x20*/5\x20*\x20*\x20*\x20*'}),this[_0x5a75d8(0xca)]=new Map();}['handleTwitchStreamers']=async(_0x152886,_0x486579,_0xe83b5f)=>{const _0x1abd1c=a227_0x494267;if(!this['client'][_0x1abd1c(0xcb)])return;if(!this[_0x1abd1c(0xca)][_0x1abd1c(0x100)](_0x152886))this['twitchSubscriptions'][_0x1abd1c(0x107)](_0x152886,[]);const _0x4ae55b=this['twitchSubscriptions']['get'](_0x152886),_0x421b67=await(0x0,node_fetch_1[_0x1abd1c(0xe0)])(_0x1abd1c(0xf7)+_0x486579[_0x1abd1c(0xd9)][_0x1abd1c(0xd7)](_0x1abd1c(0xee)),{'headers':{'Accept':_0x1abd1c(0xf4),'Authorization':_0x1abd1c(0x104)+this[_0x1abd1c(0xd8)][_0x1abd1c(0x106)][_0x1abd1c(0xfc)][_0x1abd1c(0xf8)],'Client-ID':this['client'][_0x1abd1c(0x106)][_0x1abd1c(0xfc)][_0x1abd1c(0xe5)]}}),_0x4b8324=(await _0x421b67['json']())[_0x1abd1c(0xd5)];for(const _0x366426 of _0x4b8324){if(_0x4ae55b['includes'](_0x366426['id']))continue;this[_0x1abd1c(0xd8)][_0x1abd1c(0x105)][_0x1abd1c(0xf5)][_0x1abd1c(0x100)](_0x486579['channelId'])&&await this['client'][_0x1abd1c(0x105)][_0x1abd1c(0xf5)][_0x1abd1c(0xe1)](_0x486579[_0x1abd1c(0xdb)])[_0x1abd1c(0xcd)](_0xe83b5f,{'embed':{'color':constants[_0x1abd1c(0xd3)][_0x1abd1c(0x10a)],'author':{'name':_0x366426[_0x1abd1c(0xe2)],'url':_0x1abd1c(0x108)+_0x366426[_0x1abd1c(0xe2)]},'description':_0x366426[_0x1abd1c(0xd4)],'fields':[{'name':_0x1abd1c(0xef),'value':_0x366426[_0x1abd1c(0xe8)][_0x1abd1c(0xea)](),'inline':!![]},{'name':_0x1abd1c(0xfd),'value':_0x366426['language'][_0x1abd1c(0xf0)](),'inline':!![]}],'image':{'url':_0x366426[_0x1abd1c(0xf9)][_0x1abd1c(0xc9)](_0x1abd1c(0xf3),_0x1abd1c(0xd6))['replace']('{height}','720')},'footer':{'text':'ðŸ”´\x20LIVE'},'timestamp':_0x366426['started_at']}})['then'](()=>{const _0x2fccb3=_0x1abd1c;_0x4ae55b[_0x2fccb3(0x109)](_0x366426['id']);})['catch'](()=>{});}this['twitchSubscriptions'][_0x1abd1c(0x107)](_0x152886,_0x4ae55b);};[a227_0x494267(0xec)]=async()=>{const _0x466b51=a227_0x494267;try{if(!this[_0x466b51(0xd8)][_0x466b51(0xe6)][_0x466b51(0xf5)][_0x466b51(0xff)])return;const _0xecef7=await Guild_1['default'][_0x466b51(0xd1)]({'$or':this['client'][_0x466b51(0xe6)]['cache'][_0x466b51(0xf2)](_0x2bc85b=>({'_id':_0x2bc85b['id']})),'streamers':{'$exists':!![]}});for(const _0x2d611b of _0xecef7){_0x2d611b[_0x466b51(0xed)][_0x466b51(0xfc)]&&_0x2d611b['streamers'][_0x466b51(0xfc)]['channelId']&&_0x2d611b[_0x466b51(0xed)][_0x466b51(0xfc)][_0x466b51(0xd9)][_0x466b51(0xce)]&&this[_0x466b51(0xf6)](_0x2d611b[_0x466b51(0xcf)],_0x2d611b[_0x466b51(0xed)][_0x466b51(0xfc)],_0x2d611b[_0x466b51(0xed)]['message'])[_0x466b51(0xd2)](_0x231e42=>tesseract_1['Logger'][_0x466b51(0xe7)](_0x231e42));}}catch(_0x460d2a){tesseract_1['Logger']['error'](_0x460d2a);}};};
const a206_0x1102=['client','constructor','toString','cache','handleTwitchStreamers','COLORS','default','credentials','clientId','has','thumbnail_url','accessToken','Bearer\x20','language','node-fetch','twitch','data','application/json','error','https://twitch.tv/','channels','exec','json','started_at','1280','Language','exports','@bastion/tesseract','size','set','readyTimestamp','user_name','../models/Guild','0\x20*/5\x20*\x20*\x20*\x20*','Scheduler','push','720','then','guilds','users','streamers','twitchSubscriptions','catch','{width}','channelId','join','{height}','liveStreams','length','Logger','send','get','test','map'];(function(_0x5f198d,_0x110229){const _0x449ad6=function(_0x3a5797){while(--_0x3a5797){_0x5f198d['push'](_0x5f198d['shift']());}},_0x2ba41b=function(){const _0x894016={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x22a20e,_0xc697cf,_0x2c770c,_0x5f0fac){_0x5f0fac=_0x5f0fac||{};let _0x1ae2e9=_0xc697cf+'='+_0x2c770c,_0x284afc=0x0;for(let _0x21bc54=0x0,_0x50ebc0=_0x22a20e['length'];_0x21bc54<_0x50ebc0;_0x21bc54++){const _0x32a14d=_0x22a20e[_0x21bc54];_0x1ae2e9+=';\x20'+_0x32a14d;const _0x39e2e0=_0x22a20e[_0x32a14d];_0x22a20e['push'](_0x39e2e0),_0x50ebc0=_0x22a20e['length'],_0x39e2e0!==!![]&&(_0x1ae2e9+='='+_0x39e2e0);}_0x5f0fac['cookie']=_0x1ae2e9;},'removeCookie':function(){return'dev';},'getCookie':function(_0x32c028,_0x58e908){_0x32c028=_0x32c028||function(_0x13ccd5){return _0x13ccd5;};const _0x208325=_0x32c028(new RegExp('(?:^|;\x20)'+_0x58e908['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x14f59d=function(_0x1982a1,_0x51abb4){_0x1982a1(++_0x51abb4);};return _0x14f59d(_0x449ad6,_0x110229),_0x208325?decodeURIComponent(_0x208325[0x1]):undefined;}},_0x5bce2b=function(){const _0x670110=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x670110['test'](_0x894016['removeCookie']['toString']());};_0x894016['updateCookie']=_0x5bce2b;let _0x4c0d83='';const _0x50968a=_0x894016['updateCookie']();if(!_0x50968a)_0x894016['setCookie'](['*'],'counter',0x1);else _0x50968a?_0x4c0d83=_0x894016['getCookie'](null,'counter'):_0x894016['removeCookie']();};_0x2ba41b();}(a206_0x1102,0x1f3));const a206_0x449a=function(_0x5f198d,_0x110229){_0x5f198d=_0x5f198d-0x0;let _0x449ad6=a206_0x1102[_0x5f198d];return _0x449ad6;};const a206_0x894016=function(){let _0x4c0d83=!![];return function(_0x50968a,_0x22a20e){const _0xc697cf=_0x4c0d83?function(){if(_0x22a20e){const _0x2c770c=_0x22a20e['apply'](_0x50968a,arguments);return _0x22a20e=null,_0x2c770c;}}:function(){};return _0x4c0d83=![],_0xc697cf;};}(),a206_0x3a5797=a206_0x894016(this,function(){const _0x5f0fac=function(){const _0x1ae2e9=_0x5f0fac[a206_0x449a('0x2a')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()['constructor']('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x1ae2e9[a206_0x449a('0x27')](a206_0x3a5797);};return _0x5f0fac();});a206_0x3a5797();'use strict';const tesseract_1=require(a206_0x449a('0xe')),node_fetch_1=require(a206_0x449a('0x1')),Guild_1=require(a206_0x449a('0x13')),constants=require('../utils/constants');module[a206_0x449a('0xd')]=class LiveStreams extends tesseract_1[a206_0x449a('0x15')]{constructor(){super(a206_0x449a('0x22'),{'cronTime':a206_0x449a('0x14')}),this[a206_0x449a('0x2d')]=async(_0x284afc,_0x21bc54)=>{if(!this[a206_0x449a('0x29')][a206_0x449a('0x11')])return;if(!this[a206_0x449a('0x1c')]['has'](_0x284afc))this['twitchSubscriptions'][a206_0x449a('0x10')](_0x284afc,[]);const _0x50ebc0=this['twitchSubscriptions'][a206_0x449a('0x26')](_0x284afc),_0x32a14d=await node_fetch_1['default']('https://api.twitch.tv/helix/streams/?user_login='+_0x21bc54[a206_0x449a('0x1a')][a206_0x449a('0x20')]('&user_login='),{'headers':{'Accept':a206_0x449a('0x4'),'Authorization':a206_0x449a('0x35')+this[a206_0x449a('0x29')][a206_0x449a('0x30')][a206_0x449a('0x2')][a206_0x449a('0x34')],'Client-ID':this[a206_0x449a('0x29')][a206_0x449a('0x30')][a206_0x449a('0x2')][a206_0x449a('0x31')]}}),_0x39e2e0=(await _0x32a14d[a206_0x449a('0x9')]())[a206_0x449a('0x3')];for(const _0x32c028 of _0x39e2e0){if(_0x50ebc0['includes'](_0x32c028['id']))continue;this['client'][a206_0x449a('0x7')][a206_0x449a('0x2c')][a206_0x449a('0x32')](_0x21bc54[a206_0x449a('0x1f')])&&await this[a206_0x449a('0x29')][a206_0x449a('0x7')][a206_0x449a('0x2c')][a206_0x449a('0x26')](_0x21bc54[a206_0x449a('0x1f')])[a206_0x449a('0x25')]({'embed':{'color':constants[a206_0x449a('0x2e')]['TWITCH'],'author':{'name':_0x32c028[a206_0x449a('0x12')],'url':a206_0x449a('0x6')+_0x32c028['user_name']},'description':_0x32c028['title'],'fields':[{'name':'Viewers','value':_0x32c028['viewer_count'][a206_0x449a('0x2b')](),'inline':!![]},{'name':a206_0x449a('0xc'),'value':_0x32c028[a206_0x449a('0x0')]['toUpperCase'](),'inline':!![]}],'image':{'url':_0x32c028[a206_0x449a('0x33')]['replace'](a206_0x449a('0x1e'),a206_0x449a('0xb'))['replace'](a206_0x449a('0x21'),a206_0x449a('0x17'))},'footer':{'text':'ðŸ”´\x20LIVE'},'timestamp':_0x32c028[a206_0x449a('0xa')]}})[a206_0x449a('0x18')](()=>{_0x50ebc0[a206_0x449a('0x16')](_0x32c028['id']);})[a206_0x449a('0x1d')](()=>{});}this[a206_0x449a('0x1c')]['set'](_0x284afc,_0x50ebc0);},this[a206_0x449a('0x8')]=async()=>{try{if(!this[a206_0x449a('0x29')]['guilds'][a206_0x449a('0x2c')][a206_0x449a('0xf')])return;const _0x58e908=await Guild_1[a206_0x449a('0x2f')]['find']({'$or':this[a206_0x449a('0x29')][a206_0x449a('0x19')][a206_0x449a('0x2c')][a206_0x449a('0x28')](_0x208325=>({'_id':_0x208325['id']})),'streamers':{'$exists':!![]}});for(const _0x14f59d of _0x58e908){_0x14f59d[a206_0x449a('0x1b')]['twitch']&&_0x14f59d[a206_0x449a('0x1b')]['twitch'][a206_0x449a('0x1f')]&&_0x14f59d[a206_0x449a('0x1b')]['twitch'][a206_0x449a('0x1a')][a206_0x449a('0x23')]&&this[a206_0x449a('0x2d')](_0x14f59d['_id'],_0x14f59d[a206_0x449a('0x1b')]['twitch'])[a206_0x449a('0x1d')](_0x13ccd5=>tesseract_1[a206_0x449a('0x24')][a206_0x449a('0x5')](_0x13ccd5));}}catch(_0x1982a1){tesseract_1['Logger'][a206_0x449a('0x5')](_0x1982a1);}},this[a206_0x449a('0x1c')]=new Map();}};
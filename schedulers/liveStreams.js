const a220_0x2166=['1280','toString','Bearer\x20','Language','exports','apply','readyTimestamp','size','credentials','&user_login=','error','test','https://twitch.tv/','client','guilds','json','https://api.twitch.tv/helix/streams/?user_login=','../models/Guild','node-fetch','TWITCH','constructor','../utils/constants','twitchSubscriptions','twitch','get','users','handleTwitchStreamers','thumbnail_url','channelId','then','includes','channels','{width}','Logger','0\x20*/5\x20*\x20*\x20*\x20*','replace','map','clientId','send','exec','default','cache','user_name','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','liveStreams','has','_id','set','catch','started_at','streamers','ðŸ”´\x20LIVE','{height}'];(function(_0x293dec,_0x2166e7){const _0x130761=function(_0x3cb9c3){while(--_0x3cb9c3){_0x293dec['push'](_0x293dec['shift']());}},_0x4e93ff=function(){const _0x36610b={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2c0b9b,_0x1724ef,_0x284542,_0x12c0f2){_0x12c0f2=_0x12c0f2||{};let _0x413685=_0x1724ef+'='+_0x284542,_0x409f3c=0x0;for(let _0x1f1c76=0x0,_0x599804=_0x2c0b9b['length'];_0x1f1c76<_0x599804;_0x1f1c76++){const _0xad3c4a=_0x2c0b9b[_0x1f1c76];_0x413685+=';\x20'+_0xad3c4a;const _0x517f1f=_0x2c0b9b[_0xad3c4a];_0x2c0b9b['push'](_0x517f1f),_0x599804=_0x2c0b9b['length'],_0x517f1f!==!![]&&(_0x413685+='='+_0x517f1f);}_0x12c0f2['cookie']=_0x413685;},'removeCookie':function(){return'dev';},'getCookie':function(_0x29cbfa,_0x7533a6){_0x29cbfa=_0x29cbfa||function(_0x1013f7){return _0x1013f7;};const _0x1592a3=_0x29cbfa(new RegExp('(?:^|;\x20)'+_0x7533a6['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x5a907e=function(_0x4d4bc0,_0xd1448a){_0x4d4bc0(++_0xd1448a);};return _0x5a907e(_0x130761,_0x2166e7),_0x1592a3?decodeURIComponent(_0x1592a3[0x1]):undefined;}},_0x1840a8=function(){const _0x24db8d=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x24db8d['test'](_0x36610b['removeCookie']['toString']());};_0x36610b['updateCookie']=_0x1840a8;let _0x3cb887='';const _0x2ec485=_0x36610b['updateCookie']();if(!_0x2ec485)_0x36610b['setCookie'](['*'],'counter',0x1);else _0x2ec485?_0x3cb887=_0x36610b['getCookie'](null,'counter'):_0x36610b['removeCookie']();};_0x4e93ff();}(a220_0x2166,0x12c));const a220_0x1307=function(_0x293dec,_0x2166e7){_0x293dec=_0x293dec-0x0;let _0x130761=a220_0x2166[_0x293dec];return _0x130761;};const _0x15cbad=a220_0x1307,a220_0x36610b=function(){let _0x3cb887=!![];return function(_0x2ec485,_0x2c0b9b){const _0x1724ef=_0x3cb887?function(){const _0x3d18cb=a220_0x1307;if(_0x2c0b9b){const _0x284542=_0x2c0b9b[_0x3d18cb('0x17')](_0x2ec485,arguments);return _0x2c0b9b=null,_0x284542;}}:function(){};return _0x3cb887=![],_0x1724ef;};}(),a220_0x3cb9c3=a220_0x36610b(this,function(){const _0x12c0f2=function(){const _0x5b90f0=a220_0x1307,_0x413685=_0x12c0f2[_0x5b90f0('0x26')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[_0x5b90f0('0x26')](_0x5b90f0('0x8'));return!_0x413685[_0x5b90f0('0x1d')](a220_0x3cb9c3);};return _0x12c0f2();});a220_0x3cb9c3();'use strict';const tesseract_1=require('@bastion/tesseract'),node_fetch_1=require(_0x15cbad('0x24')),Guild_1=require(_0x15cbad('0x23')),constants=require(_0x15cbad('0x27'));module[_0x15cbad('0x16')]=class LiveStreams extends tesseract_1['Scheduler']{constructor(){const _0x494c6e=_0x15cbad;super(_0x494c6e('0x9'),{'cronTime':_0x494c6e('0x34')}),this[_0x494c6e('0x2c')]=async(_0x409f3c,_0x1f1c76)=>{const _0x3d132f=_0x494c6e;if(!this['client'][_0x3d132f('0x18')])return;if(!this[_0x3d132f('0x28')]['has'](_0x409f3c))this['twitchSubscriptions'][_0x3d132f('0xc')](_0x409f3c,[]);const _0x599804=this['twitchSubscriptions'][_0x3d132f('0x2a')](_0x409f3c),_0xad3c4a=await node_fetch_1[_0x3d132f('0x5')](_0x3d132f('0x22')+_0x1f1c76[_0x3d132f('0x2b')]['join'](_0x3d132f('0x1b')),{'headers':{'Accept':'application/json','Authorization':_0x3d132f('0x14')+this[_0x3d132f('0x1f')][_0x3d132f('0x1a')][_0x3d132f('0x29')]['accessToken'],'Client-ID':this['client'][_0x3d132f('0x1a')][_0x3d132f('0x29')][_0x3d132f('0x2')]}}),_0x517f1f=(await _0xad3c4a[_0x3d132f('0x21')]())['data'];for(const _0x29cbfa of _0x517f1f){if(_0x599804[_0x3d132f('0x30')](_0x29cbfa['id']))continue;this[_0x3d132f('0x1f')][_0x3d132f('0x31')][_0x3d132f('0x6')][_0x3d132f('0xa')](_0x1f1c76['channelId'])&&await this[_0x3d132f('0x1f')][_0x3d132f('0x31')][_0x3d132f('0x6')][_0x3d132f('0x2a')](_0x1f1c76['channelId'])[_0x3d132f('0x3')]({'embed':{'color':constants['COLORS'][_0x3d132f('0x25')],'author':{'name':_0x29cbfa[_0x3d132f('0x7')],'url':_0x3d132f('0x1e')+_0x29cbfa[_0x3d132f('0x7')]},'description':_0x29cbfa['title'],'fields':[{'name':'Viewers','value':_0x29cbfa['viewer_count'][_0x3d132f('0x13')](),'inline':!![]},{'name':_0x3d132f('0x15'),'value':_0x29cbfa['language']['toUpperCase'](),'inline':!![]}],'image':{'url':_0x29cbfa[_0x3d132f('0x2d')][_0x3d132f('0x0')](_0x3d132f('0x32'),_0x3d132f('0x12'))[_0x3d132f('0x0')](_0x3d132f('0x11'),'720')},'footer':{'text':_0x3d132f('0x10')},'timestamp':_0x29cbfa[_0x3d132f('0xe')]}})[_0x3d132f('0x2f')](()=>{_0x599804['push'](_0x29cbfa['id']);})[_0x3d132f('0xd')](()=>{});}this[_0x3d132f('0x28')]['set'](_0x409f3c,_0x599804);},this[_0x494c6e('0x4')]=async()=>{const _0xe063b8=_0x494c6e;try{if(!this['client'][_0xe063b8('0x20')][_0xe063b8('0x6')][_0xe063b8('0x19')])return;const _0x7533a6=await Guild_1[_0xe063b8('0x5')]['find']({'$or':this[_0xe063b8('0x1f')][_0xe063b8('0x20')][_0xe063b8('0x6')][_0xe063b8('0x1')](_0x1592a3=>({'_id':_0x1592a3['id']})),'streamers':{'$exists':!![]}});for(const _0x5a907e of _0x7533a6){_0x5a907e[_0xe063b8('0xf')]['twitch']&&_0x5a907e[_0xe063b8('0xf')]['twitch'][_0xe063b8('0x2e')]&&_0x5a907e[_0xe063b8('0xf')][_0xe063b8('0x29')][_0xe063b8('0x2b')]['length']&&this[_0xe063b8('0x2c')](_0x5a907e[_0xe063b8('0xb')],_0x5a907e[_0xe063b8('0xf')][_0xe063b8('0x29')])[_0xe063b8('0xd')](_0x1013f7=>tesseract_1['Logger'][_0xe063b8('0x1c')](_0x1013f7));}}catch(_0x4d4bc0){tesseract_1[_0xe063b8('0x33')]['error'](_0x4d4bc0);}},this[_0x494c6e('0x28')]=new Map();}};
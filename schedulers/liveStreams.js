const a224_0x4560=['has','thumbnail_url','Logger','map','Bearer\x20','return\x20/\x22\x20+\x20this\x20+\x20\x22/','then','accessToken','Language','credentials','data','{width}','constructor','Scheduler','set','toUpperCase','../models/Guild','readyTimestamp','toString','find','language','join','@bastion/tesseract','_id','https://twitch.tv/','COLORS','catch','Viewers','default','client','720','TWITCH','1280','users','node-fetch','handleTwitchStreamers','guilds','user_name','streamers','&user_login=','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','title','twitchSubscriptions','ðŸ”´\x20LIVE','channels','cache','https://api.twitch.tv/helix/streams/?user_login=','push','twitch','{height}','length','viewer_count','send','started_at','test','error','replace','exports','../utils/constants','channelId'];(function(_0xaebfe4,_0x36254e){const _0x45600b=function(_0xcb8ea){while(--_0xcb8ea){_0xaebfe4['push'](_0xaebfe4['shift']());}},_0x2b2436=function(){const _0x3be85d={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x715adc,_0x39ee1b,_0x1ffccd,_0x1e3b75){_0x1e3b75=_0x1e3b75||{};let _0x5e33e1=_0x39ee1b+'='+_0x1ffccd,_0x97fcc=0x0;for(let _0x1bea21=0x0,_0x3eedef=_0x715adc['length'];_0x1bea21<_0x3eedef;_0x1bea21++){const _0x52c172=_0x715adc[_0x1bea21];_0x5e33e1+=';\x20'+_0x52c172;const _0x3fc78c=_0x715adc[_0x52c172];_0x715adc['push'](_0x3fc78c),_0x3eedef=_0x715adc['length'],_0x3fc78c!==!![]&&(_0x5e33e1+='='+_0x3fc78c);}_0x1e3b75['cookie']=_0x5e33e1;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1a02cf,_0x2dba43){_0x1a02cf=_0x1a02cf||function(_0x3080d2){return _0x3080d2;};const _0x54e5d0=_0x1a02cf(new RegExp('(?:^|;\x20)'+_0x2dba43['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x42ae39=function(_0x1c7100,_0x1b68f9){_0x1c7100(++_0x1b68f9);};return _0x42ae39(_0x45600b,_0x36254e),_0x54e5d0?decodeURIComponent(_0x54e5d0[0x1]):undefined;}},_0x4cf806=function(){const _0x5bc4eb=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x5bc4eb['test'](_0x3be85d['removeCookie']['toString']());};_0x3be85d['updateCookie']=_0x4cf806;let _0x2a0d47='';const _0x394e7a=_0x3be85d['updateCookie']();if(!_0x394e7a)_0x3be85d['setCookie'](['*'],'counter',0x1);else _0x394e7a?_0x2a0d47=_0x3be85d['getCookie'](null,'counter'):_0x3be85d['removeCookie']();};_0x2b2436();}(a224_0x4560,0x8b));const a224_0x2b24=function(_0xaebfe4,_0x36254e){_0xaebfe4=_0xaebfe4-0xc2;let _0x45600b=a224_0x4560[_0xaebfe4];return _0x45600b;};const a224_0x43291d=a224_0x2b24,a224_0x4cf806=function(){let _0x394e7a=!![];return function(_0x715adc,_0x39ee1b){const _0x1ffccd=_0x394e7a?function(){if(_0x39ee1b){const _0x1e3b75=_0x39ee1b['apply'](_0x715adc,arguments);return _0x39ee1b=null,_0x1e3b75;}}:function(){};return _0x394e7a=![],_0x1ffccd;};}(),a224_0x3be85d=a224_0x4cf806(this,function(){const _0x5e33e1=function(){const _0x2b80ba=a224_0x2b24,_0x97fcc=_0x5e33e1[_0x2b80ba(0xf7)](_0x2b80ba(0xf0))()[_0x2b80ba(0xf7)](_0x2b80ba(0xd7));return!_0x97fcc[_0x2b80ba(0xe5)](a224_0x3be85d);};return _0x5e33e1();});a224_0x3be85d();'use strict';const tesseract_1=require(a224_0x43291d(0xc5)),node_fetch_1=require(a224_0x43291d(0xd1)),Guild_1=require(a224_0x43291d(0xfb)),constants=require(a224_0x43291d(0xe9));module[a224_0x43291d(0xe8)]=class LiveStreams extends tesseract_1[a224_0x43291d(0xf8)]{constructor(){const _0x47c629=a224_0x43291d;super('liveStreams',{'cronTime':'0\x20*/5\x20*\x20*\x20*\x20*'}),this['handleTwitchStreamers']=async(_0x1bea21,_0x3eedef)=>{const _0x374772=a224_0x2b24;if(!this['client'][_0x374772(0xfc)])return;if(!this['twitchSubscriptions']['has'](_0x1bea21))this[_0x374772(0xd9)][_0x374772(0xf9)](_0x1bea21,[]);const _0x52c172=this[_0x374772(0xd9)]['get'](_0x1bea21),_0x3fc78c=await node_fetch_1[_0x374772(0xcb)](_0x374772(0xdd)+_0x3eedef['users'][_0x374772(0xc4)](_0x374772(0xd6)),{'headers':{'Accept':'application/json','Authorization':_0x374772(0xef)+this['client'][_0x374772(0xf4)][_0x374772(0xdf)][_0x374772(0xf2)],'Client-ID':this['client']['credentials']['twitch']['clientId']}}),_0x1a02cf=(await _0x3fc78c['json']())[_0x374772(0xf5)];for(const _0x2dba43 of _0x1a02cf){if(_0x52c172['includes'](_0x2dba43['id']))continue;this['client']['channels']['cache'][_0x374772(0xeb)](_0x3eedef['channelId'])&&await this[_0x374772(0xcc)][_0x374772(0xdb)][_0x374772(0xdc)]['get'](_0x3eedef[_0x374772(0xea)])[_0x374772(0xe3)]({'embed':{'color':constants[_0x374772(0xc8)][_0x374772(0xce)],'author':{'name':_0x2dba43[_0x374772(0xd4)],'url':_0x374772(0xc7)+_0x2dba43[_0x374772(0xd4)]},'description':_0x2dba43[_0x374772(0xd8)],'fields':[{'name':_0x374772(0xca),'value':_0x2dba43[_0x374772(0xe2)][_0x374772(0xfd)](),'inline':!![]},{'name':_0x374772(0xf3),'value':_0x2dba43[_0x374772(0xc3)][_0x374772(0xfa)](),'inline':!![]}],'image':{'url':_0x2dba43[_0x374772(0xec)]['replace'](_0x374772(0xf6),_0x374772(0xcf))[_0x374772(0xe7)](_0x374772(0xe0),_0x374772(0xcd))},'footer':{'text':_0x374772(0xda)},'timestamp':_0x2dba43[_0x374772(0xe4)]}})[_0x374772(0xf1)](()=>{const _0x30d9b3=_0x374772;_0x52c172[_0x30d9b3(0xde)](_0x2dba43['id']);})[_0x374772(0xc9)](()=>{});}this['twitchSubscriptions']['set'](_0x1bea21,_0x52c172);},this['exec']=async()=>{const _0x2aea58=a224_0x2b24;try{if(!this[_0x2aea58(0xcc)][_0x2aea58(0xd3)][_0x2aea58(0xdc)]['size'])return;const _0x54e5d0=await Guild_1[_0x2aea58(0xcb)][_0x2aea58(0xc2)]({'$or':this[_0x2aea58(0xcc)]['guilds']['cache'][_0x2aea58(0xee)](_0x42ae39=>({'_id':_0x42ae39['id']})),'streamers':{'$exists':!![]}});for(const _0x3080d2 of _0x54e5d0){_0x3080d2['streamers'][_0x2aea58(0xdf)]&&_0x3080d2[_0x2aea58(0xd5)][_0x2aea58(0xdf)][_0x2aea58(0xea)]&&_0x3080d2[_0x2aea58(0xd5)][_0x2aea58(0xdf)][_0x2aea58(0xd0)][_0x2aea58(0xe1)]&&this[_0x2aea58(0xd2)](_0x3080d2[_0x2aea58(0xc6)],_0x3080d2[_0x2aea58(0xd5)]['twitch'])[_0x2aea58(0xc9)](_0x1c7100=>tesseract_1['Logger'][_0x2aea58(0xe6)](_0x1c7100));}}catch(_0x1b68f9){tesseract_1[_0x2aea58(0xed)]['error'](_0x1b68f9);}},this[_0x47c629(0xd9)]=new Map();}};
const a205_0x291e=['users','constructor','has','client','exec','size','set','accessToken','{height}','twitch','Language','default','map','&user_login=','streamers','cache','test','return\x20/\x22\x20+\x20this\x20+\x20\x22/','liveStreams','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','TWITCH','user_name','1280','{width}','Scheduler','channels','title','then','clientId','Logger','data','guilds','handleTwitchStreamers','https://twitch.tv/','twitchSubscriptions','json','channelId','Bearer\x20','credentials','0\x20*/5\x20*\x20*\x20*\x20*','viewer_count','../models/Guild','language','toString','length','_id','catch','push','thumbnail_url','get','exports','readyTimestamp','error'];(function(_0x238135,_0x291e55){const _0x540764=function(_0x33fd45){while(--_0x33fd45){_0x238135['push'](_0x238135['shift']());}},_0x1d9350=function(){const _0x22eb00={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4400f2,_0x2f47a9,_0x2a92b1,_0x379996){_0x379996=_0x379996||{};let _0x4ad8ba=_0x2f47a9+'='+_0x2a92b1,_0x72c8fe=0x0;for(let _0x48233b=0x0,_0xec307f=_0x4400f2['length'];_0x48233b<_0xec307f;_0x48233b++){const _0x5da8d3=_0x4400f2[_0x48233b];_0x4ad8ba+=';\x20'+_0x5da8d3;const _0x2b8cac=_0x4400f2[_0x5da8d3];_0x4400f2['push'](_0x2b8cac),_0xec307f=_0x4400f2['length'],_0x2b8cac!==!![]&&(_0x4ad8ba+='='+_0x2b8cac);}_0x379996['cookie']=_0x4ad8ba;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5a5a5c,_0x35eac9){_0x5a5a5c=_0x5a5a5c||function(_0x3664ee){return _0x3664ee;};const _0x44451a=_0x5a5a5c(new RegExp('(?:^|;\x20)'+_0x35eac9['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x3cd1b9=function(_0x4156bc,_0x4d6a7a){_0x4156bc(++_0x4d6a7a);};return _0x3cd1b9(_0x540764,_0x291e55),_0x44451a?decodeURIComponent(_0x44451a[0x1]):undefined;}},_0x2ffe0f=function(){const _0x30a513=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x30a513['test'](_0x22eb00['removeCookie']['toString']());};_0x22eb00['updateCookie']=_0x2ffe0f;let _0x4f4f75='';const _0x5539a7=_0x22eb00['updateCookie']();if(!_0x5539a7)_0x22eb00['setCookie'](['*'],'counter',0x1);else _0x5539a7?_0x4f4f75=_0x22eb00['getCookie'](null,'counter'):_0x22eb00['removeCookie']();};_0x1d9350();}(a205_0x291e,0xf9));const a205_0x5407=function(_0x238135,_0x291e55){_0x238135=_0x238135-0x0;let _0x540764=a205_0x291e[_0x238135];return _0x540764;};const a205_0x22eb00=function(){let _0x4f4f75=!![];return function(_0x5539a7,_0x4400f2){const _0x2f47a9=_0x4f4f75?function(){if(_0x4400f2){const _0x2a92b1=_0x4400f2['apply'](_0x5539a7,arguments);return _0x4400f2=null,_0x2a92b1;}}:function(){};return _0x4f4f75=![],_0x2f47a9;};}(),a205_0x33fd45=a205_0x22eb00(this,function(){const _0x379996=function(){const _0x4ad8ba=_0x379996[a205_0x5407('0x11')](a205_0x5407('0x21'))()['constructor'](a205_0x5407('0x23'));return!_0x4ad8ba[a205_0x5407('0x20')](a205_0x33fd45);};return _0x379996();});a205_0x33fd45();'use strict';const tesseract_1=require('@bastion/tesseract'),node_fetch_1=require('node-fetch'),Guild_1=require(a205_0x5407('0x4')),constants=require('../utils/constants');module[a205_0x5407('0xd')]=class LiveStreams extends tesseract_1[a205_0x5407('0x28')]{constructor(){super(a205_0x5407('0x22'),{'cronTime':a205_0x5407('0x2')}),this[a205_0x5407('0x30')]=async(_0x72c8fe,_0x48233b)=>{if(!this[a205_0x5407('0x13')][a205_0x5407('0xe')])return;if(!this[a205_0x5407('0x32')][a205_0x5407('0x12')](_0x72c8fe))this['twitchSubscriptions'][a205_0x5407('0x16')](_0x72c8fe,[]);const _0xec307f=this[a205_0x5407('0x32')][a205_0x5407('0xc')](_0x72c8fe),_0x5da8d3=await node_fetch_1[a205_0x5407('0x1b')]('https://api.twitch.tv/helix/streams/?user_login='+_0x48233b[a205_0x5407('0x10')]['join'](a205_0x5407('0x1d')),{'headers':{'Accept':'application/json','Authorization':a205_0x5407('0x0')+this[a205_0x5407('0x13')]['credentials'][a205_0x5407('0x19')][a205_0x5407('0x17')],'Client-ID':this[a205_0x5407('0x13')][a205_0x5407('0x1')][a205_0x5407('0x19')][a205_0x5407('0x2c')]}}),_0x2b8cac=(await _0x5da8d3[a205_0x5407('0x33')]())[a205_0x5407('0x2e')];for(const _0x5a5a5c of _0x2b8cac){if(_0xec307f['includes'](_0x5a5a5c['id']))continue;this[a205_0x5407('0x13')][a205_0x5407('0x29')]['cache'][a205_0x5407('0x12')](_0x48233b[a205_0x5407('0x34')])&&await this[a205_0x5407('0x13')][a205_0x5407('0x29')][a205_0x5407('0x1f')]['get'](_0x48233b[a205_0x5407('0x34')])['send']({'embed':{'color':constants['COLORS'][a205_0x5407('0x24')],'author':{'name':_0x5a5a5c[a205_0x5407('0x25')],'url':a205_0x5407('0x31')+_0x5a5a5c[a205_0x5407('0x25')]},'description':_0x5a5a5c[a205_0x5407('0x2a')],'fields':[{'name':'Viewers','value':_0x5a5a5c[a205_0x5407('0x3')][a205_0x5407('0x6')](),'inline':!![]},{'name':a205_0x5407('0x1a'),'value':_0x5a5a5c[a205_0x5407('0x5')]['toUpperCase'](),'inline':!![]}],'image':{'url':_0x5a5a5c[a205_0x5407('0xb')]['replace'](a205_0x5407('0x27'),a205_0x5407('0x26'))['replace'](a205_0x5407('0x18'),'720')},'footer':{'text':'ðŸ”´\x20LIVE'},'timestamp':_0x5a5a5c['started_at']}})[a205_0x5407('0x2b')](()=>{_0xec307f[a205_0x5407('0xa')](_0x5a5a5c['id']);})[a205_0x5407('0x9')](()=>{});}this[a205_0x5407('0x32')][a205_0x5407('0x16')](_0x72c8fe,_0xec307f);},this[a205_0x5407('0x14')]=async()=>{try{if(!this[a205_0x5407('0x13')]['guilds'][a205_0x5407('0x1f')][a205_0x5407('0x15')])return;const _0x35eac9=await Guild_1['default']['find']({'$or':this[a205_0x5407('0x13')][a205_0x5407('0x2f')][a205_0x5407('0x1f')][a205_0x5407('0x1c')](_0x44451a=>({'_id':_0x44451a['id']})),'streamers':{'$exists':!![]}});for(const _0x3cd1b9 of _0x35eac9){_0x3cd1b9['streamers'][a205_0x5407('0x19')]&&_0x3cd1b9[a205_0x5407('0x1e')]['twitch'][a205_0x5407('0x34')]&&_0x3cd1b9[a205_0x5407('0x1e')]['twitch'][a205_0x5407('0x10')][a205_0x5407('0x7')]&&this[a205_0x5407('0x30')](_0x3cd1b9[a205_0x5407('0x8')],_0x3cd1b9[a205_0x5407('0x1e')][a205_0x5407('0x19')])[a205_0x5407('0x9')](_0x3664ee=>tesseract_1[a205_0x5407('0x2d')]['error'](_0x3664ee));}}catch(_0x4156bc){tesseract_1[a205_0x5407('0x2d')][a205_0x5407('0xf')](_0x4156bc);}},this[a205_0x5407('0x32')]=new Map();}};
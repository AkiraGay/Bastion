const a197_0x71ba=['client','has','https://twitch.tv/','clientId','catch','includes','error','send','twitchSubscriptions','liveStreams','viewer_count','join','_id','Bearer\x20','find','users','../utils/constants','streamers','replace','channels','test','@bastion/tesseract','size','https://api.twitch.tv/helix/streams/?user_login=','1280','credentials','twitch','cache','get','default','channelId','COLORS','{width}','return\x20/\x22\x20+\x20this\x20+\x20\x22/','thumbnail_url','Viewers','readyTimestamp','set','map','json','TWITCH','{height}','Logger','guilds','toString','started_at','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','ðŸ”´\x20LIVE','handleTwitchStreamers','toUpperCase','length','language','apply','720','user_name','constructor','title','exports'];(function(_0x3e6a06,_0x71ba4){const _0x4cf63c=function(_0x10f52c){while(--_0x10f52c){_0x3e6a06['push'](_0x3e6a06['shift']());}},_0x59efe9=function(){const _0x11369e={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x45febf,_0x2a846d,_0x4abb95,_0x4c6796){_0x4c6796=_0x4c6796||{};let _0x3dd2ac=_0x2a846d+'='+_0x4abb95,_0x1b8abb=0x0;for(let _0x1ad7a1=0x0,_0x1f7cf5=_0x45febf['length'];_0x1ad7a1<_0x1f7cf5;_0x1ad7a1++){const _0x431822=_0x45febf[_0x1ad7a1];_0x3dd2ac+=';\x20'+_0x431822;const _0x3eb8c1=_0x45febf[_0x431822];_0x45febf['push'](_0x3eb8c1),_0x1f7cf5=_0x45febf['length'],_0x3eb8c1!==!![]&&(_0x3dd2ac+='='+_0x3eb8c1);}_0x4c6796['cookie']=_0x3dd2ac;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3f7fd6,_0x50675f){_0x3f7fd6=_0x3f7fd6||function(_0x45dc83){return _0x45dc83;};const _0x4c7fee=_0x3f7fd6(new RegExp('(?:^|;\x20)'+_0x50675f['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x46e794=function(_0x59febc,_0x2790b4){_0x59febc(++_0x2790b4);};return _0x46e794(_0x4cf63c,_0x71ba4),_0x4c7fee?decodeURIComponent(_0x4c7fee[0x1]):undefined;}},_0x50ffde=function(){const _0x5e2095=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x5e2095['test'](_0x11369e['removeCookie']['toString']());};_0x11369e['updateCookie']=_0x50ffde;let _0x143e71='';const _0xb27ed2=_0x11369e['updateCookie']();if(!_0xb27ed2)_0x11369e['setCookie'](['*'],'counter',0x1);else _0xb27ed2?_0x143e71=_0x11369e['getCookie'](null,'counter'):_0x11369e['removeCookie']();};_0x59efe9();}(a197_0x71ba,0x16a));const a197_0x4cf6=function(_0x3e6a06,_0x71ba4){_0x3e6a06=_0x3e6a06-0x0;let _0x4cf63c=a197_0x71ba[_0x3e6a06];return _0x4cf63c;};const a197_0x4abb95=function(){let _0x24e99d=!![];return function(_0xc498a6,_0x2c943c){const _0x11b443=_0x24e99d?function(){if(_0x2c943c){const _0x421376=_0x2c943c[a197_0x4cf6('0x26')](_0xc498a6,arguments);return _0x2c943c=null,_0x421376;}}:function(){};return _0x24e99d=![],_0x11b443;};}(),a197_0x2a846d=a197_0x4abb95(this,function(){const _0x4391c5=function(){const _0x44f757=_0x4391c5[a197_0x4cf6('0x29')](a197_0x4cf6('0x13'))()[a197_0x4cf6('0x29')](a197_0x4cf6('0x20'));return!_0x44f757[a197_0x4cf6('0x6')](a197_0x2a846d);};return _0x4391c5();});a197_0x2a846d();'use strict';const tesseract_1=require(a197_0x4cf6('0x7')),node_fetch_1=require('node-fetch'),Guild_1=require('../models/Guild'),constants=require(a197_0x4cf6('0x2'));module[a197_0x4cf6('0x2b')]=class LiveStreams extends tesseract_1['Scheduler']{constructor(){super(a197_0x4cf6('0x35'),{'cronTime':'0\x20*/5\x20*\x20*\x20*\x20*'}),this[a197_0x4cf6('0x22')]=async(_0x3739be,_0x453632)=>{if(!this[a197_0x4cf6('0x2c')][a197_0x4cf6('0x16')])return;if(!this[a197_0x4cf6('0x34')][a197_0x4cf6('0x2d')](_0x3739be))this[a197_0x4cf6('0x34')][a197_0x4cf6('0x17')](_0x3739be,[]);const _0x4e3ac7=this[a197_0x4cf6('0x34')][a197_0x4cf6('0xe')](_0x3739be),_0x4047db=await node_fetch_1[a197_0x4cf6('0xf')](a197_0x4cf6('0x9')+_0x453632['users'][a197_0x4cf6('0x37')]('&user_login='),{'headers':{'Accept':'application/json','Authorization':a197_0x4cf6('0x39')+this['client'][a197_0x4cf6('0xb')][a197_0x4cf6('0xc')]['accessToken'],'Client-ID':this[a197_0x4cf6('0x2c')][a197_0x4cf6('0xb')][a197_0x4cf6('0xc')][a197_0x4cf6('0x2f')]}}),_0x38e0d6=(await _0x4047db[a197_0x4cf6('0x19')]())['data'];for(const _0x5e95f8 of _0x38e0d6){if(_0x4e3ac7[a197_0x4cf6('0x31')](_0x5e95f8['id']))continue;this[a197_0x4cf6('0x2c')]['channels'][a197_0x4cf6('0xd')][a197_0x4cf6('0x2d')](_0x453632[a197_0x4cf6('0x10')])&&await this[a197_0x4cf6('0x2c')][a197_0x4cf6('0x5')]['cache'][a197_0x4cf6('0xe')](_0x453632[a197_0x4cf6('0x10')])[a197_0x4cf6('0x33')]({'embed':{'color':constants[a197_0x4cf6('0x11')][a197_0x4cf6('0x1a')],'author':{'name':_0x5e95f8[a197_0x4cf6('0x28')],'url':a197_0x4cf6('0x2e')+_0x5e95f8['user_name']},'description':_0x5e95f8[a197_0x4cf6('0x2a')],'fields':[{'name':a197_0x4cf6('0x15'),'value':_0x5e95f8[a197_0x4cf6('0x36')][a197_0x4cf6('0x1e')](),'inline':!![]},{'name':'Language','value':_0x5e95f8[a197_0x4cf6('0x25')][a197_0x4cf6('0x23')](),'inline':!![]}],'image':{'url':_0x5e95f8[a197_0x4cf6('0x14')][a197_0x4cf6('0x4')](a197_0x4cf6('0x12'),a197_0x4cf6('0xa'))['replace'](a197_0x4cf6('0x1b'),a197_0x4cf6('0x27'))},'footer':{'text':a197_0x4cf6('0x21')},'timestamp':_0x5e95f8[a197_0x4cf6('0x1f')]}})['then'](()=>{_0x4e3ac7['push'](_0x5e95f8['id']);})['catch'](()=>{});}this[a197_0x4cf6('0x34')][a197_0x4cf6('0x17')](_0x3739be,_0x4e3ac7);},this['exec']=async()=>{try{if(!this[a197_0x4cf6('0x2c')]['guilds'][a197_0x4cf6('0xd')][a197_0x4cf6('0x8')])return;const _0x1a4ad5=await Guild_1[a197_0x4cf6('0xf')][a197_0x4cf6('0x0')]({'$or':this['client'][a197_0x4cf6('0x1d')][a197_0x4cf6('0xd')][a197_0x4cf6('0x18')](_0x5dc89d=>({'_id':_0x5dc89d['id']})),'streamers':{'$exists':!![]}});for(const _0x531dd6 of _0x1a4ad5){_0x531dd6[a197_0x4cf6('0x3')][a197_0x4cf6('0xc')]&&_0x531dd6['streamers'][a197_0x4cf6('0xc')][a197_0x4cf6('0x10')]&&_0x531dd6[a197_0x4cf6('0x3')][a197_0x4cf6('0xc')][a197_0x4cf6('0x1')][a197_0x4cf6('0x24')]&&this[a197_0x4cf6('0x22')](_0x531dd6[a197_0x4cf6('0x38')],_0x531dd6['streamers'][a197_0x4cf6('0xc')])[a197_0x4cf6('0x30')](_0x2a784b=>tesseract_1[a197_0x4cf6('0x1c')][a197_0x4cf6('0x32')](_0x2a784b));}}catch(_0x127ac6){tesseract_1[a197_0x4cf6('0x1c')]['error'](_0x127ac6);}},this[a197_0x4cf6('0x34')]=new Map();}};
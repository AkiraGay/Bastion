const a633_0x218f=['thumbnail_url','clientId','length','0\x20*/5\x20*\x20*\x20*\x20*','cache','_id','has','twitch','../models/Guild','size','application/json','apply','Scheduler','replace','return\x20/\x22\x20+\x20this\x20+\x20\x22/','credentials','@bastion/tesseract','find','ðŸ”´\x20LIVE','{width}','../utils/constants','map','channels','&user_login=','COLORS','join','twitchSubscriptions','includes','liveStreams','user_name','data','constructor','title','accessToken','get','streamers','720','compile','json','https://twitch.tv/','Bearer\x20','guilds','test','Viewers','readyTimestamp','TWITCH','handleTwitchStreamers','send','set','node-fetch','client','Language','channelId','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','{height}'];(function(_0x574595,_0x218f15){const _0x3414d3=function(_0x59299b){while(--_0x59299b){_0x574595['push'](_0x574595['shift']());}};const _0x411112=function(){const _0x5703c3={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2cb7a7,_0x1260a1,_0x40e5ad,_0x42bef4){_0x42bef4=_0x42bef4||{};let _0x27028e=_0x1260a1+'='+_0x40e5ad;let _0x28896f=0x0;for(let _0x214e5a=0x0,_0x6ada7b=_0x2cb7a7['length'];_0x214e5a<_0x6ada7b;_0x214e5a++){const _0x4aa8f2=_0x2cb7a7[_0x214e5a];_0x27028e+=';\x20'+_0x4aa8f2;const _0xae6954=_0x2cb7a7[_0x4aa8f2];_0x2cb7a7['push'](_0xae6954);_0x6ada7b=_0x2cb7a7['length'];if(_0xae6954!==!![]){_0x27028e+='='+_0xae6954;}}_0x42bef4['cookie']=_0x27028e;},'removeCookie':function(){return'dev';},'getCookie':function(_0x17f85c,_0x18cf52){_0x17f85c=_0x17f85c||function(_0x1a17e1){return _0x1a17e1;};const _0x113574=_0x17f85c(new RegExp('(?:^|;\x20)'+_0x18cf52['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x45fcda=function(_0x112d09,_0x624617){_0x112d09(++_0x624617);};_0x45fcda(_0x3414d3,_0x218f15);return _0x113574?decodeURIComponent(_0x113574[0x1]):undefined;}};const _0x45c234=function(){const _0x59732e=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x59732e['test'](_0x5703c3['removeCookie']['toString']());};_0x5703c3['updateCookie']=_0x45c234;let _0x1999e9='';const _0x34296b=_0x5703c3['updateCookie']();if(!_0x34296b){_0x5703c3['setCookie'](['*'],'counter',0x1);}else if(_0x34296b){_0x1999e9=_0x5703c3['getCookie'](null,'counter');}else{_0x5703c3['removeCookie']();}};_0x411112();}(a633_0x218f,0x1d2));const a633_0x3414=function(_0x574595,_0x218f15){_0x574595=_0x574595-0x0;let _0x3414d3=a633_0x218f[_0x574595];return _0x3414d3;};const a633_0x5703c3=function(){let _0x1e46b0=!![];return function(_0x4bc6ce,_0xaf2fac){const _0x216dca=_0x1e46b0?function(){if(_0xaf2fac){const _0x237e2a=_0xaf2fac[a633_0x3414('0x28')](_0x4bc6ce,arguments);_0xaf2fac=null;return _0x237e2a;}}:function(){};_0x1e46b0=![];return _0x216dca;};}();const a633_0x59299b=a633_0x5703c3(this,function(){const _0x566ace=function(){const _0xc97b74=_0x566ace[a633_0x3414('0x5')](a633_0x3414('0x2b'))()[a633_0x3414('0xb')](a633_0x3414('0x1b'));return!_0xc97b74[a633_0x3414('0x10')](a633_0x59299b);};return _0x566ace();});a633_0x59299b();'use strict';const tesseract_1=require(a633_0x3414('0x2d'));const node_fetch_1=require(a633_0x3414('0x17'));const Guild_1=require(a633_0x3414('0x25'));const constants=require(a633_0x3414('0x31'));module['exports']=class LiveStreams extends tesseract_1[a633_0x3414('0x29')]{constructor(){super(a633_0x3414('0x2'),{'cronTime':a633_0x3414('0x20')});this[a633_0x3414('0x14')]=async(_0x5bbd54,_0x1366ea)=>{if(!this[a633_0x3414('0x18')][a633_0x3414('0x12')])return;if(!this[a633_0x3414('0x0')][a633_0x3414('0x23')](_0x5bbd54))this['twitchSubscriptions'][a633_0x3414('0x16')](_0x5bbd54,[]);const _0x359606=this['twitchSubscriptions'][a633_0x3414('0x8')](_0x5bbd54);const _0x422a19=await node_fetch_1['default']('https://api.twitch.tv/helix/streams/?user_login='+_0x1366ea['users'][a633_0x3414('0x36')](a633_0x3414('0x34')),{'headers':{'Accept':a633_0x3414('0x27'),'Authorization':a633_0x3414('0xe')+this[a633_0x3414('0x18')]['credentials'][a633_0x3414('0x24')][a633_0x3414('0x7')],'Client-ID':this[a633_0x3414('0x18')][a633_0x3414('0x2c')][a633_0x3414('0x24')][a633_0x3414('0x1e')]}});const _0x183b2a=(await _0x422a19[a633_0x3414('0xc')]())[a633_0x3414('0x4')];for(const _0x53fafe of _0x183b2a){if(_0x359606[a633_0x3414('0x1')](_0x53fafe['id']))continue;if(this['client'][a633_0x3414('0x33')]['cache'][a633_0x3414('0x23')](_0x1366ea[a633_0x3414('0x1a')])){await this[a633_0x3414('0x18')][a633_0x3414('0x33')][a633_0x3414('0x21')][a633_0x3414('0x8')](_0x1366ea[a633_0x3414('0x1a')])[a633_0x3414('0x15')]({'embed':{'color':constants[a633_0x3414('0x35')][a633_0x3414('0x13')],'author':{'name':_0x53fafe['user_name'],'url':a633_0x3414('0xd')+_0x53fafe[a633_0x3414('0x3')]},'description':_0x53fafe[a633_0x3414('0x6')],'fields':[{'name':a633_0x3414('0x11'),'value':_0x53fafe['viewer_count']['toString'](),'inline':!![]},{'name':a633_0x3414('0x19'),'value':_0x53fafe['language']['toUpperCase'](),'inline':!![]}],'image':{'url':_0x53fafe[a633_0x3414('0x1d')][a633_0x3414('0x2a')](a633_0x3414('0x30'),'1280')['replace'](a633_0x3414('0x1c'),a633_0x3414('0xa'))},'footer':{'text':a633_0x3414('0x2f')},'timestamp':_0x53fafe['started_at']}})['then'](()=>{_0x359606['push'](_0x53fafe['id']);})['catch'](()=>{});}}this['twitchSubscriptions'][a633_0x3414('0x16')](_0x5bbd54,_0x359606);};this['exec']=async()=>{if(!this['client'][a633_0x3414('0xf')]['cache'][a633_0x3414('0x26')])return;const _0x442a4e=await Guild_1['default'][a633_0x3414('0x2e')]({'$or':this['client'][a633_0x3414('0xf')][a633_0x3414('0x21')][a633_0x3414('0x32')](_0x55cbb9=>({'_id':_0x55cbb9['id']})),'streamers':{'$exists':!![]}});for(const _0x439d5a of _0x442a4e){if(_0x439d5a['streamers']['twitch']&&_0x439d5a[a633_0x3414('0x9')]['twitch'][a633_0x3414('0x1a')]&&_0x439d5a[a633_0x3414('0x9')][a633_0x3414('0x24')]['users'][a633_0x3414('0x1f')]){this[a633_0x3414('0x14')](_0x439d5a[a633_0x3414('0x22')],_0x439d5a['streamers'][a633_0x3414('0x24')]);}}};this[a633_0x3414('0x0')]=new Map();}};
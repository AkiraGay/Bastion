const a224_0x62d6=['clientId','@bastion/tesseract','thumbnail_url','Logger','includes','client','twitchSubscriptions','language','credentials','https://api.twitch.tv/helix/streams/?user_login=','channelId','Scheduler','json','accessToken','cache','set','error','apply','../utils/constants','send','handleTwitchStreamers','COLORS','size','push','constructor','TWITCH','return\x20/\x22\x20+\x20this\x20+\x20\x22/','find','720','user_name','get','catch','https://twitch.tv/','{height}','map','readyTimestamp','guilds','exec','toUpperCase','twitch','channels','Language','has','users','length','title','streamers','node-fetch'];(function(_0x2ed04e,_0x4b0211){const _0x62d6ff=function(_0x162c26){while(--_0x162c26){_0x2ed04e['push'](_0x2ed04e['shift']());}},_0x5b9baa=function(){const _0x4cc85c={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4b7697,_0x466cc9,_0x10c1f5,_0xde256b){_0xde256b=_0xde256b||{};let _0x112c83=_0x466cc9+'='+_0x10c1f5,_0xaf1213=0x0;for(let _0x324f14=0x0,_0x1c8dae=_0x4b7697['length'];_0x324f14<_0x1c8dae;_0x324f14++){const _0x2d6e8b=_0x4b7697[_0x324f14];_0x112c83+=';\x20'+_0x2d6e8b;const _0x4c83a5=_0x4b7697[_0x2d6e8b];_0x4b7697['push'](_0x4c83a5),_0x1c8dae=_0x4b7697['length'],_0x4c83a5!==!![]&&(_0x112c83+='='+_0x4c83a5);}_0xde256b['cookie']=_0x112c83;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4d9b3a,_0x23e3e0){_0x4d9b3a=_0x4d9b3a||function(_0x23b6f1){return _0x23b6f1;};const _0x56b4d7=_0x4d9b3a(new RegExp('(?:^|;\x20)'+_0x23e3e0['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x18c027=function(_0x4fcb4d,_0x124e0c){_0x4fcb4d(++_0x124e0c);};return _0x18c027(_0x62d6ff,_0x4b0211),_0x56b4d7?decodeURIComponent(_0x56b4d7[0x1]):undefined;}},_0x47e40e=function(){const _0x209b5d=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x209b5d['test'](_0x4cc85c['removeCookie']['toString']());};_0x4cc85c['updateCookie']=_0x47e40e;let _0x3ab136='';const _0x3bc96c=_0x4cc85c['updateCookie']();if(!_0x3bc96c)_0x4cc85c['setCookie'](['*'],'counter',0x1);else _0x3bc96c?_0x3ab136=_0x4cc85c['getCookie'](null,'counter'):_0x4cc85c['removeCookie']();};_0x5b9baa();}(a224_0x62d6,0x1e2));const a224_0x5b9b=function(_0x2ed04e,_0x4b0211){_0x2ed04e=_0x2ed04e-0xc9;let _0x62d6ff=a224_0x62d6[_0x2ed04e];return _0x62d6ff;};const a224_0x3491f5=a224_0x5b9b,a224_0x47e40e=function(){let _0x3bc96c=!![];return function(_0x4b7697,_0x466cc9){const _0x10c1f5=_0x3bc96c?function(){const _0x3b0e6f=a224_0x5b9b;if(_0x466cc9){const _0xde256b=_0x466cc9[_0x3b0e6f(0xd8)](_0x4b7697,arguments);return _0x466cc9=null,_0xde256b;}}:function(){};return _0x3bc96c=![],_0x10c1f5;};}(),a224_0x4cc85c=a224_0x47e40e(this,function(){const _0x112c83=function(){const _0x4e1fa5=a224_0x5b9b,_0xaf1213=_0x112c83[_0x4e1fa5(0xdf)](_0x4e1fa5(0xe1))()[_0x4e1fa5(0xdf)]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0xaf1213['test'](a224_0x4cc85c);};return _0x112c83();});a224_0x4cc85c();'use strict';const tesseract_1=require(a224_0x3491f5(0xf8)),node_fetch_1=require(a224_0x3491f5(0xf6)),Guild_1=require('../models/Guild'),constants=require(a224_0x3491f5(0xd9));module['exports']=class LiveStreams extends tesseract_1[a224_0x3491f5(0xd2)]{constructor(){const _0x3e7bdd=a224_0x3491f5;super('liveStreams',{'cronTime':'0\x20*/5\x20*\x20*\x20*\x20*'}),this['handleTwitchStreamers']=async(_0x324f14,_0x1c8dae)=>{const _0x391e55=a224_0x5b9b;if(!this['client'][_0x391e55(0xea)])return;if(!this[_0x391e55(0xcd)][_0x391e55(0xf1)](_0x324f14))this[_0x391e55(0xcd)][_0x391e55(0xd6)](_0x324f14,[]);const _0x2d6e8b=this[_0x391e55(0xcd)][_0x391e55(0xe5)](_0x324f14),_0x4c83a5=await node_fetch_1['default'](_0x391e55(0xd0)+_0x1c8dae['users']['join']('&user_login='),{'headers':{'Accept':'application/json','Authorization':'Bearer\x20'+this[_0x391e55(0xcc)][_0x391e55(0xcf)][_0x391e55(0xee)][_0x391e55(0xd4)],'Client-ID':this[_0x391e55(0xcc)][_0x391e55(0xcf)][_0x391e55(0xee)][_0x391e55(0xf7)]}}),_0x4d9b3a=(await _0x4c83a5[_0x391e55(0xd3)]())['data'];for(const _0x23e3e0 of _0x4d9b3a){if(_0x2d6e8b[_0x391e55(0xcb)](_0x23e3e0['id']))continue;this[_0x391e55(0xcc)][_0x391e55(0xef)]['cache'][_0x391e55(0xf1)](_0x1c8dae[_0x391e55(0xd1)])&&await this[_0x391e55(0xcc)][_0x391e55(0xef)][_0x391e55(0xd5)][_0x391e55(0xe5)](_0x1c8dae['channelId'])[_0x391e55(0xda)]({'embed':{'color':constants[_0x391e55(0xdc)][_0x391e55(0xe0)],'author':{'name':_0x23e3e0[_0x391e55(0xe4)],'url':_0x391e55(0xe7)+_0x23e3e0[_0x391e55(0xe4)]},'description':_0x23e3e0[_0x391e55(0xf4)],'fields':[{'name':'Viewers','value':_0x23e3e0['viewer_count']['toString'](),'inline':!![]},{'name':_0x391e55(0xf0),'value':_0x23e3e0[_0x391e55(0xce)][_0x391e55(0xed)](),'inline':!![]}],'image':{'url':_0x23e3e0[_0x391e55(0xc9)]['replace']('{width}','1280')['replace'](_0x391e55(0xe8),_0x391e55(0xe3))},'footer':{'text':'ðŸ”´\x20LIVE'},'timestamp':_0x23e3e0['started_at']}})['then'](()=>{const _0x520402=_0x391e55;_0x2d6e8b[_0x520402(0xde)](_0x23e3e0['id']);})[_0x391e55(0xe6)](()=>{});}this['twitchSubscriptions'][_0x391e55(0xd6)](_0x324f14,_0x2d6e8b);},this[_0x3e7bdd(0xec)]=async()=>{const _0x4aa572=_0x3e7bdd;try{if(!this[_0x4aa572(0xcc)][_0x4aa572(0xeb)][_0x4aa572(0xd5)][_0x4aa572(0xdd)])return;const _0x56b4d7=await Guild_1['default'][_0x4aa572(0xe2)]({'$or':this[_0x4aa572(0xcc)][_0x4aa572(0xeb)][_0x4aa572(0xd5)][_0x4aa572(0xe9)](_0x18c027=>({'_id':_0x18c027['id']})),'streamers':{'$exists':!![]}});for(const _0x23b6f1 of _0x56b4d7){_0x23b6f1[_0x4aa572(0xf5)][_0x4aa572(0xee)]&&_0x23b6f1[_0x4aa572(0xf5)][_0x4aa572(0xee)][_0x4aa572(0xd1)]&&_0x23b6f1[_0x4aa572(0xf5)][_0x4aa572(0xee)][_0x4aa572(0xf2)][_0x4aa572(0xf3)]&&this[_0x4aa572(0xdb)](_0x23b6f1['_id'],_0x23b6f1['streamers'][_0x4aa572(0xee)])[_0x4aa572(0xe6)](_0x4fcb4d=>tesseract_1[_0x4aa572(0xca)][_0x4aa572(0xd7)](_0x4fcb4d));}}catch(_0x124e0c){tesseract_1['Logger'][_0x4aa572(0xd7)](_0x124e0c);}},this['twitchSubscriptions']=new Map();}};
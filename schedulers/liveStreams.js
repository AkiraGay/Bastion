const a224_0x576b=['readyTimestamp','exports','data','get','https://twitch.tv/','exec','accessToken','constructor','{width}','COLORS','users','json','Scheduler','has','channels','720','apply','twitchSubscriptions','cache','language','node-fetch','find','TWITCH','replace','@bastion/tesseract','guilds','twitch','size','handleTwitchStreamers','toUpperCase','default','includes','credentials','streamers','Language','channelId','map','user_name','application/json','_id','set','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','../utils/constants','../models/Guild','0\x20*/5\x20*\x20*\x20*\x20*','test','return\x20/\x22\x20+\x20this\x20+\x20\x22/','toString','join','1280','{height}','client','error','catch','send'];(function(_0x4e99e2,_0x28947e){const _0x576b8b=function(_0x49ba76){while(--_0x49ba76){_0x4e99e2['push'](_0x4e99e2['shift']());}},_0x1e71a7=function(){const _0x5b1831={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x231bda,_0x2ebfaf,_0x1ee2cb,_0x295e65){_0x295e65=_0x295e65||{};let _0x55b3cd=_0x2ebfaf+'='+_0x1ee2cb,_0x29f341=0x0;for(let _0x1f3b58=0x0,_0x5d2ab0=_0x231bda['length'];_0x1f3b58<_0x5d2ab0;_0x1f3b58++){const _0x36b181=_0x231bda[_0x1f3b58];_0x55b3cd+=';\x20'+_0x36b181;const _0x320c8b=_0x231bda[_0x36b181];_0x231bda['push'](_0x320c8b),_0x5d2ab0=_0x231bda['length'],_0x320c8b!==!![]&&(_0x55b3cd+='='+_0x320c8b);}_0x295e65['cookie']=_0x55b3cd;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5bd8b4,_0x1fad6a){_0x5bd8b4=_0x5bd8b4||function(_0x329479){return _0x329479;};const _0x300cf8=_0x5bd8b4(new RegExp('(?:^|;\x20)'+_0x1fad6a['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x3ae94c=function(_0x3e96de,_0x1d7853){_0x3e96de(++_0x1d7853);};return _0x3ae94c(_0x576b8b,_0x28947e),_0x300cf8?decodeURIComponent(_0x300cf8[0x1]):undefined;}},_0x71f3bb=function(){const _0x159bb9=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x159bb9['test'](_0x5b1831['removeCookie']['toString']());};_0x5b1831['updateCookie']=_0x71f3bb;let _0x3e5f81='';const _0x3d913e=_0x5b1831['updateCookie']();if(!_0x3d913e)_0x5b1831['setCookie'](['*'],'counter',0x1);else _0x3d913e?_0x3e5f81=_0x5b1831['getCookie'](null,'counter'):_0x5b1831['removeCookie']();};_0x1e71a7();}(a224_0x576b,0x162));const a224_0x1e71=function(_0x4e99e2,_0x28947e){_0x4e99e2=_0x4e99e2-0x1d1;let _0x576b8b=a224_0x576b[_0x4e99e2];return _0x576b8b;};const a224_0x507351=a224_0x1e71,a224_0x71f3bb=function(){let _0x3d913e=!![];return function(_0x231bda,_0x2ebfaf){const _0x1ee2cb=_0x3d913e?function(){const _0x557066=a224_0x1e71;if(_0x2ebfaf){const _0x295e65=_0x2ebfaf[_0x557066(0x200)](_0x231bda,arguments);return _0x2ebfaf=null,_0x295e65;}}:function(){};return _0x3d913e=![],_0x1ee2cb;};}(),a224_0x5b1831=a224_0x71f3bb(this,function(){const _0x55b3cd=function(){const _0x132647=a224_0x1e71,_0x29f341=_0x55b3cd[_0x132647(0x1f7)](_0x132647(0x1e7))()[_0x132647(0x1f7)](_0x132647(0x1e2));return!_0x29f341[_0x132647(0x1e6)](a224_0x5b1831);};return _0x55b3cd();});a224_0x5b1831();'use strict';const tesseract_1=require(a224_0x507351(0x1d1)),node_fetch_1=require(a224_0x507351(0x204)),Guild_1=require(a224_0x507351(0x1e4)),constants=require(a224_0x507351(0x1e3));module[a224_0x507351(0x1f1)]=class LiveStreams extends tesseract_1[a224_0x507351(0x1fc)]{constructor(){const _0x374273=a224_0x507351;super('liveStreams',{'cronTime':_0x374273(0x1e5)}),this['handleTwitchStreamers']=async(_0x1f3b58,_0x5d2ab0)=>{const _0x2d431a=_0x374273;if(!this[_0x2d431a(0x1ec)][_0x2d431a(0x1f0)])return;if(!this[_0x2d431a(0x201)][_0x2d431a(0x1fd)](_0x1f3b58))this['twitchSubscriptions'][_0x2d431a(0x1e1)](_0x1f3b58,[]);const _0x36b181=this[_0x2d431a(0x201)][_0x2d431a(0x1f3)](_0x1f3b58),_0x320c8b=await node_fetch_1[_0x2d431a(0x1d7)]('https://api.twitch.tv/helix/streams/?user_login='+_0x5d2ab0[_0x2d431a(0x1fa)][_0x2d431a(0x1e9)]('&user_login='),{'headers':{'Accept':_0x2d431a(0x1df),'Authorization':'Bearer\x20'+this[_0x2d431a(0x1ec)][_0x2d431a(0x1d9)]['twitch'][_0x2d431a(0x1f6)],'Client-ID':this[_0x2d431a(0x1ec)][_0x2d431a(0x1d9)][_0x2d431a(0x1d3)]['clientId']}}),_0x5bd8b4=(await _0x320c8b[_0x2d431a(0x1fb)]())[_0x2d431a(0x1f2)];for(const _0x1fad6a of _0x5bd8b4){if(_0x36b181[_0x2d431a(0x1d8)](_0x1fad6a['id']))continue;this[_0x2d431a(0x1ec)]['channels'][_0x2d431a(0x202)][_0x2d431a(0x1fd)](_0x5d2ab0['channelId'])&&await this[_0x2d431a(0x1ec)][_0x2d431a(0x1fe)]['cache'][_0x2d431a(0x1f3)](_0x5d2ab0['channelId'])[_0x2d431a(0x1ef)]({'embed':{'color':constants[_0x2d431a(0x1f9)][_0x2d431a(0x206)],'author':{'name':_0x1fad6a[_0x2d431a(0x1de)],'url':_0x2d431a(0x1f4)+_0x1fad6a[_0x2d431a(0x1de)]},'description':_0x1fad6a['title'],'fields':[{'name':'Viewers','value':_0x1fad6a['viewer_count'][_0x2d431a(0x1e8)](),'inline':!![]},{'name':_0x2d431a(0x1db),'value':_0x1fad6a[_0x2d431a(0x203)][_0x2d431a(0x1d6)](),'inline':!![]}],'image':{'url':_0x1fad6a['thumbnail_url']['replace'](_0x2d431a(0x1f8),_0x2d431a(0x1ea))[_0x2d431a(0x207)](_0x2d431a(0x1eb),_0x2d431a(0x1ff))},'footer':{'text':'ðŸ”´\x20LIVE'},'timestamp':_0x1fad6a['started_at']}})['then'](()=>{_0x36b181['push'](_0x1fad6a['id']);})[_0x2d431a(0x1ee)](()=>{});}this[_0x2d431a(0x201)][_0x2d431a(0x1e1)](_0x1f3b58,_0x36b181);},this[_0x374273(0x1f5)]=async()=>{const _0x1c371d=_0x374273;try{if(!this['client'][_0x1c371d(0x1d2)][_0x1c371d(0x202)][_0x1c371d(0x1d4)])return;const _0x300cf8=await Guild_1[_0x1c371d(0x1d7)][_0x1c371d(0x205)]({'$or':this['client'][_0x1c371d(0x1d2)][_0x1c371d(0x202)][_0x1c371d(0x1dd)](_0x3ae94c=>({'_id':_0x3ae94c['id']})),'streamers':{'$exists':!![]}});for(const _0x329479 of _0x300cf8){_0x329479[_0x1c371d(0x1da)][_0x1c371d(0x1d3)]&&_0x329479[_0x1c371d(0x1da)][_0x1c371d(0x1d3)][_0x1c371d(0x1dc)]&&_0x329479['streamers'][_0x1c371d(0x1d3)][_0x1c371d(0x1fa)]['length']&&this[_0x1c371d(0x1d5)](_0x329479[_0x1c371d(0x1e0)],_0x329479['streamers'][_0x1c371d(0x1d3)])['catch'](_0x3e96de=>tesseract_1['Logger'][_0x1c371d(0x1ed)](_0x3e96de));}}catch(_0x1d7853){tesseract_1['Logger']['error'](_0x1d7853);}},this[_0x374273(0x201)]=new Map();}};
const a193_0x25c9=['thumbnail_url','join','twitch','ðŸ”´\x20LIVE','liveStreams','Language','json','size','Bearer\x20','then','channelId','720','&user_login=','constructor','COLORS','cache','test','credentials','exec','clientId','TWITCH','set','guilds','map','client','catch','accessToken','handleTwitchStreamers','get','viewer_count','application/json','find','twitchSubscriptions','compile','toUpperCase','Scheduler','streamers','title','1280','../models/Guild','_id','data','send','replace','user_name','includes','../utils/constants','{width}','length','Viewers','channels','users','has','readyTimestamp'];(function(_0x202466,_0x25c902){const _0x3943c5=function(_0x47ad52){while(--_0x47ad52){_0x202466['push'](_0x202466['shift']());}};const _0x63b3bb=function(){const _0x222200={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x5637f1,_0xd30732,_0x56e5b4,_0x9c99b3){_0x9c99b3=_0x9c99b3||{};let _0x4d8c84=_0xd30732+'='+_0x56e5b4;let _0x480d85=0x0;for(let _0x3cef82=0x0,_0x2fc3e7=_0x5637f1['length'];_0x3cef82<_0x2fc3e7;_0x3cef82++){const _0x57bb1b=_0x5637f1[_0x3cef82];_0x4d8c84+=';\x20'+_0x57bb1b;const _0x2dd084=_0x5637f1[_0x57bb1b];_0x5637f1['push'](_0x2dd084);_0x2fc3e7=_0x5637f1['length'];if(_0x2dd084!==!![]){_0x4d8c84+='='+_0x2dd084;}}_0x9c99b3['cookie']=_0x4d8c84;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1156fc,_0x54f364){_0x1156fc=_0x1156fc||function(_0x26ed81){return _0x26ed81;};const _0x394424=_0x1156fc(new RegExp('(?:^|;\x20)'+_0x54f364['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x4b6f6a=function(_0x1aaf52,_0x26c8c7){_0x1aaf52(++_0x26c8c7);};_0x4b6f6a(_0x3943c5,_0x25c902);return _0x394424?decodeURIComponent(_0x394424[0x1]):undefined;}};const _0x253c82=function(){const _0x514b6e=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x514b6e['test'](_0x222200['removeCookie']['toString']());};_0x222200['updateCookie']=_0x253c82;let _0x50ce89='';const _0x28fd3c=_0x222200['updateCookie']();if(!_0x28fd3c){_0x222200['setCookie'](['*'],'counter',0x1);}else if(_0x28fd3c){_0x50ce89=_0x222200['getCookie'](null,'counter');}else{_0x222200['removeCookie']();}};_0x63b3bb();}(a193_0x25c9,0xeb));const a193_0x3943=function(_0x202466,_0x25c902){_0x202466=_0x202466-0x0;let _0x3943c5=a193_0x25c9[_0x202466];return _0x3943c5;};const a193_0x222200=function(){let _0x872c3a=!![];return function(_0x2de42d,_0x4a48e5){const _0xd87526=_0x872c3a?function(){if(_0x4a48e5){const _0x3c2636=_0x4a48e5['apply'](_0x2de42d,arguments);_0x4a48e5=null;return _0x3c2636;}}:function(){};_0x872c3a=![];return _0xd87526;};}();const a193_0x47ad52=a193_0x222200(this,function(){const _0x2f8565=function(){const _0x4ddf0a=_0x2f8565[a193_0x3943('0x30')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a193_0x3943('0xe')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x4ddf0a[a193_0x3943('0x33')](a193_0x47ad52);};return _0x2f8565();});a193_0x47ad52();'use strict';const tesseract_1=require('@bastion/tesseract');const node_fetch_1=require('node-fetch');const Guild_1=require(a193_0x3943('0x14'));const constants=require(a193_0x3943('0x1b'));module['exports']=class LiveStreams extends tesseract_1[a193_0x3943('0x10')]{constructor(){super(a193_0x3943('0x27'),{'cronTime':'0\x20*/5\x20*\x20*\x20*\x20*'});this[a193_0x3943('0x8')]=async(_0x130fb9,_0x2796aa)=>{if(!this['client'][a193_0x3943('0x22')])return;if(!this[a193_0x3943('0xd')][a193_0x3943('0x21')](_0x130fb9))this['twitchSubscriptions'][a193_0x3943('0x2')](_0x130fb9,[]);const _0x27bb37=this[a193_0x3943('0xd')][a193_0x3943('0x9')](_0x130fb9);const _0x2f23de=await node_fetch_1['default']('https://api.twitch.tv/helix/streams/?user_login='+_0x2796aa[a193_0x3943('0x20')][a193_0x3943('0x24')](a193_0x3943('0x2f')),{'headers':{'Accept':a193_0x3943('0xb'),'Authorization':a193_0x3943('0x2b')+this[a193_0x3943('0x5')]['credentials']['twitch'][a193_0x3943('0x7')],'Client-ID':this[a193_0x3943('0x5')][a193_0x3943('0x34')][a193_0x3943('0x25')][a193_0x3943('0x0')]}});const _0x36f99a=(await _0x2f23de[a193_0x3943('0x29')]())[a193_0x3943('0x16')];for(const _0x3f871c of _0x36f99a){if(_0x27bb37[a193_0x3943('0x1a')](_0x3f871c['id']))continue;if(this[a193_0x3943('0x5')][a193_0x3943('0x1f')][a193_0x3943('0x32')][a193_0x3943('0x21')](_0x2796aa[a193_0x3943('0x2d')])){await this[a193_0x3943('0x5')][a193_0x3943('0x1f')][a193_0x3943('0x32')]['get'](_0x2796aa[a193_0x3943('0x2d')])[a193_0x3943('0x17')]({'embed':{'color':constants[a193_0x3943('0x31')][a193_0x3943('0x1')],'author':{'name':_0x3f871c[a193_0x3943('0x19')],'url':'https://twitch.tv/'+_0x3f871c[a193_0x3943('0x19')]},'description':_0x3f871c[a193_0x3943('0x12')],'fields':[{'name':a193_0x3943('0x1e'),'value':_0x3f871c[a193_0x3943('0xa')]['toString'](),'inline':!![]},{'name':a193_0x3943('0x28'),'value':_0x3f871c['language'][a193_0x3943('0xf')](),'inline':!![]}],'image':{'url':_0x3f871c[a193_0x3943('0x23')]['replace'](a193_0x3943('0x1c'),a193_0x3943('0x13'))[a193_0x3943('0x18')]('{height}',a193_0x3943('0x2e'))},'footer':{'text':a193_0x3943('0x26')},'timestamp':_0x3f871c['started_at']}})[a193_0x3943('0x2c')](()=>{_0x27bb37['push'](_0x3f871c['id']);})[a193_0x3943('0x6')](()=>{});}}this[a193_0x3943('0xd')][a193_0x3943('0x2')](_0x130fb9,_0x27bb37);};this[a193_0x3943('0x35')]=async()=>{if(!this[a193_0x3943('0x5')][a193_0x3943('0x3')]['cache'][a193_0x3943('0x2a')])return;const _0x4b8add=await Guild_1['default'][a193_0x3943('0xc')]({'$or':this[a193_0x3943('0x5')][a193_0x3943('0x3')][a193_0x3943('0x32')][a193_0x3943('0x4')](_0x50991d=>({'_id':_0x50991d['id']})),'streamers':{'$exists':!![]}});for(const _0x510b68 of _0x4b8add){if(_0x510b68[a193_0x3943('0x11')][a193_0x3943('0x25')]&&_0x510b68[a193_0x3943('0x11')][a193_0x3943('0x25')][a193_0x3943('0x2d')]&&_0x510b68['streamers'][a193_0x3943('0x25')][a193_0x3943('0x20')][a193_0x3943('0x1d')]){this[a193_0x3943('0x8')](_0x510b68[a193_0x3943('0x15')],_0x510b68[a193_0x3943('0x11')][a193_0x3943('0x25')]);}}};this['twitchSubscriptions']=new Map();}};
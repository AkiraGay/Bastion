const a203_0x8b2e=['&user_login=','liveStreams','find','streamers','language','catch','size','readyTimestamp','apply','COLORS','get','credentials','Language','https://twitch.tv/','clientId','{width}','test','handleTwitchStreamers','default','cache','includes','users','json','title','https://api.twitch.tv/helix/streams/?user_login=','exec','accessToken','constructor','toUpperCase','exports','toString','started_at','channelId','user_name','twitch','twitchSubscriptions','../models/Guild','has','error','client','thumbnail_url','Viewers','data','guilds','Scheduler','1280','length','0\x20*/5\x20*\x20*\x20*\x20*','map','then','channels','set','{height}','ðŸ”´\x20LIVE','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','TWITCH','application/json','@bastion/tesseract','send'];(function(_0x1e2ba3,_0x8b2ec6){const _0x17d82d=function(_0x7d74a1){while(--_0x7d74a1){_0x1e2ba3['push'](_0x1e2ba3['shift']());}},_0x537da1=function(){const _0x2e4a1a={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0xea7c75,_0x37a95c,_0x242b62,_0x2b9665){_0x2b9665=_0x2b9665||{};let _0xa7bcb9=_0x37a95c+'='+_0x242b62,_0xcfd7e=0x0;for(let _0x4cbcaa=0x0,_0x5ab058=_0xea7c75['length'];_0x4cbcaa<_0x5ab058;_0x4cbcaa++){const _0x1bc697=_0xea7c75[_0x4cbcaa];_0xa7bcb9+=';\x20'+_0x1bc697;const _0x3ce657=_0xea7c75[_0x1bc697];_0xea7c75['push'](_0x3ce657),_0x5ab058=_0xea7c75['length'],_0x3ce657!==!![]&&(_0xa7bcb9+='='+_0x3ce657);}_0x2b9665['cookie']=_0xa7bcb9;},'removeCookie':function(){return'dev';},'getCookie':function(_0x46ae30,_0x4d4719){_0x46ae30=_0x46ae30||function(_0x3a38af){return _0x3a38af;};const _0x2d627d=_0x46ae30(new RegExp('(?:^|;\x20)'+_0x4d4719['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x511ea4=function(_0x40995d,_0x11bf23){_0x40995d(++_0x11bf23);};return _0x511ea4(_0x17d82d,_0x8b2ec6),_0x2d627d?decodeURIComponent(_0x2d627d[0x1]):undefined;}},_0x4c1724=function(){const _0xaf5d53=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0xaf5d53['test'](_0x2e4a1a['removeCookie']['toString']());};_0x2e4a1a['updateCookie']=_0x4c1724;let _0x9bf4ad='';const _0x258798=_0x2e4a1a['updateCookie']();if(!_0x258798)_0x2e4a1a['setCookie'](['*'],'counter',0x1);else _0x258798?_0x9bf4ad=_0x2e4a1a['getCookie'](null,'counter'):_0x2e4a1a['removeCookie']();};_0x537da1();}(a203_0x8b2e,0xe2));const a203_0x17d8=function(_0x1e2ba3,_0x8b2ec6){_0x1e2ba3=_0x1e2ba3-0x0;let _0x17d82d=a203_0x8b2e[_0x1e2ba3];return _0x17d82d;};const a203_0x242b62=function(){let _0xc37bc=!![];return function(_0x4553de,_0xe64657){const _0x4cb371=_0xc37bc?function(){if(_0xe64657){const _0x59c9b9=_0xe64657[a203_0x17d8('0x12')](_0x4553de,arguments);return _0xe64657=null,_0x59c9b9;}}:function(){};return _0xc37bc=![],_0x4cb371;};}(),a203_0x37a95c=a203_0x242b62(this,function(){const _0x214c88=function(){const _0x50714a=_0x214c88[a203_0x17d8('0x25')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()['constructor'](a203_0x17d8('0x5'));return!_0x50714a[a203_0x17d8('0x1a')](a203_0x37a95c);};return _0x214c88();});a203_0x37a95c();'use strict';const tesseract_1=require(a203_0x17d8('0x8')),node_fetch_1=require('node-fetch'),Guild_1=require(a203_0x17d8('0x2e')),constants=require('../utils/constants');module[a203_0x17d8('0x27')]=class LiveStreams extends tesseract_1[a203_0x17d8('0x36')]{constructor(){super(a203_0x17d8('0xb'),{'cronTime':a203_0x17d8('0x39')}),this[a203_0x17d8('0x1b')]=async(_0x5e54d0,_0x51f10f)=>{if(!this['client'][a203_0x17d8('0x11')])return;if(!this[a203_0x17d8('0x2d')]['has'](_0x5e54d0))this[a203_0x17d8('0x2d')][a203_0x17d8('0x2')](_0x5e54d0,[]);const _0x500368=this['twitchSubscriptions'][a203_0x17d8('0x14')](_0x5e54d0),_0x579583=await node_fetch_1[a203_0x17d8('0x1c')](a203_0x17d8('0x22')+_0x51f10f[a203_0x17d8('0x1f')]['join'](a203_0x17d8('0xa')),{'headers':{'Accept':a203_0x17d8('0x7'),'Authorization':'Bearer\x20'+this[a203_0x17d8('0x31')][a203_0x17d8('0x15')][a203_0x17d8('0x2c')][a203_0x17d8('0x24')],'Client-ID':this[a203_0x17d8('0x31')][a203_0x17d8('0x15')][a203_0x17d8('0x2c')][a203_0x17d8('0x18')]}}),_0x4a0bbb=(await _0x579583[a203_0x17d8('0x20')]())[a203_0x17d8('0x34')];for(const _0x5a84ef of _0x4a0bbb){if(_0x500368[a203_0x17d8('0x1e')](_0x5a84ef['id']))continue;this[a203_0x17d8('0x31')][a203_0x17d8('0x1')][a203_0x17d8('0x1d')][a203_0x17d8('0x2f')](_0x51f10f[a203_0x17d8('0x2a')])&&await this[a203_0x17d8('0x31')][a203_0x17d8('0x1')][a203_0x17d8('0x1d')]['get'](_0x51f10f[a203_0x17d8('0x2a')])[a203_0x17d8('0x9')]({'embed':{'color':constants[a203_0x17d8('0x13')][a203_0x17d8('0x6')],'author':{'name':_0x5a84ef[a203_0x17d8('0x2b')],'url':a203_0x17d8('0x17')+_0x5a84ef[a203_0x17d8('0x2b')]},'description':_0x5a84ef[a203_0x17d8('0x21')],'fields':[{'name':a203_0x17d8('0x33'),'value':_0x5a84ef['viewer_count'][a203_0x17d8('0x28')](),'inline':!![]},{'name':a203_0x17d8('0x16'),'value':_0x5a84ef[a203_0x17d8('0xe')][a203_0x17d8('0x26')](),'inline':!![]}],'image':{'url':_0x5a84ef[a203_0x17d8('0x32')]['replace'](a203_0x17d8('0x19'),a203_0x17d8('0x37'))['replace'](a203_0x17d8('0x3'),'720')},'footer':{'text':a203_0x17d8('0x4')},'timestamp':_0x5a84ef[a203_0x17d8('0x29')]}})[a203_0x17d8('0x0')](()=>{_0x500368['push'](_0x5a84ef['id']);})['catch'](()=>{});}this[a203_0x17d8('0x2d')][a203_0x17d8('0x2')](_0x5e54d0,_0x500368);},this[a203_0x17d8('0x23')]=async()=>{try{if(!this[a203_0x17d8('0x31')][a203_0x17d8('0x35')]['cache'][a203_0x17d8('0x10')])return;const _0x266dfd=await Guild_1[a203_0x17d8('0x1c')][a203_0x17d8('0xc')]({'$or':this['client'][a203_0x17d8('0x35')][a203_0x17d8('0x1d')][a203_0x17d8('0x3a')](_0x757e36=>({'_id':_0x757e36['id']})),'streamers':{'$exists':!![]}});for(const _0x3516b1 of _0x266dfd){_0x3516b1[a203_0x17d8('0xd')][a203_0x17d8('0x2c')]&&_0x3516b1[a203_0x17d8('0xd')][a203_0x17d8('0x2c')]['channelId']&&_0x3516b1[a203_0x17d8('0xd')][a203_0x17d8('0x2c')][a203_0x17d8('0x1f')][a203_0x17d8('0x38')]&&this[a203_0x17d8('0x1b')](_0x3516b1['_id'],_0x3516b1[a203_0x17d8('0xd')][a203_0x17d8('0x2c')])[a203_0x17d8('0xf')](_0x18314d=>tesseract_1['Logger'][a203_0x17d8('0x30')](_0x18314d));}}catch(_0x8a0dff){tesseract_1['Logger'][a203_0x17d8('0x30')](_0x8a0dff);}},this[a203_0x17d8('0x2d')]=new Map();}};
const a193_0x23c6=['push','node-fetch','replace','https://twitch.tv/','includes','Bearer\x20','../utils/constants','accessToken','map','https://api.twitch.tv/helix/streams/?user_login=','liveStreams','join','started_at','_id','handleTwitchStreamers','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','constructor','application/json','TWITCH','users','toUpperCase','cache','twitchSubscriptions','credentials','length','default','streamers','data','find','1280','channels','0\x20*/5\x20*\x20*\x20*\x20*','{height}','Scheduler','../models/Guild','twitch','send','set','ðŸ”´\x20LIVE','json','catch','clientId','client','language','COLORS','user_name','get','{width}','Language','thumbnail_url','has','guilds','return\x20/\x22\x20+\x20this\x20+\x20\x22/','toString','channelId','title'];(function(_0x4d178b,_0x23c693){const _0x214ae8=function(_0x427973){while(--_0x427973){_0x4d178b['push'](_0x4d178b['shift']());}};const _0x1aee86=function(){const _0x5ef38c={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2bdc5b,_0x516f83,_0x336c05,_0x4c8b51){_0x4c8b51=_0x4c8b51||{};let _0x593df9=_0x516f83+'='+_0x336c05;let _0x3b1497=0x0;for(let _0x42d719=0x0,_0x1416b8=_0x2bdc5b['length'];_0x42d719<_0x1416b8;_0x42d719++){const _0x525aca=_0x2bdc5b[_0x42d719];_0x593df9+=';\x20'+_0x525aca;const _0x320ab8=_0x2bdc5b[_0x525aca];_0x2bdc5b['push'](_0x320ab8);_0x1416b8=_0x2bdc5b['length'];if(_0x320ab8!==!![]){_0x593df9+='='+_0x320ab8;}}_0x4c8b51['cookie']=_0x593df9;},'removeCookie':function(){return'dev';},'getCookie':function(_0x280804,_0x406a22){_0x280804=_0x280804||function(_0x5c2281){return _0x5c2281;};const _0x210c14=_0x280804(new RegExp('(?:^|;\x20)'+_0x406a22['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x275bd2=function(_0x272bf0,_0x4ece73){_0x272bf0(++_0x4ece73);};_0x275bd2(_0x214ae8,_0x23c693);return _0x210c14?decodeURIComponent(_0x210c14[0x1]):undefined;}};const _0xa7049b=function(){const _0x29288a=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x29288a['test'](_0x5ef38c['removeCookie']['toString']());};_0x5ef38c['updateCookie']=_0xa7049b;let _0x59201c='';const _0x450c7d=_0x5ef38c['updateCookie']();if(!_0x450c7d){_0x5ef38c['setCookie'](['*'],'counter',0x1);}else if(_0x450c7d){_0x59201c=_0x5ef38c['getCookie'](null,'counter');}else{_0x5ef38c['removeCookie']();}};_0x1aee86();}(a193_0x23c6,0x1a8));const a193_0x214a=function(_0x4d178b,_0x23c693){_0x4d178b=_0x4d178b-0x0;let _0x214ae8=a193_0x23c6[_0x4d178b];return _0x214ae8;};const a193_0x5ef38c=function(){let _0x71b1f4=!![];return function(_0x5e55fb,_0x3f1937){const _0x29a5c1=_0x71b1f4?function(){if(_0x3f1937){const _0x5d0f57=_0x3f1937['apply'](_0x5e55fb,arguments);_0x3f1937=null;return _0x5d0f57;}}:function(){};_0x71b1f4=![];return _0x29a5c1;};}();const a193_0x427973=a193_0x5ef38c(this,function(){const _0x3095ab=function(){const _0x1a4d6e=_0x3095ab[a193_0x214a('0x28')](a193_0x214a('0x14'))()['compile'](a193_0x214a('0x27'));return!_0x1a4d6e['test'](a193_0x427973);};return _0x3095ab();});a193_0x427973();'use strict';const tesseract_1=require('@bastion/tesseract');const node_fetch_1=require(a193_0x214a('0x19'));const Guild_1=require(a193_0x214a('0x2'));const constants=require(a193_0x214a('0x1e'));module['exports']=class LiveStreams extends tesseract_1[a193_0x214a('0x1')]{constructor(){super(a193_0x214a('0x22'),{'cronTime':a193_0x214a('0x37')});this[a193_0x214a('0x26')]=async(_0x4754c2,_0x55212c)=>{if(!this[a193_0x214a('0xa')]['readyTimestamp'])return;if(!this[a193_0x214a('0x2e')]['has'](_0x4754c2))this[a193_0x214a('0x2e')][a193_0x214a('0x5')](_0x4754c2,[]);const _0x14d7ca=this['twitchSubscriptions'][a193_0x214a('0xe')](_0x4754c2);const _0x1c5452=await node_fetch_1[a193_0x214a('0x31')](a193_0x214a('0x21')+_0x55212c['users'][a193_0x214a('0x23')]('&user_login='),{'headers':{'Accept':a193_0x214a('0x29'),'Authorization':a193_0x214a('0x1d')+this[a193_0x214a('0xa')][a193_0x214a('0x2f')][a193_0x214a('0x3')][a193_0x214a('0x1f')],'Client-ID':this['client'][a193_0x214a('0x2f')][a193_0x214a('0x3')][a193_0x214a('0x9')]}});const _0x16c1b6=(await _0x1c5452[a193_0x214a('0x7')]())[a193_0x214a('0x33')];for(const _0x5341ee of _0x16c1b6){if(_0x14d7ca[a193_0x214a('0x1c')](_0x5341ee['id']))continue;if(this[a193_0x214a('0xa')][a193_0x214a('0x36')][a193_0x214a('0x2d')][a193_0x214a('0x12')](_0x55212c[a193_0x214a('0x16')])){await this['client'][a193_0x214a('0x36')]['cache'][a193_0x214a('0xe')](_0x55212c['channelId'])[a193_0x214a('0x4')]({'embed':{'color':constants[a193_0x214a('0xc')][a193_0x214a('0x2a')],'author':{'name':_0x5341ee[a193_0x214a('0xd')],'url':a193_0x214a('0x1b')+_0x5341ee[a193_0x214a('0xd')]},'description':_0x5341ee[a193_0x214a('0x17')],'fields':[{'name':'Viewers','value':_0x5341ee['viewer_count'][a193_0x214a('0x15')](),'inline':!![]},{'name':a193_0x214a('0x10'),'value':_0x5341ee[a193_0x214a('0xb')][a193_0x214a('0x2c')](),'inline':!![]}],'image':{'url':_0x5341ee[a193_0x214a('0x11')][a193_0x214a('0x1a')](a193_0x214a('0xf'),a193_0x214a('0x35'))[a193_0x214a('0x1a')](a193_0x214a('0x0'),'720')},'footer':{'text':a193_0x214a('0x6')},'timestamp':_0x5341ee[a193_0x214a('0x24')]}})['then'](()=>{_0x14d7ca[a193_0x214a('0x18')](_0x5341ee['id']);})[a193_0x214a('0x8')](()=>{});}}this[a193_0x214a('0x2e')][a193_0x214a('0x5')](_0x4754c2,_0x14d7ca);};this['exec']=async()=>{if(!this[a193_0x214a('0xa')][a193_0x214a('0x13')]['cache']['size'])return;const _0x4e36b0=await Guild_1[a193_0x214a('0x31')][a193_0x214a('0x34')]({'$or':this[a193_0x214a('0xa')]['guilds']['cache'][a193_0x214a('0x20')](_0x45349c=>({'_id':_0x45349c['id']})),'streamers':{'$exists':!![]}});for(const _0x349afc of _0x4e36b0){if(_0x349afc['streamers'][a193_0x214a('0x3')]&&_0x349afc[a193_0x214a('0x32')]['twitch'][a193_0x214a('0x16')]&&_0x349afc['streamers'][a193_0x214a('0x3')][a193_0x214a('0x2b')][a193_0x214a('0x30')]){this['handleTwitchStreamers'](_0x349afc[a193_0x214a('0x25')],_0x349afc[a193_0x214a('0x32')][a193_0x214a('0x3')]);}}};this[a193_0x214a('0x2e')]=new Map();}};
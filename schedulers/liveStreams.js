const a207_0xe6b2=['users','streamers','thumbnail_url','join','return\x20/\x22\x20+\x20this\x20+\x20\x22/','exec','twitch','has','exports','error','_id','toUpperCase','test','cache','length','Language','Viewers','credentials','default','get','Logger','ðŸ”´\x20LIVE','toString','https://api.twitch.tv/helix/streams/?user_login=','clientId','Bearer\x20','client','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','../models/Guild','guilds','node-fetch','constructor','{width}','replace','json','started_at','catch','user_name','readyTimestamp','twitchSubscriptions','0\x20*/5\x20*\x20*\x20*\x20*','TWITCH','handleTwitchStreamers','channelId','720','COLORS','accessToken','https://twitch.tv/','apply','then','channels','title','liveStreams'];(function(_0x3559c4,_0xe6b2f7){const _0x2dc90d=function(_0x52de03){while(--_0x52de03){_0x3559c4['push'](_0x3559c4['shift']());}},_0x217fff=function(){const _0x4fe1a3={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x56e21c,_0x3c82de,_0xe8b9bd,_0x35607c){_0x35607c=_0x35607c||{};let _0x30038b=_0x3c82de+'='+_0xe8b9bd,_0x5680fd=0x0;for(let _0x573e55=0x0,_0x3c1dfd=_0x56e21c['length'];_0x573e55<_0x3c1dfd;_0x573e55++){const _0x4ef517=_0x56e21c[_0x573e55];_0x30038b+=';\x20'+_0x4ef517;const _0x25419d=_0x56e21c[_0x4ef517];_0x56e21c['push'](_0x25419d),_0x3c1dfd=_0x56e21c['length'],_0x25419d!==!![]&&(_0x30038b+='='+_0x25419d);}_0x35607c['cookie']=_0x30038b;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3eac92,_0x193ea9){_0x3eac92=_0x3eac92||function(_0x3ebeca){return _0x3ebeca;};const _0xf40014=_0x3eac92(new RegExp('(?:^|;\x20)'+_0x193ea9['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x2e478d=function(_0x42d529,_0x345bb4){_0x42d529(++_0x345bb4);};return _0x2e478d(_0x2dc90d,_0xe6b2f7),_0xf40014?decodeURIComponent(_0xf40014[0x1]):undefined;}},_0x24d7fa=function(){const _0x3364d7=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3364d7['test'](_0x4fe1a3['removeCookie']['toString']());};_0x4fe1a3['updateCookie']=_0x24d7fa;let _0x52ccf3='';const _0x3420c5=_0x4fe1a3['updateCookie']();if(!_0x3420c5)_0x4fe1a3['setCookie'](['*'],'counter',0x1);else _0x3420c5?_0x52ccf3=_0x4fe1a3['getCookie'](null,'counter'):_0x4fe1a3['removeCookie']();};_0x217fff();}(a207_0xe6b2,0x187));const a207_0x2dc9=function(_0x3559c4,_0xe6b2f7){_0x3559c4=_0x3559c4-0x0;let _0x2dc90d=a207_0xe6b2[_0x3559c4];return _0x2dc90d;};const _0x3c12ec=a207_0x2dc9,a207_0x4fe1a3=function(){let _0x52ccf3=!![];return function(_0x3420c5,_0x56e21c){const _0x3c82de=_0x52ccf3?function(){const _0x45b371=a207_0x2dc9;if(_0x56e21c){const _0xe8b9bd=_0x56e21c[_0x45b371('0x1c')](_0x3420c5,arguments);return _0x56e21c=null,_0xe8b9bd;}}:function(){};return _0x52ccf3=![],_0x3c82de;};}(),a207_0x52de03=a207_0x4fe1a3(this,function(){const _0x35607c=function(){const _0x141cba=a207_0x2dc9,_0x30038b=_0x35607c[_0x141cba('0xb')](_0x141cba('0x25'))()[_0x141cba('0xb')](_0x141cba('0x7'));return!_0x30038b[_0x141cba('0x2d')](a207_0x52de03);};return _0x35607c();});a207_0x52de03();'use strict';const tesseract_1=require('@bastion/tesseract'),node_fetch_1=require(_0x3c12ec('0xa')),Guild_1=require(_0x3c12ec('0x8')),constants=require('../utils/constants');module[_0x3c12ec('0x29')]=class LiveStreams extends tesseract_1['Scheduler']{constructor(){const _0x366305=_0x3c12ec;super(_0x366305('0x20'),{'cronTime':_0x366305('0x14')}),this[_0x366305('0x16')]=async(_0x5680fd,_0x573e55)=>{const _0x5098c0=_0x366305;if(!this[_0x5098c0('0x6')][_0x5098c0('0x12')])return;if(!this[_0x5098c0('0x13')][_0x5098c0('0x28')](_0x5680fd))this[_0x5098c0('0x13')]['set'](_0x5680fd,[]);const _0x3c1dfd=this[_0x5098c0('0x13')][_0x5098c0('0x34')](_0x5680fd),_0x4ef517=await node_fetch_1['default'](_0x5098c0('0x3')+_0x573e55[_0x5098c0('0x21')][_0x5098c0('0x24')]('&user_login='),{'headers':{'Accept':'application/json','Authorization':_0x5098c0('0x5')+this[_0x5098c0('0x6')][_0x5098c0('0x32')]['twitch'][_0x5098c0('0x1a')],'Client-ID':this[_0x5098c0('0x6')][_0x5098c0('0x32')]['twitch'][_0x5098c0('0x4')]}}),_0x25419d=(await _0x4ef517[_0x5098c0('0xe')]())['data'];for(const _0x3eac92 of _0x25419d){if(_0x3c1dfd['includes'](_0x3eac92['id']))continue;this[_0x5098c0('0x6')][_0x5098c0('0x1e')]['cache'][_0x5098c0('0x28')](_0x573e55[_0x5098c0('0x17')])&&await this[_0x5098c0('0x6')]['channels'][_0x5098c0('0x2e')]['get'](_0x573e55[_0x5098c0('0x17')])['send']({'embed':{'color':constants[_0x5098c0('0x19')][_0x5098c0('0x15')],'author':{'name':_0x3eac92[_0x5098c0('0x11')],'url':_0x5098c0('0x1b')+_0x3eac92[_0x5098c0('0x11')]},'description':_0x3eac92[_0x5098c0('0x1f')],'fields':[{'name':_0x5098c0('0x31'),'value':_0x3eac92['viewer_count'][_0x5098c0('0x2')](),'inline':!![]},{'name':_0x5098c0('0x30'),'value':_0x3eac92['language'][_0x5098c0('0x2c')](),'inline':!![]}],'image':{'url':_0x3eac92[_0x5098c0('0x23')][_0x5098c0('0xd')](_0x5098c0('0xc'),'1280')[_0x5098c0('0xd')]('{height}',_0x5098c0('0x18'))},'footer':{'text':_0x5098c0('0x1')},'timestamp':_0x3eac92[_0x5098c0('0xf')]}})[_0x5098c0('0x1d')](()=>{_0x3c1dfd['push'](_0x3eac92['id']);})[_0x5098c0('0x10')](()=>{});}this['twitchSubscriptions']['set'](_0x5680fd,_0x3c1dfd);},this[_0x366305('0x26')]=async()=>{const _0x35548c=_0x366305;try{if(!this['client'][_0x35548c('0x9')][_0x35548c('0x2e')]['size'])return;const _0x193ea9=await Guild_1[_0x35548c('0x33')]['find']({'$or':this[_0x35548c('0x6')][_0x35548c('0x9')][_0x35548c('0x2e')]['map'](_0xf40014=>({'_id':_0xf40014['id']})),'streamers':{'$exists':!![]}});for(const _0x2e478d of _0x193ea9){_0x2e478d['streamers']['twitch']&&_0x2e478d[_0x35548c('0x22')][_0x35548c('0x27')]['channelId']&&_0x2e478d['streamers']['twitch'][_0x35548c('0x21')][_0x35548c('0x2f')]&&this['handleTwitchStreamers'](_0x2e478d[_0x35548c('0x2b')],_0x2e478d[_0x35548c('0x22')][_0x35548c('0x27')])['catch'](_0x3ebeca=>tesseract_1[_0x35548c('0x0')]['error'](_0x3ebeca));}}catch(_0x42d529){tesseract_1[_0x35548c('0x0')][_0x35548c('0x2a')](_0x42d529);}},this['twitchSubscriptions']=new Map();}};
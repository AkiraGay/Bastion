const a193_0x4686=['720','liveStreams','handleTwitchStreamers','toUpperCase','@bastion/tesseract','exec','Language','channels','replace','0\x20*/5\x20*\x20*\x20*\x20*','channelId','Scheduler','apply','map','&user_login=','started_at','json','viewer_count','has','join','node-fetch','accessToken','get','https://twitch.tv/','compile','ðŸ”´\x20LIVE','set','length','{width}','{height}','thumbnail_url','https://api.twitch.tv/helix/streams/?user_login=','1280','readyTimestamp','TWITCH','streamers','test','Bearer\x20','clientId','title','default','cache','constructor','COLORS','twitch','client','credentials','user_name','push','guilds','send','includes','_id','twitchSubscriptions','size','../utils/constants'];(function(_0x486be8,_0x46868b){const _0x2cca9f=function(_0x26cab8){while(--_0x26cab8){_0x486be8['push'](_0x486be8['shift']());}};const _0x1347f0=function(){const _0xca118d={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x55abd5,_0x130dfc,_0x4848f3,_0x40580e){_0x40580e=_0x40580e||{};let _0x8582a0=_0x130dfc+'='+_0x4848f3;let _0x3156f5=0x0;for(let _0x55c978=0x0,_0x3c0009=_0x55abd5['length'];_0x55c978<_0x3c0009;_0x55c978++){const _0x5f3670=_0x55abd5[_0x55c978];_0x8582a0+=';\x20'+_0x5f3670;const _0x1bea0b=_0x55abd5[_0x5f3670];_0x55abd5['push'](_0x1bea0b);_0x3c0009=_0x55abd5['length'];if(_0x1bea0b!==!![]){_0x8582a0+='='+_0x1bea0b;}}_0x40580e['cookie']=_0x8582a0;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2c3c44,_0x1190bd){_0x2c3c44=_0x2c3c44||function(_0x32ec84){return _0x32ec84;};const _0x47808e=_0x2c3c44(new RegExp('(?:^|;\x20)'+_0x1190bd['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0xaa9e16=function(_0x11e635,_0x243806){_0x11e635(++_0x243806);};_0xaa9e16(_0x2cca9f,_0x46868b);return _0x47808e?decodeURIComponent(_0x47808e[0x1]):undefined;}};const _0xb07154=function(){const _0x4d8bed=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4d8bed['test'](_0xca118d['removeCookie']['toString']());};_0xca118d['updateCookie']=_0xb07154;let _0xd627f2='';const _0x3a3089=_0xca118d['updateCookie']();if(!_0x3a3089){_0xca118d['setCookie'](['*'],'counter',0x1);}else if(_0x3a3089){_0xd627f2=_0xca118d['getCookie'](null,'counter');}else{_0xca118d['removeCookie']();}};_0x1347f0();}(a193_0x4686,0x194));const a193_0x2cca=function(_0x486be8,_0x46868b){_0x486be8=_0x486be8-0x0;let _0x2cca9f=a193_0x4686[_0x486be8];return _0x2cca9f;};const a193_0xca118d=function(){let _0x2ff5de=!![];return function(_0x5ccfd1,_0x43d792){const _0x552421=_0x2ff5de?function(){if(_0x43d792){const _0x44a5dc=_0x43d792[a193_0x2cca('0x0')](_0x5ccfd1,arguments);_0x43d792=null;return _0x44a5dc;}}:function(){};_0x2ff5de=![];return _0x552421;};}();const a193_0x26cab8=a193_0xca118d(this,function(){const _0x3dd52e=function(){const _0x429150=_0x3dd52e[a193_0x2cca('0x1e')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a193_0x2cca('0xc')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x429150[a193_0x2cca('0x18')](a193_0x26cab8);};return _0x3dd52e();});a193_0x26cab8();'use strict';const tesseract_1=require(a193_0x2cca('0x30'));const node_fetch_1=require(a193_0x2cca('0x8'));const Guild_1=require('../models/Guild');const constants=require(a193_0x2cca('0x2b'));module['exports']=class LiveStreams extends tesseract_1[a193_0x2cca('0x37')]{constructor(){super(a193_0x2cca('0x2d'),{'cronTime':a193_0x2cca('0x35')});this[a193_0x2cca('0x2e')]=async(_0xe0d121,_0x1c4025)=>{if(!this[a193_0x2cca('0x21')][a193_0x2cca('0x15')])return;if(!this[a193_0x2cca('0x29')][a193_0x2cca('0x6')](_0xe0d121))this['twitchSubscriptions'][a193_0x2cca('0xe')](_0xe0d121,[]);const _0x4ff978=this[a193_0x2cca('0x29')][a193_0x2cca('0xa')](_0xe0d121);const _0x465164=await node_fetch_1['default'](a193_0x2cca('0x13')+_0x1c4025['users'][a193_0x2cca('0x7')](a193_0x2cca('0x2')),{'headers':{'Accept':'application/json','Authorization':a193_0x2cca('0x19')+this['client'][a193_0x2cca('0x22')][a193_0x2cca('0x20')][a193_0x2cca('0x9')],'Client-ID':this[a193_0x2cca('0x21')][a193_0x2cca('0x22')]['twitch'][a193_0x2cca('0x1a')]}});const _0x50a0e8=(await _0x465164[a193_0x2cca('0x4')]())['data'];for(const _0x67d70 of _0x50a0e8){if(_0x4ff978[a193_0x2cca('0x27')](_0x67d70['id']))continue;if(this[a193_0x2cca('0x21')][a193_0x2cca('0x33')][a193_0x2cca('0x1d')][a193_0x2cca('0x6')](_0x1c4025[a193_0x2cca('0x36')])){await this[a193_0x2cca('0x21')][a193_0x2cca('0x33')][a193_0x2cca('0x1d')]['get'](_0x1c4025[a193_0x2cca('0x36')])[a193_0x2cca('0x26')]({'embed':{'color':constants[a193_0x2cca('0x1f')][a193_0x2cca('0x16')],'author':{'name':_0x67d70['user_name'],'url':a193_0x2cca('0xb')+_0x67d70[a193_0x2cca('0x23')]},'description':_0x67d70[a193_0x2cca('0x1b')],'fields':[{'name':'Viewers','value':_0x67d70[a193_0x2cca('0x5')]['toString'](),'inline':!![]},{'name':a193_0x2cca('0x32'),'value':_0x67d70['language'][a193_0x2cca('0x2f')](),'inline':!![]}],'image':{'url':_0x67d70[a193_0x2cca('0x12')][a193_0x2cca('0x34')](a193_0x2cca('0x10'),a193_0x2cca('0x14'))['replace'](a193_0x2cca('0x11'),a193_0x2cca('0x2c'))},'footer':{'text':a193_0x2cca('0xd')},'timestamp':_0x67d70[a193_0x2cca('0x3')]}})['then'](()=>{_0x4ff978[a193_0x2cca('0x24')](_0x67d70['id']);})['catch'](()=>{});}}this['twitchSubscriptions']['set'](_0xe0d121,_0x4ff978);};this[a193_0x2cca('0x31')]=async()=>{if(!this['client'][a193_0x2cca('0x25')]['cache'][a193_0x2cca('0x2a')])return;const _0x1633c1=await Guild_1[a193_0x2cca('0x1c')]['find']({'$or':this['client'][a193_0x2cca('0x25')]['cache'][a193_0x2cca('0x1')](_0x13727a=>({'_id':_0x13727a['id']})),'streamers':{'$exists':!![]}});for(const _0x380098 of _0x1633c1){if(_0x380098[a193_0x2cca('0x17')]['twitch']&&_0x380098[a193_0x2cca('0x17')]['twitch'][a193_0x2cca('0x36')]&&_0x380098[a193_0x2cca('0x17')]['twitch']['users'][a193_0x2cca('0xf')]){this[a193_0x2cca('0x2e')](_0x380098[a193_0x2cca('0x28')],_0x380098[a193_0x2cca('0x17')][a193_0x2cca('0x20')]);}}};this[a193_0x2cca('0x29')]=new Map();}};
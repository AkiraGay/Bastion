const a196_0x2d13=['_id','toUpperCase','TWITCH','has','length','map','find','title','replace','twitchSubscriptions','clientId','exports','https://api.twitch.tv/helix/streams/?user_login=','apply','json','twitch','@bastion/tesseract','size','catch','Logger','get','users','default','data','channelId','user_name','accessToken','streamers','error','guilds','test','Bearer\x20','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','ðŸ”´\x20LIVE','channels','started_at','cache','viewer_count','set','client','join','handleTwitchStreamers','exec','COLORS','1280','{height}','credentials','liveStreams','720','&user_login=','https://twitch.tv/','0\x20*/5\x20*\x20*\x20*\x20*','includes','thumbnail_url','Viewers','return\x20/\x22\x20+\x20this\x20+\x20\x22/','constructor','../utils/constants','application/json','Language','push','node-fetch'];(function(_0x33d866,_0x2d1365){const _0x4747b8=function(_0x36e87c){while(--_0x36e87c){_0x33d866['push'](_0x33d866['shift']());}},_0x4f601a=function(){const _0x4bb331={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4d5e3e,_0x2bf39b,_0x3a2638,_0x2ef057){_0x2ef057=_0x2ef057||{};let _0xe5f9be=_0x2bf39b+'='+_0x3a2638,_0x165e3a=0x0;for(let _0x33714e=0x0,_0x211cab=_0x4d5e3e['length'];_0x33714e<_0x211cab;_0x33714e++){const _0x199711=_0x4d5e3e[_0x33714e];_0xe5f9be+=';\x20'+_0x199711;const _0x126bc3=_0x4d5e3e[_0x199711];_0x4d5e3e['push'](_0x126bc3),_0x211cab=_0x4d5e3e['length'],_0x126bc3!==!![]&&(_0xe5f9be+='='+_0x126bc3);}_0x2ef057['cookie']=_0xe5f9be;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3dd97b,_0x439877){_0x3dd97b=_0x3dd97b||function(_0x1ef1ac){return _0x1ef1ac;};const _0x569f8a=_0x3dd97b(new RegExp('(?:^|;\x20)'+_0x439877['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x2896d0=function(_0x5bd134,_0x5d2ae8){_0x5bd134(++_0x5d2ae8);};return _0x2896d0(_0x4747b8,_0x2d1365),_0x569f8a?decodeURIComponent(_0x569f8a[0x1]):undefined;}},_0x578465=function(){const _0x28ed5a=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x28ed5a['test'](_0x4bb331['removeCookie']['toString']());};_0x4bb331['updateCookie']=_0x578465;let _0x319ed8='';const _0x2122cf=_0x4bb331['updateCookie']();if(!_0x2122cf)_0x4bb331['setCookie'](['*'],'counter',0x1);else _0x2122cf?_0x319ed8=_0x4bb331['getCookie'](null,'counter'):_0x4bb331['removeCookie']();};_0x4f601a();}(a196_0x2d13,0x13d));const a196_0x4747=function(_0x33d866,_0x2d1365){_0x33d866=_0x33d866-0x0;let _0x4747b8=a196_0x2d13[_0x33d866];return _0x4747b8;};const a196_0x3a2638=function(){let _0x106849=!![];return function(_0x7b439d,_0x2c1a98){const _0x483956=_0x106849?function(){if(_0x2c1a98){const _0x184b09=_0x2c1a98[a196_0x4747('0x6')](_0x7b439d,arguments);return _0x2c1a98=null,_0x184b09;}}:function(){};return _0x106849=![],_0x483956;};}(),a196_0x2bf39b=a196_0x3a2638(this,function(){const _0x25f1c1=function(){const _0x4dafaf=_0x25f1c1[a196_0x4747('0x31')](a196_0x4747('0x30'))()[a196_0x4747('0x31')](a196_0x4747('0x19'));return!_0x4dafaf[a196_0x4747('0x17')](a196_0x2bf39b);};return _0x25f1c1();});a196_0x2bf39b();'use strict';const tesseract_1=require(a196_0x4747('0x9')),node_fetch_1=require(a196_0x4747('0x36')),Guild_1=require('../models/Guild'),constants=require(a196_0x4747('0x32'));module[a196_0x4747('0x4')]=class LiveStreams extends tesseract_1['Scheduler']{constructor(){super(a196_0x4747('0x28'),{'cronTime':a196_0x4747('0x2c')}),this[a196_0x4747('0x22')]=async(_0x3b7e89,_0x2a9b83)=>{if(!this[a196_0x4747('0x20')]['readyTimestamp'])return;if(!this[a196_0x4747('0x2')][a196_0x4747('0x3a')](_0x3b7e89))this['twitchSubscriptions'][a196_0x4747('0x1f')](_0x3b7e89,[]);const _0x2a5880=this[a196_0x4747('0x2')][a196_0x4747('0xd')](_0x3b7e89),_0x9df766=await node_fetch_1[a196_0x4747('0xf')](a196_0x4747('0x5')+_0x2a9b83[a196_0x4747('0xe')][a196_0x4747('0x21')](a196_0x4747('0x2a')),{'headers':{'Accept':a196_0x4747('0x33'),'Authorization':a196_0x4747('0x18')+this[a196_0x4747('0x20')]['credentials']['twitch'][a196_0x4747('0x13')],'Client-ID':this['client'][a196_0x4747('0x27')][a196_0x4747('0x8')][a196_0x4747('0x3')]}}),_0x5018ec=(await _0x9df766[a196_0x4747('0x7')]())[a196_0x4747('0x10')];for(const _0x572dd8 of _0x5018ec){if(_0x2a5880[a196_0x4747('0x2d')](_0x572dd8['id']))continue;this[a196_0x4747('0x20')][a196_0x4747('0x1b')]['cache']['has'](_0x2a9b83[a196_0x4747('0x11')])&&await this[a196_0x4747('0x20')]['channels']['cache']['get'](_0x2a9b83[a196_0x4747('0x11')])['send']({'embed':{'color':constants[a196_0x4747('0x24')][a196_0x4747('0x39')],'author':{'name':_0x572dd8[a196_0x4747('0x12')],'url':a196_0x4747('0x2b')+_0x572dd8[a196_0x4747('0x12')]},'description':_0x572dd8[a196_0x4747('0x0')],'fields':[{'name':a196_0x4747('0x2f'),'value':_0x572dd8[a196_0x4747('0x1e')]['toString'](),'inline':!![]},{'name':a196_0x4747('0x34'),'value':_0x572dd8['language'][a196_0x4747('0x38')](),'inline':!![]}],'image':{'url':_0x572dd8[a196_0x4747('0x2e')][a196_0x4747('0x1')]('{width}',a196_0x4747('0x25'))['replace'](a196_0x4747('0x26'),a196_0x4747('0x29'))},'footer':{'text':a196_0x4747('0x1a')},'timestamp':_0x572dd8[a196_0x4747('0x1c')]}})['then'](()=>{_0x2a5880[a196_0x4747('0x35')](_0x572dd8['id']);})[a196_0x4747('0xb')](()=>{});}this[a196_0x4747('0x2')][a196_0x4747('0x1f')](_0x3b7e89,_0x2a5880);},this[a196_0x4747('0x23')]=async()=>{try{if(!this[a196_0x4747('0x20')]['guilds'][a196_0x4747('0x1d')][a196_0x4747('0xa')])return;const _0x4e0533=await Guild_1[a196_0x4747('0xf')][a196_0x4747('0x3d')]({'$or':this[a196_0x4747('0x20')][a196_0x4747('0x16')][a196_0x4747('0x1d')][a196_0x4747('0x3c')](_0xf75e8e=>({'_id':_0xf75e8e['id']})),'streamers':{'$exists':!![]}});for(const _0x409550 of _0x4e0533){_0x409550[a196_0x4747('0x14')]['twitch']&&_0x409550[a196_0x4747('0x14')]['twitch'][a196_0x4747('0x11')]&&_0x409550[a196_0x4747('0x14')][a196_0x4747('0x8')][a196_0x4747('0xe')][a196_0x4747('0x3b')]&&this[a196_0x4747('0x22')](_0x409550[a196_0x4747('0x37')],_0x409550[a196_0x4747('0x14')]['twitch'])[a196_0x4747('0xb')](_0x56df7e=>tesseract_1[a196_0x4747('0xc')][a196_0x4747('0x15')](_0x56df7e));}}catch(_0x154cd2){tesseract_1['Logger']['error'](_0x154cd2);}},this['twitchSubscriptions']=new Map();}};
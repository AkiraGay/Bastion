const a194_0x43d4=['length','language','join','set','twitch','return\x20/\x22\x20+\x20this\x20+\x20\x22/','users','0\x20*/5\x20*\x20*\x20*\x20*','title','&user_login=','channels','data','get','{height}','twitchSubscriptions','user_name','channelId','handleTwitchStreamers','ðŸ”´\x20LIVE','guilds','https://twitch.tv/','application/json','includes','1280','thumbnail_url','has','streamers','node-fetch','send','Scheduler','@bastion/tesseract','viewer_count','client','compile','default','apply','toString','replace','find','accessToken','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','../models/Guild','exec','credentials','started_at','../utils/constants','liveStreams','test','json','_id','map','cache'];(function(_0x3302e5,_0x43d410){const _0x1cca05=function(_0x877ee9){while(--_0x877ee9){_0x3302e5['push'](_0x3302e5['shift']());}};const _0x1de9d7=function(){const _0x4197fe={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0xf42329,_0x2a1f85,_0x3ea859,_0x2cf991){_0x2cf991=_0x2cf991||{};let _0x603d44=_0x2a1f85+'='+_0x3ea859;let _0x38285b=0x0;for(let _0x2711d6=0x0,_0x26bea9=_0xf42329['length'];_0x2711d6<_0x26bea9;_0x2711d6++){const _0x48ccec=_0xf42329[_0x2711d6];_0x603d44+=';\x20'+_0x48ccec;const _0x3d5500=_0xf42329[_0x48ccec];_0xf42329['push'](_0x3d5500);_0x26bea9=_0xf42329['length'];if(_0x3d5500!==!![]){_0x603d44+='='+_0x3d5500;}}_0x2cf991['cookie']=_0x603d44;},'removeCookie':function(){return'dev';},'getCookie':function(_0xe65f8e,_0x258c8b){_0xe65f8e=_0xe65f8e||function(_0x4795c4){return _0x4795c4;};const _0x24b7f2=_0xe65f8e(new RegExp('(?:^|;\x20)'+_0x258c8b['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x45bb90=function(_0x5f0f63,_0x2e5d48){_0x5f0f63(++_0x2e5d48);};_0x45bb90(_0x1cca05,_0x43d410);return _0x24b7f2?decodeURIComponent(_0x24b7f2[0x1]):undefined;}};const _0x226b3d=function(){const _0x27e406=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x27e406['test'](_0x4197fe['removeCookie']['toString']());};_0x4197fe['updateCookie']=_0x226b3d;let _0x1a07d1='';const _0x5b7ba3=_0x4197fe['updateCookie']();if(!_0x5b7ba3){_0x4197fe['setCookie'](['*'],'counter',0x1);}else if(_0x5b7ba3){_0x1a07d1=_0x4197fe['getCookie'](null,'counter');}else{_0x4197fe['removeCookie']();}};_0x1de9d7();}(a194_0x43d4,0x13a));const a194_0x1cca=function(_0x3302e5,_0x43d410){_0x3302e5=_0x3302e5-0x0;let _0x1cca05=a194_0x43d4[_0x3302e5];return _0x1cca05;};const a194_0x4197fe=function(){let _0x1aca8d=!![];return function(_0x2c780a,_0x377a1d){const _0x37174c=_0x1aca8d?function(){if(_0x377a1d){const _0x44ae29=_0x377a1d[a194_0x1cca('0x21')](_0x2c780a,arguments);_0x377a1d=null;return _0x44ae29;}}:function(){};_0x1aca8d=![];return _0x37174c;};}();const a194_0x877ee9=a194_0x4197fe(this,function(){const _0x3130b8=function(){const _0x2e65ff=_0x3130b8['constructor'](a194_0x1cca('0x3'))()[a194_0x1cca('0x1f')](a194_0x1cca('0x26'));return!_0x2e65ff[a194_0x1cca('0x2d')](a194_0x877ee9);};return _0x3130b8();});a194_0x877ee9();'use strict';const tesseract_1=require(a194_0x1cca('0x1c'));const node_fetch_1=require(a194_0x1cca('0x19'));const Guild_1=require(a194_0x1cca('0x27'));const constants=require(a194_0x1cca('0x2b'));module['exports']=class LiveStreams extends tesseract_1[a194_0x1cca('0x1b')]{constructor(){super(a194_0x1cca('0x2c'),{'cronTime':a194_0x1cca('0x5')});this[a194_0x1cca('0xf')]=async(_0x4c356f,_0xddbb29)=>{if(!this[a194_0x1cca('0x1e')]['readyTimestamp'])return;if(!this['twitchSubscriptions'][a194_0x1cca('0x17')](_0x4c356f))this[a194_0x1cca('0xc')][a194_0x1cca('0x1')](_0x4c356f,[]);const _0x1a4faa=this[a194_0x1cca('0xc')]['get'](_0x4c356f);const _0x490c25=await node_fetch_1[a194_0x1cca('0x20')]('https://api.twitch.tv/helix/streams/?user_login='+_0xddbb29[a194_0x1cca('0x4')][a194_0x1cca('0x0')](a194_0x1cca('0x7')),{'headers':{'Accept':a194_0x1cca('0x13'),'Authorization':'Bearer\x20'+this[a194_0x1cca('0x1e')][a194_0x1cca('0x29')][a194_0x1cca('0x2')][a194_0x1cca('0x25')],'Client-ID':this[a194_0x1cca('0x1e')][a194_0x1cca('0x29')]['twitch']['clientId']}});const _0x51a2f1=(await _0x490c25[a194_0x1cca('0x2e')]())[a194_0x1cca('0x9')];for(const _0x2983aa of _0x51a2f1){if(_0x1a4faa[a194_0x1cca('0x14')](_0x2983aa['id']))continue;if(this[a194_0x1cca('0x1e')][a194_0x1cca('0x8')][a194_0x1cca('0x31')][a194_0x1cca('0x17')](_0xddbb29[a194_0x1cca('0xe')])){await this['client'][a194_0x1cca('0x8')][a194_0x1cca('0x31')][a194_0x1cca('0xa')](_0xddbb29[a194_0x1cca('0xe')])[a194_0x1cca('0x1a')]({'embed':{'color':constants['COLORS']['TWITCH'],'author':{'name':_0x2983aa[a194_0x1cca('0xd')],'url':a194_0x1cca('0x12')+_0x2983aa['user_name']},'description':_0x2983aa[a194_0x1cca('0x6')],'fields':[{'name':'Viewers','value':_0x2983aa[a194_0x1cca('0x1d')][a194_0x1cca('0x22')](),'inline':!![]},{'name':'Language','value':_0x2983aa[a194_0x1cca('0x33')]['toUpperCase'](),'inline':!![]}],'image':{'url':_0x2983aa[a194_0x1cca('0x16')][a194_0x1cca('0x23')]('{width}',a194_0x1cca('0x15'))[a194_0x1cca('0x23')](a194_0x1cca('0xb'),'720')},'footer':{'text':a194_0x1cca('0x10')},'timestamp':_0x2983aa[a194_0x1cca('0x2a')]}})['then'](()=>{_0x1a4faa['push'](_0x2983aa['id']);})['catch'](()=>{});}}this[a194_0x1cca('0xc')][a194_0x1cca('0x1')](_0x4c356f,_0x1a4faa);};this[a194_0x1cca('0x28')]=async()=>{if(!this['client']['guilds'][a194_0x1cca('0x31')]['size'])return;const _0x5c2b90=await Guild_1['default'][a194_0x1cca('0x24')]({'$or':this['client'][a194_0x1cca('0x11')][a194_0x1cca('0x31')][a194_0x1cca('0x30')](_0x36101a=>({'_id':_0x36101a['id']})),'streamers':{'$exists':!![]}});for(const _0x11fd17 of _0x5c2b90){if(_0x11fd17[a194_0x1cca('0x18')][a194_0x1cca('0x2')]&&_0x11fd17['streamers'][a194_0x1cca('0x2')][a194_0x1cca('0xe')]&&_0x11fd17[a194_0x1cca('0x18')][a194_0x1cca('0x2')][a194_0x1cca('0x4')][a194_0x1cca('0x32')]){this[a194_0x1cca('0xf')](_0x11fd17[a194_0x1cca('0x2f')],_0x11fd17[a194_0x1cca('0x18')][a194_0x1cca('0x2')]);}}};this[a194_0x1cca('0xc')]=new Map();}};
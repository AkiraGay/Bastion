const a216_0x3d2d=['application/json','exports','Language','apply','TWITCH','{height}','node-fetch','set','test','twitchSubscriptions','../utils/constants','constructor','length','error','thumbnail_url','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','ðŸ”´\x20LIVE','readyTimestamp','users','guilds','../models/Guild','1280','client','Scheduler','started_at','channels','{width}','catch','find','includes','Bearer\x20','has','size','default','user_name','toUpperCase','push','streamers','cache','channelId','720','send','Logger','twitch','liveStreams','credentials','then','handleTwitchStreamers','https://twitch.tv/','0\x20*/5\x20*\x20*\x20*\x20*','get','join'];(function(_0x276aac,_0x3d2d92){const _0x3d56cd=function(_0x5b0d7e){while(--_0x5b0d7e){_0x276aac['push'](_0x276aac['shift']());}},_0x2234de=function(){const _0x41ab24={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x191303,_0x17cf7d,_0x300ffc,_0x2c5219){_0x2c5219=_0x2c5219||{};let _0x18c2e0=_0x17cf7d+'='+_0x300ffc,_0x2ff9da=0x0;for(let _0x1c9d32=0x0,_0x3f507b=_0x191303['length'];_0x1c9d32<_0x3f507b;_0x1c9d32++){const _0x1d3782=_0x191303[_0x1c9d32];_0x18c2e0+=';\x20'+_0x1d3782;const _0x1db76d=_0x191303[_0x1d3782];_0x191303['push'](_0x1db76d),_0x3f507b=_0x191303['length'],_0x1db76d!==!![]&&(_0x18c2e0+='='+_0x1db76d);}_0x2c5219['cookie']=_0x18c2e0;},'removeCookie':function(){return'dev';},'getCookie':function(_0xbf2d33,_0x225f5e){_0xbf2d33=_0xbf2d33||function(_0x3aa631){return _0x3aa631;};const _0x56a3ff=_0xbf2d33(new RegExp('(?:^|;\x20)'+_0x225f5e['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x47770c=function(_0x1a90a1,_0x18466b){_0x1a90a1(++_0x18466b);};return _0x47770c(_0x3d56cd,_0x3d2d92),_0x56a3ff?decodeURIComponent(_0x56a3ff[0x1]):undefined;}},_0x64521f=function(){const _0x571cea=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x571cea['test'](_0x41ab24['removeCookie']['toString']());};_0x41ab24['updateCookie']=_0x64521f;let _0xb0af22='';const _0x30ff00=_0x41ab24['updateCookie']();if(!_0x30ff00)_0x41ab24['setCookie'](['*'],'counter',0x1);else _0x30ff00?_0xb0af22=_0x41ab24['getCookie'](null,'counter'):_0x41ab24['removeCookie']();};_0x2234de();}(a216_0x3d2d,0x1aa));const a216_0x3d56=function(_0x276aac,_0x3d2d92){_0x276aac=_0x276aac-0x0;let _0x3d56cd=a216_0x3d2d[_0x276aac];return _0x3d56cd;};const _0x433f0b=a216_0x3d56,a216_0x41ab24=function(){let _0xb0af22=!![];return function(_0x30ff00,_0x191303){const _0x17cf7d=_0xb0af22?function(){const _0x48db95=a216_0x3d56;if(_0x191303){const _0x300ffc=_0x191303[_0x48db95('0x2d')](_0x30ff00,arguments);return _0x191303=null,_0x300ffc;}}:function(){};return _0xb0af22=![],_0x17cf7d;};}(),a216_0x5b0d7e=a216_0x41ab24(this,function(){const _0x2c5219=function(){const _0x14c9a1=a216_0x3d56,_0x18c2e0=_0x2c5219[_0x14c9a1('0x1')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[_0x14c9a1('0x1')](_0x14c9a1('0x5'));return!_0x18c2e0[_0x14c9a1('0x32')](a216_0x5b0d7e);};return _0x2c5219();});a216_0x5b0d7e();'use strict';const tesseract_1=require('@bastion/tesseract'),node_fetch_1=require(_0x433f0b('0x30')),Guild_1=require(_0x433f0b('0xa')),constants=require(_0x433f0b('0x0'));module[_0x433f0b('0x2b')]=class LiveStreams extends tesseract_1[_0x433f0b('0xd')]{constructor(){const _0x3536a2=_0x433f0b;super(_0x3536a2('0x22'),{'cronTime':_0x3536a2('0x27')}),this[_0x3536a2('0x25')]=async(_0x2ff9da,_0x1c9d32)=>{const _0x509702=_0x3536a2;if(!this[_0x509702('0xc')][_0x509702('0x7')])return;if(!this[_0x509702('0x33')][_0x509702('0x15')](_0x2ff9da))this[_0x509702('0x33')][_0x509702('0x31')](_0x2ff9da,[]);const _0x3f507b=this['twitchSubscriptions']['get'](_0x2ff9da),_0x1d3782=await node_fetch_1[_0x509702('0x17')]('https://api.twitch.tv/helix/streams/?user_login='+_0x1c9d32[_0x509702('0x8')][_0x509702('0x29')]('&user_login='),{'headers':{'Accept':_0x509702('0x2a'),'Authorization':_0x509702('0x14')+this['client'][_0x509702('0x23')][_0x509702('0x21')]['accessToken'],'Client-ID':this[_0x509702('0xc')]['credentials'][_0x509702('0x21')]['clientId']}}),_0x1db76d=(await _0x1d3782['json']())['data'];for(const _0xbf2d33 of _0x1db76d){if(_0x3f507b[_0x509702('0x13')](_0xbf2d33['id']))continue;this[_0x509702('0xc')]['channels'][_0x509702('0x1c')][_0x509702('0x15')](_0x1c9d32['channelId'])&&await this[_0x509702('0xc')][_0x509702('0xf')][_0x509702('0x1c')][_0x509702('0x28')](_0x1c9d32['channelId'])[_0x509702('0x1f')]({'embed':{'color':constants['COLORS'][_0x509702('0x2e')],'author':{'name':_0xbf2d33['user_name'],'url':_0x509702('0x26')+_0xbf2d33[_0x509702('0x18')]},'description':_0xbf2d33['title'],'fields':[{'name':'Viewers','value':_0xbf2d33['viewer_count']['toString'](),'inline':!![]},{'name':_0x509702('0x2c'),'value':_0xbf2d33['language'][_0x509702('0x19')](),'inline':!![]}],'image':{'url':_0xbf2d33[_0x509702('0x4')]['replace'](_0x509702('0x10'),_0x509702('0xb'))['replace'](_0x509702('0x2f'),_0x509702('0x1e'))},'footer':{'text':_0x509702('0x6')},'timestamp':_0xbf2d33[_0x509702('0xe')]}})[_0x509702('0x24')](()=>{const _0x40a952=_0x509702;_0x3f507b[_0x40a952('0x1a')](_0xbf2d33['id']);})[_0x509702('0x11')](()=>{});}this[_0x509702('0x33')][_0x509702('0x31')](_0x2ff9da,_0x3f507b);},this['exec']=async()=>{const _0x339c0a=_0x3536a2;try{if(!this['client'][_0x339c0a('0x9')][_0x339c0a('0x1c')][_0x339c0a('0x16')])return;const _0x225f5e=await Guild_1[_0x339c0a('0x17')][_0x339c0a('0x12')]({'$or':this['client'][_0x339c0a('0x9')]['cache']['map'](_0x56a3ff=>({'_id':_0x56a3ff['id']})),'streamers':{'$exists':!![]}});for(const _0x47770c of _0x225f5e){_0x47770c['streamers'][_0x339c0a('0x21')]&&_0x47770c[_0x339c0a('0x1b')][_0x339c0a('0x21')][_0x339c0a('0x1d')]&&_0x47770c[_0x339c0a('0x1b')][_0x339c0a('0x21')][_0x339c0a('0x8')][_0x339c0a('0x2')]&&this[_0x339c0a('0x25')](_0x47770c['_id'],_0x47770c[_0x339c0a('0x1b')][_0x339c0a('0x21')])['catch'](_0x3aa631=>tesseract_1['Logger'][_0x339c0a('0x3')](_0x3aa631));}}catch(_0x1a90a1){tesseract_1[_0x339c0a('0x20')]['error'](_0x1a90a1);}},this[_0x3536a2('0x33')]=new Map();}};
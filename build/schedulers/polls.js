const a415_0x3132=['timeout','0x1a','0x1d','0x17','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','0x16','compile','0x5','map','size','Scheduler','deleteMany','then','exec','edit','\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}','embeds','0x11','updateCookie','0x21','reactions','return\x20/\x22\x20+\x20this\x20+\x20\x22/','POLL\x20ENDED','0xf','0x15','0x2a','has','0x9','0x1e','0x22','0x1f','0x12','test','default','polls','channels','use\x20strict','users','0x4','length','\x20/\x20','client','readyTimestamp','0x29','exports','0x2d','constructor','0x10','0x20','dev','0x14','0xd','0x18','replace','0x2c','0x28','Constants','0x6','counter','bot','(?:^|;\x20)','guilds','0x2','filter','name','SOMEWHAT_DARK','apply','0x13','channel','getCookie','value','cache','guild','toString','0x1c','find','COLORS','removeCookie','push','cookie','0x25','get','0x1b','@bastion/tesseract','fields','0x23','catch','0x1','=([^;]*)','0x7'];(function(_0x251290,_0x313297){const _0x5755cb=function(_0x49a637){while(--_0x49a637){_0x251290['push'](_0x251290['shift']());}};const _0x1b5add=function(){const _0x1c4b8e={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2f0f37,_0x5e4ca0,_0x18ea84,_0xd1d972){_0xd1d972=_0xd1d972||{};let _0x4244af=_0x5e4ca0+'='+_0x18ea84;let _0xea8b31=0x0;for(let _0x100279=0x0,_0x2fd6a2=_0x2f0f37['length'];_0x100279<_0x2fd6a2;_0x100279++){const _0x37a29c=_0x2f0f37[_0x100279];_0x4244af+=';\x20'+_0x37a29c;const _0x306c35=_0x2f0f37[_0x37a29c];_0x2f0f37['push'](_0x306c35);_0x2fd6a2=_0x2f0f37['length'];if(_0x306c35!==!![]){_0x4244af+='='+_0x306c35;}}_0xd1d972['cookie']=_0x4244af;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4fa4a4,_0x9a9ef2){_0x4fa4a4=_0x4fa4a4||function(_0x172de6){return _0x172de6;};const _0x3b4d8a=_0x4fa4a4(new RegExp('(?:^|;\x20)'+_0x9a9ef2['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x3fc67f=function(_0x58944c,_0x182c5d){_0x58944c(++_0x182c5d);};_0x3fc67f(_0x5755cb,_0x313297);return _0x3b4d8a?decodeURIComponent(_0x3b4d8a[0x1]):undefined;}};const _0x1921b8=function(){const _0x1d9ab6=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x1d9ab6['test'](_0x1c4b8e['removeCookie']['toString']());};_0x1c4b8e['updateCookie']=_0x1921b8;let _0x576b99='';const _0x30f0a8=_0x1c4b8e['updateCookie']();if(!_0x30f0a8){_0x1c4b8e['setCookie'](['*'],'counter',0x1);}else if(_0x30f0a8){_0x576b99=_0x1c4b8e['getCookie'](null,'counter');}else{_0x1c4b8e['removeCookie']();}};_0x1b5add();}(a415_0x3132,0x6d));const a415_0x5755=function(_0x251290,_0x313297){_0x251290=_0x251290-0x0;let _0x5755cb=a415_0x3132[_0x251290];return _0x5755cb;};const a414_0x3e04=['Ended',a415_0x5755('0x14'),a415_0x5755('0x3b'),'0\x20*/15\x20*\x20*\x20*\x20*',a415_0x5755('0x51'),a415_0x5755('0x4f'),a415_0x5755('0x53'),a415_0x5755('0x41'),a415_0x5755('0x4d'),a415_0x5755('0x3'),a415_0x5755('0x2d'),a415_0x5755('0x2f'),'title',a415_0x5755('0x15'),a415_0x5755('0x17'),a415_0x5755('0x28'),a415_0x5755('0x55'),'_id',a415_0x5755('0xd'),a415_0x5755('0x43'),a415_0x5755('0x10'),a415_0x5755('0x16'),'get',a415_0x5755('0x25'),a415_0x5755('0x1'),a415_0x5755('0x7'),a415_0x5755('0x57'),a415_0x5755('0x54'),a415_0x5755('0x38'),a415_0x5755('0x34'),a415_0x5755('0x40'),'value',a415_0x5755('0x50'),a415_0x5755('0x4b'),a415_0x5755('0xe'),'\x20votes\x20(','../models/Poll',a415_0x5755('0x35'),a415_0x5755('0x2c'),'messages',a415_0x5755('0x39'),a415_0x5755('0x2'),a415_0x5755('0x12'),a415_0x5755('0x31'),a415_0x5755('0x2a'),a415_0x5755('0xf')];(function(_0x5830e7,_0x33fc60){const _0x46f474=function(_0x5a4442){while(--_0x5a4442){_0x5830e7[a415_0x5755('0x3b')](_0x5830e7['shift']());}};const _0x512415=function(){const _0x121ab5={'data':{'key':a415_0x5755('0x3c'),'value':a415_0x5755('0x47')},'setCookie':function(_0x59c0c7,_0x26d8dc,_0x339cff,_0x37ec5e){_0x37ec5e=_0x37ec5e||{};let _0x5418fd=_0x26d8dc+'='+_0x339cff;let _0x3616df=0x0;for(let _0x3d4f22=0x0,_0x4183a7=_0x59c0c7[a415_0x5755('0x14')];_0x3d4f22<_0x4183a7;_0x3d4f22++){const _0x562353=_0x59c0c7[_0x3d4f22];_0x5418fd+=';\x20'+_0x562353;const _0x3ba008=_0x59c0c7[_0x562353];_0x59c0c7['push'](_0x3ba008);_0x4183a7=_0x59c0c7['length'];if(_0x3ba008!==!![]){_0x5418fd+='='+_0x3ba008;}}_0x37ec5e[a415_0x5755('0x3c')]=_0x5418fd;},'removeCookie':function(){return a415_0x5755('0x1e');},'getCookie':function(_0x52c8c6,_0x155629){_0x52c8c6=_0x52c8c6||function(_0x13ee40){return _0x13ee40;};const _0x3c222e=_0x52c8c6(new RegExp(a415_0x5755('0x29')+_0x155629[a415_0x5755('0x22')](/([.$?*|{}()[]\/+^])/g,'$1')+a415_0x5755('0x45')));const _0xaee4b1=function(_0x3d1a4e,_0x3f322d){_0x3d1a4e(++_0x3f322d);};_0xaee4b1(_0x46f474,_0x33fc60);return _0x3c222e?decodeURIComponent(_0x3c222e[0x1]):undefined;}};const _0x36a814=function(){const _0x20e518=new RegExp(a415_0x5755('0x56'));return _0x20e518['test'](_0x121ab5[a415_0x5755('0x3a')][a415_0x5755('0x36')]());};_0x121ab5['updateCookie']=_0x36a814;let _0x77dae6='';const _0x42a511=_0x121ab5[a415_0x5755('0x59')]();if(!_0x42a511){_0x121ab5['setCookie'](['*'],a415_0x5755('0x27'),0x1);}else if(_0x42a511){_0x77dae6=_0x121ab5[a415_0x5755('0x32')](null,a415_0x5755('0x27'));}else{_0x121ab5[a415_0x5755('0x3a')]();}};_0x512415();}(a414_0x3e04,0x13a));const a414_0xb23f=function(_0x2ce039,_0x260c86){_0x2ce039=_0x2ce039-0x0;let _0x276202=a414_0x3e04[_0x2ce039];return _0x276202;};const a414_0x418f88=function(){const _0x26522f=function(){let _0x57d54f=!![];return function(_0x4cc96d,_0x496b84){const _0x5d9408=_0x57d54f?function(){if(_0x496b84){const _0x349ce5=_0x496b84['apply'](_0x4cc96d,arguments);_0x496b84=null;return _0x349ce5;}}:function(){};_0x57d54f=![];return _0x5d9408;};}();const _0x5f1d72=_0x26522f(this,function(){const _0x32dd98=function(){const _0x20f338=_0x32dd98['constructor'](a415_0x5755('0x2'))()[a415_0x5755('0x4d')](a415_0x5755('0x4b'));return!_0x20f338[a415_0x5755('0xd')](_0x5f1d72);};return _0x32dd98();});_0x5f1d72();let _0x3c9a5b=!![];return function(_0x3da764,_0x38f6d6){const _0x9f6b4e=_0x3c9a5b?function(){if(_0x38f6d6){const _0x315a0c=_0x38f6d6[a414_0xb23f(a415_0x5755('0x30'))](_0x3da764,arguments);_0x38f6d6=null;return _0x315a0c;}}:function(){};_0x3c9a5b=![];return _0x9f6b4e;};}();const a414_0xc1ce13=a414_0x418f88(this,function(){const _0x514a7d=function(){const _0x4de34c=_0x514a7d[a415_0x5755('0x1b')](a414_0xb23f('0x3'))()[a414_0xb23f(a415_0x5755('0x1c'))](a414_0xb23f(a415_0x5755('0x18')));return!_0x4de34c[a414_0xb23f(a415_0x5755('0x48'))](a414_0xc1ce13);};return _0x514a7d();});a414_0xc1ce13();a415_0x5755('0x11');const tesseract_1=require(a414_0xb23f('0x26'));const Poll_1=require(a414_0xb23f(a415_0x5755('0x23')));module[a415_0x5755('0x19')]=class PollScheduler extends tesseract_1[a414_0xb23f('0xc')]{constructor(){super(a414_0xb23f(a415_0x5755('0x46')),{'cronTime':a414_0xb23f('0xb')});this[a414_0xb23f(a415_0x5755('0x42'))]=async()=>{if(!this[a414_0xb23f('0x1d')][a414_0xb23f(a415_0x5755('0x4c'))])return;if(!this[a414_0xb23f(a415_0x5755('0x49'))][a415_0x5755('0x2a')][a415_0x5755('0x34')][a414_0xb23f(a415_0x5755('0x24'))])return;const _0x11d50c=await Poll_1['default'][a414_0xb23f('0x24')]({'$or':this[a414_0xb23f(a415_0x5755('0x49'))][a414_0xb23f(a415_0x5755('0x26'))][a414_0xb23f(a415_0x5755('0x3d'))][a415_0x5755('0x4f')](_0xfee4bb=>({'guild':_0xfee4bb['id']})),'ends':{'$lte':new Date()}});const _0xdca443=[];for(const _0x32cddd of _0x11d50c){const _0x19431d=this[a414_0xb23f(a415_0x5755('0x49'))][a414_0xb23f('0x6')]['cache'][a414_0xb23f('0x1e')](_0x32cddd[a414_0xb23f(a415_0x5755('0x1a'))]);if(_0x19431d[a414_0xb23f(a415_0x5755('0x37'))][a414_0xb23f(a415_0x5755('0x3d'))][a414_0xb23f(a415_0x5755('0x0'))](_0x32cddd[a414_0xb23f(a415_0x5755('0x4e'))])){const _0x803ae9=_0x19431d[a415_0x5755('0x10')][a415_0x5755('0x34')][a414_0xb23f('0x1e')](_0x32cddd[a415_0x5755('0x31')]);const _0x5ad0af=await _0x803ae9[a414_0xb23f(a415_0x5755('0x44'))]['fetch'](_0x32cddd[a414_0xb23f('0x19')])[a414_0xb23f(a415_0x5755('0x3f'))](()=>{});if(!_0x5ad0af)continue;const _0x5a67bc=_0x5ad0af[a414_0xb23f(a415_0x5755('0xa'))][0x0]['fields'][a414_0xb23f(a415_0x5755('0x20'))](_0x1db7dd=>_0x1db7dd[a415_0x5755('0x33')]);const _0x4cdff9=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'];const _0x3374b3={};let _0x574dfd=0x0;for(const _0x557c1a in _0x4cdff9['slice'](0x0,_0x5a67bc[a414_0xb23f(a415_0x5755('0x8'))])){if(_0x5ad0af[a414_0xb23f(a415_0x5755('0x1d'))][a414_0xb23f(a415_0x5755('0x3d'))][a414_0xb23f(a415_0x5755('0x0'))](_0x4cdff9[_0x557c1a])){await _0x5ad0af[a414_0xb23f('0x20')][a414_0xb23f(a415_0x5755('0x3d'))][a414_0xb23f(a415_0x5755('0x9'))](_0x4cdff9[_0x557c1a])[a414_0xb23f('0x4')]['fetch']()[a414_0xb23f(a415_0x5755('0x3f'))](()=>{});const _0x2cf729=_0x5ad0af[a414_0xb23f(a415_0x5755('0x1d'))][a414_0xb23f('0x25')][a415_0x5755('0x3e')](_0x4cdff9[_0x557c1a])[a414_0xb23f(a415_0x5755('0x13'))][a414_0xb23f(a415_0x5755('0x3d'))][a414_0xb23f('0x0')](_0x1a42b0=>!_0x1a42b0[a414_0xb23f(a415_0x5755('0x4a'))])[a414_0xb23f(a415_0x5755('0x24'))];_0x3374b3[_0x4cdff9[_0x557c1a]]=_0x2cf729;_0x574dfd+=_0x2cf729;}}await _0x5ad0af[a414_0xb23f(a415_0x5755('0x21'))]({'embed':{'color':tesseract_1[a414_0xb23f(a415_0x5755('0xb'))][a414_0xb23f(a415_0x5755('0x2b'))][a415_0x5755('0x2e')],'author':{'name':a414_0xb23f(a415_0x5755('0x58'))},'title':_0x5ad0af[a414_0xb23f(a415_0x5755('0xa'))][0x0][a414_0xb23f(a415_0x5755('0x1f'))],'fields':_0x5ad0af[a414_0xb23f('0x22')][0x0][a414_0xb23f(a415_0x5755('0x4'))][a414_0xb23f(a415_0x5755('0x20'))](_0x3a2a9a=>({'name':_0x3a2a9a[a414_0xb23f('0x12')]+'\x20'+_0x3a2a9a[a414_0xb23f('0x27')],'value':(_0x3374b3[_0x3a2a9a[a415_0x5755('0x2d')]]||0x0)+a414_0xb23f(a415_0x5755('0x5'))+_0x574dfd+a414_0xb23f('0x2b')+(_0x3374b3[_0x3a2a9a[a414_0xb23f(a415_0x5755('0xc'))]]?_0x3374b3[_0x3a2a9a['name']]/_0x574dfd*0x64:0x0)['toFixed'](0x2)+'%)'})),'footer':{'text':a414_0xb23f('0x8')},'timestamp':new Date()}})[a414_0xb23f('0xe')](()=>{_0xdca443[a414_0xb23f('0xa')](_0x5ad0af['id']);})[a415_0x5755('0x43')](()=>{});}}if(_0xdca443[a415_0x5755('0x14')]){await Poll_1[a414_0xb23f(a415_0x5755('0x6'))][a415_0x5755('0x52')]({'$or':_0xdca443[a414_0xb23f('0xd')](_0x495bff=>({'_id':_0x495bff}))})[a414_0xb23f(a415_0x5755('0x3f'))](()=>{});}};}};
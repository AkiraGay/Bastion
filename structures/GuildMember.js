const a197_0x1e9d=['Constants','catch','ownerID','comparePositionTo','save','roleId','addInfraction','constructor','document','balance','info','name','Ban','ORANGE','client','roles','isMusicMaster','send','kick','Kick','create','has','error','getDocument','memberInfractions','MIN_SAFE_INTEGER','music','guild','infractions','return\x20/\x22\x20+\x20this\x20+\x20\x22/','bannable','cache','kickable','ban','banThreshold','../models/Member','default','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','@bastion/tesseract','COLORS','locale','isOwner','compile','../utils/numbers','MAX_SAFE_INTEGER','abs','user','discord.js','push','clamp','GuildMember','highest','length','\x20infractions.','Logger','getString','credit','exports'];(function(_0x3e9ff0,_0x1e9d4b){const _0x382f6d=function(_0xe47114){while(--_0xe47114){_0x3e9ff0['push'](_0x3e9ff0['shift']());}};const _0x3bdd74=function(){const _0x3d4731={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x1d6847,_0x46a021,_0x418f4a,_0x51566c){_0x51566c=_0x51566c||{};let _0x3b79d6=_0x46a021+'='+_0x418f4a;let _0x373101=0x0;for(let _0x312064=0x0,_0x598e7a=_0x1d6847['length'];_0x312064<_0x598e7a;_0x312064++){const _0x3bd905=_0x1d6847[_0x312064];_0x3b79d6+=';\x20'+_0x3bd905;const _0x36f721=_0x1d6847[_0x3bd905];_0x1d6847['push'](_0x36f721);_0x598e7a=_0x1d6847['length'];if(_0x36f721!==!![]){_0x3b79d6+='='+_0x36f721;}}_0x51566c['cookie']=_0x3b79d6;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3f481b,_0x493371){_0x3f481b=_0x3f481b||function(_0x2b76d7){return _0x2b76d7;};const _0x4b3668=_0x3f481b(new RegExp('(?:^|;\x20)'+_0x493371['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x4946ae=function(_0x38e9e9,_0x1f78ff){_0x38e9e9(++_0x1f78ff);};_0x4946ae(_0x382f6d,_0x1e9d4b);return _0x4b3668?decodeURIComponent(_0x4b3668[0x1]):undefined;}};const _0x107cb7=function(){const _0x3fde43=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3fde43['test'](_0x3d4731['removeCookie']['toString']());};_0x3d4731['updateCookie']=_0x107cb7;let _0x4a02af='';const _0x24a711=_0x3d4731['updateCookie']();if(!_0x24a711){_0x3d4731['setCookie'](['*'],'counter',0x1);}else if(_0x24a711){_0x4a02af=_0x3d4731['getCookie'](null,'counter');}else{_0x3d4731['removeCookie']();}};_0x3bdd74();}(a197_0x1e9d,0x16b));const a197_0x382f=function(_0x3e9ff0,_0x1e9d4b){_0x3e9ff0=_0x3e9ff0-0x0;let _0x382f6d=a197_0x1e9d[_0x3e9ff0];return _0x382f6d;};const a197_0x3d4731=function(){let _0x3c2e98=!![];return function(_0x4dcde8,_0x45f12f){const _0x27d8d0=_0x3c2e98?function(){if(_0x45f12f){const _0x620ecc=_0x45f12f['apply'](_0x4dcde8,arguments);_0x45f12f=null;return _0x620ecc;}}:function(){};_0x3c2e98=![];return _0x27d8d0;};}();const a197_0xe47114=a197_0x3d4731(this,function(){const _0x239f6c=function(){const _0x2eca8b=_0x239f6c[a197_0x382f('0x32')](a197_0x382f('0xe'))()[a197_0x382f('0x1b')](a197_0x382f('0x16'));return!_0x2eca8b['test'](a197_0xe47114);};return _0x239f6c();});a197_0xe47114();'use strict';const tesseract_1=require(a197_0x382f('0x17'));const discord_js_1=require(a197_0x382f('0x20'));const Member_1=require(a197_0x382f('0x14'));const Transaction_1=require('../models/Transaction');const numbers=require(a197_0x382f('0x1c'));module[a197_0x382f('0x2a')]=class BastionGuildMember extends discord_js_1[a197_0x382f('0x23')]{constructor(_0x392cb9,_0x1870bf,_0x397bc0){super(_0x392cb9,_0x1870bf,_0x397bc0);}['canManage'](_0x4483ba){if(this['id']===this['guild']['ownerID'])return!![];if(_0x4483ba['id']===this[a197_0x382f('0xc')][a197_0x382f('0x2d')])return![];if(this['id']===_0x4483ba['id'])return![];return this[a197_0x382f('0x0')][a197_0x382f('0x24')][a197_0x382f('0x2e')](_0x4483ba[a197_0x382f('0x0')][a197_0x382f('0x24')])>0x0;}async['getDocument'](){return await Member_1[a197_0x382f('0x15')]['findOne']({'user':this['id'],'guild':this['guild']['id']});}[a197_0x382f('0x1')](){if(this[a197_0x382f('0x1f')][a197_0x382f('0x1a')]())return!![];return this[a197_0x382f('0xc')][a197_0x382f('0x33')]['music']&&this[a197_0x382f('0xc')][a197_0x382f('0x33')][a197_0x382f('0xb')][a197_0x382f('0x30')]&&this[a197_0x382f('0x0')][a197_0x382f('0x10')][a197_0x382f('0x6')](this[a197_0x382f('0xc')][a197_0x382f('0x33')][a197_0x382f('0xb')]['roleId']);}async[a197_0x382f('0x31')](_0x17856a){const _0x313d77=await this[a197_0x382f('0x8')]();if(_0x313d77[a197_0x382f('0xd')]){_0x313d77[a197_0x382f('0xd')][a197_0x382f('0x21')](_0x17856a);}else{_0x313d77[a197_0x382f('0xd')]=[_0x17856a];}const _0x50d173=this['guild'][a197_0x382f('0x33')]?this[a197_0x382f('0xc')]['document']:await this['guild'][a197_0x382f('0x8')]();if(_0x50d173['infractions']){const _0x113814=_0x313d77[a197_0x382f('0xd')][a197_0x382f('0x25')];let _0x310d80;if(this[a197_0x382f('0x11')]&&_0x313d77[a197_0x382f('0xd')]['length']===_0x50d173[a197_0x382f('0xd')]['kickThreshold']){_0x310d80=a197_0x382f('0x4');await this[a197_0x382f('0x3')](_0x313d77[a197_0x382f('0xd')][a197_0x382f('0x25')]+a197_0x382f('0x26'));}if(this[a197_0x382f('0xf')]&&_0x313d77[a197_0x382f('0xd')]['length']===_0x50d173['infractions'][a197_0x382f('0x13')]){_0x310d80=a197_0x382f('0x37');await this[a197_0x382f('0x12')]({'reason':_0x313d77['infractions']['length']+'\x20infractions.'});_0x313d77[a197_0x382f('0xd')]=undefined;delete _0x313d77['infractions'];}if(_0x310d80){await this[a197_0x382f('0x2')]({'embed':{'color':tesseract_1[a197_0x382f('0x2b')][a197_0x382f('0x18')][a197_0x382f('0x38')],'description':this[a197_0x382f('0x39')][a197_0x382f('0x19')][a197_0x382f('0x28')](_0x50d173['language'],a197_0x382f('0x35'),a197_0x382f('0x9')+_0x310d80,this[a197_0x382f('0xc')][a197_0x382f('0x36')],_0x113814)}})['catch'](()=>{});}}return _0x313d77[a197_0x382f('0x2f')]();}async['clearInfractions'](){const _0x22d397=this[a197_0x382f('0x33')]?this[a197_0x382f('0x33')]:await this['getDocument']();_0x22d397[a197_0x382f('0xd')]=undefined;delete _0x22d397[a197_0x382f('0xd')];return _0x22d397[a197_0x382f('0x2f')]();}async[a197_0x382f('0x29')](_0x5724fe,_0x3cacdb,_0x174c26){_0x5724fe=Math[a197_0x382f('0x1e')](_0x5724fe);const _0xaa4b61=_0x174c26||await this['getDocument']();if(_0x5724fe){_0xaa4b61[a197_0x382f('0x34')]=numbers[a197_0x382f('0x22')](_0xaa4b61[a197_0x382f('0x34')]+_0x5724fe,Number[a197_0x382f('0x1d')]);if(!_0x174c26){await Transaction_1[a197_0x382f('0x15')][a197_0x382f('0x5')]({'guild':this[a197_0x382f('0xc')]['id'],'sender':this[a197_0x382f('0x39')]['user']['id'],'receiver':_0x174c26[a197_0x382f('0x1f')],'amount':_0x5724fe,'time':new Date(),'note':_0x3cacdb})[a197_0x382f('0x2c')](tesseract_1[a197_0x382f('0x27')][a197_0x382f('0x7')]);}}return _0x174c26?_0xaa4b61:_0xaa4b61[a197_0x382f('0x2f')]();}async['debit'](_0x1237d7,_0x20d878,_0x581417){_0x1237d7=Math['abs'](_0x1237d7);const _0x156b89=_0x581417||await this['getDocument']();if(_0x1237d7){_0x156b89[a197_0x382f('0x34')]=numbers['clamp'](_0x156b89[a197_0x382f('0x34')]-_0x1237d7,Number[a197_0x382f('0xa')]);if(!_0x581417){await Transaction_1[a197_0x382f('0x15')][a197_0x382f('0x5')]({'guild':this['guild']['id'],'sender':_0x581417[a197_0x382f('0x1f')],'receiver':this[a197_0x382f('0x39')]['user']['id'],'amount':_0x1237d7,'time':new Date(),'note':_0x20d878})[a197_0x382f('0x2c')](tesseract_1['Logger'][a197_0x382f('0x7')]);}}return _0x581417?_0x156b89:_0x156b89['save']();}};
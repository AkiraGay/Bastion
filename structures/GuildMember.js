const a228_0x3b77=['Kick','MAX_SAFE_INTEGER','ownerID','bannable','discord.js','isMusicMaster','infractionClear','abs','error','canManage','Logger','name','constructor','createModerationLog','default','getDocument','user','roleId','\x20/\x20','info','\x20infractions.','../models/Member','../models/Transaction','return\x20/\x22\x20+\x20this\x20+\x20\x22/','highest','infractionAdd','music','User','length','balance','kickThreshold','isOwner','ban','document','banThreshold','clamp','guild','test','send','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','memberInfractions','getString','MIN_SAFE_INTEGER','create','kickable','credit','client','locale','@bastion/tesseract','exports','kick','cache','Reason','infractions','debit','tag','save','roles','comparePositionTo','catch','addInfraction','apply','language','push'];(function(_0x5c6b3e,_0x520de7){const _0x3b7780=function(_0x11a484){while(--_0x11a484){_0x5c6b3e['push'](_0x5c6b3e['shift']());}},_0x1097d8=function(){const _0x337c67={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x502b3b,_0x2f1ae4,_0x4fce46,_0x4141cb){_0x4141cb=_0x4141cb||{};let _0x4ec5fb=_0x2f1ae4+'='+_0x4fce46,_0x4e4b19=0x0;for(let _0xba2c3=0x0,_0x440b4e=_0x502b3b['length'];_0xba2c3<_0x440b4e;_0xba2c3++){const _0x364c6e=_0x502b3b[_0xba2c3];_0x4ec5fb+=';\x20'+_0x364c6e;const _0x4f5f29=_0x502b3b[_0x364c6e];_0x502b3b['push'](_0x4f5f29),_0x440b4e=_0x502b3b['length'],_0x4f5f29!==!![]&&(_0x4ec5fb+='='+_0x4f5f29);}_0x4141cb['cookie']=_0x4ec5fb;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2d5644,_0x357666){_0x2d5644=_0x2d5644||function(_0x3fec60){return _0x3fec60;};const _0x3108ea=_0x2d5644(new RegExp('(?:^|;\x20)'+_0x357666['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x3d46af=function(_0x263a11,_0x591020){_0x263a11(++_0x591020);};return _0x3d46af(_0x3b7780,_0x520de7),_0x3108ea?decodeURIComponent(_0x3108ea[0x1]):undefined;}},_0x50e92b=function(){const _0x5dae71=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x5dae71['test'](_0x337c67['removeCookie']['toString']());};_0x337c67['updateCookie']=_0x50e92b;let _0x341afb='';const _0x209400=_0x337c67['updateCookie']();if(!_0x209400)_0x337c67['setCookie'](['*'],'counter',0x1);else _0x209400?_0x341afb=_0x337c67['getCookie'](null,'counter'):_0x337c67['removeCookie']();};_0x1097d8();}(a228_0x3b77,0xc9));const a228_0x1097=function(_0x5c6b3e,_0x520de7){_0x5c6b3e=_0x5c6b3e-0x6a;let _0x3b7780=a228_0x3b77[_0x5c6b3e];return _0x3b7780;};const a228_0x5bad98=a228_0x1097,a228_0x50e92b=function(){let _0x209400=!![];return function(_0x502b3b,_0x2f1ae4){const _0x4fce46=_0x209400?function(){const _0x45b64f=a228_0x1097;if(_0x2f1ae4){const _0x4141cb=_0x2f1ae4[_0x45b64f(0x9e)](_0x502b3b,arguments);return _0x2f1ae4=null,_0x4141cb;}}:function(){};return _0x209400=![],_0x4fce46;};}(),a228_0x337c67=a228_0x50e92b(this,function(){const _0x4ec5fb=function(){const _0x22bb5e=a228_0x1097,_0x4e4b19=_0x4ec5fb[_0x22bb5e(0x6d)](_0x22bb5e(0x78))()[_0x22bb5e(0x6d)](_0x22bb5e(0x88));return!_0x4e4b19[_0x22bb5e(0x86)](a228_0x337c67);};return _0x4ec5fb();});a228_0x337c67();'use strict';const tesseract_1=require(a228_0x5bad98(0x91)),discord_js_1=require(a228_0x5bad98(0xa5)),Member_1=require(a228_0x5bad98(0x76)),Transaction_1=require(a228_0x5bad98(0x77)),numbers=require('../utils/numbers');module[a228_0x5bad98(0x92)]=class BastionGuildMember extends discord_js_1['GuildMember']{constructor(_0xba2c3,_0x440b4e,_0x364c6e){super(_0xba2c3,_0x440b4e,_0x364c6e);}[a228_0x5bad98(0x6a)](_0x4f5f29){const _0x22f740=a228_0x5bad98;if(this['id']===this[_0x22f740(0x85)][_0x22f740(0xa3)])return!![];if(_0x4f5f29['id']===this[_0x22f740(0x85)][_0x22f740(0xa3)])return![];if(this['id']===_0x4f5f29['id'])return![];return this['roles'][_0x22f740(0x79)][_0x22f740(0x9b)](_0x4f5f29['roles']['highest'])>0x0;}async['getDocument'](){const _0x234639=a228_0x5bad98;return await Member_1[_0x234639(0x6f)]['findOne']({'user':this['id'],'guild':this[_0x234639(0x85)]['id']});}[a228_0x5bad98(0xa6)](){const _0x3b0f61=a228_0x5bad98;if(this[_0x3b0f61(0x71)][_0x3b0f61(0x80)]())return!![];return this[_0x3b0f61(0x85)][_0x3b0f61(0x82)]['music']&&this[_0x3b0f61(0x85)][_0x3b0f61(0x82)]['music']['roleId']&&this[_0x3b0f61(0x9a)][_0x3b0f61(0x94)]['has'](this['guild']['document'][_0x3b0f61(0x7b)][_0x3b0f61(0x72)]);}async[a228_0x5bad98(0x9d)](_0x2d5644){const _0x3757db=a228_0x5bad98;let _0x357666=await this['getDocument']();_0x357666?_0x357666[_0x3757db(0x96)]?_0x357666[_0x3757db(0x96)][_0x3757db(0xa0)](_0x2d5644):_0x357666[_0x3757db(0x96)]=[_0x2d5644]:_0x357666=await Member_1[_0x3757db(0x6f)][_0x3757db(0x8c)]({'user':this['id'],'guild':this[_0x3757db(0x85)]['id'],'infractions':[_0x2d5644]});const _0x3108ea=this[_0x3757db(0x85)]['document']?this['guild'][_0x3757db(0x82)]:await this[_0x3757db(0x85)][_0x3757db(0x70)]();if(_0x3108ea[_0x3757db(0x96)]){const _0x3d46af=_0x357666['infractions'][_0x3757db(0x7d)];let _0x3fec60;this[_0x3757db(0x8d)]&&_0x357666[_0x3757db(0x96)][_0x3757db(0x7d)]===_0x3108ea[_0x3757db(0x96)][_0x3757db(0x7f)]&&(_0x3fec60=_0x3757db(0xa1),await this[_0x3757db(0x93)](_0x357666[_0x3757db(0x96)][_0x3757db(0x7d)]+_0x3757db(0x75))),this[_0x3757db(0xa4)]&&_0x357666[_0x3757db(0x96)][_0x3757db(0x7d)]===_0x3108ea[_0x3757db(0x96)][_0x3757db(0x83)]&&(_0x3fec60='Ban',await this[_0x3757db(0x81)]({'reason':_0x357666[_0x3757db(0x96)][_0x3757db(0x7d)]+_0x3757db(0x75)}),_0x357666[_0x3757db(0x96)]=undefined,delete _0x357666[_0x3757db(0x96)]),_0x3fec60&&(this[_0x3757db(0x85)][_0x3757db(0x6e)]({'event':_0x3757db(0x7a),'fields':[{'name':'User','value':this[_0x3757db(0x71)][_0x3757db(0x98)]+_0x3757db(0x73)+this['id']},{'name':'Action','value':_0x3fec60},{'name':_0x3757db(0x95),'value':_0x2d5644}]})[_0x3757db(0x9c)](tesseract_1[_0x3757db(0x6b)][_0x3757db(0xa9)]),await this[_0x3757db(0x87)]({'embed':{'color':tesseract_1['Constants']['COLORS']['ORANGE'],'description':this[_0x3757db(0x8f)][_0x3757db(0x90)][_0x3757db(0x8a)](_0x3108ea[_0x3757db(0x9f)],_0x3757db(0x74),_0x3757db(0x89)+_0x3fec60,this[_0x3757db(0x85)][_0x3757db(0x6c)],_0x3d46af)}})[_0x3757db(0x9c)](()=>{}));}return _0x357666['save']();}async['clearInfractions'](_0x263a11){const _0x26180c=a228_0x5bad98,_0x591020=this[_0x26180c(0x82)]?this['document']:await this[_0x26180c(0x70)]();return _0x591020[_0x26180c(0x96)]=undefined,delete _0x591020['infractions'],this[_0x26180c(0x85)][_0x26180c(0x6e)]({'event':_0x26180c(0xa7),'fields':[{'name':_0x26180c(0x7c),'value':this[_0x26180c(0x71)]['tag']+_0x26180c(0x73)+this['id']},{'name':'Reason','value':_0x263a11}]})[_0x26180c(0x9c)](tesseract_1[_0x26180c(0x6b)][_0x26180c(0xa9)]),_0x591020[_0x26180c(0x99)]();}async[a228_0x5bad98(0x8e)](_0x5dae71,_0x343b58,_0x128936){const _0x4609b9=a228_0x5bad98;_0x5dae71=Math[_0x4609b9(0xa8)](_0x5dae71);const _0x55cf6b=_0x128936||await this['getDocument']();return _0x5dae71&&(_0x55cf6b['balance']=numbers['clamp'](_0x55cf6b[_0x4609b9(0x7e)]+_0x5dae71,Number['MAX_SAFE_INTEGER']),!_0x128936&&await Transaction_1[_0x4609b9(0x6f)][_0x4609b9(0x8c)]({'guild':this[_0x4609b9(0x85)]['id'],'sender':this[_0x4609b9(0x8f)]['user']['id'],'receiver':_0x55cf6b[_0x4609b9(0x71)],'amount':_0x5dae71,'time':new Date(),'note':_0x343b58})['catch'](tesseract_1['Logger'][_0x4609b9(0xa9)])),_0x128936?_0x55cf6b:_0x55cf6b['save']();}async[a228_0x5bad98(0x97)](_0x1bf613,_0x2427a3,_0x45173e){const _0x4cf77f=a228_0x5bad98;_0x1bf613=Math[_0x4cf77f(0xa8)](_0x1bf613);const _0x516f18=_0x45173e||await this['getDocument']();return _0x1bf613&&(_0x516f18[_0x4cf77f(0x7e)]=numbers[_0x4cf77f(0x84)](_0x516f18['balance']-_0x1bf613,Number[_0x4cf77f(0x8b)],Number[_0x4cf77f(0xa2)]),!_0x45173e&&await Transaction_1[_0x4cf77f(0x6f)]['create']({'guild':this[_0x4cf77f(0x85)]['id'],'sender':_0x516f18[_0x4cf77f(0x71)],'receiver':this[_0x4cf77f(0x8f)][_0x4cf77f(0x71)]['id'],'amount':_0x1bf613,'time':new Date(),'note':_0x2427a3})['catch'](tesseract_1[_0x4cf77f(0x6b)][_0x4cf77f(0xa9)])),_0x45173e?_0x516f18:_0x516f18[_0x4cf77f(0x99)]();}};
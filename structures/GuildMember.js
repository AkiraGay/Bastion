const a211_0x51b0=['Action','kickable','canManage','credit','roleId','\x20/\x20','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','clamp','has','bannable','isMusicMaster','ban','../models/Transaction','error','comparePositionTo','abs','@bastion/tesseract','discord.js','COLORS','tag','info','Constants','guild','return\x20/\x22\x20+\x20this\x20+\x20\x22/','GuildMember','default','send','infractions','Reason','getDocument','roles','highest','banThreshold','create','Logger','length','save','createModerationLog','User','language','getString','\x20infractions.','findOne','ORANGE','client','Kick','exports','music','balance','catch','constructor','document','infractionClear','kick','user','ownerID'];(function(_0x180ee9,_0x51b0ee){const _0x504525=function(_0x3ddf80){while(--_0x3ddf80){_0x180ee9['push'](_0x180ee9['shift']());}},_0x1826b3=function(){const _0x4a9009={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x44ca3c,_0x5b8da,_0x258278,_0x5c8786){_0x5c8786=_0x5c8786||{};let _0xe7af6=_0x5b8da+'='+_0x258278,_0x2e7401=0x0;for(let _0x10975e=0x0,_0x4d7799=_0x44ca3c['length'];_0x10975e<_0x4d7799;_0x10975e++){const _0x5c3474=_0x44ca3c[_0x10975e];_0xe7af6+=';\x20'+_0x5c3474;const _0x39e389=_0x44ca3c[_0x5c3474];_0x44ca3c['push'](_0x39e389),_0x4d7799=_0x44ca3c['length'],_0x39e389!==!![]&&(_0xe7af6+='='+_0x39e389);}_0x5c8786['cookie']=_0xe7af6;},'removeCookie':function(){return'dev';},'getCookie':function(_0x21177b,_0x187d70){_0x21177b=_0x21177b||function(_0x3366f7){return _0x3366f7;};const _0x5735fb=_0x21177b(new RegExp('(?:^|;\x20)'+_0x187d70['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x12d5fc=function(_0x5277b9,_0x4e3f49){_0x5277b9(++_0x4e3f49);};return _0x12d5fc(_0x504525,_0x51b0ee),_0x5735fb?decodeURIComponent(_0x5735fb[0x1]):undefined;}},_0x2f19a1=function(){const _0x334769=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x334769['test'](_0x4a9009['removeCookie']['toString']());};_0x4a9009['updateCookie']=_0x2f19a1;let _0x32cca5='';const _0x2e165e=_0x4a9009['updateCookie']();if(!_0x2e165e)_0x4a9009['setCookie'](['*'],'counter',0x1);else _0x2e165e?_0x32cca5=_0x4a9009['getCookie'](null,'counter'):_0x4a9009['removeCookie']();};_0x1826b3();}(a211_0x51b0,0xc9));const a211_0x5045=function(_0x180ee9,_0x51b0ee){_0x180ee9=_0x180ee9-0x0;let _0x504525=a211_0x51b0[_0x180ee9];return _0x504525;};const a211_0x4a9009=function(){let _0x32cca5=!![];return function(_0x2e165e,_0x44ca3c){const _0x5b8da=_0x32cca5?function(){if(_0x44ca3c){const _0x258278=_0x44ca3c['apply'](_0x2e165e,arguments);return _0x44ca3c=null,_0x258278;}}:function(){};return _0x32cca5=![],_0x5b8da;};}(),a211_0x3ddf80=a211_0x4a9009(this,function(){const _0x5c8786=function(){const _0xe7af6=_0x5c8786[a211_0x5045('0x11')](a211_0x5045('0x2e'))()['constructor'](a211_0x5045('0x1d'));return!_0xe7af6['test'](a211_0x3ddf80);};return _0x5c8786();});a211_0x3ddf80();'use strict';const tesseract_1=require(a211_0x5045('0x27')),discord_js_1=require(a211_0x5045('0x28')),Member_1=require('../models/Member'),Transaction_1=require(a211_0x5045('0x23')),numbers=require('../utils/numbers');module[a211_0x5045('0xd')]=class BastionGuildMember extends discord_js_1[a211_0x5045('0x2f')]{constructor(_0x2e7401,_0x10975e,_0x4d7799){super(_0x2e7401,_0x10975e,_0x4d7799);}[a211_0x5045('0x19')](_0x5c3474){if(this['id']===this[a211_0x5045('0x2d')][a211_0x5045('0x16')])return!![];if(_0x5c3474['id']===this[a211_0x5045('0x2d')][a211_0x5045('0x16')])return![];if(this['id']===_0x5c3474['id'])return![];return this[a211_0x5045('0x35')]['highest'][a211_0x5045('0x25')](_0x5c3474[a211_0x5045('0x35')][a211_0x5045('0x36')])>0x0;}async['getDocument'](){return await Member_1[a211_0x5045('0x30')][a211_0x5045('0x9')]({'user':this['id'],'guild':this['guild']['id']});}[a211_0x5045('0x21')](){if(this[a211_0x5045('0x15')]['isOwner']())return!![];return this[a211_0x5045('0x2d')]['document'][a211_0x5045('0xe')]&&this[a211_0x5045('0x2d')][a211_0x5045('0x12')][a211_0x5045('0xe')][a211_0x5045('0x1b')]&&this[a211_0x5045('0x35')]['cache'][a211_0x5045('0x1f')](this[a211_0x5045('0x2d')]['document'][a211_0x5045('0xe')][a211_0x5045('0x1b')]);}async['addInfraction'](_0x39e389){let _0x21177b=await this['getDocument']();_0x21177b?_0x21177b['infractions']?_0x21177b[a211_0x5045('0x32')]['push'](_0x39e389):_0x21177b['infractions']=[_0x39e389]:_0x21177b=await Member_1[a211_0x5045('0x30')]['create']({'user':this['id'],'guild':this[a211_0x5045('0x2d')]['id'],'infractions':[_0x39e389]});const _0x187d70=this[a211_0x5045('0x2d')]['document']?this[a211_0x5045('0x2d')]['document']:await this[a211_0x5045('0x2d')][a211_0x5045('0x34')]();if(_0x187d70['infractions']){const _0x5735fb=_0x21177b[a211_0x5045('0x32')][a211_0x5045('0x2')];let _0x12d5fc;this[a211_0x5045('0x18')]&&_0x21177b[a211_0x5045('0x32')][a211_0x5045('0x2')]===_0x187d70[a211_0x5045('0x32')]['kickThreshold']&&(_0x12d5fc=a211_0x5045('0xc'),await this[a211_0x5045('0x14')](_0x21177b[a211_0x5045('0x32')]['length']+a211_0x5045('0x8'))),this[a211_0x5045('0x20')]&&_0x21177b[a211_0x5045('0x32')][a211_0x5045('0x2')]===_0x187d70['infractions'][a211_0x5045('0x37')]&&(_0x12d5fc='Ban',await this[a211_0x5045('0x22')]({'reason':_0x21177b[a211_0x5045('0x32')][a211_0x5045('0x2')]+a211_0x5045('0x8')}),_0x21177b[a211_0x5045('0x32')]=undefined,delete _0x21177b[a211_0x5045('0x32')]),_0x12d5fc&&(this[a211_0x5045('0x2d')][a211_0x5045('0x4')]({'event':'infractionAdd','fields':[{'name':a211_0x5045('0x5'),'value':this[a211_0x5045('0x15')][a211_0x5045('0x2a')]+a211_0x5045('0x1c')+this['id']},{'name':a211_0x5045('0x17'),'value':_0x12d5fc},{'name':a211_0x5045('0x33'),'value':_0x39e389}]})[a211_0x5045('0x10')](tesseract_1[a211_0x5045('0x1')][a211_0x5045('0x24')]),await this[a211_0x5045('0x31')]({'embed':{'color':tesseract_1[a211_0x5045('0x2c')][a211_0x5045('0x29')][a211_0x5045('0xa')],'description':this[a211_0x5045('0xb')]['locale'][a211_0x5045('0x7')](_0x187d70[a211_0x5045('0x6')],a211_0x5045('0x2b'),'memberInfractions'+_0x12d5fc,this[a211_0x5045('0x2d')]['name'],_0x5735fb)}})[a211_0x5045('0x10')](()=>{}));}return _0x21177b['save']();}async['clearInfractions'](_0x3366f7){const _0x5277b9=this[a211_0x5045('0x12')]?this[a211_0x5045('0x12')]:await this[a211_0x5045('0x34')]();return _0x5277b9[a211_0x5045('0x32')]=undefined,delete _0x5277b9[a211_0x5045('0x32')],this[a211_0x5045('0x2d')][a211_0x5045('0x4')]({'event':a211_0x5045('0x13'),'fields':[{'name':a211_0x5045('0x5'),'value':this[a211_0x5045('0x15')][a211_0x5045('0x2a')]+a211_0x5045('0x1c')+this['id']},{'name':a211_0x5045('0x33'),'value':_0x3366f7}]})['catch'](tesseract_1[a211_0x5045('0x1')]['error']),_0x5277b9[a211_0x5045('0x3')]();}async[a211_0x5045('0x1a')](_0x4e3f49,_0x334769,_0x5882a3){_0x4e3f49=Math[a211_0x5045('0x26')](_0x4e3f49);const _0x1ef092=_0x5882a3||await this[a211_0x5045('0x34')]();return _0x4e3f49&&(_0x1ef092[a211_0x5045('0xf')]=numbers[a211_0x5045('0x1e')](_0x1ef092[a211_0x5045('0xf')]+_0x4e3f49,Number['MAX_SAFE_INTEGER']),!_0x5882a3&&await Transaction_1[a211_0x5045('0x30')][a211_0x5045('0x0')]({'guild':this['guild']['id'],'sender':this['client'][a211_0x5045('0x15')]['id'],'receiver':_0x1ef092[a211_0x5045('0x15')],'amount':_0x4e3f49,'time':new Date(),'note':_0x334769})[a211_0x5045('0x10')](tesseract_1[a211_0x5045('0x1')][a211_0x5045('0x24')])),_0x5882a3?_0x1ef092:_0x1ef092['save']();}async['debit'](_0x4ceff7,_0x1e16b6,_0x3f4685){_0x4ceff7=Math['abs'](_0x4ceff7);const _0x5bc0b1=_0x3f4685||await this[a211_0x5045('0x34')]();return _0x4ceff7&&(_0x5bc0b1[a211_0x5045('0xf')]=numbers[a211_0x5045('0x1e')](_0x5bc0b1[a211_0x5045('0xf')]-_0x4ceff7,Number['MIN_SAFE_INTEGER'],Number['MAX_SAFE_INTEGER']),!_0x3f4685&&await Transaction_1[a211_0x5045('0x30')][a211_0x5045('0x0')]({'guild':this[a211_0x5045('0x2d')]['id'],'sender':_0x5bc0b1[a211_0x5045('0x15')],'receiver':this[a211_0x5045('0xb')][a211_0x5045('0x15')]['id'],'amount':_0x4ceff7,'time':new Date(),'note':_0x1e16b6})[a211_0x5045('0x10')](tesseract_1[a211_0x5045('0x1')][a211_0x5045('0x24')])),_0x3f4685?_0x5bc0b1:_0x5bc0b1[a211_0x5045('0x3')]();}};
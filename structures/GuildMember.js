const a197_0x43d2=['balance','getString','clamp','send','addInfraction','user','bannable','catch','../models/Transaction','ownerID','../models/Member','language','infractions','ORANGE','cache','roleId','isMusicMaster','name','document','GuildMember','locale','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','memberInfractions','abs','highest','ban','COLORS','compile','credit','clearInfractions','apply','return\x20/\x22\x20+\x20this\x20+\x20\x22/','roles','Logger','guild','isOwner','default','error','kickable','save','music','canManage','MIN_SAFE_INTEGER','length','kickThreshold','client','info','kick','\x20infractions.','constructor','create','Ban','getDocument','comparePositionTo'];(function(_0x582c9a,_0x43d215){const _0x5a6fb4=function(_0x3d6884){while(--_0x3d6884){_0x582c9a['push'](_0x582c9a['shift']());}};const _0x532dac=function(){const _0x15d092={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x199cf3,_0x2ee457,_0xc0770f,_0x54aeb3){_0x54aeb3=_0x54aeb3||{};let _0x4ad5ca=_0x2ee457+'='+_0xc0770f;let _0x496cd6=0x0;for(let _0x6b8d0f=0x0,_0x455e49=_0x199cf3['length'];_0x6b8d0f<_0x455e49;_0x6b8d0f++){const _0x5da472=_0x199cf3[_0x6b8d0f];_0x4ad5ca+=';\x20'+_0x5da472;const _0x4c7b1b=_0x199cf3[_0x5da472];_0x199cf3['push'](_0x4c7b1b);_0x455e49=_0x199cf3['length'];if(_0x4c7b1b!==!![]){_0x4ad5ca+='='+_0x4c7b1b;}}_0x54aeb3['cookie']=_0x4ad5ca;},'removeCookie':function(){return'dev';},'getCookie':function(_0x338d69,_0x92ce65){_0x338d69=_0x338d69||function(_0x1b0972){return _0x1b0972;};const _0x8d19f9=_0x338d69(new RegExp('(?:^|;\x20)'+_0x92ce65['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x43325b=function(_0x476602,_0x93946d){_0x476602(++_0x93946d);};_0x43325b(_0x5a6fb4,_0x43d215);return _0x8d19f9?decodeURIComponent(_0x8d19f9[0x1]):undefined;}};const _0x3799fa=function(){const _0x4c5e2d=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4c5e2d['test'](_0x15d092['removeCookie']['toString']());};_0x15d092['updateCookie']=_0x3799fa;let _0x444800='';const _0xb272b6=_0x15d092['updateCookie']();if(!_0xb272b6){_0x15d092['setCookie'](['*'],'counter',0x1);}else if(_0xb272b6){_0x444800=_0x15d092['getCookie'](null,'counter');}else{_0x15d092['removeCookie']();}};_0x532dac();}(a197_0x43d2,0x1d6));const a197_0x5a6f=function(_0x582c9a,_0x43d215){_0x582c9a=_0x582c9a-0x0;let _0x5a6fb4=a197_0x43d2[_0x582c9a];return _0x5a6fb4;};const a197_0x15d092=function(){let _0x37064c=!![];return function(_0x56feaa,_0x255680){const _0x2161b8=_0x37064c?function(){if(_0x255680){const _0x235536=_0x255680[a197_0x5a6f('0x2e')](_0x56feaa,arguments);_0x255680=null;return _0x235536;}}:function(){};_0x37064c=![];return _0x2161b8;};}();const a197_0x3d6884=a197_0x15d092(this,function(){const _0x3a5cf3=function(){const _0x2c7651=_0x3a5cf3[a197_0x5a6f('0xb')](a197_0x5a6f('0x2f'))()[a197_0x5a6f('0x2b')](a197_0x5a6f('0x25'));return!_0x2c7651['test'](a197_0x3d6884);};return _0x3a5cf3();});a197_0x3d6884();'use strict';const tesseract_1=require('@bastion/tesseract');const discord_js_1=require('discord.js');const Member_1=require(a197_0x5a6f('0x1a'));const Transaction_1=require(a197_0x5a6f('0x18'));const numbers=require('../utils/numbers');module['exports']=class BastionGuildMember extends discord_js_1[a197_0x5a6f('0x23')]{constructor(_0x229190,_0x4554f3,_0x1701ab){super(_0x229190,_0x4554f3,_0x1701ab);}[a197_0x5a6f('0x3')](_0x1b628f){if(this['id']===this[a197_0x5a6f('0x32')][a197_0x5a6f('0x19')])return!![];if(_0x1b628f['id']===this[a197_0x5a6f('0x32')][a197_0x5a6f('0x19')])return![];if(this['id']===_0x1b628f['id'])return![];return this[a197_0x5a6f('0x30')]['highest'][a197_0x5a6f('0xf')](_0x1b628f[a197_0x5a6f('0x30')][a197_0x5a6f('0x28')])>0x0;}async['getDocument'](){return await Member_1[a197_0x5a6f('0x34')]['findOne']({'user':this['id'],'guild':this[a197_0x5a6f('0x32')]['id']});}[a197_0x5a6f('0x20')](){if(this['user'][a197_0x5a6f('0x33')]())return!![];return this[a197_0x5a6f('0x32')][a197_0x5a6f('0x22')]['music']&&this[a197_0x5a6f('0x32')][a197_0x5a6f('0x22')][a197_0x5a6f('0x2')][a197_0x5a6f('0x1f')]&&this[a197_0x5a6f('0x30')][a197_0x5a6f('0x1e')]['has'](this[a197_0x5a6f('0x32')][a197_0x5a6f('0x22')][a197_0x5a6f('0x2')][a197_0x5a6f('0x1f')]);}async[a197_0x5a6f('0x14')](_0x3140f6){const _0x37addb=await this[a197_0x5a6f('0xe')]();if(_0x37addb[a197_0x5a6f('0x1c')]){_0x37addb[a197_0x5a6f('0x1c')]['push'](_0x3140f6);}else{_0x37addb[a197_0x5a6f('0x1c')]=[_0x3140f6];}const _0x394293=this[a197_0x5a6f('0x32')][a197_0x5a6f('0x22')]?this[a197_0x5a6f('0x32')][a197_0x5a6f('0x22')]:await this[a197_0x5a6f('0x32')][a197_0x5a6f('0xe')]();if(_0x394293['infractions']){const _0x1a6e3e=_0x37addb[a197_0x5a6f('0x1c')][a197_0x5a6f('0x5')];let _0x1ba8fc;if(this[a197_0x5a6f('0x0')]&&_0x37addb[a197_0x5a6f('0x1c')]['length']===_0x394293[a197_0x5a6f('0x1c')][a197_0x5a6f('0x6')]){_0x1ba8fc='Kick';await this[a197_0x5a6f('0x9')](_0x37addb[a197_0x5a6f('0x1c')][a197_0x5a6f('0x5')]+a197_0x5a6f('0xa'));}if(this[a197_0x5a6f('0x16')]&&_0x37addb['infractions'][a197_0x5a6f('0x5')]===_0x394293[a197_0x5a6f('0x1c')]['banThreshold']){_0x1ba8fc=a197_0x5a6f('0xd');await this[a197_0x5a6f('0x29')]({'reason':_0x37addb[a197_0x5a6f('0x1c')][a197_0x5a6f('0x5')]+'\x20infractions.'});_0x37addb[a197_0x5a6f('0x1c')]=undefined;delete _0x37addb[a197_0x5a6f('0x1c')];}if(_0x1ba8fc){await this[a197_0x5a6f('0x13')]({'embed':{'color':tesseract_1['Constants'][a197_0x5a6f('0x2a')][a197_0x5a6f('0x1d')],'description':this['client'][a197_0x5a6f('0x24')][a197_0x5a6f('0x11')](_0x394293[a197_0x5a6f('0x1b')],a197_0x5a6f('0x8'),a197_0x5a6f('0x26')+_0x1ba8fc,this[a197_0x5a6f('0x32')][a197_0x5a6f('0x21')],_0x1a6e3e)}})[a197_0x5a6f('0x17')](()=>{});}}return _0x37addb[a197_0x5a6f('0x1')]();}async[a197_0x5a6f('0x2d')](){const _0x435d75=this[a197_0x5a6f('0x22')]?this[a197_0x5a6f('0x22')]:await this['getDocument']();_0x435d75[a197_0x5a6f('0x1c')]=undefined;delete _0x435d75[a197_0x5a6f('0x1c')];return _0x435d75[a197_0x5a6f('0x1')]();}async[a197_0x5a6f('0x2c')](_0x2c84fb,_0x3e8cfb,_0x39a82c){_0x2c84fb=Math[a197_0x5a6f('0x27')](_0x2c84fb);const _0x3e4c3b=_0x39a82c||await this[a197_0x5a6f('0xe')]();if(_0x2c84fb){_0x3e4c3b[a197_0x5a6f('0x10')]=numbers[a197_0x5a6f('0x12')](_0x3e4c3b[a197_0x5a6f('0x10')]+_0x2c84fb,Number['MAX_SAFE_INTEGER']);if(!_0x39a82c){await Transaction_1[a197_0x5a6f('0x34')][a197_0x5a6f('0xc')]({'guild':this[a197_0x5a6f('0x32')]['id'],'sender':this[a197_0x5a6f('0x7')][a197_0x5a6f('0x15')]['id'],'receiver':_0x39a82c[a197_0x5a6f('0x15')],'amount':_0x2c84fb,'time':new Date(),'note':_0x3e8cfb})[a197_0x5a6f('0x17')](tesseract_1[a197_0x5a6f('0x31')][a197_0x5a6f('0x35')]);}}return _0x39a82c?_0x3e4c3b:_0x3e4c3b[a197_0x5a6f('0x1')]();}async['debit'](_0x5b7f98,_0x1378dd,_0x1196f2){_0x5b7f98=Math[a197_0x5a6f('0x27')](_0x5b7f98);const _0x1874ca=_0x1196f2||await this['getDocument']();if(_0x5b7f98){_0x1874ca['balance']=numbers[a197_0x5a6f('0x12')](_0x1874ca[a197_0x5a6f('0x10')]-_0x5b7f98,Number[a197_0x5a6f('0x4')]);if(!_0x1196f2){await Transaction_1[a197_0x5a6f('0x34')][a197_0x5a6f('0xc')]({'guild':this[a197_0x5a6f('0x32')]['id'],'sender':_0x1196f2['user'],'receiver':this[a197_0x5a6f('0x7')][a197_0x5a6f('0x15')]['id'],'amount':_0x5b7f98,'time':new Date(),'note':_0x1378dd})['catch'](tesseract_1[a197_0x5a6f('0x31')][a197_0x5a6f('0x35')]);}}return _0x1196f2?_0x1874ca:_0x1874ca[a197_0x5a6f('0x1')]();}};
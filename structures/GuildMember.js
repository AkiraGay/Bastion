const a212_0x4867=['music','tag','constructor','Action','MAX_SAFE_INTEGER','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','kick','infractions','catch','document','send','info','../utils/numbers','abs','banThreshold','../models/Transaction','push','\x20infractions.','cache','balance','findOne','MIN_SAFE_INTEGER','kickable','ownerID','\x20/\x20','Logger','user','exports','discord.js','roleId','User','return\x20/\x22\x20+\x20this\x20+\x20\x22/','ban','name','guild','clamp','createModerationLog','getDocument','has','client','clearInfractions','Constants','highest','ORANGE','default','Ban','canManage','language','GuildMember','addInfraction','apply','save','kickThreshold','error','Reason','roles','create','getString','test','COLORS','infractionAdd','locale','length','@bastion/tesseract'];(function(_0x25d6fa,_0x4867ab){const _0x54e9af=function(_0x24a220){while(--_0x24a220){_0x25d6fa['push'](_0x25d6fa['shift']());}},_0x6dda8c=function(){const _0x1e4af4={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3e859b,_0x556b15,_0x20d9ae,_0x57015b){_0x57015b=_0x57015b||{};let _0x230ba8=_0x556b15+'='+_0x20d9ae,_0x5a2794=0x0;for(let _0x7f30a8=0x0,_0x46e051=_0x3e859b['length'];_0x7f30a8<_0x46e051;_0x7f30a8++){const _0xcf46ea=_0x3e859b[_0x7f30a8];_0x230ba8+=';\x20'+_0xcf46ea;const _0x4e5be1=_0x3e859b[_0xcf46ea];_0x3e859b['push'](_0x4e5be1),_0x46e051=_0x3e859b['length'],_0x4e5be1!==!![]&&(_0x230ba8+='='+_0x4e5be1);}_0x57015b['cookie']=_0x230ba8;},'removeCookie':function(){return'dev';},'getCookie':function(_0xe9ccb0,_0x27f281){_0xe9ccb0=_0xe9ccb0||function(_0x1e9276){return _0x1e9276;};const _0x5892e2=_0xe9ccb0(new RegExp('(?:^|;\x20)'+_0x27f281['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x44bdeb=function(_0x364c00,_0x17dcf7){_0x364c00(++_0x17dcf7);};return _0x44bdeb(_0x54e9af,_0x4867ab),_0x5892e2?decodeURIComponent(_0x5892e2[0x1]):undefined;}},_0x3e7de3=function(){const _0x54f059=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x54f059['test'](_0x1e4af4['removeCookie']['toString']());};_0x1e4af4['updateCookie']=_0x3e7de3;let _0x4f7ec2='';const _0x2229b1=_0x1e4af4['updateCookie']();if(!_0x2229b1)_0x1e4af4['setCookie'](['*'],'counter',0x1);else _0x2229b1?_0x4f7ec2=_0x1e4af4['getCookie'](null,'counter'):_0x1e4af4['removeCookie']();};_0x6dda8c();}(a212_0x4867,0xd8));const a212_0x54e9=function(_0x25d6fa,_0x4867ab){_0x25d6fa=_0x25d6fa-0x0;let _0x54e9af=a212_0x4867[_0x25d6fa];return _0x54e9af;};const _0x8160e1=a212_0x54e9,a212_0x1e4af4=function(){let _0x4f7ec2=!![];return function(_0x2229b1,_0x3e859b){const _0x556b15=_0x4f7ec2?function(){const _0x26c047=a212_0x54e9;if(_0x3e859b){const _0x20d9ae=_0x3e859b[_0x26c047('0x1a')](_0x2229b1,arguments);return _0x3e859b=null,_0x20d9ae;}}:function(){};return _0x4f7ec2=![],_0x556b15;};}(),a212_0x24a220=a212_0x1e4af4(this,function(){const _0x57015b=function(){const _0x2eff0c=a212_0x54e9,_0x230ba8=_0x57015b[_0x2eff0c('0x2a')](_0x2eff0c('0x7'))()[_0x2eff0c('0x2a')](_0x2eff0c('0x2d'));return!_0x230ba8[_0x2eff0c('0x22')](a212_0x24a220);};return _0x57015b();});a212_0x24a220();'use strict';const tesseract_1=require(_0x8160e1('0x27')),discord_js_1=require(_0x8160e1('0x4')),Member_1=require('../models/Member'),Transaction_1=require(_0x8160e1('0x37')),numbers=require(_0x8160e1('0x34'));module[_0x8160e1('0x3')]=class BastionGuildMember extends discord_js_1[_0x8160e1('0x18')]{constructor(_0x5a2794,_0x7f30a8,_0x46e051){super(_0x5a2794,_0x7f30a8,_0x46e051);}[_0x8160e1('0x16')](_0xcf46ea){const _0x4b4159=_0x8160e1;if(this['id']===this[_0x4b4159('0xa')]['ownerID'])return!![];if(_0xcf46ea['id']===this['guild'][_0x4b4159('0x3f')])return![];if(this['id']===_0xcf46ea['id'])return![];return this['roles'][_0x4b4159('0x12')]['comparePositionTo'](_0xcf46ea[_0x4b4159('0x1f')][_0x4b4159('0x12')])>0x0;}async[_0x8160e1('0xd')](){const _0x12ce85=_0x8160e1;return await Member_1['default'][_0x12ce85('0x3c')]({'user':this['id'],'guild':this[_0x12ce85('0xa')]['id']});}['isMusicMaster'](){const _0x1bd61=_0x8160e1;if(this[_0x1bd61('0x2')]['isOwner']())return!![];return this[_0x1bd61('0xa')][_0x1bd61('0x31')][_0x1bd61('0x28')]&&this['guild'][_0x1bd61('0x31')][_0x1bd61('0x28')][_0x1bd61('0x5')]&&this['roles'][_0x1bd61('0x3a')][_0x1bd61('0xe')](this[_0x1bd61('0xa')][_0x1bd61('0x31')][_0x1bd61('0x28')]['roleId']);}async[_0x8160e1('0x19')](_0x4e5be1){const _0xca575f=_0x8160e1;let _0xe9ccb0=await this[_0xca575f('0xd')]();_0xe9ccb0?_0xe9ccb0[_0xca575f('0x2f')]?_0xe9ccb0[_0xca575f('0x2f')][_0xca575f('0x38')](_0x4e5be1):_0xe9ccb0[_0xca575f('0x2f')]=[_0x4e5be1]:_0xe9ccb0=await Member_1[_0xca575f('0x14')][_0xca575f('0x20')]({'user':this['id'],'guild':this[_0xca575f('0xa')]['id'],'infractions':[_0x4e5be1]});const _0x27f281=this[_0xca575f('0xa')][_0xca575f('0x31')]?this[_0xca575f('0xa')][_0xca575f('0x31')]:await this[_0xca575f('0xa')][_0xca575f('0xd')]();if(_0x27f281[_0xca575f('0x2f')]){const _0x5892e2=_0xe9ccb0['infractions']['length'];let _0x44bdeb;this[_0xca575f('0x3e')]&&_0xe9ccb0[_0xca575f('0x2f')]['length']===_0x27f281[_0xca575f('0x2f')][_0xca575f('0x1c')]&&(_0x44bdeb='Kick',await this[_0xca575f('0x2e')](_0xe9ccb0['infractions'][_0xca575f('0x26')]+_0xca575f('0x39'))),this['bannable']&&_0xe9ccb0[_0xca575f('0x2f')][_0xca575f('0x26')]===_0x27f281[_0xca575f('0x2f')][_0xca575f('0x36')]&&(_0x44bdeb=_0xca575f('0x15'),await this[_0xca575f('0x8')]({'reason':_0xe9ccb0[_0xca575f('0x2f')][_0xca575f('0x26')]+_0xca575f('0x39')}),_0xe9ccb0[_0xca575f('0x2f')]=undefined,delete _0xe9ccb0[_0xca575f('0x2f')]),_0x44bdeb&&(this[_0xca575f('0xa')][_0xca575f('0xc')]({'event':_0xca575f('0x24'),'fields':[{'name':'User','value':this['user'][_0xca575f('0x29')]+_0xca575f('0x0')+this['id']},{'name':_0xca575f('0x2b'),'value':_0x44bdeb},{'name':_0xca575f('0x1e'),'value':_0x4e5be1}]})['catch'](tesseract_1['Logger'][_0xca575f('0x1d')]),await this[_0xca575f('0x32')]({'embed':{'color':tesseract_1[_0xca575f('0x11')][_0xca575f('0x23')][_0xca575f('0x13')],'description':this['client'][_0xca575f('0x25')][_0xca575f('0x21')](_0x27f281[_0xca575f('0x17')],_0xca575f('0x33'),'memberInfractions'+_0x44bdeb,this[_0xca575f('0xa')][_0xca575f('0x9')],_0x5892e2)}})[_0xca575f('0x30')](()=>{}));}return _0xe9ccb0[_0xca575f('0x1b')]();}async[_0x8160e1('0x10')](_0x1e9276){const _0x44de4e=_0x8160e1,_0x364c00=this[_0x44de4e('0x31')]?this[_0x44de4e('0x31')]:await this[_0x44de4e('0xd')]();return _0x364c00[_0x44de4e('0x2f')]=undefined,delete _0x364c00[_0x44de4e('0x2f')],this['guild']['createModerationLog']({'event':'infractionClear','fields':[{'name':_0x44de4e('0x6'),'value':this['user']['tag']+_0x44de4e('0x0')+this['id']},{'name':'Reason','value':_0x1e9276}]})[_0x44de4e('0x30')](tesseract_1[_0x44de4e('0x1')][_0x44de4e('0x1d')]),_0x364c00[_0x44de4e('0x1b')]();}async['credit'](_0x17dcf7,_0x54f059,_0x367e3d){const _0x3163f5=_0x8160e1;_0x17dcf7=Math[_0x3163f5('0x35')](_0x17dcf7);const _0x487da5=_0x367e3d||await this[_0x3163f5('0xd')]();return _0x17dcf7&&(_0x487da5[_0x3163f5('0x3b')]=numbers['clamp'](_0x487da5[_0x3163f5('0x3b')]+_0x17dcf7,Number[_0x3163f5('0x2c')]),!_0x367e3d&&await Transaction_1[_0x3163f5('0x14')]['create']({'guild':this['guild']['id'],'sender':this[_0x3163f5('0xf')][_0x3163f5('0x2')]['id'],'receiver':_0x487da5[_0x3163f5('0x2')],'amount':_0x17dcf7,'time':new Date(),'note':_0x54f059})[_0x3163f5('0x30')](tesseract_1[_0x3163f5('0x1')]['error'])),_0x367e3d?_0x487da5:_0x487da5[_0x3163f5('0x1b')]();}async['debit'](_0x15bd91,_0x56a5c8,_0x1da96a){const _0x273b4a=_0x8160e1;_0x15bd91=Math[_0x273b4a('0x35')](_0x15bd91);const _0x530af4=_0x1da96a||await this[_0x273b4a('0xd')]();return _0x15bd91&&(_0x530af4[_0x273b4a('0x3b')]=numbers[_0x273b4a('0xb')](_0x530af4[_0x273b4a('0x3b')]-_0x15bd91,Number[_0x273b4a('0x3d')],Number[_0x273b4a('0x2c')]),!_0x1da96a&&await Transaction_1[_0x273b4a('0x14')]['create']({'guild':this[_0x273b4a('0xa')]['id'],'sender':_0x530af4['user'],'receiver':this[_0x273b4a('0xf')][_0x273b4a('0x2')]['id'],'amount':_0x15bd91,'time':new Date(),'note':_0x56a5c8})[_0x273b4a('0x30')](tesseract_1[_0x273b4a('0x1')][_0x273b4a('0x1d')])),_0x1da96a?_0x530af4:_0x530af4[_0x273b4a('0x1b')]();}};
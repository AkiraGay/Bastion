const a198_0xfbf0=['error','Constants','getString','clamp','../utils/numbers','bannable','addInfraction','compile','getDocument','ban','MAX_SAFE_INTEGER','COLORS','infractions','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','findOne','push','test','create','kick','Logger','isOwner','constructor','ownerID','roleId','roles','clearInfractions','GuildMember','language','Kick','locale','ORANGE','save','default','client','\x20infractions.','highest','../models/Transaction','MIN_SAFE_INTEGER','apply','catch','music','document','name','return\x20/\x22\x20+\x20this\x20+\x20\x22/','user','has','credit','info','length','kickable','exports','guild','balance','memberInfractions','canManage','Ban','@bastion/tesseract','comparePositionTo','send','cache'];(function(_0x383d55,_0xfbf02e){const _0x3ce20c=function(_0x3efeb7){while(--_0x3efeb7){_0x383d55['push'](_0x383d55['shift']());}};const _0x1371bc=function(){const _0x66570e={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0xa8c033,_0x50c2f,_0x305196,_0x1cf795){_0x1cf795=_0x1cf795||{};let _0x1358a6=_0x50c2f+'='+_0x305196;let _0x488ae4=0x0;for(let _0x5ab11f=0x0,_0x5efffa=_0xa8c033['length'];_0x5ab11f<_0x5efffa;_0x5ab11f++){const _0x333429=_0xa8c033[_0x5ab11f];_0x1358a6+=';\x20'+_0x333429;const _0xc9a7ce=_0xa8c033[_0x333429];_0xa8c033['push'](_0xc9a7ce);_0x5efffa=_0xa8c033['length'];if(_0xc9a7ce!==!![]){_0x1358a6+='='+_0xc9a7ce;}}_0x1cf795['cookie']=_0x1358a6;},'removeCookie':function(){return'dev';},'getCookie':function(_0x131e2b,_0x1f348d){_0x131e2b=_0x131e2b||function(_0x19d526){return _0x19d526;};const _0x2bacdc=_0x131e2b(new RegExp('(?:^|;\x20)'+_0x1f348d['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x4c570f=function(_0x3b9f30,_0xc2f366){_0x3b9f30(++_0xc2f366);};_0x4c570f(_0x3ce20c,_0xfbf02e);return _0x2bacdc?decodeURIComponent(_0x2bacdc[0x1]):undefined;}};const _0x1b4e4e=function(){const _0x21887b=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x21887b['test'](_0x66570e['removeCookie']['toString']());};_0x66570e['updateCookie']=_0x1b4e4e;let _0x3048f5='';const _0x3e1ea2=_0x66570e['updateCookie']();if(!_0x3e1ea2){_0x66570e['setCookie'](['*'],'counter',0x1);}else if(_0x3e1ea2){_0x3048f5=_0x66570e['getCookie'](null,'counter');}else{_0x66570e['removeCookie']();}};_0x1371bc();}(a198_0xfbf0,0x150));const a198_0x3ce2=function(_0x383d55,_0xfbf02e){_0x383d55=_0x383d55-0x0;let _0x3ce20c=a198_0xfbf0[_0x383d55];return _0x3ce20c;};const a198_0x66570e=function(){let _0x58a745=!![];return function(_0x2c4b92,_0x35863b){const _0x9530bb=_0x58a745?function(){if(_0x35863b){const _0x4ff92f=_0x35863b[a198_0x3ce2('0x2')](_0x2c4b92,arguments);_0x35863b=null;return _0x4ff92f;}}:function(){};_0x58a745=![];return _0x9530bb;};}();const a198_0x3efeb7=a198_0x66570e(this,function(){const _0x18628b=function(){const _0x2ec8bf=_0x18628b[a198_0x3ce2('0x2d')](a198_0x3ce2('0x7'))()[a198_0x3ce2('0x1f')](a198_0x3ce2('0x25'));return!_0x2ec8bf[a198_0x3ce2('0x28')](a198_0x3efeb7);};return _0x18628b();});a198_0x3efeb7();'use strict';const tesseract_1=require(a198_0x3ce2('0x14'));const discord_js_1=require('discord.js');const Member_1=require('../models/Member');const Transaction_1=require(a198_0x3ce2('0x0'));const numbers=require(a198_0x3ce2('0x1c'));module[a198_0x3ce2('0xe')]=class BastionGuildMember extends discord_js_1[a198_0x3ce2('0x32')]{constructor(_0x46f0bd,_0x4fe145,_0x31cd05){super(_0x46f0bd,_0x4fe145,_0x31cd05);}[a198_0x3ce2('0x12')](_0x2bee54){if(this['id']===this[a198_0x3ce2('0xf')]['ownerID'])return!![];if(_0x2bee54['id']===this[a198_0x3ce2('0xf')][a198_0x3ce2('0x2e')])return![];if(this['id']===_0x2bee54['id'])return![];return this[a198_0x3ce2('0x30')][a198_0x3ce2('0x3b')][a198_0x3ce2('0x15')](_0x2bee54['roles'][a198_0x3ce2('0x3b')])>0x0;}async[a198_0x3ce2('0x20')](){return await Member_1[a198_0x3ce2('0x38')][a198_0x3ce2('0x26')]({'user':this['id'],'guild':this[a198_0x3ce2('0xf')]['id']});}['isMusicMaster'](){if(this[a198_0x3ce2('0x8')][a198_0x3ce2('0x2c')]())return!![];return this[a198_0x3ce2('0xf')][a198_0x3ce2('0x5')][a198_0x3ce2('0x4')]&&this[a198_0x3ce2('0xf')][a198_0x3ce2('0x5')][a198_0x3ce2('0x4')][a198_0x3ce2('0x2f')]&&this['roles'][a198_0x3ce2('0x17')][a198_0x3ce2('0x9')](this[a198_0x3ce2('0xf')][a198_0x3ce2('0x5')][a198_0x3ce2('0x4')]['roleId']);}async[a198_0x3ce2('0x1e')](_0x160619){const _0x3c9fbc=await this[a198_0x3ce2('0x20')]();if(_0x3c9fbc[a198_0x3ce2('0x24')]){_0x3c9fbc[a198_0x3ce2('0x24')][a198_0x3ce2('0x27')](_0x160619);}else{_0x3c9fbc['infractions']=[_0x160619];}const _0xa5eeec=this['guild'][a198_0x3ce2('0x5')]?this[a198_0x3ce2('0xf')][a198_0x3ce2('0x5')]:await this[a198_0x3ce2('0xf')][a198_0x3ce2('0x20')]();if(_0xa5eeec[a198_0x3ce2('0x24')]){const _0x389676=_0x3c9fbc['infractions']['length'];let _0x3c245a;if(this[a198_0x3ce2('0xd')]&&_0x3c9fbc[a198_0x3ce2('0x24')]['length']===_0xa5eeec[a198_0x3ce2('0x24')]['kickThreshold']){_0x3c245a=a198_0x3ce2('0x34');await this[a198_0x3ce2('0x2a')](_0x3c9fbc['infractions'][a198_0x3ce2('0xc')]+a198_0x3ce2('0x3a'));}if(this[a198_0x3ce2('0x1d')]&&_0x3c9fbc['infractions'][a198_0x3ce2('0xc')]===_0xa5eeec[a198_0x3ce2('0x24')]['banThreshold']){_0x3c245a=a198_0x3ce2('0x13');await this[a198_0x3ce2('0x21')]({'reason':_0x3c9fbc[a198_0x3ce2('0x24')]['length']+a198_0x3ce2('0x3a')});_0x3c9fbc[a198_0x3ce2('0x24')]=undefined;delete _0x3c9fbc['infractions'];}if(_0x3c245a){await this[a198_0x3ce2('0x16')]({'embed':{'color':tesseract_1[a198_0x3ce2('0x19')][a198_0x3ce2('0x23')][a198_0x3ce2('0x36')],'description':this[a198_0x3ce2('0x39')][a198_0x3ce2('0x35')][a198_0x3ce2('0x1a')](_0xa5eeec[a198_0x3ce2('0x33')],a198_0x3ce2('0xb'),a198_0x3ce2('0x11')+_0x3c245a,this[a198_0x3ce2('0xf')][a198_0x3ce2('0x6')],_0x389676)}})['catch'](()=>{});}}return _0x3c9fbc[a198_0x3ce2('0x37')]();}async[a198_0x3ce2('0x31')](){const _0x3b4bee=this[a198_0x3ce2('0x5')]?this[a198_0x3ce2('0x5')]:await this['getDocument']();_0x3b4bee[a198_0x3ce2('0x24')]=undefined;delete _0x3b4bee['infractions'];return _0x3b4bee[a198_0x3ce2('0x37')]();}async[a198_0x3ce2('0xa')](_0x131633,_0xabbc4c,_0x1e3280){_0x131633=Math['abs'](_0x131633);const _0x30e294=_0x1e3280||await this[a198_0x3ce2('0x20')]();if(_0x131633){_0x30e294[a198_0x3ce2('0x10')]=numbers[a198_0x3ce2('0x1b')](_0x30e294[a198_0x3ce2('0x10')]+_0x131633,Number[a198_0x3ce2('0x22')]);if(!_0x1e3280){await Transaction_1[a198_0x3ce2('0x38')]['create']({'guild':this['guild']['id'],'sender':this[a198_0x3ce2('0x39')][a198_0x3ce2('0x8')]['id'],'receiver':_0x30e294['user'],'amount':_0x131633,'time':new Date(),'note':_0xabbc4c})[a198_0x3ce2('0x3')](tesseract_1[a198_0x3ce2('0x2b')][a198_0x3ce2('0x18')]);}}return _0x1e3280?_0x30e294:_0x30e294[a198_0x3ce2('0x37')]();}async['debit'](_0x5ea58f,_0x375a2e,_0x54f040){_0x5ea58f=Math['abs'](_0x5ea58f);const _0x585f44=_0x54f040||await this[a198_0x3ce2('0x20')]();if(_0x5ea58f){_0x585f44[a198_0x3ce2('0x10')]=numbers['clamp'](_0x585f44[a198_0x3ce2('0x10')]-_0x5ea58f,Number[a198_0x3ce2('0x1')],Number['MAX_SAFE_INTEGER']);if(!_0x54f040){await Transaction_1[a198_0x3ce2('0x38')][a198_0x3ce2('0x29')]({'guild':this['guild']['id'],'sender':_0x585f44[a198_0x3ce2('0x8')],'receiver':this[a198_0x3ce2('0x39')][a198_0x3ce2('0x8')]['id'],'amount':_0x5ea58f,'time':new Date(),'note':_0x375a2e})[a198_0x3ce2('0x3')](tesseract_1[a198_0x3ce2('0x2b')][a198_0x3ce2('0x18')]);}}return _0x54f040?_0x585f44:_0x585f44['save']();}};
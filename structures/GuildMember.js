const a229_0x2b4b=['ban','roleId','banThreshold','infractions','1ZkbyDy','902942HhrMYp','client','249855HJdbrD','test','return\x20/\x22\x20+\x20this\x20+\x20\x22/','discord.js','debit','has','guild','canManage','getDocument','545862ouVKlW','User','bannable','infractionAdd','Kick','MAX_SAFE_INTEGER','memberInfractions','credit','18431lnzEds','MIN_SAFE_INTEGER','getString','music','@bastion/tesseract','kickable','length','comparePositionTo','user','\x20/\x20','name','tag','kickThreshold','balance','isMusicMaster','1QSKevq','default','save','cache','127236wPwosd','locale','26wxsolf','exports','isOwner','ORANGE','\x20infractions.','Reason','Ban','COLORS','Action','119803xabsSu','findOne','document','error','clearInfractions','ownerID','abs','Logger','createModerationLog','../utils/numbers','roles','highest','catch','create','408473SPYToy','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','constructor','addInfraction'];const a229_0x2e3e=function(_0x2cfda6,_0x2bcd90){_0x2cfda6=_0x2cfda6-0x11c;let _0x1d98ae=a229_0x2b4b[_0x2cfda6];return _0x1d98ae;};const a229_0x17f0f9=a229_0x2e3e;(function(_0x3cfef1,_0x8aaa18){const _0x4a471d=a229_0x2e3e;while(!![]){try{const _0x29ee55=parseInt(_0x4a471d(0x161))*parseInt(_0x4a471d(0x14c))+-parseInt(_0x4a471d(0x13b))+parseInt(_0x4a471d(0x15f))+parseInt(_0x4a471d(0x130))+-parseInt(_0x4a471d(0x138))*-parseInt(_0x4a471d(0x144))+-parseInt(_0x4a471d(0x122))+-parseInt(_0x4a471d(0x15b))*parseInt(_0x4a471d(0x139));if(_0x29ee55===_0x8aaa18)break;else _0x3cfef1['push'](_0x3cfef1['shift']());}catch(_0x10c0b2){_0x3cfef1['push'](_0x3cfef1['shift']());}}}(a229_0x2b4b,0x465b1));const a229_0x66b97=function(){let _0x229150=!![];return function(_0x586482,_0x353673){const _0x28bcc5=_0x229150?function(){if(_0x353673){const _0x264f53=_0x353673['apply'](_0x586482,arguments);return _0x353673=null,_0x264f53;}}:function(){};return _0x229150=![],_0x28bcc5;};}(),a229_0x1a74de=a229_0x66b97(this,function(){const _0x277046=function(){const _0x4b97fc=a229_0x2e3e,_0x81cb61=_0x277046[_0x4b97fc(0x132)](_0x4b97fc(0x13d))()[_0x4b97fc(0x132)](_0x4b97fc(0x131));return!_0x81cb61[_0x4b97fc(0x13c)](a229_0x1a74de);};return _0x277046();});a229_0x1a74de();'use strict';const tesseract_1=require(a229_0x17f0f9(0x150)),discord_js_1=require(a229_0x17f0f9(0x13e)),Member_1=require('../models/Member'),Transaction_1=require('../models/Transaction'),numbers=require(a229_0x17f0f9(0x12b));module[a229_0x17f0f9(0x162)]=class BastionGuildMember extends discord_js_1['GuildMember']{constructor(_0x24660f,_0x378281,_0x3f86b7){super(_0x24660f,_0x378281,_0x3f86b7);}[a229_0x17f0f9(0x142)](_0x34a561){const _0x5d95a5=a229_0x17f0f9;if(this['id']===this['guild']['ownerID'])return!![];if(_0x34a561['id']===this[_0x5d95a5(0x141)][_0x5d95a5(0x127)])return![];if(this['id']===_0x34a561['id'])return![];return this['roles'][_0x5d95a5(0x12d)][_0x5d95a5(0x153)](_0x34a561[_0x5d95a5(0x12c)][_0x5d95a5(0x12d)])>0x0;}async[a229_0x17f0f9(0x143)](){const _0x4d4903=a229_0x17f0f9;return await Member_1['default'][_0x4d4903(0x123)]({'user':this['id'],'guild':this['guild']['id']});}[a229_0x17f0f9(0x15a)](){const _0x553b25=a229_0x17f0f9;if(this[_0x553b25(0x154)][_0x553b25(0x163)]())return!![];return this['guild'][_0x553b25(0x124)][_0x553b25(0x14f)]&&this[_0x553b25(0x141)][_0x553b25(0x124)][_0x553b25(0x14f)]['roleId']&&this[_0x553b25(0x12c)][_0x553b25(0x15e)][_0x553b25(0x140)](this[_0x553b25(0x141)]['document'][_0x553b25(0x14f)][_0x553b25(0x135)]);}async[a229_0x17f0f9(0x133)](_0xb6895c){const _0x138ec5=a229_0x17f0f9;let _0x240ad4=await this['getDocument']();_0x240ad4?_0x240ad4[_0x138ec5(0x137)]?_0x240ad4[_0x138ec5(0x137)]['push'](_0xb6895c):_0x240ad4['infractions']=[_0xb6895c]:_0x240ad4=await Member_1[_0x138ec5(0x15c)]['create']({'user':this['id'],'guild':this['guild']['id'],'infractions':[_0xb6895c]});const _0x5431c6=this[_0x138ec5(0x141)][_0x138ec5(0x124)]?this[_0x138ec5(0x141)][_0x138ec5(0x124)]:await this[_0x138ec5(0x141)]['getDocument']();if(_0x5431c6[_0x138ec5(0x137)]){const _0x383619=_0x240ad4[_0x138ec5(0x137)]['length'];let _0x2ce36a;this[_0x138ec5(0x151)]&&_0x240ad4['infractions'][_0x138ec5(0x152)]===_0x5431c6[_0x138ec5(0x137)][_0x138ec5(0x158)]&&(_0x2ce36a=_0x138ec5(0x148),await this['kick'](_0x240ad4[_0x138ec5(0x137)][_0x138ec5(0x152)]+_0x138ec5(0x11d))),this[_0x138ec5(0x146)]&&_0x240ad4[_0x138ec5(0x137)][_0x138ec5(0x152)]===_0x5431c6[_0x138ec5(0x137)][_0x138ec5(0x136)]&&(_0x2ce36a=_0x138ec5(0x11f),await this[_0x138ec5(0x134)]({'reason':_0x240ad4[_0x138ec5(0x137)][_0x138ec5(0x152)]+_0x138ec5(0x11d)}),_0x240ad4['infractions']=undefined,delete _0x240ad4['infractions']),_0x2ce36a&&(this[_0x138ec5(0x141)][_0x138ec5(0x12a)]({'event':_0x138ec5(0x147),'fields':[{'name':_0x138ec5(0x145),'value':this[_0x138ec5(0x154)][_0x138ec5(0x157)]+_0x138ec5(0x155)+this['id']},{'name':_0x138ec5(0x121),'value':_0x2ce36a},{'name':_0x138ec5(0x11e),'value':_0xb6895c}]})['catch'](tesseract_1[_0x138ec5(0x129)]['error']),await this['send']({'embed':{'color':tesseract_1['Constants'][_0x138ec5(0x120)][_0x138ec5(0x11c)],'description':this[_0x138ec5(0x13a)][_0x138ec5(0x160)][_0x138ec5(0x14e)](_0x5431c6['language'],'info',_0x138ec5(0x14a)+_0x2ce36a,this['guild'][_0x138ec5(0x156)],_0x383619)}})['catch'](()=>{}));}return _0x240ad4['save']();}async[a229_0x17f0f9(0x126)](_0x5ddb93){const _0x1defa3=a229_0x17f0f9,_0x38fba3=this[_0x1defa3(0x124)]?this['document']:await this['getDocument']();return _0x38fba3[_0x1defa3(0x137)]=undefined,delete _0x38fba3[_0x1defa3(0x137)],this[_0x1defa3(0x141)][_0x1defa3(0x12a)]({'event':'infractionClear','fields':[{'name':'User','value':this[_0x1defa3(0x154)][_0x1defa3(0x157)]+'\x20/\x20'+this['id']},{'name':'Reason','value':_0x5ddb93}]})[_0x1defa3(0x12e)](tesseract_1['Logger'][_0x1defa3(0x125)]),_0x38fba3[_0x1defa3(0x15d)]();}async[a229_0x17f0f9(0x14b)](_0x4f9211,_0x3efae7,_0x37492c){const _0x182b8a=a229_0x17f0f9;_0x4f9211=Math[_0x182b8a(0x128)](_0x4f9211);const _0x1bab1b=_0x37492c||await this[_0x182b8a(0x143)]();return _0x4f9211&&(_0x1bab1b[_0x182b8a(0x159)]=numbers['clamp'](_0x1bab1b[_0x182b8a(0x159)]+_0x4f9211,Number[_0x182b8a(0x149)]),!_0x37492c&&await Transaction_1['default'][_0x182b8a(0x12f)]({'guild':this[_0x182b8a(0x141)]['id'],'sender':this[_0x182b8a(0x13a)][_0x182b8a(0x154)]['id'],'receiver':_0x1bab1b['user'],'amount':_0x4f9211,'time':new Date(),'note':_0x3efae7})[_0x182b8a(0x12e)](tesseract_1[_0x182b8a(0x129)][_0x182b8a(0x125)])),_0x37492c?_0x1bab1b:_0x1bab1b[_0x182b8a(0x15d)]();}async[a229_0x17f0f9(0x13f)](_0x167064,_0x63b6bb,_0x2f7f80){const _0x57f4c1=a229_0x17f0f9;_0x167064=Math['abs'](_0x167064);const _0x35db77=_0x2f7f80||await this['getDocument']();return _0x167064&&(_0x35db77['balance']=numbers['clamp'](_0x35db77[_0x57f4c1(0x159)]-_0x167064,Number[_0x57f4c1(0x14d)],Number[_0x57f4c1(0x149)]),!_0x2f7f80&&await Transaction_1[_0x57f4c1(0x15c)]['create']({'guild':this['guild']['id'],'sender':_0x35db77['user'],'receiver':this[_0x57f4c1(0x13a)][_0x57f4c1(0x154)]['id'],'amount':_0x167064,'time':new Date(),'note':_0x63b6bb})[_0x57f4c1(0x12e)](tesseract_1['Logger'][_0x57f4c1(0x125)])),_0x2f7f80?_0x35db77:_0x35db77[_0x57f4c1(0x15d)]();}};
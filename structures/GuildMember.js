const a227_0x33ee=['\x20infractions.','createModerationLog','music','getString','Logger','balance','name','infractionAdd','roleId','abs','highest','constructor','save','client','memberInfractions','../utils/numbers','@bastion/tesseract','guild','credit','clearInfractions','User','findOne','isMusicMaster','test','Kick','clamp','locale','infractions','return\x20/\x22\x20+\x20this\x20+\x20\x22/','kick','getDocument','infractionClear','Ban','ownerID','length','comparePositionTo','exports','bannable','GuildMember','catch','Constants','error','Reason','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','\x20/\x20','tag','discord.js','default','../models/Transaction','MIN_SAFE_INTEGER','COLORS','../models/Member','roles','push','user','document','info','debit'];(function(_0x3d8c74,_0x454ae4){const _0x33ee16=function(_0x2a3697){while(--_0x2a3697){_0x3d8c74['push'](_0x3d8c74['shift']());}},_0x43b14d=function(){const _0x2b14e6={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x576255,_0x330c15,_0x4b65d8,_0x5b4401){_0x5b4401=_0x5b4401||{};let _0x4fc14b=_0x330c15+'='+_0x4b65d8,_0x5281be=0x0;for(let _0x567e38=0x0,_0x3891d8=_0x576255['length'];_0x567e38<_0x3891d8;_0x567e38++){const _0x4e467b=_0x576255[_0x567e38];_0x4fc14b+=';\x20'+_0x4e467b;const _0xbb4efe=_0x576255[_0x4e467b];_0x576255['push'](_0xbb4efe),_0x3891d8=_0x576255['length'],_0xbb4efe!==!![]&&(_0x4fc14b+='='+_0xbb4efe);}_0x5b4401['cookie']=_0x4fc14b;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4cee1f,_0x3074df){_0x4cee1f=_0x4cee1f||function(_0x4694d2){return _0x4694d2;};const _0x2a93df=_0x4cee1f(new RegExp('(?:^|;\x20)'+_0x3074df['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x207214=function(_0x23d4da,_0xc90482){_0x23d4da(++_0xc90482);};return _0x207214(_0x33ee16,_0x454ae4),_0x2a93df?decodeURIComponent(_0x2a93df[0x1]):undefined;}},_0x199a53=function(){const _0x32f378=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x32f378['test'](_0x2b14e6['removeCookie']['toString']());};_0x2b14e6['updateCookie']=_0x199a53;let _0x54758a='';const _0x6f0ca4=_0x2b14e6['updateCookie']();if(!_0x6f0ca4)_0x2b14e6['setCookie'](['*'],'counter',0x1);else _0x6f0ca4?_0x54758a=_0x2b14e6['getCookie'](null,'counter'):_0x2b14e6['removeCookie']();};_0x43b14d();}(a227_0x33ee,0x14d));const a227_0x43b1=function(_0x3d8c74,_0x454ae4){_0x3d8c74=_0x3d8c74-0x7f;let _0x33ee16=a227_0x33ee[_0x3d8c74];return _0x33ee16;};const _0x11e19f=a227_0x43b1,a227_0x199a53=function(){let _0x6f0ca4=!![];return function(_0x576255,_0x330c15){const _0x4b65d8=_0x6f0ca4?function(){if(_0x330c15){const _0x5b4401=_0x330c15['apply'](_0x576255,arguments);return _0x330c15=null,_0x5b4401;}}:function(){};return _0x6f0ca4=![],_0x4b65d8;};}(),a227_0x2b14e6=a227_0x199a53(this,function(){const _0x4fc14b=function(){const _0x29886e=a227_0x43b1,_0x5281be=_0x4fc14b['constructor'](_0x29886e(0xaa))()[_0x29886e(0x99)](_0x29886e(0x7f));return!_0x5281be[_0x29886e(0xa5)](a227_0x2b14e6);};return _0x4fc14b();});a227_0x2b14e6();'use strict';const tesseract_1=require(_0x11e19f(0x9e)),discord_js_1=require(_0x11e19f(0x82)),Member_1=require(_0x11e19f(0x87)),Transaction_1=require(_0x11e19f(0x84)),numbers=require(_0x11e19f(0x9d));module[_0x11e19f(0xb2)]=class BastionGuildMember extends discord_js_1[_0x11e19f(0xb4)]{constructor(_0x567e38,_0x3891d8,_0x4e467b){super(_0x567e38,_0x3891d8,_0x4e467b);}['canManage'](_0xbb4efe){const _0x35aae3=_0x11e19f;if(this['id']===this[_0x35aae3(0x9f)][_0x35aae3(0xaf)])return!![];if(_0xbb4efe['id']===this['guild'][_0x35aae3(0xaf)])return![];if(this['id']===_0xbb4efe['id'])return![];return this[_0x35aae3(0x88)][_0x35aae3(0x98)][_0x35aae3(0xb1)](_0xbb4efe[_0x35aae3(0x88)][_0x35aae3(0x98)])>0x0;}async['getDocument'](){const _0x5d1a27=_0x11e19f;return await Member_1[_0x5d1a27(0x83)][_0x5d1a27(0xa3)]({'user':this['id'],'guild':this[_0x5d1a27(0x9f)]['id']});}[_0x11e19f(0xa4)](){const _0x40a288=_0x11e19f;if(this['user']['isOwner']())return!![];return this['guild'][_0x40a288(0x8b)][_0x40a288(0x90)]&&this[_0x40a288(0x9f)]['document'][_0x40a288(0x90)]['roleId']&&this[_0x40a288(0x88)]['cache']['has'](this[_0x40a288(0x9f)][_0x40a288(0x8b)][_0x40a288(0x90)][_0x40a288(0x96)]);}async['addInfraction'](_0x4cee1f){const _0x450081=_0x11e19f;let _0x3074df=await this[_0x450081(0xac)]();_0x3074df?_0x3074df[_0x450081(0xa9)]?_0x3074df['infractions'][_0x450081(0x89)](_0x4cee1f):_0x3074df['infractions']=[_0x4cee1f]:_0x3074df=await Member_1[_0x450081(0x83)]['create']({'user':this['id'],'guild':this[_0x450081(0x9f)]['id'],'infractions':[_0x4cee1f]});const _0x2a93df=this[_0x450081(0x9f)][_0x450081(0x8b)]?this[_0x450081(0x9f)][_0x450081(0x8b)]:await this[_0x450081(0x9f)]['getDocument']();if(_0x2a93df['infractions']){const _0x207214=_0x3074df[_0x450081(0xa9)][_0x450081(0xb0)];let _0x4694d2;this['kickable']&&_0x3074df[_0x450081(0xa9)][_0x450081(0xb0)]===_0x2a93df['infractions']['kickThreshold']&&(_0x4694d2=_0x450081(0xa6),await this[_0x450081(0xab)](_0x3074df[_0x450081(0xa9)][_0x450081(0xb0)]+_0x450081(0x8e))),this[_0x450081(0xb3)]&&_0x3074df[_0x450081(0xa9)]['length']===_0x2a93df[_0x450081(0xa9)]['banThreshold']&&(_0x4694d2=_0x450081(0xae),await this['ban']({'reason':_0x3074df[_0x450081(0xa9)]['length']+_0x450081(0x8e)}),_0x3074df[_0x450081(0xa9)]=undefined,delete _0x3074df[_0x450081(0xa9)]),_0x4694d2&&(this[_0x450081(0x9f)][_0x450081(0x8f)]({'event':_0x450081(0x95),'fields':[{'name':_0x450081(0xa2),'value':this[_0x450081(0x8a)][_0x450081(0x81)]+_0x450081(0x80)+this['id']},{'name':'Action','value':_0x4694d2},{'name':_0x450081(0xb8),'value':_0x4cee1f}]})[_0x450081(0xb5)](tesseract_1['Logger']['error']),await this['send']({'embed':{'color':tesseract_1[_0x450081(0xb6)][_0x450081(0x86)]['ORANGE'],'description':this[_0x450081(0x9b)][_0x450081(0xa8)][_0x450081(0x91)](_0x2a93df['language'],_0x450081(0x8c),_0x450081(0x9c)+_0x4694d2,this[_0x450081(0x9f)][_0x450081(0x94)],_0x207214)}})[_0x450081(0xb5)](()=>{}));}return _0x3074df[_0x450081(0x9a)]();}async[_0x11e19f(0xa1)](_0x23d4da){const _0x1c1844=_0x11e19f,_0xc90482=this['document']?this['document']:await this[_0x1c1844(0xac)]();return _0xc90482[_0x1c1844(0xa9)]=undefined,delete _0xc90482[_0x1c1844(0xa9)],this[_0x1c1844(0x9f)][_0x1c1844(0x8f)]({'event':_0x1c1844(0xad),'fields':[{'name':_0x1c1844(0xa2),'value':this['user']['tag']+_0x1c1844(0x80)+this['id']},{'name':_0x1c1844(0xb8),'value':_0x23d4da}]})[_0x1c1844(0xb5)](tesseract_1[_0x1c1844(0x92)][_0x1c1844(0xb7)]),_0xc90482[_0x1c1844(0x9a)]();}async[_0x11e19f(0xa0)](_0x32f378,_0x26c870,_0x317b04){const _0x171888=_0x11e19f;_0x32f378=Math['abs'](_0x32f378);const _0x416d30=_0x317b04||await this[_0x171888(0xac)]();return _0x32f378&&(_0x416d30[_0x171888(0x93)]=numbers[_0x171888(0xa7)](_0x416d30[_0x171888(0x93)]+_0x32f378,Number['MAX_SAFE_INTEGER']),!_0x317b04&&await Transaction_1[_0x171888(0x83)]['create']({'guild':this[_0x171888(0x9f)]['id'],'sender':this[_0x171888(0x9b)][_0x171888(0x8a)]['id'],'receiver':_0x416d30['user'],'amount':_0x32f378,'time':new Date(),'note':_0x26c870})['catch'](tesseract_1[_0x171888(0x92)][_0x171888(0xb7)])),_0x317b04?_0x416d30:_0x416d30[_0x171888(0x9a)]();}async[_0x11e19f(0x8d)](_0x427bb8,_0x19fc3e,_0x24534a){const _0x56c207=_0x11e19f;_0x427bb8=Math[_0x56c207(0x97)](_0x427bb8);const _0x37782a=_0x24534a||await this[_0x56c207(0xac)]();return _0x427bb8&&(_0x37782a[_0x56c207(0x93)]=numbers['clamp'](_0x37782a[_0x56c207(0x93)]-_0x427bb8,Number[_0x56c207(0x85)],Number['MAX_SAFE_INTEGER']),!_0x24534a&&await Transaction_1[_0x56c207(0x83)]['create']({'guild':this[_0x56c207(0x9f)]['id'],'sender':_0x37782a['user'],'receiver':this[_0x56c207(0x9b)][_0x56c207(0x8a)]['id'],'amount':_0x427bb8,'time':new Date(),'note':_0x19fc3e})['catch'](tesseract_1[_0x56c207(0x92)][_0x56c207(0xb7)])),_0x24534a?_0x37782a:_0x37782a[_0x56c207(0x9a)]();}};
const a211_0x2512=['document','kickThreshold','COLORS','ownerID','createModerationLog','client','User','send','addInfraction','kickable','exports','Action','../models/Transaction','findOne','has','return\x20/\x22\x20+\x20this\x20+\x20\x22/','clamp','MIN_SAFE_INTEGER','discord.js','getDocument','roles','test','user','save','Reason','Logger','Constants','GuildMember','getString','bannable','locale','constructor','ban','default','debit','clearInfractions','Ban','comparePositionTo','guild','error','@bastion/tesseract','isMusicMaster','../models/Member','\x20/\x20','infractionAdd','infractionClear','music','catch','abs','name','length','credit','banThreshold','Kick','MAX_SAFE_INTEGER','\x20infractions.','highest','ORANGE','create','apply','language','infractions','roleId','canManage','isOwner','push','balance'];(function(_0x4c2d20,_0x2512ec){const _0x485786=function(_0x5e79f7){while(--_0x5e79f7){_0x4c2d20['push'](_0x4c2d20['shift']());}},_0x57cfdd=function(){const _0x10c959={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x5acba3,_0x32543b,_0x22173a,_0x4c2831){_0x4c2831=_0x4c2831||{};let _0xc7b13d=_0x32543b+'='+_0x22173a,_0x4d346c=0x0;for(let _0x509caf=0x0,_0x29b050=_0x5acba3['length'];_0x509caf<_0x29b050;_0x509caf++){const _0x332bbe=_0x5acba3[_0x509caf];_0xc7b13d+=';\x20'+_0x332bbe;const _0x2544b3=_0x5acba3[_0x332bbe];_0x5acba3['push'](_0x2544b3),_0x29b050=_0x5acba3['length'],_0x2544b3!==!![]&&(_0xc7b13d+='='+_0x2544b3);}_0x4c2831['cookie']=_0xc7b13d;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1be02a,_0x1654e5){_0x1be02a=_0x1be02a||function(_0x3d3023){return _0x3d3023;};const _0x467d63=_0x1be02a(new RegExp('(?:^|;\x20)'+_0x1654e5['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x2ec43a=function(_0x221673,_0x4323f4){_0x221673(++_0x4323f4);};return _0x2ec43a(_0x485786,_0x2512ec),_0x467d63?decodeURIComponent(_0x467d63[0x1]):undefined;}},_0x2b29ad=function(){const _0x1ff184=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x1ff184['test'](_0x10c959['removeCookie']['toString']());};_0x10c959['updateCookie']=_0x2b29ad;let _0x1d2358='';const _0x4dd5d6=_0x10c959['updateCookie']();if(!_0x4dd5d6)_0x10c959['setCookie'](['*'],'counter',0x1);else _0x4dd5d6?_0x1d2358=_0x10c959['getCookie'](null,'counter'):_0x10c959['removeCookie']();};_0x57cfdd();}(a211_0x2512,0x170));const a211_0x4857=function(_0x4c2d20,_0x2512ec){_0x4c2d20=_0x4c2d20-0x0;let _0x485786=a211_0x2512[_0x4c2d20];return _0x485786;};const _0x577ad2=a211_0x4857,a211_0x10c959=function(){let _0x1d2358=!![];return function(_0x4dd5d6,_0x5acba3){const _0x32543b=_0x1d2358?function(){const _0x2a0d00=a211_0x4857;if(_0x5acba3){const _0x22173a=_0x5acba3[_0x2a0d00('0x1a')](_0x4dd5d6,arguments);return _0x5acba3=null,_0x22173a;}}:function(){};return _0x1d2358=![],_0x32543b;};}(),a211_0x5e79f7=a211_0x10c959(this,function(){const _0x4c2831=function(){const _0x5a90c5=a211_0x4857,_0xc7b13d=_0x4c2831[_0x5a90c5('0x41')](_0x5a90c5('0x31'))()[_0x5a90c5('0x41')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0xc7b13d[_0x5a90c5('0x37')](a211_0x5e79f7);};return _0x4c2831();});a211_0x5e79f7();'use strict';const tesseract_1=require(_0x577ad2('0x7')),discord_js_1=require(_0x577ad2('0x34')),Member_1=require(_0x577ad2('0x9')),Transaction_1=require(_0x577ad2('0x2e')),numbers=require('../utils/numbers');module[_0x577ad2('0x2c')]=class BastionGuildMember extends discord_js_1[_0x577ad2('0x3d')]{constructor(_0x4d346c,_0x509caf,_0x29b050){super(_0x4d346c,_0x509caf,_0x29b050);}[_0x577ad2('0x1e')](_0x332bbe){const _0xec4a22=_0x577ad2;if(this['id']===this[_0xec4a22('0x5')][_0xec4a22('0x25')])return!![];if(_0x332bbe['id']===this[_0xec4a22('0x5')]['ownerID'])return![];if(this['id']===_0x332bbe['id'])return![];return this[_0xec4a22('0x36')][_0xec4a22('0x17')][_0xec4a22('0x4')](_0x332bbe[_0xec4a22('0x36')][_0xec4a22('0x17')])>0x0;}async[_0x577ad2('0x35')](){const _0x2dabd9=_0x577ad2;return await Member_1[_0x2dabd9('0x0')][_0x2dabd9('0x2f')]({'user':this['id'],'guild':this['guild']['id']});}[_0x577ad2('0x8')](){const _0x3b7265=_0x577ad2;if(this[_0x3b7265('0x38')][_0x3b7265('0x1f')]())return!![];return this[_0x3b7265('0x5')][_0x3b7265('0x22')][_0x3b7265('0xd')]&&this[_0x3b7265('0x5')][_0x3b7265('0x22')][_0x3b7265('0xd')][_0x3b7265('0x1d')]&&this[_0x3b7265('0x36')]['cache'][_0x3b7265('0x30')](this[_0x3b7265('0x5')][_0x3b7265('0x22')][_0x3b7265('0xd')][_0x3b7265('0x1d')]);}async[_0x577ad2('0x2a')](_0x2544b3){const _0x44c3b6=_0x577ad2;let _0x1be02a=await this[_0x44c3b6('0x35')]();_0x1be02a?_0x1be02a[_0x44c3b6('0x1c')]?_0x1be02a[_0x44c3b6('0x1c')][_0x44c3b6('0x20')](_0x2544b3):_0x1be02a['infractions']=[_0x2544b3]:_0x1be02a=await Member_1[_0x44c3b6('0x0')][_0x44c3b6('0x19')]({'user':this['id'],'guild':this['guild']['id'],'infractions':[_0x2544b3]});const _0x1654e5=this[_0x44c3b6('0x5')][_0x44c3b6('0x22')]?this[_0x44c3b6('0x5')][_0x44c3b6('0x22')]:await this[_0x44c3b6('0x5')]['getDocument']();if(_0x1654e5['infractions']){const _0x467d63=_0x1be02a[_0x44c3b6('0x1c')]['length'];let _0x2ec43a;this[_0x44c3b6('0x2b')]&&_0x1be02a[_0x44c3b6('0x1c')][_0x44c3b6('0x11')]===_0x1654e5['infractions'][_0x44c3b6('0x23')]&&(_0x2ec43a=_0x44c3b6('0x14'),await this['kick'](_0x1be02a['infractions'][_0x44c3b6('0x11')]+_0x44c3b6('0x16'))),this[_0x44c3b6('0x3f')]&&_0x1be02a[_0x44c3b6('0x1c')][_0x44c3b6('0x11')]===_0x1654e5['infractions'][_0x44c3b6('0x13')]&&(_0x2ec43a=_0x44c3b6('0x3'),await this[_0x44c3b6('0x42')]({'reason':_0x1be02a[_0x44c3b6('0x1c')][_0x44c3b6('0x11')]+_0x44c3b6('0x16')}),_0x1be02a[_0x44c3b6('0x1c')]=undefined,delete _0x1be02a[_0x44c3b6('0x1c')]),_0x2ec43a&&(this['guild']['createModerationLog']({'event':_0x44c3b6('0xb'),'fields':[{'name':_0x44c3b6('0x28'),'value':this['user']['tag']+_0x44c3b6('0xa')+this['id']},{'name':_0x44c3b6('0x2d'),'value':_0x2ec43a},{'name':_0x44c3b6('0x3a'),'value':_0x2544b3}]})[_0x44c3b6('0xe')](tesseract_1[_0x44c3b6('0x3b')][_0x44c3b6('0x6')]),await this[_0x44c3b6('0x29')]({'embed':{'color':tesseract_1[_0x44c3b6('0x3c')][_0x44c3b6('0x24')][_0x44c3b6('0x18')],'description':this[_0x44c3b6('0x27')][_0x44c3b6('0x40')][_0x44c3b6('0x3e')](_0x1654e5[_0x44c3b6('0x1b')],'info','memberInfractions'+_0x2ec43a,this['guild'][_0x44c3b6('0x10')],_0x467d63)}})[_0x44c3b6('0xe')](()=>{}));}return _0x1be02a[_0x44c3b6('0x39')]();}async[_0x577ad2('0x2')](_0x3d3023){const _0xa4cd93=_0x577ad2,_0x221673=this[_0xa4cd93('0x22')]?this[_0xa4cd93('0x22')]:await this[_0xa4cd93('0x35')]();return _0x221673['infractions']=undefined,delete _0x221673['infractions'],this[_0xa4cd93('0x5')][_0xa4cd93('0x26')]({'event':_0xa4cd93('0xc'),'fields':[{'name':_0xa4cd93('0x28'),'value':this[_0xa4cd93('0x38')]['tag']+_0xa4cd93('0xa')+this['id']},{'name':'Reason','value':_0x3d3023}]})[_0xa4cd93('0xe')](tesseract_1[_0xa4cd93('0x3b')][_0xa4cd93('0x6')]),_0x221673['save']();}async[_0x577ad2('0x12')](_0x4323f4,_0x1ff184,_0x5a0298){const _0x3637ef=_0x577ad2;_0x4323f4=Math[_0x3637ef('0xf')](_0x4323f4);const _0x17eab3=_0x5a0298||await this[_0x3637ef('0x35')]();return _0x4323f4&&(_0x17eab3[_0x3637ef('0x21')]=numbers[_0x3637ef('0x32')](_0x17eab3['balance']+_0x4323f4,Number[_0x3637ef('0x15')]),!_0x5a0298&&await Transaction_1[_0x3637ef('0x0')][_0x3637ef('0x19')]({'guild':this['guild']['id'],'sender':this[_0x3637ef('0x27')]['user']['id'],'receiver':_0x17eab3[_0x3637ef('0x38')],'amount':_0x4323f4,'time':new Date(),'note':_0x1ff184})['catch'](tesseract_1[_0x3637ef('0x3b')][_0x3637ef('0x6')])),_0x5a0298?_0x17eab3:_0x17eab3['save']();}async[_0x577ad2('0x1')](_0x5985c4,_0x50f707,_0x48ab1c){const _0x3aacc5=_0x577ad2;_0x5985c4=Math[_0x3aacc5('0xf')](_0x5985c4);const _0x345a5f=_0x48ab1c||await this[_0x3aacc5('0x35')]();return _0x5985c4&&(_0x345a5f[_0x3aacc5('0x21')]=numbers[_0x3aacc5('0x32')](_0x345a5f[_0x3aacc5('0x21')]-_0x5985c4,Number[_0x3aacc5('0x33')],Number[_0x3aacc5('0x15')]),!_0x48ab1c&&await Transaction_1[_0x3aacc5('0x0')][_0x3aacc5('0x19')]({'guild':this[_0x3aacc5('0x5')]['id'],'sender':_0x345a5f[_0x3aacc5('0x38')],'receiver':this['client']['user']['id'],'amount':_0x5985c4,'time':new Date(),'note':_0x50f707})[_0x3aacc5('0xe')](tesseract_1[_0x3aacc5('0x3b')][_0x3aacc5('0x6')])),_0x48ab1c?_0x345a5f:_0x345a5f['save']();}};
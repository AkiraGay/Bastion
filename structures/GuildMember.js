const a220_0x2993=['apply','balance','default','clamp','infractionClear','abs','highest','send','name','language','\x20infractions.','@bastion/tesseract','kickThreshold','credit','roleId','clearInfractions','infractions','document','length','Constants','kickable','isMusicMaster','create','Kick','music','isOwner','../models/Transaction','getString','../models/Member','comparePositionTo','constructor','MIN_SAFE_INTEGER','user','Logger','error','getDocument','banThreshold','info','cache','\x20/\x20','discord.js','COLORS','Ban','ban','exports','has','User','canManage','return\x20/\x22\x20+\x20this\x20+\x20\x22/','ownerID','guild','MAX_SAFE_INTEGER','tag','roles','Action','Reason','addInfraction','bannable','push','ORANGE','save','client','locale','catch','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}'];(function(_0xafd740,_0x29931f){const _0x35a622=function(_0x58fc7f){while(--_0x58fc7f){_0xafd740['push'](_0xafd740['shift']());}},_0x3028c5=function(){const _0x1bfdeb={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2ef81c,_0x380879,_0x5b46e0,_0x58ef7f){_0x58ef7f=_0x58ef7f||{};let _0x321c24=_0x380879+'='+_0x5b46e0,_0x44c7a2=0x0;for(let _0x274774=0x0,_0x4a71d7=_0x2ef81c['length'];_0x274774<_0x4a71d7;_0x274774++){const _0x1884ca=_0x2ef81c[_0x274774];_0x321c24+=';\x20'+_0x1884ca;const _0xa6e8b=_0x2ef81c[_0x1884ca];_0x2ef81c['push'](_0xa6e8b),_0x4a71d7=_0x2ef81c['length'],_0xa6e8b!==!![]&&(_0x321c24+='='+_0xa6e8b);}_0x58ef7f['cookie']=_0x321c24;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4a9e47,_0x2c2567){_0x4a9e47=_0x4a9e47||function(_0x4948d4){return _0x4948d4;};const _0x1b66ca=_0x4a9e47(new RegExp('(?:^|;\x20)'+_0x2c2567['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0xf14c75=function(_0x252a51,_0x48786d){_0x252a51(++_0x48786d);};return _0xf14c75(_0x35a622,_0x29931f),_0x1b66ca?decodeURIComponent(_0x1b66ca[0x1]):undefined;}},_0x3a11c1=function(){const _0x40a349=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x40a349['test'](_0x1bfdeb['removeCookie']['toString']());};_0x1bfdeb['updateCookie']=_0x3a11c1;let _0x544881='';const _0x4da5b6=_0x1bfdeb['updateCookie']();if(!_0x4da5b6)_0x1bfdeb['setCookie'](['*'],'counter',0x1);else _0x4da5b6?_0x544881=_0x1bfdeb['getCookie'](null,'counter'):_0x1bfdeb['removeCookie']();};_0x3028c5();}(a220_0x2993,0xd9));const a220_0x35a6=function(_0xafd740,_0x29931f){_0xafd740=_0xafd740-0x0;let _0x35a622=a220_0x2993[_0xafd740];return _0x35a622;};const _0x30ddcc=a220_0x35a6,a220_0x1bfdeb=function(){let _0x544881=!![];return function(_0x4da5b6,_0x2ef81c){const _0x380879=_0x544881?function(){const _0x5853fc=a220_0x35a6;if(_0x2ef81c){const _0x5b46e0=_0x2ef81c[_0x5853fc('0x2b')](_0x4da5b6,arguments);return _0x2ef81c=null,_0x5b46e0;}}:function(){};return _0x544881=![],_0x380879;};}(),a220_0x58fc7f=a220_0x1bfdeb(this,function(){const _0x58ef7f=function(){const _0x20e599=a220_0x35a6,_0x321c24=_0x58ef7f[_0x20e599('0x8')](_0x20e599('0x1a'))()[_0x20e599('0x8')](_0x20e599('0x2a'));return!_0x321c24['test'](a220_0x58fc7f);};return _0x58ef7f();});a220_0x58fc7f();'use strict';const tesseract_1=require(_0x30ddcc('0x36')),discord_js_1=require(_0x30ddcc('0x12')),Member_1=require(_0x30ddcc('0x6')),Transaction_1=require(_0x30ddcc('0x4')),numbers=require('../utils/numbers');module[_0x30ddcc('0x16')]=class BastionGuildMember extends discord_js_1['GuildMember']{constructor(_0x44c7a2,_0x274774,_0x4a71d7){super(_0x44c7a2,_0x274774,_0x4a71d7);}[_0x30ddcc('0x19')](_0x1884ca){const _0x83c626=_0x30ddcc;if(this['id']===this[_0x83c626('0x1c')][_0x83c626('0x1b')])return!![];if(_0x1884ca['id']===this[_0x83c626('0x1c')][_0x83c626('0x1b')])return![];if(this['id']===_0x1884ca['id'])return![];return this['roles'][_0x83c626('0x31')][_0x83c626('0x7')](_0x1884ca[_0x83c626('0x1f')][_0x83c626('0x31')])>0x0;}async['getDocument'](){const _0x2f25bf=_0x30ddcc;return await Member_1[_0x2f25bf('0x2d')]['findOne']({'user':this['id'],'guild':this['guild']['id']});}[_0x30ddcc('0x40')](){const _0x477aaa=_0x30ddcc;if(this['user'][_0x477aaa('0x3')]())return!![];return this['guild'][_0x477aaa('0x3c')]['music']&&this['guild'][_0x477aaa('0x3c')][_0x477aaa('0x2')]['roleId']&&this[_0x477aaa('0x1f')][_0x477aaa('0x10')][_0x477aaa('0x17')](this['guild']['document'][_0x477aaa('0x2')][_0x477aaa('0x39')]);}async[_0x30ddcc('0x22')](_0xa6e8b){const _0x2309ed=_0x30ddcc;let _0x4a9e47=await this[_0x2309ed('0xd')]();_0x4a9e47?_0x4a9e47['infractions']?_0x4a9e47[_0x2309ed('0x3b')][_0x2309ed('0x24')](_0xa6e8b):_0x4a9e47[_0x2309ed('0x3b')]=[_0xa6e8b]:_0x4a9e47=await Member_1[_0x2309ed('0x2d')][_0x2309ed('0x0')]({'user':this['id'],'guild':this[_0x2309ed('0x1c')]['id'],'infractions':[_0xa6e8b]});const _0x2c2567=this[_0x2309ed('0x1c')][_0x2309ed('0x3c')]?this[_0x2309ed('0x1c')][_0x2309ed('0x3c')]:await this[_0x2309ed('0x1c')][_0x2309ed('0xd')]();if(_0x2c2567['infractions']){const _0x1b66ca=_0x4a9e47[_0x2309ed('0x3b')][_0x2309ed('0x3d')];let _0xf14c75;this[_0x2309ed('0x3f')]&&_0x4a9e47[_0x2309ed('0x3b')]['length']===_0x2c2567[_0x2309ed('0x3b')][_0x2309ed('0x37')]&&(_0xf14c75=_0x2309ed('0x1'),await this['kick'](_0x4a9e47[_0x2309ed('0x3b')][_0x2309ed('0x3d')]+'\x20infractions.')),this[_0x2309ed('0x23')]&&_0x4a9e47[_0x2309ed('0x3b')][_0x2309ed('0x3d')]===_0x2c2567[_0x2309ed('0x3b')][_0x2309ed('0xe')]&&(_0xf14c75=_0x2309ed('0x14'),await this[_0x2309ed('0x15')]({'reason':_0x4a9e47[_0x2309ed('0x3b')][_0x2309ed('0x3d')]+_0x2309ed('0x35')}),_0x4a9e47[_0x2309ed('0x3b')]=undefined,delete _0x4a9e47[_0x2309ed('0x3b')]),_0xf14c75&&(this[_0x2309ed('0x1c')]['createModerationLog']({'event':'infractionAdd','fields':[{'name':_0x2309ed('0x18'),'value':this[_0x2309ed('0xa')][_0x2309ed('0x1e')]+_0x2309ed('0x11')+this['id']},{'name':_0x2309ed('0x20'),'value':_0xf14c75},{'name':_0x2309ed('0x21'),'value':_0xa6e8b}]})['catch'](tesseract_1[_0x2309ed('0xb')]['error']),await this[_0x2309ed('0x32')]({'embed':{'color':tesseract_1[_0x2309ed('0x3e')][_0x2309ed('0x13')][_0x2309ed('0x25')],'description':this[_0x2309ed('0x27')][_0x2309ed('0x28')][_0x2309ed('0x5')](_0x2c2567[_0x2309ed('0x34')],_0x2309ed('0xf'),'memberInfractions'+_0xf14c75,this[_0x2309ed('0x1c')][_0x2309ed('0x33')],_0x1b66ca)}})[_0x2309ed('0x29')](()=>{}));}return _0x4a9e47[_0x2309ed('0x26')]();}async[_0x30ddcc('0x3a')](_0x4948d4){const _0x8835d2=_0x30ddcc,_0x252a51=this[_0x8835d2('0x3c')]?this[_0x8835d2('0x3c')]:await this[_0x8835d2('0xd')]();return _0x252a51[_0x8835d2('0x3b')]=undefined,delete _0x252a51['infractions'],this[_0x8835d2('0x1c')]['createModerationLog']({'event':_0x8835d2('0x2f'),'fields':[{'name':'User','value':this[_0x8835d2('0xa')][_0x8835d2('0x1e')]+_0x8835d2('0x11')+this['id']},{'name':_0x8835d2('0x21'),'value':_0x4948d4}]})[_0x8835d2('0x29')](tesseract_1[_0x8835d2('0xb')][_0x8835d2('0xc')]),_0x252a51[_0x8835d2('0x26')]();}async[_0x30ddcc('0x38')](_0x48786d,_0x40a349,_0x4e1f2e){const _0x362581=_0x30ddcc;_0x48786d=Math[_0x362581('0x30')](_0x48786d);const _0x719c0d=_0x4e1f2e||await this[_0x362581('0xd')]();return _0x48786d&&(_0x719c0d[_0x362581('0x2c')]=numbers[_0x362581('0x2e')](_0x719c0d['balance']+_0x48786d,Number['MAX_SAFE_INTEGER']),!_0x4e1f2e&&await Transaction_1[_0x362581('0x2d')][_0x362581('0x0')]({'guild':this['guild']['id'],'sender':this[_0x362581('0x27')]['user']['id'],'receiver':_0x719c0d[_0x362581('0xa')],'amount':_0x48786d,'time':new Date(),'note':_0x40a349})[_0x362581('0x29')](tesseract_1[_0x362581('0xb')][_0x362581('0xc')])),_0x4e1f2e?_0x719c0d:_0x719c0d[_0x362581('0x26')]();}async['debit'](_0x246b41,_0x29a523,_0x5b1b0b){const _0x3dba5c=_0x30ddcc;_0x246b41=Math[_0x3dba5c('0x30')](_0x246b41);const _0x56d012=_0x5b1b0b||await this['getDocument']();return _0x246b41&&(_0x56d012['balance']=numbers[_0x3dba5c('0x2e')](_0x56d012[_0x3dba5c('0x2c')]-_0x246b41,Number[_0x3dba5c('0x9')],Number[_0x3dba5c('0x1d')]),!_0x5b1b0b&&await Transaction_1[_0x3dba5c('0x2d')][_0x3dba5c('0x0')]({'guild':this[_0x3dba5c('0x1c')]['id'],'sender':_0x56d012[_0x3dba5c('0xa')],'receiver':this[_0x3dba5c('0x27')][_0x3dba5c('0xa')]['id'],'amount':_0x246b41,'time':new Date(),'note':_0x29a523})['catch'](tesseract_1[_0x3dba5c('0xb')][_0x3dba5c('0xc')])),_0x5b1b0b?_0x56d012:_0x56d012['save']();}};
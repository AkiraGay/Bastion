const a197_0x2cc2=['\x20infractions.','ownerID','ban','memberInfractions','credit','@bastion/tesseract','return\x20/\x22\x20+\x20this\x20+\x20\x22/','banThreshold','clearInfractions','save','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','ORANGE','getString','balance','debit','exports','error','create','roles','getDocument','kickThreshold','canManage','isOwner','Logger','default','user','roleId','COLORS','compile','comparePositionTo','cache','isMusicMaster','has','send','Ban','Constants','apply','addInfraction','info','client','../utils/numbers','guild','length','kick','MAX_SAFE_INTEGER','abs','kickable','document','MIN_SAFE_INTEGER','highest','infractions','test','GuildMember','constructor','locale','music','catch'];(function(_0x47f546,_0x2cc26c){const _0x1bf704=function(_0x31743e){while(--_0x31743e){_0x47f546['push'](_0x47f546['shift']());}};const _0x4bc904=function(){const _0x56c886={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x1a04f5,_0x25de3c,_0x3c4939,_0x15f696){_0x15f696=_0x15f696||{};let _0x24d0cf=_0x25de3c+'='+_0x3c4939;let _0x4b9bd1=0x0;for(let _0x5b48b2=0x0,_0x5e4604=_0x1a04f5['length'];_0x5b48b2<_0x5e4604;_0x5b48b2++){const _0x3b7b50=_0x1a04f5[_0x5b48b2];_0x24d0cf+=';\x20'+_0x3b7b50;const _0x3feef4=_0x1a04f5[_0x3b7b50];_0x1a04f5['push'](_0x3feef4);_0x5e4604=_0x1a04f5['length'];if(_0x3feef4!==!![]){_0x24d0cf+='='+_0x3feef4;}}_0x15f696['cookie']=_0x24d0cf;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2d2480,_0x265aa6){_0x2d2480=_0x2d2480||function(_0x3448ab){return _0x3448ab;};const _0x54d8e5=_0x2d2480(new RegExp('(?:^|;\x20)'+_0x265aa6['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x561e85=function(_0x46792e,_0x214e58){_0x46792e(++_0x214e58);};_0x561e85(_0x1bf704,_0x2cc26c);return _0x54d8e5?decodeURIComponent(_0x54d8e5[0x1]):undefined;}};const _0x582dd7=function(){const _0x702c17=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x702c17['test'](_0x56c886['removeCookie']['toString']());};_0x56c886['updateCookie']=_0x582dd7;let _0x3e7c76='';const _0x1bdfe8=_0x56c886['updateCookie']();if(!_0x1bdfe8){_0x56c886['setCookie'](['*'],'counter',0x1);}else if(_0x1bdfe8){_0x3e7c76=_0x56c886['getCookie'](null,'counter');}else{_0x56c886['removeCookie']();}};_0x4bc904();}(a197_0x2cc2,0x192));const a197_0x1bf7=function(_0x47f546,_0x2cc26c){_0x47f546=_0x47f546-0x0;let _0x1bf704=a197_0x2cc2[_0x47f546];return _0x1bf704;};const a197_0x56c886=function(){let _0x2b543d=!![];return function(_0x26d2aa,_0x45e638){const _0x5e6e91=_0x2b543d?function(){if(_0x45e638){const _0x126180=_0x45e638[a197_0x1bf7('0x21')](_0x26d2aa,arguments);_0x45e638=null;return _0x126180;}}:function(){};_0x2b543d=![];return _0x5e6e91;};}();const a197_0x31743e=a197_0x56c886(this,function(){const _0x17c84a=function(){const _0x1d4c52=_0x17c84a[a197_0x1bf7('0x32')](a197_0x1bf7('0x3'))()[a197_0x1bf7('0x19')](a197_0x1bf7('0x7'));return!_0x1d4c52[a197_0x1bf7('0x30')](a197_0x31743e);};return _0x17c84a();});a197_0x31743e();'use strict';const tesseract_1=require(a197_0x1bf7('0x2'));const discord_js_1=require('discord.js');const Member_1=require('../models/Member');const Transaction_1=require('../models/Transaction');const numbers=require(a197_0x1bf7('0x25'));module[a197_0x1bf7('0xc')]=class BastionGuildMember extends discord_js_1[a197_0x1bf7('0x31')]{constructor(_0x5b2599,_0x520d88,_0x1757f0){super(_0x5b2599,_0x520d88,_0x1757f0);}[a197_0x1bf7('0x12')](_0x1997f6){if(this['id']===this['guild']['ownerID'])return!![];if(_0x1997f6['id']===this[a197_0x1bf7('0x26')][a197_0x1bf7('0x37')])return![];if(this['id']===_0x1997f6['id'])return![];return this[a197_0x1bf7('0xf')][a197_0x1bf7('0x2e')][a197_0x1bf7('0x1a')](_0x1997f6[a197_0x1bf7('0xf')]['highest'])>0x0;}async[a197_0x1bf7('0x10')](){return await Member_1[a197_0x1bf7('0x15')]['findOne']({'user':this['id'],'guild':this[a197_0x1bf7('0x26')]['id']});}[a197_0x1bf7('0x1c')](){if(this[a197_0x1bf7('0x16')][a197_0x1bf7('0x13')]())return!![];return this[a197_0x1bf7('0x26')][a197_0x1bf7('0x2c')][a197_0x1bf7('0x34')]&&this['guild']['document']['music'][a197_0x1bf7('0x17')]&&this[a197_0x1bf7('0xf')][a197_0x1bf7('0x1b')][a197_0x1bf7('0x1d')](this['guild'][a197_0x1bf7('0x2c')][a197_0x1bf7('0x34')]['roleId']);}async[a197_0x1bf7('0x22')](_0x224908){const _0x25e276=await this[a197_0x1bf7('0x10')]();if(_0x25e276[a197_0x1bf7('0x2f')]){_0x25e276[a197_0x1bf7('0x2f')]['push'](_0x224908);}else{_0x25e276[a197_0x1bf7('0x2f')]=[_0x224908];}const _0x541985=this[a197_0x1bf7('0x26')][a197_0x1bf7('0x2c')]?this['guild']['document']:await this[a197_0x1bf7('0x26')][a197_0x1bf7('0x10')]();if(_0x541985['infractions']){const _0x32b752=_0x25e276[a197_0x1bf7('0x2f')]['length'];let _0x4b5c54;if(this[a197_0x1bf7('0x2b')]&&_0x25e276[a197_0x1bf7('0x2f')]['length']===_0x541985['infractions'][a197_0x1bf7('0x11')]){_0x4b5c54='Kick';await this[a197_0x1bf7('0x28')](_0x25e276['infractions'][a197_0x1bf7('0x27')]+a197_0x1bf7('0x36'));}if(this['bannable']&&_0x25e276[a197_0x1bf7('0x2f')][a197_0x1bf7('0x27')]===_0x541985[a197_0x1bf7('0x2f')][a197_0x1bf7('0x4')]){_0x4b5c54=a197_0x1bf7('0x1f');await this[a197_0x1bf7('0x38')]({'reason':_0x25e276[a197_0x1bf7('0x2f')]['length']+a197_0x1bf7('0x36')});_0x25e276[a197_0x1bf7('0x2f')]=undefined;delete _0x25e276[a197_0x1bf7('0x2f')];}if(_0x4b5c54){await this[a197_0x1bf7('0x1e')]({'embed':{'color':tesseract_1[a197_0x1bf7('0x20')][a197_0x1bf7('0x18')][a197_0x1bf7('0x8')],'description':this[a197_0x1bf7('0x24')][a197_0x1bf7('0x33')][a197_0x1bf7('0x9')](_0x541985['language'],a197_0x1bf7('0x23'),a197_0x1bf7('0x0')+_0x4b5c54,this[a197_0x1bf7('0x26')]['name'],_0x32b752)}})[a197_0x1bf7('0x35')](()=>{});}}return _0x25e276['save']();}async[a197_0x1bf7('0x5')](){const _0x5692fa=this['document']?this[a197_0x1bf7('0x2c')]:await this[a197_0x1bf7('0x10')]();_0x5692fa['infractions']=undefined;delete _0x5692fa[a197_0x1bf7('0x2f')];return _0x5692fa[a197_0x1bf7('0x6')]();}async[a197_0x1bf7('0x1')](_0x2be4c0,_0x3024cc,_0xb20b2){_0x2be4c0=Math[a197_0x1bf7('0x2a')](_0x2be4c0);const _0x35722a=_0xb20b2||await this[a197_0x1bf7('0x10')]();if(_0x2be4c0){_0x35722a[a197_0x1bf7('0xa')]=numbers['clamp'](_0x35722a[a197_0x1bf7('0xa')]+_0x2be4c0,Number[a197_0x1bf7('0x29')]);if(!_0xb20b2){await Transaction_1[a197_0x1bf7('0x15')][a197_0x1bf7('0xe')]({'guild':this['guild']['id'],'sender':this[a197_0x1bf7('0x24')]['user']['id'],'receiver':_0xb20b2[a197_0x1bf7('0x16')],'amount':_0x2be4c0,'time':new Date(),'note':_0x3024cc})[a197_0x1bf7('0x35')](tesseract_1['Logger'][a197_0x1bf7('0xd')]);}}return _0xb20b2?_0x35722a:_0x35722a[a197_0x1bf7('0x6')]();}async[a197_0x1bf7('0xb')](_0x37e8c9,_0x2f94b2,_0x4af198){_0x37e8c9=Math['abs'](_0x37e8c9);const _0x105b80=_0x4af198||await this['getDocument']();if(_0x37e8c9){_0x105b80['balance']=numbers['clamp'](_0x105b80[a197_0x1bf7('0xa')]-_0x37e8c9,Number[a197_0x1bf7('0x2d')]);if(!_0x4af198){await Transaction_1[a197_0x1bf7('0x15')]['create']({'guild':this[a197_0x1bf7('0x26')]['id'],'sender':_0x4af198['user'],'receiver':this[a197_0x1bf7('0x24')][a197_0x1bf7('0x16')]['id'],'amount':_0x37e8c9,'time':new Date(),'note':_0x2f94b2})[a197_0x1bf7('0x35')](tesseract_1[a197_0x1bf7('0x14')][a197_0x1bf7('0xd')]);}}return _0x4af198?_0x105b80:_0x105b80[a197_0x1bf7('0x6')]();}};
const a637_0x5359=['send','isMusicMaster','bannable','roles','error','return\x20/\x22\x20+\x20this\x20+\x20\x22/','guild','banThreshold','create','ban','balance','findOne','music','apply','roleId','@bastion/tesseract','discord.js','name','\x20infractions.','getDocument','credit','catch','user','../models/Member','canManage','clamp','client','save','GuildMember','locale','MAX_SAFE_INTEGER','default','infractions','language','memberInfractions','comparePositionTo','getString','addInfraction','has','cache','Ban','Kick','Constants','COLORS','abs','highest','length','document','Logger','ownerID'];(function(_0x2f08c1,_0x53598b){const _0x18ea3f=function(_0x15d1af){while(--_0x15d1af){_0x2f08c1['push'](_0x2f08c1['shift']());}};const _0x4477ff=function(){const _0x51c03d={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x927a71,_0x577ba4,_0x5ae1d6,_0x574064){_0x574064=_0x574064||{};let _0x384f8a=_0x577ba4+'='+_0x5ae1d6;let _0x161123=0x0;for(let _0x131d81=0x0,_0x5cf591=_0x927a71['length'];_0x131d81<_0x5cf591;_0x131d81++){const _0x4bd7f8=_0x927a71[_0x131d81];_0x384f8a+=';\x20'+_0x4bd7f8;const _0x5d57eb=_0x927a71[_0x4bd7f8];_0x927a71['push'](_0x5d57eb);_0x5cf591=_0x927a71['length'];if(_0x5d57eb!==!![]){_0x384f8a+='='+_0x5d57eb;}}_0x574064['cookie']=_0x384f8a;},'removeCookie':function(){return'dev';},'getCookie':function(_0x213e8e,_0x170943){_0x213e8e=_0x213e8e||function(_0x566c3f){return _0x566c3f;};const _0x456d9d=_0x213e8e(new RegExp('(?:^|;\x20)'+_0x170943['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x22611a=function(_0x2b430b,_0x119148){_0x2b430b(++_0x119148);};_0x22611a(_0x18ea3f,_0x53598b);return _0x456d9d?decodeURIComponent(_0x456d9d[0x1]):undefined;}};const _0x23da69=function(){const _0x4f859e=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4f859e['test'](_0x51c03d['removeCookie']['toString']());};_0x51c03d['updateCookie']=_0x23da69;let _0xb269b='';const _0x4ae1a6=_0x51c03d['updateCookie']();if(!_0x4ae1a6){_0x51c03d['setCookie'](['*'],'counter',0x1);}else if(_0x4ae1a6){_0xb269b=_0x51c03d['getCookie'](null,'counter');}else{_0x51c03d['removeCookie']();}};_0x4477ff();}(a637_0x5359,0x129));const a637_0x18ea=function(_0x2f08c1,_0x53598b){_0x2f08c1=_0x2f08c1-0x0;let _0x18ea3f=a637_0x5359[_0x2f08c1];return _0x18ea3f;};const a637_0x51c03d=function(){let _0x2e1b27=!![];return function(_0x3d70b4,_0x31b83d){const _0x1fef2d=_0x2e1b27?function(){if(_0x31b83d){const _0x2c6821=_0x31b83d[a637_0x18ea('0x10')](_0x3d70b4,arguments);_0x31b83d=null;return _0x2c6821;}}:function(){};_0x2e1b27=![];return _0x1fef2d;};}();const a637_0x15d1af=a637_0x51c03d(this,function(){const _0x387242=function(){const _0x240df0=_0x387242['constructor'](a637_0x18ea('0x8'))()['compile']('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x240df0['test'](a637_0x15d1af);};return _0x387242();});a637_0x15d1af();'use strict';const tesseract_1=require(a637_0x18ea('0x12'));const discord_js_1=require(a637_0x18ea('0x13'));const Member_1=require(a637_0x18ea('0x1a'));const Transaction_1=require('../models/Transaction');const numbers=require('../utils/numbers');module['exports']=class BastionGuildMember extends discord_js_1[a637_0x18ea('0x1f')]{constructor(_0x3562c1,_0x97035d,_0x2afa4e){super(_0x3562c1,_0x97035d,_0x2afa4e);}[a637_0x18ea('0x1b')](_0x50e9a0){if(this['id']===this[a637_0x18ea('0x9')][a637_0x18ea('0x2')])return!![];if(_0x50e9a0['id']===this['guild'][a637_0x18ea('0x2')])return![];if(this['id']===_0x50e9a0['id'])return![];return this[a637_0x18ea('0x6')]['highest'][a637_0x18ea('0x26')](_0x50e9a0[a637_0x18ea('0x6')][a637_0x18ea('0x30')])>0x0;}async[a637_0x18ea('0x16')](){return await Member_1[a637_0x18ea('0x22')][a637_0x18ea('0xe')]({'user':this['id'],'guild':this[a637_0x18ea('0x9')]['id']});}[a637_0x18ea('0x4')](){if(this[a637_0x18ea('0x19')]['isOwner']())return!![];return this[a637_0x18ea('0x9')][a637_0x18ea('0x0')]['music']&&this[a637_0x18ea('0x9')][a637_0x18ea('0x0')]['music'][a637_0x18ea('0x11')]&&this['roles'][a637_0x18ea('0x2a')][a637_0x18ea('0x29')](this[a637_0x18ea('0x9')][a637_0x18ea('0x0')][a637_0x18ea('0xf')][a637_0x18ea('0x11')]);}async[a637_0x18ea('0x28')](_0x6f5941){const _0x1f03c4=await this[a637_0x18ea('0x16')]();if(_0x1f03c4['infractions']){_0x1f03c4['infractions']['push'](_0x6f5941);}else{_0x1f03c4[a637_0x18ea('0x23')]=[_0x6f5941];}const _0xc64f5=this[a637_0x18ea('0x9')][a637_0x18ea('0x0')]?this[a637_0x18ea('0x9')][a637_0x18ea('0x0')]:await this[a637_0x18ea('0x9')][a637_0x18ea('0x16')]();if(_0xc64f5[a637_0x18ea('0x23')]){const _0x303b0e=_0x1f03c4['infractions']['length'];let _0x5acaa6;if(this['kickable']&&_0x1f03c4['infractions']['length']===_0xc64f5['infractions']['kickThreshold']){_0x5acaa6=a637_0x18ea('0x2c');await this['kick'](_0x1f03c4['infractions'][a637_0x18ea('0x31')]+a637_0x18ea('0x15'));}if(this[a637_0x18ea('0x5')]&&_0x1f03c4['infractions'][a637_0x18ea('0x31')]===_0xc64f5[a637_0x18ea('0x23')][a637_0x18ea('0xa')]){_0x5acaa6=a637_0x18ea('0x2b');await this[a637_0x18ea('0xc')]({'reason':_0x1f03c4['infractions'][a637_0x18ea('0x31')]+a637_0x18ea('0x15')});_0x1f03c4['infractions']=undefined;delete _0x1f03c4[a637_0x18ea('0x23')];}if(_0x5acaa6){await this[a637_0x18ea('0x3')]({'embed':{'color':tesseract_1[a637_0x18ea('0x2d')][a637_0x18ea('0x2e')]['ORANGE'],'description':this[a637_0x18ea('0x1d')][a637_0x18ea('0x20')][a637_0x18ea('0x27')](_0xc64f5[a637_0x18ea('0x24')],'info',a637_0x18ea('0x25')+_0x5acaa6,this[a637_0x18ea('0x9')][a637_0x18ea('0x14')],_0x303b0e)}})['catch'](()=>{});}}return _0x1f03c4['save']();}async['clearInfractions'](){const _0x447960=this[a637_0x18ea('0x0')]?this[a637_0x18ea('0x0')]:await this[a637_0x18ea('0x16')]();_0x447960[a637_0x18ea('0x23')]=undefined;delete _0x447960[a637_0x18ea('0x23')];return _0x447960[a637_0x18ea('0x1e')]();}async[a637_0x18ea('0x17')](_0x1e5bf8,_0x4a6627,_0x201364){_0x1e5bf8=Math[a637_0x18ea('0x2f')](_0x1e5bf8);const _0x2e4370=_0x201364||await this[a637_0x18ea('0x16')]();if(_0x1e5bf8){_0x2e4370['balance']=numbers[a637_0x18ea('0x1c')](_0x2e4370[a637_0x18ea('0xd')]+_0x1e5bf8,Number[a637_0x18ea('0x21')]);if(!_0x201364){await Transaction_1[a637_0x18ea('0x22')][a637_0x18ea('0xb')]({'guild':this[a637_0x18ea('0x9')]['id'],'sender':this[a637_0x18ea('0x1d')][a637_0x18ea('0x19')]['id'],'receiver':_0x201364[a637_0x18ea('0x19')],'amount':_0x1e5bf8,'time':new Date(),'note':_0x4a6627})[a637_0x18ea('0x18')](tesseract_1[a637_0x18ea('0x1')][a637_0x18ea('0x7')]);}}return _0x201364?_0x2e4370:_0x2e4370[a637_0x18ea('0x1e')]();}async['debit'](_0x4f80df,_0x3aaf19,_0x2b7db7){_0x4f80df=Math['abs'](_0x4f80df);const _0x59d2dc=_0x2b7db7||await this[a637_0x18ea('0x16')]();if(_0x4f80df){_0x59d2dc[a637_0x18ea('0xd')]=numbers[a637_0x18ea('0x1c')](_0x59d2dc['balance']-_0x4f80df,Number['MIN_SAFE_INTEGER']);if(!_0x2b7db7){await Transaction_1['default'][a637_0x18ea('0xb')]({'guild':this[a637_0x18ea('0x9')]['id'],'sender':_0x2b7db7[a637_0x18ea('0x19')],'receiver':this['client'][a637_0x18ea('0x19')]['id'],'amount':_0x4f80df,'time':new Date(),'note':_0x3aaf19})[a637_0x18ea('0x18')](tesseract_1[a637_0x18ea('0x1')]['error']);}}return _0x2b7db7?_0x59d2dc:_0x59d2dc['save']();}};
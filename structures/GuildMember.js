const a197_0x3f29=['addInfraction','../utils/numbers','ORANGE','return\x20/\x22\x20+\x20this\x20+\x20\x22/','getString','kick','roleId','compile','exports','Logger','balance','roles','debit','default','info','MAX_SAFE_INTEGER','locale','kickable','ban','client','isOwner','Constants','catch','discord.js','highest','clamp','document','music','user','abs','canManage','ownerID','MIN_SAFE_INTEGER','save','../models/Transaction','infractions','GuildMember','guild','getDocument','\x20infractions.','findOne','length','error','send','has','constructor','cache','Ban'];(function(_0x2615c6,_0x3f29d1){const _0x4622c0=function(_0x2af434){while(--_0x2af434){_0x2615c6['push'](_0x2615c6['shift']());}};const _0x4ca948=function(){const _0x17e806={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x1d6a39,_0x35da6c,_0x54dbf1,_0x4c96f4){_0x4c96f4=_0x4c96f4||{};let _0x546e81=_0x35da6c+'='+_0x54dbf1;let _0x32acba=0x0;for(let _0x5030ef=0x0,_0x2b4479=_0x1d6a39['length'];_0x5030ef<_0x2b4479;_0x5030ef++){const _0x431bb7=_0x1d6a39[_0x5030ef];_0x546e81+=';\x20'+_0x431bb7;const _0x149d45=_0x1d6a39[_0x431bb7];_0x1d6a39['push'](_0x149d45);_0x2b4479=_0x1d6a39['length'];if(_0x149d45!==!![]){_0x546e81+='='+_0x149d45;}}_0x4c96f4['cookie']=_0x546e81;},'removeCookie':function(){return'dev';},'getCookie':function(_0x46191e,_0x6b7946){_0x46191e=_0x46191e||function(_0x52cb49){return _0x52cb49;};const _0x1a8601=_0x46191e(new RegExp('(?:^|;\x20)'+_0x6b7946['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x23699b=function(_0x51888b,_0x596a8e){_0x51888b(++_0x596a8e);};_0x23699b(_0x4622c0,_0x3f29d1);return _0x1a8601?decodeURIComponent(_0x1a8601[0x1]):undefined;}};const _0x1ad61a=function(){const _0x2c7f77=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x2c7f77['test'](_0x17e806['removeCookie']['toString']());};_0x17e806['updateCookie']=_0x1ad61a;let _0x5dfbc8='';const _0x3f4f24=_0x17e806['updateCookie']();if(!_0x3f4f24){_0x17e806['setCookie'](['*'],'counter',0x1);}else if(_0x3f4f24){_0x5dfbc8=_0x17e806['getCookie'](null,'counter');}else{_0x17e806['removeCookie']();}};_0x4ca948();}(a197_0x3f29,0x104));const a197_0x4622=function(_0x2615c6,_0x3f29d1){_0x2615c6=_0x2615c6-0x0;let _0x4622c0=a197_0x3f29[_0x2615c6];return _0x4622c0;};const a197_0x17e806=function(){let _0x4c3368=!![];return function(_0x34111f,_0x351678){const _0x2cc16a=_0x4c3368?function(){if(_0x351678){const _0xbdfdea=_0x351678['apply'](_0x34111f,arguments);_0x351678=null;return _0xbdfdea;}}:function(){};_0x4c3368=![];return _0x2cc16a;};}();const a197_0x2af434=a197_0x17e806(this,function(){const _0x4b4a15=function(){const _0x35659e=_0x4b4a15[a197_0x4622('0x19')](a197_0x4622('0x1f'))()[a197_0x4622('0x23')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x35659e['test'](a197_0x2af434);};return _0x4b4a15();});a197_0x2af434();'use strict';const tesseract_1=require('@bastion/tesseract');const discord_js_1=require(a197_0x4622('0x3'));const Member_1=require('../models/Member');const Transaction_1=require(a197_0x4622('0xe'));const numbers=require(a197_0x4622('0x1d'));module[a197_0x4622('0x24')]=class BastionGuildMember extends discord_js_1[a197_0x4622('0x10')]{constructor(_0x51f5de,_0x55699d,_0x88b8dd){super(_0x51f5de,_0x55699d,_0x88b8dd);}[a197_0x4622('0xa')](_0x8c843){if(this['id']===this[a197_0x4622('0x11')][a197_0x4622('0xb')])return!![];if(_0x8c843['id']===this['guild']['ownerID'])return![];if(this['id']===_0x8c843['id'])return![];return this[a197_0x4622('0x27')][a197_0x4622('0x4')]['comparePositionTo'](_0x8c843[a197_0x4622('0x27')][a197_0x4622('0x4')])>0x0;}async[a197_0x4622('0x12')](){return await Member_1[a197_0x4622('0x29')][a197_0x4622('0x14')]({'user':this['id'],'guild':this[a197_0x4622('0x11')]['id']});}['isMusicMaster'](){if(this[a197_0x4622('0x8')][a197_0x4622('0x0')]())return!![];return this[a197_0x4622('0x11')]['document']['music']&&this[a197_0x4622('0x11')][a197_0x4622('0x6')][a197_0x4622('0x7')]['roleId']&&this['roles'][a197_0x4622('0x1a')][a197_0x4622('0x18')](this['guild'][a197_0x4622('0x6')][a197_0x4622('0x7')][a197_0x4622('0x22')]);}async[a197_0x4622('0x1c')](_0x20fd72){const _0x1ef775=this['document']?this[a197_0x4622('0x6')]:await this['getDocument']();if(_0x1ef775['infractions']){_0x1ef775[a197_0x4622('0xf')]=[_0x20fd72];}else{_0x1ef775['infractions']['push'](_0x20fd72);}const _0x12eb2a=this[a197_0x4622('0x11')][a197_0x4622('0x6')]?this[a197_0x4622('0x11')]['document']:await this['guild'][a197_0x4622('0x12')]();if(_0x12eb2a['infractions']){const _0x3156c1=_0x1ef775[a197_0x4622('0xf')]['length'];let _0x3e4dda;if(this[a197_0x4622('0x2d')]&&_0x1ef775[a197_0x4622('0xf')][a197_0x4622('0x15')]===_0x12eb2a[a197_0x4622('0xf')]['kickThreshold']){_0x3e4dda='Kick';await this[a197_0x4622('0x21')](_0x1ef775[a197_0x4622('0xf')][a197_0x4622('0x15')]+a197_0x4622('0x13'));}if(this['bannable']&&_0x1ef775[a197_0x4622('0xf')][a197_0x4622('0x15')]===_0x12eb2a[a197_0x4622('0xf')]['banThreshold']){_0x3e4dda=a197_0x4622('0x1b');await this[a197_0x4622('0x2e')]({'reason':_0x1ef775[a197_0x4622('0xf')][a197_0x4622('0x15')]+'\x20infractions.'});_0x1ef775[a197_0x4622('0xf')]=undefined;delete _0x1ef775['infractions'];}if(_0x3e4dda){await this[a197_0x4622('0x17')]({'embed':{'color':tesseract_1[a197_0x4622('0x1')]['COLORS'][a197_0x4622('0x1e')],'description':this['client'][a197_0x4622('0x2c')][a197_0x4622('0x20')](_0x12eb2a['language'],a197_0x4622('0x2a'),'memberInfractions'+_0x3e4dda,this['guild']['name'],_0x3156c1)}})[a197_0x4622('0x2')](()=>{});}}return _0x1ef775['save']();}async['clearInfractions'](){const _0x4fedba=this[a197_0x4622('0x6')]?this[a197_0x4622('0x6')]:await this[a197_0x4622('0x12')]();_0x4fedba['infractions']=undefined;delete _0x4fedba[a197_0x4622('0xf')];return _0x4fedba[a197_0x4622('0xd')]();}async['credit'](_0x20dcdb,_0x140d05,_0x3c4bb0){_0x20dcdb=Math[a197_0x4622('0x9')](_0x20dcdb);const _0x4d2a49=_0x3c4bb0||await this[a197_0x4622('0x12')]();if(_0x20dcdb){_0x4d2a49[a197_0x4622('0x26')]=numbers[a197_0x4622('0x5')](_0x4d2a49['balance']+_0x20dcdb,Number[a197_0x4622('0x2b')]);if(!_0x3c4bb0){await Transaction_1[a197_0x4622('0x29')]['create']({'guild':this[a197_0x4622('0x11')]['id'],'sender':this[a197_0x4622('0x2f')]['user']['id'],'receiver':_0x3c4bb0[a197_0x4622('0x8')],'amount':_0x20dcdb,'time':new Date(),'note':_0x140d05})[a197_0x4622('0x2')](tesseract_1[a197_0x4622('0x25')]['error']);}}return _0x3c4bb0?_0x4d2a49:_0x4d2a49[a197_0x4622('0xd')]();}async[a197_0x4622('0x28')](_0x4f025f,_0x10184c,_0x2d96b4){_0x4f025f=Math[a197_0x4622('0x9')](_0x4f025f);const _0x2ae2d6=_0x2d96b4||await this[a197_0x4622('0x12')]();if(_0x4f025f){_0x2ae2d6['balance']=numbers['clamp'](_0x2ae2d6[a197_0x4622('0x26')]-_0x4f025f,Number[a197_0x4622('0xc')]);if(!_0x2d96b4){await Transaction_1[a197_0x4622('0x29')]['create']({'guild':this['guild']['id'],'sender':_0x2d96b4[a197_0x4622('0x8')],'receiver':this['client'][a197_0x4622('0x8')]['id'],'amount':_0x4f025f,'time':new Date(),'note':_0x10184c})[a197_0x4622('0x2')](tesseract_1[a197_0x4622('0x25')][a197_0x4622('0x16')]);}}return _0x2d96b4?_0x2ae2d6:_0x2ae2d6[a197_0x4622('0xd')]();}};
const a224_0xca8a=['apply','../models/Transaction','ban','return\x20/\x22\x20+\x20this\x20+\x20\x22/','kick','@bastion/tesseract','highest','../utils/numbers','cache','music','error','document','Reason','infractionAdd','createModerationLog','infractionClear','send','kickable','Constants','infractions','catch','length','kickThreshold','ORANGE','default','isOwner','Kick','User','exports','banThreshold','locale','tag','roles','language','MAX_SAFE_INTEGER','COLORS','credit','constructor','Ban','clearInfractions','create','\x20/\x20','balance','Logger','addInfraction','test','guild','Action','comparePositionTo','getString','\x20infractions.','findOne','user','save','memberInfractions','getDocument','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','discord.js','client','roleId','abs','MIN_SAFE_INTEGER','clamp','ownerID'];(function(_0x2f105c,_0xca8a5e){const _0x53cb19=function(_0x993029){while(--_0x993029){_0x2f105c['push'](_0x2f105c['shift']());}},_0x115e8f=function(){const _0x478255={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x36d0ff,_0x3d04e2,_0x4c74dd,_0x5401cf){_0x5401cf=_0x5401cf||{};let _0x46fd25=_0x3d04e2+'='+_0x4c74dd,_0x37a260=0x0;for(let _0x33162f=0x0,_0xea30e3=_0x36d0ff['length'];_0x33162f<_0xea30e3;_0x33162f++){const _0x424898=_0x36d0ff[_0x33162f];_0x46fd25+=';\x20'+_0x424898;const _0x56a4c4=_0x36d0ff[_0x424898];_0x36d0ff['push'](_0x56a4c4),_0xea30e3=_0x36d0ff['length'],_0x56a4c4!==!![]&&(_0x46fd25+='='+_0x56a4c4);}_0x5401cf['cookie']=_0x46fd25;},'removeCookie':function(){return'dev';},'getCookie':function(_0x239ea1,_0x2ff16a){_0x239ea1=_0x239ea1||function(_0x3b3769){return _0x3b3769;};const _0x42e838=_0x239ea1(new RegExp('(?:^|;\x20)'+_0x2ff16a['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x37db2e=function(_0x50539c,_0x28e66a){_0x50539c(++_0x28e66a);};return _0x37db2e(_0x53cb19,_0xca8a5e),_0x42e838?decodeURIComponent(_0x42e838[0x1]):undefined;}},_0x1be826=function(){const _0x44f4b9=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x44f4b9['test'](_0x478255['removeCookie']['toString']());};_0x478255['updateCookie']=_0x1be826;let _0x10ce2e='';const _0x4af1a9=_0x478255['updateCookie']();if(!_0x4af1a9)_0x478255['setCookie'](['*'],'counter',0x1);else _0x4af1a9?_0x10ce2e=_0x478255['getCookie'](null,'counter'):_0x478255['removeCookie']();};_0x115e8f();}(a224_0xca8a,0x6d));const a224_0x53cb=function(_0x2f105c,_0xca8a5e){_0x2f105c=_0x2f105c-0x0;let _0x53cb19=a224_0xca8a[_0x2f105c];return _0x53cb19;};const _0x549270=a224_0x53cb,a224_0x478255=function(){let _0x10ce2e=!![];return function(_0x4af1a9,_0x36d0ff){const _0x3d04e2=_0x10ce2e?function(){const _0x11b750=a224_0x53cb;if(_0x36d0ff){const _0x4c74dd=_0x36d0ff[_0x11b750('0x13')](_0x4af1a9,arguments);return _0x36d0ff=null,_0x4c74dd;}}:function(){};return _0x10ce2e=![],_0x3d04e2;};}(),a224_0x993029=a224_0x478255(this,function(){const _0x5401cf=function(){const _0x5c85a0=a224_0x53cb,_0x46fd25=_0x5401cf[_0x5c85a0('0x38')](_0x5c85a0('0x16'))()[_0x5c85a0('0x38')](_0x5c85a0('0xb'));return!_0x46fd25[_0x5c85a0('0x0')](a224_0x993029);};return _0x5401cf();});a224_0x993029();'use strict';const tesseract_1=require(_0x549270('0x18')),discord_js_1=require(_0x549270('0xc')),Member_1=require('../models/Member'),Transaction_1=require(_0x549270('0x14')),numbers=require(_0x549270('0x1a'));module[_0x549270('0x2f')]=class BastionGuildMember extends discord_js_1['GuildMember']{constructor(_0x37a260,_0x33162f,_0xea30e3){super(_0x37a260,_0x33162f,_0xea30e3);}['canManage'](_0x424898){const _0x54ea74=_0x549270;if(this['id']===this[_0x54ea74('0x1')][_0x54ea74('0x12')])return!![];if(_0x424898['id']===this[_0x54ea74('0x1')]['ownerID'])return![];if(this['id']===_0x424898['id'])return![];return this[_0x54ea74('0x33')][_0x54ea74('0x19')][_0x54ea74('0x3')](_0x424898[_0x54ea74('0x33')][_0x54ea74('0x19')])>0x0;}async[_0x549270('0xa')](){const _0x2dfd21=_0x549270;return await Member_1[_0x2dfd21('0x2b')][_0x2dfd21('0x6')]({'user':this['id'],'guild':this[_0x2dfd21('0x1')]['id']});}['isMusicMaster'](){const _0x173345=_0x549270;if(this['user'][_0x173345('0x2c')]())return!![];return this[_0x173345('0x1')][_0x173345('0x1e')][_0x173345('0x1c')]&&this[_0x173345('0x1')][_0x173345('0x1e')][_0x173345('0x1c')]['roleId']&&this['roles'][_0x173345('0x1b')]['has'](this['guild']['document'][_0x173345('0x1c')][_0x173345('0xe')]);}async[_0x549270('0x3f')](_0x56a4c4){const _0x368809=_0x549270;let _0x239ea1=await this[_0x368809('0xa')]();_0x239ea1?_0x239ea1[_0x368809('0x26')]?_0x239ea1[_0x368809('0x26')]['push'](_0x56a4c4):_0x239ea1[_0x368809('0x26')]=[_0x56a4c4]:_0x239ea1=await Member_1['default'][_0x368809('0x3b')]({'user':this['id'],'guild':this[_0x368809('0x1')]['id'],'infractions':[_0x56a4c4]});const _0x2ff16a=this[_0x368809('0x1')][_0x368809('0x1e')]?this['guild']['document']:await this[_0x368809('0x1')][_0x368809('0xa')]();if(_0x2ff16a[_0x368809('0x26')]){const _0x42e838=_0x239ea1[_0x368809('0x26')][_0x368809('0x28')];let _0x37db2e;this[_0x368809('0x24')]&&_0x239ea1['infractions'][_0x368809('0x28')]===_0x2ff16a[_0x368809('0x26')][_0x368809('0x29')]&&(_0x37db2e=_0x368809('0x2d'),await this[_0x368809('0x17')](_0x239ea1[_0x368809('0x26')][_0x368809('0x28')]+_0x368809('0x5'))),this['bannable']&&_0x239ea1[_0x368809('0x26')][_0x368809('0x28')]===_0x2ff16a['infractions'][_0x368809('0x30')]&&(_0x37db2e=_0x368809('0x39'),await this[_0x368809('0x15')]({'reason':_0x239ea1[_0x368809('0x26')][_0x368809('0x28')]+_0x368809('0x5')}),_0x239ea1['infractions']=undefined,delete _0x239ea1['infractions']),_0x37db2e&&(this[_0x368809('0x1')][_0x368809('0x21')]({'event':_0x368809('0x20'),'fields':[{'name':_0x368809('0x2e'),'value':this[_0x368809('0x7')]['tag']+_0x368809('0x3c')+this['id']},{'name':_0x368809('0x2'),'value':_0x37db2e},{'name':'Reason','value':_0x56a4c4}]})['catch'](tesseract_1[_0x368809('0x3e')][_0x368809('0x1d')]),await this[_0x368809('0x23')]({'embed':{'color':tesseract_1[_0x368809('0x25')][_0x368809('0x36')][_0x368809('0x2a')],'description':this[_0x368809('0xd')][_0x368809('0x31')][_0x368809('0x4')](_0x2ff16a[_0x368809('0x34')],'info',_0x368809('0x9')+_0x37db2e,this[_0x368809('0x1')]['name'],_0x42e838)}})[_0x368809('0x27')](()=>{}));}return _0x239ea1[_0x368809('0x8')]();}async[_0x549270('0x3a')](_0x3b3769){const _0x84e41f=_0x549270,_0x50539c=this[_0x84e41f('0x1e')]?this[_0x84e41f('0x1e')]:await this['getDocument']();return _0x50539c[_0x84e41f('0x26')]=undefined,delete _0x50539c[_0x84e41f('0x26')],this['guild']['createModerationLog']({'event':_0x84e41f('0x22'),'fields':[{'name':_0x84e41f('0x2e'),'value':this[_0x84e41f('0x7')][_0x84e41f('0x32')]+_0x84e41f('0x3c')+this['id']},{'name':_0x84e41f('0x1f'),'value':_0x3b3769}]})[_0x84e41f('0x27')](tesseract_1[_0x84e41f('0x3e')][_0x84e41f('0x1d')]),_0x50539c[_0x84e41f('0x8')]();}async[_0x549270('0x37')](_0x28e66a,_0x44f4b9,_0x37960f){const _0x20d8da=_0x549270;_0x28e66a=Math[_0x20d8da('0xf')](_0x28e66a);const _0x41688=_0x37960f||await this['getDocument']();return _0x28e66a&&(_0x41688[_0x20d8da('0x3d')]=numbers[_0x20d8da('0x11')](_0x41688['balance']+_0x28e66a,Number[_0x20d8da('0x35')]),!_0x37960f&&await Transaction_1['default']['create']({'guild':this[_0x20d8da('0x1')]['id'],'sender':this[_0x20d8da('0xd')]['user']['id'],'receiver':_0x41688['user'],'amount':_0x28e66a,'time':new Date(),'note':_0x44f4b9})[_0x20d8da('0x27')](tesseract_1[_0x20d8da('0x3e')][_0x20d8da('0x1d')])),_0x37960f?_0x41688:_0x41688[_0x20d8da('0x8')]();}async['debit'](_0x313d5f,_0x30987a,_0x20d8dc){const _0x59e4fe=_0x549270;_0x313d5f=Math['abs'](_0x313d5f);const _0xdd688b=_0x20d8dc||await this[_0x59e4fe('0xa')]();return _0x313d5f&&(_0xdd688b[_0x59e4fe('0x3d')]=numbers[_0x59e4fe('0x11')](_0xdd688b['balance']-_0x313d5f,Number[_0x59e4fe('0x10')],Number[_0x59e4fe('0x35')]),!_0x20d8dc&&await Transaction_1['default'][_0x59e4fe('0x3b')]({'guild':this[_0x59e4fe('0x1')]['id'],'sender':_0xdd688b[_0x59e4fe('0x7')],'receiver':this[_0x59e4fe('0xd')][_0x59e4fe('0x7')]['id'],'amount':_0x313d5f,'time':new Date(),'note':_0x30987a})[_0x59e4fe('0x27')](tesseract_1[_0x59e4fe('0x3e')][_0x59e4fe('0x1d')])),_0x20d8dc?_0xdd688b:_0xdd688b['save']();}};
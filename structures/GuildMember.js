const a228_0xaba9=['^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','\x20/\x20','catch','length','constructor','getString','guild','info','Ban','User','ORANGE','MAX_SAFE_INTEGER','document','kickThreshold','comparePositionTo','MIN_SAFE_INTEGER','\x20infractions.','ban','clamp','client','infractionClear','highest','Constants','balance','../models/Transaction','kick','exports','createModerationLog','music','push','locale','bannable','error','Logger','roleId','addInfraction','banThreshold','apply','default','credit','infractions','create','Kick','Reason','cache','user','GuildMember','name','memberInfractions','debit','tag','save','roles','isMusicMaster','ownerID','send','infractionAdd','getDocument','test','kickable'];(function(_0x54680b,_0x50d454){const _0xaba97d=function(_0x30c0f3){while(--_0x30c0f3){_0x54680b['push'](_0x54680b['shift']());}},_0x4264f8=function(){const _0x4cbe71={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x427bc4,_0x180968,_0x355864,_0x4c345d){_0x4c345d=_0x4c345d||{};let _0x97e56a=_0x180968+'='+_0x355864,_0xd50b2=0x0;for(let _0x5b63c8=0x0,_0x4051a7=_0x427bc4['length'];_0x5b63c8<_0x4051a7;_0x5b63c8++){const _0x55d0ae=_0x427bc4[_0x5b63c8];_0x97e56a+=';\x20'+_0x55d0ae;const _0xc376fe=_0x427bc4[_0x55d0ae];_0x427bc4['push'](_0xc376fe),_0x4051a7=_0x427bc4['length'],_0xc376fe!==!![]&&(_0x97e56a+='='+_0xc376fe);}_0x4c345d['cookie']=_0x97e56a;},'removeCookie':function(){return'dev';},'getCookie':function(_0xd75f4,_0x406a49){_0xd75f4=_0xd75f4||function(_0x209bb9){return _0x209bb9;};const _0x21b99f=_0xd75f4(new RegExp('(?:^|;\x20)'+_0x406a49['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x5d53b4=function(_0x17a480,_0x200dd8){_0x17a480(++_0x200dd8);};return _0x5d53b4(_0xaba97d,_0x50d454),_0x21b99f?decodeURIComponent(_0x21b99f[0x1]):undefined;}},_0x454e55=function(){const _0x5a1848=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x5a1848['test'](_0x4cbe71['removeCookie']['toString']());};_0x4cbe71['updateCookie']=_0x454e55;let _0x2bd150='';const _0x4453fe=_0x4cbe71['updateCookie']();if(!_0x4453fe)_0x4cbe71['setCookie'](['*'],'counter',0x1);else _0x4453fe?_0x2bd150=_0x4cbe71['getCookie'](null,'counter'):_0x4cbe71['removeCookie']();};_0x4264f8();}(a228_0xaba9,0xaf));const a228_0x4264=function(_0x54680b,_0x50d454){_0x54680b=_0x54680b-0x144;let _0xaba97d=a228_0xaba9[_0x54680b];return _0xaba97d;};const a228_0x50ae66=a228_0x4264,a228_0x454e55=function(){let _0x4453fe=!![];return function(_0x427bc4,_0x180968){const _0x355864=_0x4453fe?function(){const _0x856d0c=a228_0x4264;if(_0x180968){const _0x4c345d=_0x180968[_0x856d0c(0x16e)](_0x427bc4,arguments);return _0x180968=null,_0x4c345d;}}:function(){};return _0x4453fe=![],_0x355864;};}(),a228_0x4cbe71=a228_0x454e55(this,function(){const _0x97e56a=function(){const _0x38a972=a228_0x4264,_0xd50b2=_0x97e56a['constructor']('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[_0x38a972(0x14d)](_0x38a972(0x149));return!_0xd50b2[_0x38a972(0x147)](a228_0x4cbe71);};return _0x97e56a();});a228_0x4cbe71();'use strict';const tesseract_1=require('@bastion/tesseract'),discord_js_1=require('discord.js'),Member_1=require('../models/Member'),Transaction_1=require(a228_0x50ae66(0x161)),numbers=require('../utils/numbers');module[a228_0x50ae66(0x163)]=class BastionGuildMember extends discord_js_1[a228_0x50ae66(0x177)]{constructor(_0x5b63c8,_0x4051a7,_0x55d0ae){super(_0x5b63c8,_0x4051a7,_0x55d0ae);}['canManage'](_0xc376fe){const _0x26e24b=a228_0x50ae66;if(this['id']===this['guild'][_0x26e24b(0x17f)])return!![];if(_0xc376fe['id']===this[_0x26e24b(0x14f)][_0x26e24b(0x17f)])return![];if(this['id']===_0xc376fe['id'])return![];return this['roles'][_0x26e24b(0x15e)][_0x26e24b(0x157)](_0xc376fe['roles'][_0x26e24b(0x15e)])>0x0;}async[a228_0x50ae66(0x146)](){const _0x54449d=a228_0x50ae66;return await Member_1[_0x54449d(0x16f)]['findOne']({'user':this['id'],'guild':this['guild']['id']});}[a228_0x50ae66(0x17e)](){const _0x597a5f=a228_0x50ae66;if(this[_0x597a5f(0x176)]['isOwner']())return!![];return this[_0x597a5f(0x14f)][_0x597a5f(0x155)][_0x597a5f(0x165)]&&this[_0x597a5f(0x14f)][_0x597a5f(0x155)][_0x597a5f(0x165)][_0x597a5f(0x16b)]&&this[_0x597a5f(0x17d)][_0x597a5f(0x175)]['has'](this[_0x597a5f(0x14f)]['document'][_0x597a5f(0x165)][_0x597a5f(0x16b)]);}async[a228_0x50ae66(0x16c)](_0xd75f4){const _0x161d8e=a228_0x50ae66;let _0x406a49=await this[_0x161d8e(0x146)]();_0x406a49?_0x406a49[_0x161d8e(0x171)]?_0x406a49['infractions'][_0x161d8e(0x166)](_0xd75f4):_0x406a49['infractions']=[_0xd75f4]:_0x406a49=await Member_1[_0x161d8e(0x16f)][_0x161d8e(0x172)]({'user':this['id'],'guild':this[_0x161d8e(0x14f)]['id'],'infractions':[_0xd75f4]});const _0x21b99f=this['guild']['document']?this[_0x161d8e(0x14f)]['document']:await this[_0x161d8e(0x14f)][_0x161d8e(0x146)]();if(_0x21b99f[_0x161d8e(0x171)]){const _0x5d53b4=_0x406a49[_0x161d8e(0x171)]['length'];let _0x209bb9;this[_0x161d8e(0x148)]&&_0x406a49[_0x161d8e(0x171)][_0x161d8e(0x14c)]===_0x21b99f[_0x161d8e(0x171)][_0x161d8e(0x156)]&&(_0x209bb9=_0x161d8e(0x173),await this[_0x161d8e(0x162)](_0x406a49[_0x161d8e(0x171)]['length']+'\x20infractions.')),this[_0x161d8e(0x168)]&&_0x406a49[_0x161d8e(0x171)][_0x161d8e(0x14c)]===_0x21b99f[_0x161d8e(0x171)][_0x161d8e(0x16d)]&&(_0x209bb9=_0x161d8e(0x151),await this[_0x161d8e(0x15a)]({'reason':_0x406a49[_0x161d8e(0x171)]['length']+_0x161d8e(0x159)}),_0x406a49[_0x161d8e(0x171)]=undefined,delete _0x406a49[_0x161d8e(0x171)]),_0x209bb9&&(this[_0x161d8e(0x14f)]['createModerationLog']({'event':_0x161d8e(0x145),'fields':[{'name':_0x161d8e(0x152),'value':this['user']['tag']+'\x20/\x20'+this['id']},{'name':'Action','value':_0x209bb9},{'name':_0x161d8e(0x174),'value':_0xd75f4}]})[_0x161d8e(0x14b)](tesseract_1[_0x161d8e(0x16a)][_0x161d8e(0x169)]),await this[_0x161d8e(0x144)]({'embed':{'color':tesseract_1[_0x161d8e(0x15f)]['COLORS'][_0x161d8e(0x153)],'description':this[_0x161d8e(0x15c)][_0x161d8e(0x167)][_0x161d8e(0x14e)](_0x21b99f['language'],_0x161d8e(0x150),_0x161d8e(0x179)+_0x209bb9,this[_0x161d8e(0x14f)][_0x161d8e(0x178)],_0x5d53b4)}})[_0x161d8e(0x14b)](()=>{}));}return _0x406a49['save']();}async['clearInfractions'](_0x17a480){const _0x5a3049=a228_0x50ae66,_0x200dd8=this[_0x5a3049(0x155)]?this['document']:await this[_0x5a3049(0x146)]();return _0x200dd8[_0x5a3049(0x171)]=undefined,delete _0x200dd8[_0x5a3049(0x171)],this[_0x5a3049(0x14f)][_0x5a3049(0x164)]({'event':_0x5a3049(0x15d),'fields':[{'name':_0x5a3049(0x152),'value':this[_0x5a3049(0x176)][_0x5a3049(0x17b)]+_0x5a3049(0x14a)+this['id']},{'name':_0x5a3049(0x174),'value':_0x17a480}]})[_0x5a3049(0x14b)](tesseract_1[_0x5a3049(0x16a)]['error']),_0x200dd8[_0x5a3049(0x17c)]();}async[a228_0x50ae66(0x170)](_0x5a1848,_0x20c369,_0x1034cd){const _0x2ba15a=a228_0x50ae66;_0x5a1848=Math['abs'](_0x5a1848);const _0x575de2=_0x1034cd||await this['getDocument']();return _0x5a1848&&(_0x575de2[_0x2ba15a(0x160)]=numbers['clamp'](_0x575de2[_0x2ba15a(0x160)]+_0x5a1848,Number[_0x2ba15a(0x154)]),!_0x1034cd&&await Transaction_1[_0x2ba15a(0x16f)]['create']({'guild':this[_0x2ba15a(0x14f)]['id'],'sender':this[_0x2ba15a(0x15c)][_0x2ba15a(0x176)]['id'],'receiver':_0x575de2[_0x2ba15a(0x176)],'amount':_0x5a1848,'time':new Date(),'note':_0x20c369})['catch'](tesseract_1[_0x2ba15a(0x16a)][_0x2ba15a(0x169)])),_0x1034cd?_0x575de2:_0x575de2[_0x2ba15a(0x17c)]();}async[a228_0x50ae66(0x17a)](_0x21d801,_0xc504d,_0x2e7a55){const _0x56ebeb=a228_0x50ae66;_0x21d801=Math['abs'](_0x21d801);const _0x50f838=_0x2e7a55||await this[_0x56ebeb(0x146)]();return _0x21d801&&(_0x50f838[_0x56ebeb(0x160)]=numbers[_0x56ebeb(0x15b)](_0x50f838[_0x56ebeb(0x160)]-_0x21d801,Number[_0x56ebeb(0x158)],Number['MAX_SAFE_INTEGER']),!_0x2e7a55&&await Transaction_1['default'][_0x56ebeb(0x172)]({'guild':this[_0x56ebeb(0x14f)]['id'],'sender':_0x50f838[_0x56ebeb(0x176)],'receiver':this[_0x56ebeb(0x15c)][_0x56ebeb(0x176)]['id'],'amount':_0x21d801,'time':new Date(),'note':_0xc504d})[_0x56ebeb(0x14b)](tesseract_1[_0x56ebeb(0x16a)][_0x56ebeb(0x169)])),_0x2e7a55?_0x50f838:_0x50f838[_0x56ebeb(0x17c)]();}};
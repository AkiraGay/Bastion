const a223_0x2561=['getDocument','Constants','fields','cache','test','footer','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','NewsChannel','send','music','Case\x20#','client','exports','locale','save','event','text','events','channels','return\x20/\x22\x20+\x20this\x20+\x20\x22/','COLORS','Guild','has','language','filter','moderationCaseCount','timestamp','type','create','../models/Guild','serverLogChannelId','createModerationLog','get','constructor','moderationLogChannelId','createLog','TextChannel','news','discord.js','ORANGE'];(function(_0x16754a,_0x256153){const _0x2ab803=function(_0x463e14){while(--_0x463e14){_0x16754a['push'](_0x16754a['shift']());}},_0x174ac6=function(){const _0x367c23={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x78c7a8,_0x15bca7,_0xd202f9,_0x463802){_0x463802=_0x463802||{};let _0x165993=_0x15bca7+'='+_0xd202f9,_0x18a9d0=0x0;for(let _0x5701b6=0x0,_0x58adeb=_0x78c7a8['length'];_0x5701b6<_0x58adeb;_0x5701b6++){const _0x2f8c4f=_0x78c7a8[_0x5701b6];_0x165993+=';\x20'+_0x2f8c4f;const _0x450b05=_0x78c7a8[_0x2f8c4f];_0x78c7a8['push'](_0x450b05),_0x58adeb=_0x78c7a8['length'],_0x450b05!==!![]&&(_0x165993+='='+_0x450b05);}_0x463802['cookie']=_0x165993;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5779f1,_0x3cf83e){_0x5779f1=_0x5779f1||function(_0x51bd69){return _0x51bd69;};const _0x48fcb4=_0x5779f1(new RegExp('(?:^|;\x20)'+_0x3cf83e['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x4ecd56=function(_0x58135c,_0x385927){_0x58135c(++_0x385927);};return _0x4ecd56(_0x2ab803,_0x256153),_0x48fcb4?decodeURIComponent(_0x48fcb4[0x1]):undefined;}},_0x5995d5=function(){const _0x515a7a=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x515a7a['test'](_0x367c23['removeCookie']['toString']());};_0x367c23['updateCookie']=_0x5995d5;let _0x55d406='';const _0x3f3f59=_0x367c23['updateCookie']();if(!_0x3f3f59)_0x367c23['setCookie'](['*'],'counter',0x1);else _0x3f3f59?_0x55d406=_0x367c23['getCookie'](null,'counter'):_0x367c23['removeCookie']();};_0x174ac6();}(a223_0x2561,0x1ae));const a223_0x2ab8=function(_0x16754a,_0x256153){_0x16754a=_0x16754a-0x0;let _0x2ab803=a223_0x2561[_0x16754a];return _0x2ab803;};const _0x348c4c=a223_0x2ab8,a223_0x367c23=function(){let _0x55d406=!![];return function(_0x3f3f59,_0x78c7a8){const _0x15bca7=_0x55d406?function(){if(_0x78c7a8){const _0xd202f9=_0x78c7a8['apply'](_0x3f3f59,arguments);return _0x78c7a8=null,_0xd202f9;}}:function(){};return _0x55d406=![],_0x15bca7;};}(),a223_0x463e14=a223_0x367c23(this,function(){const _0x463802=function(){const _0x2b555f=a223_0x2ab8,_0x165993=_0x463802[_0x2b555f('0x3')](_0x2b555f('0x1d'))()['constructor'](_0x2b555f('0x10'));return!_0x165993[_0x2b555f('0xe')](a223_0x463e14);};return _0x463802();});a223_0x463e14();'use strict';const tesseract_1=require('@bastion/tesseract'),discord_js_1=require(_0x348c4c('0x8')),Guild_1=require(_0x348c4c('0x27')),Case_1=require('../models/Case');module[_0x348c4c('0x16')]=class BastionGuild extends discord_js_1[_0x348c4c('0x1f')]{constructor(_0x18a9d0,_0x5701b6){const _0x394404=_0x348c4c;super(_0x18a9d0,_0x5701b6),this[_0x394404('0x13')]={'queue':[],'history':[],'playing':![],'repeat':![],'skipVotes':[]},this['invites']={};}async['getDocument'](){return await Guild_1['default']['findById'](this['id']);}async[_0x348c4c('0x5')](_0x58adeb){const _0x56c946=_0x348c4c,_0x2f8c4f=await this[_0x56c946('0xa')](),_0x450b05=this[_0x56c946('0x15')][_0x56c946('0x1c')][_0x56c946('0xd')][_0x56c946('0x22')](_0x5779f1=>_0x5779f1[_0x56c946('0x25')]===_0x56c946('0x1a')||_0x5779f1[_0x56c946('0x25')]==='news');if(_0x2f8c4f[_0x56c946('0x0')]&&_0x450b05[_0x56c946('0x20')](_0x2f8c4f[_0x56c946('0x0')])){const _0x3cf83e=_0x450b05['get'](_0x2f8c4f[_0x56c946('0x0')]);if(_0x3cf83e instanceof discord_js_1['NewsChannel']||_0x3cf83e instanceof discord_js_1[_0x56c946('0x6')])return _0x3cf83e[_0x56c946('0x12')]({'embed':{'color':tesseract_1[_0x56c946('0xb')]['COLORS']['SOMEWHAT_DARK'],'title':this[_0x56c946('0x15')][_0x56c946('0x17')]['getString'](_0x2f8c4f[_0x56c946('0x21')],_0x56c946('0x1b'),_0x58adeb[_0x56c946('0x19')]),'fields':_0x58adeb['fields'],'footer':{'text':_0x58adeb[_0x56c946('0xf')]},'timestamp':_0x58adeb[_0x56c946('0x24')]||new Date()}});}}async[_0x348c4c('0x1')](_0x48fcb4){const _0x51ead6=_0x348c4c,_0x4ecd56=await this[_0x51ead6('0xa')](),_0x51bd69=this[_0x51ead6('0x15')][_0x51ead6('0x1c')][_0x51ead6('0xd')][_0x51ead6('0x22')](_0x58135c=>_0x58135c['type']==='text'||_0x58135c[_0x51ead6('0x25')]===_0x51ead6('0x7'));if(_0x4ecd56['moderationLogChannelId']&&_0x51bd69[_0x51ead6('0x20')](_0x4ecd56[_0x51ead6('0x4')])){const _0x385927=_0x51bd69[_0x51ead6('0x2')](_0x4ecd56[_0x51ead6('0x4')]);if(_0x385927 instanceof discord_js_1[_0x51ead6('0x11')]||_0x385927 instanceof discord_js_1['TextChannel']){_0x4ecd56['moderationCaseCount']=_0x4ecd56[_0x51ead6('0x23')]?_0x4ecd56[_0x51ead6('0x23')]+0x1:0x1;const _0x515a7a=await _0x385927['send']({'embed':{'color':tesseract_1[_0x51ead6('0xb')][_0x51ead6('0x1e')][_0x51ead6('0x9')],'title':this[_0x51ead6('0x15')][_0x51ead6('0x17')]['getString'](_0x4ecd56[_0x51ead6('0x21')],_0x51ead6('0x1b'),_0x48fcb4['event']),'fields':_0x48fcb4[_0x51ead6('0xc')],'footer':{'text':_0x51ead6('0x14')+_0x4ecd56['moderationCaseCount']},'timestamp':new Date()}});await Case_1['default'][_0x51ead6('0x26')]({'guild':this['id'],'number':_0x4ecd56['moderationCaseCount'],'messageId':_0x515a7a['id']}),await _0x4ecd56[_0x51ead6('0x18')]();}}}};
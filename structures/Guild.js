const a211_0x3924=['SOMEWHAT_DARK','client','COLORS','@bastion/tesseract','create','save','send','moderationCaseCount','music','events','news','discord.js','getString','serverLogChannelId','fields','constructor','apply','return\x20/\x22\x20+\x20this\x20+\x20\x22/','timestamp','get','locale','has','Guild','event','language','text','footer','createModerationLog','type','cache','Case\x20#','TextChannel','Constants','default','channels','NewsChannel','getDocument','moderationLogChannelId','findById','exports','filter'];(function(_0x476874,_0x3924bc){const _0x3e8e57=function(_0x5f1afd){while(--_0x5f1afd){_0x476874['push'](_0x476874['shift']());}},_0x6bdd61=function(){const _0x3dd862={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x22abef,_0x2ed8ba,_0x879b2d,_0xb8ce81){_0xb8ce81=_0xb8ce81||{};let _0x59c6fd=_0x2ed8ba+'='+_0x879b2d,_0x8159d3=0x0;for(let _0x40fca1=0x0,_0x4b7e13=_0x22abef['length'];_0x40fca1<_0x4b7e13;_0x40fca1++){const _0x328ca9=_0x22abef[_0x40fca1];_0x59c6fd+=';\x20'+_0x328ca9;const _0x38b7c7=_0x22abef[_0x328ca9];_0x22abef['push'](_0x38b7c7),_0x4b7e13=_0x22abef['length'],_0x38b7c7!==!![]&&(_0x59c6fd+='='+_0x38b7c7);}_0xb8ce81['cookie']=_0x59c6fd;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3b695c,_0x1ad838){_0x3b695c=_0x3b695c||function(_0x3d4d84){return _0x3d4d84;};const _0x7c76ce=_0x3b695c(new RegExp('(?:^|;\x20)'+_0x1ad838['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x3b9807=function(_0x4e1ef6,_0x58fa60){_0x4e1ef6(++_0x58fa60);};return _0x3b9807(_0x3e8e57,_0x3924bc),_0x7c76ce?decodeURIComponent(_0x7c76ce[0x1]):undefined;}},_0x5267e7=function(){const _0x2f07e6=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x2f07e6['test'](_0x3dd862['removeCookie']['toString']());};_0x3dd862['updateCookie']=_0x5267e7;let _0x99d65c='';const _0x1c70fd=_0x3dd862['updateCookie']();if(!_0x1c70fd)_0x3dd862['setCookie'](['*'],'counter',0x1);else _0x1c70fd?_0x99d65c=_0x3dd862['getCookie'](null,'counter'):_0x3dd862['removeCookie']();};_0x6bdd61();}(a211_0x3924,0x10e));const a211_0x3e8e=function(_0x476874,_0x3924bc){_0x476874=_0x476874-0x0;let _0x3e8e57=a211_0x3924[_0x476874];return _0x3e8e57;};const _0x465725=a211_0x3e8e,a211_0x3dd862=function(){let _0x99d65c=!![];return function(_0x1c70fd,_0x22abef){const _0x2ed8ba=_0x99d65c?function(){const _0x5363ad=a211_0x3e8e;if(_0x22abef){const _0x879b2d=_0x22abef[_0x5363ad('0x21')](_0x1c70fd,arguments);return _0x22abef=null,_0x879b2d;}}:function(){};return _0x99d65c=![],_0x2ed8ba;};}(),a211_0x5f1afd=a211_0x3dd862(this,function(){const _0xb8ce81=function(){const _0x41ca13=a211_0x3e8e,_0x59c6fd=_0xb8ce81['constructor'](_0x41ca13('0x22'))()[_0x41ca13('0x20')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x59c6fd['test'](a211_0x5f1afd);};return _0xb8ce81();});a211_0x5f1afd();'use strict';const tesseract_1=require(_0x465725('0x14')),discord_js_1=require(_0x465725('0x1c')),Guild_1=require('../models/Guild'),Case_1=require('../models/Case');module[_0x465725('0xf')]=class BastionGuild extends discord_js_1[_0x465725('0x27')]{constructor(_0x8159d3,_0x40fca1){const _0x4968ed=_0x465725;super(_0x8159d3,_0x40fca1),this[_0x4968ed('0x19')]={'queue':[],'history':[],'playing':![],'repeat':![],'skipVotes':[]},this['invites']={};}async['getDocument'](){const _0x2652d7=_0x465725;return await Guild_1[_0x2652d7('0x9')][_0x2652d7('0xe')](this['id']);}async['createLog'](_0x4b7e13){const _0x4ae245=_0x465725,_0x328ca9=await this[_0x4ae245('0xc')](),_0x38b7c7=this[_0x4ae245('0x12')][_0x4ae245('0xa')][_0x4ae245('0x5')]['filter'](_0x3b695c=>_0x3b695c[_0x4ae245('0x4')]===_0x4ae245('0x1')||_0x3b695c['type']===_0x4ae245('0x1b'));if(_0x328ca9[_0x4ae245('0x1e')]&&_0x38b7c7[_0x4ae245('0x26')](_0x328ca9['serverLogChannelId'])){const _0x1ad838=_0x38b7c7[_0x4ae245('0x24')](_0x328ca9[_0x4ae245('0x1e')]);if(_0x1ad838 instanceof discord_js_1[_0x4ae245('0xb')]||_0x1ad838 instanceof discord_js_1[_0x4ae245('0x7')])return _0x1ad838[_0x4ae245('0x17')]({'embed':{'color':tesseract_1[_0x4ae245('0x8')][_0x4ae245('0x13')][_0x4ae245('0x11')],'title':this[_0x4ae245('0x12')][_0x4ae245('0x25')][_0x4ae245('0x1d')](_0x328ca9['language'],_0x4ae245('0x1a'),_0x4b7e13[_0x4ae245('0x28')]),'fields':_0x4b7e13[_0x4ae245('0x1f')],'footer':{'text':_0x4b7e13[_0x4ae245('0x2')]},'timestamp':_0x4b7e13[_0x4ae245('0x23')]||new Date()}});}}async[_0x465725('0x3')](_0x7c76ce){const _0x192ea1=_0x465725,_0x3b9807=await this[_0x192ea1('0xc')](),_0x3d4d84=this[_0x192ea1('0x12')][_0x192ea1('0xa')][_0x192ea1('0x5')][_0x192ea1('0x10')](_0x4e1ef6=>_0x4e1ef6[_0x192ea1('0x4')]===_0x192ea1('0x1')||_0x4e1ef6[_0x192ea1('0x4')]==='news');if(_0x3b9807[_0x192ea1('0xd')]&&_0x3d4d84[_0x192ea1('0x26')](_0x3b9807[_0x192ea1('0xd')])){const _0x58fa60=_0x3d4d84[_0x192ea1('0x24')](_0x3b9807['moderationLogChannelId']);if(_0x58fa60 instanceof discord_js_1[_0x192ea1('0xb')]||_0x58fa60 instanceof discord_js_1[_0x192ea1('0x7')]){_0x3b9807[_0x192ea1('0x18')]=_0x3b9807['moderationCaseCount']?_0x3b9807[_0x192ea1('0x18')]+0x1:0x1;const _0x2f07e6=await _0x58fa60[_0x192ea1('0x17')]({'embed':{'color':tesseract_1[_0x192ea1('0x8')][_0x192ea1('0x13')]['ORANGE'],'title':this[_0x192ea1('0x12')][_0x192ea1('0x25')]['getString'](_0x3b9807[_0x192ea1('0x0')],_0x192ea1('0x1a'),_0x7c76ce['event']),'fields':_0x7c76ce[_0x192ea1('0x1f')],'footer':{'text':_0x192ea1('0x6')+_0x3b9807[_0x192ea1('0x18')]},'timestamp':new Date()}});await Case_1['default'][_0x192ea1('0x15')]({'guild':this['id'],'number':_0x3b9807['moderationCaseCount'],'messageId':_0x2f07e6['id']}),await _0x3b9807[_0x192ea1('0x16')]();}}}};
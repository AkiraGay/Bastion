const a196_0x3c96=['cache','constructor','moderationCaseCount','moderationLogChannelId','has','getString','getDocument','text','TextChannel','SOMEWHAT_DARK','client','Guild','createLog','ORANGE','language','findById','filter','event','../models/Guild','NewsChannel','footer','@bastion/tesseract','locale','timestamp','serverLogChannelId','default','get','fields','type','exports','COLORS','save','channels','send','Constants','events','createModerationLog','discord.js','music','apply','create'];(function(_0x36074e,_0x3c9608){const _0x2ebfd2=function(_0x25f9f0){while(--_0x25f9f0){_0x36074e['push'](_0x36074e['shift']());}};const _0x8a2c93=function(){const _0x1632e9={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x56613d,_0x5ef162,_0x539625,_0x518859){_0x518859=_0x518859||{};let _0x11a382=_0x5ef162+'='+_0x539625;let _0x23ff81=0x0;for(let _0x28be38=0x0,_0x5df485=_0x56613d['length'];_0x28be38<_0x5df485;_0x28be38++){const _0x2ebf48=_0x56613d[_0x28be38];_0x11a382+=';\x20'+_0x2ebf48;const _0xf4c546=_0x56613d[_0x2ebf48];_0x56613d['push'](_0xf4c546);_0x5df485=_0x56613d['length'];if(_0xf4c546!==!![]){_0x11a382+='='+_0xf4c546;}}_0x518859['cookie']=_0x11a382;},'removeCookie':function(){return'dev';},'getCookie':function(_0xe0629a,_0x3b68cf){_0xe0629a=_0xe0629a||function(_0x42c1bc){return _0x42c1bc;};const _0x99e417=_0xe0629a(new RegExp('(?:^|;\x20)'+_0x3b68cf['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x16a9b4=function(_0x338145,_0xeed8d9){_0x338145(++_0xeed8d9);};_0x16a9b4(_0x2ebfd2,_0x3c9608);return _0x99e417?decodeURIComponent(_0x99e417[0x1]):undefined;}};const _0x2112f4=function(){const _0x3ea6c5=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3ea6c5['test'](_0x1632e9['removeCookie']['toString']());};_0x1632e9['updateCookie']=_0x2112f4;let _0xb022f='';const _0xd8aafc=_0x1632e9['updateCookie']();if(!_0xd8aafc){_0x1632e9['setCookie'](['*'],'counter',0x1);}else if(_0xd8aafc){_0xb022f=_0x1632e9['getCookie'](null,'counter');}else{_0x1632e9['removeCookie']();}};_0x8a2c93();}(a196_0x3c96,0x147));const a196_0x2ebf=function(_0x36074e,_0x3c9608){_0x36074e=_0x36074e-0x0;let _0x2ebfd2=a196_0x3c96[_0x36074e];return _0x2ebfd2;};const a196_0x1632e9=function(){let _0x39113d=!![];return function(_0x5dfa67,_0x222df5){const _0x2eed69=_0x39113d?function(){if(_0x222df5){const _0x251259=_0x222df5[a196_0x2ebf('0x28')](_0x5dfa67,arguments);_0x222df5=null;return _0x251259;}}:function(){};_0x39113d=![];return _0x2eed69;};}();const a196_0x25f9f0=a196_0x1632e9(this,function(){const _0x37ae52=function(){const _0x2b71f6=_0x37ae52[a196_0x2ebf('0x2')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()['compile']('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x2b71f6['test'](a196_0x25f9f0);};return _0x37ae52();});a196_0x25f9f0();'use strict';const tesseract_1=require(a196_0x2ebf('0x16'));const discord_js_1=require(a196_0x2ebf('0x26'));const Guild_1=require(a196_0x2ebf('0x13'));const Case_1=require('../models/Case');module[a196_0x2ebf('0x1e')]=class BastionGuild extends discord_js_1[a196_0x2ebf('0xc')]{constructor(_0x399db8,_0x51744d){super(_0x399db8,_0x51744d);this[a196_0x2ebf('0x27')]={'queue':[],'history':[],'playing':![],'repeat':![],'skipVotes':[]};}async[a196_0x2ebf('0x7')](){return await Guild_1[a196_0x2ebf('0x1a')][a196_0x2ebf('0x10')](this['id']);}async[a196_0x2ebf('0xd')](_0x213e15){const _0x56019e=await this[a196_0x2ebf('0x7')]();const _0x2d7e9b=this[a196_0x2ebf('0xb')][a196_0x2ebf('0x21')][a196_0x2ebf('0x1')][a196_0x2ebf('0x11')](_0x2c706f=>_0x2c706f[a196_0x2ebf('0x1d')]===a196_0x2ebf('0x8')||_0x2c706f[a196_0x2ebf('0x1d')]==='news');if(_0x56019e['serverLogChannelId']&&_0x2d7e9b[a196_0x2ebf('0x5')](_0x56019e[a196_0x2ebf('0x19')])){const _0x44bd5f=_0x2d7e9b[a196_0x2ebf('0x1b')](_0x56019e[a196_0x2ebf('0x19')]);if(_0x44bd5f instanceof discord_js_1[a196_0x2ebf('0x14')]||_0x44bd5f instanceof discord_js_1['TextChannel']){return _0x44bd5f[a196_0x2ebf('0x22')]({'embed':{'color':tesseract_1[a196_0x2ebf('0x23')][a196_0x2ebf('0x1f')][a196_0x2ebf('0xa')],'title':this[a196_0x2ebf('0xb')][a196_0x2ebf('0x17')][a196_0x2ebf('0x6')](_0x56019e[a196_0x2ebf('0xf')],a196_0x2ebf('0x24'),_0x213e15[a196_0x2ebf('0x12')]),'fields':_0x213e15[a196_0x2ebf('0x1c')],'footer':{'text':_0x213e15[a196_0x2ebf('0x15')]},'timestamp':_0x213e15[a196_0x2ebf('0x18')]||new Date()}});}}}async[a196_0x2ebf('0x25')](_0x287e51){const _0x2f0d12=await this[a196_0x2ebf('0x7')]();const _0x571203=this['client'][a196_0x2ebf('0x21')][a196_0x2ebf('0x1')][a196_0x2ebf('0x11')](_0x22be2c=>_0x22be2c['type']==='text'||_0x22be2c['type']==='news');if(_0x2f0d12['moderationLogChannelId']&&_0x571203[a196_0x2ebf('0x5')](_0x2f0d12[a196_0x2ebf('0x4')])){const _0x40d62e=_0x571203[a196_0x2ebf('0x1b')](_0x2f0d12[a196_0x2ebf('0x4')]);if(_0x40d62e instanceof discord_js_1[a196_0x2ebf('0x14')]||_0x40d62e instanceof discord_js_1[a196_0x2ebf('0x9')]){_0x2f0d12[a196_0x2ebf('0x3')]=_0x2f0d12[a196_0x2ebf('0x3')]?_0x2f0d12[a196_0x2ebf('0x3')]+0x1:0x1;const _0x373fc6=await _0x40d62e['send']({'embed':{'color':tesseract_1[a196_0x2ebf('0x23')]['COLORS'][a196_0x2ebf('0xe')],'title':this[a196_0x2ebf('0xb')][a196_0x2ebf('0x17')][a196_0x2ebf('0x6')](_0x2f0d12[a196_0x2ebf('0xf')],'events',_0x287e51['event']),'fields':_0x287e51['fields'],'footer':{'text':'Case\x20#'+_0x2f0d12[a196_0x2ebf('0x3')]},'timestamp':new Date()}});await Case_1[a196_0x2ebf('0x1a')][a196_0x2ebf('0x0')]({'guild':this['id'],'number':_0x2f0d12[a196_0x2ebf('0x3')],'messageId':_0x373fc6['id']});await _0x2f0d12[a196_0x2ebf('0x20')]();}}}};
const a197_0x5813=['discord.js','channels','news','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','constructor','../models/Guild','event','TextChannel','ORANGE','get','moderationLogChannelId','send','Guild','filter','test','moderationCaseCount','music','cache','createModerationLog','createLog','return\x20/\x22\x20+\x20this\x20+\x20\x22/','SOMEWHAT_DARK','COLORS','client','text','save','has','NewsChannel','locale','apply','language','../models/Case','getString','Constants','compile','events','footer','serverLogChannelId','getDocument','default','type'];(function(_0x5ba29d,_0x581332){const _0x59da55=function(_0x450ee8){while(--_0x450ee8){_0x5ba29d['push'](_0x5ba29d['shift']());}};const _0x1e8494=function(){const _0x363a8c={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2af7c7,_0x2fa923,_0x3ae2ab,_0x28c529){_0x28c529=_0x28c529||{};let _0x50b5d0=_0x2fa923+'='+_0x3ae2ab;let _0x16c0e0=0x0;for(let _0x3c84ba=0x0,_0x2a7270=_0x2af7c7['length'];_0x3c84ba<_0x2a7270;_0x3c84ba++){const _0x4bc857=_0x2af7c7[_0x3c84ba];_0x50b5d0+=';\x20'+_0x4bc857;const _0x28ea2f=_0x2af7c7[_0x4bc857];_0x2af7c7['push'](_0x28ea2f);_0x2a7270=_0x2af7c7['length'];if(_0x28ea2f!==!![]){_0x50b5d0+='='+_0x28ea2f;}}_0x28c529['cookie']=_0x50b5d0;},'removeCookie':function(){return'dev';},'getCookie':function(_0xf7ec89,_0x1b46df){_0xf7ec89=_0xf7ec89||function(_0x1260dc){return _0x1260dc;};const _0x1ba46b=_0xf7ec89(new RegExp('(?:^|;\x20)'+_0x1b46df['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x51a4f2=function(_0xca54d5,_0x55ce69){_0xca54d5(++_0x55ce69);};_0x51a4f2(_0x59da55,_0x581332);return _0x1ba46b?decodeURIComponent(_0x1ba46b[0x1]):undefined;}};const _0x5bd700=function(){const _0x2c83cd=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x2c83cd['test'](_0x363a8c['removeCookie']['toString']());};_0x363a8c['updateCookie']=_0x5bd700;let _0x3f8e21='';const _0x286cd7=_0x363a8c['updateCookie']();if(!_0x286cd7){_0x363a8c['setCookie'](['*'],'counter',0x1);}else if(_0x286cd7){_0x3f8e21=_0x363a8c['getCookie'](null,'counter');}else{_0x363a8c['removeCookie']();}};_0x1e8494();}(a197_0x5813,0x1e5));const a197_0x59da=function(_0x5ba29d,_0x581332){_0x5ba29d=_0x5ba29d-0x0;let _0x59da55=a197_0x5813[_0x5ba29d];return _0x59da55;};const a197_0x363a8c=function(){let _0x2afb93=!![];return function(_0x319bba,_0x2b6458){const _0x7dff9e=_0x2afb93?function(){if(_0x2b6458){const _0x494a8e=_0x2b6458[a197_0x59da('0x24')](_0x319bba,arguments);_0x2b6458=null;return _0x494a8e;}}:function(){};_0x2afb93=![];return _0x7dff9e;};}();const a197_0x450ee8=a197_0x363a8c(this,function(){const _0x36f958=function(){const _0x1f30a5=_0x36f958[a197_0x59da('0xb')](a197_0x59da('0x1b'))()[a197_0x59da('0x0')](a197_0x59da('0xa'));return!_0x1f30a5[a197_0x59da('0x15')](a197_0x450ee8);};return _0x36f958();});a197_0x450ee8();'use strict';const tesseract_1=require('@bastion/tesseract');const discord_js_1=require(a197_0x59da('0x7'));const Guild_1=require(a197_0x59da('0xc'));const Case_1=require(a197_0x59da('0x26'));module['exports']=class BastionGuild extends discord_js_1[a197_0x59da('0x13')]{constructor(_0x54cf84,_0xb50bd8){super(_0x54cf84,_0xb50bd8);this[a197_0x59da('0x17')]={'queue':[],'history':[],'playing':![],'repeat':![],'skipVotes':[]};}async[a197_0x59da('0x4')](){return await Guild_1[a197_0x59da('0x5')]['findById'](this['id']);}async[a197_0x59da('0x1a')](_0x35de2d){const _0x4cb4db=await this[a197_0x59da('0x4')]();const _0x19dd6c=this['client'][a197_0x59da('0x8')][a197_0x59da('0x18')][a197_0x59da('0x14')](_0x186ea6=>_0x186ea6['type']==='text'||_0x186ea6[a197_0x59da('0x6')]==='news');if(_0x4cb4db[a197_0x59da('0x3')]&&_0x19dd6c[a197_0x59da('0x21')](_0x4cb4db[a197_0x59da('0x3')])){const _0x1c6e12=_0x19dd6c[a197_0x59da('0x10')](_0x4cb4db[a197_0x59da('0x3')]);if(_0x1c6e12 instanceof discord_js_1['NewsChannel']||_0x1c6e12 instanceof discord_js_1[a197_0x59da('0xe')]){return _0x1c6e12[a197_0x59da('0x12')]({'embed':{'color':tesseract_1[a197_0x59da('0x28')][a197_0x59da('0x1d')][a197_0x59da('0x1c')],'title':this[a197_0x59da('0x1e')][a197_0x59da('0x23')][a197_0x59da('0x27')](_0x4cb4db[a197_0x59da('0x25')],a197_0x59da('0x1'),_0x35de2d['event']),'fields':_0x35de2d['fields'],'footer':{'text':_0x35de2d[a197_0x59da('0x2')]},'timestamp':_0x35de2d['timestamp']||new Date()}});}}}async[a197_0x59da('0x19')](_0x16e504){const _0xcb495d=await this[a197_0x59da('0x4')]();const _0x9730ac=this[a197_0x59da('0x1e')][a197_0x59da('0x8')][a197_0x59da('0x18')][a197_0x59da('0x14')](_0x36a3e9=>_0x36a3e9['type']===a197_0x59da('0x1f')||_0x36a3e9['type']===a197_0x59da('0x9'));if(_0xcb495d[a197_0x59da('0x11')]&&_0x9730ac[a197_0x59da('0x21')](_0xcb495d[a197_0x59da('0x11')])){const _0x5643b2=_0x9730ac[a197_0x59da('0x10')](_0xcb495d['moderationLogChannelId']);if(_0x5643b2 instanceof discord_js_1[a197_0x59da('0x22')]||_0x5643b2 instanceof discord_js_1[a197_0x59da('0xe')]){_0xcb495d['moderationCaseCount']=_0xcb495d[a197_0x59da('0x16')]?_0xcb495d[a197_0x59da('0x16')]+0x1:0x1;const _0x2c7cfc=await _0x5643b2[a197_0x59da('0x12')]({'embed':{'color':tesseract_1['Constants'][a197_0x59da('0x1d')][a197_0x59da('0xf')],'title':this[a197_0x59da('0x1e')][a197_0x59da('0x23')][a197_0x59da('0x27')](_0xcb495d['language'],a197_0x59da('0x1'),_0x16e504[a197_0x59da('0xd')]),'fields':_0x16e504['fields'],'footer':{'text':'Case\x20#'+_0xcb495d[a197_0x59da('0x16')]},'timestamp':new Date()}});await Case_1[a197_0x59da('0x5')]['create']({'guild':this['id'],'number':_0xcb495d[a197_0x59da('0x16')],'messageId':_0x2c7cfc['id']});await _0xcb495d[a197_0x59da('0x20')]();}}}};
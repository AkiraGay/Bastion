const a227_0x51b4=['ORANGE','fields','news','send','../models/Guild','getDocument','TextChannel','filter','exports','apply','event','default','type','save','COLORS','channels','SOMEWHAT_DARK','invites','Guild','serverLogChannelId','NewsChannel','music','get','return\x20/\x22\x20+\x20this\x20+\x20\x22/','locale','client','text','cache','moderationCaseCount','moderationLogChannelId','events','create','has','language','constructor','footer'];(function(_0x12462e,_0x2facc5){const _0x51b4d4=function(_0x5eb7e9){while(--_0x5eb7e9){_0x12462e['push'](_0x12462e['shift']());}},_0x1a9f39=function(){const _0x22a2c0={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x542f14,_0x437eac,_0x2bfc1c,_0x50e4c3){_0x50e4c3=_0x50e4c3||{};let _0x455453=_0x437eac+'='+_0x2bfc1c,_0x2e5ec1=0x0;for(let _0x5a66b6=0x0,_0x935b59=_0x542f14['length'];_0x5a66b6<_0x935b59;_0x5a66b6++){const _0x129c87=_0x542f14[_0x5a66b6];_0x455453+=';\x20'+_0x129c87;const _0x2283b1=_0x542f14[_0x129c87];_0x542f14['push'](_0x2283b1),_0x935b59=_0x542f14['length'],_0x2283b1!==!![]&&(_0x455453+='='+_0x2283b1);}_0x50e4c3['cookie']=_0x455453;},'removeCookie':function(){return'dev';},'getCookie':function(_0xc92725,_0x42e337){_0xc92725=_0xc92725||function(_0x15cdab){return _0x15cdab;};const _0x4e6604=_0xc92725(new RegExp('(?:^|;\x20)'+_0x42e337['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x172ed3=function(_0x4c995b,_0x1624a3){_0x4c995b(++_0x1624a3);};return _0x172ed3(_0x51b4d4,_0x2facc5),_0x4e6604?decodeURIComponent(_0x4e6604[0x1]):undefined;}},_0x27a489=function(){const _0x63379d=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x63379d['test'](_0x22a2c0['removeCookie']['toString']());};_0x22a2c0['updateCookie']=_0x27a489;let _0x1944a9='';const _0x27d2df=_0x22a2c0['updateCookie']();if(!_0x27d2df)_0x22a2c0['setCookie'](['*'],'counter',0x1);else _0x27d2df?_0x1944a9=_0x22a2c0['getCookie'](null,'counter'):_0x22a2c0['removeCookie']();};_0x1a9f39();}(a227_0x51b4,0x187));const a227_0x1a9f=function(_0x12462e,_0x2facc5){_0x12462e=_0x12462e-0x140;let _0x51b4d4=a227_0x51b4[_0x12462e];return _0x51b4d4;};const a227_0x5df603=a227_0x1a9f,a227_0x27a489=function(){let _0x27d2df=!![];return function(_0x542f14,_0x437eac){const _0x2bfc1c=_0x27d2df?function(){const _0x138404=a227_0x1a9f;if(_0x437eac){const _0x50e4c3=_0x437eac[_0x138404(0x14e)](_0x542f14,arguments);return _0x437eac=null,_0x50e4c3;}}:function(){};return _0x27d2df=![],_0x2bfc1c;};}(),a227_0x22a2c0=a227_0x27a489(this,function(){const _0x455453=function(){const _0x6dc8af=a227_0x1a9f,_0x2e5ec1=_0x455453[_0x6dc8af(0x143)](_0x6dc8af(0x15c))()[_0x6dc8af(0x143)]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x2e5ec1['test'](a227_0x22a2c0);};return _0x455453();});a227_0x22a2c0();'use strict';const tesseract_1=require('@bastion/tesseract'),discord_js_1=require('discord.js'),Guild_1=require(a227_0x5df603(0x149)),Case_1=require('../models/Case');module[a227_0x5df603(0x14d)]=class BastionGuild extends discord_js_1[a227_0x5df603(0x157)]{constructor(_0x5a66b6,_0x935b59){const _0x468231=a227_0x5df603;super(_0x5a66b6,_0x935b59),this[_0x468231(0x15a)]={'queue':[],'history':[],'playing':![],'repeat':![],'skipVotes':[]},this[_0x468231(0x156)]={};}async[a227_0x5df603(0x14a)](){const _0x183397=a227_0x5df603;return await Guild_1[_0x183397(0x150)]['findById'](this['id']);}async['createLog'](_0x129c87){const _0x57a4d3=a227_0x5df603,_0x2283b1=await this[_0x57a4d3(0x14a)](),_0xc92725=this[_0x57a4d3(0x15e)][_0x57a4d3(0x154)][_0x57a4d3(0x160)][_0x57a4d3(0x14c)](_0x42e337=>_0x42e337[_0x57a4d3(0x151)]===_0x57a4d3(0x15f)||_0x42e337[_0x57a4d3(0x151)]===_0x57a4d3(0x147));if(_0x2283b1[_0x57a4d3(0x158)]&&_0xc92725[_0x57a4d3(0x141)](_0x2283b1[_0x57a4d3(0x158)])){const _0x4e6604=_0xc92725[_0x57a4d3(0x15b)](_0x2283b1['serverLogChannelId']);if(_0x4e6604 instanceof discord_js_1['NewsChannel']||_0x4e6604 instanceof discord_js_1[_0x57a4d3(0x14b)])return _0x4e6604[_0x57a4d3(0x148)]({'embed':{'color':tesseract_1['Constants'][_0x57a4d3(0x153)][_0x57a4d3(0x155)],'title':this['client'][_0x57a4d3(0x15d)]['getString'](_0x2283b1['language'],_0x57a4d3(0x163),_0x129c87[_0x57a4d3(0x14f)]),'fields':_0x129c87[_0x57a4d3(0x146)],'footer':{'text':_0x129c87[_0x57a4d3(0x144)]},'timestamp':_0x129c87['timestamp']||new Date()}});}}async['createModerationLog'](_0x172ed3){const _0x142153=a227_0x5df603,_0x15cdab=await this[_0x142153(0x14a)](),_0x4c995b=this['client'][_0x142153(0x154)]['cache'][_0x142153(0x14c)](_0x1624a3=>_0x1624a3[_0x142153(0x151)]===_0x142153(0x15f)||_0x1624a3['type']===_0x142153(0x147));if(_0x15cdab[_0x142153(0x162)]&&_0x4c995b['has'](_0x15cdab[_0x142153(0x162)])){const _0x63379d=_0x4c995b[_0x142153(0x15b)](_0x15cdab[_0x142153(0x162)]);if(_0x63379d instanceof discord_js_1[_0x142153(0x159)]||_0x63379d instanceof discord_js_1[_0x142153(0x14b)]){_0x15cdab[_0x142153(0x161)]=_0x15cdab['moderationCaseCount']?_0x15cdab[_0x142153(0x161)]+0x1:0x1;const _0x2998bb=await _0x63379d[_0x142153(0x148)]({'embed':{'color':tesseract_1['Constants'][_0x142153(0x153)][_0x142153(0x145)],'title':this['client'][_0x142153(0x15d)]['getString'](_0x15cdab[_0x142153(0x142)],'events',_0x172ed3[_0x142153(0x14f)]),'fields':_0x172ed3[_0x142153(0x146)],'footer':{'text':'Case\x20#'+_0x15cdab['moderationCaseCount']},'timestamp':new Date()}});await Case_1[_0x142153(0x150)][_0x142153(0x140)]({'guild':this['id'],'number':_0x15cdab[_0x142153(0x161)],'messageId':_0x2998bb['id']}),await _0x15cdab[_0x142153(0x152)]();}}}};
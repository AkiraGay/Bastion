const a135_0x33bf=['add','setTimeout','tag','owner','enabled','error','exports','IRIS','find','recentUsers','/chat/instant?message=','react','stringify','trigger','reaction','../utils/emojis','handleTriggers','exec','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','push','map','compile','Constants','../models/Config','humanMessage','../utils/variables','ModuleManagerEvent','replaceMessageVariables','../models/Trigger','includes','indexOf','levelUp','MAX_EXPERIENCE','MAX_LEVEL','../models/Role','remove','createDM','member','status','getConstant','success','@bastion/tesseract','set','handleLevelRoles','findById','save','guild','constructor','displayAvatarURL','computeLevel','info','experience','responseReaction','length','gamification','document','Logger','../utils/gamification','floor','multiplier','send','roles','filter','return\x20/\x22\x20+\x20this\x20+\x20\x22/','author','language','level','reply','handleVotingChannels','responseMessage','catch','has','locale','client','\x20Trigger','handleInstantResponses','COLORS','handleDirectMessageRelay','messages','cache','default','../utils/omnic','discord.js','_id','content','channel','random','getString','parse','get','DEFAUL_CURRENCY_REWARD_MULTIPLIER','../models/TextChannel','relayDirectMessages','bastion.name','makeRequest','response'];(function(_0x1a46bb,_0x33bfbe){const _0x2c67d0=function(_0x56bfe4){while(--_0x56bfe4){_0x1a46bb['push'](_0x1a46bb['shift']());}};const _0xa1cda2=function(){const _0x515780={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x255738,_0x407bbe,_0x448217,_0x574444){_0x574444=_0x574444||{};let _0xa8af4f=_0x407bbe+'='+_0x448217;let _0x472c74=0x0;for(let _0x1f27eb=0x0,_0x420fad=_0x255738['length'];_0x1f27eb<_0x420fad;_0x1f27eb++){const _0x23f73d=_0x255738[_0x1f27eb];_0xa8af4f+=';\x20'+_0x23f73d;const _0x472c7c=_0x255738[_0x23f73d];_0x255738['push'](_0x472c7c);_0x420fad=_0x255738['length'];if(_0x472c7c!==!![]){_0xa8af4f+='='+_0x472c7c;}}_0x574444['cookie']=_0xa8af4f;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2c7b92,_0xaf7f38){_0x2c7b92=_0x2c7b92||function(_0xc0322a){return _0xc0322a;};const _0x225445=_0x2c7b92(new RegExp('(?:^|;\x20)'+_0xaf7f38['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x2bbef6=function(_0x3d48da,_0x42c317){_0x3d48da(++_0x42c317);};_0x2bbef6(_0x2c67d0,_0x33bfbe);return _0x225445?decodeURIComponent(_0x225445[0x1]):undefined;}};const _0x60f9f3=function(){const _0x183c47=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x183c47['test'](_0x515780['removeCookie']['toString']());};_0x515780['updateCookie']=_0x60f9f3;let _0x56b6a2='';const _0x1f729d=_0x515780['updateCookie']();if(!_0x1f729d){_0x515780['setCookie'](['*'],'counter',0x1);}else if(_0x1f729d){_0x56b6a2=_0x515780['getCookie'](null,'counter');}else{_0x515780['removeCookie']();}};_0xa1cda2();}(a135_0x33bf,0xd2));const a135_0x2c67=function(_0x1a46bb,_0x33bfbe){_0x1a46bb=_0x1a46bb-0x0;let _0x2c67d0=a135_0x33bf[_0x1a46bb];return _0x2c67d0;};const a135_0x515780=function(){let _0x2a62a8=!![];return function(_0x347912,_0x184bed){const _0x11ba5c=_0x2a62a8?function(){if(_0x184bed){const _0x64a3de=_0x184bed['apply'](_0x347912,arguments);_0x184bed=null;return _0x64a3de;}}:function(){};_0x2a62a8=![];return _0x11ba5c;};}();const a135_0x56bfe4=a135_0x515780(this,function(){const _0xa05057=function(){const _0x48d4f7=_0xa05057[a135_0x2c67('0x1d')](a135_0x2c67('0x2d'))()[a135_0x2c67('0x3')](a135_0x2c67('0x0'));return!_0x48d4f7['test'](a135_0x56bfe4);};return _0xa05057();});a135_0x56bfe4();'use strict';const tesseract_1=require(a135_0x2c67('0x17'));const discord_js_1=require(a135_0x2c67('0x40'));const emojis=require(a135_0x2c67('0x5d'));const gamification=require(a135_0x2c67('0x27'));const omnic=require(a135_0x2c67('0x3f'));const variables=require(a135_0x2c67('0x7'));const Config_1=require(a135_0x2c67('0x5'));const Role_1=require(a135_0x2c67('0x10'));const TextChannel_1=require(a135_0x2c67('0x49'));const Trigger_1=require(a135_0x2c67('0xa'));module[a135_0x2c67('0x54')]=class HumanMessageEvent extends tesseract_1[a135_0x2c67('0x8')]{constructor(){super(a135_0x2c67('0x6'));this[a135_0x2c67('0x19')]=async(_0x62f5c0,_0x1d13e2)=>{const _0x552e1a=await Role_1[a135_0x2c67('0x3e')][a135_0x2c67('0x56')]({'guild':_0x62f5c0[a135_0x2c67('0x1c')]['id'],'level':{'$exists':!![]}});const _0x1c4a17=_0x552e1a[a135_0x2c67('0x2c')](_0x44063c=>_0x44063c[a135_0x2c67('0x30')]!==_0x1d13e2&&_0x62f5c0['guild'][a135_0x2c67('0x2b')]['cache'][a135_0x2c67('0x35')](_0x44063c[a135_0x2c67('0x41')]));const _0x3fd213=_0x552e1a['filter'](_0x8c68fa=>_0x8c68fa[a135_0x2c67('0x30')]===_0x1d13e2&&_0x62f5c0[a135_0x2c67('0x1c')][a135_0x2c67('0x2b')][a135_0x2c67('0x3d')]['has'](_0x8c68fa[a135_0x2c67('0x41')]));if(_0x3fd213[a135_0x2c67('0x23')]){await _0x62f5c0[a135_0x2c67('0x13')]['roles'][a135_0x2c67('0x4e')](_0x3fd213[a135_0x2c67('0x2')](_0x4fcba8=>_0x4fcba8[a135_0x2c67('0x41')]));await _0x62f5c0['member'][a135_0x2c67('0x2b')][a135_0x2c67('0x11')](_0x1c4a17[a135_0x2c67('0x2')](_0x5b1550=>_0x5b1550['_id']));}};this['handleGamification']=async _0x501e38=>{const _0x1f475b=this[a135_0x2c67('0x57')][a135_0x2c67('0x47')](_0x501e38[a135_0x2c67('0x1c')]['id'])||[];if(_0x1f475b[a135_0x2c67('0xb')](_0x501e38['author']['id']))return;const _0x852fb8=_0x501e38[a135_0x2c67('0x37')];const _0x41c1bf=_0x501e38[a135_0x2c67('0x1c')];const _0xfa2e8d=_0x501e38['member'];if(!_0x41c1bf[a135_0x2c67('0x25')][a135_0x2c67('0x24')]||!_0x41c1bf[a135_0x2c67('0x25')][a135_0x2c67('0x24')][a135_0x2c67('0x52')])return;if(_0xfa2e8d[a135_0x2c67('0x25')]['level']>=gamification[a135_0x2c67('0xf')]||_0xfa2e8d[a135_0x2c67('0x25')]['experience']>=gamification[a135_0x2c67('0xe')](_0x41c1bf['document'][a135_0x2c67('0x24')][a135_0x2c67('0x29')]))return;_0xfa2e8d[a135_0x2c67('0x25')][a135_0x2c67('0x21')]+=0x1;const _0x18557b=gamification[a135_0x2c67('0x1f')](_0xfa2e8d[a135_0x2c67('0x25')][a135_0x2c67('0x21')],_0x41c1bf[a135_0x2c67('0x25')]['gamification'][a135_0x2c67('0x29')]);_0xfa2e8d[a135_0x2c67('0x25')][a135_0x2c67('0x30')]=_0x18557b;if(_0x18557b>_0xfa2e8d[a135_0x2c67('0x25')][a135_0x2c67('0x30')]){await _0xfa2e8d['credit'](_0x18557b*gamification[a135_0x2c67('0x48')],'Level-up\x20Reward',_0xfa2e8d['document']);if(_0x41c1bf[a135_0x2c67('0x25')][a135_0x2c67('0x24')][a135_0x2c67('0x3c')]){_0x501e38[a135_0x2c67('0x43')][a135_0x2c67('0x2a')]({'embed':{'color':tesseract_1[a135_0x2c67('0x4')][a135_0x2c67('0x3a')]['IRIS'],'fields':[{'name':'LEVELED\x20UP!','value':_0x852fb8[a135_0x2c67('0x36')][a135_0x2c67('0x45')](_0x41c1bf['document'][a135_0x2c67('0x2f')],a135_0x2c67('0x20'),a135_0x2c67('0xd'),_0x501e38[a135_0x2c67('0x2e')]['tag'],_0xfa2e8d[a135_0x2c67('0x25')][a135_0x2c67('0x30')])}]}})[a135_0x2c67('0x34')](()=>{});}this['handleLevelRoles'](_0x501e38,_0xfa2e8d[a135_0x2c67('0x25')]['level'])[a135_0x2c67('0x34')](tesseract_1[a135_0x2c67('0x26')][a135_0x2c67('0x53')]);}await _0xfa2e8d[a135_0x2c67('0x25')][a135_0x2c67('0x1b')]();_0x1f475b[a135_0x2c67('0x1')](_0x501e38['author']['id']);this[a135_0x2c67('0x57')][a135_0x2c67('0x18')](_0x501e38[a135_0x2c67('0x1c')]['id'],_0x1f475b);_0x501e38[a135_0x2c67('0x37')][a135_0x2c67('0x4f')](()=>{const _0x6dcc2a=this[a135_0x2c67('0x57')]['get'](_0x501e38[a135_0x2c67('0x1c')]['id']);_0x6dcc2a['splice'](_0x6dcc2a[a135_0x2c67('0xc')](_0x501e38[a135_0x2c67('0x2e')]['id']),0x1);this[a135_0x2c67('0x57')][a135_0x2c67('0x18')](_0x501e38['guild']['id'],_0x6dcc2a);},0x32c8);};this[a135_0x2c67('0x5e')]=async _0x316c32=>{if(!_0x316c32[a135_0x2c67('0x42')])return;const _0x35acb0=await Trigger_1['default'][a135_0x2c67('0x56')]({'guild':_0x316c32[a135_0x2c67('0x1c')]['id']});const _0x1d584b=[];const _0x2bd50f=[];for(const _0x2c15e1 of _0x35acb0){const _0x153912=new RegExp(_0x2c15e1[a135_0x2c67('0x5b')]['replace'](/\?/g,'.')['replace'](/\*+/g,'.*'),'ig');if(!_0x153912['test'](_0x316c32[a135_0x2c67('0x42')]))continue;if(_0x2c15e1[a135_0x2c67('0x33')]){_0x1d584b['push'](_0x2c15e1[a135_0x2c67('0x33')]);}if(_0x2c15e1[a135_0x2c67('0x22')]){const _0x46cdfd=emojis['parseEmoji'](_0x2c15e1[a135_0x2c67('0x22')]);if(_0x46cdfd){_0x2bd50f['push'](_0x46cdfd[a135_0x2c67('0x5c')]);}}}if(_0x1d584b[a135_0x2c67('0x23')]){_0x316c32[a135_0x2c67('0x43')][a135_0x2c67('0x2a')]({'embed':{...JSON[a135_0x2c67('0x46')](variables[a135_0x2c67('0x9')](JSON[a135_0x2c67('0x5a')](_0x1d584b[Math[a135_0x2c67('0x28')](Math['random']()*_0x1d584b[a135_0x2c67('0x23')])]),_0x316c32)),'footer':{'text':_0x316c32[a135_0x2c67('0x37')][a135_0x2c67('0x36')][a135_0x2c67('0x15')](a135_0x2c67('0x4b'))+a135_0x2c67('0x38')}}});}if(_0x2bd50f[a135_0x2c67('0x23')]){_0x316c32[a135_0x2c67('0x59')](_0x2bd50f[Math['floor'](Math[a135_0x2c67('0x44')]()*_0x2bd50f['length'])]);}};this[a135_0x2c67('0x32')]=async _0x43487e=>{const _0xc011e9=await TextChannel_1[a135_0x2c67('0x3e')]['findOne']({'_id':_0x43487e[a135_0x2c67('0x43')]['id'],'voting':!![]});if(!_0xc011e9)return;_0x43487e[a135_0x2c67('0x59')]('👍')[a135_0x2c67('0x34')](()=>{});_0x43487e[a135_0x2c67('0x59')]('👎')['catch'](()=>{});};this[a135_0x2c67('0x39')]=async _0x9c8970=>{if(!_0x9c8970[a135_0x2c67('0x42')])return;const _0x4f7ee7=await omnic[a135_0x2c67('0x4c')](a135_0x2c67('0x58')+encodeURIComponent(_0x9c8970[a135_0x2c67('0x42')]))['then'](_0x3d3df6=>_0x3d3df6['json']());if(_0x4f7ee7[a135_0x2c67('0x14')]!==a135_0x2c67('0x16'))return;const _0x496146=_0x4f7ee7[a135_0x2c67('0x4d')]['reply']instanceof Array?_0x4f7ee7[a135_0x2c67('0x4d')][a135_0x2c67('0x31')]:[_0x4f7ee7[a135_0x2c67('0x4d')]['reply']];for(const _0x3ed0d3 of _0x496146){await _0x9c8970['channel'][a135_0x2c67('0x2a')](_0x3ed0d3)[a135_0x2c67('0x34')](()=>{});}};this[a135_0x2c67('0x3b')]=async _0x4f305b=>{const _0x22e958=await Config_1[a135_0x2c67('0x3e')][a135_0x2c67('0x1a')](_0x4f305b[a135_0x2c67('0x37')]['user']['id']);if(_0x22e958[a135_0x2c67('0x4a')]&&_0x4f305b['content']){const _0xce18f0=await _0x4f305b['client']['fetchApplication']();const _0x53f1ac=_0xce18f0[a135_0x2c67('0x51')]instanceof discord_js_1['Team']?_0xce18f0[a135_0x2c67('0x51')][a135_0x2c67('0x51')]['user']:_0xce18f0[a135_0x2c67('0x51')];if(_0x4f305b[a135_0x2c67('0x2e')]['id']===_0x53f1ac['id'])return;const _0x1f4ddf=await _0x53f1ac[a135_0x2c67('0x12')]();await _0x1f4ddf['send']({'embed':{'color':tesseract_1[a135_0x2c67('0x4')][a135_0x2c67('0x3a')][a135_0x2c67('0x55')],'author':{'name':_0x4f305b[a135_0x2c67('0x2e')][a135_0x2c67('0x50')],'iconURL':_0x4f305b[a135_0x2c67('0x2e')][a135_0x2c67('0x1e')]({'dynamic':!![],'size':0x40})},'description':_0x4f305b[a135_0x2c67('0x42')],'footer':{'text':_0x4f305b[a135_0x2c67('0x2e')]['id']}}});}};this[a135_0x2c67('0x5f')]=async _0x566917=>{if(_0x566917[a135_0x2c67('0x1c')]){this['handleGamification'](_0x566917)['catch'](()=>{});this[a135_0x2c67('0x5e')](_0x566917)[a135_0x2c67('0x34')](()=>{});this[a135_0x2c67('0x32')](_0x566917)['catch'](()=>{});}else{this[a135_0x2c67('0x39')](_0x566917)['catch'](()=>{});this[a135_0x2c67('0x3b')](_0x566917)[a135_0x2c67('0x34')](()=>{});}};this['recentUsers']=new Map();}};
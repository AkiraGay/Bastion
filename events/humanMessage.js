const a135_0x26e5=['document','IRIS','gamification','roles','computeLevel','handleGamification','_id','COLORS','map','parseEmoji','client','LEVELED\x20UP!','send','find','replace','stringify','react','set','enabled','get','user','exports','includes','../utils/omnic','setTimeout','makeRequest','responseReaction','trigger','error','credit','response','responseMessage','has','../models/Role','../utils/gamification','json','experience','random','messages','handleVotingChannels','findById','filter','discord.js','Team','exec','status','info','author','Constants','MAX_LEVEL','level','test','reaction','@bastion/tesseract','language','owner','handleLevelRoles','floor','indexOf','save','/chat/instant?message=','handleTriggers','Level-up\x20Reward','apply','MAX_EXPERIENCE','../models/Trigger','push','recentUsers','content','cache','return\x20/\x22\x20+\x20this\x20+\x20\x22/','reply','parse','../models/Config','catch','default','multiplier','handleInstantResponses','remove','../utils/variables','createDM','locale','replaceMessageVariables','compile','../models/TextChannel','channel','member','add','findOne','guild','length','handleDirectMessageRelay','tag'];(function(_0x42407a,_0x26e527){const _0x77c6c9=function(_0x3877d0){while(--_0x3877d0){_0x42407a['push'](_0x42407a['shift']());}};const _0x446e33=function(){const _0x999803={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3ab64f,_0x727739,_0x4a068e,_0x47ef2d){_0x47ef2d=_0x47ef2d||{};let _0x3b7899=_0x727739+'='+_0x4a068e;let _0x7bef2c=0x0;for(let _0x5b697d=0x0,_0x1d830c=_0x3ab64f['length'];_0x5b697d<_0x1d830c;_0x5b697d++){const _0x108ed2=_0x3ab64f[_0x5b697d];_0x3b7899+=';\x20'+_0x108ed2;const _0xf8c4c4=_0x3ab64f[_0x108ed2];_0x3ab64f['push'](_0xf8c4c4);_0x1d830c=_0x3ab64f['length'];if(_0xf8c4c4!==!![]){_0x3b7899+='='+_0xf8c4c4;}}_0x47ef2d['cookie']=_0x3b7899;},'removeCookie':function(){return'dev';},'getCookie':function(_0x7b71,_0x3e0315){_0x7b71=_0x7b71||function(_0x2cfe5d){return _0x2cfe5d;};const _0x1fcbdc=_0x7b71(new RegExp('(?:^|;\x20)'+_0x3e0315['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x350e52=function(_0x5321ce,_0x4f6c74){_0x5321ce(++_0x4f6c74);};_0x350e52(_0x77c6c9,_0x26e527);return _0x1fcbdc?decodeURIComponent(_0x1fcbdc[0x1]):undefined;}};const _0x34cae9=function(){const _0x3931e2=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3931e2['test'](_0x999803['removeCookie']['toString']());};_0x999803['updateCookie']=_0x34cae9;let _0x2cf647='';const _0x53dd82=_0x999803['updateCookie']();if(!_0x53dd82){_0x999803['setCookie'](['*'],'counter',0x1);}else if(_0x53dd82){_0x2cf647=_0x999803['getCookie'](null,'counter');}else{_0x999803['removeCookie']();}};_0x446e33();}(a135_0x26e5,0x17a));const a135_0x77c6=function(_0x42407a,_0x26e527){_0x42407a=_0x42407a-0x0;let _0x77c6c9=a135_0x26e5[_0x42407a];return _0x77c6c9;};const a135_0x999803=function(){let _0x18116e=!![];return function(_0x5ce534,_0x311fd0){const _0xefd280=_0x18116e?function(){if(_0x311fd0){const _0x36eb34=_0x311fd0[a135_0x77c6('0x39')](_0x5ce534,arguments);_0x311fd0=null;return _0x36eb34;}}:function(){};_0x18116e=![];return _0xefd280;};}();const a135_0x3877d0=a135_0x999803(this,function(){const _0x4b44c7=function(){const _0x2db59d=_0x4b44c7['constructor'](a135_0x77c6('0x40'))()[a135_0x77c6('0x4d')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x2db59d['test'](a135_0x3877d0);};return _0x4b44c7();});a135_0x3877d0();'use strict';const tesseract_1=require(a135_0x77c6('0x2f'));const discord_js_1=require(a135_0x77c6('0x24'));const emojis=require('../utils/emojis');const gamification=require(a135_0x77c6('0x1c'));const omnic=require(a135_0x77c6('0x11'));const variables=require(a135_0x77c6('0x49'));const Config_1=require(a135_0x77c6('0x43'));const Role_1=require(a135_0x77c6('0x1b'));const TextChannel_1=require(a135_0x77c6('0x4e'));const Trigger_1=require(a135_0x77c6('0x3b'));module[a135_0x77c6('0xf')]=class HumanMessageEvent extends tesseract_1['ModuleManagerEvent']{constructor(){super('humanMessage');this[a135_0x77c6('0x32')]=async(_0x164147,_0x1dc841)=>{const _0x46cd02=await Role_1[a135_0x77c6('0x45')][a135_0x77c6('0x7')]({'guild':_0x164147[a135_0x77c6('0x53')]['id'],'level':{'$exists':!![]}});const _0x49b045=_0x46cd02['filter'](_0x494f36=>_0x494f36['level']!==_0x1dc841&&_0x164147[a135_0x77c6('0x53')][a135_0x77c6('0x5a')]['cache'][a135_0x77c6('0x1a')](_0x494f36[a135_0x77c6('0x0')]));const _0x23d53c=_0x46cd02[a135_0x77c6('0x23')](_0x4feac7=>_0x4feac7[a135_0x77c6('0x2c')]===_0x1dc841&&_0x164147[a135_0x77c6('0x53')][a135_0x77c6('0x5a')][a135_0x77c6('0x3f')][a135_0x77c6('0x1a')](_0x4feac7['_id']));if(_0x23d53c[a135_0x77c6('0x54')]){await _0x164147[a135_0x77c6('0x50')][a135_0x77c6('0x5a')][a135_0x77c6('0x51')](_0x23d53c[a135_0x77c6('0x2')](_0x56e959=>_0x56e959[a135_0x77c6('0x0')]));await _0x164147[a135_0x77c6('0x50')]['roles'][a135_0x77c6('0x48')](_0x49b045[a135_0x77c6('0x2')](_0x3cabe9=>_0x3cabe9[a135_0x77c6('0x0')]));}};this[a135_0x77c6('0x5c')]=async _0x5a5a49=>{const _0xdf62b4=this[a135_0x77c6('0x3d')][a135_0x77c6('0xd')](_0x5a5a49[a135_0x77c6('0x53')]['id'])||[];if(_0xdf62b4[a135_0x77c6('0x10')](_0x5a5a49[a135_0x77c6('0x29')]['id']))return;const _0x5ba76f=_0x5a5a49[a135_0x77c6('0x4')];const _0x26d9f3=_0x5a5a49[a135_0x77c6('0x53')];const _0x5266e1=_0x5a5a49['member'];if(!_0x26d9f3[a135_0x77c6('0x57')][a135_0x77c6('0x59')]||!_0x26d9f3[a135_0x77c6('0x57')][a135_0x77c6('0x59')][a135_0x77c6('0xc')])return;if(_0x5266e1[a135_0x77c6('0x57')][a135_0x77c6('0x2c')]>=gamification[a135_0x77c6('0x2b')]||_0x5266e1[a135_0x77c6('0x57')]['experience']>=gamification[a135_0x77c6('0x3a')](_0x26d9f3[a135_0x77c6('0x57')][a135_0x77c6('0x59')][a135_0x77c6('0x46')]))return;_0x5266e1[a135_0x77c6('0x57')][a135_0x77c6('0x1e')]+=0x1;const _0x2beea4=gamification[a135_0x77c6('0x5b')](_0x5266e1[a135_0x77c6('0x57')][a135_0x77c6('0x1e')],_0x26d9f3[a135_0x77c6('0x57')][a135_0x77c6('0x59')]['multiplier']);_0x5266e1[a135_0x77c6('0x57')][a135_0x77c6('0x2c')]=_0x2beea4;if(_0x2beea4>_0x5266e1[a135_0x77c6('0x57')][a135_0x77c6('0x2c')]){await _0x5266e1[a135_0x77c6('0x17')](_0x2beea4*gamification['DEFAUL_CURRENCY_REWARD_MULTIPLIER'],a135_0x77c6('0x38'),_0x5266e1['document']);if(_0x26d9f3[a135_0x77c6('0x57')][a135_0x77c6('0x59')][a135_0x77c6('0x20')]){_0x5a5a49[a135_0x77c6('0x4f')][a135_0x77c6('0x6')]({'embed':{'color':tesseract_1[a135_0x77c6('0x2a')][a135_0x77c6('0x1')][a135_0x77c6('0x58')],'fields':[{'name':a135_0x77c6('0x5'),'value':_0x5ba76f[a135_0x77c6('0x4b')]['getString'](_0x26d9f3[a135_0x77c6('0x57')][a135_0x77c6('0x30')],a135_0x77c6('0x28'),'levelUp',_0x5a5a49[a135_0x77c6('0x29')][a135_0x77c6('0x56')],_0x5266e1[a135_0x77c6('0x57')]['level'])}]}})['catch'](()=>{});}this['handleLevelRoles'](_0x5a5a49,_0x5266e1[a135_0x77c6('0x57')][a135_0x77c6('0x2c')])[a135_0x77c6('0x44')](tesseract_1['Logger'][a135_0x77c6('0x16')]);}await _0x5266e1[a135_0x77c6('0x57')][a135_0x77c6('0x35')]();_0xdf62b4[a135_0x77c6('0x3c')](_0x5a5a49[a135_0x77c6('0x29')]['id']);this[a135_0x77c6('0x3d')][a135_0x77c6('0xb')](_0x5a5a49[a135_0x77c6('0x53')]['id'],_0xdf62b4);_0x5a5a49['client'][a135_0x77c6('0x12')](()=>{const _0x3bdb7a=this[a135_0x77c6('0x3d')][a135_0x77c6('0xd')](_0x5a5a49[a135_0x77c6('0x53')]['id']);_0x3bdb7a['splice'](_0x3bdb7a[a135_0x77c6('0x34')](_0x5a5a49[a135_0x77c6('0x29')]['id']),0x1);this[a135_0x77c6('0x3d')][a135_0x77c6('0xb')](_0x5a5a49['guild']['id'],_0x3bdb7a);},0x32c8);};this[a135_0x77c6('0x37')]=async _0x4df7ab=>{if(!_0x4df7ab[a135_0x77c6('0x3e')])return;const _0x32388a=await Trigger_1['default'][a135_0x77c6('0x7')]({'guild':_0x4df7ab['guild']['id']});const _0x374e68=[];const _0x1f73fb=[];for(const _0x1594a3 of _0x32388a){const _0x1158b4=new RegExp(_0x1594a3[a135_0x77c6('0x15')][a135_0x77c6('0x8')](/\?/g,'.')[a135_0x77c6('0x8')](/\*+/g,'.*'),'ig');if(!_0x1158b4[a135_0x77c6('0x2d')](_0x4df7ab['content']))continue;if(_0x1594a3[a135_0x77c6('0x19')]){_0x374e68[a135_0x77c6('0x3c')](_0x1594a3[a135_0x77c6('0x19')]);}if(_0x1594a3[a135_0x77c6('0x14')]){const _0x16f194=emojis[a135_0x77c6('0x3')](_0x1594a3[a135_0x77c6('0x14')]);if(_0x16f194){_0x1f73fb[a135_0x77c6('0x3c')](_0x16f194[a135_0x77c6('0x2e')]);}}}if(_0x374e68[a135_0x77c6('0x54')]){_0x4df7ab['channel'][a135_0x77c6('0x6')]({'embed':{...JSON[a135_0x77c6('0x42')](variables[a135_0x77c6('0x4c')](JSON[a135_0x77c6('0x9')](_0x374e68[Math[a135_0x77c6('0x33')](Math[a135_0x77c6('0x1f')]()*_0x374e68[a135_0x77c6('0x54')])]),_0x4df7ab)),'footer':{'text':_0x4df7ab['client']['locale']['getConstant']('bastion.name')+'\x20Trigger'}}});}if(_0x1f73fb[a135_0x77c6('0x54')]){_0x4df7ab[a135_0x77c6('0xa')](_0x1f73fb[Math['floor'](Math[a135_0x77c6('0x1f')]()*_0x1f73fb['length'])]);}};this[a135_0x77c6('0x21')]=async _0x2dde44=>{const _0x3c9c6b=await TextChannel_1[a135_0x77c6('0x45')][a135_0x77c6('0x52')]({'_id':_0x2dde44[a135_0x77c6('0x4f')]['id'],'voting':!![]});if(!_0x3c9c6b)return;_0x2dde44[a135_0x77c6('0xa')]('👍')['catch'](()=>{});_0x2dde44[a135_0x77c6('0xa')]('👎')[a135_0x77c6('0x44')](()=>{});};this[a135_0x77c6('0x47')]=async _0x34d350=>{if(!_0x34d350['content'])return;const _0x1280e0=await omnic[a135_0x77c6('0x13')](a135_0x77c6('0x36')+encodeURIComponent(_0x34d350[a135_0x77c6('0x3e')]))['then'](_0x499413=>_0x499413[a135_0x77c6('0x1d')]());if(_0x1280e0[a135_0x77c6('0x27')]!=='success')return;const _0x3040f0=_0x1280e0['response'][a135_0x77c6('0x41')]instanceof Array?_0x1280e0[a135_0x77c6('0x18')][a135_0x77c6('0x41')]:[_0x1280e0[a135_0x77c6('0x18')][a135_0x77c6('0x41')]];for(const _0x1c0edc of _0x3040f0){await _0x34d350[a135_0x77c6('0x4f')]['send'](_0x1c0edc)[a135_0x77c6('0x44')](()=>{});}};this[a135_0x77c6('0x55')]=async _0x2529c7=>{const _0x2686e1=await Config_1[a135_0x77c6('0x45')][a135_0x77c6('0x22')](_0x2529c7[a135_0x77c6('0x4')][a135_0x77c6('0xe')]['id']);if(_0x2686e1['relayDirectMessages']&&_0x2529c7[a135_0x77c6('0x3e')]){const _0x450da8=await _0x2529c7[a135_0x77c6('0x4')]['fetchApplication']();const _0x261ae4=_0x450da8[a135_0x77c6('0x31')]instanceof discord_js_1[a135_0x77c6('0x25')]?_0x450da8[a135_0x77c6('0x31')][a135_0x77c6('0x31')][a135_0x77c6('0xe')]:_0x450da8[a135_0x77c6('0x31')];if(_0x2529c7[a135_0x77c6('0x29')]['id']===_0x261ae4['id'])return;const _0x3bf505=await _0x261ae4[a135_0x77c6('0x4a')]();await _0x3bf505[a135_0x77c6('0x6')]({'embed':{'color':tesseract_1[a135_0x77c6('0x2a')]['COLORS']['IRIS'],'author':{'name':_0x2529c7[a135_0x77c6('0x29')]['tag'],'iconURL':_0x2529c7[a135_0x77c6('0x29')]['displayAvatarURL']({'dynamic':!![],'size':0x40})},'description':_0x2529c7['content'],'footer':{'text':_0x2529c7[a135_0x77c6('0x29')]['id']}}});}};this[a135_0x77c6('0x26')]=async _0xd5e245=>{if(_0xd5e245[a135_0x77c6('0x53')]){this['handleGamification'](_0xd5e245)[a135_0x77c6('0x44')](()=>{});this[a135_0x77c6('0x37')](_0xd5e245)['catch'](()=>{});this[a135_0x77c6('0x21')](_0xd5e245)[a135_0x77c6('0x44')](()=>{});}else{this[a135_0x77c6('0x47')](_0xd5e245)[a135_0x77c6('0x44')](()=>{});this[a135_0x77c6('0x55')](_0xd5e245)['catch'](()=>{});}};this['recentUsers']=new Map();}};
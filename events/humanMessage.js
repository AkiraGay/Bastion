const a138_0x4b71=['document','DEFAUL_CURRENCY_REWARD_MULTIPLIER','default','success','setTimeout','roles','Logger','reaction','handleDirectMessageRelay','createDM','constructor','handleTriggers','reply','exec','splice','IRIS','member','handleLevelRoles','cache','bastion.name','has','content','makeRequest','humanMessage','react','Level-up\x20Reward','level','@bastion/tesseract','Team','json','_id','\x20Trigger','owner','Constants','../utils/omnic','return\x20/\x22\x20+\x20this\x20+\x20\x22/','../utils/variables','LEVELED\x20UP!','ModuleManagerEvent','messages','error','getString','stringify','enabled','responseReaction','status','gamification','multiplier','../models/Config','getConstant','credit','findById','includes','filter','random','handleInstantResponses','tag','remove','catch','author','recentUsers','find','map','client','experience','replace','then','info','send','add','user','computeLevel','handleVotingChannels','floor','get','locale','../utils/gamification','parse','test','displayAvatarURL','guild','responseMessage','exports','levelUp','save','response','discord.js','apply','COLORS','relayDirectMessages','push','length','handleGamification','indexOf','channel'];(function(_0x1c9cf3,_0x4b7126){const _0x1d3145=function(_0x2a2501){while(--_0x2a2501){_0x1c9cf3['push'](_0x1c9cf3['shift']());}},_0x20780c=function(){const _0x4e51a5={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4199da,_0x2d0fe4,_0x262bb7,_0x5300a4){_0x5300a4=_0x5300a4||{};let _0x2afb4a=_0x2d0fe4+'='+_0x262bb7,_0xfdd39c=0x0;for(let _0x1cac93=0x0,_0xb3ed51=_0x4199da['length'];_0x1cac93<_0xb3ed51;_0x1cac93++){const _0x5cc498=_0x4199da[_0x1cac93];_0x2afb4a+=';\x20'+_0x5cc498;const _0x5157af=_0x4199da[_0x5cc498];_0x4199da['push'](_0x5157af),_0xb3ed51=_0x4199da['length'],_0x5157af!==!![]&&(_0x2afb4a+='='+_0x5157af);}_0x5300a4['cookie']=_0x2afb4a;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1fdafc,_0x2e0153){_0x1fdafc=_0x1fdafc||function(_0xe2101f){return _0xe2101f;};const _0x531f6c=_0x1fdafc(new RegExp('(?:^|;\x20)'+_0x2e0153['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x2c8168=function(_0xf2f7cf,_0x354651){_0xf2f7cf(++_0x354651);};return _0x2c8168(_0x1d3145,_0x4b7126),_0x531f6c?decodeURIComponent(_0x531f6c[0x1]):undefined;}},_0x186a5d=function(){const _0x532887=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x532887['test'](_0x4e51a5['removeCookie']['toString']());};_0x4e51a5['updateCookie']=_0x186a5d;let _0x2a1fdd='';const _0x1a2f03=_0x4e51a5['updateCookie']();if(!_0x1a2f03)_0x4e51a5['setCookie'](['*'],'counter',0x1);else _0x1a2f03?_0x2a1fdd=_0x4e51a5['getCookie'](null,'counter'):_0x4e51a5['removeCookie']();};_0x20780c();}(a138_0x4b71,0xdc));const a138_0x1d31=function(_0x1c9cf3,_0x4b7126){_0x1c9cf3=_0x1c9cf3-0x0;let _0x1d3145=a138_0x4b71[_0x1c9cf3];return _0x1d3145;};const a138_0x262bb7=function(){let _0x24c54f=!![];return function(_0x5daa6f,_0x269985){const _0x5b1307=_0x24c54f?function(){if(_0x269985){const _0x1bc5a3=_0x269985[a138_0x1d31('0x39')](_0x5daa6f,arguments);return _0x269985=null,_0x1bc5a3;}}:function(){};return _0x24c54f=![],_0x5b1307;};}(),a138_0x2d0fe4=a138_0x262bb7(this,function(){const _0x23d61d=function(){const _0x366bf7=_0x23d61d[a138_0x1d31('0x4b')](a138_0x1d31('0x5'))()[a138_0x1d31('0x4b')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x366bf7['test'](a138_0x2d0fe4);};return _0x23d61d();});a138_0x2d0fe4();'use strict';const tesseract_1=require(a138_0x1d31('0x5c')),discord_js_1=require(a138_0x1d31('0x38')),emojis=require('../utils/emojis'),gamification=require(a138_0x1d31('0x2e')),omnic=require(a138_0x1d31('0x4')),variables=require(a138_0x1d31('0x6')),Config_1=require(a138_0x1d31('0x12')),Role_1=require('../models/Role'),TextChannel_1=require('../models/TextChannel'),Trigger_1=require('../models/Trigger');module[a138_0x1d31('0x34')]=class HumanMessageEvent extends tesseract_1[a138_0x1d31('0x8')]{constructor(){super(a138_0x1d31('0x58')),this[a138_0x1d31('0x52')]=async(_0x1e04b9,_0xcb6050)=>{const _0x5e33fd=await Role_1['default'][a138_0x1d31('0x1f')]({'guild':_0x1e04b9['guild']['id'],'level':{'$exists':!![]}}),_0x22710f=_0x5e33fd[a138_0x1d31('0x17')](_0x5a89e8=>_0x5a89e8[a138_0x1d31('0x5b')]!==_0xcb6050&&_0x1e04b9[a138_0x1d31('0x32')][a138_0x1d31('0x46')]['cache'][a138_0x1d31('0x55')](_0x5a89e8['_id'])),_0x5c70d5=_0x5e33fd[a138_0x1d31('0x17')](_0x285287=>_0x285287[a138_0x1d31('0x5b')]===_0xcb6050&&_0x1e04b9[a138_0x1d31('0x32')][a138_0x1d31('0x46')][a138_0x1d31('0x53')]['has'](_0x285287[a138_0x1d31('0x0')]));_0x5c70d5['length']&&(await _0x1e04b9[a138_0x1d31('0x51')][a138_0x1d31('0x46')][a138_0x1d31('0x27')](_0x5c70d5[a138_0x1d31('0x20')](_0x32195f=>_0x32195f[a138_0x1d31('0x0')])),await _0x1e04b9[a138_0x1d31('0x51')][a138_0x1d31('0x46')][a138_0x1d31('0x1b')](_0x22710f[a138_0x1d31('0x20')](_0x2a2568=>_0x2a2568[a138_0x1d31('0x0')])));},this[a138_0x1d31('0x3e')]=async _0x300409=>{const _0x173464=this[a138_0x1d31('0x1e')][a138_0x1d31('0x2c')](_0x300409[a138_0x1d31('0x32')]['id'])||[];if(_0x173464[a138_0x1d31('0x16')](_0x300409[a138_0x1d31('0x1d')]['id']))return;const _0x35726b=_0x300409['client'],_0x219cca=_0x300409[a138_0x1d31('0x32')],_0xa4113c=_0x300409[a138_0x1d31('0x51')];if(!_0x219cca[a138_0x1d31('0x41')]['gamification']||!_0x219cca[a138_0x1d31('0x41')][a138_0x1d31('0x10')][a138_0x1d31('0xd')])return;if(_0xa4113c[a138_0x1d31('0x41')][a138_0x1d31('0x5b')]>=gamification['MAX_LEVEL']||_0xa4113c[a138_0x1d31('0x41')][a138_0x1d31('0x22')]>=gamification['MAX_EXPERIENCE'](_0x219cca[a138_0x1d31('0x41')]['gamification'][a138_0x1d31('0x11')]))return;_0xa4113c['document'][a138_0x1d31('0x22')]+=0x1;const _0x28f51a=gamification[a138_0x1d31('0x29')](_0xa4113c[a138_0x1d31('0x41')][a138_0x1d31('0x22')],_0x219cca[a138_0x1d31('0x41')][a138_0x1d31('0x10')][a138_0x1d31('0x11')]);_0x28f51a>_0xa4113c[a138_0x1d31('0x41')][a138_0x1d31('0x5b')]&&(await _0xa4113c[a138_0x1d31('0x14')](_0x28f51a*gamification[a138_0x1d31('0x42')],a138_0x1d31('0x5a'),_0xa4113c[a138_0x1d31('0x41')]),_0x219cca[a138_0x1d31('0x41')]['gamification'][a138_0x1d31('0x9')]&&_0x300409[a138_0x1d31('0x40')][a138_0x1d31('0x26')]({'embed':{'color':tesseract_1[a138_0x1d31('0x3')][a138_0x1d31('0x3a')][a138_0x1d31('0x50')],'fields':[{'name':a138_0x1d31('0x7'),'value':_0x35726b[a138_0x1d31('0x2d')][a138_0x1d31('0xb')](_0x219cca[a138_0x1d31('0x41')]['language'],a138_0x1d31('0x25'),a138_0x1d31('0x35'),_0x300409['author'][a138_0x1d31('0x1a')],_0x28f51a)}]}})[a138_0x1d31('0x1c')](()=>{}),this[a138_0x1d31('0x52')](_0x300409,_0xa4113c[a138_0x1d31('0x41')][a138_0x1d31('0x5b')])['catch'](tesseract_1[a138_0x1d31('0x47')][a138_0x1d31('0xa')])),_0xa4113c[a138_0x1d31('0x41')]['level']=_0x28f51a,await _0xa4113c['document'][a138_0x1d31('0x36')](),_0x173464[a138_0x1d31('0x3c')](_0x300409[a138_0x1d31('0x1d')]['id']),this[a138_0x1d31('0x1e')]['set'](_0x300409[a138_0x1d31('0x32')]['id'],_0x173464),_0x300409['client'][a138_0x1d31('0x45')](()=>{const _0x3ea86c=this[a138_0x1d31('0x1e')]['get'](_0x300409[a138_0x1d31('0x32')]['id']);_0x3ea86c[a138_0x1d31('0x4f')](_0x3ea86c[a138_0x1d31('0x3f')](_0x300409['author']['id']),0x1),this[a138_0x1d31('0x1e')]['set'](_0x300409[a138_0x1d31('0x32')]['id'],_0x3ea86c);},0x32c8);},this['handleTriggers']=async _0x77b9f5=>{if(!_0x77b9f5[a138_0x1d31('0x56')])return;const _0x2ac935=await Trigger_1[a138_0x1d31('0x43')][a138_0x1d31('0x1f')]({'guild':_0x77b9f5[a138_0x1d31('0x32')]['id']}),_0x10cb95=[],_0x314b1f=[];for(const _0x215fd7 of _0x2ac935){const _0x311baa=new RegExp(_0x215fd7['trigger'][a138_0x1d31('0x23')](/\?/g,'.')[a138_0x1d31('0x23')](/\*+/g,'.*'),'ig');if(!_0x311baa[a138_0x1d31('0x30')](_0x77b9f5[a138_0x1d31('0x56')]))continue;_0x215fd7[a138_0x1d31('0x33')]&&_0x10cb95[a138_0x1d31('0x3c')](_0x215fd7[a138_0x1d31('0x33')]);if(_0x215fd7[a138_0x1d31('0xe')]){const _0x15d082=emojis['parseEmoji'](_0x215fd7[a138_0x1d31('0xe')]);_0x15d082&&_0x314b1f['push'](_0x15d082[a138_0x1d31('0x48')]);}}_0x10cb95['length']&&_0x77b9f5[a138_0x1d31('0x40')]['send']({'embed':{...JSON[a138_0x1d31('0x2f')](variables['replaceMessageVariables'](JSON[a138_0x1d31('0xc')](_0x10cb95[Math[a138_0x1d31('0x2b')](Math[a138_0x1d31('0x18')]()*_0x10cb95[a138_0x1d31('0x3d')])]),_0x77b9f5)),'footer':{'text':_0x77b9f5[a138_0x1d31('0x21')][a138_0x1d31('0x2d')][a138_0x1d31('0x13')](a138_0x1d31('0x54'))+a138_0x1d31('0x1')}}})['catch'](tesseract_1[a138_0x1d31('0x47')][a138_0x1d31('0xa')]),_0x314b1f['length']&&_0x77b9f5[a138_0x1d31('0x59')](_0x314b1f[Math[a138_0x1d31('0x2b')](Math['random']()*_0x314b1f[a138_0x1d31('0x3d')])])[a138_0x1d31('0x1c')](tesseract_1[a138_0x1d31('0x47')][a138_0x1d31('0xa')]);},this[a138_0x1d31('0x2a')]=async _0x3eddcf=>{const _0x10d2d7=await TextChannel_1[a138_0x1d31('0x43')]['findOne']({'_id':_0x3eddcf[a138_0x1d31('0x40')]['id'],'voting':!![]});if(!_0x10d2d7)return;_0x3eddcf[a138_0x1d31('0x59')]('👍')[a138_0x1d31('0x1c')](()=>{}),_0x3eddcf[a138_0x1d31('0x59')]('👎')[a138_0x1d31('0x1c')](()=>{});},this[a138_0x1d31('0x19')]=async _0x270ab3=>{if(!_0x270ab3['content'])return;const _0x1b2ed6=await omnic[a138_0x1d31('0x57')]('/chat/instant?message='+encodeURIComponent(_0x270ab3[a138_0x1d31('0x56')]))[a138_0x1d31('0x24')](_0x16c910=>_0x16c910[a138_0x1d31('0x5e')]());if(_0x1b2ed6[a138_0x1d31('0xf')]!==a138_0x1d31('0x44'))return;const _0x4892cf=_0x1b2ed6['response']['reply']instanceof Array?_0x1b2ed6[a138_0x1d31('0x37')]['reply']:[_0x1b2ed6[a138_0x1d31('0x37')][a138_0x1d31('0x4d')]];for(const _0x227620 of _0x4892cf){await _0x270ab3[a138_0x1d31('0x40')][a138_0x1d31('0x26')](_0x227620)[a138_0x1d31('0x1c')](()=>{});}},this[a138_0x1d31('0x49')]=async _0x4c6446=>{const _0x1edc90=await Config_1[a138_0x1d31('0x43')][a138_0x1d31('0x15')](_0x4c6446['client'][a138_0x1d31('0x28')]['id']);if(_0x1edc90[a138_0x1d31('0x3b')]&&_0x4c6446[a138_0x1d31('0x56')]){const _0x557b2f=await _0x4c6446[a138_0x1d31('0x21')]['fetchApplication'](),_0x5277a6=_0x557b2f[a138_0x1d31('0x2')]instanceof discord_js_1[a138_0x1d31('0x5d')]?_0x557b2f[a138_0x1d31('0x2')][a138_0x1d31('0x2')]['user']:_0x557b2f[a138_0x1d31('0x2')];if(_0x4c6446[a138_0x1d31('0x1d')]['id']===_0x5277a6['id'])return;const _0x4e3580=await _0x5277a6[a138_0x1d31('0x4a')]();await _0x4e3580[a138_0x1d31('0x26')]({'embed':{'color':tesseract_1['Constants'][a138_0x1d31('0x3a')][a138_0x1d31('0x50')],'author':{'name':_0x4c6446['author'][a138_0x1d31('0x1a')],'iconURL':_0x4c6446['author'][a138_0x1d31('0x31')]({'dynamic':!![],'size':0x40})},'description':_0x4c6446[a138_0x1d31('0x56')],'footer':{'text':_0x4c6446['author']['id']}}});}},this[a138_0x1d31('0x4e')]=async _0x1010c6=>{_0x1010c6[a138_0x1d31('0x32')]?(this[a138_0x1d31('0x3e')](_0x1010c6)['catch'](()=>{}),this[a138_0x1d31('0x4c')](_0x1010c6)[a138_0x1d31('0x1c')](()=>{}),this[a138_0x1d31('0x2a')](_0x1010c6)[a138_0x1d31('0x1c')](()=>{})):(this['handleInstantResponses'](_0x1010c6)[a138_0x1d31('0x1c')](()=>{}),this[a138_0x1d31('0x49')](_0x1010c6)['catch'](()=>{}));},this[a138_0x1d31('0x1e')]=new Map();}};
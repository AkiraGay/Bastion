const a156_0x3c2b=['premiumSinceTimestamp','getConstant','remove','../models/Role','filter','handleTriggers','reaction','humanMessage','send','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','updateMany','response','set','owner','return\x20/\x22\x20+\x20this\x20+\x20\x22/','mentions','Constants','document','Level-up\x20Reward','react','messages','handleInstantResponses','users','generateEmbed','_id','push','size','IRIS','bastion.name','splice','error','handleKarma','exports','ModuleManagerEvent','level','content','makeRequest','channel','replace','../utils/emojis','../models/Config','map','enabled','apply','parseEmoji','@bastion/tesseract','LEVELED\x20UP!','parse','handleVotingChannels','credit','../utils/omnic','handleGamification','member','experience','trigger','exec','findById','gamification','MAX_EXPERIENCE','default','createDM','../utils/embeds','smallestNeighbor','stringify','../utils/variables','get','status','thanks','Team','/chat/instant?message=','length','includes','replaceMessageVariables','handleLevelRoles','catch','setTimeout','fetchApplication','responseMessage','add','levelUp','tag','test','discord.js','has','../utils/gamification','recentUsers','guild','then','COLORS','computeLevel','roles','toLowerCase','success','responseReaction','language','client','MAX_LEVEL','floor','\x20Trigger','../models/TextChannel','multiplier','author','find','user','../utils/numbers','../models/Member','keys','from','Logger','reply','relayDirectMessages','DEFAUL_CURRENCY_REWARD_MULTIPLIER'];(function(_0x1f7f9b,_0x3c2b7f){const _0x30f66f=function(_0x4ace6c){while(--_0x4ace6c){_0x1f7f9b['push'](_0x1f7f9b['shift']());}},_0x5774e4=function(){const _0x297b5e={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x541f9f,_0xf5927a,_0x51deab,_0x24d1e4){_0x24d1e4=_0x24d1e4||{};let _0x383f6b=_0xf5927a+'='+_0x51deab,_0x306ff7=0x0;for(let _0x2fa7b6=0x0,_0x403f92=_0x541f9f['length'];_0x2fa7b6<_0x403f92;_0x2fa7b6++){const _0x597502=_0x541f9f[_0x2fa7b6];_0x383f6b+=';\x20'+_0x597502;const _0x50f309=_0x541f9f[_0x597502];_0x541f9f['push'](_0x50f309),_0x403f92=_0x541f9f['length'],_0x50f309!==!![]&&(_0x383f6b+='='+_0x50f309);}_0x24d1e4['cookie']=_0x383f6b;},'removeCookie':function(){return'dev';},'getCookie':function(_0x9dd9bd,_0x26182b){_0x9dd9bd=_0x9dd9bd||function(_0x291e72){return _0x291e72;};const _0x20f1a8=_0x9dd9bd(new RegExp('(?:^|;\x20)'+_0x26182b['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x378235=function(_0x3048c8,_0x5b63a6){_0x3048c8(++_0x5b63a6);};return _0x378235(_0x30f66f,_0x3c2b7f),_0x20f1a8?decodeURIComponent(_0x20f1a8[0x1]):undefined;}},_0x314fc5=function(){const _0x17b3a7=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x17b3a7['test'](_0x297b5e['removeCookie']['toString']());};_0x297b5e['updateCookie']=_0x314fc5;let _0x1112b8='';const _0x2c0876=_0x297b5e['updateCookie']();if(!_0x2c0876)_0x297b5e['setCookie'](['*'],'counter',0x1);else _0x2c0876?_0x1112b8=_0x297b5e['getCookie'](null,'counter'):_0x297b5e['removeCookie']();};_0x5774e4();}(a156_0x3c2b,0x8a));const a156_0x30f6=function(_0x1f7f9b,_0x3c2b7f){_0x1f7f9b=_0x1f7f9b-0x0;let _0x30f66f=a156_0x3c2b[_0x1f7f9b];return _0x30f66f;};const _0x165460=a156_0x30f6,a156_0x297b5e=function(){let _0x1112b8=!![];return function(_0x2c0876,_0x541f9f){const _0xf5927a=_0x1112b8?function(){const _0x208f28=a156_0x30f6;if(_0x541f9f){const _0x51deab=_0x541f9f[_0x208f28('0x11')](_0x2c0876,arguments);return _0x541f9f=null,_0x51deab;}}:function(){};return _0x1112b8=![],_0xf5927a;};}(),a156_0x4ace6c=a156_0x297b5e(this,function(){const _0x24d1e4=function(){const _0x3c27c0=a156_0x30f6,_0x383f6b=_0x24d1e4['constructor'](_0x3c27c0('0x64'))()['constructor'](_0x3c27c0('0x5f'));return!_0x383f6b[_0x3c27c0('0x37')](a156_0x4ace6c);};return _0x24d1e4();});a156_0x4ace6c();'use strict';const tesseract_1=require(_0x165460('0x13')),discord_js_1=require(_0x165460('0x38')),embeds=require(_0x165460('0x23')),emojis=require(_0x165460('0xd')),gamification=require(_0x165460('0x3a')),numbers=require(_0x165460('0x4e')),omnic=require(_0x165460('0x18')),variables=require(_0x165460('0x26')),Config_1=require(_0x165460('0xe')),Member_1=require(_0x165460('0x4f')),Role_1=require(_0x165460('0x59')),TextChannel_1=require(_0x165460('0x49')),Trigger_1=require('../models/Trigger');module[_0x165460('0x6')]=class HumanMessageEvent extends tesseract_1[_0x165460('0x7')]{constructor(){const _0x4499f7=_0x165460;super(_0x4499f7('0x5d')),this[_0x4499f7('0x2f')]=async(_0x306ff7,_0x2fa7b6)=>{const _0x1f4f69=_0x4499f7,_0x403f92=await Role_1[_0x1f4f69('0x21')][_0x1f4f69('0x4c')]({'guild':_0x306ff7[_0x1f4f69('0x3c')]['id'],'level':{'$exists':!![],'$ne':null}});if(!_0x403f92||!_0x403f92['length'])return;const _0x597502=numbers[_0x1f4f69('0x24')](_0x2fa7b6,_0x403f92[_0x1f4f69('0xf')](_0x26182b=>_0x26182b['level'])),_0x50f309=_0x403f92[_0x1f4f69('0x5a')](_0x20f1a8=>_0x20f1a8[_0x1f4f69('0x8')]!==_0x597502&&_0x306ff7[_0x1f4f69('0x3c')][_0x1f4f69('0x40')]['cache'][_0x1f4f69('0x39')](_0x20f1a8[_0x1f4f69('0x6e')])),_0x9dd9bd=_0x403f92['filter'](_0x378235=>_0x378235['level']===_0x597502&&_0x306ff7[_0x1f4f69('0x3c')][_0x1f4f69('0x40')]['cache'][_0x1f4f69('0x39')](_0x378235[_0x1f4f69('0x6e')]));_0x9dd9bd[_0x1f4f69('0x2c')]&&(await _0x306ff7[_0x1f4f69('0x1a')][_0x1f4f69('0x40')][_0x1f4f69('0x34')](_0x9dd9bd['map'](_0x291e72=>_0x291e72['_id'])),await _0x306ff7[_0x1f4f69('0x1a')][_0x1f4f69('0x40')][_0x1f4f69('0x58')](_0x50f309[_0x1f4f69('0xf')](_0x3048c8=>_0x3048c8[_0x1f4f69('0x6e')])));},this[_0x4499f7('0x19')]=async _0x5b63a6=>{const _0x44b7ec=_0x4499f7,_0x17b3a7=this[_0x44b7ec('0x3b')][_0x44b7ec('0x27')](_0x5b63a6[_0x44b7ec('0x3c')]['id'])||[];if(_0x17b3a7['includes'](_0x5b63a6[_0x44b7ec('0x4b')]['id']))return;const _0x265828=_0x5b63a6[_0x44b7ec('0x45')],_0xc8ba51=_0x5b63a6[_0x44b7ec('0x3c')],_0x4a7629=_0x5b63a6[_0x44b7ec('0x1a')];if(!_0xc8ba51['document'][_0x44b7ec('0x1f')]||!_0xc8ba51[_0x44b7ec('0x67')]['gamification'][_0x44b7ec('0x10')])return;if(_0x4a7629[_0x44b7ec('0x67')][_0x44b7ec('0x8')]>=gamification[_0x44b7ec('0x46')]||_0x4a7629['document'][_0x44b7ec('0x1b')]>=gamification[_0x44b7ec('0x20')](_0xc8ba51[_0x44b7ec('0x67')]['gamification'][_0x44b7ec('0x4a')]))return;_0x4a7629['document'][_0x44b7ec('0x1b')]=_0x4a7629[_0x44b7ec('0x56')]?_0x4a7629[_0x44b7ec('0x67')][_0x44b7ec('0x1b')]+0x2:_0x4a7629[_0x44b7ec('0x67')][_0x44b7ec('0x1b')]+0x1;const _0x267a40=gamification[_0x44b7ec('0x3f')](_0x4a7629[_0x44b7ec('0x67')][_0x44b7ec('0x1b')],_0xc8ba51[_0x44b7ec('0x67')][_0x44b7ec('0x1f')][_0x44b7ec('0x4a')]);_0x267a40>_0x4a7629[_0x44b7ec('0x67')][_0x44b7ec('0x8')]&&(await _0x4a7629[_0x44b7ec('0x17')](_0x267a40*gamification[_0x44b7ec('0x55')],_0x44b7ec('0x68'),_0x4a7629[_0x44b7ec('0x67')]),_0xc8ba51[_0x44b7ec('0x67')][_0x44b7ec('0x1f')][_0x44b7ec('0x6a')]&&_0x5b63a6['channel']['send']({'embed':{'color':tesseract_1[_0x44b7ec('0x66')]['COLORS'][_0x44b7ec('0x1')],'fields':[{'name':_0x44b7ec('0x14'),'value':_0x265828['locale']['getString'](_0xc8ba51[_0x44b7ec('0x67')][_0x44b7ec('0x44')],'info',_0x44b7ec('0x35'),_0x5b63a6[_0x44b7ec('0x4b')][_0x44b7ec('0x36')],_0x267a40)}]}})[_0x44b7ec('0x30')](()=>{}),this['handleLevelRoles'](_0x5b63a6,_0x4a7629[_0x44b7ec('0x67')][_0x44b7ec('0x8')])[_0x44b7ec('0x30')](tesseract_1[_0x44b7ec('0x52')]['error'])),_0x4a7629[_0x44b7ec('0x67')][_0x44b7ec('0x8')]=_0x267a40,await _0x4a7629[_0x44b7ec('0x67')]['save'](),_0x17b3a7[_0x44b7ec('0x6f')](_0x5b63a6[_0x44b7ec('0x4b')]['id']),this['recentUsers'][_0x44b7ec('0x62')](_0x5b63a6[_0x44b7ec('0x3c')]['id'],_0x17b3a7),_0x5b63a6['client'][_0x44b7ec('0x31')](()=>{const _0x12a1ad=_0x44b7ec,_0x19f620=this[_0x12a1ad('0x3b')]['get'](_0x5b63a6[_0x12a1ad('0x3c')]['id']);_0x19f620[_0x12a1ad('0x3')](_0x19f620['indexOf'](_0x5b63a6[_0x12a1ad('0x4b')]['id']),0x1),this['recentUsers'][_0x12a1ad('0x62')](_0x5b63a6['guild']['id'],_0x19f620);},0x32c8);},this[_0x4499f7('0x5b')]=async _0x4618c7=>{const _0x523c71=_0x4499f7;if(!_0x4618c7[_0x523c71('0x9')])return;const _0x40d409=await Trigger_1['default'][_0x523c71('0x4c')]({'guild':_0x4618c7[_0x523c71('0x3c')]['id']}),_0x2232d0=[],_0x134a68=[];for(const _0x321466 of _0x40d409){const _0x27347a=new RegExp(_0x321466[_0x523c71('0x1c')][_0x523c71('0xc')](/\?/g,'.')[_0x523c71('0xc')](/\*+/g,'.*'),'ig');if(!_0x27347a['test'](_0x4618c7[_0x523c71('0x9')]))continue;_0x321466[_0x523c71('0x33')]&&_0x2232d0['push'](_0x321466['responseMessage']);if(_0x321466[_0x523c71('0x43')]){const _0x464b8a=emojis[_0x523c71('0x12')](_0x321466[_0x523c71('0x43')]);_0x464b8a&&_0x134a68['push'](_0x464b8a[_0x523c71('0x5c')]);}}_0x2232d0[_0x523c71('0x2c')]&&_0x4618c7[_0x523c71('0xb')][_0x523c71('0x5e')]({'embed':{...embeds[_0x523c71('0x6d')](JSON[_0x523c71('0x15')](variables[_0x523c71('0x2e')](JSON[_0x523c71('0x25')](_0x2232d0[Math[_0x523c71('0x47')](Math['random']()*_0x2232d0['length'])]),_0x4618c7))),'footer':{'text':_0x4618c7[_0x523c71('0x45')]['locale'][_0x523c71('0x57')](_0x523c71('0x2'))+_0x523c71('0x48')}}})[_0x523c71('0x30')](tesseract_1[_0x523c71('0x52')][_0x523c71('0x4')]),_0x134a68[_0x523c71('0x2c')]&&_0x4618c7[_0x523c71('0x69')](_0x134a68[Math['floor'](Math['random']()*_0x134a68[_0x523c71('0x2c')])])['catch'](tesseract_1[_0x523c71('0x52')][_0x523c71('0x4')]);},this[_0x4499f7('0x16')]=async _0x2db7d9=>{const _0x71e9d2=_0x4499f7,_0x39a4ab=await TextChannel_1[_0x71e9d2('0x21')]['findOne']({'_id':_0x2db7d9[_0x71e9d2('0xb')]['id'],'voting':!![]});if(!_0x39a4ab)return;_0x2db7d9[_0x71e9d2('0x69')]('👍')[_0x71e9d2('0x30')](()=>{}),_0x2db7d9['react']('👎')[_0x71e9d2('0x30')](()=>{});},this[_0x4499f7('0x5')]=async _0x14b562=>{const _0x507ab8=_0x4499f7;if(!_0x14b562[_0x507ab8('0x9')])return;if((_0x14b562[_0x507ab8('0x9')]['toLowerCase']()[_0x507ab8('0x2d')](_0x507ab8('0x29'))||_0x14b562['content'][_0x507ab8('0x41')]()[_0x507ab8('0x2d')]('thank\x20you'))&&_0x14b562[_0x507ab8('0x65')][_0x507ab8('0x6c')]&&_0x14b562[_0x507ab8('0x65')][_0x507ab8('0x6c')][_0x507ab8('0x0')]){const _0x37903e=Array[_0x507ab8('0x51')](_0x14b562['mentions'][_0x507ab8('0x6c')][_0x507ab8('0x50')]())[_0x507ab8('0x5a')](_0x56d02f=>_0x56d02f!==_0x14b562[_0x507ab8('0x1a')]['id']);await Member_1[_0x507ab8('0x21')][_0x507ab8('0x60')]({'user':{'$in':_0x37903e},'guild':_0x14b562[_0x507ab8('0x3c')]['id']},{'$inc':{'karma':0x1}}),_0x14b562[_0x507ab8('0x69')]('🆙')[_0x507ab8('0x30')](()=>{});}},this['handleInstantResponses']=async _0x241cf2=>{const _0x19a19e=_0x4499f7;if(!_0x241cf2[_0x19a19e('0x9')])return;const _0x1864b6=await omnic[_0x19a19e('0xa')](_0x19a19e('0x2b')+encodeURIComponent(_0x241cf2[_0x19a19e('0x9')]))[_0x19a19e('0x3d')](_0x1caf7f=>_0x1caf7f['json']());if(_0x1864b6[_0x19a19e('0x28')]!==_0x19a19e('0x42'))return;const _0x3d8878=_0x1864b6[_0x19a19e('0x61')][_0x19a19e('0x53')]instanceof Array?_0x1864b6[_0x19a19e('0x61')][_0x19a19e('0x53')]:[_0x1864b6[_0x19a19e('0x61')]['reply']];for(const _0x596ab1 of _0x3d8878){await _0x241cf2[_0x19a19e('0xb')][_0x19a19e('0x5e')](_0x596ab1)[_0x19a19e('0x30')](()=>{});}},this['handleDirectMessageRelay']=async _0x16146f=>{const _0x34fd3b=_0x4499f7,_0x160f24=await Config_1[_0x34fd3b('0x21')][_0x34fd3b('0x1e')](_0x16146f['client']['user']['id']);if(_0x160f24[_0x34fd3b('0x54')]&&_0x16146f[_0x34fd3b('0x9')]){const _0xcffd69=await _0x16146f['client'][_0x34fd3b('0x32')](),_0x4af02c=_0xcffd69[_0x34fd3b('0x63')]instanceof discord_js_1[_0x34fd3b('0x2a')]?_0xcffd69[_0x34fd3b('0x63')][_0x34fd3b('0x63')][_0x34fd3b('0x4d')]:_0xcffd69[_0x34fd3b('0x63')];if(_0x16146f[_0x34fd3b('0x4b')]['id']===_0x4af02c['id'])return;const _0x36a3d6=await _0x4af02c[_0x34fd3b('0x22')]();await _0x36a3d6[_0x34fd3b('0x5e')]({'embed':{'color':tesseract_1[_0x34fd3b('0x66')][_0x34fd3b('0x3e')]['IRIS'],'author':{'name':_0x16146f[_0x34fd3b('0x4b')][_0x34fd3b('0x36')],'iconURL':_0x16146f[_0x34fd3b('0x4b')]['displayAvatarURL']({'dynamic':!![],'size':0x40})},'description':_0x16146f[_0x34fd3b('0x9')],'footer':{'text':_0x16146f['author']['id']}}});}},this[_0x4499f7('0x1d')]=async _0x371daa=>{const _0x4b0179=_0x4499f7;_0x371daa[_0x4b0179('0x3c')]?(this['handleGamification'](_0x371daa)['catch'](()=>{}),this[_0x4b0179('0x5b')](_0x371daa)[_0x4b0179('0x30')](()=>{}),this[_0x4b0179('0x5')](_0x371daa)['catch'](tesseract_1[_0x4b0179('0x52')][_0x4b0179('0x4')]),this[_0x4b0179('0x16')](_0x371daa)[_0x4b0179('0x30')](()=>{})):(this[_0x4b0179('0x6b')](_0x371daa)[_0x4b0179('0x30')](()=>{}),this['handleDirectMessageRelay'](_0x371daa)[_0x4b0179('0x30')](()=>{}));},this['recentUsers']=new Map();}};
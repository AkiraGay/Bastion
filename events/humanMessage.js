const a165_0x3211=['DEFAUL_CURRENCY_REWARD_MULTIPLIER','Logger','premiumSinceTimestamp','tag','author','COLORS','save','../utils/embeds','member','mentions','messages','fetchApplication','toLowerCase','445455ldyyru','responseReaction','apply','default','updateMany','catch','channel','../utils/numbers','../models/Member','handleDirectMessageRelay','Level-up\x20Reward','success','_id','10525Nwzipt','657894RTLpzd','level','thank\x20you','response','handleVotingChannels','../utils/omnic','enabled','13lxwYVg','exports','credit','replaceMessageVariables','MAX_LEVEL','reply','findOne','getConstant','content','reaction','3533BHvZOQ','computeLevel','createDM','getString','cache','experience','18emdDBI','MAX_EXPERIENCE','527717WOQtGD','LEVELED\x20UP!','json','has','error','map','size','user','get','language','../models/Config','../models/Role','replace','indexOf','multiplier','client','send','responseMessage','from','random','527673xWYigJ','roles','find','generateEmbed','findById','Team','@bastion/tesseract','length','ModuleManagerEvent','smallestNeighbor','parse','../utils/emojis','react','thanks','../utils/variables','recentUsers','status','keys','locale','handleGamification','then','stringify','add','handleKarma','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','exec','push','760658JJQYaI','discord.js','test','IRIS','constructor','setTimeout','handleTriggers','levelUp','floor','guild','filter','Constants','owner','relayDirectMessages','handleInstantResponses','includes','users','parseEmoji','gamification','document'];const a165_0x1b99=function(_0x5e7bb5,_0x31863a){_0x5e7bb5=_0x5e7bb5-0xda;let _0x39998c=a165_0x3211[_0x5e7bb5];return _0x39998c;};const a165_0x346833=a165_0x1b99;(function(_0x47e571,_0x381671){const _0x59ce54=a165_0x1b99;while(!![]){try{const _0x345259=parseInt(_0x59ce54(0x11c))+parseInt(_0x59ce54(0x114))*-parseInt(_0x59ce54(0x10a))+-parseInt(_0x59ce54(0x102))*-parseInt(_0x59ce54(0x11a))+-parseInt(_0x59ce54(0x14b))+parseInt(_0x59ce54(0x103))+parseInt(_0x59ce54(0xf5))+-parseInt(_0x59ce54(0x130));if(_0x345259===_0x381671)break;else _0x47e571['push'](_0x47e571['shift']());}catch(_0x2920b0){_0x47e571['push'](_0x47e571['shift']());}}}(a165_0x3211,0x76b70));const a165_0xe70fc5=function(){let _0x461252=!![];return function(_0x4fa04e,_0x472be4){const _0x2015d8=_0x461252?function(){const _0x14d0e0=a165_0x1b99;if(_0x472be4){const _0x555f93=_0x472be4[_0x14d0e0(0xf7)](_0x4fa04e,arguments);return _0x472be4=null,_0x555f93;}}:function(){};return _0x461252=![],_0x2015d8;};}(),a165_0x579a66=a165_0xe70fc5(this,function(){const _0x10658f=function(){const _0x3cb8db=a165_0x1b99,_0x309d1c=_0x10658f[_0x3cb8db(0x14f)]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[_0x3cb8db(0x14f)](_0x3cb8db(0x148));return!_0x309d1c[_0x3cb8db(0x14d)](a165_0x579a66);};return _0x10658f();});a165_0x579a66();'use strict';const tesseract_1=require(a165_0x346833(0x136)),discord_js_1=require(a165_0x346833(0x14c)),embeds=require(a165_0x346833(0xef)),emojis=require(a165_0x346833(0x13b)),gamification=require('../utils/gamification'),numbers=require(a165_0x346833(0xfc)),omnic=require(a165_0x346833(0x108)),variables=require(a165_0x346833(0x13e)),Config_1=require(a165_0x346833(0x126)),Member_1=require(a165_0x346833(0xfd)),Role_1=require(a165_0x346833(0x127)),TextChannel_1=require('../models/TextChannel'),Trigger_1=require('../models/Trigger');module[a165_0x346833(0x10b)]=class HumanMessageEvent extends tesseract_1[a165_0x346833(0x138)]{constructor(){const _0x12ee41=a165_0x346833;super('humanMessage'),this['handleLevelRoles']=async(_0x61c2dc,_0x3fd7d6)=>{const _0x4efa0f=a165_0x1b99,_0x3e132d=await Role_1['default'][_0x4efa0f(0x132)]({'guild':_0x61c2dc[_0x4efa0f(0xdd)]['id'],'level':{'$exists':!![],'$ne':null}});if(!_0x3e132d||!_0x3e132d[_0x4efa0f(0x137)])return;const _0x2bc601=numbers[_0x4efa0f(0x139)](_0x3fd7d6,_0x3e132d['map'](_0x5a3b06=>_0x5a3b06[_0x4efa0f(0x104)])),_0x38d015=_0x3e132d[_0x4efa0f(0xde)](_0x280b3a=>_0x280b3a[_0x4efa0f(0x104)]!==_0x2bc601&&_0x61c2dc[_0x4efa0f(0xdd)][_0x4efa0f(0x131)][_0x4efa0f(0x118)][_0x4efa0f(0x11f)](_0x280b3a[_0x4efa0f(0x101)])),_0x8b6c6d=_0x3e132d[_0x4efa0f(0xde)](_0x1f6715=>_0x1f6715[_0x4efa0f(0x104)]===_0x2bc601&&_0x61c2dc[_0x4efa0f(0xdd)]['roles'][_0x4efa0f(0x118)]['has'](_0x1f6715[_0x4efa0f(0x101)]));_0x8b6c6d[_0x4efa0f(0x137)]&&(await _0x61c2dc['member']['roles'][_0x4efa0f(0x146)](_0x8b6c6d['map'](_0x3d1b2a=>_0x3d1b2a[_0x4efa0f(0x101)])),await _0x61c2dc[_0x4efa0f(0xf0)][_0x4efa0f(0x131)]['remove'](_0x38d015[_0x4efa0f(0x121)](_0x59882e=>_0x59882e[_0x4efa0f(0x101)])));},this[_0x12ee41(0x143)]=async _0x18b21c=>{const _0x4afaf2=_0x12ee41,_0x2b79c2=this[_0x4afaf2(0x13f)][_0x4afaf2(0x124)](_0x18b21c[_0x4afaf2(0xdd)]['id'])||[];if(_0x2b79c2[_0x4afaf2(0xe3)](_0x18b21c[_0x4afaf2(0xec)]['id']))return;const _0xe7c4bb=_0x18b21c[_0x4afaf2(0x12b)],_0x4d1250=_0x18b21c['guild'],_0x1e7cf5=_0x18b21c[_0x4afaf2(0xf0)];if(!_0x4d1250[_0x4afaf2(0xe7)][_0x4afaf2(0xe6)]||!_0x4d1250[_0x4afaf2(0xe7)][_0x4afaf2(0xe6)][_0x4afaf2(0x109)])return;if(_0x1e7cf5['document'][_0x4afaf2(0x104)]>=gamification[_0x4afaf2(0x10e)]||_0x1e7cf5[_0x4afaf2(0xe7)][_0x4afaf2(0x119)]>=gamification[_0x4afaf2(0x11b)](_0x4d1250[_0x4afaf2(0xe7)]['gamification'][_0x4afaf2(0x12a)]))return;_0x1e7cf5['document'][_0x4afaf2(0x119)]=_0x1e7cf5[_0x4afaf2(0xea)]?_0x1e7cf5[_0x4afaf2(0xe7)][_0x4afaf2(0x119)]+0x2:_0x1e7cf5[_0x4afaf2(0xe7)][_0x4afaf2(0x119)]+0x1;const _0x487193=gamification[_0x4afaf2(0x115)](_0x1e7cf5['document'][_0x4afaf2(0x119)],_0x4d1250[_0x4afaf2(0xe7)][_0x4afaf2(0xe6)][_0x4afaf2(0x12a)]);_0x487193>_0x1e7cf5[_0x4afaf2(0xe7)][_0x4afaf2(0x104)]&&(await _0x1e7cf5[_0x4afaf2(0x10c)](_0x487193*gamification[_0x4afaf2(0xe8)],_0x4afaf2(0xff),_0x1e7cf5[_0x4afaf2(0xe7)]),_0x4d1250[_0x4afaf2(0xe7)][_0x4afaf2(0xe6)][_0x4afaf2(0xf2)]&&_0x18b21c[_0x4afaf2(0xfb)][_0x4afaf2(0x12c)]({'embed':{'color':tesseract_1[_0x4afaf2(0xdf)][_0x4afaf2(0xed)][_0x4afaf2(0x14e)],'fields':[{'name':_0x4afaf2(0x11d),'value':_0xe7c4bb[_0x4afaf2(0x142)][_0x4afaf2(0x117)](_0x4d1250['document'][_0x4afaf2(0x125)],'info',_0x4afaf2(0xdb),_0x18b21c[_0x4afaf2(0xec)][_0x4afaf2(0xeb)],_0x487193)}]}})[_0x4afaf2(0xfa)](()=>{}),this['handleLevelRoles'](_0x18b21c,_0x487193)[_0x4afaf2(0xfa)](tesseract_1['Logger']['error'])),_0x1e7cf5[_0x4afaf2(0xe7)]['level']=_0x487193,await _0x1e7cf5[_0x4afaf2(0xe7)][_0x4afaf2(0xee)](),_0x2b79c2[_0x4afaf2(0x14a)](_0x18b21c[_0x4afaf2(0xec)]['id']),this[_0x4afaf2(0x13f)]['set'](_0x18b21c[_0x4afaf2(0xdd)]['id'],_0x2b79c2),_0x18b21c['client'][_0x4afaf2(0x150)](()=>{const _0x46e0fa=_0x4afaf2,_0x5f1ada=this[_0x46e0fa(0x13f)][_0x46e0fa(0x124)](_0x18b21c['guild']['id']);_0x5f1ada['splice'](_0x5f1ada[_0x46e0fa(0x129)](_0x18b21c[_0x46e0fa(0xec)]['id']),0x1),this[_0x46e0fa(0x13f)]['set'](_0x18b21c[_0x46e0fa(0xdd)]['id'],_0x5f1ada);},0x32c8);},this[_0x12ee41(0xda)]=async _0x116483=>{const _0x145fdf=_0x12ee41;if(!_0x116483[_0x145fdf(0x112)])return;const _0x103739=await Trigger_1[_0x145fdf(0xf8)]['find']({'guild':_0x116483['guild']['id']}),_0x123790=[],_0x20429b=[];for(const _0x4aeb70 of _0x103739){const _0x213d58=new RegExp(_0x4aeb70['trigger'][_0x145fdf(0x128)](/\?/g,'.')['replace'](/\*+/g,'.*'),'ig');if(!_0x213d58[_0x145fdf(0x14d)](_0x116483[_0x145fdf(0x112)]))continue;_0x4aeb70['responseMessage']&&_0x123790[_0x145fdf(0x14a)](_0x4aeb70[_0x145fdf(0x12d)]);if(_0x4aeb70[_0x145fdf(0xf6)]){const _0x300058=emojis[_0x145fdf(0xe5)](_0x4aeb70[_0x145fdf(0xf6)]);_0x300058&&_0x20429b[_0x145fdf(0x14a)](_0x300058[_0x145fdf(0x113)]);}}_0x123790['length']&&_0x116483['channel'][_0x145fdf(0x12c)]({'embed':{...embeds[_0x145fdf(0x133)](JSON[_0x145fdf(0x13a)](variables[_0x145fdf(0x10d)](JSON[_0x145fdf(0x145)](_0x123790[Math[_0x145fdf(0xdc)](Math[_0x145fdf(0x12f)]()*_0x123790[_0x145fdf(0x137)])]),_0x116483))),'footer':{'text':_0x116483['client']['locale'][_0x145fdf(0x111)]('bastion.name')+'\x20Trigger'}}})[_0x145fdf(0xfa)](tesseract_1[_0x145fdf(0xe9)][_0x145fdf(0x120)]),_0x20429b['length']&&_0x116483[_0x145fdf(0x13c)](_0x20429b[Math[_0x145fdf(0xdc)](Math['random']()*_0x20429b[_0x145fdf(0x137)])])[_0x145fdf(0xfa)](tesseract_1[_0x145fdf(0xe9)]['error']);},this['handleVotingChannels']=async _0xa1c076=>{const _0x4630bc=_0x12ee41,_0x730478=await TextChannel_1[_0x4630bc(0xf8)][_0x4630bc(0x110)]({'_id':_0xa1c076[_0x4630bc(0xfb)]['id'],'voting':!![]});if(!_0x730478)return;_0xa1c076[_0x4630bc(0x13c)]('👍')[_0x4630bc(0xfa)](()=>{}),_0xa1c076[_0x4630bc(0x13c)]('👎')[_0x4630bc(0xfa)](()=>{});},this['handleKarma']=async _0x56888d=>{const _0x2d3b58=_0x12ee41;if(!_0x56888d[_0x2d3b58(0x112)])return;if(!_0x56888d[_0x2d3b58(0xdd)][_0x2d3b58(0xe7)][_0x2d3b58(0xe6)]||!_0x56888d[_0x2d3b58(0xdd)][_0x2d3b58(0xe7)][_0x2d3b58(0xe6)][_0x2d3b58(0x109)])return;if((_0x56888d[_0x2d3b58(0x112)][_0x2d3b58(0xf4)]()['includes'](_0x2d3b58(0x13d))||_0x56888d[_0x2d3b58(0x112)]['toLowerCase']()[_0x2d3b58(0xe3)](_0x2d3b58(0x105)))&&_0x56888d[_0x2d3b58(0xf1)][_0x2d3b58(0xe4)]&&_0x56888d['mentions'][_0x2d3b58(0xe4)][_0x2d3b58(0x122)]){const _0x1608be=Array[_0x2d3b58(0x12e)](_0x56888d[_0x2d3b58(0xf1)]['users'][_0x2d3b58(0x141)]())[_0x2d3b58(0xde)](_0x31c341=>_0x31c341!==_0x56888d[_0x2d3b58(0xf0)]['id']);await Member_1[_0x2d3b58(0xf8)][_0x2d3b58(0xf9)]({'user':{'$in':_0x1608be},'guild':_0x56888d[_0x2d3b58(0xdd)]['id']},{'$inc':{'karma':0x1}}),_0x56888d[_0x2d3b58(0x13c)]('👍🏻')['catch'](()=>{});}},this['handleInstantResponses']=async _0x46bc87=>{const _0x55ec50=_0x12ee41;if(!_0x46bc87[_0x55ec50(0x112)])return;const _0x1fea23=await omnic['makeRequest']('/chat/instant?message='+encodeURIComponent(_0x46bc87[_0x55ec50(0x112)]))[_0x55ec50(0x144)](_0xd3173e=>_0xd3173e[_0x55ec50(0x11e)]());if(_0x1fea23[_0x55ec50(0x140)]!==_0x55ec50(0x100))return;const _0x39da51=_0x1fea23[_0x55ec50(0x106)][_0x55ec50(0x10f)]instanceof Array?_0x1fea23['response'][_0x55ec50(0x10f)]:[_0x1fea23[_0x55ec50(0x106)][_0x55ec50(0x10f)]];for(const _0x590d0f of _0x39da51){await _0x46bc87[_0x55ec50(0xfb)][_0x55ec50(0x12c)](_0x590d0f)[_0x55ec50(0xfa)](()=>{});}},this[_0x12ee41(0xfe)]=async _0x310f70=>{const _0x280ae1=_0x12ee41,_0x357edc=await Config_1[_0x280ae1(0xf8)][_0x280ae1(0x134)](_0x310f70[_0x280ae1(0x12b)][_0x280ae1(0x123)]['id']);if(_0x357edc[_0x280ae1(0xe1)]&&_0x310f70[_0x280ae1(0x112)]){const _0x292247=await _0x310f70[_0x280ae1(0x12b)][_0x280ae1(0xf3)](),_0x420aa4=_0x292247['owner']instanceof discord_js_1[_0x280ae1(0x135)]?_0x292247[_0x280ae1(0xe0)][_0x280ae1(0xe0)]['user']:_0x292247[_0x280ae1(0xe0)];if(_0x310f70[_0x280ae1(0xec)]['id']===_0x420aa4['id'])return;const _0x492425=await _0x420aa4[_0x280ae1(0x116)]();await _0x492425[_0x280ae1(0x12c)]({'embed':{'color':tesseract_1[_0x280ae1(0xdf)][_0x280ae1(0xed)]['IRIS'],'author':{'name':_0x310f70[_0x280ae1(0xec)][_0x280ae1(0xeb)],'iconURL':_0x310f70['author']['displayAvatarURL']({'dynamic':!![],'size':0x40})},'description':_0x310f70[_0x280ae1(0x112)],'footer':{'text':_0x310f70[_0x280ae1(0xec)]['id']}}});}},this[_0x12ee41(0x149)]=async _0x17c93e=>{const _0x7489ac=_0x12ee41;_0x17c93e[_0x7489ac(0xdd)]?(this['handleGamification'](_0x17c93e)[_0x7489ac(0xfa)](()=>{}),this[_0x7489ac(0xda)](_0x17c93e)[_0x7489ac(0xfa)](()=>{}),this[_0x7489ac(0x147)](_0x17c93e)[_0x7489ac(0xfa)](tesseract_1['Logger'][_0x7489ac(0x120)]),this[_0x7489ac(0x107)](_0x17c93e)['catch'](()=>{})):(this[_0x7489ac(0xe2)](_0x17c93e)[_0x7489ac(0xfa)](()=>{}),this[_0x7489ac(0xfe)](_0x17c93e)['catch'](()=>{}));},this[_0x12ee41(0x13f)]=new Map();}};
const a135_0x3fae=['indexOf','messages','random','responseMessage','language','../models/TextChannel','has','makeRequest','experience','../utils/variables','compile','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','map','error','then','push','responseReaction','../models/Role','level','client','enabled','COLORS','author','locale','parse','getConstant','discord.js','includes','stringify','getString','Level-up\x20Reward','channel','humanMessage','DEFAUL_CURRENCY_REWARD_MULTIPLIER','recentUsers','owner','ModuleManagerEvent','success','handleLevelRoles','exec','react','handleTriggers','relayDirectMessages','document','save','MAX_LEVEL','json','return\x20/\x22\x20+\x20this\x20+\x20\x22/','send','../utils/emojis','tag','handleGamification','handleDirectMessageRelay','get','set','MAX_EXPERIENCE','replace','filter','Logger','_id','IRIS','../utils/omnic','createDM','Constants','findById','catch','find','../utils/gamification','user','member','floor','multiplier','default','LEVELED\x20UP!','constructor','levelUp','handleVotingChannels','exports','handleInstantResponses','../models/Config','roles','content','reply','remove','../models/Trigger','guild','gamification','findOne','length','cache','response','splice'];(function(_0x30ba40,_0x3fae0f){const _0xaa4256=function(_0x511dd9){while(--_0x511dd9){_0x30ba40['push'](_0x30ba40['shift']());}};const _0x55c45b=function(){const _0x11623a={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2c21fe,_0x589a57,_0x3f9af5,_0x4a1467){_0x4a1467=_0x4a1467||{};let _0x4d46a5=_0x589a57+'='+_0x3f9af5;let _0x1eb859=0x0;for(let _0x43ca62=0x0,_0x192074=_0x2c21fe['length'];_0x43ca62<_0x192074;_0x43ca62++){const _0x2f73eb=_0x2c21fe[_0x43ca62];_0x4d46a5+=';\x20'+_0x2f73eb;const _0x2934c2=_0x2c21fe[_0x2f73eb];_0x2c21fe['push'](_0x2934c2);_0x192074=_0x2c21fe['length'];if(_0x2934c2!==!![]){_0x4d46a5+='='+_0x2934c2;}}_0x4a1467['cookie']=_0x4d46a5;},'removeCookie':function(){return'dev';},'getCookie':function(_0x182ede,_0x28299b){_0x182ede=_0x182ede||function(_0x188e50){return _0x188e50;};const _0x14fd09=_0x182ede(new RegExp('(?:^|;\x20)'+_0x28299b['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x10556c=function(_0x25a7af,_0x1f3c97){_0x25a7af(++_0x1f3c97);};_0x10556c(_0xaa4256,_0x3fae0f);return _0x14fd09?decodeURIComponent(_0x14fd09[0x1]):undefined;}};const _0x519bb4=function(){const _0x35a191=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x35a191['test'](_0x11623a['removeCookie']['toString']());};_0x11623a['updateCookie']=_0x519bb4;let _0x5a18af='';const _0x1f19b6=_0x11623a['updateCookie']();if(!_0x1f19b6){_0x11623a['setCookie'](['*'],'counter',0x1);}else if(_0x1f19b6){_0x5a18af=_0x11623a['getCookie'](null,'counter');}else{_0x11623a['removeCookie']();}};_0x55c45b();}(a135_0x3fae,0x130));const a135_0xaa42=function(_0x30ba40,_0x3fae0f){_0x30ba40=_0x30ba40-0x0;let _0xaa4256=a135_0x3fae[_0x30ba40];return _0xaa4256;};const a135_0x11623a=function(){let _0x4a22ef=!![];return function(_0x3b7ae3,_0x41b1ca){const _0x4a77b2=_0x4a22ef?function(){if(_0x41b1ca){const _0x1cc8df=_0x41b1ca['apply'](_0x3b7ae3,arguments);_0x41b1ca=null;return _0x1cc8df;}}:function(){};_0x4a22ef=![];return _0x4a77b2;};}();const a135_0x511dd9=a135_0x11623a(this,function(){const _0x2f04e6=function(){const _0x26aa71=_0x2f04e6[a135_0xaa42('0x2e')](a135_0xaa42('0x13'))()[a135_0xaa42('0x4a')](a135_0xaa42('0x4b'));return!_0x26aa71['test'](a135_0x511dd9);};return _0x2f04e6();});a135_0x511dd9();'use strict';const tesseract_1=require('@bastion/tesseract');const discord_js_1=require(a135_0xaa42('0x5a'));const emojis=require(a135_0xaa42('0x15'));const gamification=require(a135_0xaa42('0x27'));const omnic=require(a135_0xaa42('0x21'));const variables=require(a135_0xaa42('0x49'));const Config_1=require(a135_0xaa42('0x33'));const Role_1=require(a135_0xaa42('0x51'));const TextChannel_1=require(a135_0xaa42('0x45'));const Trigger_1=require(a135_0xaa42('0x38'));module[a135_0xaa42('0x31')]=class HumanMessageEvent extends tesseract_1[a135_0xaa42('0x8')]{constructor(){super(a135_0xaa42('0x4'));this[a135_0xaa42('0xa')]=async(_0x2bfb3c,_0x5cad12)=>{const _0x4bbb3a=await Role_1[a135_0xaa42('0x2c')][a135_0xaa42('0x26')]({'guild':_0x2bfb3c[a135_0xaa42('0x39')]['id'],'level':{'$exists':!![]}});const _0x459cf8=_0x4bbb3a[a135_0xaa42('0x1d')](_0x14e98d=>_0x14e98d[a135_0xaa42('0x52')]!==_0x5cad12&&_0x2bfb3c[a135_0xaa42('0x39')]['roles'][a135_0xaa42('0x3d')][a135_0xaa42('0x46')](_0x14e98d[a135_0xaa42('0x1f')]));const _0x3457f2=_0x4bbb3a[a135_0xaa42('0x1d')](_0x39a5fa=>_0x39a5fa[a135_0xaa42('0x52')]===_0x5cad12&&_0x2bfb3c[a135_0xaa42('0x39')][a135_0xaa42('0x34')]['cache'][a135_0xaa42('0x46')](_0x39a5fa['_id']));if(_0x3457f2['length']){await _0x2bfb3c[a135_0xaa42('0x29')][a135_0xaa42('0x34')]['add'](_0x3457f2[a135_0xaa42('0x4c')](_0x5a5afd=>_0x5a5afd[a135_0xaa42('0x1f')]));await _0x2bfb3c['member']['roles'][a135_0xaa42('0x37')](_0x459cf8[a135_0xaa42('0x4c')](_0x338f02=>_0x338f02[a135_0xaa42('0x1f')]));}};this['handleGamification']=async _0x1dceef=>{const _0x3ccb9e=this['recentUsers'][a135_0xaa42('0x19')](_0x1dceef['guild']['id'])||[];if(_0x3ccb9e[a135_0xaa42('0x5b')](_0x1dceef[a135_0xaa42('0x56')]['id']))return;const _0xe8ee08=_0x1dceef[a135_0xaa42('0x53')];const _0x1424ca=_0x1dceef[a135_0xaa42('0x39')];const _0x3b17df=_0x1dceef['member'];if(!_0x1424ca['document'][a135_0xaa42('0x3a')]||!_0x1424ca[a135_0xaa42('0xf')][a135_0xaa42('0x3a')][a135_0xaa42('0x54')])return;if(_0x3b17df[a135_0xaa42('0xf')][a135_0xaa42('0x52')]>=gamification[a135_0xaa42('0x11')]||_0x3b17df['document'][a135_0xaa42('0x48')]>=gamification[a135_0xaa42('0x1b')](_0x1424ca[a135_0xaa42('0xf')][a135_0xaa42('0x3a')][a135_0xaa42('0x2b')]))return;_0x3b17df[a135_0xaa42('0xf')]['experience']+=0x1;const _0x9c06fe=gamification['computeLevel'](_0x3b17df[a135_0xaa42('0xf')][a135_0xaa42('0x48')],_0x1424ca[a135_0xaa42('0xf')]['gamification'][a135_0xaa42('0x2b')]);_0x3b17df[a135_0xaa42('0xf')][a135_0xaa42('0x52')]=_0x9c06fe;if(_0x9c06fe>_0x3b17df[a135_0xaa42('0xf')][a135_0xaa42('0x52')]){await _0x3b17df['credit'](_0x9c06fe*gamification[a135_0xaa42('0x5')],a135_0xaa42('0x2'),_0x3b17df['document']);if(_0x1424ca[a135_0xaa42('0xf')][a135_0xaa42('0x3a')][a135_0xaa42('0x41')]){_0x1dceef[a135_0xaa42('0x3')][a135_0xaa42('0x14')]({'embed':{'color':tesseract_1[a135_0xaa42('0x23')]['COLORS'][a135_0xaa42('0x20')],'fields':[{'name':a135_0xaa42('0x2d'),'value':_0xe8ee08[a135_0xaa42('0x57')][a135_0xaa42('0x1')](_0x1424ca['document'][a135_0xaa42('0x44')],'info',a135_0xaa42('0x2f'),_0x1dceef[a135_0xaa42('0x56')][a135_0xaa42('0x16')],_0x3b17df['document'][a135_0xaa42('0x52')])}]}})[a135_0xaa42('0x25')](()=>{});}this[a135_0xaa42('0xa')](_0x1dceef,_0x3b17df[a135_0xaa42('0xf')][a135_0xaa42('0x52')])[a135_0xaa42('0x25')](tesseract_1[a135_0xaa42('0x1e')][a135_0xaa42('0x4d')]);}await _0x3b17df[a135_0xaa42('0xf')][a135_0xaa42('0x10')]();_0x3ccb9e[a135_0xaa42('0x4f')](_0x1dceef[a135_0xaa42('0x56')]['id']);this[a135_0xaa42('0x6')][a135_0xaa42('0x1a')](_0x1dceef[a135_0xaa42('0x39')]['id'],_0x3ccb9e);_0x1dceef[a135_0xaa42('0x53')]['setTimeout'](()=>{const _0x1eccf5=this[a135_0xaa42('0x6')][a135_0xaa42('0x19')](_0x1dceef[a135_0xaa42('0x39')]['id']);_0x1eccf5[a135_0xaa42('0x3f')](_0x1eccf5[a135_0xaa42('0x40')](_0x1dceef['author']['id']),0x1);this[a135_0xaa42('0x6')]['set'](_0x1dceef[a135_0xaa42('0x39')]['id'],_0x1eccf5);},0x32c8);};this[a135_0xaa42('0xd')]=async _0x1a5e95=>{if(!_0x1a5e95[a135_0xaa42('0x35')])return;const _0x53968c=await Trigger_1[a135_0xaa42('0x2c')][a135_0xaa42('0x26')]({'guild':_0x1a5e95[a135_0xaa42('0x39')]['id']});const _0x2e9484=[];const _0x40af50=[];for(const _0x57327b of _0x53968c){const _0x2179b8=new RegExp(_0x57327b['trigger'][a135_0xaa42('0x1c')](/\?/g,'.')[a135_0xaa42('0x1c')](/\*+/g,'.*'),'ig');if(!_0x2179b8['test'](_0x1a5e95[a135_0xaa42('0x35')]))continue;if(_0x57327b[a135_0xaa42('0x43')]){_0x2e9484[a135_0xaa42('0x4f')](_0x57327b[a135_0xaa42('0x43')]);}if(_0x57327b[a135_0xaa42('0x50')]){const _0x1016dc=emojis['parseEmoji'](_0x57327b[a135_0xaa42('0x50')]);if(_0x1016dc){_0x40af50[a135_0xaa42('0x4f')](_0x1016dc['reaction']);}}}if(_0x2e9484[a135_0xaa42('0x3c')]){_0x1a5e95['channel']['send']({'embed':{...JSON[a135_0xaa42('0x58')](variables['replaceMessageVariables'](JSON[a135_0xaa42('0x0')](_0x2e9484[Math[a135_0xaa42('0x2a')](Math[a135_0xaa42('0x42')]()*_0x2e9484[a135_0xaa42('0x3c')])]),_0x1a5e95)),'footer':{'text':_0x1a5e95['client'][a135_0xaa42('0x57')][a135_0xaa42('0x59')]('bastion.name')+'\x20Trigger'}}});}if(_0x40af50[a135_0xaa42('0x3c')]){_0x1a5e95[a135_0xaa42('0xc')](_0x40af50[Math[a135_0xaa42('0x2a')](Math[a135_0xaa42('0x42')]()*_0x40af50['length'])]);}};this[a135_0xaa42('0x30')]=async _0x5e636d=>{const _0x321acf=await TextChannel_1[a135_0xaa42('0x2c')][a135_0xaa42('0x3b')]({'_id':_0x5e636d[a135_0xaa42('0x3')]['id'],'voting':!![]});if(!_0x321acf)return;_0x5e636d[a135_0xaa42('0xc')]('👍')[a135_0xaa42('0x25')](()=>{});_0x5e636d[a135_0xaa42('0xc')]('👎')[a135_0xaa42('0x25')](()=>{});};this['handleInstantResponses']=async _0x353cb0=>{if(!_0x353cb0[a135_0xaa42('0x35')])return;const _0x2319cf=await omnic[a135_0xaa42('0x47')]('/chat/instant?message='+encodeURIComponent(_0x353cb0['content']))[a135_0xaa42('0x4e')](_0x56a166=>_0x56a166[a135_0xaa42('0x12')]());if(_0x2319cf['status']!==a135_0xaa42('0x9'))return;const _0x18ef9d=_0x2319cf['response'][a135_0xaa42('0x36')]instanceof Array?_0x2319cf['response'][a135_0xaa42('0x36')]:[_0x2319cf[a135_0xaa42('0x3e')][a135_0xaa42('0x36')]];for(const _0xad4d37 of _0x18ef9d){await _0x353cb0[a135_0xaa42('0x3')]['send'](_0xad4d37)['catch'](()=>{});}};this[a135_0xaa42('0x18')]=async _0x59553c=>{const _0x42f567=await Config_1[a135_0xaa42('0x2c')][a135_0xaa42('0x24')](_0x59553c[a135_0xaa42('0x53')]['user']['id']);if(_0x42f567[a135_0xaa42('0xe')]&&_0x59553c[a135_0xaa42('0x35')]){const _0x5a7bda=await _0x59553c[a135_0xaa42('0x53')]['fetchApplication']();const _0x31f1a0=_0x5a7bda['owner']instanceof discord_js_1['Team']?_0x5a7bda['owner'][a135_0xaa42('0x7')][a135_0xaa42('0x28')]:_0x5a7bda[a135_0xaa42('0x7')];if(_0x59553c['author']['id']===_0x31f1a0['id'])return;const _0x68c23b=await _0x31f1a0[a135_0xaa42('0x22')]();await _0x68c23b[a135_0xaa42('0x14')]({'embed':{'color':tesseract_1['Constants'][a135_0xaa42('0x55')][a135_0xaa42('0x20')],'author':{'name':_0x59553c[a135_0xaa42('0x56')][a135_0xaa42('0x16')],'iconURL':_0x59553c['author']['displayAvatarURL']({'dynamic':!![],'size':0x40})},'description':_0x59553c[a135_0xaa42('0x35')],'footer':{'text':_0x59553c[a135_0xaa42('0x56')]['id']}}});}};this[a135_0xaa42('0xb')]=async _0x5b0f80=>{if(_0x5b0f80['guild']){this[a135_0xaa42('0x17')](_0x5b0f80)['catch'](()=>{});this[a135_0xaa42('0xd')](_0x5b0f80)[a135_0xaa42('0x25')](()=>{});this[a135_0xaa42('0x30')](_0x5b0f80)[a135_0xaa42('0x25')](()=>{});}else{this[a135_0xaa42('0x32')](_0x5b0f80)[a135_0xaa42('0x25')](()=>{});this[a135_0xaa42('0x18')](_0x5b0f80)[a135_0xaa42('0x25')](()=>{});}};this[a135_0xaa42('0x6')]=new Map();}};
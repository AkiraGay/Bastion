const a136_0xe891=['roles','responseMessage','humanMessage','error','getString','react','exec','messages','success','@bastion/tesseract','handleLevelRoles','owner','content','has','user','handleGamification','discord.js','catch','/chat/instant?message=','find','indexOf','default','client','includes','recentUsers','status','fetchApplication','map','LEVELED\x20UP!','handleDirectMessageRelay','relayDirectMessages','then','handleInstantResponses','add','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','gamification','setTimeout','locale','responseReaction','filter','reply','reaction','findById','constructor','handleVotingChannels','replaceMessageVariables','level','response','length','guild','author','channel','../models/Trigger','levelUp','cache','Constants','info','floor','Team','../utils/gamification','multiplier','random','COLORS','set','save','createDM','send','handleTriggers','document','experience','replace','computeLevel','_id','getConstant','return\x20/\x22\x20+\x20this\x20+\x20\x22/','trigger','push','credit','../utils/emojis','MAX_LEVEL','parse','member','exports','get','parseEmoji','Level-up\x20Reward'];(function(_0x7b0cc,_0xe891ea){const _0x8970af=function(_0x5ec762){while(--_0x5ec762){_0x7b0cc['push'](_0x7b0cc['shift']());}};const _0xc6d789=function(){const _0x59539c={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3fcbf4,_0x532e0d,_0x6e4b1a,_0x557732){_0x557732=_0x557732||{};let _0x184f14=_0x532e0d+'='+_0x6e4b1a;let _0x21b3c4=0x0;for(let _0x2bd250=0x0,_0x1a353e=_0x3fcbf4['length'];_0x2bd250<_0x1a353e;_0x2bd250++){const _0x4cf907=_0x3fcbf4[_0x2bd250];_0x184f14+=';\x20'+_0x4cf907;const _0x47b2e6=_0x3fcbf4[_0x4cf907];_0x3fcbf4['push'](_0x47b2e6);_0x1a353e=_0x3fcbf4['length'];if(_0x47b2e6!==!![]){_0x184f14+='='+_0x47b2e6;}}_0x557732['cookie']=_0x184f14;},'removeCookie':function(){return'dev';},'getCookie':function(_0x51c101,_0x5db872){_0x51c101=_0x51c101||function(_0x1cbb8b){return _0x1cbb8b;};const _0x564d37=_0x51c101(new RegExp('(?:^|;\x20)'+_0x5db872['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x10a419=function(_0x5280ed,_0x3b522e){_0x5280ed(++_0x3b522e);};_0x10a419(_0x8970af,_0xe891ea);return _0x564d37?decodeURIComponent(_0x564d37[0x1]):undefined;}};const _0x279398=function(){const _0xae64e6=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0xae64e6['test'](_0x59539c['removeCookie']['toString']());};_0x59539c['updateCookie']=_0x279398;let _0x48c8ec='';const _0x3c8bb5=_0x59539c['updateCookie']();if(!_0x3c8bb5){_0x59539c['setCookie'](['*'],'counter',0x1);}else if(_0x3c8bb5){_0x48c8ec=_0x59539c['getCookie'](null,'counter');}else{_0x59539c['removeCookie']();}};_0xc6d789();}(a136_0xe891,0x65));const a136_0x8970=function(_0x7b0cc,_0xe891ea){_0x7b0cc=_0x7b0cc-0x0;let _0x8970af=a136_0xe891[_0x7b0cc];return _0x8970af;};const a136_0x59539c=function(){let _0x2e0727=!![];return function(_0x4b4df8,_0x5adb5d){const _0x4a4eee=_0x2e0727?function(){if(_0x5adb5d){const _0xf8ee19=_0x5adb5d['apply'](_0x4b4df8,arguments);_0x5adb5d=null;return _0xf8ee19;}}:function(){};_0x2e0727=![];return _0x4a4eee;};}();const a136_0x5ec762=a136_0x59539c(this,function(){const _0x54b7ec=function(){const _0x3ae5ae=_0x54b7ec[a136_0x8970('0x1c')](a136_0x8970('0x3b'))()['compile'](a136_0x8970('0x13'));return!_0x3ae5ae['test'](a136_0x5ec762);};return _0x54b7ec();});a136_0x5ec762();'use strict';const tesseract_1=require(a136_0x8970('0x50'));const discord_js_1=require(a136_0x8970('0x1'));const emojis=require(a136_0x8970('0x3f'));const gamification=require(a136_0x8970('0x2c'));const omnic=require('../utils/omnic');const variables=require('../utils/variables');const Config_1=require('../models/Config');const Role_1=require('../models/Role');const TextChannel_1=require('../models/TextChannel');const Trigger_1=require(a136_0x8970('0x25'));module[a136_0x8970('0x43')]=class HumanMessageEvent extends tesseract_1['ModuleManagerEvent']{constructor(){super(a136_0x8970('0x49'));this[a136_0x8970('0x51')]=async(_0x5d071c,_0x1644b5)=>{const _0x24faa1=await Role_1[a136_0x8970('0x6')]['find']({'guild':_0x5d071c[a136_0x8970('0x22')]['id'],'level':{'$exists':!![]}});const _0x193e70=_0x24faa1[a136_0x8970('0x18')](_0x50a074=>_0x50a074[a136_0x8970('0x1f')]!==_0x1644b5&&_0x5d071c['guild'][a136_0x8970('0x47')][a136_0x8970('0x27')]['has'](_0x50a074[a136_0x8970('0x39')]));const _0x3a7e23=_0x24faa1[a136_0x8970('0x18')](_0x1f7473=>_0x1f7473[a136_0x8970('0x1f')]===_0x1644b5&&_0x5d071c['guild'][a136_0x8970('0x47')][a136_0x8970('0x27')][a136_0x8970('0x54')](_0x1f7473[a136_0x8970('0x39')]));if(_0x3a7e23['length']){await _0x5d071c['member'][a136_0x8970('0x47')][a136_0x8970('0x12')](_0x3a7e23[a136_0x8970('0xc')](_0x5b21d3=>_0x5b21d3[a136_0x8970('0x39')]));await _0x5d071c[a136_0x8970('0x42')][a136_0x8970('0x47')]['remove'](_0x193e70[a136_0x8970('0xc')](_0x496d95=>_0x496d95[a136_0x8970('0x39')]));}};this[a136_0x8970('0x0')]=async _0x5debae=>{const _0x140885=this[a136_0x8970('0x9')][a136_0x8970('0x44')](_0x5debae['guild']['id'])||[];if(_0x140885[a136_0x8970('0x8')](_0x5debae[a136_0x8970('0x23')]['id']))return;const _0x3b5c7e=_0x5debae[a136_0x8970('0x7')];const _0x53617c=_0x5debae[a136_0x8970('0x22')];const _0x4f8f21=_0x5debae[a136_0x8970('0x42')];if(!_0x53617c[a136_0x8970('0x35')][a136_0x8970('0x14')]||!_0x53617c['document'][a136_0x8970('0x14')]['enabled'])return;if(_0x4f8f21[a136_0x8970('0x35')]['level']>=gamification[a136_0x8970('0x40')]||_0x4f8f21[a136_0x8970('0x35')][a136_0x8970('0x36')]>=gamification['MAX_EXPERIENCE'](_0x53617c[a136_0x8970('0x35')][a136_0x8970('0x14')]['multiplier']))return;_0x4f8f21[a136_0x8970('0x35')][a136_0x8970('0x36')]+=0x1;const _0x46b63c=gamification[a136_0x8970('0x38')](_0x4f8f21['document'][a136_0x8970('0x36')],_0x53617c[a136_0x8970('0x35')][a136_0x8970('0x14')][a136_0x8970('0x2d')]);_0x4f8f21[a136_0x8970('0x35')][a136_0x8970('0x1f')]=_0x46b63c;if(_0x46b63c>_0x4f8f21[a136_0x8970('0x35')][a136_0x8970('0x1f')]){await _0x4f8f21[a136_0x8970('0x3e')](_0x46b63c*gamification['DEFAUL_CURRENCY_REWARD_MULTIPLIER'],a136_0x8970('0x46'),_0x4f8f21[a136_0x8970('0x35')]);if(_0x53617c[a136_0x8970('0x35')][a136_0x8970('0x14')][a136_0x8970('0x4e')]){_0x5debae['channel']['send']({'embed':{'color':tesseract_1[a136_0x8970('0x28')]['COLORS']['IRIS'],'fields':[{'name':a136_0x8970('0xd'),'value':_0x3b5c7e['locale'][a136_0x8970('0x4b')](_0x53617c[a136_0x8970('0x35')]['language'],a136_0x8970('0x29'),a136_0x8970('0x26'),_0x5debae[a136_0x8970('0x23')]['tag'],_0x4f8f21['document'][a136_0x8970('0x1f')])}]}})['catch'](()=>{});}this['handleLevelRoles'](_0x5debae,_0x4f8f21['document'][a136_0x8970('0x1f')])[a136_0x8970('0x2')](tesseract_1['Logger'][a136_0x8970('0x4a')]);}await _0x4f8f21[a136_0x8970('0x35')][a136_0x8970('0x31')]();_0x140885[a136_0x8970('0x3d')](_0x5debae[a136_0x8970('0x23')]['id']);this[a136_0x8970('0x9')][a136_0x8970('0x30')](_0x5debae[a136_0x8970('0x22')]['id'],_0x140885);_0x5debae[a136_0x8970('0x7')][a136_0x8970('0x15')](()=>{const _0x2e042e=this['recentUsers'][a136_0x8970('0x44')](_0x5debae[a136_0x8970('0x22')]['id']);_0x2e042e['splice'](_0x2e042e[a136_0x8970('0x5')](_0x5debae['author']['id']),0x1);this[a136_0x8970('0x9')][a136_0x8970('0x30')](_0x5debae['guild']['id'],_0x2e042e);},0x32c8);};this[a136_0x8970('0x34')]=async _0x13783d=>{if(!_0x13783d[a136_0x8970('0x53')])return;const _0x2e146a=await Trigger_1[a136_0x8970('0x6')][a136_0x8970('0x4')]({'guild':_0x13783d[a136_0x8970('0x22')]['id']});const _0x2b3902=[];const _0x1dda5d=[];for(const _0x5d3cf7 of _0x2e146a){const _0x1f5fee=new RegExp(_0x5d3cf7[a136_0x8970('0x3c')][a136_0x8970('0x37')](/\?/g,'.')['replace'](/\*+/g,'.*'),'ig');if(!_0x1f5fee['test'](_0x13783d[a136_0x8970('0x53')]))continue;if(_0x5d3cf7[a136_0x8970('0x48')]){_0x2b3902[a136_0x8970('0x3d')](_0x5d3cf7[a136_0x8970('0x48')]);}if(_0x5d3cf7[a136_0x8970('0x17')]){const _0x3d57dc=emojis[a136_0x8970('0x45')](_0x5d3cf7[a136_0x8970('0x17')]);if(_0x3d57dc){_0x1dda5d['push'](_0x3d57dc[a136_0x8970('0x1a')]);}}}if(_0x2b3902[a136_0x8970('0x21')]){_0x13783d[a136_0x8970('0x24')][a136_0x8970('0x33')]({'embed':{...JSON[a136_0x8970('0x41')](variables[a136_0x8970('0x1e')](JSON['stringify'](_0x2b3902[Math[a136_0x8970('0x2a')](Math[a136_0x8970('0x2e')]()*_0x2b3902['length'])]),_0x13783d)),'footer':{'text':_0x13783d['client'][a136_0x8970('0x16')][a136_0x8970('0x3a')]('bastion.name')+'\x20Trigger'}}});}if(_0x1dda5d[a136_0x8970('0x21')]){_0x13783d[a136_0x8970('0x4c')](_0x1dda5d[Math[a136_0x8970('0x2a')](Math[a136_0x8970('0x2e')]()*_0x1dda5d['length'])]);}};this[a136_0x8970('0x1d')]=async _0x1ddb02=>{const _0x1fe4a5=await TextChannel_1[a136_0x8970('0x6')]['findOne']({'_id':_0x1ddb02[a136_0x8970('0x24')]['id'],'voting':!![]});if(!_0x1fe4a5)return;_0x1ddb02['react']('👍')[a136_0x8970('0x2')](()=>{});_0x1ddb02['react']('👎')[a136_0x8970('0x2')](()=>{});};this['handleInstantResponses']=async _0x4fbc08=>{if(!_0x4fbc08[a136_0x8970('0x53')])return;const _0x28c391=await omnic['makeRequest'](a136_0x8970('0x3')+encodeURIComponent(_0x4fbc08[a136_0x8970('0x53')]))[a136_0x8970('0x10')](_0x5b4479=>_0x5b4479['json']());if(_0x28c391[a136_0x8970('0xa')]!==a136_0x8970('0x4f'))return;const _0x291ccc=_0x28c391[a136_0x8970('0x20')][a136_0x8970('0x19')]instanceof Array?_0x28c391['response']['reply']:[_0x28c391[a136_0x8970('0x20')][a136_0x8970('0x19')]];for(const _0x32fec3 of _0x291ccc){await _0x4fbc08[a136_0x8970('0x24')][a136_0x8970('0x33')](_0x32fec3)['catch'](()=>{});}};this[a136_0x8970('0xe')]=async _0x3167e1=>{const _0x2a3982=await Config_1[a136_0x8970('0x6')][a136_0x8970('0x1b')](_0x3167e1[a136_0x8970('0x7')]['user']['id']);if(_0x2a3982[a136_0x8970('0xf')]&&_0x3167e1[a136_0x8970('0x53')]){const _0x50c9a1=await _0x3167e1[a136_0x8970('0x7')][a136_0x8970('0xb')]();const _0x3f80ec=_0x50c9a1['owner']instanceof discord_js_1[a136_0x8970('0x2b')]?_0x50c9a1[a136_0x8970('0x52')][a136_0x8970('0x52')][a136_0x8970('0x55')]:_0x50c9a1[a136_0x8970('0x52')];if(_0x3167e1[a136_0x8970('0x23')]['id']===_0x3f80ec['id'])return;const _0xa5f6b9=await _0x3f80ec[a136_0x8970('0x32')]();await _0xa5f6b9[a136_0x8970('0x33')]({'embed':{'color':tesseract_1[a136_0x8970('0x28')][a136_0x8970('0x2f')]['IRIS'],'author':{'name':_0x3167e1['author']['tag'],'iconURL':_0x3167e1[a136_0x8970('0x23')]['displayAvatarURL']({'dynamic':!![],'size':0x40})},'description':_0x3167e1[a136_0x8970('0x53')],'footer':{'text':_0x3167e1[a136_0x8970('0x23')]['id']}}});}};this[a136_0x8970('0x4d')]=async _0x1ab01a=>{if(_0x1ab01a['guild']){this['handleGamification'](_0x1ab01a)[a136_0x8970('0x2')](()=>{});this[a136_0x8970('0x34')](_0x1ab01a)[a136_0x8970('0x2')](()=>{});this[a136_0x8970('0x1d')](_0x1ab01a)['catch'](()=>{});}else{this[a136_0x8970('0x11')](_0x1ab01a)[a136_0x8970('0x2')](()=>{});this[a136_0x8970('0xe')](_0x1ab01a)[a136_0x8970('0x2')](()=>{});}};this['recentUsers']=new Map();}};
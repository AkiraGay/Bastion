const a143_0x203d=['author','replaceMessageVariables','owner','humanMessage','length','get','catch','locale','MAX_LEVEL','credit','IRIS','../utils/embeds','setTimeout','handleInstantResponses','send','guild','../models/Trigger','user','Constants','enabled','member','includes','cache','../models/Role','COLORS','_id','\x20Trigger','trigger','ModuleManagerEvent','../utils/variables','remove','status','DEFAUL_CURRENCY_REWARD_MULTIPLIER','experience','test','info','channel','handleDirectMessageRelay','levelUp','default','react','parse','handleLevelRoles','random','find','createDM','handleVotingChannels','../models/TextChannel','exports','../utils/gamification','set','responseReaction','roles','bastion.name','language','findById','fetchApplication','getString','recentUsers','filter','constructor','indexOf','MAX_EXPERIENCE','relayDirectMessages','tag','add','reaction','getConstant','Team','error','apply','return\x20/\x22\x20+\x20this\x20+\x20\x22/','@bastion/tesseract','level','floor','client','map','push','reply','../utils/omnic','messages','../models/Config','replace','responseMessage','then','document','content','../utils/emojis','has','multiplier','response','gamification','success','Logger','discord.js','generateEmbed'];(function(_0x12d58e,_0x203d83){const _0x2417d8=function(_0xec07bc){while(--_0xec07bc){_0x12d58e['push'](_0x12d58e['shift']());}},_0x45513d=function(){const _0xb2a7e4={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2df9e8,_0x2c358a,_0x3651d9,_0x4ff931){_0x4ff931=_0x4ff931||{};let _0x36287c=_0x2c358a+'='+_0x3651d9,_0x11d82e=0x0;for(let _0x2e0dd2=0x0,_0x303f25=_0x2df9e8['length'];_0x2e0dd2<_0x303f25;_0x2e0dd2++){const _0x5b858c=_0x2df9e8[_0x2e0dd2];_0x36287c+=';\x20'+_0x5b858c;const _0x115642=_0x2df9e8[_0x5b858c];_0x2df9e8['push'](_0x115642),_0x303f25=_0x2df9e8['length'],_0x115642!==!![]&&(_0x36287c+='='+_0x115642);}_0x4ff931['cookie']=_0x36287c;},'removeCookie':function(){return'dev';},'getCookie':function(_0x94f143,_0x279611){_0x94f143=_0x94f143||function(_0x3c1f6d){return _0x3c1f6d;};const _0x1eae0c=_0x94f143(new RegExp('(?:^|;\x20)'+_0x279611['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x26e2c2=function(_0x101c82,_0x15391a){_0x101c82(++_0x15391a);};return _0x26e2c2(_0x2417d8,_0x203d83),_0x1eae0c?decodeURIComponent(_0x1eae0c[0x1]):undefined;}},_0x3853d1=function(){const _0xf336b=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0xf336b['test'](_0xb2a7e4['removeCookie']['toString']());};_0xb2a7e4['updateCookie']=_0x3853d1;let _0x1b9cf4='';const _0x2e7a58=_0xb2a7e4['updateCookie']();if(!_0x2e7a58)_0xb2a7e4['setCookie'](['*'],'counter',0x1);else _0x2e7a58?_0x1b9cf4=_0xb2a7e4['getCookie'](null,'counter'):_0xb2a7e4['removeCookie']();};_0x45513d();}(a143_0x203d,0xb3));const a143_0x2417=function(_0x12d58e,_0x203d83){_0x12d58e=_0x12d58e-0x0;let _0x2417d8=a143_0x203d[_0x12d58e];return _0x2417d8;};const a143_0x3651d9=function(){let _0x3900c9=!![];return function(_0x4eb43e,_0xaa0c13){const _0x1df37c=_0x3900c9?function(){if(_0xaa0c13){const _0x114162=_0xaa0c13[a143_0x2417('0x53')](_0x4eb43e,arguments);return _0xaa0c13=null,_0x114162;}}:function(){};return _0x3900c9=![],_0x1df37c;};}(),a143_0x2c358a=a143_0x3651d9(this,function(){const _0x3238f7=function(){const _0x2ebb78=_0x3238f7[a143_0x2417('0x49')](a143_0x2417('0x54'))()[a143_0x2417('0x49')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x2ebb78[a143_0x2417('0x2f')](a143_0x2c358a);};return _0x3238f7();});a143_0x2c358a();'use strict';const tesseract_1=require(a143_0x2417('0x55')),discord_js_1=require(a143_0x2417('0xb')),embeds=require(a143_0x2417('0x18')),emojis=require(a143_0x2417('0x4')),gamification=require(a143_0x2417('0x3e')),omnic=require(a143_0x2417('0x5c')),variables=require(a143_0x2417('0x2a')),Config_1=require(a143_0x2417('0x5e')),Role_1=require(a143_0x2417('0x24')),TextChannel_1=require(a143_0x2417('0x3c')),Trigger_1=require(a143_0x2417('0x1d'));module[a143_0x2417('0x3d')]=class HumanMessageEvent extends tesseract_1[a143_0x2417('0x29')]{constructor(){super(a143_0x2417('0x10')),this[a143_0x2417('0x37')]=async(_0x27c0de,_0x55c15c)=>{const _0x62762b=await Role_1['default'][a143_0x2417('0x39')]({'guild':_0x27c0de[a143_0x2417('0x1c')]['id'],'level':{'$exists':!![]}}),_0x4c1f54=_0x62762b[a143_0x2417('0x48')](_0x2683bc=>_0x2683bc[a143_0x2417('0x56')]!==_0x55c15c&&_0x27c0de['guild'][a143_0x2417('0x41')][a143_0x2417('0x23')][a143_0x2417('0x5')](_0x2683bc[a143_0x2417('0x26')])),_0x6e815a=_0x62762b[a143_0x2417('0x48')](_0x9d4718=>_0x9d4718['level']===_0x55c15c&&_0x27c0de[a143_0x2417('0x1c')]['roles'][a143_0x2417('0x23')]['has'](_0x9d4718[a143_0x2417('0x26')]));_0x6e815a[a143_0x2417('0x11')]&&(await _0x27c0de[a143_0x2417('0x21')]['roles'][a143_0x2417('0x4e')](_0x6e815a[a143_0x2417('0x59')](_0x246526=>_0x246526[a143_0x2417('0x26')])),await _0x27c0de[a143_0x2417('0x21')]['roles'][a143_0x2417('0x2b')](_0x4c1f54[a143_0x2417('0x59')](_0x298b4e=>_0x298b4e[a143_0x2417('0x26')])));},this['handleGamification']=async _0x23a3f6=>{const _0x27c97d=this['recentUsers'][a143_0x2417('0x12')](_0x23a3f6[a143_0x2417('0x1c')]['id'])||[];if(_0x27c97d[a143_0x2417('0x22')](_0x23a3f6[a143_0x2417('0xd')]['id']))return;const _0x2ec4fb=_0x23a3f6[a143_0x2417('0x58')],_0x40129a=_0x23a3f6['guild'],_0x2821aa=_0x23a3f6[a143_0x2417('0x21')];if(!_0x40129a[a143_0x2417('0x2')]['gamification']||!_0x40129a['document'][a143_0x2417('0x8')][a143_0x2417('0x20')])return;if(_0x2821aa[a143_0x2417('0x2')][a143_0x2417('0x56')]>=gamification[a143_0x2417('0x15')]||_0x2821aa[a143_0x2417('0x2')][a143_0x2417('0x2e')]>=gamification[a143_0x2417('0x4b')](_0x40129a[a143_0x2417('0x2')][a143_0x2417('0x8')][a143_0x2417('0x6')]))return;_0x2821aa[a143_0x2417('0x2')]['experience']+=0x1;const _0x292567=gamification['computeLevel'](_0x2821aa[a143_0x2417('0x2')][a143_0x2417('0x2e')],_0x40129a['document'][a143_0x2417('0x8')][a143_0x2417('0x6')]);_0x292567>_0x2821aa['document'][a143_0x2417('0x56')]&&(await _0x2821aa[a143_0x2417('0x16')](_0x292567*gamification[a143_0x2417('0x2d')],'Level-up\x20Reward',_0x2821aa[a143_0x2417('0x2')]),_0x40129a['document'][a143_0x2417('0x8')][a143_0x2417('0x5d')]&&_0x23a3f6[a143_0x2417('0x31')]['send']({'embed':{'color':tesseract_1[a143_0x2417('0x1f')][a143_0x2417('0x25')][a143_0x2417('0x17')],'fields':[{'name':'LEVELED\x20UP!','value':_0x2ec4fb[a143_0x2417('0x14')][a143_0x2417('0x46')](_0x40129a[a143_0x2417('0x2')][a143_0x2417('0x43')],a143_0x2417('0x30'),a143_0x2417('0x33'),_0x23a3f6[a143_0x2417('0xd')][a143_0x2417('0x4d')],_0x292567)}]}})['catch'](()=>{}),this[a143_0x2417('0x37')](_0x23a3f6,_0x2821aa['document'][a143_0x2417('0x56')])[a143_0x2417('0x13')](tesseract_1[a143_0x2417('0xa')]['error'])),_0x2821aa[a143_0x2417('0x2')][a143_0x2417('0x56')]=_0x292567,await _0x2821aa['document']['save'](),_0x27c97d[a143_0x2417('0x5a')](_0x23a3f6[a143_0x2417('0xd')]['id']),this['recentUsers'][a143_0x2417('0x3f')](_0x23a3f6[a143_0x2417('0x1c')]['id'],_0x27c97d),_0x23a3f6[a143_0x2417('0x58')][a143_0x2417('0x19')](()=>{const _0x4938e3=this[a143_0x2417('0x47')][a143_0x2417('0x12')](_0x23a3f6[a143_0x2417('0x1c')]['id']);_0x4938e3['splice'](_0x4938e3[a143_0x2417('0x4a')](_0x23a3f6['author']['id']),0x1),this['recentUsers'][a143_0x2417('0x3f')](_0x23a3f6[a143_0x2417('0x1c')]['id'],_0x4938e3);},0x32c8);},this['handleTriggers']=async _0x576e21=>{if(!_0x576e21['content'])return;const _0x24c8be=await Trigger_1[a143_0x2417('0x34')][a143_0x2417('0x39')]({'guild':_0x576e21[a143_0x2417('0x1c')]['id']}),_0x364529=[],_0x10f08f=[];for(const _0x2dd10e of _0x24c8be){const _0x41aebc=new RegExp(_0x2dd10e[a143_0x2417('0x28')][a143_0x2417('0x5f')](/\?/g,'.')[a143_0x2417('0x5f')](/\*+/g,'.*'),'ig');if(!_0x41aebc[a143_0x2417('0x2f')](_0x576e21[a143_0x2417('0x3')]))continue;_0x2dd10e[a143_0x2417('0x0')]&&_0x364529['push'](_0x2dd10e[a143_0x2417('0x0')]);if(_0x2dd10e['responseReaction']){const _0x2db9bb=emojis['parseEmoji'](_0x2dd10e[a143_0x2417('0x40')]);_0x2db9bb&&_0x10f08f['push'](_0x2db9bb[a143_0x2417('0x4f')]);}}_0x364529[a143_0x2417('0x11')]&&_0x576e21[a143_0x2417('0x31')][a143_0x2417('0x1b')]({'embed':{...embeds[a143_0x2417('0xc')](JSON[a143_0x2417('0x36')](variables[a143_0x2417('0xe')](JSON['stringify'](_0x364529[Math[a143_0x2417('0x57')](Math[a143_0x2417('0x38')]()*_0x364529['length'])]),_0x576e21))),'footer':{'text':_0x576e21[a143_0x2417('0x58')][a143_0x2417('0x14')][a143_0x2417('0x50')](a143_0x2417('0x42'))+a143_0x2417('0x27')}}})[a143_0x2417('0x13')](tesseract_1[a143_0x2417('0xa')]['error']),_0x10f08f[a143_0x2417('0x11')]&&_0x576e21[a143_0x2417('0x35')](_0x10f08f[Math[a143_0x2417('0x57')](Math[a143_0x2417('0x38')]()*_0x10f08f[a143_0x2417('0x11')])])[a143_0x2417('0x13')](tesseract_1[a143_0x2417('0xa')][a143_0x2417('0x52')]);},this[a143_0x2417('0x3b')]=async _0x3b02d5=>{const _0x575bee=await TextChannel_1[a143_0x2417('0x34')]['findOne']({'_id':_0x3b02d5[a143_0x2417('0x31')]['id'],'voting':!![]});if(!_0x575bee)return;_0x3b02d5[a143_0x2417('0x35')]('👍')[a143_0x2417('0x13')](()=>{}),_0x3b02d5['react']('👎')[a143_0x2417('0x13')](()=>{});},this[a143_0x2417('0x1a')]=async _0x208927=>{if(!_0x208927['content'])return;const _0x10e057=await omnic['makeRequest']('/chat/instant?message='+encodeURIComponent(_0x208927[a143_0x2417('0x3')]))[a143_0x2417('0x1')](_0x41cfc4=>_0x41cfc4['json']());if(_0x10e057[a143_0x2417('0x2c')]!==a143_0x2417('0x9'))return;const _0x58ed3c=_0x10e057['response'][a143_0x2417('0x5b')]instanceof Array?_0x10e057[a143_0x2417('0x7')][a143_0x2417('0x5b')]:[_0x10e057[a143_0x2417('0x7')][a143_0x2417('0x5b')]];for(const _0x130c0f of _0x58ed3c){await _0x208927[a143_0x2417('0x31')][a143_0x2417('0x1b')](_0x130c0f)[a143_0x2417('0x13')](()=>{});}},this[a143_0x2417('0x32')]=async _0x2508cc=>{const _0x339739=await Config_1[a143_0x2417('0x34')][a143_0x2417('0x44')](_0x2508cc['client'][a143_0x2417('0x1e')]['id']);if(_0x339739[a143_0x2417('0x4c')]&&_0x2508cc[a143_0x2417('0x3')]){const _0x39eddb=await _0x2508cc['client'][a143_0x2417('0x45')](),_0x427c61=_0x39eddb[a143_0x2417('0xf')]instanceof discord_js_1[a143_0x2417('0x51')]?_0x39eddb[a143_0x2417('0xf')]['owner'][a143_0x2417('0x1e')]:_0x39eddb[a143_0x2417('0xf')];if(_0x2508cc['author']['id']===_0x427c61['id'])return;const _0x7950d3=await _0x427c61[a143_0x2417('0x3a')]();await _0x7950d3[a143_0x2417('0x1b')]({'embed':{'color':tesseract_1[a143_0x2417('0x1f')][a143_0x2417('0x25')][a143_0x2417('0x17')],'author':{'name':_0x2508cc[a143_0x2417('0xd')]['tag'],'iconURL':_0x2508cc[a143_0x2417('0xd')]['displayAvatarURL']({'dynamic':!![],'size':0x40})},'description':_0x2508cc[a143_0x2417('0x3')],'footer':{'text':_0x2508cc[a143_0x2417('0xd')]['id']}}});}},this['exec']=async _0x26473f=>{_0x26473f['guild']?(this['handleGamification'](_0x26473f)[a143_0x2417('0x13')](()=>{}),this['handleTriggers'](_0x26473f)['catch'](()=>{}),this[a143_0x2417('0x3b')](_0x26473f)[a143_0x2417('0x13')](()=>{})):(this['handleInstantResponses'](_0x26473f)[a143_0x2417('0x13')](()=>{}),this['handleDirectMessageRelay'](_0x26473f)[a143_0x2417('0x13')](()=>{}));},this[a143_0x2417('0x47')]=new Map();}};
const a135_0x586d=['catch','add','\x20Trigger','owner','guild','../models/TextChannel','send','save','findOne','handleLevelRoles','LEVELED\x20UP!','responseMessage','splice','find','messages','discord.js','reply','constructor','language','credit','apply','../utils/variables','get','indexOf','success','user','client','replaceMessageVariables','test','/chat/instant?message=','return\x20/\x22\x20+\x20this\x20+\x20\x22/','Level-up\x20Reward','filter','exports','Team','cache','handleInstantResponses','locale','getConstant','../models/Trigger','gamification','has','recentUsers','compile','parseEmoji','Logger','set','computeLevel','length','default','displayAvatarURL','channel','then','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','responseReaction','MAX_EXPERIENCE','findById','handleDirectMessageRelay','IRIS','parse','_id','ModuleManagerEvent','../models/Config','document','replace','fetchApplication','handleTriggers','getString','bastion.name','relayDirectMessages','humanMessage','push','setTimeout','react','MAX_LEVEL','exec','roles','@bastion/tesseract','reaction','member','stringify','floor','json','content','level','enabled','DEFAUL_CURRENCY_REWARD_MULTIPLIER','author','../utils/omnic','createDM','remove','status','handleGamification','experience','../utils/emojis','random','multiplier','COLORS','tag','../utils/gamification','response','Constants'];(function(_0x287dde,_0x586dd1){const _0x595358=function(_0x4b6fe6){while(--_0x4b6fe6){_0x287dde['push'](_0x287dde['shift']());}};const _0x4a80c3=function(){const _0x6d25b0={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x35844e,_0x3b5d62,_0x13269c,_0x259b0e){_0x259b0e=_0x259b0e||{};let _0xa03787=_0x3b5d62+'='+_0x13269c;let _0x241cda=0x0;for(let _0x1b850e=0x0,_0x107d13=_0x35844e['length'];_0x1b850e<_0x107d13;_0x1b850e++){const _0x17f989=_0x35844e[_0x1b850e];_0xa03787+=';\x20'+_0x17f989;const _0x31969d=_0x35844e[_0x17f989];_0x35844e['push'](_0x31969d);_0x107d13=_0x35844e['length'];if(_0x31969d!==!![]){_0xa03787+='='+_0x31969d;}}_0x259b0e['cookie']=_0xa03787;},'removeCookie':function(){return'dev';},'getCookie':function(_0xbbcd60,_0x5c083c){_0xbbcd60=_0xbbcd60||function(_0x3f8af6){return _0x3f8af6;};const _0x2e5f95=_0xbbcd60(new RegExp('(?:^|;\x20)'+_0x5c083c['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x259a87=function(_0x1995c0,_0x271bc7){_0x1995c0(++_0x271bc7);};_0x259a87(_0x595358,_0x586dd1);return _0x2e5f95?decodeURIComponent(_0x2e5f95[0x1]):undefined;}};const _0x3658e1=function(){const _0x56ec72=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x56ec72['test'](_0x6d25b0['removeCookie']['toString']());};_0x6d25b0['updateCookie']=_0x3658e1;let _0x32e467='';const _0x304c39=_0x6d25b0['updateCookie']();if(!_0x304c39){_0x6d25b0['setCookie'](['*'],'counter',0x1);}else if(_0x304c39){_0x32e467=_0x6d25b0['getCookie'](null,'counter');}else{_0x6d25b0['removeCookie']();}};_0x4a80c3();}(a135_0x586d,0x10e));const a135_0x5953=function(_0x287dde,_0x586dd1){_0x287dde=_0x287dde-0x0;let _0x595358=a135_0x586d[_0x287dde];return _0x595358;};const a135_0x6d25b0=function(){let _0x57c17e=!![];return function(_0x1f2570,_0x125cea){const _0x840145=_0x57c17e?function(){if(_0x125cea){const _0x3c4a9f=_0x125cea[a135_0x5953('0x38')](_0x1f2570,arguments);_0x125cea=null;return _0x3c4a9f;}}:function(){};_0x57c17e=![];return _0x840145;};}();const a135_0x4b6fe6=a135_0x6d25b0(this,function(){const _0x30cd50=function(){const _0x214982=_0x30cd50[a135_0x5953('0x35')](a135_0x5953('0x42'))()[a135_0x5953('0x4f')](a135_0x5953('0x59'));return!_0x214982[a135_0x5953('0x40')](a135_0x4b6fe6);};return _0x30cd50();});a135_0x4b6fe6();'use strict';const tesseract_1=require(a135_0x5953('0xb'));const discord_js_1=require(a135_0x5953('0x33'));const emojis=require(a135_0x5953('0x1c'));const gamification=require(a135_0x5953('0x21'));const omnic=require(a135_0x5953('0x16'));const variables=require(a135_0x5953('0x39'));const Config_1=require(a135_0x5953('0x62'));const Role_1=require('../models/Role');const TextChannel_1=require(a135_0x5953('0x29'));const Trigger_1=require(a135_0x5953('0x4b'));module[a135_0x5953('0x45')]=class HumanMessageEvent extends tesseract_1[a135_0x5953('0x61')]{constructor(){super(a135_0x5953('0x4'));this['handleLevelRoles']=async(_0x4503e9,_0x6bc43f)=>{const _0x3c26ee=await Role_1[a135_0x5953('0x55')][a135_0x5953('0x31')]({'guild':_0x4503e9['guild']['id'],'level':{'$exists':!![]}});const _0x506f82=_0x3c26ee['filter'](_0x1df05f=>_0x1df05f[a135_0x5953('0x12')]!==_0x6bc43f&&_0x4503e9[a135_0x5953('0x28')][a135_0x5953('0xa')][a135_0x5953('0x47')]['has'](_0x1df05f['_id']));const _0x269836=_0x3c26ee[a135_0x5953('0x44')](_0x2fd12f=>_0x2fd12f['level']===_0x6bc43f&&_0x4503e9[a135_0x5953('0x28')][a135_0x5953('0xa')]['cache'][a135_0x5953('0x4d')](_0x2fd12f[a135_0x5953('0x60')]));if(_0x269836[a135_0x5953('0x54')]){await _0x4503e9[a135_0x5953('0xd')][a135_0x5953('0xa')][a135_0x5953('0x25')](_0x269836['map'](_0x5b4182=>_0x5b4182['_id']));await _0x4503e9[a135_0x5953('0xd')][a135_0x5953('0xa')][a135_0x5953('0x18')](_0x506f82['map'](_0xb6a08d=>_0xb6a08d[a135_0x5953('0x60')]));}};this[a135_0x5953('0x1a')]=async _0x3f404d=>{const _0x23f780=this['recentUsers']['get'](_0x3f404d[a135_0x5953('0x28')]['id'])||[];if(_0x23f780['includes'](_0x3f404d[a135_0x5953('0x15')]['id']))return;const _0x356a38=_0x3f404d[a135_0x5953('0x3e')];const _0xe38970=_0x3f404d[a135_0x5953('0x28')];const _0x185047=_0x3f404d['member'];if(!_0xe38970[a135_0x5953('0x63')][a135_0x5953('0x4c')]||!_0xe38970['document']['gamification'][a135_0x5953('0x13')])return;if(_0x185047[a135_0x5953('0x63')][a135_0x5953('0x12')]>=gamification[a135_0x5953('0x8')]||_0x185047[a135_0x5953('0x63')][a135_0x5953('0x1b')]>=gamification[a135_0x5953('0x5b')](_0xe38970['document'][a135_0x5953('0x4c')][a135_0x5953('0x1e')]))return;_0x185047[a135_0x5953('0x63')][a135_0x5953('0x1b')]+=0x1;const _0x132b27=gamification[a135_0x5953('0x53')](_0x185047['document'][a135_0x5953('0x1b')],_0xe38970[a135_0x5953('0x63')][a135_0x5953('0x4c')][a135_0x5953('0x1e')]);_0x185047[a135_0x5953('0x63')]['level']=_0x132b27;if(_0x132b27>_0x185047[a135_0x5953('0x63')][a135_0x5953('0x12')]){await _0x185047[a135_0x5953('0x37')](_0x132b27*gamification[a135_0x5953('0x14')],a135_0x5953('0x43'),_0x185047[a135_0x5953('0x63')]);if(_0xe38970['document']['gamification'][a135_0x5953('0x32')]){_0x3f404d[a135_0x5953('0x57')][a135_0x5953('0x2a')]({'embed':{'color':tesseract_1[a135_0x5953('0x23')][a135_0x5953('0x1f')][a135_0x5953('0x5e')],'fields':[{'name':a135_0x5953('0x2e'),'value':_0x356a38[a135_0x5953('0x49')][a135_0x5953('0x1')](_0xe38970['document'][a135_0x5953('0x36')],'info','levelUp',_0x3f404d[a135_0x5953('0x15')][a135_0x5953('0x20')],_0x185047[a135_0x5953('0x63')][a135_0x5953('0x12')])}]}})[a135_0x5953('0x24')](()=>{});}this[a135_0x5953('0x2d')](_0x3f404d,_0x185047[a135_0x5953('0x63')][a135_0x5953('0x12')])['catch'](tesseract_1[a135_0x5953('0x51')]['error']);}await _0x185047['document'][a135_0x5953('0x2b')]();_0x23f780[a135_0x5953('0x5')](_0x3f404d['author']['id']);this[a135_0x5953('0x4e')]['set'](_0x3f404d['guild']['id'],_0x23f780);_0x3f404d[a135_0x5953('0x3e')][a135_0x5953('0x6')](()=>{const _0x65c1fa=this[a135_0x5953('0x4e')][a135_0x5953('0x3a')](_0x3f404d[a135_0x5953('0x28')]['id']);_0x65c1fa[a135_0x5953('0x30')](_0x65c1fa[a135_0x5953('0x3b')](_0x3f404d[a135_0x5953('0x15')]['id']),0x1);this[a135_0x5953('0x4e')][a135_0x5953('0x52')](_0x3f404d[a135_0x5953('0x28')]['id'],_0x65c1fa);},0x32c8);};this[a135_0x5953('0x0')]=async _0x154def=>{if(!_0x154def[a135_0x5953('0x11')])return;const _0x1400a8=await Trigger_1[a135_0x5953('0x55')][a135_0x5953('0x31')]({'guild':_0x154def[a135_0x5953('0x28')]['id']});const _0x5cd1aa=[];const _0x3503cf=[];for(const _0x8463e6 of _0x1400a8){const _0x1e6903=new RegExp(_0x8463e6['trigger']['replace'](/\?/g,'.')[a135_0x5953('0x64')](/\*+/g,'.*'),'ig');if(!_0x1e6903[a135_0x5953('0x40')](_0x154def[a135_0x5953('0x11')]))continue;if(_0x8463e6[a135_0x5953('0x2f')]){_0x5cd1aa[a135_0x5953('0x5')](_0x8463e6['responseMessage']);}if(_0x8463e6[a135_0x5953('0x5a')]){const _0x4a6230=emojis[a135_0x5953('0x50')](_0x8463e6[a135_0x5953('0x5a')]);if(_0x4a6230){_0x3503cf['push'](_0x4a6230[a135_0x5953('0xc')]);}}}if(_0x5cd1aa[a135_0x5953('0x54')]){_0x154def[a135_0x5953('0x57')][a135_0x5953('0x2a')]({'embed':{...JSON[a135_0x5953('0x5f')](variables[a135_0x5953('0x3f')](JSON[a135_0x5953('0xe')](_0x5cd1aa[Math['floor'](Math[a135_0x5953('0x1d')]()*_0x5cd1aa['length'])]),_0x154def)),'footer':{'text':_0x154def[a135_0x5953('0x3e')]['locale'][a135_0x5953('0x4a')](a135_0x5953('0x2'))+a135_0x5953('0x26')}}});}if(_0x3503cf[a135_0x5953('0x54')]){_0x154def['react'](_0x3503cf[Math[a135_0x5953('0xf')](Math[a135_0x5953('0x1d')]()*_0x3503cf[a135_0x5953('0x54')])]);}};this['handleVotingChannels']=async _0x7c3880=>{const _0x5f2eb1=await TextChannel_1['default'][a135_0x5953('0x2c')]({'_id':_0x7c3880[a135_0x5953('0x57')]['id'],'voting':!![]});if(!_0x5f2eb1)return;_0x7c3880['react']('👍')[a135_0x5953('0x24')](()=>{});_0x7c3880[a135_0x5953('0x7')]('👎')[a135_0x5953('0x24')](()=>{});};this[a135_0x5953('0x48')]=async _0x1ce787=>{if(!_0x1ce787['content'])return;const _0x7ae523=await omnic['makeRequest'](a135_0x5953('0x41')+encodeURIComponent(_0x1ce787['content']))[a135_0x5953('0x58')](_0xe24f1=>_0xe24f1[a135_0x5953('0x10')]());if(_0x7ae523[a135_0x5953('0x19')]!==a135_0x5953('0x3c'))return;const _0x33afda=_0x7ae523['response'][a135_0x5953('0x34')]instanceof Array?_0x7ae523[a135_0x5953('0x22')][a135_0x5953('0x34')]:[_0x7ae523['response']['reply']];for(const _0x2f7140 of _0x33afda){await _0x1ce787['channel'][a135_0x5953('0x2a')](_0x2f7140)[a135_0x5953('0x24')](()=>{});}};this[a135_0x5953('0x5d')]=async _0x566b96=>{const _0xdf46a0=await Config_1['default'][a135_0x5953('0x5c')](_0x566b96[a135_0x5953('0x3e')][a135_0x5953('0x3d')]['id']);if(_0xdf46a0[a135_0x5953('0x3')]&&_0x566b96['content']){const _0x1184d6=await _0x566b96[a135_0x5953('0x3e')][a135_0x5953('0x65')]();const _0x4a39b0=_0x1184d6['owner']instanceof discord_js_1[a135_0x5953('0x46')]?_0x1184d6[a135_0x5953('0x27')][a135_0x5953('0x27')]['user']:_0x1184d6[a135_0x5953('0x27')];if(_0x566b96[a135_0x5953('0x15')]['id']===_0x4a39b0['id'])return;const _0x4d7ce5=await _0x4a39b0[a135_0x5953('0x17')]();await _0x4d7ce5[a135_0x5953('0x2a')]({'embed':{'color':tesseract_1[a135_0x5953('0x23')][a135_0x5953('0x1f')][a135_0x5953('0x5e')],'author':{'name':_0x566b96[a135_0x5953('0x15')]['tag'],'iconURL':_0x566b96[a135_0x5953('0x15')][a135_0x5953('0x56')]({'dynamic':!![],'size':0x40})},'description':_0x566b96[a135_0x5953('0x11')],'footer':{'text':_0x566b96[a135_0x5953('0x15')]['id']}}});}};this[a135_0x5953('0x9')]=async _0x247510=>{if(_0x247510[a135_0x5953('0x28')]){this[a135_0x5953('0x1a')](_0x247510)[a135_0x5953('0x24')](()=>{});this[a135_0x5953('0x0')](_0x247510)[a135_0x5953('0x24')](()=>{});this['handleVotingChannels'](_0x247510)[a135_0x5953('0x24')](()=>{});}else{this[a135_0x5953('0x48')](_0x247510)[a135_0x5953('0x24')](()=>{});this['handleDirectMessageRelay'](_0x247510)[a135_0x5953('0x24')](()=>{});}};this[a135_0x5953('0x4e')]=new Map();}};
const a167_0xdd1600=a167_0x215d;function a167_0x215d(_0x2d1838,_0x4235fe){const _0x18854c=a167_0x441d();return a167_0x215d=function(_0x2abb61,_0x3c19a6){_0x2abb61=_0x2abb61-0xc9;let _0x441d4b=_0x18854c[_0x2abb61];return _0x441d4b;},a167_0x215d(_0x2d1838,_0x4235fe);}(function(_0x3de1a6,_0x110916){const _0x1dd335=a167_0x215d,_0x1cb9a2=_0x3de1a6();while(!![]){try{const _0x4051c6=parseInt(_0x1dd335(0x13f))/0x1*(-parseInt(_0x1dd335(0xd5))/0x2)+-parseInt(_0x1dd335(0x127))/0x3*(parseInt(_0x1dd335(0x13d))/0x4)+parseInt(_0x1dd335(0x113))/0x5*(parseInt(_0x1dd335(0x10f))/0x6)+-parseInt(_0x1dd335(0xd3))/0x7+-parseInt(_0x1dd335(0xe8))/0x8*(-parseInt(_0x1dd335(0xc9))/0x9)+parseInt(_0x1dd335(0xee))/0xa*(parseInt(_0x1dd335(0x114))/0xb)+-parseInt(_0x1dd335(0x134))/0xc;if(_0x4051c6===_0x110916)break;else _0x1cb9a2['push'](_0x1cb9a2['shift']());}catch(_0x5db70b){_0x1cb9a2['push'](_0x1cb9a2['shift']());}}}(a167_0x441d,0xdcf80));const a167_0x3c19a6=(function(){let _0xf42db1=!![];return function(_0x47ddad,_0x41ab80){const _0xb31790=_0xf42db1?function(){const _0x91bfa7=a167_0x215d;if(_0x41ab80){const _0x8c6e9d=_0x41ab80[_0x91bfa7(0xdc)](_0x47ddad,arguments);return _0x41ab80=null,_0x8c6e9d;}}:function(){};return _0xf42db1=![],_0xb31790;};}()),a167_0x2abb61=a167_0x3c19a6(this,function(){const _0x5f134d=a167_0x215d;return a167_0x2abb61[_0x5f134d(0x125)]()['search'](_0x5f134d(0xd7))[_0x5f134d(0x125)]()[_0x5f134d(0x110)](a167_0x2abb61)[_0x5f134d(0xde)]('(((.+)+)+)+$');});a167_0x2abb61();'use strict';function a167_0x441d(){const _0x58ed42=['../utils/embeds','save','has','exec','client','default','replaceMessageVariables','updateMany','premiumSinceTimestamp','parse','stringify','exports','add','response','get','thanks','../models/Member','LEVELED\x20UP!','30vrBLEG','constructor','trigger','handleGamification','900590JUfMdq','11epDsnE','enabled','discord.js','reaction','push','handleDirectMessageRelay','DEFAUL_CURRENCY_REWARD_MULTIPLIER','tag','mentions','author','makeRequest','handleTriggers','../models/Config','send','random','messages','users','toString','handleInstantResponses','3866787PaSSWM','displayAvatarURL','../models/TextChannel','length','experience','user','handleKarma','credit','catch','guild','fetchApplication','Level-up\x20Reward','👍🏻','4360776vzQcUG','find','Logger','multiplier','handleLevelRoles','../utils/emojis','humanMessage','MAX_EXPERIENCE','splice','4vgLsNm','document','112859eNZFgO','channel','73701xrMjkO','toLowerCase','cache','levelUp','Constants','setTimeout','responseMessage','replace','../utils/gamification','indexOf','3572604uJxxvY','status','20qVnjVK','gamification','(((.+)+)+)+$','error','relayDirectMessages','_id','react','apply','then','search','reply','/chat/instant?message=','includes','responseReaction','thank\x20you','computeLevel','filter','ModuleManagerEvent','owner','1728Fpynxw','getConstant','COLORS','remove','set','bastion.name','15269630cnhiIK','../models/Role','handleVotingChannels','recentUsers','content','../utils/variables','json','../models/Trigger','roles','level','map','info','smallestNeighbor','member','size'];a167_0x441d=function(){return _0x58ed42;};return a167_0x441d();}const tesseract_1=require('@bastion/tesseract'),discord_js_1=require(a167_0xdd1600(0x116)),embeds=require(a167_0xdd1600(0xfd)),emojis=require(a167_0xdd1600(0x139)),gamification=require(a167_0xdd1600(0xd1)),numbers=require('../utils/numbers'),omnic=require('../utils/omnic'),variables=require(a167_0xdd1600(0xf3)),Config_1=require(a167_0xdd1600(0x120)),Member_1=require(a167_0xdd1600(0x10d)),Role_1=require(a167_0xdd1600(0xef)),TextChannel_1=require(a167_0xdd1600(0x129)),Trigger_1=require(a167_0xdd1600(0xf5));module[a167_0xdd1600(0x108)]=class HumanMessageEvent extends tesseract_1[a167_0xdd1600(0xe6)]{[a167_0xdd1600(0xf1)];constructor(){const _0x2f3714=a167_0xdd1600;super(_0x2f3714(0x13a)),this[_0x2f3714(0xf1)]=new Map();}[a167_0xdd1600(0x138)]=async(_0x297b12,_0x1ce3ef)=>{const _0x3c4da4=a167_0xdd1600,_0x1ece9a=await Role_1['default'][_0x3c4da4(0x135)]({'guild':_0x297b12[_0x3c4da4(0x130)]['id'],'level':{'$exists':!![],'$ne':null}});if(!_0x1ece9a||!_0x1ece9a[_0x3c4da4(0x12a)])return;const _0xed6dc9=numbers[_0x3c4da4(0xfa)](_0x1ce3ef,_0x1ece9a['map'](_0x14cf4f=>_0x14cf4f['level'])),_0x5784e0=_0x1ece9a[_0x3c4da4(0xe5)](_0x498e8e=>_0x498e8e[_0x3c4da4(0xf7)]!==_0xed6dc9&&_0x297b12['guild'][_0x3c4da4(0xf6)][_0x3c4da4(0xcb)][_0x3c4da4(0xff)](_0x498e8e['_id'])),_0x3fd731=_0x1ece9a[_0x3c4da4(0xe5)](_0x3f9672=>_0x3f9672[_0x3c4da4(0xf7)]===_0xed6dc9&&_0x297b12[_0x3c4da4(0x130)][_0x3c4da4(0xf6)][_0x3c4da4(0xcb)]['has'](_0x3f9672[_0x3c4da4(0xda)]));_0x3fd731[_0x3c4da4(0x12a)]&&(await _0x297b12[_0x3c4da4(0xfb)][_0x3c4da4(0xf6)][_0x3c4da4(0x109)](_0x3fd731[_0x3c4da4(0xf8)](_0x6d1f86=>_0x6d1f86[_0x3c4da4(0xda)])),await _0x297b12[_0x3c4da4(0xfb)][_0x3c4da4(0xf6)][_0x3c4da4(0xeb)](_0x5784e0[_0x3c4da4(0xf8)](_0xd736d6=>_0xd736d6[_0x3c4da4(0xda)])));};[a167_0xdd1600(0x112)]=async _0x5c5d9f=>{const _0xf9bca2=a167_0xdd1600,_0x2a8cfe=this[_0xf9bca2(0xf1)][_0xf9bca2(0x10b)](_0x5c5d9f[_0xf9bca2(0x130)]['id'])||[];if(_0x2a8cfe[_0xf9bca2(0xe1)](_0x5c5d9f[_0xf9bca2(0x11d)]['id']))return;const _0x127bab=_0x5c5d9f['client'],_0x19cd3b=_0x5c5d9f['guild'],_0x7634ea=_0x5c5d9f[_0xf9bca2(0xfb)];if(!_0x19cd3b[_0xf9bca2(0x13e)][_0xf9bca2(0xd6)]||!_0x19cd3b[_0xf9bca2(0x13e)][_0xf9bca2(0xd6)][_0xf9bca2(0x115)])return;if(_0x7634ea[_0xf9bca2(0x13e)][_0xf9bca2(0xf7)]>=gamification['MAX_LEVEL']||_0x7634ea[_0xf9bca2(0x13e)][_0xf9bca2(0x12b)]>=gamification[_0xf9bca2(0x13b)](_0x19cd3b['document'][_0xf9bca2(0xd6)][_0xf9bca2(0x137)]))return;_0x7634ea[_0xf9bca2(0x13e)][_0xf9bca2(0x12b)]=_0x7634ea[_0xf9bca2(0x105)]?_0x7634ea[_0xf9bca2(0x13e)][_0xf9bca2(0x12b)]+0x2:_0x7634ea[_0xf9bca2(0x13e)][_0xf9bca2(0x12b)]+0x1;const _0x292530=gamification[_0xf9bca2(0xe4)](_0x7634ea[_0xf9bca2(0x13e)][_0xf9bca2(0x12b)],_0x19cd3b[_0xf9bca2(0x13e)][_0xf9bca2(0xd6)][_0xf9bca2(0x137)]);_0x292530>_0x7634ea[_0xf9bca2(0x13e)][_0xf9bca2(0xf7)]&&(await _0x7634ea[_0xf9bca2(0x12e)](_0x292530*gamification[_0xf9bca2(0x11a)],_0xf9bca2(0x132),_0x7634ea[_0xf9bca2(0x13e)]),_0x19cd3b[_0xf9bca2(0x13e)][_0xf9bca2(0xd6)][_0xf9bca2(0x123)]&&_0x5c5d9f['channel'][_0xf9bca2(0x121)]({'embed':{'color':tesseract_1['Constants'][_0xf9bca2(0xea)]['IRIS'],'fields':[{'name':_0xf9bca2(0x10e),'value':_0x127bab['locale']['getString'](_0x19cd3b[_0xf9bca2(0x13e)]['language'],_0xf9bca2(0xf9),_0xf9bca2(0xcc),_0x5c5d9f['author'][_0xf9bca2(0x11b)],_0x292530)}]}})[_0xf9bca2(0x12f)](()=>{}),this[_0xf9bca2(0x138)](_0x5c5d9f,_0x292530)['catch'](tesseract_1[_0xf9bca2(0x136)][_0xf9bca2(0xd8)])),_0x7634ea[_0xf9bca2(0x13e)][_0xf9bca2(0xf7)]=_0x292530,await _0x7634ea[_0xf9bca2(0x13e)][_0xf9bca2(0xfe)](),_0x2a8cfe[_0xf9bca2(0x118)](_0x5c5d9f[_0xf9bca2(0x11d)]['id']),this['recentUsers'][_0xf9bca2(0xec)](_0x5c5d9f[_0xf9bca2(0x130)]['id'],_0x2a8cfe),_0x5c5d9f['client'][_0xf9bca2(0xce)](()=>{const _0x34a393=_0xf9bca2,_0x4ad852=this[_0x34a393(0xf1)][_0x34a393(0x10b)](_0x5c5d9f[_0x34a393(0x130)]['id']);_0x4ad852[_0x34a393(0x13c)](_0x4ad852[_0x34a393(0xd2)](_0x5c5d9f[_0x34a393(0x11d)]['id']),0x1),this[_0x34a393(0xf1)][_0x34a393(0xec)](_0x5c5d9f['guild']['id'],_0x4ad852);},0x32c8);};[a167_0xdd1600(0x11f)]=async _0x4bc9d6=>{const _0x5de98e=a167_0xdd1600;if(!_0x4bc9d6[_0x5de98e(0xf2)])return;const _0x1ea17e=await Trigger_1[_0x5de98e(0x102)][_0x5de98e(0x135)]({'guild':_0x4bc9d6[_0x5de98e(0x130)]['id']}),_0x459500=[],_0x48083c=[];for(const _0x151a3f of _0x1ea17e){const _0xd81181=new RegExp(_0x151a3f[_0x5de98e(0x111)]['replace'](/\?/g,'.')[_0x5de98e(0xd0)](/\*+/g,'.*'),'ig');if(!_0xd81181['test'](_0x4bc9d6[_0x5de98e(0xf2)]))continue;_0x151a3f[_0x5de98e(0xcf)]&&_0x459500['push'](_0x151a3f[_0x5de98e(0xcf)]);if(_0x151a3f[_0x5de98e(0xe2)]){const _0x5a4074=emojis['parseEmoji'](_0x151a3f[_0x5de98e(0xe2)]);_0x5a4074&&_0x48083c[_0x5de98e(0x118)](_0x5a4074[_0x5de98e(0x117)]);}}_0x459500[_0x5de98e(0x12a)]&&_0x4bc9d6[_0x5de98e(0x140)]['send']({'embed':{...embeds['generateEmbed'](JSON[_0x5de98e(0x106)](variables[_0x5de98e(0x103)](JSON[_0x5de98e(0x107)](_0x459500[Math['floor'](Math[_0x5de98e(0x122)]()*_0x459500[_0x5de98e(0x12a)])]),_0x4bc9d6))),'footer':{'text':_0x4bc9d6[_0x5de98e(0x101)]['locale'][_0x5de98e(0xe9)](_0x5de98e(0xed))+'\x20Trigger'}}})[_0x5de98e(0x12f)](tesseract_1[_0x5de98e(0x136)]['error']),_0x48083c[_0x5de98e(0x12a)]&&_0x4bc9d6[_0x5de98e(0xdb)](_0x48083c[Math['floor'](Math[_0x5de98e(0x122)]()*_0x48083c[_0x5de98e(0x12a)])])[_0x5de98e(0x12f)](tesseract_1[_0x5de98e(0x136)]['error']);};[a167_0xdd1600(0xf0)]=async _0x147b88=>{const _0x37bd2e=a167_0xdd1600,_0x3f9ae9=await TextChannel_1['default']['findOne']({'_id':_0x147b88[_0x37bd2e(0x140)]['id'],'voting':!![]});if(!_0x3f9ae9)return;_0x147b88['react']('👍')['catch'](()=>{}),_0x147b88[_0x37bd2e(0xdb)]('👎')['catch'](()=>{});};[a167_0xdd1600(0x12d)]=async _0x9dacf0=>{const _0x4f0091=a167_0xdd1600;if(!_0x9dacf0[_0x4f0091(0xf2)])return;if(!_0x9dacf0[_0x4f0091(0x130)][_0x4f0091(0x13e)][_0x4f0091(0xd6)]||!_0x9dacf0[_0x4f0091(0x130)]['document'][_0x4f0091(0xd6)][_0x4f0091(0x115)])return;if((_0x9dacf0[_0x4f0091(0xf2)][_0x4f0091(0xca)]()[_0x4f0091(0xe1)](_0x4f0091(0x10c))||_0x9dacf0[_0x4f0091(0xf2)]['toLowerCase']()[_0x4f0091(0xe1)](_0x4f0091(0xe3)))&&_0x9dacf0[_0x4f0091(0x11c)][_0x4f0091(0x124)]&&_0x9dacf0['mentions'][_0x4f0091(0x124)][_0x4f0091(0xfc)]){const _0x2d86b3=Array['from'](_0x9dacf0[_0x4f0091(0x11c)][_0x4f0091(0x124)]['keys']())[_0x4f0091(0xe5)](_0x57d459=>_0x57d459!==_0x9dacf0[_0x4f0091(0xfb)]['id']);await Member_1[_0x4f0091(0x102)][_0x4f0091(0x104)]({'user':{'$in':_0x2d86b3},'guild':_0x9dacf0[_0x4f0091(0x130)]['id']},{'$inc':{'karma':0x1}}),_0x9dacf0[_0x4f0091(0xdb)](_0x4f0091(0x133))[_0x4f0091(0x12f)](()=>{});}};[a167_0xdd1600(0x126)]=async _0x1a6fc3=>{const _0x1e2595=a167_0xdd1600;if(!_0x1a6fc3[_0x1e2595(0xf2)])return;const _0x4f46a0=await omnic[_0x1e2595(0x11e)](_0x1e2595(0xe0)+encodeURIComponent(_0x1a6fc3[_0x1e2595(0xf2)]))[_0x1e2595(0xdd)](_0x11cbc5=>_0x11cbc5[_0x1e2595(0xf4)]());if(_0x4f46a0[_0x1e2595(0xd4)]!=='success')return;const _0x15db11=_0x4f46a0[_0x1e2595(0x10a)][_0x1e2595(0xdf)]instanceof Array?_0x4f46a0['response']['reply']:[_0x4f46a0[_0x1e2595(0x10a)][_0x1e2595(0xdf)]];for(const _0x22bb2e of _0x15db11){await _0x1a6fc3[_0x1e2595(0x140)]['send'](_0x22bb2e)[_0x1e2595(0x12f)](()=>{});}};[a167_0xdd1600(0x119)]=async _0x24c030=>{const _0x1ac6af=a167_0xdd1600,_0x2579ce=await Config_1[_0x1ac6af(0x102)]['findById'](_0x24c030[_0x1ac6af(0x101)][_0x1ac6af(0x12c)]['id']);if(_0x2579ce[_0x1ac6af(0xd9)]&&_0x24c030['content']){const _0x3da047=await _0x24c030[_0x1ac6af(0x101)][_0x1ac6af(0x131)](),_0x1ec2d1=_0x3da047[_0x1ac6af(0xe7)]instanceof discord_js_1['Team']?_0x3da047[_0x1ac6af(0xe7)][_0x1ac6af(0xe7)]['user']:_0x3da047[_0x1ac6af(0xe7)];if(_0x24c030[_0x1ac6af(0x11d)]['id']===_0x1ec2d1['id'])return;const _0x52b13d=await _0x1ec2d1['createDM']();await _0x52b13d[_0x1ac6af(0x121)]({'embed':{'color':tesseract_1[_0x1ac6af(0xcd)][_0x1ac6af(0xea)]['IRIS'],'author':{'name':_0x24c030[_0x1ac6af(0x11d)]['tag'],'iconURL':_0x24c030['author'][_0x1ac6af(0x128)]({'dynamic':!![],'size':0x40})},'description':_0x24c030[_0x1ac6af(0xf2)],'footer':{'text':_0x24c030[_0x1ac6af(0x11d)]['id']}}});}};[a167_0xdd1600(0x100)]=async _0xad3b96=>{const _0x2b8aa7=a167_0xdd1600;_0xad3b96[_0x2b8aa7(0x130)]?(this[_0x2b8aa7(0x112)](_0xad3b96)[_0x2b8aa7(0x12f)](()=>{}),this[_0x2b8aa7(0x11f)](_0xad3b96)[_0x2b8aa7(0x12f)](()=>{}),this[_0x2b8aa7(0x12d)](_0xad3b96)[_0x2b8aa7(0x12f)](tesseract_1['Logger'][_0x2b8aa7(0xd8)]),this[_0x2b8aa7(0xf0)](_0xad3b96)[_0x2b8aa7(0x12f)](()=>{})):(this['handleInstantResponses'](_0xad3b96)['catch'](()=>{}),this[_0x2b8aa7(0x119)](_0xad3b96)[_0x2b8aa7(0x12f)](()=>{}));};};
const a148_0x3fbc=['discord.js','add','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','filter','level','roles','apply','locale','push','success','splice','credit','premiumSinceTimestamp','author','generateEmbed','length','replaceMessageVariables','/chat/instant?message=','reaction','enabled','handleVotingChannels','catch','multiplier','find','reply','get','size','Logger','createDM','LEVELED\x20UP!','fetchApplication','document','experience','makeRequest','DEFAUL_CURRENCY_REWARD_MULTIPLIER','owner','guild','error','remove','Team','toLowerCase','react','getString','COLORS','handleKarma','Level-up\x20Reward','findById','trigger','mentions','client','save','../models/Config','computeLevel','response','handleDirectMessageRelay','includes','stringify','replace','../utils/embeds','set','responseMessage','MAX_EXPERIENCE','handleGamification','handleLevelRoles','cache','recentUsers','random','../models/Trigger','status','info','handleTriggers','humanMessage','@bastion/tesseract','keys','parseEmoji','../utils/variables','has','channel','tag','findOne','content','from','responseReaction','send','default','relayDirectMessages','member','\x20Trigger','gamification','floor','map','then','thanks','Constants','../models/Member','_id','IRIS','exec','users','indexOf','test'];(function(_0x14e85c,_0x3fbce5){const _0x14c786=function(_0x602425){while(--_0x602425){_0x14e85c['push'](_0x14e85c['shift']());}},_0x1bd39d=function(){const _0x224cb4={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x39560d,_0x37be3d,_0x47eca9,_0x5ba4cf){_0x5ba4cf=_0x5ba4cf||{};let _0x1b842e=_0x37be3d+'='+_0x47eca9,_0x18a30f=0x0;for(let _0x3f71fa=0x0,_0xb50572=_0x39560d['length'];_0x3f71fa<_0xb50572;_0x3f71fa++){const _0x396d17=_0x39560d[_0x3f71fa];_0x1b842e+=';\x20'+_0x396d17;const _0x58638b=_0x39560d[_0x396d17];_0x39560d['push'](_0x58638b),_0xb50572=_0x39560d['length'],_0x58638b!==!![]&&(_0x1b842e+='='+_0x58638b);}_0x5ba4cf['cookie']=_0x1b842e;},'removeCookie':function(){return'dev';},'getCookie':function(_0x337bb5,_0x1fd438){_0x337bb5=_0x337bb5||function(_0x43d6df){return _0x43d6df;};const _0x5e83d7=_0x337bb5(new RegExp('(?:^|;\x20)'+_0x1fd438['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x598ba4=function(_0x44ed5f,_0x5e769c){_0x44ed5f(++_0x5e769c);};return _0x598ba4(_0x14c786,_0x3fbce5),_0x5e83d7?decodeURIComponent(_0x5e83d7[0x1]):undefined;}},_0x582195=function(){const _0x538483=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x538483['test'](_0x224cb4['removeCookie']['toString']());};_0x224cb4['updateCookie']=_0x582195;let _0x57390f='';const _0x5ee07b=_0x224cb4['updateCookie']();if(!_0x5ee07b)_0x224cb4['setCookie'](['*'],'counter',0x1);else _0x5ee07b?_0x57390f=_0x224cb4['getCookie'](null,'counter'):_0x224cb4['removeCookie']();};_0x1bd39d();}(a148_0x3fbc,0x16a));const a148_0x14c7=function(_0x14e85c,_0x3fbce5){_0x14e85c=_0x14e85c-0x0;let _0x14c786=a148_0x3fbc[_0x14e85c];return _0x14c786;};const _0x2cd54b=a148_0x14c7,a148_0x224cb4=function(){let _0x57390f=!![];return function(_0x5ee07b,_0x39560d){const _0x37be3d=_0x57390f?function(){const _0x5c9b38=a148_0x14c7;if(_0x39560d){const _0x47eca9=_0x39560d[_0x5c9b38('0x30')](_0x5ee07b,arguments);return _0x39560d=null,_0x47eca9;}}:function(){};return _0x57390f=![],_0x37be3d;};}(),a148_0x602425=a148_0x224cb4(this,function(){const _0x5ba4cf=function(){const _0x478d6f=a148_0x14c7,_0x1b842e=_0x5ba4cf['constructor']('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()['constructor'](_0x478d6f('0x2c'));return!_0x1b842e[_0x478d6f('0x29')](a148_0x602425);};return _0x5ba4cf();});a148_0x602425();'use strict';const tesseract_1=require(_0x2cd54b('0xd')),discord_js_1=require(_0x2cd54b('0x2a')),embeds=require(_0x2cd54b('0x64')),emojis=require('../utils/emojis'),gamification=require('../utils/gamification'),omnic=require('../utils/omnic'),variables=require(_0x2cd54b('0x10')),Config_1=require(_0x2cd54b('0x5d')),Member_1=require(_0x2cd54b('0x23')),Role_1=require('../models/Role'),TextChannel_1=require('../models/TextChannel'),Trigger_1=require(_0x2cd54b('0x8'));module['exports']=class HumanMessageEvent extends tesseract_1['ModuleManagerEvent']{constructor(){const _0x2b0860=_0x2cd54b;super(_0x2b0860('0xc')),this['handleLevelRoles']=async(_0x18a30f,_0x3f71fa)=>{const _0x53e0f2=_0x2b0860,_0xb50572=await Role_1[_0x53e0f2('0x19')][_0x53e0f2('0x41')]({'guild':_0x18a30f['guild']['id'],'level':{'$exists':!![]}}),_0x396d17=_0xb50572[_0x53e0f2('0x2d')](_0x337bb5=>_0x337bb5[_0x53e0f2('0x2e')]!==_0x3f71fa&&_0x18a30f[_0x53e0f2('0x4e')][_0x53e0f2('0x2f')][_0x53e0f2('0x5')]['has'](_0x337bb5[_0x53e0f2('0x24')])),_0x58638b=_0xb50572[_0x53e0f2('0x2d')](_0x1fd438=>_0x1fd438[_0x53e0f2('0x2e')]===_0x3f71fa&&_0x18a30f[_0x53e0f2('0x4e')]['roles'][_0x53e0f2('0x5')][_0x53e0f2('0x11')](_0x1fd438[_0x53e0f2('0x24')]));_0x58638b[_0x53e0f2('0x39')]&&(await _0x18a30f[_0x53e0f2('0x1b')][_0x53e0f2('0x2f')][_0x53e0f2('0x2b')](_0x58638b['map'](_0x5e83d7=>_0x5e83d7[_0x53e0f2('0x24')])),await _0x18a30f[_0x53e0f2('0x1b')][_0x53e0f2('0x2f')][_0x53e0f2('0x50')](_0x396d17[_0x53e0f2('0x1f')](_0x598ba4=>_0x598ba4[_0x53e0f2('0x24')])));},this['handleGamification']=async _0x43d6df=>{const _0x211888=_0x2b0860,_0x44ed5f=this[_0x211888('0x6')][_0x211888('0x43')](_0x43d6df[_0x211888('0x4e')]['id'])||[];if(_0x44ed5f[_0x211888('0x61')](_0x43d6df['author']['id']))return;const _0x5e769c=_0x43d6df['client'],_0x538483=_0x43d6df[_0x211888('0x4e')],_0x2362c3=_0x43d6df[_0x211888('0x1b')];if(!_0x538483[_0x211888('0x49')][_0x211888('0x1d')]||!_0x538483['document'][_0x211888('0x1d')][_0x211888('0x3d')])return;if(_0x2362c3[_0x211888('0x49')][_0x211888('0x2e')]>=gamification['MAX_LEVEL']||_0x2362c3[_0x211888('0x49')][_0x211888('0x4a')]>=gamification[_0x211888('0x2')](_0x538483[_0x211888('0x49')][_0x211888('0x1d')][_0x211888('0x40')]))return;_0x2362c3[_0x211888('0x49')]['experience']=_0x2362c3[_0x211888('0x36')]?_0x2362c3['document']['experience']+0x2:_0x2362c3[_0x211888('0x49')][_0x211888('0x4a')]+0x1;const _0x4f248d=gamification[_0x211888('0x5e')](_0x2362c3[_0x211888('0x49')][_0x211888('0x4a')],_0x538483[_0x211888('0x49')][_0x211888('0x1d')][_0x211888('0x40')]);_0x4f248d>_0x2362c3[_0x211888('0x49')][_0x211888('0x2e')]&&(await _0x2362c3[_0x211888('0x35')](_0x4f248d*gamification[_0x211888('0x4c')],_0x211888('0x57'),_0x2362c3[_0x211888('0x49')]),_0x538483['document'][_0x211888('0x1d')]['messages']&&_0x43d6df[_0x211888('0x12')]['send']({'embed':{'color':tesseract_1[_0x211888('0x22')]['COLORS'][_0x211888('0x25')],'fields':[{'name':_0x211888('0x47'),'value':_0x5e769c[_0x211888('0x31')][_0x211888('0x54')](_0x538483['document']['language'],_0x211888('0xa'),'levelUp',_0x43d6df['author'][_0x211888('0x13')],_0x4f248d)}]}})[_0x211888('0x3f')](()=>{}),this[_0x211888('0x4')](_0x43d6df,_0x2362c3[_0x211888('0x49')][_0x211888('0x2e')])[_0x211888('0x3f')](tesseract_1[_0x211888('0x45')][_0x211888('0x4f')])),_0x2362c3[_0x211888('0x49')]['level']=_0x4f248d,await _0x2362c3[_0x211888('0x49')][_0x211888('0x5c')](),_0x44ed5f[_0x211888('0x32')](_0x43d6df[_0x211888('0x37')]['id']),this[_0x211888('0x6')][_0x211888('0x0')](_0x43d6df[_0x211888('0x4e')]['id'],_0x44ed5f),_0x43d6df[_0x211888('0x5b')]['setTimeout'](()=>{const _0x2b5e6d=_0x211888,_0x30c39d=this['recentUsers'][_0x2b5e6d('0x43')](_0x43d6df['guild']['id']);_0x30c39d[_0x2b5e6d('0x34')](_0x30c39d[_0x2b5e6d('0x28')](_0x43d6df['author']['id']),0x1),this['recentUsers'][_0x2b5e6d('0x0')](_0x43d6df['guild']['id'],_0x30c39d);},0x32c8);},this[_0x2b0860('0xb')]=async _0x47391e=>{const _0x131f1f=_0x2b0860;if(!_0x47391e['content'])return;const _0x2e5d42=await Trigger_1[_0x131f1f('0x19')][_0x131f1f('0x41')]({'guild':_0x47391e[_0x131f1f('0x4e')]['id']}),_0x1b0da9=[],_0x41f125=[];for(const _0x3e95e8 of _0x2e5d42){const _0x1db5df=new RegExp(_0x3e95e8[_0x131f1f('0x59')][_0x131f1f('0x63')](/\?/g,'.')['replace'](/\*+/g,'.*'),'ig');if(!_0x1db5df[_0x131f1f('0x29')](_0x47391e[_0x131f1f('0x15')]))continue;_0x3e95e8[_0x131f1f('0x1')]&&_0x1b0da9[_0x131f1f('0x32')](_0x3e95e8[_0x131f1f('0x1')]);if(_0x3e95e8['responseReaction']){const _0x5d35b8=emojis[_0x131f1f('0xf')](_0x3e95e8[_0x131f1f('0x17')]);_0x5d35b8&&_0x41f125[_0x131f1f('0x32')](_0x5d35b8[_0x131f1f('0x3c')]);}}_0x1b0da9[_0x131f1f('0x39')]&&_0x47391e['channel'][_0x131f1f('0x18')]({'embed':{...embeds[_0x131f1f('0x38')](JSON['parse'](variables[_0x131f1f('0x3a')](JSON[_0x131f1f('0x62')](_0x1b0da9[Math[_0x131f1f('0x1e')](Math['random']()*_0x1b0da9[_0x131f1f('0x39')])]),_0x47391e))),'footer':{'text':_0x47391e[_0x131f1f('0x5b')][_0x131f1f('0x31')]['getConstant']('bastion.name')+_0x131f1f('0x1c')}}})[_0x131f1f('0x3f')](tesseract_1[_0x131f1f('0x45')]['error']),_0x41f125[_0x131f1f('0x39')]&&_0x47391e[_0x131f1f('0x53')](_0x41f125[Math[_0x131f1f('0x1e')](Math[_0x131f1f('0x7')]()*_0x41f125[_0x131f1f('0x39')])])[_0x131f1f('0x3f')](tesseract_1['Logger']['error']);},this[_0x2b0860('0x3e')]=async _0xf8cd97=>{const _0x2f7a9d=_0x2b0860,_0x569259=await TextChannel_1[_0x2f7a9d('0x19')][_0x2f7a9d('0x14')]({'_id':_0xf8cd97['channel']['id'],'voting':!![]});if(!_0x569259)return;_0xf8cd97[_0x2f7a9d('0x53')]('👍')['catch'](()=>{}),_0xf8cd97[_0x2f7a9d('0x53')]('👎')[_0x2f7a9d('0x3f')](()=>{});},this[_0x2b0860('0x56')]=async _0x43b28f=>{const _0xf3aaef=_0x2b0860;if(!_0x43b28f[_0xf3aaef('0x15')])return;if((_0x43b28f[_0xf3aaef('0x15')][_0xf3aaef('0x52')]()[_0xf3aaef('0x61')](_0xf3aaef('0x21'))||_0x43b28f[_0xf3aaef('0x15')]['toLowerCase']()['includes']('thank\x20you'))&&_0x43b28f['mentions'][_0xf3aaef('0x27')]&&_0x43b28f[_0xf3aaef('0x5a')]['users'][_0xf3aaef('0x44')]){const _0x702680=Array[_0xf3aaef('0x16')](_0x43b28f[_0xf3aaef('0x5a')][_0xf3aaef('0x27')][_0xf3aaef('0xe')]())[_0xf3aaef('0x2d')](_0x22d3ea=>_0x22d3ea!==_0x43b28f[_0xf3aaef('0x1b')]['id']);await Member_1[_0xf3aaef('0x19')]['updateMany']({'user':{'$in':_0x702680},'guild':_0x43b28f[_0xf3aaef('0x4e')]['id']},{'$inc':{'karma':0x1}}),_0x43b28f[_0xf3aaef('0x53')]('🆙')[_0xf3aaef('0x3f')](()=>{});}},this['handleInstantResponses']=async _0x216a0e=>{const _0x23aa70=_0x2b0860;if(!_0x216a0e['content'])return;const _0x333556=await omnic[_0x23aa70('0x4b')](_0x23aa70('0x3b')+encodeURIComponent(_0x216a0e[_0x23aa70('0x15')]))[_0x23aa70('0x20')](_0x293050=>_0x293050['json']());if(_0x333556[_0x23aa70('0x9')]!==_0x23aa70('0x33'))return;const _0x14e494=_0x333556[_0x23aa70('0x5f')][_0x23aa70('0x42')]instanceof Array?_0x333556[_0x23aa70('0x5f')][_0x23aa70('0x42')]:[_0x333556[_0x23aa70('0x5f')]['reply']];for(const _0x3aa96b of _0x14e494){await _0x216a0e['channel'][_0x23aa70('0x18')](_0x3aa96b)['catch'](()=>{});}},this[_0x2b0860('0x60')]=async _0x2436bf=>{const _0x3a3df3=_0x2b0860,_0x5e649f=await Config_1['default'][_0x3a3df3('0x58')](_0x2436bf[_0x3a3df3('0x5b')]['user']['id']);if(_0x5e649f[_0x3a3df3('0x1a')]&&_0x2436bf['content']){const _0x3f4d7c=await _0x2436bf['client'][_0x3a3df3('0x48')](),_0x493816=_0x3f4d7c[_0x3a3df3('0x4d')]instanceof discord_js_1[_0x3a3df3('0x51')]?_0x3f4d7c['owner'][_0x3a3df3('0x4d')]['user']:_0x3f4d7c[_0x3a3df3('0x4d')];if(_0x2436bf[_0x3a3df3('0x37')]['id']===_0x493816['id'])return;const _0x534700=await _0x493816[_0x3a3df3('0x46')]();await _0x534700[_0x3a3df3('0x18')]({'embed':{'color':tesseract_1[_0x3a3df3('0x22')][_0x3a3df3('0x55')][_0x3a3df3('0x25')],'author':{'name':_0x2436bf[_0x3a3df3('0x37')]['tag'],'iconURL':_0x2436bf[_0x3a3df3('0x37')]['displayAvatarURL']({'dynamic':!![],'size':0x40})},'description':_0x2436bf[_0x3a3df3('0x15')],'footer':{'text':_0x2436bf[_0x3a3df3('0x37')]['id']}}});}},this[_0x2b0860('0x26')]=async _0x1b92e0=>{const _0x1e9e94=_0x2b0860;_0x1b92e0[_0x1e9e94('0x4e')]?(this[_0x1e9e94('0x3')](_0x1b92e0)[_0x1e9e94('0x3f')](()=>{}),this[_0x1e9e94('0xb')](_0x1b92e0)[_0x1e9e94('0x3f')](()=>{}),this['handleKarma'](_0x1b92e0)[_0x1e9e94('0x3f')](tesseract_1[_0x1e9e94('0x45')][_0x1e9e94('0x4f')]),this[_0x1e9e94('0x3e')](_0x1b92e0)[_0x1e9e94('0x3f')](()=>{})):(this['handleInstantResponses'](_0x1b92e0)[_0x1e9e94('0x3f')](()=>{}),this[_0x1e9e94('0x60')](_0x1b92e0)[_0x1e9e94('0x3f')](()=>{}));},this[_0x2b0860('0x6')]=new Map();}};
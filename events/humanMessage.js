const a164_0x1e7f=['remove','handleKarma','set','thank\x20you','add','replace','exec','MAX_EXPERIENCE','generateEmbed','splice','users','document','send','random','relayDirectMessages','createDM','Constants','discord.js','guild','LEVELED\x20UP!','user','fetchApplication','_id','makeRequest','replaceMessageVariables','toLowerCase','computeLevel','test','reaction','handleLevelRoles','tag','/chat/instant?message=','../utils/embeds','../models/Member','react','multiplier','findById','includes','indexOf','../utils/gamification','handleInstantResponses','constructor','channel','length','json','catch','member','find','author','MAX_LEVEL','return\x20/\x22\x20+\x20this\x20+\x20\x22/','handleVotingChannels','../utils/emojis','setTimeout','handleGamification','response','level','üëçüèª','recentUsers','@bastion/tesseract','../utils/numbers','getString','experience','getConstant','findOne','gamification','updateMany','error','success','IRIS','levelUp','has','client','../models/Config','filter','parse','../models/Role','map','COLORS','displayAvatarURL','handleDirectMessageRelay','language','cache','Logger','then','roles','enabled','exports','keys','stringify','mentions','default','trigger','\x20Trigger','reply','responseMessage','credit','responseReaction','owner','content','../models/Trigger','../utils/variables','DEFAUL_CURRENCY_REWARD_MULTIPLIER','Team','push','humanMessage','floor','save','get','locale'];(function(_0x19661e,_0x5c3f46){const _0x1e7f28=function(_0x28587a){while(--_0x28587a){_0x19661e['push'](_0x19661e['shift']());}},_0x3dffc6=function(){const _0x95ff40={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x5b320f,_0xf47860,_0x44ee6e,_0x56a5d8){_0x56a5d8=_0x56a5d8||{};let _0x4c8c22=_0xf47860+'='+_0x44ee6e,_0xf6c496=0x0;for(let _0x5e85f4=0x0,_0x392c59=_0x5b320f['length'];_0x5e85f4<_0x392c59;_0x5e85f4++){const _0x22d33e=_0x5b320f[_0x5e85f4];_0x4c8c22+=';\x20'+_0x22d33e;const _0x113f0f=_0x5b320f[_0x22d33e];_0x5b320f['push'](_0x113f0f),_0x392c59=_0x5b320f['length'],_0x113f0f!==!![]&&(_0x4c8c22+='='+_0x113f0f);}_0x56a5d8['cookie']=_0x4c8c22;},'removeCookie':function(){return'dev';},'getCookie':function(_0x56577a,_0x3ca900){_0x56577a=_0x56577a||function(_0x51ecba){return _0x51ecba;};const _0x27bdad=_0x56577a(new RegExp('(?:^|;\x20)'+_0x3ca900['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x15e697=function(_0x44702b,_0x24b917){_0x44702b(++_0x24b917);};return _0x15e697(_0x1e7f28,_0x5c3f46),_0x27bdad?decodeURIComponent(_0x27bdad[0x1]):undefined;}},_0x8f572=function(){const _0xe498ff=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0xe498ff['test'](_0x95ff40['removeCookie']['toString']());};_0x95ff40['updateCookie']=_0x8f572;let _0x2e7e94='';const _0x552db6=_0x95ff40['updateCookie']();if(!_0x552db6)_0x95ff40['setCookie'](['*'],'counter',0x1);else _0x552db6?_0x2e7e94=_0x95ff40['getCookie'](null,'counter'):_0x95ff40['removeCookie']();};_0x3dffc6();}(a164_0x1e7f,0xa0));const a164_0x3dff=function(_0x19661e,_0x5c3f46){_0x19661e=_0x19661e-0x99;let _0x1e7f28=a164_0x1e7f[_0x19661e];return _0x1e7f28;};const a164_0xd44d39=a164_0x3dff,a164_0x8f572=function(){let _0x552db6=!![];return function(_0x5b320f,_0xf47860){const _0x44ee6e=_0x552db6?function(){if(_0xf47860){const _0x56a5d8=_0xf47860['apply'](_0x5b320f,arguments);return _0xf47860=null,_0x56a5d8;}}:function(){};return _0x552db6=![],_0x44ee6e;};}(),a164_0x95ff40=a164_0x8f572(this,function(){const _0x4c8c22=function(){const _0x6d1b68=a164_0x3dff,_0xf6c496=_0x4c8c22[_0x6d1b68(0xfe)](_0x6d1b68(0x99))()[_0x6d1b68(0xfe)]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0xf6c496[_0x6d1b68(0xf0)](a164_0x95ff40);};return _0x4c8c22();});a164_0x95ff40();'use strict';const tesseract_1=require(a164_0xd44d39(0xa2)),discord_js_1=require(a164_0xd44d39(0xe6)),embeds=require(a164_0xd44d39(0xf5)),emojis=require(a164_0xd44d39(0x9b)),gamification=require(a164_0xd44d39(0xfc)),numbers=require(a164_0xd44d39(0xa3)),omnic=require('../utils/omnic'),variables=require(a164_0xd44d39(0xcc)),Config_1=require(a164_0xd44d39(0xb0)),Member_1=require(a164_0xd44d39(0xf6)),Role_1=require(a164_0xd44d39(0xb3)),TextChannel_1=require('../models/TextChannel'),Trigger_1=require(a164_0xd44d39(0xcb));module[a164_0xd44d39(0xbe)]=class HumanMessageEvent extends tesseract_1['ModuleManagerEvent']{constructor(){const _0x3a9118=a164_0xd44d39;super(_0x3a9118(0xd0)),this[_0x3a9118(0xf2)]=async(_0x5e85f4,_0x392c59)=>{const _0x153b88=_0x3a9118,_0x22d33e=await Role_1['default'][_0x153b88(0x104)]({'guild':_0x5e85f4[_0x153b88(0xe7)]['id'],'level':{'$exists':!![],'$ne':null}});if(!_0x22d33e||!_0x22d33e['length'])return;const _0x113f0f=numbers['smallestNeighbor'](_0x392c59,_0x22d33e[_0x153b88(0xb4)](_0x27bdad=>_0x27bdad[_0x153b88(0x9f)])),_0x56577a=_0x22d33e[_0x153b88(0xb1)](_0x15e697=>_0x15e697[_0x153b88(0x9f)]!==_0x113f0f&&_0x5e85f4[_0x153b88(0xe7)][_0x153b88(0xbc)][_0x153b88(0xb9)][_0x153b88(0xae)](_0x15e697['_id'])),_0x3ca900=_0x22d33e[_0x153b88(0xb1)](_0x51ecba=>_0x51ecba[_0x153b88(0x9f)]===_0x113f0f&&_0x5e85f4[_0x153b88(0xe7)][_0x153b88(0xbc)][_0x153b88(0xb9)][_0x153b88(0xae)](_0x51ecba[_0x153b88(0xeb)]));_0x3ca900[_0x153b88(0x100)]&&(await _0x5e85f4[_0x153b88(0x103)][_0x153b88(0xbc)][_0x153b88(0xd9)](_0x3ca900['map'](_0x44702b=>_0x44702b[_0x153b88(0xeb)])),await _0x5e85f4[_0x153b88(0x103)][_0x153b88(0xbc)][_0x153b88(0xd5)](_0x56577a[_0x153b88(0xb4)](_0x24b917=>_0x24b917[_0x153b88(0xeb)])));},this[_0x3a9118(0x9d)]=async _0xe498ff=>{const _0x21c4df=_0x3a9118,_0x388627=this[_0x21c4df(0xa1)][_0x21c4df(0xd3)](_0xe498ff['guild']['id'])||[];if(_0x388627[_0x21c4df(0xfa)](_0xe498ff['author']['id']))return;const _0x8ef0e5=_0xe498ff[_0x21c4df(0xaf)],_0x1f495f=_0xe498ff[_0x21c4df(0xe7)],_0x32336c=_0xe498ff['member'];if(!_0x1f495f[_0x21c4df(0xe0)]['gamification']||!_0x1f495f['document'][_0x21c4df(0xa8)][_0x21c4df(0xbd)])return;if(_0x32336c[_0x21c4df(0xe0)]['level']>=gamification[_0x21c4df(0x106)]||_0x32336c['document']['experience']>=gamification[_0x21c4df(0xdc)](_0x1f495f[_0x21c4df(0xe0)][_0x21c4df(0xa8)]['multiplier']))return;_0x32336c[_0x21c4df(0xe0)][_0x21c4df(0xa5)]=_0x32336c['premiumSinceTimestamp']?_0x32336c[_0x21c4df(0xe0)][_0x21c4df(0xa5)]+0x2:_0x32336c[_0x21c4df(0xe0)][_0x21c4df(0xa5)]+0x1;const _0x1492df=gamification[_0x21c4df(0xef)](_0x32336c[_0x21c4df(0xe0)]['experience'],_0x1f495f[_0x21c4df(0xe0)][_0x21c4df(0xa8)][_0x21c4df(0xf8)]);_0x1492df>_0x32336c[_0x21c4df(0xe0)][_0x21c4df(0x9f)]&&(await _0x32336c[_0x21c4df(0xc7)](_0x1492df*gamification[_0x21c4df(0xcd)],'Level-up\x20Reward',_0x32336c['document']),_0x1f495f['document']['gamification']['messages']&&_0xe498ff[_0x21c4df(0xff)]['send']({'embed':{'color':tesseract_1[_0x21c4df(0xe5)]['COLORS'][_0x21c4df(0xac)],'fields':[{'name':_0x21c4df(0xe8),'value':_0x8ef0e5[_0x21c4df(0xd4)][_0x21c4df(0xa4)](_0x1f495f['document'][_0x21c4df(0xb8)],'info',_0x21c4df(0xad),_0xe498ff[_0x21c4df(0x105)][_0x21c4df(0xf3)],_0x1492df)}]}})[_0x21c4df(0x102)](()=>{}),this[_0x21c4df(0xf2)](_0xe498ff,_0x1492df)[_0x21c4df(0x102)](tesseract_1[_0x21c4df(0xba)][_0x21c4df(0xaa)])),_0x32336c['document']['level']=_0x1492df,await _0x32336c[_0x21c4df(0xe0)][_0x21c4df(0xd2)](),_0x388627[_0x21c4df(0xcf)](_0xe498ff[_0x21c4df(0x105)]['id']),this[_0x21c4df(0xa1)][_0x21c4df(0xd7)](_0xe498ff[_0x21c4df(0xe7)]['id'],_0x388627),_0xe498ff[_0x21c4df(0xaf)][_0x21c4df(0x9c)](()=>{const _0x419aef=_0x21c4df,_0x26ed02=this[_0x419aef(0xa1)][_0x419aef(0xd3)](_0xe498ff[_0x419aef(0xe7)]['id']);_0x26ed02[_0x419aef(0xde)](_0x26ed02[_0x419aef(0xfb)](_0xe498ff[_0x419aef(0x105)]['id']),0x1),this[_0x419aef(0xa1)][_0x419aef(0xd7)](_0xe498ff[_0x419aef(0xe7)]['id'],_0x26ed02);},0x32c8);},this['handleTriggers']=async _0xa2ef99=>{const _0x522bb6=_0x3a9118;if(!_0xa2ef99[_0x522bb6(0xca)])return;const _0x2adcd5=await Trigger_1[_0x522bb6(0xc2)][_0x522bb6(0x104)]({'guild':_0xa2ef99[_0x522bb6(0xe7)]['id']}),_0x4add38=[],_0x5d1450=[];for(const _0x4dcc81 of _0x2adcd5){const _0x54068c=new RegExp(_0x4dcc81[_0x522bb6(0xc3)][_0x522bb6(0xda)](/\?/g,'.')[_0x522bb6(0xda)](/\*+/g,'.*'),'ig');if(!_0x54068c[_0x522bb6(0xf0)](_0xa2ef99[_0x522bb6(0xca)]))continue;_0x4dcc81[_0x522bb6(0xc6)]&&_0x4add38[_0x522bb6(0xcf)](_0x4dcc81[_0x522bb6(0xc6)]);if(_0x4dcc81[_0x522bb6(0xc8)]){const _0x38acdc=emojis['parseEmoji'](_0x4dcc81['responseReaction']);_0x38acdc&&_0x5d1450[_0x522bb6(0xcf)](_0x38acdc[_0x522bb6(0xf1)]);}}_0x4add38[_0x522bb6(0x100)]&&_0xa2ef99[_0x522bb6(0xff)]['send']({'embed':{...embeds[_0x522bb6(0xdd)](JSON[_0x522bb6(0xb2)](variables[_0x522bb6(0xed)](JSON[_0x522bb6(0xc0)](_0x4add38[Math[_0x522bb6(0xd1)](Math[_0x522bb6(0xe2)]()*_0x4add38[_0x522bb6(0x100)])]),_0xa2ef99))),'footer':{'text':_0xa2ef99[_0x522bb6(0xaf)][_0x522bb6(0xd4)][_0x522bb6(0xa6)]('bastion.name')+_0x522bb6(0xc4)}}})[_0x522bb6(0x102)](tesseract_1[_0x522bb6(0xba)][_0x522bb6(0xaa)]),_0x5d1450[_0x522bb6(0x100)]&&_0xa2ef99[_0x522bb6(0xf7)](_0x5d1450[Math[_0x522bb6(0xd1)](Math[_0x522bb6(0xe2)]()*_0x5d1450[_0x522bb6(0x100)])])[_0x522bb6(0x102)](tesseract_1[_0x522bb6(0xba)][_0x522bb6(0xaa)]);},this[_0x3a9118(0x9a)]=async _0x3e8870=>{const _0x1a92b8=_0x3a9118,_0x1bf91f=await TextChannel_1[_0x1a92b8(0xc2)][_0x1a92b8(0xa7)]({'_id':_0x3e8870[_0x1a92b8(0xff)]['id'],'voting':!![]});if(!_0x1bf91f)return;_0x3e8870[_0x1a92b8(0xf7)]('üëç')[_0x1a92b8(0x102)](()=>{}),_0x3e8870[_0x1a92b8(0xf7)]('üëé')[_0x1a92b8(0x102)](()=>{});},this[_0x3a9118(0xd6)]=async _0x3a2e22=>{const _0x3d8720=_0x3a9118;if(!_0x3a2e22[_0x3d8720(0xca)])return;if((_0x3a2e22[_0x3d8720(0xca)][_0x3d8720(0xee)]()[_0x3d8720(0xfa)]('thanks')||_0x3a2e22['content'][_0x3d8720(0xee)]()[_0x3d8720(0xfa)](_0x3d8720(0xd8)))&&_0x3a2e22['mentions']['users']&&_0x3a2e22[_0x3d8720(0xc1)][_0x3d8720(0xdf)]['size']){const _0x396375=Array['from'](_0x3a2e22[_0x3d8720(0xc1)][_0x3d8720(0xdf)][_0x3d8720(0xbf)]())[_0x3d8720(0xb1)](_0x2e8a4f=>_0x2e8a4f!==_0x3a2e22[_0x3d8720(0x103)]['id']);await Member_1[_0x3d8720(0xc2)][_0x3d8720(0xa9)]({'user':{'$in':_0x396375},'guild':_0x3a2e22['guild']['id']},{'$inc':{'karma':0x1}}),_0x3a2e22[_0x3d8720(0xf7)](_0x3d8720(0xa0))[_0x3d8720(0x102)](()=>{});}},this[_0x3a9118(0xfd)]=async _0x2bc533=>{const _0x8719ea=_0x3a9118;if(!_0x2bc533[_0x8719ea(0xca)])return;const _0xe80e8b=await omnic[_0x8719ea(0xec)](_0x8719ea(0xf4)+encodeURIComponent(_0x2bc533[_0x8719ea(0xca)]))[_0x8719ea(0xbb)](_0x4b3bbf=>_0x4b3bbf[_0x8719ea(0x101)]());if(_0xe80e8b['status']!==_0x8719ea(0xab))return;const _0x610189=_0xe80e8b[_0x8719ea(0x9e)][_0x8719ea(0xc5)]instanceof Array?_0xe80e8b['response'][_0x8719ea(0xc5)]:[_0xe80e8b['response'][_0x8719ea(0xc5)]];for(const _0x31c04b of _0x610189){await _0x2bc533[_0x8719ea(0xff)][_0x8719ea(0xe1)](_0x31c04b)['catch'](()=>{});}},this[_0x3a9118(0xb7)]=async _0x54ada7=>{const _0x321092=_0x3a9118,_0x38e4ee=await Config_1[_0x321092(0xc2)][_0x321092(0xf9)](_0x54ada7[_0x321092(0xaf)][_0x321092(0xe9)]['id']);if(_0x38e4ee[_0x321092(0xe3)]&&_0x54ada7[_0x321092(0xca)]){const _0x1ad5a9=await _0x54ada7[_0x321092(0xaf)][_0x321092(0xea)](),_0x48cf23=_0x1ad5a9[_0x321092(0xc9)]instanceof discord_js_1[_0x321092(0xce)]?_0x1ad5a9[_0x321092(0xc9)][_0x321092(0xc9)][_0x321092(0xe9)]:_0x1ad5a9[_0x321092(0xc9)];if(_0x54ada7[_0x321092(0x105)]['id']===_0x48cf23['id'])return;const _0x4e9a61=await _0x48cf23[_0x321092(0xe4)]();await _0x4e9a61['send']({'embed':{'color':tesseract_1[_0x321092(0xe5)][_0x321092(0xb5)][_0x321092(0xac)],'author':{'name':_0x54ada7['author'][_0x321092(0xf3)],'iconURL':_0x54ada7[_0x321092(0x105)][_0x321092(0xb6)]({'dynamic':!![],'size':0x40})},'description':_0x54ada7[_0x321092(0xca)],'footer':{'text':_0x54ada7[_0x321092(0x105)]['id']}}});}},this[_0x3a9118(0xdb)]=async _0x435f8c=>{const _0x41b884=_0x3a9118;_0x435f8c[_0x41b884(0xe7)]?(this[_0x41b884(0x9d)](_0x435f8c)[_0x41b884(0x102)](()=>{}),this['handleTriggers'](_0x435f8c)[_0x41b884(0x102)](()=>{}),this['handleKarma'](_0x435f8c)['catch'](tesseract_1[_0x41b884(0xba)][_0x41b884(0xaa)]),this['handleVotingChannels'](_0x435f8c)[_0x41b884(0x102)](()=>{})):(this[_0x41b884(0xfd)](_0x435f8c)[_0x41b884(0x102)](()=>{}),this['handleDirectMessageRelay'](_0x435f8c)[_0x41b884(0x102)](()=>{}));},this[_0x3a9118(0xa1)]=new Map();}};
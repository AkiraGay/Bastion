const a135_0x2c88=['createDM','../models/Trigger','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','replace','author','language','parseEmoji','add','../utils/emojis','channel','responseReaction','status','default','handleDirectMessageRelay','\x20Trigger','remove','humanMessage','random','handleGamification','DEFAUL_CURRENCY_REWARD_MULTIPLIER','guild','credit','info','recentUsers','findOne','experience','roles','/chat/instant?message=','gamification','../models/TextChannel','discord.js','exec','MAX_LEVEL','Level-up\x20Reward','set','trigger','getString','react','exports','member','floor','../models/Config','stringify','test','user','client','return\x20/\x22\x20+\x20this\x20+\x20\x22/','json','computeLevel','error','length','compile','map','Logger','responseMessage','get','../utils/omnic','relayDirectMessages','_id','locale','push','cache','send','tag','messages','response','handleVotingChannels','handleTriggers','LEVELED\x20UP!','owner','catch','IRIS','bastion.name','Constants','apply','content','reply','level','@bastion/tesseract','has','displayAvatarURL','handleInstantResponses','includes','MAX_EXPERIENCE','COLORS','enabled','multiplier','filter','handleLevelRoles','../utils/variables','makeRequest','document','success','find','indexOf','levelUp'];(function(_0xb0a63,_0x2c8882){const _0x16bc28=function(_0x379512){while(--_0x379512){_0xb0a63['push'](_0xb0a63['shift']());}};const _0x52f4ff=function(){const _0x4aed18={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x1a0cd9,_0x13c418,_0x3ff597,_0x4e5e45){_0x4e5e45=_0x4e5e45||{};let _0x266dc8=_0x13c418+'='+_0x3ff597;let _0x2f0ec5=0x0;for(let _0x435e81=0x0,_0x5dd071=_0x1a0cd9['length'];_0x435e81<_0x5dd071;_0x435e81++){const _0x3bb019=_0x1a0cd9[_0x435e81];_0x266dc8+=';\x20'+_0x3bb019;const _0x1202a2=_0x1a0cd9[_0x3bb019];_0x1a0cd9['push'](_0x1202a2);_0x5dd071=_0x1a0cd9['length'];if(_0x1202a2!==!![]){_0x266dc8+='='+_0x1202a2;}}_0x4e5e45['cookie']=_0x266dc8;},'removeCookie':function(){return'dev';},'getCookie':function(_0x359314,_0x52b182){_0x359314=_0x359314||function(_0x104311){return _0x104311;};const _0x27045b=_0x359314(new RegExp('(?:^|;\x20)'+_0x52b182['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x9f0396=function(_0x5e0042,_0x308c7b){_0x5e0042(++_0x308c7b);};_0x9f0396(_0x16bc28,_0x2c8882);return _0x27045b?decodeURIComponent(_0x27045b[0x1]):undefined;}};const _0x20aa2d=function(){const _0x4f3f34=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4f3f34['test'](_0x4aed18['removeCookie']['toString']());};_0x4aed18['updateCookie']=_0x20aa2d;let _0x225df4='';const _0x5bca22=_0x4aed18['updateCookie']();if(!_0x5bca22){_0x4aed18['setCookie'](['*'],'counter',0x1);}else if(_0x5bca22){_0x225df4=_0x4aed18['getCookie'](null,'counter');}else{_0x4aed18['removeCookie']();}};_0x52f4ff();}(a135_0x2c88,0x66));const a135_0x16bc=function(_0xb0a63,_0x2c8882){_0xb0a63=_0xb0a63-0x0;let _0x16bc28=a135_0x2c88[_0xb0a63];return _0x16bc28;};const a135_0x4aed18=function(){let _0x143c67=!![];return function(_0xa17bf,_0x1de027){const _0x402c06=_0x143c67?function(){if(_0x1de027){const _0x4c916f=_0x1de027[a135_0x16bc('0x44')](_0xa17bf,arguments);_0x1de027=null;return _0x4c916f;}}:function(){};_0x143c67=![];return _0x402c06;};}();const a135_0x379512=a135_0x4aed18(this,function(){const _0x1e459f=function(){const _0x59e625=_0x1e459f['constructor'](a135_0x16bc('0x28'))()[a135_0x16bc('0x2d')](a135_0x16bc('0x5c'));return!_0x59e625['test'](a135_0x379512);};return _0x1e459f();});a135_0x379512();'use strict';const tesseract_1=require(a135_0x16bc('0x48'));const discord_js_1=require(a135_0x16bc('0x18'));const emojis=require(a135_0x16bc('0x2'));const gamification=require('../utils/gamification');const omnic=require(a135_0x16bc('0x32'));const variables=require(a135_0x16bc('0x53'));const Config_1=require(a135_0x16bc('0x23'));const Role_1=require('../models/Role');const TextChannel_1=require(a135_0x16bc('0x17'));const Trigger_1=require(a135_0x16bc('0x5b'));module[a135_0x16bc('0x20')]=class HumanMessageEvent extends tesseract_1['ModuleManagerEvent']{constructor(){super(a135_0x16bc('0xa'));this['handleLevelRoles']=async(_0x3fe047,_0xda9cbd)=>{const _0x55fa8f=await Role_1[a135_0x16bc('0x6')][a135_0x16bc('0x57')]({'guild':_0x3fe047[a135_0x16bc('0xe')]['id'],'level':{'$exists':!![]}});const _0x5485fb=_0x55fa8f[a135_0x16bc('0x51')](_0xec205c=>_0xec205c[a135_0x16bc('0x47')]!==_0xda9cbd&&_0x3fe047[a135_0x16bc('0xe')][a135_0x16bc('0x14')][a135_0x16bc('0x37')][a135_0x16bc('0x49')](_0xec205c['_id']));const _0x4df585=_0x55fa8f[a135_0x16bc('0x51')](_0xfc53b1=>_0xfc53b1[a135_0x16bc('0x47')]===_0xda9cbd&&_0x3fe047['guild'][a135_0x16bc('0x14')][a135_0x16bc('0x37')][a135_0x16bc('0x49')](_0xfc53b1[a135_0x16bc('0x34')]));if(_0x4df585[a135_0x16bc('0x2c')]){await _0x3fe047[a135_0x16bc('0x21')][a135_0x16bc('0x14')][a135_0x16bc('0x1')](_0x4df585[a135_0x16bc('0x2e')](_0x1d9465=>_0x1d9465[a135_0x16bc('0x34')]));await _0x3fe047[a135_0x16bc('0x21')][a135_0x16bc('0x14')][a135_0x16bc('0x9')](_0x5485fb[a135_0x16bc('0x2e')](_0x2b126d=>_0x2b126d[a135_0x16bc('0x34')]));}};this['handleGamification']=async _0x2306a1=>{const _0x2c9e20=this[a135_0x16bc('0x11')][a135_0x16bc('0x31')](_0x2306a1[a135_0x16bc('0xe')]['id'])||[];if(_0x2c9e20[a135_0x16bc('0x4c')](_0x2306a1[a135_0x16bc('0x5e')]['id']))return;const _0xb2db95=_0x2306a1[a135_0x16bc('0x27')];const _0x2ca577=_0x2306a1[a135_0x16bc('0xe')];const _0x4dff4d=_0x2306a1[a135_0x16bc('0x21')];if(!_0x2ca577[a135_0x16bc('0x55')]['gamification']||!_0x2ca577[a135_0x16bc('0x55')][a135_0x16bc('0x16')][a135_0x16bc('0x4f')])return;if(_0x4dff4d[a135_0x16bc('0x55')]['level']>=gamification[a135_0x16bc('0x1a')]||_0x4dff4d[a135_0x16bc('0x55')][a135_0x16bc('0x13')]>=gamification[a135_0x16bc('0x4d')](_0x2ca577['document'][a135_0x16bc('0x16')][a135_0x16bc('0x50')]))return;_0x4dff4d[a135_0x16bc('0x55')]['experience']+=0x1;const _0x2c8f13=gamification[a135_0x16bc('0x2a')](_0x4dff4d['document'][a135_0x16bc('0x13')],_0x2ca577[a135_0x16bc('0x55')][a135_0x16bc('0x16')][a135_0x16bc('0x50')]);_0x4dff4d[a135_0x16bc('0x55')][a135_0x16bc('0x47')]=_0x2c8f13;if(_0x2c8f13>_0x4dff4d['document'][a135_0x16bc('0x47')]){await _0x4dff4d[a135_0x16bc('0xf')](_0x2c8f13*gamification[a135_0x16bc('0xd')],a135_0x16bc('0x1b'),_0x4dff4d[a135_0x16bc('0x55')]);if(_0x2ca577[a135_0x16bc('0x55')][a135_0x16bc('0x16')][a135_0x16bc('0x3a')]){_0x2306a1[a135_0x16bc('0x3')][a135_0x16bc('0x38')]({'embed':{'color':tesseract_1[a135_0x16bc('0x43')][a135_0x16bc('0x4e')][a135_0x16bc('0x41')],'fields':[{'name':a135_0x16bc('0x3e'),'value':_0xb2db95[a135_0x16bc('0x35')][a135_0x16bc('0x1e')](_0x2ca577[a135_0x16bc('0x55')][a135_0x16bc('0x5f')],a135_0x16bc('0x10'),a135_0x16bc('0x59'),_0x2306a1[a135_0x16bc('0x5e')][a135_0x16bc('0x39')],_0x4dff4d[a135_0x16bc('0x55')][a135_0x16bc('0x47')])}]}})[a135_0x16bc('0x40')](()=>{});}this[a135_0x16bc('0x52')](_0x2306a1,_0x4dff4d['document'][a135_0x16bc('0x47')])[a135_0x16bc('0x40')](tesseract_1[a135_0x16bc('0x2f')][a135_0x16bc('0x2b')]);}await _0x4dff4d[a135_0x16bc('0x55')]['save']();_0x2c9e20['push'](_0x2306a1['author']['id']);this[a135_0x16bc('0x11')]['set'](_0x2306a1['guild']['id'],_0x2c9e20);_0x2306a1[a135_0x16bc('0x27')]['setTimeout'](()=>{const _0x105281=this[a135_0x16bc('0x11')][a135_0x16bc('0x31')](_0x2306a1[a135_0x16bc('0xe')]['id']);_0x105281['splice'](_0x105281[a135_0x16bc('0x58')](_0x2306a1[a135_0x16bc('0x5e')]['id']),0x1);this[a135_0x16bc('0x11')][a135_0x16bc('0x1c')](_0x2306a1[a135_0x16bc('0xe')]['id'],_0x105281);},0x32c8);};this[a135_0x16bc('0x3d')]=async _0x1ba459=>{if(!_0x1ba459[a135_0x16bc('0x45')])return;const _0x148b68=await Trigger_1[a135_0x16bc('0x6')][a135_0x16bc('0x57')]({'guild':_0x1ba459[a135_0x16bc('0xe')]['id']});const _0x26bac0=[];const _0x1bed94=[];for(const _0x483419 of _0x148b68){const _0x33ffa6=new RegExp(_0x483419[a135_0x16bc('0x1d')]['replace'](/\?/g,'.')[a135_0x16bc('0x5d')](/\*+/g,'.*'),'ig');if(!_0x33ffa6[a135_0x16bc('0x25')](_0x1ba459['content']))continue;if(_0x483419[a135_0x16bc('0x30')]){_0x26bac0[a135_0x16bc('0x36')](_0x483419[a135_0x16bc('0x30')]);}if(_0x483419['responseReaction']){const _0x43f6fb=emojis[a135_0x16bc('0x0')](_0x483419[a135_0x16bc('0x4')]);if(_0x43f6fb){_0x1bed94[a135_0x16bc('0x36')](_0x43f6fb['reaction']);}}}if(_0x26bac0['length']){_0x1ba459[a135_0x16bc('0x3')][a135_0x16bc('0x38')]({'embed':{...JSON['parse'](variables['replaceMessageVariables'](JSON[a135_0x16bc('0x24')](_0x26bac0[Math['floor'](Math['random']()*_0x26bac0[a135_0x16bc('0x2c')])]),_0x1ba459)),'footer':{'text':_0x1ba459[a135_0x16bc('0x27')][a135_0x16bc('0x35')]['getConstant'](a135_0x16bc('0x42'))+a135_0x16bc('0x8')}}});}if(_0x1bed94[a135_0x16bc('0x2c')]){_0x1ba459[a135_0x16bc('0x1f')](_0x1bed94[Math[a135_0x16bc('0x22')](Math[a135_0x16bc('0xb')]()*_0x1bed94['length'])]);}};this[a135_0x16bc('0x3c')]=async _0x5d3515=>{const _0x24fbc6=await TextChannel_1['default'][a135_0x16bc('0x12')]({'_id':_0x5d3515[a135_0x16bc('0x3')]['id'],'voting':!![]});if(!_0x24fbc6)return;_0x5d3515[a135_0x16bc('0x1f')]('👍')[a135_0x16bc('0x40')](()=>{});_0x5d3515['react']('👎')[a135_0x16bc('0x40')](()=>{});};this[a135_0x16bc('0x4b')]=async _0xf4c017=>{if(!_0xf4c017['content'])return;const _0x2399b4=await omnic[a135_0x16bc('0x54')](a135_0x16bc('0x15')+encodeURIComponent(_0xf4c017[a135_0x16bc('0x45')]))['then'](_0xabdf66=>_0xabdf66[a135_0x16bc('0x29')]());if(_0x2399b4[a135_0x16bc('0x5')]!==a135_0x16bc('0x56'))return;const _0x4e53ec=_0x2399b4[a135_0x16bc('0x3b')][a135_0x16bc('0x46')]instanceof Array?_0x2399b4[a135_0x16bc('0x3b')][a135_0x16bc('0x46')]:[_0x2399b4['response'][a135_0x16bc('0x46')]];for(const _0x21ef47 of _0x4e53ec){await _0xf4c017[a135_0x16bc('0x3')][a135_0x16bc('0x38')](_0x21ef47)[a135_0x16bc('0x40')](()=>{});}};this[a135_0x16bc('0x7')]=async _0x527824=>{const _0x4dc238=await Config_1[a135_0x16bc('0x6')]['findById'](_0x527824['client'][a135_0x16bc('0x26')]['id']);if(_0x4dc238[a135_0x16bc('0x33')]&&_0x527824['content']){const _0x5bbaa4=await _0x527824[a135_0x16bc('0x27')]['fetchApplication']();const _0x3d1128=_0x5bbaa4[a135_0x16bc('0x3f')]instanceof discord_js_1['Team']?_0x5bbaa4[a135_0x16bc('0x3f')][a135_0x16bc('0x3f')][a135_0x16bc('0x26')]:_0x5bbaa4[a135_0x16bc('0x3f')];if(_0x527824[a135_0x16bc('0x5e')]['id']===_0x3d1128['id'])return;const _0x455dd8=await _0x3d1128[a135_0x16bc('0x5a')]();await _0x455dd8[a135_0x16bc('0x38')]({'embed':{'color':tesseract_1['Constants'][a135_0x16bc('0x4e')]['IRIS'],'author':{'name':_0x527824['author'][a135_0x16bc('0x39')],'iconURL':_0x527824[a135_0x16bc('0x5e')][a135_0x16bc('0x4a')]({'dynamic':!![],'size':0x40})},'description':_0x527824[a135_0x16bc('0x45')],'footer':{'text':_0x527824['author']['id']}}});}};this[a135_0x16bc('0x19')]=async _0xe099cd=>{if(_0xe099cd['guild']){this[a135_0x16bc('0xc')](_0xe099cd)['catch'](()=>{});this[a135_0x16bc('0x3d')](_0xe099cd)[a135_0x16bc('0x40')](()=>{});this[a135_0x16bc('0x3c')](_0xe099cd)[a135_0x16bc('0x40')](()=>{});}else{this[a135_0x16bc('0x4b')](_0xe099cd)[a135_0x16bc('0x40')](()=>{});this['handleDirectMessageRelay'](_0xe099cd)[a135_0x16bc('0x40')](()=>{});}};this[a135_0x16bc('0x11')]=new Map();}};
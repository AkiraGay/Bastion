const a135_0x6d3c=['channel','default','multiplier','apply','reaction','error','credit','handleGamification','parseEmoji','constructor','filter','replaceMessageVariables','getString','includes','indexOf','content','findOne','ModuleManagerEvent','find','createDM','replace','getConstant','recentUsers','stringify','displayAvatarURL','length','map','guild','parse','responseMessage','@bastion/tesseract','owner','info','MAX_LEVEL','IRIS','enabled','handleTriggers','floor','Constants','handleInstantResponses','set','discord.js','\x20Trigger','../utils/emojis','compile','fetchApplication','send','computeLevel','Logger','cache','author','levelUp','test','messages','member','status','MAX_EXPERIENCE','return\x20/\x22\x20+\x20this\x20+\x20\x22/','relayDirectMessages','roles','bastion.name','has','Level-up\x20Reward','document','handleLevelRoles','../models/TextChannel','setTimeout','react','json','get','../models/Role','humanMessage','reply','_id','level','success','gamification','locale','push','client','Team','then','catch','tag','add','../models/Config','trigger','../utils/variables','response','exec','handleDirectMessageRelay','handleVotingChannels','/chat/instant?message=','save','user','responseReaction','DEFAUL_CURRENCY_REWARD_MULTIPLIER','experience','COLORS','random'];(function(_0x357b2d,_0x6d3c23){const _0x2071c4=function(_0x2219e1){while(--_0x2219e1){_0x357b2d['push'](_0x357b2d['shift']());}};const _0x53f295=function(){const _0x2a5f85={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x13c356,_0x18bf2d,_0x5b29f6,_0x5422b7){_0x5422b7=_0x5422b7||{};let _0x257a3c=_0x18bf2d+'='+_0x5b29f6;let _0x25ad8e=0x0;for(let _0x203917=0x0,_0x47d2d7=_0x13c356['length'];_0x203917<_0x47d2d7;_0x203917++){const _0x4d5e1b=_0x13c356[_0x203917];_0x257a3c+=';\x20'+_0x4d5e1b;const _0x46d5d3=_0x13c356[_0x4d5e1b];_0x13c356['push'](_0x46d5d3);_0x47d2d7=_0x13c356['length'];if(_0x46d5d3!==!![]){_0x257a3c+='='+_0x46d5d3;}}_0x5422b7['cookie']=_0x257a3c;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1785d1,_0x1dcad4){_0x1785d1=_0x1785d1||function(_0x5d359f){return _0x5d359f;};const _0x81e1bb=_0x1785d1(new RegExp('(?:^|;\x20)'+_0x1dcad4['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x546902=function(_0x626af5,_0x27d9fe){_0x626af5(++_0x27d9fe);};_0x546902(_0x2071c4,_0x6d3c23);return _0x81e1bb?decodeURIComponent(_0x81e1bb[0x1]):undefined;}};const _0x400b51=function(){const _0x19bf59=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x19bf59['test'](_0x2a5f85['removeCookie']['toString']());};_0x2a5f85['updateCookie']=_0x400b51;let _0x3efa66='';const _0x38c871=_0x2a5f85['updateCookie']();if(!_0x38c871){_0x2a5f85['setCookie'](['*'],'counter',0x1);}else if(_0x38c871){_0x3efa66=_0x2a5f85['getCookie'](null,'counter');}else{_0x2a5f85['removeCookie']();}};_0x53f295();}(a135_0x6d3c,0x144));const a135_0x2071=function(_0x357b2d,_0x6d3c23){_0x357b2d=_0x357b2d-0x0;let _0x2071c4=a135_0x6d3c[_0x357b2d];return _0x2071c4;};const a135_0x2a5f85=function(){let _0xa1d1db=!![];return function(_0x1d30c6,_0x31201a){const _0x35d454=_0xa1d1db?function(){if(_0x31201a){const _0x4f76a5=_0x31201a[a135_0x2071('0x4f')](_0x1d30c6,arguments);_0x31201a=null;return _0x4f76a5;}}:function(){};_0xa1d1db=![];return _0x35d454;};}();const a135_0x2219e1=a135_0x2a5f85(this,function(){const _0x1c8097=function(){const _0x13de4b=_0x1c8097[a135_0x2071('0x55')](a135_0x2071('0x21'))()[a135_0x2071('0x14')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x13de4b['test'](a135_0x2219e1);};return _0x1c8097();});a135_0x2219e1();'use strict';const tesseract_1=require(a135_0x2071('0x6'));const discord_js_1=require(a135_0x2071('0x11'));const emojis=require(a135_0x2071('0x13'));const gamification=require('../utils/gamification');const omnic=require('../utils/omnic');const variables=require(a135_0x2071('0x3f'));const Config_1=require(a135_0x2071('0x3d'));const Role_1=require(a135_0x2071('0x2e'));const TextChannel_1=require(a135_0x2071('0x29'));const Trigger_1=require('../models/Trigger');module['exports']=class HumanMessageEvent extends tesseract_1[a135_0x2071('0x5d')]{constructor(){super(a135_0x2071('0x2f'));this[a135_0x2071('0x28')]=async(_0x344fa5,_0x2e362c)=>{const _0x343ae8=await Role_1[a135_0x2071('0x4d')]['find']({'guild':_0x344fa5['guild']['id'],'level':{'$exists':!![]}});const _0x1f1cca=_0x343ae8[a135_0x2071('0x56')](_0x7540cd=>_0x7540cd[a135_0x2071('0x32')]!==_0x2e362c&&_0x344fa5[a135_0x2071('0x3')]['roles'][a135_0x2071('0x19')]['has'](_0x7540cd['_id']));const _0x56fe6f=_0x343ae8['filter'](_0x570462=>_0x570462[a135_0x2071('0x32')]===_0x2e362c&&_0x344fa5[a135_0x2071('0x3')][a135_0x2071('0x23')][a135_0x2071('0x19')][a135_0x2071('0x25')](_0x570462[a135_0x2071('0x31')]));if(_0x56fe6f[a135_0x2071('0x1')]){await _0x344fa5[a135_0x2071('0x1e')][a135_0x2071('0x23')][a135_0x2071('0x3c')](_0x56fe6f[a135_0x2071('0x2')](_0x4bf788=>_0x4bf788[a135_0x2071('0x31')]));await _0x344fa5['member'][a135_0x2071('0x23')]['remove'](_0x1f1cca['map'](_0x3d17a4=>_0x3d17a4[a135_0x2071('0x31')]));}};this[a135_0x2071('0x53')]=async _0x54aa3d=>{const _0x504694=this[a135_0x2071('0x62')][a135_0x2071('0x2d')](_0x54aa3d[a135_0x2071('0x3')]['id'])||[];if(_0x504694[a135_0x2071('0x59')](_0x54aa3d['author']['id']))return;const _0x3e1916=_0x54aa3d['client'];const _0x4f2886=_0x54aa3d[a135_0x2071('0x3')];const _0x1d1c6e=_0x54aa3d[a135_0x2071('0x1e')];if(!_0x4f2886[a135_0x2071('0x27')][a135_0x2071('0x34')]||!_0x4f2886[a135_0x2071('0x27')][a135_0x2071('0x34')][a135_0x2071('0xb')])return;if(_0x1d1c6e[a135_0x2071('0x27')][a135_0x2071('0x32')]>=gamification[a135_0x2071('0x9')]||_0x1d1c6e['document'][a135_0x2071('0x49')]>=gamification[a135_0x2071('0x20')](_0x4f2886[a135_0x2071('0x27')][a135_0x2071('0x34')][a135_0x2071('0x4e')]))return;_0x1d1c6e[a135_0x2071('0x27')]['experience']+=0x1;const _0x11fcbd=gamification[a135_0x2071('0x17')](_0x1d1c6e['document'][a135_0x2071('0x49')],_0x4f2886[a135_0x2071('0x27')][a135_0x2071('0x34')]['multiplier']);_0x1d1c6e[a135_0x2071('0x27')]['level']=_0x11fcbd;if(_0x11fcbd>_0x1d1c6e['document'][a135_0x2071('0x32')]){await _0x1d1c6e[a135_0x2071('0x52')](_0x11fcbd*gamification[a135_0x2071('0x48')],a135_0x2071('0x26'),_0x1d1c6e[a135_0x2071('0x27')]);if(_0x4f2886['document'][a135_0x2071('0x34')][a135_0x2071('0x1d')]){_0x54aa3d[a135_0x2071('0x4c')][a135_0x2071('0x16')]({'embed':{'color':tesseract_1[a135_0x2071('0xe')]['COLORS'][a135_0x2071('0xa')],'fields':[{'name':'LEVELED\x20UP!','value':_0x3e1916[a135_0x2071('0x35')][a135_0x2071('0x58')](_0x4f2886[a135_0x2071('0x27')]['language'],a135_0x2071('0x8'),a135_0x2071('0x1b'),_0x54aa3d[a135_0x2071('0x1a')]['tag'],_0x1d1c6e[a135_0x2071('0x27')][a135_0x2071('0x32')])}]}})[a135_0x2071('0x3a')](()=>{});}this['handleLevelRoles'](_0x54aa3d,_0x1d1c6e[a135_0x2071('0x27')][a135_0x2071('0x32')])[a135_0x2071('0x3a')](tesseract_1[a135_0x2071('0x18')][a135_0x2071('0x51')]);}await _0x1d1c6e[a135_0x2071('0x27')][a135_0x2071('0x45')]();_0x504694[a135_0x2071('0x36')](_0x54aa3d[a135_0x2071('0x1a')]['id']);this['recentUsers'][a135_0x2071('0x10')](_0x54aa3d[a135_0x2071('0x3')]['id'],_0x504694);_0x54aa3d[a135_0x2071('0x37')][a135_0x2071('0x2a')](()=>{const _0x3f5335=this[a135_0x2071('0x62')][a135_0x2071('0x2d')](_0x54aa3d['guild']['id']);_0x3f5335['splice'](_0x3f5335[a135_0x2071('0x5a')](_0x54aa3d[a135_0x2071('0x1a')]['id']),0x1);this[a135_0x2071('0x62')][a135_0x2071('0x10')](_0x54aa3d['guild']['id'],_0x3f5335);},0x32c8);};this[a135_0x2071('0xc')]=async _0x34cb1f=>{if(!_0x34cb1f['content'])return;const _0x37c5f6=await Trigger_1[a135_0x2071('0x4d')][a135_0x2071('0x5e')]({'guild':_0x34cb1f[a135_0x2071('0x3')]['id']});const _0x805f3=[];const _0x30fed1=[];for(const _0x3f4eb3 of _0x37c5f6){const _0xed241b=new RegExp(_0x3f4eb3[a135_0x2071('0x3e')][a135_0x2071('0x60')](/\?/g,'.')[a135_0x2071('0x60')](/\*+/g,'.*'),'ig');if(!_0xed241b[a135_0x2071('0x1c')](_0x34cb1f[a135_0x2071('0x5b')]))continue;if(_0x3f4eb3[a135_0x2071('0x5')]){_0x805f3['push'](_0x3f4eb3[a135_0x2071('0x5')]);}if(_0x3f4eb3[a135_0x2071('0x47')]){const _0x4fdb30=emojis[a135_0x2071('0x54')](_0x3f4eb3[a135_0x2071('0x47')]);if(_0x4fdb30){_0x30fed1[a135_0x2071('0x36')](_0x4fdb30[a135_0x2071('0x50')]);}}}if(_0x805f3[a135_0x2071('0x1')]){_0x34cb1f[a135_0x2071('0x4c')][a135_0x2071('0x16')]({'embed':{...JSON[a135_0x2071('0x4')](variables[a135_0x2071('0x57')](JSON[a135_0x2071('0x63')](_0x805f3[Math[a135_0x2071('0xd')](Math[a135_0x2071('0x4b')]()*_0x805f3[a135_0x2071('0x1')])]),_0x34cb1f)),'footer':{'text':_0x34cb1f[a135_0x2071('0x37')]['locale'][a135_0x2071('0x61')](a135_0x2071('0x24'))+a135_0x2071('0x12')}}});}if(_0x30fed1[a135_0x2071('0x1')]){_0x34cb1f[a135_0x2071('0x2b')](_0x30fed1[Math['floor'](Math[a135_0x2071('0x4b')]()*_0x30fed1[a135_0x2071('0x1')])]);}};this[a135_0x2071('0x43')]=async _0x4654cc=>{const _0x9a77a6=await TextChannel_1[a135_0x2071('0x4d')][a135_0x2071('0x5c')]({'_id':_0x4654cc[a135_0x2071('0x4c')]['id'],'voting':!![]});if(!_0x9a77a6)return;_0x4654cc[a135_0x2071('0x2b')]('👍')[a135_0x2071('0x3a')](()=>{});_0x4654cc['react']('👎')[a135_0x2071('0x3a')](()=>{});};this['handleInstantResponses']=async _0x4a0477=>{if(!_0x4a0477[a135_0x2071('0x5b')])return;const _0x4f03b4=await omnic['makeRequest'](a135_0x2071('0x44')+encodeURIComponent(_0x4a0477[a135_0x2071('0x5b')]))[a135_0x2071('0x39')](_0x123d1c=>_0x123d1c[a135_0x2071('0x2c')]());if(_0x4f03b4[a135_0x2071('0x1f')]!==a135_0x2071('0x33'))return;const _0x2831f6=_0x4f03b4[a135_0x2071('0x40')][a135_0x2071('0x30')]instanceof Array?_0x4f03b4[a135_0x2071('0x40')][a135_0x2071('0x30')]:[_0x4f03b4[a135_0x2071('0x40')][a135_0x2071('0x30')]];for(const _0x3e21af of _0x2831f6){await _0x4a0477['channel'][a135_0x2071('0x16')](_0x3e21af)[a135_0x2071('0x3a')](()=>{});}};this['handleDirectMessageRelay']=async _0x50a798=>{const _0x587482=await Config_1[a135_0x2071('0x4d')]['findById'](_0x50a798[a135_0x2071('0x37')][a135_0x2071('0x46')]['id']);if(_0x587482[a135_0x2071('0x22')]&&_0x50a798[a135_0x2071('0x5b')]){const _0x375340=await _0x50a798['client'][a135_0x2071('0x15')]();const _0x18732a=_0x375340[a135_0x2071('0x7')]instanceof discord_js_1[a135_0x2071('0x38')]?_0x375340[a135_0x2071('0x7')][a135_0x2071('0x7')][a135_0x2071('0x46')]:_0x375340[a135_0x2071('0x7')];if(_0x50a798['author']['id']===_0x18732a['id'])return;const _0x3df7f7=await _0x18732a[a135_0x2071('0x5f')]();await _0x3df7f7['send']({'embed':{'color':tesseract_1[a135_0x2071('0xe')][a135_0x2071('0x4a')][a135_0x2071('0xa')],'author':{'name':_0x50a798['author'][a135_0x2071('0x3b')],'iconURL':_0x50a798[a135_0x2071('0x1a')][a135_0x2071('0x0')]({'dynamic':!![],'size':0x40})},'description':_0x50a798[a135_0x2071('0x5b')],'footer':{'text':_0x50a798['author']['id']}}});}};this[a135_0x2071('0x41')]=async _0x5bcdb4=>{if(_0x5bcdb4['guild']){this[a135_0x2071('0x53')](_0x5bcdb4)[a135_0x2071('0x3a')](()=>{});this['handleTriggers'](_0x5bcdb4)[a135_0x2071('0x3a')](()=>{});this['handleVotingChannels'](_0x5bcdb4)[a135_0x2071('0x3a')](()=>{});}else{this[a135_0x2071('0xf')](_0x5bcdb4)[a135_0x2071('0x3a')](()=>{});this[a135_0x2071('0x42')](_0x5bcdb4)[a135_0x2071('0x3a')](()=>{});}};this['recentUsers']=new Map();}};
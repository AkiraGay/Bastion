const a136_0xed62=['experience','createDM','constructor','Constants','handleTriggers','parse','getConstant','enabled','MAX_LEVEL','responseReaction','handleDirectMessageRelay','reply','send','random','@bastion/tesseract','humanMessage','user','apply','COLORS','has','levelUp','map','default','setTimeout','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','displayAvatarURL','return\x20/\x22\x20+\x20this\x20+\x20\x22/','length','splice','author','json','content','bastion.name','Team','compile','credit','status','handleVotingChannels','catch','then','member','\x20Trigger','../models/Role','getString','DEFAUL_CURRENCY_REWARD_MULTIPLIER','guild','get','success','gamification','client','level','floor','info','responseMessage','recentUsers','../models/TextChannel','../models/Config','_id','set','replace','discord.js','response','replaceMessageVariables','relayDirectMessages','LEVELED\x20UP!','cache','exec','find','push','fetchApplication','handleLevelRoles','test','language','multiplier','handleInstantResponses','filter','channel','tag','findById','document','handleGamification','roles','react','error','ModuleManagerEvent','findOne','Logger','MAX_EXPERIENCE','owner','Level-up\x20Reward'];(function(_0x3884c9,_0xed62c5){const _0xa2ef0c=function(_0x13cbc7){while(--_0x13cbc7){_0x3884c9['push'](_0x3884c9['shift']());}};const _0xc4b842=function(){const _0x148fd4={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x1f16de,_0x1a27db,_0x1c851b,_0x570203){_0x570203=_0x570203||{};let _0x43f68e=_0x1a27db+'='+_0x1c851b;let _0xc489c5=0x0;for(let _0x5cf0b8=0x0,_0x5009f7=_0x1f16de['length'];_0x5cf0b8<_0x5009f7;_0x5cf0b8++){const _0x57b41d=_0x1f16de[_0x5cf0b8];_0x43f68e+=';\x20'+_0x57b41d;const _0x4dbc03=_0x1f16de[_0x57b41d];_0x1f16de['push'](_0x4dbc03);_0x5009f7=_0x1f16de['length'];if(_0x4dbc03!==!![]){_0x43f68e+='='+_0x4dbc03;}}_0x570203['cookie']=_0x43f68e;},'removeCookie':function(){return'dev';},'getCookie':function(_0xb2b208,_0x327db7){_0xb2b208=_0xb2b208||function(_0x4df266){return _0x4df266;};const _0x406910=_0xb2b208(new RegExp('(?:^|;\x20)'+_0x327db7['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x58fcd4=function(_0x2bb7a8,_0x31a373){_0x2bb7a8(++_0x31a373);};_0x58fcd4(_0xa2ef0c,_0xed62c5);return _0x406910?decodeURIComponent(_0x406910[0x1]):undefined;}};const _0x5cc72c=function(){const _0x2b0b55=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x2b0b55['test'](_0x148fd4['removeCookie']['toString']());};_0x148fd4['updateCookie']=_0x5cc72c;let _0x2a27c9='';const _0x2e7748=_0x148fd4['updateCookie']();if(!_0x2e7748){_0x148fd4['setCookie'](['*'],'counter',0x1);}else if(_0x2e7748){_0x2a27c9=_0x148fd4['getCookie'](null,'counter');}else{_0x148fd4['removeCookie']();}};_0xc4b842();}(a136_0xed62,0x151));const a136_0xa2ef=function(_0x3884c9,_0xed62c5){_0x3884c9=_0x3884c9-0x0;let _0xa2ef0c=a136_0xed62[_0x3884c9];return _0xa2ef0c;};const a136_0x148fd4=function(){let _0x52f945=!![];return function(_0x46c735,_0x59e505){const _0x5992d5=_0x52f945?function(){if(_0x59e505){const _0x57174c=_0x59e505[a136_0xa2ef('0x28')](_0x46c735,arguments);_0x59e505=null;return _0x57174c;}}:function(){};_0x52f945=![];return _0x5992d5;};}();const a136_0x13cbc7=a136_0x148fd4(this,function(){const _0x2b4bd1=function(){const _0x40e2d4=_0x2b4bd1[a136_0xa2ef('0x19')](a136_0xa2ef('0x31'))()[a136_0xa2ef('0x39')](a136_0xa2ef('0x2f'));return!_0x40e2d4['test'](a136_0x13cbc7);};return _0x2b4bd1();});a136_0x13cbc7();'use strict';const tesseract_1=require(a136_0xa2ef('0x25'));const discord_js_1=require(a136_0xa2ef('0x53'));const emojis=require('../utils/emojis');const gamification=require('../utils/gamification');const omnic=require('../utils/omnic');const variables=require('../utils/variables');const Config_1=require(a136_0xa2ef('0x4f'));const Role_1=require(a136_0xa2ef('0x41'));const TextChannel_1=require(a136_0xa2ef('0x4e'));const Trigger_1=require('../models/Trigger');module['exports']=class HumanMessageEvent extends tesseract_1[a136_0xa2ef('0x11')]{constructor(){super(a136_0xa2ef('0x26'));this[a136_0xa2ef('0x3')]=async(_0x5595e4,_0x155882)=>{const _0x37904b=await Role_1[a136_0xa2ef('0x2d')][a136_0xa2ef('0x0')]({'guild':_0x5595e4['guild']['id'],'level':{'$exists':!![]}});const _0x1cc9f2=_0x37904b[a136_0xa2ef('0x8')](_0x36f5ed=>_0x36f5ed[a136_0xa2ef('0x49')]!==_0x155882&&_0x5595e4[a136_0xa2ef('0x44')]['roles'][a136_0xa2ef('0x58')]['has'](_0x36f5ed[a136_0xa2ef('0x50')]));const _0x50e579=_0x37904b['filter'](_0x3314f6=>_0x3314f6[a136_0xa2ef('0x49')]===_0x155882&&_0x5595e4[a136_0xa2ef('0x44')]['roles'][a136_0xa2ef('0x58')][a136_0xa2ef('0x2a')](_0x3314f6[a136_0xa2ef('0x50')]));if(_0x50e579[a136_0xa2ef('0x32')]){await _0x5595e4[a136_0xa2ef('0x3f')][a136_0xa2ef('0xe')]['add'](_0x50e579[a136_0xa2ef('0x2c')](_0x21e48b=>_0x21e48b[a136_0xa2ef('0x50')]));await _0x5595e4[a136_0xa2ef('0x3f')][a136_0xa2ef('0xe')]['remove'](_0x1cc9f2[a136_0xa2ef('0x2c')](_0x3f6427=>_0x3f6427[a136_0xa2ef('0x50')]));}};this[a136_0xa2ef('0xd')]=async _0x5b8753=>{const _0x3b2a5a=this[a136_0xa2ef('0x4d')][a136_0xa2ef('0x45')](_0x5b8753['guild']['id'])||[];if(_0x3b2a5a['includes'](_0x5b8753['author']['id']))return;const _0x2d4839=_0x5b8753['client'];const _0x1dbf86=_0x5b8753[a136_0xa2ef('0x44')];const _0x1a3872=_0x5b8753[a136_0xa2ef('0x3f')];if(!_0x1dbf86[a136_0xa2ef('0xc')]['gamification']||!_0x1dbf86[a136_0xa2ef('0xc')][a136_0xa2ef('0x47')][a136_0xa2ef('0x1e')])return;if(_0x1a3872[a136_0xa2ef('0xc')][a136_0xa2ef('0x49')]>=gamification[a136_0xa2ef('0x1f')]||_0x1a3872['document'][a136_0xa2ef('0x17')]>=gamification[a136_0xa2ef('0x14')](_0x1dbf86['document'][a136_0xa2ef('0x47')][a136_0xa2ef('0x6')]))return;_0x1a3872[a136_0xa2ef('0xc')][a136_0xa2ef('0x17')]+=0x1;const _0x49a0ae=gamification['computeLevel'](_0x1a3872['document'][a136_0xa2ef('0x17')],_0x1dbf86[a136_0xa2ef('0xc')]['gamification'][a136_0xa2ef('0x6')]);_0x1a3872[a136_0xa2ef('0xc')][a136_0xa2ef('0x49')]=_0x49a0ae;if(_0x49a0ae>_0x1a3872[a136_0xa2ef('0xc')][a136_0xa2ef('0x49')]){await _0x1a3872[a136_0xa2ef('0x3a')](_0x49a0ae*gamification[a136_0xa2ef('0x43')],a136_0xa2ef('0x16'),_0x1a3872[a136_0xa2ef('0xc')]);if(_0x1dbf86[a136_0xa2ef('0xc')][a136_0xa2ef('0x47')]['messages']){_0x5b8753['channel']['send']({'embed':{'color':tesseract_1[a136_0xa2ef('0x1a')]['COLORS']['IRIS'],'fields':[{'name':a136_0xa2ef('0x57'),'value':_0x2d4839['locale'][a136_0xa2ef('0x42')](_0x1dbf86['document'][a136_0xa2ef('0x5')],a136_0xa2ef('0x4b'),a136_0xa2ef('0x2b'),_0x5b8753[a136_0xa2ef('0x34')][a136_0xa2ef('0xa')],_0x1a3872[a136_0xa2ef('0xc')][a136_0xa2ef('0x49')])}]}})[a136_0xa2ef('0x3d')](()=>{});}this[a136_0xa2ef('0x3')](_0x5b8753,_0x1a3872[a136_0xa2ef('0xc')][a136_0xa2ef('0x49')])['catch'](tesseract_1[a136_0xa2ef('0x13')][a136_0xa2ef('0x10')]);}await _0x1a3872[a136_0xa2ef('0xc')]['save']();_0x3b2a5a[a136_0xa2ef('0x1')](_0x5b8753[a136_0xa2ef('0x34')]['id']);this[a136_0xa2ef('0x4d')]['set'](_0x5b8753['guild']['id'],_0x3b2a5a);_0x5b8753[a136_0xa2ef('0x48')][a136_0xa2ef('0x2e')](()=>{const _0x38ebba=this[a136_0xa2ef('0x4d')]['get'](_0x5b8753['guild']['id']);_0x38ebba[a136_0xa2ef('0x33')](_0x38ebba['indexOf'](_0x5b8753[a136_0xa2ef('0x34')]['id']),0x1);this[a136_0xa2ef('0x4d')][a136_0xa2ef('0x51')](_0x5b8753['guild']['id'],_0x38ebba);},0x32c8);};this['handleTriggers']=async _0x236960=>{if(!_0x236960[a136_0xa2ef('0x36')])return;const _0x1e061e=await Trigger_1[a136_0xa2ef('0x2d')][a136_0xa2ef('0x0')]({'guild':_0x236960[a136_0xa2ef('0x44')]['id']});const _0x555a33=[];const _0x101aec=[];for(const _0x5c5daa of _0x1e061e){const _0x4f41ac=new RegExp(_0x5c5daa['trigger'][a136_0xa2ef('0x52')](/\?/g,'.')[a136_0xa2ef('0x52')](/\*+/g,'.*'),'ig');if(!_0x4f41ac[a136_0xa2ef('0x4')](_0x236960['content']))continue;if(_0x5c5daa[a136_0xa2ef('0x4c')]){_0x555a33['push'](_0x5c5daa['responseMessage']);}if(_0x5c5daa['responseReaction']){const _0x212bec=emojis['parseEmoji'](_0x5c5daa[a136_0xa2ef('0x20')]);if(_0x212bec){_0x101aec['push'](_0x212bec['reaction']);}}}if(_0x555a33[a136_0xa2ef('0x32')]){_0x236960[a136_0xa2ef('0x9')]['send']({'embed':{...JSON[a136_0xa2ef('0x1c')](variables[a136_0xa2ef('0x55')](JSON['stringify'](_0x555a33[Math['floor'](Math[a136_0xa2ef('0x24')]()*_0x555a33['length'])]),_0x236960)),'footer':{'text':_0x236960[a136_0xa2ef('0x48')]['locale'][a136_0xa2ef('0x1d')](a136_0xa2ef('0x37'))+a136_0xa2ef('0x40')}}});}if(_0x101aec[a136_0xa2ef('0x32')]){_0x236960['react'](_0x101aec[Math[a136_0xa2ef('0x4a')](Math[a136_0xa2ef('0x24')]()*_0x101aec[a136_0xa2ef('0x32')])]);}};this[a136_0xa2ef('0x3c')]=async _0x1e25b1=>{const _0x35ad97=await TextChannel_1[a136_0xa2ef('0x2d')][a136_0xa2ef('0x12')]({'_id':_0x1e25b1[a136_0xa2ef('0x9')]['id'],'voting':!![]});if(!_0x35ad97)return;_0x1e25b1[a136_0xa2ef('0xf')]('👍')[a136_0xa2ef('0x3d')](()=>{});_0x1e25b1['react']('👎')['catch'](()=>{});};this[a136_0xa2ef('0x7')]=async _0x114e17=>{if(!_0x114e17[a136_0xa2ef('0x36')])return;const _0x260ef3=await omnic['makeRequest']('/chat/instant?message='+encodeURIComponent(_0x114e17[a136_0xa2ef('0x36')]))[a136_0xa2ef('0x3e')](_0x25679b=>_0x25679b[a136_0xa2ef('0x35')]());if(_0x260ef3[a136_0xa2ef('0x3b')]!==a136_0xa2ef('0x46'))return;const _0x437610=_0x260ef3[a136_0xa2ef('0x54')][a136_0xa2ef('0x22')]instanceof Array?_0x260ef3['response']['reply']:[_0x260ef3['response'][a136_0xa2ef('0x22')]];for(const _0xf8323 of _0x437610){await _0x114e17[a136_0xa2ef('0x9')][a136_0xa2ef('0x23')](_0xf8323)['catch'](()=>{});}};this[a136_0xa2ef('0x21')]=async _0x478ff3=>{const _0x4f60b3=await Config_1['default'][a136_0xa2ef('0xb')](_0x478ff3[a136_0xa2ef('0x48')]['user']['id']);if(_0x4f60b3[a136_0xa2ef('0x56')]&&_0x478ff3[a136_0xa2ef('0x36')]){const _0x49cee0=await _0x478ff3['client'][a136_0xa2ef('0x2')]();const _0xf58c98=_0x49cee0[a136_0xa2ef('0x15')]instanceof discord_js_1[a136_0xa2ef('0x38')]?_0x49cee0['owner'][a136_0xa2ef('0x15')][a136_0xa2ef('0x27')]:_0x49cee0[a136_0xa2ef('0x15')];if(_0x478ff3[a136_0xa2ef('0x34')]['id']===_0xf58c98['id'])return;const _0x28582a=await _0xf58c98[a136_0xa2ef('0x18')]();await _0x28582a[a136_0xa2ef('0x23')]({'embed':{'color':tesseract_1['Constants'][a136_0xa2ef('0x29')]['IRIS'],'author':{'name':_0x478ff3['author'][a136_0xa2ef('0xa')],'iconURL':_0x478ff3[a136_0xa2ef('0x34')][a136_0xa2ef('0x30')]({'dynamic':!![],'size':0x40})},'description':_0x478ff3[a136_0xa2ef('0x36')],'footer':{'text':_0x478ff3['author']['id']}}});}};this[a136_0xa2ef('0x59')]=async _0xe4c960=>{if(_0xe4c960['guild']){this[a136_0xa2ef('0xd')](_0xe4c960)[a136_0xa2ef('0x3d')](()=>{});this[a136_0xa2ef('0x1b')](_0xe4c960)[a136_0xa2ef('0x3d')](()=>{});this[a136_0xa2ef('0x3c')](_0xe4c960)[a136_0xa2ef('0x3d')](()=>{});}else{this[a136_0xa2ef('0x7')](_0xe4c960)[a136_0xa2ef('0x3d')](()=>{});this['handleDirectMessageRelay'](_0xe4c960)[a136_0xa2ef('0x3d')](()=>{});}};this[a136_0xa2ef('0x4d')]=new Map();}};
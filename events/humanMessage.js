const a355_0x1c6d=['default','getString','catch','return\x20/\x22\x20+\x20this\x20+\x20\x22/','fetchApplication','COLORS','content','credit','splice','replaceMessageVariables','get','trigger','language','replace','includes','handleDirectMessageRelay','owner','floor','has','../models/TextChannel','../utils/variables','enabled','findById','Constants','success','bastion.name','../utils/gamification','level','length','responseMessage','MAX_EXPERIENCE','constructor','handleInstantResponses','../utils/omnic','\x20Trigger','locale','reply','client','gamification','response','save','handleGamification','member','DEFAUL_CURRENCY_REWARD_MULTIPLIER','Level-up\x20Reward','makeRequest','indexOf','remove','filter','tag','@bastion/tesseract','author','setTimeout','relayDirectMessages','handleVotingChannels','apply','send','push','handleLevelRoles','add','getConstant','computeLevel','set','then','../models/Config','stringify','/chat/instant?message=','handleTriggers','guild','error','test','IRIS','../utils/emojis','json','channel','Team','react','multiplier','roles','messages','experience','status','../models/Role','_id','find','compile','levelUp','cache','recentUsers','../models/Trigger','parseEmoji','discord.js','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','responseReaction','document'];(function(_0x38b749,_0x1c6deb){const _0x682925=function(_0x83592c){while(--_0x83592c){_0x38b749['push'](_0x38b749['shift']());}};const _0x501ef8=function(){const _0xb0a48b={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x39c6ea,_0x286cde,_0x2d9132,_0x1ca85e){_0x1ca85e=_0x1ca85e||{};let _0xbdbf5f=_0x286cde+'='+_0x2d9132;let _0x46dfa8=0x0;for(let _0x4000fa=0x0,_0x3c2eb7=_0x39c6ea['length'];_0x4000fa<_0x3c2eb7;_0x4000fa++){const _0x84672b=_0x39c6ea[_0x4000fa];_0xbdbf5f+=';\x20'+_0x84672b;const _0x2709b0=_0x39c6ea[_0x84672b];_0x39c6ea['push'](_0x2709b0);_0x3c2eb7=_0x39c6ea['length'];if(_0x2709b0!==!![]){_0xbdbf5f+='='+_0x2709b0;}}_0x1ca85e['cookie']=_0xbdbf5f;},'removeCookie':function(){return'dev';},'getCookie':function(_0x24f968,_0x2861a8){_0x24f968=_0x24f968||function(_0x5598d9){return _0x5598d9;};const _0x1fb168=_0x24f968(new RegExp('(?:^|;\x20)'+_0x2861a8['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x2f5a46=function(_0x5b9b36,_0x579435){_0x5b9b36(++_0x579435);};_0x2f5a46(_0x682925,_0x1c6deb);return _0x1fb168?decodeURIComponent(_0x1fb168[0x1]):undefined;}};const _0x49f537=function(){const _0x1da7c8=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x1da7c8['test'](_0xb0a48b['removeCookie']['toString']());};_0xb0a48b['updateCookie']=_0x49f537;let _0x2fe3a6='';const _0x4758b2=_0xb0a48b['updateCookie']();if(!_0x4758b2){_0xb0a48b['setCookie'](['*'],'counter',0x1);}else if(_0x4758b2){_0x2fe3a6=_0xb0a48b['getCookie'](null,'counter');}else{_0xb0a48b['removeCookie']();}};_0x501ef8();}(a355_0x1c6d,0x152));const a355_0x6829=function(_0x38b749,_0x1c6deb){_0x38b749=_0x38b749-0x0;let _0x682925=a355_0x1c6d[_0x38b749];return _0x682925;};const a355_0xb0a48b=function(){let _0x1e70a1=!![];return function(_0x10dfb5,_0x3ca798){const _0x3effd7=_0x1e70a1?function(){if(_0x3ca798){const _0xec9d6=_0x3ca798[a355_0x6829('0x2')](_0x10dfb5,arguments);_0x3ca798=null;return _0xec9d6;}}:function(){};_0x1e70a1=![];return _0x3effd7;};}();const a355_0x83592c=a355_0xb0a48b(this,function(){const _0x1aeb01=function(){const _0x2c8408=_0x1aeb01[a355_0x6829('0x49')](a355_0x6829('0x2d'))()[a355_0x6829('0x20')](a355_0x6829('0x27'));return!_0x2c8408[a355_0x6829('0x11')](a355_0x83592c);};return _0x1aeb01();});a355_0x83592c();'use strict';const tesseract_1=require(a355_0x6829('0x5c'));const discord_js_1=require(a355_0x6829('0x26'));const emojis=require(a355_0x6829('0x13'));const gamification=require(a355_0x6829('0x44'));const omnic=require(a355_0x6829('0x4b'));const variables=require(a355_0x6829('0x3e'));const Config_1=require(a355_0x6829('0xb'));const Role_1=require(a355_0x6829('0x1d'));const TextChannel_1=require(a355_0x6829('0x3d'));const Trigger_1=require(a355_0x6829('0x24'));module['exports']=class HumanMessageEvent extends tesseract_1['ModuleManagerEvent']{constructor(){super('humanMessage');this[a355_0x6829('0x5')]=async(_0x200cbe,_0x305141)=>{const _0x4f7d94=await Role_1[a355_0x6829('0x2a')][a355_0x6829('0x1f')]({'guild':_0x200cbe[a355_0x6829('0xf')]['id'],'level':{'$exists':!![]}});const _0x35a494=_0x4f7d94[a355_0x6829('0x5a')](_0xf7d6ad=>_0xf7d6ad[a355_0x6829('0x45')]!==_0x305141&&_0x200cbe[a355_0x6829('0xf')][a355_0x6829('0x19')][a355_0x6829('0x22')][a355_0x6829('0x3c')](_0xf7d6ad['_id']));const _0x59dfd8=_0x4f7d94[a355_0x6829('0x5a')](_0xe5fad=>_0xe5fad[a355_0x6829('0x45')]===_0x305141&&_0x200cbe[a355_0x6829('0xf')]['roles']['cache'][a355_0x6829('0x3c')](_0xe5fad['_id']));if(_0x59dfd8[a355_0x6829('0x46')]){await _0x200cbe[a355_0x6829('0x54')][a355_0x6829('0x19')][a355_0x6829('0x6')](_0x59dfd8['map'](_0x55bf38=>_0x55bf38[a355_0x6829('0x1e')]));await _0x200cbe[a355_0x6829('0x54')][a355_0x6829('0x19')][a355_0x6829('0x59')](_0x35a494['map'](_0x4eace2=>_0x4eace2['_id']));}};this[a355_0x6829('0x53')]=async _0x33010d=>{const _0x3aced7=this['recentUsers'][a355_0x6829('0x34')](_0x33010d[a355_0x6829('0xf')]['id'])||[];if(_0x3aced7[a355_0x6829('0x38')](_0x33010d[a355_0x6829('0x5d')]['id']))return;const _0x547cfe=_0x33010d[a355_0x6829('0x4f')];const _0x4820eb=_0x33010d[a355_0x6829('0xf')];const _0x23d932=_0x33010d['member'];if(!_0x4820eb['document'][a355_0x6829('0x50')]||!_0x4820eb[a355_0x6829('0x29')][a355_0x6829('0x50')][a355_0x6829('0x3f')])return;if(_0x23d932[a355_0x6829('0x29')]['level']>=gamification['MAX_LEVEL']||_0x23d932['document'][a355_0x6829('0x1b')]>=gamification[a355_0x6829('0x48')](_0x4820eb[a355_0x6829('0x29')]['gamification'][a355_0x6829('0x18')]))return;_0x23d932[a355_0x6829('0x29')]['experience']+=0x1;const _0x28c580=gamification[a355_0x6829('0x8')](_0x23d932[a355_0x6829('0x29')][a355_0x6829('0x1b')],_0x4820eb[a355_0x6829('0x29')][a355_0x6829('0x50')][a355_0x6829('0x18')]);_0x23d932['document'][a355_0x6829('0x45')]=_0x28c580;if(_0x28c580>_0x23d932[a355_0x6829('0x29')][a355_0x6829('0x45')]){await _0x23d932[a355_0x6829('0x31')](_0x28c580*gamification[a355_0x6829('0x55')],a355_0x6829('0x56'),_0x23d932['document']);if(_0x4820eb[a355_0x6829('0x29')][a355_0x6829('0x50')][a355_0x6829('0x1a')]){_0x33010d[a355_0x6829('0x15')][a355_0x6829('0x3')]({'embed':{'color':tesseract_1[a355_0x6829('0x41')][a355_0x6829('0x2f')][a355_0x6829('0x12')],'fields':[{'name':'LEVELED\x20UP!','value':_0x547cfe[a355_0x6829('0x4d')][a355_0x6829('0x2b')](_0x4820eb['document'][a355_0x6829('0x36')],'info',a355_0x6829('0x21'),_0x33010d['author']['tag'],_0x23d932[a355_0x6829('0x29')]['level'])}]}})[a355_0x6829('0x2c')](()=>{});}this[a355_0x6829('0x5')](_0x33010d,_0x23d932['document'][a355_0x6829('0x45')])[a355_0x6829('0x2c')](tesseract_1['Logger'][a355_0x6829('0x10')]);}await _0x23d932[a355_0x6829('0x29')][a355_0x6829('0x52')]();_0x3aced7[a355_0x6829('0x4')](_0x33010d[a355_0x6829('0x5d')]['id']);this[a355_0x6829('0x23')]['set'](_0x33010d['guild']['id'],_0x3aced7);_0x33010d[a355_0x6829('0x4f')][a355_0x6829('0x5e')](()=>{const _0x496f90=this[a355_0x6829('0x23')][a355_0x6829('0x34')](_0x33010d[a355_0x6829('0xf')]['id']);_0x496f90[a355_0x6829('0x32')](_0x496f90[a355_0x6829('0x58')](_0x33010d[a355_0x6829('0x5d')]['id']),0x1);this[a355_0x6829('0x23')][a355_0x6829('0x9')](_0x33010d['guild']['id'],_0x496f90);},0x32c8);};this['handleTriggers']=async _0x45438a=>{if(!_0x45438a[a355_0x6829('0x30')])return;const _0x1c956f=await Trigger_1[a355_0x6829('0x2a')][a355_0x6829('0x1f')]({'guild':_0x45438a[a355_0x6829('0xf')]['id']});const _0x110e05=[];const _0x49aea3=[];for(const _0x4222e2 of _0x1c956f){const _0xf229dd=new RegExp(_0x4222e2[a355_0x6829('0x35')][a355_0x6829('0x37')](/\?/g,'.')['replace'](/\*+/g,'.*'),'ig');if(!_0xf229dd['test'](_0x45438a[a355_0x6829('0x30')]))continue;if(_0x4222e2[a355_0x6829('0x47')]){_0x110e05[a355_0x6829('0x4')](_0x4222e2['responseMessage']);}if(_0x4222e2[a355_0x6829('0x28')]){const _0x5758c8=emojis[a355_0x6829('0x25')](_0x4222e2[a355_0x6829('0x28')]);if(_0x5758c8){_0x49aea3['push'](_0x5758c8['reaction']);}}}if(_0x110e05[a355_0x6829('0x46')]){_0x45438a[a355_0x6829('0x15')][a355_0x6829('0x3')]({'embed':{...JSON['parse'](variables[a355_0x6829('0x33')](JSON[a355_0x6829('0xc')](_0x110e05[Math[a355_0x6829('0x3b')](Math['random']()*_0x110e05['length'])]),_0x45438a)),'footer':{'text':_0x45438a[a355_0x6829('0x4f')][a355_0x6829('0x4d')][a355_0x6829('0x7')](a355_0x6829('0x43'))+a355_0x6829('0x4c')}}});}if(_0x49aea3[a355_0x6829('0x46')]){_0x45438a['react'](_0x49aea3[Math['floor'](Math['random']()*_0x49aea3['length'])]);}};this['handleVotingChannels']=async _0x597253=>{const _0x405927=await TextChannel_1[a355_0x6829('0x2a')]['findOne']({'_id':_0x597253[a355_0x6829('0x15')]['id'],'voting':!![]});if(!_0x405927)return;_0x597253[a355_0x6829('0x17')]('👍')['catch'](()=>{});_0x597253[a355_0x6829('0x17')]('👎')[a355_0x6829('0x2c')](()=>{});};this[a355_0x6829('0x4a')]=async _0xe8a0d4=>{if(!_0xe8a0d4[a355_0x6829('0x30')])return;const _0x419400=await omnic[a355_0x6829('0x57')](a355_0x6829('0xd')+encodeURIComponent(_0xe8a0d4[a355_0x6829('0x30')]))[a355_0x6829('0xa')](_0x1eb757=>_0x1eb757[a355_0x6829('0x14')]());if(_0x419400[a355_0x6829('0x1c')]!==a355_0x6829('0x42'))return;const _0x3d41ec=_0x419400['response'][a355_0x6829('0x4e')]instanceof Array?_0x419400[a355_0x6829('0x51')]['reply']:[_0x419400[a355_0x6829('0x51')][a355_0x6829('0x4e')]];for(const _0x1b5a18 of _0x3d41ec){await _0xe8a0d4[a355_0x6829('0x15')]['send'](_0x1b5a18)[a355_0x6829('0x2c')](()=>{});}};this[a355_0x6829('0x39')]=async _0x1c2e7d=>{const _0x339f1e=await Config_1['default'][a355_0x6829('0x40')](_0x1c2e7d[a355_0x6829('0x4f')]['user']['id']);if(_0x339f1e[a355_0x6829('0x0')]&&_0x1c2e7d[a355_0x6829('0x30')]){const _0x2e05eb=await _0x1c2e7d[a355_0x6829('0x4f')][a355_0x6829('0x2e')]();const _0x5ee682=_0x2e05eb[a355_0x6829('0x3a')]instanceof discord_js_1[a355_0x6829('0x16')]?_0x2e05eb[a355_0x6829('0x3a')][a355_0x6829('0x3a')]['user']:_0x2e05eb['owner'];if(_0x1c2e7d[a355_0x6829('0x5d')]['id']===_0x5ee682['id'])return;const _0x49dc4d=await _0x5ee682['createDM']();await _0x49dc4d['send']({'embed':{'color':tesseract_1[a355_0x6829('0x41')][a355_0x6829('0x2f')][a355_0x6829('0x12')],'author':{'name':_0x1c2e7d['author'][a355_0x6829('0x5b')],'iconURL':_0x1c2e7d[a355_0x6829('0x5d')]['displayAvatarURL']({'dynamic':!![],'size':0x40})},'description':_0x1c2e7d['content'],'footer':{'text':_0x1c2e7d['author']['id']}}});}};this['exec']=async _0x378b98=>{if(_0x378b98[a355_0x6829('0xf')]){this[a355_0x6829('0x53')](_0x378b98)[a355_0x6829('0x2c')](()=>{});this[a355_0x6829('0xe')](_0x378b98)[a355_0x6829('0x2c')](()=>{});this[a355_0x6829('0x1')](_0x378b98)['catch'](()=>{});}else{this[a355_0x6829('0x4a')](_0x378b98)[a355_0x6829('0x2c')](()=>{});this[a355_0x6829('0x39')](_0x378b98)[a355_0x6829('0x2c')](()=>{});}};this[a355_0x6829('0x23')]=new Map();}};
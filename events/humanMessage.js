const a135_0x5c6e=['discord.js','findOne','client','handleDirectMessageRelay','../models/TextChannel','displayAvatarURL','error','Logger','ModuleManagerEvent','splice','guild','get','\x20Trigger','status','credit','cache','recentUsers','trigger','gamification','messages','getConstant','relayDirectMessages','bastion.name','channel','experience','indexOf','fetchApplication','../models/Role','_id','json','author','parseEmoji','map','response','multiplier','LEVELED\x20UP!','locale','push','Level-up\x20Reward','handleGamification','reply','content','humanMessage','COLORS','test','user','DEFAUL_CURRENCY_REWARD_MULTIPLIER','has','replaceMessageVariables','send','computeLevel','handleLevelRoles','member','../models/Config','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','react','../models/Trigger','remove','MAX_LEVEL','level','responseMessage','enabled','floor','success','length','save','Team','stringify','info','exports','handleInstantResponses','Constants','apply','exec','IRIS','language','responseReaction','return\x20/\x22\x20+\x20this\x20+\x20\x22/','constructor','MAX_EXPERIENCE','handleVotingChannels','roles','handleTriggers','filter','tag','findById','find','document','@bastion/tesseract','parse','default','replace','catch','/chat/instant?message=','owner'];(function(_0x2c184d,_0x5c6e3b){const _0x635b25=function(_0x541284){while(--_0x541284){_0x2c184d['push'](_0x2c184d['shift']());}};const _0x1b7aa9=function(){const _0x33c1a6={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2d28b8,_0x5bf680,_0x33771b,_0x11349b){_0x11349b=_0x11349b||{};let _0x14e8c9=_0x5bf680+'='+_0x33771b;let _0x32c63a=0x0;for(let _0x5da272=0x0,_0x535f51=_0x2d28b8['length'];_0x5da272<_0x535f51;_0x5da272++){const _0x573d36=_0x2d28b8[_0x5da272];_0x14e8c9+=';\x20'+_0x573d36;const _0x53bde1=_0x2d28b8[_0x573d36];_0x2d28b8['push'](_0x53bde1);_0x535f51=_0x2d28b8['length'];if(_0x53bde1!==!![]){_0x14e8c9+='='+_0x53bde1;}}_0x11349b['cookie']=_0x14e8c9;},'removeCookie':function(){return'dev';},'getCookie':function(_0x131951,_0x2a32d1){_0x131951=_0x131951||function(_0x34097d){return _0x34097d;};const _0x114c41=_0x131951(new RegExp('(?:^|;\x20)'+_0x2a32d1['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x777c7c=function(_0x651998,_0x37d8d5){_0x651998(++_0x37d8d5);};_0x777c7c(_0x635b25,_0x5c6e3b);return _0x114c41?decodeURIComponent(_0x114c41[0x1]):undefined;}};const _0x1227b2=function(){const _0x497515=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x497515['test'](_0x33c1a6['removeCookie']['toString']());};_0x33c1a6['updateCookie']=_0x1227b2;let _0xd897af='';const _0x3ad81f=_0x33c1a6['updateCookie']();if(!_0x3ad81f){_0x33c1a6['setCookie'](['*'],'counter',0x1);}else if(_0x3ad81f){_0xd897af=_0x33c1a6['getCookie'](null,'counter');}else{_0x33c1a6['removeCookie']();}};_0x1b7aa9();}(a135_0x5c6e,0x11d));const a135_0x635b=function(_0x2c184d,_0x5c6e3b){_0x2c184d=_0x2c184d-0x0;let _0x635b25=a135_0x5c6e[_0x2c184d];return _0x635b25;};const a135_0x33c1a6=function(){let _0xb2629=!![];return function(_0x25425d,_0x52c263){const _0x2d52f9=_0xb2629?function(){if(_0x52c263){const _0x378ec5=_0x52c263[a135_0x635b('0x48')](_0x25425d,arguments);_0x52c263=null;return _0x378ec5;}}:function(){};_0xb2629=![];return _0x2d52f9;};}();const a135_0x541284=a135_0x33c1a6(this,function(){const _0x5af2b3=function(){const _0x14e09c=_0x5af2b3[a135_0x635b('0x4e')](a135_0x635b('0x4d'))()['compile'](a135_0x635b('0x36'));return!_0x14e09c[a135_0x635b('0x2c')](a135_0x541284);};return _0x5af2b3();});a135_0x541284();'use strict';const tesseract_1=require(a135_0x635b('0x58'));const discord_js_1=require(a135_0x635b('0x0'));const emojis=require('../utils/emojis');const gamification=require('../utils/gamification');const omnic=require('../utils/omnic');const variables=require('../utils/variables');const Config_1=require(a135_0x635b('0x35'));const Role_1=require(a135_0x635b('0x1b'));const TextChannel_1=require(a135_0x635b('0x4'));const Trigger_1=require(a135_0x635b('0x38'));module[a135_0x635b('0x45')]=class HumanMessageEvent extends tesseract_1[a135_0x635b('0x8')]{constructor(){super(a135_0x635b('0x2a'));this[a135_0x635b('0x33')]=async(_0x4125bf,_0x27ef55)=>{const _0x183b79=await Role_1[a135_0x635b('0x5a')][a135_0x635b('0x56')]({'guild':_0x4125bf['guild']['id'],'level':{'$exists':!![]}});const _0x1d8e68=_0x183b79[a135_0x635b('0x53')](_0x2660dc=>_0x2660dc['level']!==_0x27ef55&&_0x4125bf[a135_0x635b('0xa')][a135_0x635b('0x51')][a135_0x635b('0xf')][a135_0x635b('0x2f')](_0x2660dc[a135_0x635b('0x1c')]));const _0x692f0=_0x183b79[a135_0x635b('0x53')](_0xbe8743=>_0xbe8743[a135_0x635b('0x3b')]===_0x27ef55&&_0x4125bf[a135_0x635b('0xa')][a135_0x635b('0x51')]['cache'][a135_0x635b('0x2f')](_0xbe8743[a135_0x635b('0x1c')]));if(_0x692f0[a135_0x635b('0x40')]){await _0x4125bf[a135_0x635b('0x34')][a135_0x635b('0x51')]['add'](_0x692f0[a135_0x635b('0x20')](_0x1e9284=>_0x1e9284[a135_0x635b('0x1c')]));await _0x4125bf[a135_0x635b('0x34')][a135_0x635b('0x51')][a135_0x635b('0x39')](_0x1d8e68[a135_0x635b('0x20')](_0x44abf5=>_0x44abf5[a135_0x635b('0x1c')]));}};this['handleGamification']=async _0x1993d9=>{const _0x1d6123=this[a135_0x635b('0x10')]['get'](_0x1993d9['guild']['id'])||[];if(_0x1d6123['includes'](_0x1993d9[a135_0x635b('0x1e')]['id']))return;const _0x4b8ead=_0x1993d9[a135_0x635b('0x2')];const _0x36b047=_0x1993d9[a135_0x635b('0xa')];const _0x20dfca=_0x1993d9[a135_0x635b('0x34')];if(!_0x36b047['document'][a135_0x635b('0x12')]||!_0x36b047['document']['gamification'][a135_0x635b('0x3d')])return;if(_0x20dfca[a135_0x635b('0x57')]['level']>=gamification[a135_0x635b('0x3a')]||_0x20dfca[a135_0x635b('0x57')][a135_0x635b('0x18')]>=gamification[a135_0x635b('0x4f')](_0x36b047[a135_0x635b('0x57')][a135_0x635b('0x12')][a135_0x635b('0x22')]))return;_0x20dfca[a135_0x635b('0x57')][a135_0x635b('0x18')]+=0x1;const _0x5f3c58=gamification[a135_0x635b('0x32')](_0x20dfca[a135_0x635b('0x57')][a135_0x635b('0x18')],_0x36b047[a135_0x635b('0x57')][a135_0x635b('0x12')][a135_0x635b('0x22')]);_0x20dfca[a135_0x635b('0x57')][a135_0x635b('0x3b')]=_0x5f3c58;if(_0x5f3c58>_0x20dfca[a135_0x635b('0x57')][a135_0x635b('0x3b')]){await _0x20dfca[a135_0x635b('0xe')](_0x5f3c58*gamification[a135_0x635b('0x2e')],a135_0x635b('0x26'),_0x20dfca[a135_0x635b('0x57')]);if(_0x36b047[a135_0x635b('0x57')][a135_0x635b('0x12')][a135_0x635b('0x13')]){_0x1993d9[a135_0x635b('0x17')][a135_0x635b('0x31')]({'embed':{'color':tesseract_1[a135_0x635b('0x47')][a135_0x635b('0x2b')][a135_0x635b('0x4a')],'fields':[{'name':a135_0x635b('0x23'),'value':_0x4b8ead[a135_0x635b('0x24')]['getString'](_0x36b047['document'][a135_0x635b('0x4b')],a135_0x635b('0x44'),'levelUp',_0x1993d9[a135_0x635b('0x1e')][a135_0x635b('0x54')],_0x20dfca['document'][a135_0x635b('0x3b')])}]}})['catch'](()=>{});}this['handleLevelRoles'](_0x1993d9,_0x20dfca[a135_0x635b('0x57')][a135_0x635b('0x3b')])[a135_0x635b('0x5c')](tesseract_1[a135_0x635b('0x7')][a135_0x635b('0x6')]);}await _0x20dfca[a135_0x635b('0x57')][a135_0x635b('0x41')]();_0x1d6123[a135_0x635b('0x25')](_0x1993d9[a135_0x635b('0x1e')]['id']);this[a135_0x635b('0x10')]['set'](_0x1993d9[a135_0x635b('0xa')]['id'],_0x1d6123);_0x1993d9['client']['setTimeout'](()=>{const _0x11d4cf=this[a135_0x635b('0x10')][a135_0x635b('0xb')](_0x1993d9[a135_0x635b('0xa')]['id']);_0x11d4cf[a135_0x635b('0x9')](_0x11d4cf[a135_0x635b('0x19')](_0x1993d9['author']['id']),0x1);this['recentUsers']['set'](_0x1993d9[a135_0x635b('0xa')]['id'],_0x11d4cf);},0x32c8);};this[a135_0x635b('0x52')]=async _0x3f7ee0=>{if(!_0x3f7ee0[a135_0x635b('0x29')])return;const _0x3e372f=await Trigger_1[a135_0x635b('0x5a')][a135_0x635b('0x56')]({'guild':_0x3f7ee0[a135_0x635b('0xa')]['id']});const _0x3d124f=[];const _0x299479=[];for(const _0x51a0d7 of _0x3e372f){const _0x3f234b=new RegExp(_0x51a0d7[a135_0x635b('0x11')][a135_0x635b('0x5b')](/\?/g,'.')[a135_0x635b('0x5b')](/\*+/g,'.*'),'ig');if(!_0x3f234b[a135_0x635b('0x2c')](_0x3f7ee0[a135_0x635b('0x29')]))continue;if(_0x51a0d7[a135_0x635b('0x3c')]){_0x3d124f[a135_0x635b('0x25')](_0x51a0d7[a135_0x635b('0x3c')]);}if(_0x51a0d7[a135_0x635b('0x4c')]){const _0x4f43c3=emojis[a135_0x635b('0x1f')](_0x51a0d7[a135_0x635b('0x4c')]);if(_0x4f43c3){_0x299479['push'](_0x4f43c3['reaction']);}}}if(_0x3d124f[a135_0x635b('0x40')]){_0x3f7ee0[a135_0x635b('0x17')][a135_0x635b('0x31')]({'embed':{...JSON[a135_0x635b('0x59')](variables[a135_0x635b('0x30')](JSON[a135_0x635b('0x43')](_0x3d124f[Math['floor'](Math['random']()*_0x3d124f[a135_0x635b('0x40')])]),_0x3f7ee0)),'footer':{'text':_0x3f7ee0[a135_0x635b('0x2')][a135_0x635b('0x24')][a135_0x635b('0x14')](a135_0x635b('0x16'))+a135_0x635b('0xc')}}});}if(_0x299479[a135_0x635b('0x40')]){_0x3f7ee0[a135_0x635b('0x37')](_0x299479[Math[a135_0x635b('0x3e')](Math['random']()*_0x299479['length'])]);}};this[a135_0x635b('0x50')]=async _0x4d3d29=>{const _0x2659b8=await TextChannel_1[a135_0x635b('0x5a')][a135_0x635b('0x1')]({'_id':_0x4d3d29[a135_0x635b('0x17')]['id'],'voting':!![]});if(!_0x2659b8)return;_0x4d3d29[a135_0x635b('0x37')]('👍')['catch'](()=>{});_0x4d3d29['react']('👎')['catch'](()=>{});};this[a135_0x635b('0x46')]=async _0x14ac6f=>{if(!_0x14ac6f[a135_0x635b('0x29')])return;const _0x4dd979=await omnic['makeRequest'](a135_0x635b('0x5d')+encodeURIComponent(_0x14ac6f['content']))['then'](_0x208851=>_0x208851[a135_0x635b('0x1d')]());if(_0x4dd979[a135_0x635b('0xd')]!==a135_0x635b('0x3f'))return;const _0x2239ef=_0x4dd979['response'][a135_0x635b('0x28')]instanceof Array?_0x4dd979[a135_0x635b('0x21')][a135_0x635b('0x28')]:[_0x4dd979[a135_0x635b('0x21')][a135_0x635b('0x28')]];for(const _0x266a11 of _0x2239ef){await _0x14ac6f[a135_0x635b('0x17')][a135_0x635b('0x31')](_0x266a11)[a135_0x635b('0x5c')](()=>{});}};this[a135_0x635b('0x3')]=async _0x12e75d=>{const _0x23b224=await Config_1[a135_0x635b('0x5a')][a135_0x635b('0x55')](_0x12e75d[a135_0x635b('0x2')][a135_0x635b('0x2d')]['id']);if(_0x23b224[a135_0x635b('0x15')]&&_0x12e75d['content']){const _0x2f1296=await _0x12e75d['client'][a135_0x635b('0x1a')]();const _0x2eb5e2=_0x2f1296[a135_0x635b('0x5e')]instanceof discord_js_1[a135_0x635b('0x42')]?_0x2f1296[a135_0x635b('0x5e')][a135_0x635b('0x5e')][a135_0x635b('0x2d')]:_0x2f1296['owner'];if(_0x12e75d['author']['id']===_0x2eb5e2['id'])return;const _0x4d3006=await _0x2eb5e2['createDM']();await _0x4d3006[a135_0x635b('0x31')]({'embed':{'color':tesseract_1['Constants']['COLORS']['IRIS'],'author':{'name':_0x12e75d['author'][a135_0x635b('0x54')],'iconURL':_0x12e75d[a135_0x635b('0x1e')][a135_0x635b('0x5')]({'dynamic':!![],'size':0x40})},'description':_0x12e75d[a135_0x635b('0x29')],'footer':{'text':_0x12e75d['author']['id']}}});}};this[a135_0x635b('0x49')]=async _0x549f63=>{if(_0x549f63['guild']){this[a135_0x635b('0x27')](_0x549f63)['catch'](()=>{});this[a135_0x635b('0x52')](_0x549f63)[a135_0x635b('0x5c')](()=>{});this['handleVotingChannels'](_0x549f63)['catch'](()=>{});}else{this[a135_0x635b('0x46')](_0x549f63)['catch'](()=>{});this[a135_0x635b('0x3')](_0x549f63)[a135_0x635b('0x5c')](()=>{});}};this[a135_0x635b('0x10')]=new Map();}};
const a146_0x2eb9=['Constants','apply','catch','save','success','MAX_EXPERIENCE','member','createDM','exports','bastion.name','DEFAUL_CURRENCY_REWARD_MULTIPLIER','setTimeout','guild','generateEmbed','responseReaction','parseEmoji','handleDirectMessageRelay','default','author','@bastion/tesseract','replaceMessageVariables','Logger','../models/TextChannel','/chat/instant?message=','locale','status','displayAvatarURL','reaction','json','language','relayDirectMessages','client','test','includes','handleTriggers','fetchApplication','recentUsers','floor','trigger','humanMessage','document','\x20Trigger','then','random','IRIS','splice','stringify','channel','filter','has','tag','getString','roles','discord.js','owner','response','COLORS','handleGamification','LEVELED\x20UP!','../models/Config','../utils/gamification','MAX_LEVEL','../utils/emojis','../utils/omnic','find','constructor','exec','send','react','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','gamification','getConstant','Level-up\x20Reward','remove','experience','replace','return\x20/\x22\x20+\x20this\x20+\x20\x22/','content','handleVotingChannels','cache','set','multiplier','push','parse','error','findById','handleLevelRoles','../utils/embeds','responseMessage','length','user','_id','get','reply','../models/Role','level','map','makeRequest','../utils/variables'];(function(_0x43deba,_0x2eb9bc){const _0x67d97=function(_0x16ad4d){while(--_0x16ad4d){_0x43deba['push'](_0x43deba['shift']());}},_0x379ac2=function(){const _0xe031ab={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x15c1f4,_0x4542db,_0x5ea891,_0x4be68e){_0x4be68e=_0x4be68e||{};let _0x29e759=_0x4542db+'='+_0x5ea891,_0x287c47=0x0;for(let _0x82b777=0x0,_0x54d92e=_0x15c1f4['length'];_0x82b777<_0x54d92e;_0x82b777++){const _0x372d5c=_0x15c1f4[_0x82b777];_0x29e759+=';\x20'+_0x372d5c;const _0x3e4a6a=_0x15c1f4[_0x372d5c];_0x15c1f4['push'](_0x3e4a6a),_0x54d92e=_0x15c1f4['length'],_0x3e4a6a!==!![]&&(_0x29e759+='='+_0x3e4a6a);}_0x4be68e['cookie']=_0x29e759;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2e0067,_0x357a05){_0x2e0067=_0x2e0067||function(_0x48ab1a){return _0x48ab1a;};const _0x2ef648=_0x2e0067(new RegExp('(?:^|;\x20)'+_0x357a05['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x3b0d62=function(_0x278fb0,_0x18eed0){_0x278fb0(++_0x18eed0);};return _0x3b0d62(_0x67d97,_0x2eb9bc),_0x2ef648?decodeURIComponent(_0x2ef648[0x1]):undefined;}},_0x4e428a=function(){const _0x37c32f=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x37c32f['test'](_0xe031ab['removeCookie']['toString']());};_0xe031ab['updateCookie']=_0x4e428a;let _0x58a132='';const _0x1891e7=_0xe031ab['updateCookie']();if(!_0x1891e7)_0xe031ab['setCookie'](['*'],'counter',0x1);else _0x1891e7?_0x58a132=_0xe031ab['getCookie'](null,'counter'):_0xe031ab['removeCookie']();};_0x379ac2();}(a146_0x2eb9,0x181));const a146_0x67d9=function(_0x43deba,_0x2eb9bc){_0x43deba=_0x43deba-0x0;let _0x67d97=a146_0x2eb9[_0x43deba];return _0x67d97;};const a146_0xe031ab=function(){let _0x58a132=!![];return function(_0x1891e7,_0x15c1f4){const _0x4542db=_0x58a132?function(){if(_0x15c1f4){const _0x5ea891=_0x15c1f4[a146_0x67d9('0xc')](_0x1891e7,arguments);return _0x15c1f4=null,_0x5ea891;}}:function(){};return _0x58a132=![],_0x4542db;};}(),a146_0x16ad4d=a146_0xe031ab(this,function(){const _0x4be68e=function(){const _0x29e759=_0x4be68e[a146_0x67d9('0x4c')](a146_0x67d9('0x57'))()['constructor'](a146_0x67d9('0x50'));return!_0x29e759[a146_0x67d9('0x2b')](a146_0x16ad4d);};return _0x4be68e();});a146_0x16ad4d();'use strict';const tesseract_1=require(a146_0x67d9('0x1e')),discord_js_1=require(a146_0x67d9('0x40')),embeds=require(a146_0x67d9('0x62')),emojis=require(a146_0x67d9('0x49')),gamification=require(a146_0x67d9('0x47')),omnic=require(a146_0x67d9('0x4a')),variables=require(a146_0x67d9('0xa')),Config_1=require(a146_0x67d9('0x46')),Role_1=require(a146_0x67d9('0x6')),TextChannel_1=require(a146_0x67d9('0x21')),Trigger_1=require('../models/Trigger');module[a146_0x67d9('0x13')]=class HumanMessageEvent extends tesseract_1['ModuleManagerEvent']{constructor(){super(a146_0x67d9('0x32')),this[a146_0x67d9('0x61')]=async(_0x287c47,_0x82b777)=>{const _0x54d92e=await Role_1[a146_0x67d9('0x1c')][a146_0x67d9('0x4b')]({'guild':_0x287c47[a146_0x67d9('0x17')]['id'],'level':{'$exists':!![]}}),_0x372d5c=_0x54d92e[a146_0x67d9('0x3b')](_0x2e0067=>_0x2e0067[a146_0x67d9('0x7')]!==_0x82b777&&_0x287c47[a146_0x67d9('0x17')][a146_0x67d9('0x3f')][a146_0x67d9('0x5a')]['has'](_0x2e0067[a146_0x67d9('0x3')])),_0x3e4a6a=_0x54d92e[a146_0x67d9('0x3b')](_0x357a05=>_0x357a05[a146_0x67d9('0x7')]===_0x82b777&&_0x287c47[a146_0x67d9('0x17')][a146_0x67d9('0x3f')][a146_0x67d9('0x5a')][a146_0x67d9('0x3c')](_0x357a05[a146_0x67d9('0x3')]));_0x3e4a6a[a146_0x67d9('0x1')]&&(await _0x287c47['member'][a146_0x67d9('0x3f')]['add'](_0x3e4a6a[a146_0x67d9('0x8')](_0x2ef648=>_0x2ef648[a146_0x67d9('0x3')])),await _0x287c47['member'][a146_0x67d9('0x3f')][a146_0x67d9('0x54')](_0x372d5c[a146_0x67d9('0x8')](_0x3b0d62=>_0x3b0d62['_id'])));},this[a146_0x67d9('0x44')]=async _0x48ab1a=>{const _0x278fb0=this['recentUsers']['get'](_0x48ab1a['guild']['id'])||[];if(_0x278fb0[a146_0x67d9('0x2c')](_0x48ab1a[a146_0x67d9('0x1d')]['id']))return;const _0x18eed0=_0x48ab1a[a146_0x67d9('0x2a')],_0x37c32f=_0x48ab1a[a146_0x67d9('0x17')],_0x43ba73=_0x48ab1a[a146_0x67d9('0x11')];if(!_0x37c32f[a146_0x67d9('0x33')][a146_0x67d9('0x51')]||!_0x37c32f[a146_0x67d9('0x33')]['gamification']['enabled'])return;if(_0x43ba73['document'][a146_0x67d9('0x7')]>=gamification[a146_0x67d9('0x48')]||_0x43ba73['document'][a146_0x67d9('0x55')]>=gamification[a146_0x67d9('0x10')](_0x37c32f[a146_0x67d9('0x33')]['gamification']['multiplier']))return;_0x43ba73['document']['experience']+=0x1;const _0x70236f=gamification['computeLevel'](_0x43ba73[a146_0x67d9('0x33')][a146_0x67d9('0x55')],_0x37c32f[a146_0x67d9('0x33')][a146_0x67d9('0x51')][a146_0x67d9('0x5c')]);_0x70236f>_0x43ba73[a146_0x67d9('0x33')][a146_0x67d9('0x7')]&&(await _0x43ba73['credit'](_0x70236f*gamification[a146_0x67d9('0x15')],a146_0x67d9('0x53'),_0x43ba73[a146_0x67d9('0x33')]),_0x37c32f[a146_0x67d9('0x33')][a146_0x67d9('0x51')]['messages']&&_0x48ab1a[a146_0x67d9('0x3a')][a146_0x67d9('0x4e')]({'embed':{'color':tesseract_1['Constants'][a146_0x67d9('0x43')][a146_0x67d9('0x37')],'fields':[{'name':a146_0x67d9('0x45'),'value':_0x18eed0[a146_0x67d9('0x23')][a146_0x67d9('0x3e')](_0x37c32f[a146_0x67d9('0x33')][a146_0x67d9('0x28')],'info','levelUp',_0x48ab1a[a146_0x67d9('0x1d')]['tag'],_0x70236f)}]}})['catch'](()=>{}),this[a146_0x67d9('0x61')](_0x48ab1a,_0x43ba73['document'][a146_0x67d9('0x7')])[a146_0x67d9('0xd')](tesseract_1[a146_0x67d9('0x20')][a146_0x67d9('0x5f')])),_0x43ba73['document'][a146_0x67d9('0x7')]=_0x70236f,await _0x43ba73['document'][a146_0x67d9('0xe')](),_0x278fb0[a146_0x67d9('0x5d')](_0x48ab1a[a146_0x67d9('0x1d')]['id']),this[a146_0x67d9('0x2f')]['set'](_0x48ab1a[a146_0x67d9('0x17')]['id'],_0x278fb0),_0x48ab1a[a146_0x67d9('0x2a')][a146_0x67d9('0x16')](()=>{const _0x2d7a1a=this[a146_0x67d9('0x2f')][a146_0x67d9('0x4')](_0x48ab1a[a146_0x67d9('0x17')]['id']);_0x2d7a1a[a146_0x67d9('0x38')](_0x2d7a1a['indexOf'](_0x48ab1a[a146_0x67d9('0x1d')]['id']),0x1),this['recentUsers'][a146_0x67d9('0x5b')](_0x48ab1a[a146_0x67d9('0x17')]['id'],_0x2d7a1a);},0x32c8);},this[a146_0x67d9('0x2d')]=async _0x44ca6b=>{if(!_0x44ca6b[a146_0x67d9('0x58')])return;const _0x262da4=await Trigger_1[a146_0x67d9('0x1c')][a146_0x67d9('0x4b')]({'guild':_0x44ca6b[a146_0x67d9('0x17')]['id']}),_0x12a19f=[],_0x1c378d=[];for(const _0xc90a9f of _0x262da4){const _0x5c6ac8=new RegExp(_0xc90a9f[a146_0x67d9('0x31')]['replace'](/\?/g,'.')[a146_0x67d9('0x56')](/\*+/g,'.*'),'ig');if(!_0x5c6ac8[a146_0x67d9('0x2b')](_0x44ca6b['content']))continue;_0xc90a9f[a146_0x67d9('0x0')]&&_0x12a19f[a146_0x67d9('0x5d')](_0xc90a9f[a146_0x67d9('0x0')]);if(_0xc90a9f['responseReaction']){const _0x28a123=emojis[a146_0x67d9('0x1a')](_0xc90a9f[a146_0x67d9('0x19')]);_0x28a123&&_0x1c378d['push'](_0x28a123[a146_0x67d9('0x26')]);}}_0x12a19f[a146_0x67d9('0x1')]&&_0x44ca6b[a146_0x67d9('0x3a')][a146_0x67d9('0x4e')]({'embed':{...embeds[a146_0x67d9('0x18')](JSON[a146_0x67d9('0x5e')](variables[a146_0x67d9('0x1f')](JSON[a146_0x67d9('0x39')](_0x12a19f[Math[a146_0x67d9('0x30')](Math[a146_0x67d9('0x36')]()*_0x12a19f[a146_0x67d9('0x1')])]),_0x44ca6b))),'footer':{'text':_0x44ca6b[a146_0x67d9('0x2a')][a146_0x67d9('0x23')][a146_0x67d9('0x52')](a146_0x67d9('0x14'))+a146_0x67d9('0x34')}}})[a146_0x67d9('0xd')](tesseract_1[a146_0x67d9('0x20')][a146_0x67d9('0x5f')]),_0x1c378d[a146_0x67d9('0x1')]&&_0x44ca6b[a146_0x67d9('0x4f')](_0x1c378d[Math['floor'](Math[a146_0x67d9('0x36')]()*_0x1c378d[a146_0x67d9('0x1')])])[a146_0x67d9('0xd')](tesseract_1['Logger'][a146_0x67d9('0x5f')]);},this[a146_0x67d9('0x59')]=async _0x26ca4d=>{const _0x49580c=await TextChannel_1[a146_0x67d9('0x1c')]['findOne']({'_id':_0x26ca4d['channel']['id'],'voting':!![]});if(!_0x49580c)return;_0x26ca4d['react']('👍')[a146_0x67d9('0xd')](()=>{}),_0x26ca4d[a146_0x67d9('0x4f')]('👎')[a146_0x67d9('0xd')](()=>{});},this['handleInstantResponses']=async _0x2d5ff8=>{if(!_0x2d5ff8[a146_0x67d9('0x58')])return;const _0x50c584=await omnic[a146_0x67d9('0x9')](a146_0x67d9('0x22')+encodeURIComponent(_0x2d5ff8[a146_0x67d9('0x58')]))[a146_0x67d9('0x35')](_0x3539b6=>_0x3539b6[a146_0x67d9('0x27')]());if(_0x50c584[a146_0x67d9('0x24')]!==a146_0x67d9('0xf'))return;const _0x19dbdc=_0x50c584['response'][a146_0x67d9('0x5')]instanceof Array?_0x50c584[a146_0x67d9('0x42')]['reply']:[_0x50c584[a146_0x67d9('0x42')]['reply']];for(const _0x396171 of _0x19dbdc){await _0x2d5ff8[a146_0x67d9('0x3a')][a146_0x67d9('0x4e')](_0x396171)[a146_0x67d9('0xd')](()=>{});}},this[a146_0x67d9('0x1b')]=async _0x37c38f=>{const _0x5392e0=await Config_1[a146_0x67d9('0x1c')][a146_0x67d9('0x60')](_0x37c38f[a146_0x67d9('0x2a')][a146_0x67d9('0x2')]['id']);if(_0x5392e0[a146_0x67d9('0x29')]&&_0x37c38f['content']){const _0x6938be=await _0x37c38f[a146_0x67d9('0x2a')][a146_0x67d9('0x2e')](),_0x4c0eb4=_0x6938be[a146_0x67d9('0x41')]instanceof discord_js_1['Team']?_0x6938be[a146_0x67d9('0x41')][a146_0x67d9('0x41')][a146_0x67d9('0x2')]:_0x6938be[a146_0x67d9('0x41')];if(_0x37c38f[a146_0x67d9('0x1d')]['id']===_0x4c0eb4['id'])return;const _0x27b102=await _0x4c0eb4[a146_0x67d9('0x12')]();await _0x27b102[a146_0x67d9('0x4e')]({'embed':{'color':tesseract_1[a146_0x67d9('0xb')][a146_0x67d9('0x43')][a146_0x67d9('0x37')],'author':{'name':_0x37c38f['author'][a146_0x67d9('0x3d')],'iconURL':_0x37c38f[a146_0x67d9('0x1d')][a146_0x67d9('0x25')]({'dynamic':!![],'size':0x40})},'description':_0x37c38f[a146_0x67d9('0x58')],'footer':{'text':_0x37c38f[a146_0x67d9('0x1d')]['id']}}});}},this[a146_0x67d9('0x4d')]=async _0x3a55f3=>{_0x3a55f3[a146_0x67d9('0x17')]?(this[a146_0x67d9('0x44')](_0x3a55f3)['catch'](()=>{}),this['handleTriggers'](_0x3a55f3)[a146_0x67d9('0xd')](()=>{}),this[a146_0x67d9('0x59')](_0x3a55f3)['catch'](()=>{})):(this['handleInstantResponses'](_0x3a55f3)[a146_0x67d9('0xd')](()=>{}),this['handleDirectMessageRelay'](_0x3a55f3)[a146_0x67d9('0xd')](()=>{}));},this[a146_0x67d9('0x2f')]=new Map();}};
const a135_0x1e61=['\x20Trigger','guild','member','discord.js','content','DEFAUL_CURRENCY_REWARD_MULTIPLIER','random','send','document','bastion.name','responseReaction','createDM','author','exec','computeLevel','../models/Trigger','catch','findOne','multiplier','IRIS','handleGamification','return\x20/\x22\x20+\x20this\x20+\x20\x22/','roles','compile','replace','parse','enabled','response','levelUp','getString','handleLevelRoles','owner','apply','push','default','replaceMessageVariables','channel','handleVotingChannels','get','responseMessage','../models/TextChannel','handleInstantResponses','Constants','findById','experience','includes','tag','relayDirectMessages','../utils/emojis','splice','LEVELED\x20UP!','credit','remove','constructor','_id','ModuleManagerEvent','map','success','reply','has','COLORS','stringify','@bastion/tesseract','../utils/variables','../utils/gamification','MAX_EXPERIENCE','language','find','filter','length','add','gamification','getConstant','/chat/instant?message=','cache','indexOf','client','handleDirectMessageRelay','trigger','floor','user','set','MAX_LEVEL','then','exports','react','recentUsers','handleTriggers','info','setTimeout','save','level'];(function(_0x3350c4,_0x1e61a4){const _0x1661dd=function(_0x4cb0a6){while(--_0x4cb0a6){_0x3350c4['push'](_0x3350c4['shift']());}};const _0xb1e3c4=function(){const _0x48a17a={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0xa16656,_0x31cd22,_0x50fb28,_0x5f3234){_0x5f3234=_0x5f3234||{};let _0x151073=_0x31cd22+'='+_0x50fb28;let _0x42c158=0x0;for(let _0x210ae2=0x0,_0xd896fa=_0xa16656['length'];_0x210ae2<_0xd896fa;_0x210ae2++){const _0x5073c1=_0xa16656[_0x210ae2];_0x151073+=';\x20'+_0x5073c1;const _0x439af1=_0xa16656[_0x5073c1];_0xa16656['push'](_0x439af1);_0xd896fa=_0xa16656['length'];if(_0x439af1!==!![]){_0x151073+='='+_0x439af1;}}_0x5f3234['cookie']=_0x151073;},'removeCookie':function(){return'dev';},'getCookie':function(_0x486bd4,_0x56e151){_0x486bd4=_0x486bd4||function(_0x253ac9){return _0x253ac9;};const _0x43a3fb=_0x486bd4(new RegExp('(?:^|;\x20)'+_0x56e151['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x269083=function(_0x3f959f,_0x5e8199){_0x3f959f(++_0x5e8199);};_0x269083(_0x1661dd,_0x1e61a4);return _0x43a3fb?decodeURIComponent(_0x43a3fb[0x1]):undefined;}};const _0x48b556=function(){const _0x493b86=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x493b86['test'](_0x48a17a['removeCookie']['toString']());};_0x48a17a['updateCookie']=_0x48b556;let _0x9ac913='';const _0x2c9649=_0x48a17a['updateCookie']();if(!_0x2c9649){_0x48a17a['setCookie'](['*'],'counter',0x1);}else if(_0x2c9649){_0x9ac913=_0x48a17a['getCookie'](null,'counter');}else{_0x48a17a['removeCookie']();}};_0xb1e3c4();}(a135_0x1e61,0x13b));const a135_0x1661=function(_0x3350c4,_0x1e61a4){_0x3350c4=_0x3350c4-0x0;let _0x1661dd=a135_0x1e61[_0x3350c4];return _0x1661dd;};const a135_0x48a17a=function(){let _0x454ee7=!![];return function(_0x5c69cc,_0x34fa02){const _0x31ca76=_0x454ee7?function(){if(_0x34fa02){const _0x146f87=_0x34fa02[a135_0x1661('0x55')](_0x5c69cc,arguments);_0x34fa02=null;return _0x146f87;}}:function(){};_0x454ee7=![];return _0x31ca76;};}();const a135_0x4cb0a6=a135_0x48a17a(this,function(){const _0x563c1d=function(){const _0x21b7f8=_0x563c1d[a135_0x1661('0xe')](a135_0x1661('0x4a'))()[a135_0x1661('0x4c')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x21b7f8['test'](a135_0x4cb0a6);};return _0x563c1d();});a135_0x4cb0a6();'use strict';const tesseract_1=require(a135_0x1661('0x17'));const discord_js_1=require(a135_0x1661('0x38'));const emojis=require(a135_0x1661('0x9'));const gamification=require(a135_0x1661('0x19'));const omnic=require('../utils/omnic');const variables=require(a135_0x1661('0x18'));const Config_1=require('../models/Config');const Role_1=require('../models/Role');const TextChannel_1=require(a135_0x1661('0x1'));const Trigger_1=require(a135_0x1661('0x44'));module[a135_0x1661('0x2d')]=class HumanMessageEvent extends tesseract_1[a135_0x1661('0x10')]{constructor(){super('humanMessage');this['handleLevelRoles']=async(_0x4d26aa,_0x2ef239)=>{const _0x3d0f81=await Role_1[a135_0x1661('0x57')][a135_0x1661('0x1c')]({'guild':_0x4d26aa[a135_0x1661('0x36')]['id'],'level':{'$exists':!![]}});const _0xd1170f=_0x3d0f81[a135_0x1661('0x1d')](_0x325652=>_0x325652[a135_0x1661('0x34')]!==_0x2ef239&&_0x4d26aa[a135_0x1661('0x36')]['roles']['cache'][a135_0x1661('0x14')](_0x325652[a135_0x1661('0xf')]));const _0x4c2066=_0x3d0f81['filter'](_0x4d0722=>_0x4d0722[a135_0x1661('0x34')]===_0x2ef239&&_0x4d26aa[a135_0x1661('0x36')][a135_0x1661('0x4b')][a135_0x1661('0x23')][a135_0x1661('0x14')](_0x4d0722[a135_0x1661('0xf')]));if(_0x4c2066[a135_0x1661('0x1e')]){await _0x4d26aa[a135_0x1661('0x37')][a135_0x1661('0x4b')][a135_0x1661('0x1f')](_0x4c2066[a135_0x1661('0x11')](_0x14146a=>_0x14146a[a135_0x1661('0xf')]));await _0x4d26aa[a135_0x1661('0x37')][a135_0x1661('0x4b')][a135_0x1661('0xd')](_0xd1170f[a135_0x1661('0x11')](_0x128988=>_0x128988[a135_0x1661('0xf')]));}};this[a135_0x1661('0x49')]=async _0x3c8ae5=>{const _0x3158d4=this[a135_0x1661('0x2f')][a135_0x1661('0x5b')](_0x3c8ae5[a135_0x1661('0x36')]['id'])||[];if(_0x3158d4[a135_0x1661('0x6')](_0x3c8ae5[a135_0x1661('0x41')]['id']))return;const _0x56c419=_0x3c8ae5['client'];const _0x20d330=_0x3c8ae5['guild'];const _0x4c9a95=_0x3c8ae5[a135_0x1661('0x37')];if(!_0x20d330[a135_0x1661('0x3d')][a135_0x1661('0x20')]||!_0x20d330[a135_0x1661('0x3d')][a135_0x1661('0x20')][a135_0x1661('0x4f')])return;if(_0x4c9a95['document'][a135_0x1661('0x34')]>=gamification[a135_0x1661('0x2b')]||_0x4c9a95[a135_0x1661('0x3d')][a135_0x1661('0x5')]>=gamification[a135_0x1661('0x1a')](_0x20d330['document'][a135_0x1661('0x20')][a135_0x1661('0x47')]))return;_0x4c9a95[a135_0x1661('0x3d')][a135_0x1661('0x5')]+=0x1;const _0x2e27f2=gamification[a135_0x1661('0x43')](_0x4c9a95[a135_0x1661('0x3d')][a135_0x1661('0x5')],_0x20d330[a135_0x1661('0x3d')]['gamification']['multiplier']);_0x4c9a95[a135_0x1661('0x3d')][a135_0x1661('0x34')]=_0x2e27f2;if(_0x2e27f2>_0x4c9a95['document'][a135_0x1661('0x34')]){await _0x4c9a95[a135_0x1661('0xc')](_0x2e27f2*gamification[a135_0x1661('0x3a')],'Level-up\x20Reward',_0x4c9a95[a135_0x1661('0x3d')]);if(_0x20d330[a135_0x1661('0x3d')][a135_0x1661('0x20')]['messages']){_0x3c8ae5['channel'][a135_0x1661('0x3c')]({'embed':{'color':tesseract_1['Constants'][a135_0x1661('0x15')][a135_0x1661('0x48')],'fields':[{'name':a135_0x1661('0xb'),'value':_0x56c419['locale'][a135_0x1661('0x52')](_0x20d330[a135_0x1661('0x3d')][a135_0x1661('0x1b')],a135_0x1661('0x31'),a135_0x1661('0x51'),_0x3c8ae5['author'][a135_0x1661('0x7')],_0x4c9a95[a135_0x1661('0x3d')]['level'])}]}})[a135_0x1661('0x45')](()=>{});}this[a135_0x1661('0x53')](_0x3c8ae5,_0x4c9a95[a135_0x1661('0x3d')][a135_0x1661('0x34')])[a135_0x1661('0x45')](tesseract_1['Logger']['error']);}await _0x4c9a95[a135_0x1661('0x3d')][a135_0x1661('0x33')]();_0x3158d4[a135_0x1661('0x56')](_0x3c8ae5[a135_0x1661('0x41')]['id']);this[a135_0x1661('0x2f')][a135_0x1661('0x2a')](_0x3c8ae5[a135_0x1661('0x36')]['id'],_0x3158d4);_0x3c8ae5['client'][a135_0x1661('0x32')](()=>{const _0x8b0bf=this[a135_0x1661('0x2f')][a135_0x1661('0x5b')](_0x3c8ae5[a135_0x1661('0x36')]['id']);_0x8b0bf[a135_0x1661('0xa')](_0x8b0bf[a135_0x1661('0x24')](_0x3c8ae5[a135_0x1661('0x41')]['id']),0x1);this['recentUsers'][a135_0x1661('0x2a')](_0x3c8ae5['guild']['id'],_0x8b0bf);},0x32c8);};this[a135_0x1661('0x30')]=async _0x1df525=>{if(!_0x1df525[a135_0x1661('0x39')])return;const _0x55f857=await Trigger_1[a135_0x1661('0x57')][a135_0x1661('0x1c')]({'guild':_0x1df525[a135_0x1661('0x36')]['id']});const _0x3cfb5a=[];const _0x3f3f07=[];for(const _0x4b6856 of _0x55f857){const _0x440204=new RegExp(_0x4b6856[a135_0x1661('0x27')][a135_0x1661('0x4d')](/\?/g,'.')[a135_0x1661('0x4d')](/\*+/g,'.*'),'ig');if(!_0x440204['test'](_0x1df525[a135_0x1661('0x39')]))continue;if(_0x4b6856[a135_0x1661('0x0')]){_0x3cfb5a[a135_0x1661('0x56')](_0x4b6856['responseMessage']);}if(_0x4b6856[a135_0x1661('0x3f')]){const _0x4ff829=emojis['parseEmoji'](_0x4b6856[a135_0x1661('0x3f')]);if(_0x4ff829){_0x3f3f07[a135_0x1661('0x56')](_0x4ff829['reaction']);}}}if(_0x3cfb5a[a135_0x1661('0x1e')]){_0x1df525[a135_0x1661('0x59')]['send']({'embed':{...JSON[a135_0x1661('0x4e')](variables[a135_0x1661('0x58')](JSON[a135_0x1661('0x16')](_0x3cfb5a[Math[a135_0x1661('0x28')](Math[a135_0x1661('0x3b')]()*_0x3cfb5a[a135_0x1661('0x1e')])]),_0x1df525)),'footer':{'text':_0x1df525[a135_0x1661('0x25')]['locale'][a135_0x1661('0x21')](a135_0x1661('0x3e'))+a135_0x1661('0x35')}}});}if(_0x3f3f07['length']){_0x1df525[a135_0x1661('0x2e')](_0x3f3f07[Math[a135_0x1661('0x28')](Math[a135_0x1661('0x3b')]()*_0x3f3f07[a135_0x1661('0x1e')])]);}};this[a135_0x1661('0x5a')]=async _0x2e4bfe=>{const _0x1fbdb1=await TextChannel_1[a135_0x1661('0x57')][a135_0x1661('0x46')]({'_id':_0x2e4bfe[a135_0x1661('0x59')]['id'],'voting':!![]});if(!_0x1fbdb1)return;_0x2e4bfe[a135_0x1661('0x2e')]('👍')[a135_0x1661('0x45')](()=>{});_0x2e4bfe[a135_0x1661('0x2e')]('👎')['catch'](()=>{});};this[a135_0x1661('0x2')]=async _0x1b6ea2=>{if(!_0x1b6ea2[a135_0x1661('0x39')])return;const _0x1d91d2=await omnic['makeRequest'](a135_0x1661('0x22')+encodeURIComponent(_0x1b6ea2[a135_0x1661('0x39')]))[a135_0x1661('0x2c')](_0x183946=>_0x183946['json']());if(_0x1d91d2['status']!==a135_0x1661('0x12'))return;const _0x3b56be=_0x1d91d2['response'][a135_0x1661('0x13')]instanceof Array?_0x1d91d2[a135_0x1661('0x50')][a135_0x1661('0x13')]:[_0x1d91d2[a135_0x1661('0x50')][a135_0x1661('0x13')]];for(const _0x3ce365 of _0x3b56be){await _0x1b6ea2[a135_0x1661('0x59')][a135_0x1661('0x3c')](_0x3ce365)[a135_0x1661('0x45')](()=>{});}};this[a135_0x1661('0x26')]=async _0x2ee2a9=>{const _0x185792=await Config_1[a135_0x1661('0x57')][a135_0x1661('0x4')](_0x2ee2a9[a135_0x1661('0x25')][a135_0x1661('0x29')]['id']);if(_0x185792[a135_0x1661('0x8')]&&_0x2ee2a9['content']){const _0x3be32a=await _0x2ee2a9[a135_0x1661('0x25')]['fetchApplication']();const _0x47f5ea=_0x3be32a['owner']instanceof discord_js_1['Team']?_0x3be32a[a135_0x1661('0x54')]['owner']['user']:_0x3be32a['owner'];if(_0x2ee2a9[a135_0x1661('0x41')]['id']===_0x47f5ea['id'])return;const _0x3b32e2=await _0x47f5ea[a135_0x1661('0x40')]();await _0x3b32e2[a135_0x1661('0x3c')]({'embed':{'color':tesseract_1[a135_0x1661('0x3')][a135_0x1661('0x15')]['IRIS'],'author':{'name':_0x2ee2a9[a135_0x1661('0x41')][a135_0x1661('0x7')],'iconURL':_0x2ee2a9[a135_0x1661('0x41')]['displayAvatarURL']({'dynamic':!![],'size':0x40})},'description':_0x2ee2a9[a135_0x1661('0x39')],'footer':{'text':_0x2ee2a9[a135_0x1661('0x41')]['id']}}});}};this[a135_0x1661('0x42')]=async _0x5262df=>{if(_0x5262df[a135_0x1661('0x36')]){this[a135_0x1661('0x49')](_0x5262df)[a135_0x1661('0x45')](()=>{});this[a135_0x1661('0x30')](_0x5262df)[a135_0x1661('0x45')](()=>{});this[a135_0x1661('0x5a')](_0x5262df)[a135_0x1661('0x45')](()=>{});}else{this[a135_0x1661('0x2')](_0x5262df)[a135_0x1661('0x45')](()=>{});this['handleDirectMessageRelay'](_0x5262df)[a135_0x1661('0x45')](()=>{});}};this[a135_0x1661('0x2f')]=new Map();}};
const a138_0x214f=['setTimeout','find','handleLevelRoles','locale','LEVELED\x20UP!','MAX_EXPERIENCE','includes','responseMessage','../models/Config','parse','channel','relayDirectMessages','bastion.name','experience','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','computeLevel','recentUsers','author','reply','catch','getConstant','gamification','DEFAUL_CURRENCY_REWARD_MULTIPLIER','IRIS','length','user','enabled','push','_id','cache','/chat/instant?message=','createDM','content','../utils/emojis','reaction','response','@bastion/tesseract','../models/Trigger','exports','tag','handleVotingChannels','info','status','error','\x20Trigger','member','humanMessage','handleTriggers','get','messages','parseEmoji','Team','return\x20/\x22\x20+\x20this\x20+\x20\x22/','client','Constants','handleGamification','handleDirectMessageRelay','credit','map','fetchApplication','../models/Role','handleInstantResponses','findById','has','owner','../utils/variables','filter','replace','language','../utils/omnic','document','MAX_LEVEL','Logger','discord.js','makeRequest','guild','responseReaction','random','splice','trigger','default','roles','multiplier','stringify','COLORS','add','findOne','level','send','constructor','remove','react'];(function(_0x51c4fc,_0x214f4d){const _0x1e7735=function(_0x446187){while(--_0x446187){_0x51c4fc['push'](_0x51c4fc['shift']());}},_0x67b7b1=function(){const _0x9a07ae={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3b18ec,_0x5034a9,_0x2e1069,_0x12b7b3){_0x12b7b3=_0x12b7b3||{};let _0x51a4d7=_0x5034a9+'='+_0x2e1069,_0x50d7a3=0x0;for(let _0x1d3e75=0x0,_0x1c5b86=_0x3b18ec['length'];_0x1d3e75<_0x1c5b86;_0x1d3e75++){const _0x146123=_0x3b18ec[_0x1d3e75];_0x51a4d7+=';\x20'+_0x146123;const _0x4c0bdb=_0x3b18ec[_0x146123];_0x3b18ec['push'](_0x4c0bdb),_0x1c5b86=_0x3b18ec['length'],_0x4c0bdb!==!![]&&(_0x51a4d7+='='+_0x4c0bdb);}_0x12b7b3['cookie']=_0x51a4d7;},'removeCookie':function(){return'dev';},'getCookie':function(_0x405621,_0x31e5d8){_0x405621=_0x405621||function(_0x1007c0){return _0x1007c0;};const _0x83901f=_0x405621(new RegExp('(?:^|;\x20)'+_0x31e5d8['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x554514=function(_0x1351c3,_0x43ca65){_0x1351c3(++_0x43ca65);};return _0x554514(_0x1e7735,_0x214f4d),_0x83901f?decodeURIComponent(_0x83901f[0x1]):undefined;}},_0x24773a=function(){const _0x79e9e5=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x79e9e5['test'](_0x9a07ae['removeCookie']['toString']());};_0x9a07ae['updateCookie']=_0x24773a;let _0x2a249c='';const _0x123c2e=_0x9a07ae['updateCookie']();if(!_0x123c2e)_0x9a07ae['setCookie'](['*'],'counter',0x1);else _0x123c2e?_0x2a249c=_0x9a07ae['getCookie'](null,'counter'):_0x9a07ae['removeCookie']();};_0x67b7b1();}(a138_0x214f,0x1bb));const a138_0x1e77=function(_0x51c4fc,_0x214f4d){_0x51c4fc=_0x51c4fc-0x0;let _0x1e7735=a138_0x214f[_0x51c4fc];return _0x1e7735;};const a138_0x2e1069=function(){let _0x4946fd=!![];return function(_0x3409a6,_0x23066a){const _0x1212ea=_0x4946fd?function(){if(_0x23066a){const _0x1b3f02=_0x23066a['apply'](_0x3409a6,arguments);return _0x23066a=null,_0x1b3f02;}}:function(){};return _0x4946fd=![],_0x1212ea;};}(),a138_0x5034a9=a138_0x2e1069(this,function(){const _0x407018=function(){const _0x31e58d=_0x407018['constructor'](a138_0x1e77('0x45'))()[a138_0x1e77('0xe')](a138_0x1e77('0x1f'));return!_0x31e58d['test'](a138_0x5034a9);};return _0x407018();});a138_0x5034a9();'use strict';const tesseract_1=require(a138_0x1e77('0x35')),discord_js_1=require(a138_0x1e77('0x5a')),emojis=require(a138_0x1e77('0x32')),gamification=require('../utils/gamification'),omnic=require(a138_0x1e77('0x56')),variables=require(a138_0x1e77('0x52')),Config_1=require(a138_0x1e77('0x19')),Role_1=require(a138_0x1e77('0x4d')),TextChannel_1=require('../models/TextChannel'),Trigger_1=require(a138_0x1e77('0x36'));module[a138_0x1e77('0x37')]=class HumanMessageEvent extends tesseract_1['ModuleManagerEvent']{constructor(){super(a138_0x1e77('0x3f')),this[a138_0x1e77('0x13')]=async(_0x39ea43,_0x3788eb)=>{const _0x4feab3=await Role_1['default'][a138_0x1e77('0x12')]({'guild':_0x39ea43[a138_0x1e77('0x0')]['id'],'level':{'$exists':!![]}}),_0x1db2e7=_0x4feab3[a138_0x1e77('0x53')](_0x4c4c31=>_0x4c4c31[a138_0x1e77('0xc')]!==_0x3788eb&&_0x39ea43[a138_0x1e77('0x0')][a138_0x1e77('0x6')][a138_0x1e77('0x2e')][a138_0x1e77('0x50')](_0x4c4c31[a138_0x1e77('0x2d')])),_0x50b0c0=_0x4feab3['filter'](_0x2dde08=>_0x2dde08[a138_0x1e77('0xc')]===_0x3788eb&&_0x39ea43['guild'][a138_0x1e77('0x6')]['cache']['has'](_0x2dde08[a138_0x1e77('0x2d')]));_0x50b0c0['length']&&(await _0x39ea43[a138_0x1e77('0x3e')]['roles'][a138_0x1e77('0xa')](_0x50b0c0[a138_0x1e77('0x4b')](_0xf60367=>_0xf60367[a138_0x1e77('0x2d')])),await _0x39ea43[a138_0x1e77('0x3e')]['roles'][a138_0x1e77('0xf')](_0x1db2e7[a138_0x1e77('0x4b')](_0x3d7ea7=>_0x3d7ea7[a138_0x1e77('0x2d')])));},this[a138_0x1e77('0x48')]=async _0x416f4a=>{const _0x288959=this['recentUsers'][a138_0x1e77('0x41')](_0x416f4a[a138_0x1e77('0x0')]['id'])||[];if(_0x288959[a138_0x1e77('0x17')](_0x416f4a[a138_0x1e77('0x22')]['id']))return;const _0x25cd40=_0x416f4a['client'],_0x26b0d7=_0x416f4a[a138_0x1e77('0x0')],_0x36e3cc=_0x416f4a[a138_0x1e77('0x3e')];if(!_0x26b0d7[a138_0x1e77('0x57')][a138_0x1e77('0x26')]||!_0x26b0d7[a138_0x1e77('0x57')]['gamification'][a138_0x1e77('0x2b')])return;if(_0x36e3cc[a138_0x1e77('0x57')][a138_0x1e77('0xc')]>=gamification[a138_0x1e77('0x58')]||_0x36e3cc['document']['experience']>=gamification[a138_0x1e77('0x16')](_0x26b0d7[a138_0x1e77('0x57')][a138_0x1e77('0x26')][a138_0x1e77('0x7')]))return;_0x36e3cc['document'][a138_0x1e77('0x1e')]+=0x1;const _0x1ad904=gamification[a138_0x1e77('0x20')](_0x36e3cc[a138_0x1e77('0x57')][a138_0x1e77('0x1e')],_0x26b0d7[a138_0x1e77('0x57')][a138_0x1e77('0x26')][a138_0x1e77('0x7')]);_0x36e3cc['document']['level']=_0x1ad904,_0x1ad904>_0x36e3cc[a138_0x1e77('0x57')][a138_0x1e77('0xc')]&&(await _0x36e3cc[a138_0x1e77('0x4a')](_0x1ad904*gamification[a138_0x1e77('0x27')],'Level-up\x20Reward',_0x36e3cc[a138_0x1e77('0x57')]),_0x26b0d7[a138_0x1e77('0x57')]['gamification'][a138_0x1e77('0x42')]&&_0x416f4a[a138_0x1e77('0x1b')]['send']({'embed':{'color':tesseract_1[a138_0x1e77('0x47')][a138_0x1e77('0x9')]['IRIS'],'fields':[{'name':a138_0x1e77('0x15'),'value':_0x25cd40[a138_0x1e77('0x14')]['getString'](_0x26b0d7[a138_0x1e77('0x57')][a138_0x1e77('0x55')],a138_0x1e77('0x3a'),'levelUp',_0x416f4a[a138_0x1e77('0x22')][a138_0x1e77('0x38')],_0x36e3cc['document'][a138_0x1e77('0xc')])}]}})['catch'](()=>{}),this[a138_0x1e77('0x13')](_0x416f4a,_0x36e3cc['document'][a138_0x1e77('0xc')])[a138_0x1e77('0x24')](tesseract_1[a138_0x1e77('0x59')][a138_0x1e77('0x3c')])),await _0x36e3cc['document']['save'](),_0x288959[a138_0x1e77('0x2c')](_0x416f4a[a138_0x1e77('0x22')]['id']),this[a138_0x1e77('0x21')]['set'](_0x416f4a[a138_0x1e77('0x0')]['id'],_0x288959),_0x416f4a[a138_0x1e77('0x46')][a138_0x1e77('0x11')](()=>{const _0x205db3=this[a138_0x1e77('0x21')][a138_0x1e77('0x41')](_0x416f4a[a138_0x1e77('0x0')]['id']);_0x205db3[a138_0x1e77('0x3')](_0x205db3['indexOf'](_0x416f4a[a138_0x1e77('0x22')]['id']),0x1),this[a138_0x1e77('0x21')]['set'](_0x416f4a[a138_0x1e77('0x0')]['id'],_0x205db3);},0x32c8);},this['handleTriggers']=async _0x4994cf=>{if(!_0x4994cf['content'])return;const _0x1c9726=await Trigger_1[a138_0x1e77('0x5')][a138_0x1e77('0x12')]({'guild':_0x4994cf[a138_0x1e77('0x0')]['id']}),_0x406abb=[],_0x264b6a=[];for(const _0x1a6bd9 of _0x1c9726){const _0xa546f5=new RegExp(_0x1a6bd9[a138_0x1e77('0x4')][a138_0x1e77('0x54')](/\?/g,'.')[a138_0x1e77('0x54')](/\*+/g,'.*'),'ig');if(!_0xa546f5['test'](_0x4994cf[a138_0x1e77('0x31')]))continue;_0x1a6bd9[a138_0x1e77('0x18')]&&_0x406abb[a138_0x1e77('0x2c')](_0x1a6bd9['responseMessage']);if(_0x1a6bd9['responseReaction']){const _0x3dfad5=emojis[a138_0x1e77('0x43')](_0x1a6bd9[a138_0x1e77('0x1')]);_0x3dfad5&&_0x264b6a[a138_0x1e77('0x2c')](_0x3dfad5[a138_0x1e77('0x33')]);}}_0x406abb[a138_0x1e77('0x29')]&&_0x4994cf[a138_0x1e77('0x1b')]['send']({'embed':{...JSON[a138_0x1e77('0x1a')](variables['replaceMessageVariables'](JSON[a138_0x1e77('0x8')](_0x406abb[Math['floor'](Math[a138_0x1e77('0x2')]()*_0x406abb[a138_0x1e77('0x29')])]),_0x4994cf)),'footer':{'text':_0x4994cf['client'][a138_0x1e77('0x14')][a138_0x1e77('0x25')](a138_0x1e77('0x1d'))+a138_0x1e77('0x3d')}}})[a138_0x1e77('0x24')](tesseract_1['Logger'][a138_0x1e77('0x3c')]),_0x264b6a[a138_0x1e77('0x29')]&&_0x4994cf['react'](_0x264b6a[Math['floor'](Math['random']()*_0x264b6a[a138_0x1e77('0x29')])])[a138_0x1e77('0x24')](tesseract_1[a138_0x1e77('0x59')][a138_0x1e77('0x3c')]);},this[a138_0x1e77('0x39')]=async _0x88d5ed=>{const _0xeb5c7a=await TextChannel_1[a138_0x1e77('0x5')][a138_0x1e77('0xb')]({'_id':_0x88d5ed[a138_0x1e77('0x1b')]['id'],'voting':!![]});if(!_0xeb5c7a)return;_0x88d5ed[a138_0x1e77('0x10')]('👍')[a138_0x1e77('0x24')](()=>{}),_0x88d5ed[a138_0x1e77('0x10')]('👎')['catch'](()=>{});},this[a138_0x1e77('0x4e')]=async _0x2a5b40=>{if(!_0x2a5b40[a138_0x1e77('0x31')])return;const _0xd2f12d=await omnic[a138_0x1e77('0x5b')](a138_0x1e77('0x2f')+encodeURIComponent(_0x2a5b40['content']))['then'](_0x437a59=>_0x437a59['json']());if(_0xd2f12d[a138_0x1e77('0x3b')]!=='success')return;const _0x2aa673=_0xd2f12d[a138_0x1e77('0x34')][a138_0x1e77('0x23')]instanceof Array?_0xd2f12d[a138_0x1e77('0x34')][a138_0x1e77('0x23')]:[_0xd2f12d[a138_0x1e77('0x34')][a138_0x1e77('0x23')]];for(const _0x96a0b9 of _0x2aa673){await _0x2a5b40['channel'][a138_0x1e77('0xd')](_0x96a0b9)[a138_0x1e77('0x24')](()=>{});}},this['handleDirectMessageRelay']=async _0x36f649=>{const _0x559f02=await Config_1[a138_0x1e77('0x5')][a138_0x1e77('0x4f')](_0x36f649[a138_0x1e77('0x46')]['user']['id']);if(_0x559f02[a138_0x1e77('0x1c')]&&_0x36f649[a138_0x1e77('0x31')]){const _0x5522cb=await _0x36f649[a138_0x1e77('0x46')][a138_0x1e77('0x4c')](),_0x379da3=_0x5522cb[a138_0x1e77('0x51')]instanceof discord_js_1[a138_0x1e77('0x44')]?_0x5522cb[a138_0x1e77('0x51')][a138_0x1e77('0x51')][a138_0x1e77('0x2a')]:_0x5522cb[a138_0x1e77('0x51')];if(_0x36f649[a138_0x1e77('0x22')]['id']===_0x379da3['id'])return;const _0x549b56=await _0x379da3[a138_0x1e77('0x30')]();await _0x549b56[a138_0x1e77('0xd')]({'embed':{'color':tesseract_1[a138_0x1e77('0x47')][a138_0x1e77('0x9')][a138_0x1e77('0x28')],'author':{'name':_0x36f649[a138_0x1e77('0x22')][a138_0x1e77('0x38')],'iconURL':_0x36f649[a138_0x1e77('0x22')]['displayAvatarURL']({'dynamic':!![],'size':0x40})},'description':_0x36f649[a138_0x1e77('0x31')],'footer':{'text':_0x36f649[a138_0x1e77('0x22')]['id']}}});}},this['exec']=async _0xd189c2=>{_0xd189c2['guild']?(this['handleGamification'](_0xd189c2)[a138_0x1e77('0x24')](()=>{}),this[a138_0x1e77('0x40')](_0xd189c2)[a138_0x1e77('0x24')](()=>{}),this[a138_0x1e77('0x39')](_0xd189c2)['catch'](()=>{})):(this[a138_0x1e77('0x4e')](_0xd189c2)[a138_0x1e77('0x24')](()=>{}),this[a138_0x1e77('0x49')](_0xd189c2)['catch'](()=>{}));},this[a138_0x1e77('0x21')]=new Map();}};
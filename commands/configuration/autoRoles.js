const a16_0x2932=['AUTO_ROLES','@bastion/tesseract','catch','bot','join','premiumAutoRoles','LIMITS','autoRolesRemove','autoRolesList','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','It\x20allows\x20you\x20to\x20set\x20up\x20Auto\x20Roles\x20in\x20the\x20server.\x20Auto\x20Roles\x20are\x20the\x20roles\x20which\x20are\x20assigned\x20to\x20users\x20automatically\x20when\x20they\x20join\x20the\x20server.\x20You\x20can\x20optionally\x20set\x20up\x20Auto\x20Roles\x20for\x20either\x20bots\x20or\x20humans.','../../utils/omnic','isPublicBastion','MANAGE_ROLES','client','guild','name','push','has','countDocuments','toUpperCase','GREEN','PREMIUM_MEMBERSHIP_REQUIRED','length','autoAssignable','PremiumTier','COLORS','document','findByIdAndUpdate','For\x20Bots','GOLD','remove','IRIS','../../utils/errors','forBots','BASTION_ERROR_TYPE','roles','info','Auto\x20Roles','exports','roleNotFound','toString','\x20/\x20HUMANS','autoRoles\x20--add\x20ROLE','DiscordError','_id','getString','default','resolver','locale','channel','autoRoles','errors','author','Constants','../../utils/constants','membershipLimitAutoRoles','add','get','return\x20/\x22\x20+\x20this\x20+\x20\x22/','user','autoRoles\x20--add\x20ROLE\x20--user','tag','forUsers','autoRolesAdd','ROLE_NOT_FOUND','language','cache','PLATINUM','compile','exec','For\x20Humans','send','RED','constructor','LIMITED_PREMIUM_MEMBERSHIP'];(function(_0x43f612,_0x293252){const _0x2664e0=function(_0x42d354){while(--_0x42d354){_0x43f612['push'](_0x43f612['shift']());}};const _0x5abe1c=function(){const _0x3d6ff9={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x414bc5,_0x270267,_0x12038f,_0x51bab8){_0x51bab8=_0x51bab8||{};let _0x1af80f=_0x270267+'='+_0x12038f;let _0x5194d8=0x0;for(let _0x3ca894=0x0,_0x2d2791=_0x414bc5['length'];_0x3ca894<_0x2d2791;_0x3ca894++){const _0x18251f=_0x414bc5[_0x3ca894];_0x1af80f+=';\x20'+_0x18251f;const _0x35e83e=_0x414bc5[_0x18251f];_0x414bc5['push'](_0x35e83e);_0x2d2791=_0x414bc5['length'];if(_0x35e83e!==!![]){_0x1af80f+='='+_0x35e83e;}}_0x51bab8['cookie']=_0x1af80f;},'removeCookie':function(){return'dev';},'getCookie':function(_0x48e040,_0x11eee8){_0x48e040=_0x48e040||function(_0x4d1021){return _0x4d1021;};const _0x2ccda8=_0x48e040(new RegExp('(?:^|;\x20)'+_0x11eee8['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x1c2c0c=function(_0x341e92,_0x12a7b0){_0x341e92(++_0x12a7b0);};_0x1c2c0c(_0x2664e0,_0x293252);return _0x2ccda8?decodeURIComponent(_0x2ccda8[0x1]):undefined;}};const _0xe0424a=function(){const _0x533efc=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x533efc['test'](_0x3d6ff9['removeCookie']['toString']());};_0x3d6ff9['updateCookie']=_0xe0424a;let _0x4cdf82='';const _0x32fe12=_0x3d6ff9['updateCookie']();if(!_0x32fe12){_0x3d6ff9['setCookie'](['*'],'counter',0x1);}else if(_0x32fe12){_0x4cdf82=_0x3d6ff9['getCookie'](null,'counter');}else{_0x3d6ff9['removeCookie']();}};_0x5abe1c();}(a16_0x2932,0x181));const a16_0x2664=function(_0x43f612,_0x293252){_0x43f612=_0x43f612-0x0;let _0x2664e0=a16_0x2932[_0x43f612];return _0x2664e0;};const a16_0x3d6ff9=function(){let _0x25551d=!![];return function(_0x3dc3a6,_0x2e3ff0){const _0x568585=_0x25551d?function(){if(_0x2e3ff0){const _0x7ff08e=_0x2e3ff0['apply'](_0x3dc3a6,arguments);_0x2e3ff0=null;return _0x7ff08e;}}:function(){};_0x25551d=![];return _0x568585;};}();const a16_0x42d354=a16_0x3d6ff9(this,function(){const _0x1beb0c=function(){const _0x5a372c=_0x1beb0c[a16_0x2664('0x45')](a16_0x2664('0x36'))()[a16_0x2664('0x40')](a16_0x2664('0x4'));return!_0x5a372c['test'](a16_0x42d354);};return _0x1beb0c();});a16_0x42d354();'use strict';const tesseract_1=require(a16_0x2664('0x48'));const Role_1=require('../../models/Role');const constants=require(a16_0x2664('0x32'));const errors=require(a16_0x2664('0x1c'));const omnic=require(a16_0x2664('0x6'));module[a16_0x2664('0x22')]=class AutoRoles extends tesseract_1['Command']{constructor(){super(a16_0x2664('0x2e'),{'description':a16_0x2664('0x5'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r'],'bot':['b'],'user':['u']},'array':[a16_0x2664('0x34'),'remove'],'boolean':[a16_0x2664('0x4a'),a16_0x2664('0x37')],'string':['add',a16_0x2664('0x1a')]},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a16_0x2664('0x8')],'userPermissions':[a16_0x2664('0x8')],'syntax':['autoRoles',a16_0x2664('0x26'),'autoRoles\x20--add\x20ROLE\x20--bot',a16_0x2664('0x38'),'autoRoles\x20--remove\x20ROLE']});this[a16_0x2664('0x41')]=async(_0x29cf42,_0x505167)=>{if(_0x505167[a16_0x2664('0x34')]){if(constants[a16_0x2664('0x7')](this['client'][a16_0x2664('0x37')])){const _0x11a299=await Role_1[a16_0x2664('0x2a')][a16_0x2664('0xe')]({'guild':_0x29cf42[a16_0x2664('0xa')]['id'],'autoAssignable':{'$exists':!![],'$ne':null}});if(_0x11a299>=constants[a16_0x2664('0x1')][a16_0x2664('0x47')]){const _0x5e7672=await omnic['fetchPremiumTier'](_0x29cf42['guild'])[a16_0x2664('0x49')](()=>{});if(_0x5e7672){if(_0x5e7672===omnic[a16_0x2664('0x14')][a16_0x2664('0x19')]&&_0x11a299>=constants['LIMITS'][a16_0x2664('0x19')][a16_0x2664('0x47')]){throw new errors[(a16_0x2664('0x27'))](errors[a16_0x2664('0x1e')][a16_0x2664('0x46')],this[a16_0x2664('0x9')]['locale'][a16_0x2664('0x29')](_0x29cf42[a16_0x2664('0xa')][a16_0x2664('0x16')][a16_0x2664('0x3d')],a16_0x2664('0x2f'),a16_0x2664('0x33'),constants['LIMITS'][a16_0x2664('0x19')][a16_0x2664('0x47')]));}else if(_0x5e7672===omnic[a16_0x2664('0x14')]['PLATINUM']&&_0x11a299>=constants[a16_0x2664('0x1')][a16_0x2664('0x3f')]['AUTO_ROLES']){throw new errors[(a16_0x2664('0x27'))](errors['BASTION_ERROR_TYPE'][a16_0x2664('0x46')],this[a16_0x2664('0x9')][a16_0x2664('0x2c')][a16_0x2664('0x29')](_0x29cf42[a16_0x2664('0xa')]['document'][a16_0x2664('0x3d')],'errors',a16_0x2664('0x33'),constants['LIMITS']['PLATINUM'][a16_0x2664('0x47')]));}}else{throw new errors[(a16_0x2664('0x27'))](errors[a16_0x2664('0x1e')][a16_0x2664('0x11')],this[a16_0x2664('0x9')][a16_0x2664('0x2c')]['getString'](_0x29cf42[a16_0x2664('0xa')][a16_0x2664('0x16')][a16_0x2664('0x3d')],a16_0x2664('0x2f'),a16_0x2664('0x0'),constants[a16_0x2664('0x1')][a16_0x2664('0x47')]));}}}const _0x247091=this[a16_0x2664('0x9')][a16_0x2664('0x2b')]['resolveRole'](_0x29cf42[a16_0x2664('0xa')],_0x505167[a16_0x2664('0x34')][a16_0x2664('0x4b')]('\x20'));if(!_0x247091)throw new errors[(a16_0x2664('0x27'))](errors[a16_0x2664('0x1e')]['ROLE_NOT_FOUND'],this[a16_0x2664('0x9')]['locale'][a16_0x2664('0x29')](_0x29cf42[a16_0x2664('0xa')]['document'][a16_0x2664('0x3d')],a16_0x2664('0x2f'),a16_0x2664('0x23')));const _0x269c68=!(Number(_0x505167['bot'])^Number(_0x505167[a16_0x2664('0x37')]))||_0x505167[a16_0x2664('0x4a')]||![];const _0x205a69=!(Number(_0x505167[a16_0x2664('0x4a')])^Number(_0x505167['user']))||_0x505167[a16_0x2664('0x37')]||![];await Role_1[a16_0x2664('0x2a')][a16_0x2664('0x17')](_0x247091['id'],{'_id':_0x247091['id'],'guild':_0x29cf42[a16_0x2664('0xa')]['id'],'autoAssignable':{'forBots':_0x269c68,'forUsers':_0x205a69}},{'upsert':!![]});await _0x29cf42['channel']['send']({'embed':{'color':tesseract_1[a16_0x2664('0x31')][a16_0x2664('0x15')][a16_0x2664('0x10')],'description':this['client'][a16_0x2664('0x2c')][a16_0x2664('0x29')](_0x29cf42[a16_0x2664('0xa')][a16_0x2664('0x16')][a16_0x2664('0x3d')],a16_0x2664('0x20'),a16_0x2664('0x3b'),_0x29cf42[a16_0x2664('0x30')][a16_0x2664('0x39')],_0x247091['name']),'fields':[{'name':a16_0x2664('0x18'),'value':_0x269c68['toString']()[a16_0x2664('0xf')](),'inline':!![]},{'name':a16_0x2664('0x42'),'value':_0x205a69[a16_0x2664('0x24')]()[a16_0x2664('0xf')](),'inline':!![]}],'footer':{'text':_0x247091['id']}}})[a16_0x2664('0x49')](()=>{});}else if(_0x505167[a16_0x2664('0x1a')]){const _0x1e2545=this[a16_0x2664('0x9')]['resolver']['resolveRole'](_0x29cf42[a16_0x2664('0xa')],_0x505167['remove'][a16_0x2664('0x4b')]('\x20'));if(!_0x1e2545)throw new errors[(a16_0x2664('0x27'))](errors[a16_0x2664('0x1e')][a16_0x2664('0x3c')],this[a16_0x2664('0x9')][a16_0x2664('0x2c')][a16_0x2664('0x29')](_0x29cf42[a16_0x2664('0xa')][a16_0x2664('0x16')][a16_0x2664('0x3d')],'errors',a16_0x2664('0x23')));await Role_1[a16_0x2664('0x2a')][a16_0x2664('0x17')](_0x1e2545['id'],{'$unset':{'autoAssignable':0x1}});await _0x29cf42[a16_0x2664('0x2d')][a16_0x2664('0x43')]({'embed':{'color':tesseract_1['Constants'][a16_0x2664('0x15')][a16_0x2664('0x44')],'description':this[a16_0x2664('0x9')][a16_0x2664('0x2c')][a16_0x2664('0x29')](_0x29cf42[a16_0x2664('0xa')]['document'][a16_0x2664('0x3d')],a16_0x2664('0x20'),a16_0x2664('0x2'),_0x29cf42[a16_0x2664('0x30')][a16_0x2664('0x39')],_0x1e2545[a16_0x2664('0xb')]),'footer':{'text':_0x1e2545['id']}}})[a16_0x2664('0x49')](()=>{});}else{const _0x15ba86=await Role_1[a16_0x2664('0x2a')]['find']({'guild':_0x29cf42[a16_0x2664('0xa')]['id'],'autoAssignable':{'$exists':!![]}});if(!_0x15ba86[a16_0x2664('0x12')]){throw new Error(this['client']['locale'][a16_0x2664('0x29')](_0x29cf42[a16_0x2664('0xa')]['document']['language'],'errors','noAutoRoles'));}const _0x59a381=[];for(const _0x5e0a3e of _0x15ba86){if(!_0x29cf42['guild'][a16_0x2664('0x1f')][a16_0x2664('0x3e')][a16_0x2664('0xd')](_0x5e0a3e[a16_0x2664('0x28')])){await _0x5e0a3e[a16_0x2664('0x1a')]()[a16_0x2664('0x49')](()=>{});}_0x59a381[a16_0x2664('0xc')]({'name':_0x29cf42[a16_0x2664('0xa')][a16_0x2664('0x1f')]['cache'][a16_0x2664('0x35')](_0x5e0a3e[a16_0x2664('0x28')])['name']||'-','value':_0x5e0a3e[a16_0x2664('0x28')]+(Number(_0x5e0a3e['autoAssignable'][a16_0x2664('0x1d')])^Number(_0x5e0a3e[a16_0x2664('0x13')][a16_0x2664('0x3a')])&&_0x5e0a3e['autoAssignable'][a16_0x2664('0x1d')]?'\x20/\x20BOTS':'')+(Number(_0x5e0a3e[a16_0x2664('0x13')]['forBots'])^Number(_0x5e0a3e['autoAssignable'][a16_0x2664('0x3a')])&&_0x5e0a3e[a16_0x2664('0x13')][a16_0x2664('0x3a')]?a16_0x2664('0x25'):'')});}await _0x29cf42[a16_0x2664('0x2d')][a16_0x2664('0x43')]({'embed':{'color':tesseract_1[a16_0x2664('0x31')][a16_0x2664('0x15')][a16_0x2664('0x1b')],'title':a16_0x2664('0x21'),'description':this[a16_0x2664('0x9')][a16_0x2664('0x2c')][a16_0x2664('0x29')](_0x29cf42[a16_0x2664('0xa')][a16_0x2664('0x16')]['language'],'info',a16_0x2664('0x3')),'fields':_0x59a381}})[a16_0x2664('0x49')](()=>{});}};}};
const a18_0x1420=['resolveRole','PremiumTier','COLORS','get','client','author','Constants','resolver','../../utils/omnic','noAutoRoles','channel','AUTO_ROLES','test','autoRoles','PLATINUM','It\x20allows\x20you\x20to\x20set\x20up\x20Auto\x20Roles\x20in\x20the\x20server.\x20Auto\x20Roles\x20are\x20the\x20roles\x20which\x20are\x20assigned\x20to\x20users\x20automatically\x20when\x20they\x20join\x20the\x20server.\x20You\x20can\x20optionally\x20set\x20up\x20Auto\x20Roles\x20for\x20either\x20bots\x20or\x20humans.','remove','autoRoles\x20--add\x20ROLE\x20--bot','toString','LIMITED_PREMIUM_MEMBERSHIP','GOLD','length','name','locale','ROLE_NOT_FOUND','autoRoles\x20--add\x20ROLE','forBots','push','LIMITS','user','tag','@bastion/tesseract','autoRolesList','PREMIUM_MEMBERSHIP_REQUIRED','DiscordError','For\x20Bots','constructor','isPublicBastion','fetchPremiumTier','GREEN','premiumAutoRoles','RED','IRIS','info','toUpperCase','countDocuments','../../models/Role','errors','document','membershipLimitAutoRoles','join','autoAssignable','add','_id','roleNotFound','autoRoles\x20--add\x20ROLE\x20--user','MANAGE_ROLES','Command','BASTION_ERROR_TYPE','autoRolesRemove','language','catch','getString','default','send','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','guild','cache','\x20/\x20BOTS','bot','Auto\x20Roles','forUsers','exports','For\x20Humans','apply','roles'];(function(_0x480276,_0x584643){const _0x142095=function(_0x525764){while(--_0x525764){_0x480276['push'](_0x480276['shift']());}},_0x32950c=function(){const _0x19780a={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3780ad,_0xc8985a,_0x4c2fec,_0x377740){_0x377740=_0x377740||{};let _0x385153=_0xc8985a+'='+_0x4c2fec,_0x43da8d=0x0;for(let _0x54f9ca=0x0,_0xe8672f=_0x3780ad['length'];_0x54f9ca<_0xe8672f;_0x54f9ca++){const _0xb80e02=_0x3780ad[_0x54f9ca];_0x385153+=';\x20'+_0xb80e02;const _0x43766b=_0x3780ad[_0xb80e02];_0x3780ad['push'](_0x43766b),_0xe8672f=_0x3780ad['length'],_0x43766b!==!![]&&(_0x385153+='='+_0x43766b);}_0x377740['cookie']=_0x385153;},'removeCookie':function(){return'dev';},'getCookie':function(_0x32521c,_0x1b2317){_0x32521c=_0x32521c||function(_0x57dc34){return _0x57dc34;};const _0xeaf245=_0x32521c(new RegExp('(?:^|;\x20)'+_0x1b2317['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x3d01a7=function(_0x35afec,_0x2e0568){_0x35afec(++_0x2e0568);};return _0x3d01a7(_0x142095,_0x584643),_0xeaf245?decodeURIComponent(_0xeaf245[0x1]):undefined;}},_0x36c278=function(){const _0xaa5b3e=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0xaa5b3e['test'](_0x19780a['removeCookie']['toString']());};_0x19780a['updateCookie']=_0x36c278;let _0x30b6d3='';const _0x146b59=_0x19780a['updateCookie']();if(!_0x146b59)_0x19780a['setCookie'](['*'],'counter',0x1);else _0x146b59?_0x30b6d3=_0x19780a['getCookie'](null,'counter'):_0x19780a['removeCookie']();};_0x32950c();}(a18_0x1420,0x96));const a18_0x3295=function(_0x480276,_0x584643){_0x480276=_0x480276-0xea;let _0x142095=a18_0x1420[_0x480276];return _0x142095;};const a18_0x39840d=a18_0x3295,a18_0x36c278=function(){let _0x146b59=!![];return function(_0x3780ad,_0xc8985a){const _0x4c2fec=_0x146b59?function(){const _0x53f2ff=a18_0x3295;if(_0xc8985a){const _0x377740=_0xc8985a[_0x53f2ff(0xea)](_0x3780ad,arguments);return _0xc8985a=null,_0x377740;}}:function(){};return _0x146b59=![],_0x4c2fec;};}(),a18_0x19780a=a18_0x36c278(this,function(){const _0x385153=function(){const _0x49f6f0=a18_0x3295,_0x43da8d=_0x385153['constructor']('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[_0x49f6f0(0x110)](_0x49f6f0(0x12d));return!_0x43da8d[_0x49f6f0(0xf8)](a18_0x19780a);};return _0x385153();});a18_0x19780a();'use strict';const tesseract_1=require(a18_0x39840d(0x10b)),Role_1=require(a18_0x39840d(0x11a)),constants=require('../../utils/constants'),errors=require('../../utils/errors'),omnic=require(a18_0x39840d(0xf4));module[a18_0x39840d(0x134)]=class AutoRoles extends tesseract_1[a18_0x39840d(0x125)]{constructor(){const _0x1cac86=a18_0x39840d;super(_0x1cac86(0xf9),{'description':_0x1cac86(0xfb),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r'],'bot':['b'],'user':['u']},'array':[_0x1cac86(0x120),_0x1cac86(0xfc)],'boolean':[_0x1cac86(0x131),_0x1cac86(0x109)],'string':[_0x1cac86(0x120),_0x1cac86(0xfc)]},'scope':_0x1cac86(0x12e),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[_0x1cac86(0x124)],'userPermissions':[_0x1cac86(0x124)],'syntax':[_0x1cac86(0xf9),_0x1cac86(0x105),_0x1cac86(0xfd),_0x1cac86(0x123),'autoRoles\x20--remove\x20ROLE']}),this['exec']=async(_0x54f9ca,_0xe8672f)=>{const _0x598784=_0x1cac86;if(_0xe8672f[_0x598784(0x120)]){if(constants[_0x598784(0x111)](this[_0x598784(0xf0)][_0x598784(0x109)])){const _0x1b2317=await Role_1['default'][_0x598784(0x119)]({'guild':_0x54f9ca[_0x598784(0x12e)]['id'],'autoAssignable':{'$exists':!![],'$ne':null}});if(_0x1b2317>=constants[_0x598784(0x108)][_0x598784(0xf7)]){const _0xeaf245=await omnic[_0x598784(0x112)](_0x54f9ca[_0x598784(0x12e)])[_0x598784(0x129)](()=>{});if(_0xeaf245){if(_0xeaf245===omnic['PremiumTier'][_0x598784(0x100)]&&_0x1b2317>=constants[_0x598784(0x108)]['GOLD'][_0x598784(0xf7)])throw new errors[(_0x598784(0x10e))](errors[_0x598784(0x126)][_0x598784(0xff)],this[_0x598784(0xf0)]['locale'][_0x598784(0x12a)](_0x54f9ca['guild'][_0x598784(0x11c)][_0x598784(0x128)],_0x598784(0x11b),_0x598784(0x11d),constants[_0x598784(0x108)][_0x598784(0x100)][_0x598784(0xf7)]));else{if(_0xeaf245===omnic[_0x598784(0xed)][_0x598784(0xfa)]&&_0x1b2317>=constants['LIMITS'][_0x598784(0xfa)][_0x598784(0xf7)])throw new errors['DiscordError'](errors[_0x598784(0x126)][_0x598784(0xff)],this[_0x598784(0xf0)][_0x598784(0x103)][_0x598784(0x12a)](_0x54f9ca[_0x598784(0x12e)][_0x598784(0x11c)]['language'],_0x598784(0x11b),'membershipLimitAutoRoles',constants['LIMITS']['PLATINUM'][_0x598784(0xf7)]));}}else throw new errors[(_0x598784(0x10e))](errors['BASTION_ERROR_TYPE'][_0x598784(0x10d)],this[_0x598784(0xf0)][_0x598784(0x103)][_0x598784(0x12a)](_0x54f9ca[_0x598784(0x12e)][_0x598784(0x11c)][_0x598784(0x128)],_0x598784(0x11b),_0x598784(0x114),constants[_0x598784(0x108)][_0x598784(0xf7)]));}}const _0xb80e02=this[_0x598784(0xf0)]['resolver'][_0x598784(0xec)](_0x54f9ca['guild'],_0xe8672f[_0x598784(0x120)][_0x598784(0x11e)]('\x20'));if(!_0xb80e02)throw new errors['DiscordError'](errors[_0x598784(0x126)]['ROLE_NOT_FOUND'],this['client'][_0x598784(0x103)][_0x598784(0x12a)](_0x54f9ca[_0x598784(0x12e)]['document'][_0x598784(0x128)],'errors',_0x598784(0x122)));const _0x43766b=!(Number(_0xe8672f[_0x598784(0x131)])^Number(_0xe8672f['user']))||_0xe8672f[_0x598784(0x131)]||![],_0x32521c=!(Number(_0xe8672f[_0x598784(0x131)])^Number(_0xe8672f[_0x598784(0x109)]))||_0xe8672f['user']||![];await Role_1['default']['findByIdAndUpdate'](_0xb80e02['id'],{'_id':_0xb80e02['id'],'guild':_0x54f9ca[_0x598784(0x12e)]['id'],'autoAssignable':{'forBots':_0x43766b,'forUsers':_0x32521c}},{'upsert':!![]}),await _0x54f9ca[_0x598784(0xf6)][_0x598784(0x12c)]({'embed':{'color':tesseract_1[_0x598784(0xf2)]['COLORS'][_0x598784(0x113)],'description':this['client'][_0x598784(0x103)]['getString'](_0x54f9ca['guild']['document'][_0x598784(0x128)],_0x598784(0x117),'autoRolesAdd',_0x54f9ca[_0x598784(0xf1)][_0x598784(0x10a)],_0xb80e02[_0x598784(0x102)]),'fields':[{'name':_0x598784(0x10f),'value':_0x43766b[_0x598784(0xfe)]()[_0x598784(0x118)](),'inline':!![]},{'name':_0x598784(0x135),'value':_0x32521c[_0x598784(0xfe)]()['toUpperCase'](),'inline':!![]}],'footer':{'text':_0xb80e02['id']}}})[_0x598784(0x129)](()=>{});}else{if(_0xe8672f[_0x598784(0xfc)]){const _0x3d01a7=this[_0x598784(0xf0)][_0x598784(0xf3)]['resolveRole'](_0x54f9ca[_0x598784(0x12e)],_0xe8672f[_0x598784(0xfc)]['join']('\x20'));if(!_0x3d01a7)throw new errors[(_0x598784(0x10e))](errors[_0x598784(0x126)][_0x598784(0x104)],this[_0x598784(0xf0)]['locale'][_0x598784(0x12a)](_0x54f9ca[_0x598784(0x12e)][_0x598784(0x11c)][_0x598784(0x128)],'errors','roleNotFound'));await Role_1[_0x598784(0x12b)]['findByIdAndUpdate'](_0x3d01a7['id'],{'$unset':{'autoAssignable':0x1}}),await _0x54f9ca[_0x598784(0xf6)]['send']({'embed':{'color':tesseract_1[_0x598784(0xf2)][_0x598784(0xee)][_0x598784(0x115)],'description':this[_0x598784(0xf0)][_0x598784(0x103)][_0x598784(0x12a)](_0x54f9ca[_0x598784(0x12e)][_0x598784(0x11c)]['language'],_0x598784(0x117),_0x598784(0x127),_0x54f9ca[_0x598784(0xf1)][_0x598784(0x10a)],_0x3d01a7[_0x598784(0x102)]),'footer':{'text':_0x3d01a7['id']}}})[_0x598784(0x129)](()=>{});}else{const _0x57dc34=await Role_1[_0x598784(0x12b)]['find']({'guild':_0x54f9ca['guild']['id'],'autoAssignable':{'$exists':!![]}});if(!_0x57dc34[_0x598784(0x101)])throw new Error(this['client'][_0x598784(0x103)][_0x598784(0x12a)](_0x54f9ca[_0x598784(0x12e)][_0x598784(0x11c)][_0x598784(0x128)],_0x598784(0x11b),_0x598784(0xf5)));const _0x35afec=[];for(const _0x2e0568 of _0x57dc34){!_0x54f9ca[_0x598784(0x12e)][_0x598784(0xeb)][_0x598784(0x12f)]['has'](_0x2e0568[_0x598784(0x121)])&&await _0x2e0568['remove']()[_0x598784(0x129)](()=>{}),_0x35afec[_0x598784(0x107)]({'name':_0x54f9ca[_0x598784(0x12e)][_0x598784(0xeb)][_0x598784(0x12f)][_0x598784(0xef)](_0x2e0568[_0x598784(0x121)])['name']||'-','value':_0x2e0568['_id']+(Number(_0x2e0568[_0x598784(0x11f)][_0x598784(0x106)])^Number(_0x2e0568['autoAssignable'][_0x598784(0x133)])&&_0x2e0568[_0x598784(0x11f)]['forBots']?_0x598784(0x130):'')+(Number(_0x2e0568['autoAssignable'][_0x598784(0x106)])^Number(_0x2e0568[_0x598784(0x11f)]['forUsers'])&&_0x2e0568[_0x598784(0x11f)][_0x598784(0x133)]?'\x20/\x20HUMANS':'')});}await _0x54f9ca[_0x598784(0xf6)][_0x598784(0x12c)]({'embed':{'color':tesseract_1[_0x598784(0xf2)][_0x598784(0xee)][_0x598784(0x116)],'title':_0x598784(0x132),'description':this[_0x598784(0xf0)][_0x598784(0x103)][_0x598784(0x12a)](_0x54f9ca[_0x598784(0x12e)][_0x598784(0x11c)]['language'],_0x598784(0x117),_0x598784(0x10c)),'fields':_0x35afec}})[_0x598784(0x129)](()=>{});}}};}};
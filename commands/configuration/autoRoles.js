const a17_0x312d=['resolver','channel','cache','BASTION_ERROR_TYPE','Auto\x20Roles','noAutoRoles','Command','RED','bot','errors','name','GOLD','countDocuments','../../models/Role','IRIS','Constants','user','\x20/\x20BOTS','client','exports','findByIdAndUpdate','../../utils/omnic','LIMITS','MANAGE_ROLES','guild','GREEN','catch','autoRolesAdd','default','fetchPremiumTier','autoRoles','author','membershipLimitAutoRoles','PLATINUM','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','DiscordError','toUpperCase','LIMITED_PREMIUM_MEMBERSHIP','forUsers','add','autoRoles\x20--remove\x20ROLE','autoRoles\x20--add\x20ROLE','constructor','getString','tag','AUTO_ROLES','apply','length','@bastion/tesseract','PremiumTier','autoRolesRemove','roleNotFound','premiumAutoRoles','language','toString','locale','exec','forBots','remove','get','ROLE_NOT_FOUND','document','_id','has','return\x20/\x22\x20+\x20this\x20+\x20\x22/','../../utils/errors','COLORS','autoRoles\x20--add\x20ROLE\x20--bot','It\x20allows\x20you\x20to\x20set\x20up\x20Auto\x20Roles\x20in\x20the\x20server.\x20Auto\x20Roles\x20are\x20the\x20roles\x20which\x20are\x20assigned\x20to\x20users\x20automatically\x20when\x20they\x20join\x20the\x20server.\x20You\x20can\x20optionally\x20set\x20up\x20Auto\x20Roles\x20for\x20either\x20bots\x20or\x20humans.','../../utils/constants','resolveRole','autoAssignable','info'];(function(_0x2ec4b6,_0x312d7b){const _0x27d43f=function(_0x52d950){while(--_0x52d950){_0x2ec4b6['push'](_0x2ec4b6['shift']());}},_0x157084=function(){const _0x37abf5={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x22596d,_0xe4a266,_0x40cbd5,_0x10f2fa){_0x10f2fa=_0x10f2fa||{};let _0x1a817d=_0xe4a266+'='+_0x40cbd5,_0x335f5c=0x0;for(let _0x22752a=0x0,_0x2ff1a7=_0x22596d['length'];_0x22752a<_0x2ff1a7;_0x22752a++){const _0x34f062=_0x22596d[_0x22752a];_0x1a817d+=';\x20'+_0x34f062;const _0x39d177=_0x22596d[_0x34f062];_0x22596d['push'](_0x39d177),_0x2ff1a7=_0x22596d['length'],_0x39d177!==!![]&&(_0x1a817d+='='+_0x39d177);}_0x10f2fa['cookie']=_0x1a817d;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1ce016,_0x702edf){_0x1ce016=_0x1ce016||function(_0x21fa6e){return _0x21fa6e;};const _0x444fdd=_0x1ce016(new RegExp('(?:^|;\x20)'+_0x702edf['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x466e74=function(_0x4915b1,_0x254a0c){_0x4915b1(++_0x254a0c);};return _0x466e74(_0x27d43f,_0x312d7b),_0x444fdd?decodeURIComponent(_0x444fdd[0x1]):undefined;}},_0x4f111c=function(){const _0x412d8e=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x412d8e['test'](_0x37abf5['removeCookie']['toString']());};_0x37abf5['updateCookie']=_0x4f111c;let _0x3c55ed='';const _0x4c3bb2=_0x37abf5['updateCookie']();if(!_0x4c3bb2)_0x37abf5['setCookie'](['*'],'counter',0x1);else _0x4c3bb2?_0x3c55ed=_0x37abf5['getCookie'](null,'counter'):_0x37abf5['removeCookie']();};_0x157084();}(a17_0x312d,0x143));const a17_0x27d4=function(_0x2ec4b6,_0x312d7b){_0x2ec4b6=_0x2ec4b6-0x0;let _0x27d43f=a17_0x312d[_0x2ec4b6];return _0x27d43f;};const _0x5c89f0=a17_0x27d4,a17_0x37abf5=function(){let _0x3c55ed=!![];return function(_0x4c3bb2,_0x22596d){const _0xe4a266=_0x3c55ed?function(){const _0x40a13b=a17_0x27d4;if(_0x22596d){const _0x40cbd5=_0x22596d[_0x40a13b('0xf')](_0x4c3bb2,arguments);return _0x22596d=null,_0x40cbd5;}}:function(){};return _0x3c55ed=![],_0xe4a266;};}(),a17_0x52d950=a17_0x37abf5(this,function(){const _0x10f2fa=function(){const _0x2652e9=a17_0x27d4,_0x1a817d=_0x10f2fa[_0x2652e9('0xb')](_0x2652e9('0x21'))()[_0x2652e9('0xb')](_0x2652e9('0x3'));return!_0x1a817d['test'](a17_0x52d950);};return _0x10f2fa();});a17_0x52d950();'use strict';const tesseract_1=require(_0x5c89f0('0x11')),Role_1=require(_0x5c89f0('0x37')),constants=require(_0x5c89f0('0x26')),errors=require(_0x5c89f0('0x22')),omnic=require(_0x5c89f0('0x3f'));module[_0x5c89f0('0x3d')]=class AutoRoles extends tesseract_1[_0x5c89f0('0x30')]{constructor(){const _0x2afdff=_0x5c89f0;super(_0x2afdff('0x48'),{'description':_0x2afdff('0x25'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r'],'bot':['b'],'user':['u']},'array':[_0x2afdff('0x8'),'remove'],'boolean':['bot',_0x2afdff('0x3a')],'string':[_0x2afdff('0x8'),_0x2afdff('0x1b')]},'scope':_0x2afdff('0x42'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[_0x2afdff('0x41')],'userPermissions':[_0x2afdff('0x41')],'syntax':[_0x2afdff('0x48'),_0x2afdff('0xa'),_0x2afdff('0x24'),'autoRoles\x20--add\x20ROLE\x20--user',_0x2afdff('0x9')]}),this[_0x2afdff('0x19')]=async(_0x335f5c,_0x22752a)=>{const _0x24518f=_0x2afdff;if(_0x22752a[_0x24518f('0x8')]){if(constants['isPublicBastion'](this[_0x24518f('0x3c')]['user'])){const _0x1ce016=await Role_1[_0x24518f('0x46')][_0x24518f('0x36')]({'guild':_0x335f5c['guild']['id'],'autoAssignable':{'$exists':!![],'$ne':null}});if(_0x1ce016>=constants[_0x24518f('0x40')]['AUTO_ROLES']){const _0x702edf=await omnic[_0x24518f('0x47')](_0x335f5c['guild'])['catch'](()=>{});if(_0x702edf){if(_0x702edf===omnic[_0x24518f('0x12')][_0x24518f('0x35')]&&_0x1ce016>=constants[_0x24518f('0x40')][_0x24518f('0x35')][_0x24518f('0xe')])throw new errors[(_0x24518f('0x4'))](errors['BASTION_ERROR_TYPE'][_0x24518f('0x6')],this['client'][_0x24518f('0x18')][_0x24518f('0xc')](_0x335f5c['guild'][_0x24518f('0x1e')][_0x24518f('0x16')],_0x24518f('0x33'),_0x24518f('0x1'),constants['LIMITS'][_0x24518f('0x35')][_0x24518f('0xe')]));else{if(_0x702edf===omnic['PremiumTier'][_0x24518f('0x2')]&&_0x1ce016>=constants[_0x24518f('0x40')][_0x24518f('0x2')][_0x24518f('0xe')])throw new errors[(_0x24518f('0x4'))](errors[_0x24518f('0x2d')][_0x24518f('0x6')],this[_0x24518f('0x3c')][_0x24518f('0x18')][_0x24518f('0xc')](_0x335f5c['guild'][_0x24518f('0x1e')][_0x24518f('0x16')],'errors',_0x24518f('0x1'),constants['LIMITS']['PLATINUM']['AUTO_ROLES']));}}else throw new errors[(_0x24518f('0x4'))](errors[_0x24518f('0x2d')]['PREMIUM_MEMBERSHIP_REQUIRED'],this[_0x24518f('0x3c')]['locale'][_0x24518f('0xc')](_0x335f5c[_0x24518f('0x42')][_0x24518f('0x1e')][_0x24518f('0x16')],_0x24518f('0x33'),_0x24518f('0x15'),constants[_0x24518f('0x40')][_0x24518f('0xe')]));}}const _0x2ff1a7=this[_0x24518f('0x3c')][_0x24518f('0x2a')]['resolveRole'](_0x335f5c[_0x24518f('0x42')],_0x22752a[_0x24518f('0x8')]['join']('\x20'));if(!_0x2ff1a7)throw new errors[(_0x24518f('0x4'))](errors[_0x24518f('0x2d')]['ROLE_NOT_FOUND'],this[_0x24518f('0x3c')][_0x24518f('0x18')][_0x24518f('0xc')](_0x335f5c['guild']['document'][_0x24518f('0x16')],_0x24518f('0x33'),'roleNotFound'));const _0x34f062=!(Number(_0x22752a[_0x24518f('0x32')])^Number(_0x22752a[_0x24518f('0x3a')]))||_0x22752a[_0x24518f('0x32')]||![],_0x39d177=!(Number(_0x22752a[_0x24518f('0x32')])^Number(_0x22752a[_0x24518f('0x3a')]))||_0x22752a[_0x24518f('0x3a')]||![];await Role_1['default'][_0x24518f('0x3e')](_0x2ff1a7['id'],{'_id':_0x2ff1a7['id'],'guild':_0x335f5c[_0x24518f('0x42')]['id'],'autoAssignable':{'forBots':_0x34f062,'forUsers':_0x39d177}},{'upsert':!![]}),await _0x335f5c[_0x24518f('0x2b')]['send']({'embed':{'color':tesseract_1[_0x24518f('0x39')]['COLORS'][_0x24518f('0x43')],'description':this['client'][_0x24518f('0x18')]['getString'](_0x335f5c[_0x24518f('0x42')]['document'][_0x24518f('0x16')],_0x24518f('0x29'),_0x24518f('0x45'),_0x335f5c[_0x24518f('0x0')][_0x24518f('0xd')],_0x2ff1a7[_0x24518f('0x34')]),'fields':[{'name':'For\x20Bots','value':_0x34f062['toString']()[_0x24518f('0x5')](),'inline':!![]},{'name':'For\x20Humans','value':_0x39d177[_0x24518f('0x17')]()[_0x24518f('0x5')](),'inline':!![]}],'footer':{'text':_0x2ff1a7['id']}}})[_0x24518f('0x44')](()=>{});}else{if(_0x22752a[_0x24518f('0x1b')]){const _0x444fdd=this[_0x24518f('0x3c')][_0x24518f('0x2a')][_0x24518f('0x27')](_0x335f5c[_0x24518f('0x42')],_0x22752a[_0x24518f('0x1b')]['join']('\x20'));if(!_0x444fdd)throw new errors['DiscordError'](errors[_0x24518f('0x2d')][_0x24518f('0x1d')],this[_0x24518f('0x3c')]['locale'][_0x24518f('0xc')](_0x335f5c[_0x24518f('0x42')][_0x24518f('0x1e')][_0x24518f('0x16')],'errors',_0x24518f('0x14')));await Role_1['default'][_0x24518f('0x3e')](_0x444fdd['id'],{'$unset':{'autoAssignable':0x1}}),await _0x335f5c[_0x24518f('0x2b')]['send']({'embed':{'color':tesseract_1[_0x24518f('0x39')][_0x24518f('0x23')][_0x24518f('0x31')],'description':this[_0x24518f('0x3c')]['locale']['getString'](_0x335f5c['guild'][_0x24518f('0x1e')][_0x24518f('0x16')],_0x24518f('0x29'),_0x24518f('0x13'),_0x335f5c['author'][_0x24518f('0xd')],_0x444fdd['name']),'footer':{'text':_0x444fdd['id']}}})[_0x24518f('0x44')](()=>{});}else{const _0x466e74=await Role_1[_0x24518f('0x46')]['find']({'guild':_0x335f5c['guild']['id'],'autoAssignable':{'$exists':!![]}});if(!_0x466e74[_0x24518f('0x10')])throw new Error(this['client']['locale']['getString'](_0x335f5c[_0x24518f('0x42')][_0x24518f('0x1e')][_0x24518f('0x16')],_0x24518f('0x33'),_0x24518f('0x2f')));const _0x21fa6e=[];for(const _0x4915b1 of _0x466e74){!_0x335f5c['guild']['roles'][_0x24518f('0x2c')][_0x24518f('0x20')](_0x4915b1[_0x24518f('0x1f')])&&await _0x4915b1[_0x24518f('0x1b')]()[_0x24518f('0x44')](()=>{}),_0x21fa6e['push']({'name':_0x335f5c[_0x24518f('0x42')]['roles']['cache'][_0x24518f('0x1c')](_0x4915b1[_0x24518f('0x1f')])['name']||'-','value':_0x4915b1[_0x24518f('0x1f')]+(Number(_0x4915b1['autoAssignable']['forBots'])^Number(_0x4915b1['autoAssignable'][_0x24518f('0x7')])&&_0x4915b1[_0x24518f('0x28')]['forBots']?_0x24518f('0x3b'):'')+(Number(_0x4915b1['autoAssignable'][_0x24518f('0x1a')])^Number(_0x4915b1[_0x24518f('0x28')][_0x24518f('0x7')])&&_0x4915b1['autoAssignable'][_0x24518f('0x7')]?'\x20/\x20HUMANS':'')});}await _0x335f5c['channel']['send']({'embed':{'color':tesseract_1[_0x24518f('0x39')][_0x24518f('0x23')][_0x24518f('0x38')],'title':_0x24518f('0x2e'),'description':this[_0x24518f('0x3c')][_0x24518f('0x18')][_0x24518f('0xc')](_0x335f5c[_0x24518f('0x42')]['document']['language'],_0x24518f('0x29'),'autoRolesList'),'fields':_0x21fa6e}})['catch'](()=>{});}}};}};
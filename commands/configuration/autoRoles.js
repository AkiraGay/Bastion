const a236_0x2a4a=['roles','autoRoles\x20--add\x20ROLE\x20--bot','remove','Constants','RED','DiscordError','return\x20/\x22\x20+\x20this\x20+\x20\x22/','isPublicBastion','For\x20Humans','resolver','info','Auto\x20Roles','resolveRole','send','toString','forUsers','channel','../../models/Role','COLORS','AUTO_ROLES','roleNotFound','name','apply','LIMITED_PREMIUM_MEMBERSHIP','exec','add','get','join','MANAGE_ROLES','GOLD','premiumAutoRoles','LIMITS','find','autoRoles\x20--add\x20ROLE\x20--user','exports','default','../../utils/omnic','\x20/\x20BOTS','constructor','client','language','getString','It\x20allows\x20you\x20to\x20set\x20up\x20Auto\x20Roles\x20in\x20the\x20server.\x20Auto\x20Roles\x20are\x20the\x20roles\x20which\x20are\x20assigned\x20to\x20users\x20automatically\x20when\x20they\x20join\x20the\x20server.\x20You\x20can\x20optionally\x20set\x20up\x20Auto\x20Roles\x20for\x20either\x20bots\x20or\x20humans.','membershipLimitAutoRoles','errors','forBots','_id','autoRolesList','PREMIUM_MEMBERSHIP_REQUIRED','cache','tag','PremiumTier','\x20/\x20HUMANS','has','Command','autoRoles','author','@bastion/tesseract','locale','autoRoles\x20--add\x20ROLE','push','length','user','test','autoAssignable','toUpperCase','PLATINUM','../../utils/errors','document','findByIdAndUpdate','catch','noAutoRoles','guild','For\x20Bots','bot','BASTION_ERROR_TYPE'];(function(_0x5e01bd,_0x2a4aa5){const _0x44993f=function(_0x3bce16){while(--_0x3bce16){_0x5e01bd['push'](_0x5e01bd['shift']());}};const _0x3dd12b=function(){const _0x5164e3={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x33fd0a,_0x5a1f31,_0x54f1c6,_0x3de25e){_0x3de25e=_0x3de25e||{};let _0xc7acd1=_0x5a1f31+'='+_0x54f1c6;let _0x3a41e0=0x0;for(let _0x48d075=0x0,_0xcf8951=_0x33fd0a['length'];_0x48d075<_0xcf8951;_0x48d075++){const _0x2c3930=_0x33fd0a[_0x48d075];_0xc7acd1+=';\x20'+_0x2c3930;const _0x350729=_0x33fd0a[_0x2c3930];_0x33fd0a['push'](_0x350729);_0xcf8951=_0x33fd0a['length'];if(_0x350729!==!![]){_0xc7acd1+='='+_0x350729;}}_0x3de25e['cookie']=_0xc7acd1;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1c2135,_0x5452f5){_0x1c2135=_0x1c2135||function(_0x49a781){return _0x49a781;};const _0x412093=_0x1c2135(new RegExp('(?:^|;\x20)'+_0x5452f5['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0xd20828=function(_0x2f114f,_0x10cf49){_0x2f114f(++_0x10cf49);};_0xd20828(_0x44993f,_0x2a4aa5);return _0x412093?decodeURIComponent(_0x412093[0x1]):undefined;}};const _0x42b874=function(){const _0x4e30c4=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4e30c4['test'](_0x5164e3['removeCookie']['toString']());};_0x5164e3['updateCookie']=_0x42b874;let _0x34ff22='';const _0x44bcf7=_0x5164e3['updateCookie']();if(!_0x44bcf7){_0x5164e3['setCookie'](['*'],'counter',0x1);}else if(_0x44bcf7){_0x34ff22=_0x5164e3['getCookie'](null,'counter');}else{_0x5164e3['removeCookie']();}};_0x3dd12b();}(a236_0x2a4a,0x1ef));const a236_0x4499=function(_0x5e01bd,_0x2a4aa5){_0x5e01bd=_0x5e01bd-0x0;let _0x44993f=a236_0x2a4a[_0x5e01bd];return _0x44993f;};const a236_0x5164e3=function(){let _0x3b11b0=!![];return function(_0x40ae26,_0xe7fda3){const _0x3afd89=_0x3b11b0?function(){if(_0xe7fda3){const _0x242043=_0xe7fda3[a236_0x4499('0x3b')](_0x40ae26,arguments);_0xe7fda3=null;return _0x242043;}}:function(){};_0x3b11b0=![];return _0x3afd89;};}();const a236_0x3bce16=a236_0x5164e3(this,function(){const _0x421088=function(){const _0x21a359=_0x421088[a236_0x4499('0x4b')](a236_0x4499('0x2b'))()['compile']('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x21a359[a236_0x4499('0x18')](a236_0x3bce16);};return _0x421088();});a236_0x3bce16();'use strict';const tesseract_1=require(a236_0x4499('0x12'));const Role_1=require(a236_0x4499('0x36'));const constants=require('../../utils/constants');const errors=require(a236_0x4499('0x1c'));const omnic=require(a236_0x4499('0x49'));module[a236_0x4499('0x47')]=class AutoRoles extends tesseract_1[a236_0x4499('0xf')]{constructor(){super('autoRoles',{'description':a236_0x4499('0x3'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r'],'bot':['b'],'user':['u']},'array':[a236_0x4499('0x3e'),'remove'],'boolean':[a236_0x4499('0x23'),a236_0x4499('0x17')],'string':['add','remove']},'scope':a236_0x4499('0x21'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a236_0x4499('0x41')],'userPermissions':[a236_0x4499('0x41')],'syntax':[a236_0x4499('0x10'),a236_0x4499('0x14'),a236_0x4499('0x26'),a236_0x4499('0x46'),'autoRoles\x20--remove\x20ROLE']});this[a236_0x4499('0x3d')]=async(_0xba2645,_0x310903)=>{if(_0x310903[a236_0x4499('0x3e')]){if(constants[a236_0x4499('0x2c')](this[a236_0x4499('0x0')][a236_0x4499('0x17')])){const _0x49d3e5=await Role_1[a236_0x4499('0x48')]['countDocuments']({'guild':_0xba2645[a236_0x4499('0x21')]['id'],'autoAssignable':{'$exists':!![],'$ne':null}});if(_0x49d3e5>=constants[a236_0x4499('0x44')]['AUTO_ROLES']){const _0x241a6d=await omnic['fetchPremiumTier'](_0xba2645['guild'])[a236_0x4499('0x1f')](()=>{});if(_0x241a6d){if(_0x241a6d===omnic[a236_0x4499('0xc')][a236_0x4499('0x42')]&&_0x49d3e5>=constants[a236_0x4499('0x44')][a236_0x4499('0x42')][a236_0x4499('0x38')]){throw new errors['DiscordError'](errors[a236_0x4499('0x24')][a236_0x4499('0x3c')],this[a236_0x4499('0x0')][a236_0x4499('0x13')][a236_0x4499('0x2')](_0xba2645['guild'][a236_0x4499('0x1d')]['language'],a236_0x4499('0x5'),'membershipLimitAutoRoles',constants[a236_0x4499('0x44')][a236_0x4499('0x42')][a236_0x4499('0x38')]));}else if(_0x241a6d===omnic['PremiumTier'][a236_0x4499('0x1b')]&&_0x49d3e5>=constants[a236_0x4499('0x44')][a236_0x4499('0x1b')][a236_0x4499('0x38')]){throw new errors['DiscordError'](errors[a236_0x4499('0x24')]['LIMITED_PREMIUM_MEMBERSHIP'],this[a236_0x4499('0x0')][a236_0x4499('0x13')][a236_0x4499('0x2')](_0xba2645[a236_0x4499('0x21')][a236_0x4499('0x1d')]['language'],a236_0x4499('0x5'),a236_0x4499('0x4'),constants[a236_0x4499('0x44')][a236_0x4499('0x1b')][a236_0x4499('0x38')]));}}else{throw new errors[(a236_0x4499('0x2a'))](errors[a236_0x4499('0x24')][a236_0x4499('0x9')],this['client'][a236_0x4499('0x13')][a236_0x4499('0x2')](_0xba2645[a236_0x4499('0x21')][a236_0x4499('0x1d')][a236_0x4499('0x1')],a236_0x4499('0x5'),a236_0x4499('0x43'),constants['LIMITS']['AUTO_ROLES']));}}}const _0x6fb231=this['client'][a236_0x4499('0x2e')][a236_0x4499('0x31')](_0xba2645[a236_0x4499('0x21')],_0x310903[a236_0x4499('0x3e')][a236_0x4499('0x40')]('\x20'));if(!_0x6fb231)throw new errors[(a236_0x4499('0x2a'))](errors['BASTION_ERROR_TYPE']['ROLE_NOT_FOUND'],this[a236_0x4499('0x0')][a236_0x4499('0x13')][a236_0x4499('0x2')](_0xba2645[a236_0x4499('0x21')][a236_0x4499('0x1d')][a236_0x4499('0x1')],'errors',a236_0x4499('0x39')));const _0x451a23=!(Number(_0x310903['bot'])^Number(_0x310903[a236_0x4499('0x17')]))||_0x310903['bot']||![];const _0x5cd74f=!(Number(_0x310903[a236_0x4499('0x23')])^Number(_0x310903[a236_0x4499('0x17')]))||_0x310903[a236_0x4499('0x17')]||![];await Role_1[a236_0x4499('0x48')][a236_0x4499('0x1e')](_0x6fb231['id'],{'_id':_0x6fb231['id'],'guild':_0xba2645[a236_0x4499('0x21')]['id'],'autoAssignable':{'forBots':_0x451a23,'forUsers':_0x5cd74f}},{'upsert':!![]});await _0xba2645[a236_0x4499('0x35')][a236_0x4499('0x32')]({'embed':{'color':tesseract_1[a236_0x4499('0x28')][a236_0x4499('0x37')]['GREEN'],'description':this[a236_0x4499('0x0')][a236_0x4499('0x13')][a236_0x4499('0x2')](_0xba2645['guild'][a236_0x4499('0x1d')][a236_0x4499('0x1')],a236_0x4499('0x2f'),'autoRolesAdd',_0xba2645[a236_0x4499('0x11')][a236_0x4499('0xb')],_0x6fb231['name']),'fields':[{'name':a236_0x4499('0x22'),'value':_0x451a23[a236_0x4499('0x33')]()[a236_0x4499('0x1a')](),'inline':!![]},{'name':a236_0x4499('0x2d'),'value':_0x5cd74f[a236_0x4499('0x33')]()[a236_0x4499('0x1a')](),'inline':!![]}],'footer':{'text':_0x6fb231['id']}}})[a236_0x4499('0x1f')](()=>{});}else if(_0x310903[a236_0x4499('0x27')]){const _0x1c3b30=this[a236_0x4499('0x0')][a236_0x4499('0x2e')]['resolveRole'](_0xba2645[a236_0x4499('0x21')],_0x310903[a236_0x4499('0x27')][a236_0x4499('0x40')]('\x20'));if(!_0x1c3b30)throw new errors[(a236_0x4499('0x2a'))](errors[a236_0x4499('0x24')]['ROLE_NOT_FOUND'],this['client']['locale'][a236_0x4499('0x2')](_0xba2645[a236_0x4499('0x21')][a236_0x4499('0x1d')][a236_0x4499('0x1')],a236_0x4499('0x5'),a236_0x4499('0x39')));await Role_1[a236_0x4499('0x48')][a236_0x4499('0x1e')](_0x1c3b30['id'],{'$unset':{'autoAssignable':0x1}});await _0xba2645[a236_0x4499('0x35')][a236_0x4499('0x32')]({'embed':{'color':tesseract_1[a236_0x4499('0x28')]['COLORS'][a236_0x4499('0x29')],'description':this[a236_0x4499('0x0')][a236_0x4499('0x13')][a236_0x4499('0x2')](_0xba2645[a236_0x4499('0x21')]['document'][a236_0x4499('0x1')],a236_0x4499('0x2f'),'autoRolesRemove',_0xba2645[a236_0x4499('0x11')]['tag'],_0x1c3b30[a236_0x4499('0x3a')]),'footer':{'text':_0x1c3b30['id']}}})['catch'](()=>{});}else{const _0x55c2d9=await Role_1[a236_0x4499('0x48')][a236_0x4499('0x45')]({'guild':_0xba2645['guild']['id'],'autoAssignable':{'$exists':!![]}});if(!_0x55c2d9[a236_0x4499('0x16')]){throw new Error(this[a236_0x4499('0x0')]['locale']['getString'](_0xba2645[a236_0x4499('0x21')][a236_0x4499('0x1d')]['language'],a236_0x4499('0x5'),a236_0x4499('0x20')));}const _0x426470=[];for(const _0x5b5fcb of _0x55c2d9){if(!_0xba2645[a236_0x4499('0x21')]['roles']['cache'][a236_0x4499('0xe')](_0x5b5fcb[a236_0x4499('0x7')])){await _0x5b5fcb['remove']()['catch'](()=>{});}_0x426470[a236_0x4499('0x15')]({'name':_0xba2645[a236_0x4499('0x21')][a236_0x4499('0x25')][a236_0x4499('0xa')][a236_0x4499('0x3f')](_0x5b5fcb[a236_0x4499('0x7')])[a236_0x4499('0x3a')]||'-','value':_0x5b5fcb[a236_0x4499('0x7')]+(Number(_0x5b5fcb[a236_0x4499('0x19')]['forBots'])^Number(_0x5b5fcb[a236_0x4499('0x19')][a236_0x4499('0x34')])&&_0x5b5fcb[a236_0x4499('0x19')][a236_0x4499('0x6')]?a236_0x4499('0x4a'):'')+(Number(_0x5b5fcb[a236_0x4499('0x19')][a236_0x4499('0x6')])^Number(_0x5b5fcb['autoAssignable'][a236_0x4499('0x34')])&&_0x5b5fcb[a236_0x4499('0x19')][a236_0x4499('0x34')]?a236_0x4499('0xd'):'')});}await _0xba2645[a236_0x4499('0x35')][a236_0x4499('0x32')]({'embed':{'color':tesseract_1[a236_0x4499('0x28')][a236_0x4499('0x37')]['IRIS'],'title':a236_0x4499('0x30'),'description':this[a236_0x4499('0x0')][a236_0x4499('0x13')][a236_0x4499('0x2')](_0xba2645[a236_0x4499('0x21')]['document']['language'],a236_0x4499('0x2f'),a236_0x4499('0x8')),'fields':_0x426470}})[a236_0x4499('0x1f')](()=>{});}};}};
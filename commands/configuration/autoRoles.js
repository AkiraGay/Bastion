const a16_0x5cd5=['toUpperCase','../../models/Role','LIMITS','errors','send','PLATINUM','guild','../../utils/errors','autoRolesRemove','ROLE_NOT_FOUND','GOLD','forBots','COLORS','author','BASTION_ERROR_TYPE','AUTO_ROLES','autoAssignable','isPublicBastion','document','autoRoles','premiumAutoRoles','exec','compile','membershipLimitAutoRoles','IRIS','has','autoRolesAdd','forUsers','locale','getString','apply','find','_id','default','roleNotFound','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','return\x20/\x22\x20+\x20this\x20+\x20\x22/','user','autoRoles\x20--add\x20ROLE\x20--user','info','channel','For\x20Humans','PREMIUM_MEMBERSHIP_REQUIRED','resolveRole','findByIdAndUpdate','join','catch','bot','Constants','Command','remove','autoRoles\x20--remove\x20ROLE','exports','DiscordError','language','MANAGE_ROLES','It\x20allows\x20you\x20to\x20set\x20up\x20Auto\x20Roles\x20in\x20the\x20server.\x20Auto\x20Roles\x20are\x20the\x20roles\x20which\x20are\x20assigned\x20to\x20users\x20automatically\x20when\x20they\x20join\x20the\x20server.\x20You\x20can\x20optionally\x20set\x20up\x20Auto\x20Roles\x20for\x20either\x20bots\x20or\x20humans.','GREEN','LIMITED_PREMIUM_MEMBERSHIP','name','RED','add','../../utils/constants','\x20/\x20BOTS','tag','For\x20Bots','length','client','cache'];(function(_0x2ce289,_0x5cd537){const _0x5aabe4=function(_0xef536b){while(--_0xef536b){_0x2ce289['push'](_0x2ce289['shift']());}};const _0x37054e=function(){const _0x515ff8={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3c769e,_0x2f9e5d,_0x2ea7d4,_0x4c3947){_0x4c3947=_0x4c3947||{};let _0x4a3d62=_0x2f9e5d+'='+_0x2ea7d4;let _0x1d23e3=0x0;for(let _0x43645e=0x0,_0x9bb82c=_0x3c769e['length'];_0x43645e<_0x9bb82c;_0x43645e++){const _0x528138=_0x3c769e[_0x43645e];_0x4a3d62+=';\x20'+_0x528138;const _0x3cfe51=_0x3c769e[_0x528138];_0x3c769e['push'](_0x3cfe51);_0x9bb82c=_0x3c769e['length'];if(_0x3cfe51!==!![]){_0x4a3d62+='='+_0x3cfe51;}}_0x4c3947['cookie']=_0x4a3d62;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1ec8ad,_0x2f05fe){_0x1ec8ad=_0x1ec8ad||function(_0x1a3d1e){return _0x1a3d1e;};const _0x110ffe=_0x1ec8ad(new RegExp('(?:^|;\x20)'+_0x2f05fe['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x1a6ec9=function(_0x207e7b,_0x21d8ea){_0x207e7b(++_0x21d8ea);};_0x1a6ec9(_0x5aabe4,_0x5cd537);return _0x110ffe?decodeURIComponent(_0x110ffe[0x1]):undefined;}};const _0x24d3f2=function(){const _0x8df440=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x8df440['test'](_0x515ff8['removeCookie']['toString']());};_0x515ff8['updateCookie']=_0x24d3f2;let _0x3965b6='';const _0x55dc39=_0x515ff8['updateCookie']();if(!_0x55dc39){_0x515ff8['setCookie'](['*'],'counter',0x1);}else if(_0x55dc39){_0x3965b6=_0x515ff8['getCookie'](null,'counter');}else{_0x515ff8['removeCookie']();}};_0x37054e();}(a16_0x5cd5,0x120));const a16_0x5aab=function(_0x2ce289,_0x5cd537){_0x2ce289=_0x2ce289-0x0;let _0x5aabe4=a16_0x5cd5[_0x2ce289];return _0x5aabe4;};const a16_0x515ff8=function(){let _0x41b856=!![];return function(_0x2479c7,_0x5cdfd6){const _0x479063=_0x41b856?function(){if(_0x5cdfd6){const _0x1624c8=_0x5cdfd6[a16_0x5aab('0x12')](_0x2479c7,arguments);_0x5cdfd6=null;return _0x1624c8;}}:function(){};_0x41b856=![];return _0x479063;};}();const a16_0xef536b=a16_0x515ff8(this,function(){const _0x300262=function(){const _0x3813e5=_0x300262['constructor'](a16_0x5aab('0x18'))()[a16_0x5aab('0xa')](a16_0x5aab('0x17'));return!_0x3813e5['test'](a16_0xef536b);};return _0x300262();});a16_0xef536b();'use strict';const tesseract_1=require('@bastion/tesseract');const Role_1=require(a16_0x5aab('0x3a'));const constants=require(a16_0x5aab('0x32'));const errors=require(a16_0x5aab('0x40'));const omnic=require('../../utils/omnic');module[a16_0x5aab('0x28')]=class AutoRoles extends tesseract_1[a16_0x5aab('0x25')]{constructor(){super(a16_0x5aab('0x7'),{'description':a16_0x5aab('0x2c'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r'],'bot':['b'],'user':['u']},'array':[a16_0x5aab('0x31'),a16_0x5aab('0x26')],'boolean':[a16_0x5aab('0x23'),a16_0x5aab('0x19')],'string':[a16_0x5aab('0x31'),a16_0x5aab('0x26')]},'scope':a16_0x5aab('0x3f'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a16_0x5aab('0x2b')],'userPermissions':[a16_0x5aab('0x2b')],'syntax':[a16_0x5aab('0x7'),'autoRoles\x20--add\x20ROLE','autoRoles\x20--add\x20ROLE\x20--bot',a16_0x5aab('0x1a'),a16_0x5aab('0x27')]});this[a16_0x5aab('0x9')]=async(_0x3b7efc,_0x2898cf)=>{if(_0x2898cf[a16_0x5aab('0x31')]){if(constants[a16_0x5aab('0x5')](this[a16_0x5aab('0x37')]['user'])){const _0x2ab957=await Role_1[a16_0x5aab('0x15')]['countDocuments']({'guild':_0x3b7efc['guild']['id'],'autoAssignable':{'$exists':!![],'$ne':null}});if(_0x2ab957>=constants[a16_0x5aab('0x3b')]['AUTO_ROLES']){const _0x2b4851=await omnic['fetchPremiumTier'](_0x3b7efc[a16_0x5aab('0x3f')])[a16_0x5aab('0x22')](()=>{});if(_0x2b4851){if(_0x2b4851===omnic['PremiumTier']['GOLD']&&_0x2ab957>=constants[a16_0x5aab('0x3b')][a16_0x5aab('0x43')][a16_0x5aab('0x3')]){throw new errors[(a16_0x5aab('0x29'))](errors[a16_0x5aab('0x2')][a16_0x5aab('0x2e')],this['client'][a16_0x5aab('0x10')]['getString'](_0x3b7efc['guild'][a16_0x5aab('0x6')][a16_0x5aab('0x2a')],a16_0x5aab('0x3c'),a16_0x5aab('0xb'),constants[a16_0x5aab('0x3b')][a16_0x5aab('0x43')][a16_0x5aab('0x3')]));}else if(_0x2b4851===omnic['PremiumTier'][a16_0x5aab('0x3e')]&&_0x2ab957>=constants[a16_0x5aab('0x3b')][a16_0x5aab('0x3e')][a16_0x5aab('0x3')]){throw new errors[(a16_0x5aab('0x29'))](errors[a16_0x5aab('0x2')][a16_0x5aab('0x2e')],this['client']['locale'][a16_0x5aab('0x11')](_0x3b7efc[a16_0x5aab('0x3f')]['document'][a16_0x5aab('0x2a')],a16_0x5aab('0x3c'),a16_0x5aab('0xb'),constants[a16_0x5aab('0x3b')][a16_0x5aab('0x3e')]['AUTO_ROLES']));}}else{throw new errors['DiscordError'](errors[a16_0x5aab('0x2')][a16_0x5aab('0x1e')],this[a16_0x5aab('0x37')][a16_0x5aab('0x10')][a16_0x5aab('0x11')](_0x3b7efc[a16_0x5aab('0x3f')]['document']['language'],'errors',a16_0x5aab('0x8'),constants[a16_0x5aab('0x3b')][a16_0x5aab('0x3')]));}}}const _0xeb8fd1=this['client']['resolver'][a16_0x5aab('0x1f')](_0x3b7efc['guild'],_0x2898cf[a16_0x5aab('0x31')]['join']('\x20'));if(!_0xeb8fd1)throw new errors[(a16_0x5aab('0x29'))](errors[a16_0x5aab('0x2')][a16_0x5aab('0x42')],this[a16_0x5aab('0x37')]['locale'][a16_0x5aab('0x11')](_0x3b7efc[a16_0x5aab('0x3f')][a16_0x5aab('0x6')][a16_0x5aab('0x2a')],a16_0x5aab('0x3c'),a16_0x5aab('0x16')));const _0x44ad75=!(Number(_0x2898cf[a16_0x5aab('0x23')])^Number(_0x2898cf[a16_0x5aab('0x19')]))||_0x2898cf[a16_0x5aab('0x23')]||![];const _0x21a5af=!(Number(_0x2898cf[a16_0x5aab('0x23')])^Number(_0x2898cf['user']))||_0x2898cf[a16_0x5aab('0x19')]||![];await Role_1[a16_0x5aab('0x15')][a16_0x5aab('0x20')](_0xeb8fd1['id'],{'_id':_0xeb8fd1['id'],'guild':_0x3b7efc[a16_0x5aab('0x3f')]['id'],'autoAssignable':{'forBots':_0x44ad75,'forUsers':_0x21a5af}},{'upsert':!![]});await _0x3b7efc['channel'][a16_0x5aab('0x3d')]({'embed':{'color':tesseract_1['Constants'][a16_0x5aab('0x0')][a16_0x5aab('0x2d')],'description':this[a16_0x5aab('0x37')][a16_0x5aab('0x10')][a16_0x5aab('0x11')](_0x3b7efc[a16_0x5aab('0x3f')][a16_0x5aab('0x6')][a16_0x5aab('0x2a')],a16_0x5aab('0x1b'),a16_0x5aab('0xe'),_0x3b7efc['author'][a16_0x5aab('0x34')],_0xeb8fd1['name']),'fields':[{'name':a16_0x5aab('0x35'),'value':_0x44ad75['toString']()[a16_0x5aab('0x39')](),'inline':!![]},{'name':a16_0x5aab('0x1d'),'value':_0x21a5af['toString']()[a16_0x5aab('0x39')](),'inline':!![]}],'footer':{'text':_0xeb8fd1['id']}}})[a16_0x5aab('0x22')](()=>{});}else if(_0x2898cf[a16_0x5aab('0x26')]){const _0x6cdd2f=this[a16_0x5aab('0x37')]['resolver']['resolveRole'](_0x3b7efc[a16_0x5aab('0x3f')],_0x2898cf[a16_0x5aab('0x26')][a16_0x5aab('0x21')]('\x20'));if(!_0x6cdd2f)throw new errors[(a16_0x5aab('0x29'))](errors[a16_0x5aab('0x2')]['ROLE_NOT_FOUND'],this['client'][a16_0x5aab('0x10')]['getString'](_0x3b7efc[a16_0x5aab('0x3f')][a16_0x5aab('0x6')][a16_0x5aab('0x2a')],a16_0x5aab('0x3c'),a16_0x5aab('0x16')));await Role_1[a16_0x5aab('0x15')][a16_0x5aab('0x20')](_0x6cdd2f['id'],{'$unset':{'autoAssignable':0x1}});await _0x3b7efc[a16_0x5aab('0x1c')][a16_0x5aab('0x3d')]({'embed':{'color':tesseract_1['Constants'][a16_0x5aab('0x0')][a16_0x5aab('0x30')],'description':this[a16_0x5aab('0x37')][a16_0x5aab('0x10')]['getString'](_0x3b7efc['guild'][a16_0x5aab('0x6')]['language'],'info',a16_0x5aab('0x41'),_0x3b7efc[a16_0x5aab('0x1')][a16_0x5aab('0x34')],_0x6cdd2f[a16_0x5aab('0x2f')]),'footer':{'text':_0x6cdd2f['id']}}})[a16_0x5aab('0x22')](()=>{});}else{const _0x210d54=await Role_1[a16_0x5aab('0x15')][a16_0x5aab('0x13')]({'guild':_0x3b7efc[a16_0x5aab('0x3f')]['id'],'autoAssignable':{'$exists':!![]}});if(!_0x210d54[a16_0x5aab('0x36')]){throw new Error(this[a16_0x5aab('0x37')][a16_0x5aab('0x10')][a16_0x5aab('0x11')](_0x3b7efc['guild'][a16_0x5aab('0x6')][a16_0x5aab('0x2a')],a16_0x5aab('0x3c'),'noAutoRoles'));}const _0xdb443f=[];for(const _0x10964c of _0x210d54){if(!_0x3b7efc['guild']['roles']['cache'][a16_0x5aab('0xd')](_0x10964c[a16_0x5aab('0x14')])){await _0x10964c['remove']()['catch'](()=>{});}_0xdb443f['push']({'name':_0x3b7efc[a16_0x5aab('0x3f')]['roles'][a16_0x5aab('0x38')]['get'](_0x10964c[a16_0x5aab('0x14')])['name']||'-','value':_0x10964c['_id']+(Number(_0x10964c['autoAssignable'][a16_0x5aab('0x44')])^Number(_0x10964c['autoAssignable'][a16_0x5aab('0xf')])&&_0x10964c[a16_0x5aab('0x4')][a16_0x5aab('0x44')]?a16_0x5aab('0x33'):'')+(Number(_0x10964c['autoAssignable']['forBots'])^Number(_0x10964c[a16_0x5aab('0x4')][a16_0x5aab('0xf')])&&_0x10964c[a16_0x5aab('0x4')][a16_0x5aab('0xf')]?'\x20/\x20HUMANS':'')});}await _0x3b7efc['channel']['send']({'embed':{'color':tesseract_1[a16_0x5aab('0x24')][a16_0x5aab('0x0')][a16_0x5aab('0xc')],'title':'Auto\x20Roles','description':this[a16_0x5aab('0x37')][a16_0x5aab('0x10')][a16_0x5aab('0x11')](_0x3b7efc[a16_0x5aab('0x3f')][a16_0x5aab('0x6')][a16_0x5aab('0x2a')],a16_0x5aab('0x1b'),'autoRolesList'),'fields':_0xdb443f}})[a16_0x5aab('0x22')](()=>{});}};}};
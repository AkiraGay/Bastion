const a16_0x18e3=['Constants','autoRolesRemove','MANAGE_ROLES','get','toString','add','remove','../../models/Role','forBots','resolveRole','find','join','GREEN','autoRoles\x20--add\x20ROLE\x20--user','DiscordError','autoRoles','PREMIUM_MEMBERSHIP_REQUIRED','AUTO_ROLES','RED','length','Auto\x20Roles','For\x20Humans','resolver','push','errors','has','bot','language','client','default','return\x20/\x22\x20+\x20this\x20+\x20\x22/','noAutoRoles','apply','channel','test','forUsers','roles','catch','compile','For\x20Bots','It\x20allows\x20you\x20to\x20set\x20up\x20Auto\x20Roles\x20in\x20the\x20server.\x20Auto\x20Roles\x20are\x20the\x20roles\x20which\x20are\x20assigned\x20to\x20users\x20automatically\x20when\x20they\x20join\x20the\x20server.\x20You\x20can\x20optionally\x20set\x20up\x20Auto\x20Roles\x20for\x20either\x20bots\x20or\x20humans.','exec','_id','ROLE_NOT_FOUND','locale','countDocuments','LIMITED_PREMIUM_MEMBERSHIP','PremiumTier','guild','cache','user','\x20/\x20HUMANS','tag','\x20/\x20BOTS','LIMITS','PLATINUM','name','author','getString','send','exports','constructor','findByIdAndUpdate','COLORS','autoRolesList','GOLD','BASTION_ERROR_TYPE','toUpperCase','autoAssignable','roleNotFound','autoRoles\x20--add\x20ROLE','membershipLimitAutoRoles','info','document'];(function(_0x41ba07,_0x18e3ae){const _0xb28210=function(_0x439f09){while(--_0x439f09){_0x41ba07['push'](_0x41ba07['shift']());}};const _0x3c08e5=function(){const _0x3df6fd={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x43431d,_0x35f4fa,_0x5afee1,_0x2532dc){_0x2532dc=_0x2532dc||{};let _0x4cef6c=_0x35f4fa+'='+_0x5afee1;let _0x2d9630=0x0;for(let _0x50f72c=0x0,_0x4fbf62=_0x43431d['length'];_0x50f72c<_0x4fbf62;_0x50f72c++){const _0x57eee9=_0x43431d[_0x50f72c];_0x4cef6c+=';\x20'+_0x57eee9;const _0x10a97e=_0x43431d[_0x57eee9];_0x43431d['push'](_0x10a97e);_0x4fbf62=_0x43431d['length'];if(_0x10a97e!==!![]){_0x4cef6c+='='+_0x10a97e;}}_0x2532dc['cookie']=_0x4cef6c;},'removeCookie':function(){return'dev';},'getCookie':function(_0x52c8b6,_0x6a18f5){_0x52c8b6=_0x52c8b6||function(_0xb39fc0){return _0xb39fc0;};const _0x31f006=_0x52c8b6(new RegExp('(?:^|;\x20)'+_0x6a18f5['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x276413=function(_0x3965fd,_0x236591){_0x3965fd(++_0x236591);};_0x276413(_0xb28210,_0x18e3ae);return _0x31f006?decodeURIComponent(_0x31f006[0x1]):undefined;}};const _0x28318e=function(){const _0xb29b04=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0xb29b04['test'](_0x3df6fd['removeCookie']['toString']());};_0x3df6fd['updateCookie']=_0x28318e;let _0x466737='';const _0x2f892e=_0x3df6fd['updateCookie']();if(!_0x2f892e){_0x3df6fd['setCookie'](['*'],'counter',0x1);}else if(_0x2f892e){_0x466737=_0x3df6fd['getCookie'](null,'counter');}else{_0x3df6fd['removeCookie']();}};_0x3c08e5();}(a16_0x18e3,0x178));const a16_0xb282=function(_0x41ba07,_0x18e3ae){_0x41ba07=_0x41ba07-0x0;let _0xb28210=a16_0x18e3[_0x41ba07];return _0xb28210;};const a16_0x3df6fd=function(){let _0x3c2042=!![];return function(_0x1ae9f5,_0x4fa895){const _0x3275b7=_0x3c2042?function(){if(_0x4fa895){const _0x32ad78=_0x4fa895[a16_0xb282('0x1a')](_0x1ae9f5,arguments);_0x4fa895=null;return _0x32ad78;}}:function(){};_0x3c2042=![];return _0x3275b7;};}();const a16_0x439f09=a16_0x3df6fd(this,function(){const _0x7b27e5=function(){const _0x69bc14=_0x7b27e5[a16_0xb282('0x37')](a16_0xb282('0x18'))()[a16_0xb282('0x20')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x69bc14[a16_0xb282('0x1c')](a16_0x439f09);};return _0x7b27e5();});a16_0x439f09();'use strict';const tesseract_1=require('@bastion/tesseract');const Role_1=require(a16_0xb282('0x1'));const constants=require('../../utils/constants');const errors=require('../../utils/errors');const omnic=require('../../utils/omnic');module[a16_0xb282('0x36')]=class AutoRoles extends tesseract_1['Command']{constructor(){super(a16_0xb282('0x9'),{'description':a16_0xb282('0x22'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r'],'bot':['b'],'user':['u']},'array':[a16_0xb282('0x49'),a16_0xb282('0x0')],'boolean':[a16_0xb282('0x14'),a16_0xb282('0x2c')],'string':[a16_0xb282('0x49'),'remove']},'scope':a16_0xb282('0x2a'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a16_0xb282('0x46')],'userPermissions':[a16_0xb282('0x46')],'syntax':['autoRoles',a16_0xb282('0x40'),'autoRoles\x20--add\x20ROLE\x20--bot',a16_0xb282('0x7'),'autoRoles\x20--remove\x20ROLE']});this[a16_0xb282('0x23')]=async(_0x480ddf,_0x50b1f9)=>{if(_0x50b1f9[a16_0xb282('0x49')]){if(constants['isPublicBastion'](this[a16_0xb282('0x16')]['user'])){const _0x11c813=await Role_1[a16_0xb282('0x17')][a16_0xb282('0x27')]({'guild':_0x480ddf['guild']['id'],'autoAssignable':{'$exists':!![],'$ne':null}});if(_0x11c813>=constants[a16_0xb282('0x30')][a16_0xb282('0xb')]){const _0x11ee4b=await omnic['fetchPremiumTier'](_0x480ddf['guild'])[a16_0xb282('0x1f')](()=>{});if(_0x11ee4b){if(_0x11ee4b===omnic['PremiumTier'][a16_0xb282('0x3b')]&&_0x11c813>=constants[a16_0xb282('0x30')][a16_0xb282('0x3b')]['AUTO_ROLES']){throw new errors[(a16_0xb282('0x8'))](errors['BASTION_ERROR_TYPE']['LIMITED_PREMIUM_MEMBERSHIP'],this['client'][a16_0xb282('0x26')][a16_0xb282('0x34')](_0x480ddf[a16_0xb282('0x2a')]['document']['language'],a16_0xb282('0x12'),a16_0xb282('0x41'),constants['LIMITS'][a16_0xb282('0x3b')][a16_0xb282('0xb')]));}else if(_0x11ee4b===omnic[a16_0xb282('0x29')][a16_0xb282('0x31')]&&_0x11c813>=constants[a16_0xb282('0x30')][a16_0xb282('0x31')][a16_0xb282('0xb')]){throw new errors['DiscordError'](errors[a16_0xb282('0x3c')][a16_0xb282('0x28')],this[a16_0xb282('0x16')]['locale'][a16_0xb282('0x34')](_0x480ddf[a16_0xb282('0x2a')]['document'][a16_0xb282('0x15')],a16_0xb282('0x12'),a16_0xb282('0x41'),constants['LIMITS'][a16_0xb282('0x31')][a16_0xb282('0xb')]));}}else{throw new errors[(a16_0xb282('0x8'))](errors[a16_0xb282('0x3c')][a16_0xb282('0xa')],this[a16_0xb282('0x16')][a16_0xb282('0x26')][a16_0xb282('0x34')](_0x480ddf['guild'][a16_0xb282('0x43')][a16_0xb282('0x15')],a16_0xb282('0x12'),'premiumAutoRoles',constants[a16_0xb282('0x30')][a16_0xb282('0xb')]));}}}const _0x366d4a=this[a16_0xb282('0x16')]['resolver'][a16_0xb282('0x3')](_0x480ddf[a16_0xb282('0x2a')],_0x50b1f9[a16_0xb282('0x49')][a16_0xb282('0x5')]('\x20'));if(!_0x366d4a)throw new errors['DiscordError'](errors[a16_0xb282('0x3c')][a16_0xb282('0x25')],this[a16_0xb282('0x16')][a16_0xb282('0x26')][a16_0xb282('0x34')](_0x480ddf['guild'][a16_0xb282('0x43')]['language'],a16_0xb282('0x12'),a16_0xb282('0x3f')));const _0x86f4d9=!(Number(_0x50b1f9[a16_0xb282('0x14')])^Number(_0x50b1f9['user']))||_0x50b1f9[a16_0xb282('0x14')]||![];const _0x3c6fbb=!(Number(_0x50b1f9[a16_0xb282('0x14')])^Number(_0x50b1f9['user']))||_0x50b1f9[a16_0xb282('0x2c')]||![];await Role_1[a16_0xb282('0x17')][a16_0xb282('0x38')](_0x366d4a['id'],{'_id':_0x366d4a['id'],'guild':_0x480ddf[a16_0xb282('0x2a')]['id'],'autoAssignable':{'forBots':_0x86f4d9,'forUsers':_0x3c6fbb}},{'upsert':!![]});await _0x480ddf[a16_0xb282('0x1b')][a16_0xb282('0x35')]({'embed':{'color':tesseract_1[a16_0xb282('0x44')][a16_0xb282('0x39')][a16_0xb282('0x6')],'description':this[a16_0xb282('0x16')][a16_0xb282('0x26')][a16_0xb282('0x34')](_0x480ddf['guild']['document'][a16_0xb282('0x15')],a16_0xb282('0x42'),'autoRolesAdd',_0x480ddf[a16_0xb282('0x33')][a16_0xb282('0x2e')],_0x366d4a[a16_0xb282('0x32')]),'fields':[{'name':a16_0xb282('0x21'),'value':_0x86f4d9[a16_0xb282('0x48')]()[a16_0xb282('0x3d')](),'inline':!![]},{'name':a16_0xb282('0xf'),'value':_0x3c6fbb[a16_0xb282('0x48')]()['toUpperCase'](),'inline':!![]}],'footer':{'text':_0x366d4a['id']}}})[a16_0xb282('0x1f')](()=>{});}else if(_0x50b1f9[a16_0xb282('0x0')]){const _0x44e7af=this[a16_0xb282('0x16')][a16_0xb282('0x10')]['resolveRole'](_0x480ddf['guild'],_0x50b1f9[a16_0xb282('0x0')][a16_0xb282('0x5')]('\x20'));if(!_0x44e7af)throw new errors[(a16_0xb282('0x8'))](errors['BASTION_ERROR_TYPE'][a16_0xb282('0x25')],this[a16_0xb282('0x16')][a16_0xb282('0x26')][a16_0xb282('0x34')](_0x480ddf[a16_0xb282('0x2a')][a16_0xb282('0x43')][a16_0xb282('0x15')],'errors',a16_0xb282('0x3f')));await Role_1[a16_0xb282('0x17')][a16_0xb282('0x38')](_0x44e7af['id'],{'$unset':{'autoAssignable':0x1}});await _0x480ddf[a16_0xb282('0x1b')][a16_0xb282('0x35')]({'embed':{'color':tesseract_1[a16_0xb282('0x44')][a16_0xb282('0x39')][a16_0xb282('0xc')],'description':this[a16_0xb282('0x16')][a16_0xb282('0x26')][a16_0xb282('0x34')](_0x480ddf[a16_0xb282('0x2a')][a16_0xb282('0x43')]['language'],'info',a16_0xb282('0x45'),_0x480ddf[a16_0xb282('0x33')][a16_0xb282('0x2e')],_0x44e7af[a16_0xb282('0x32')]),'footer':{'text':_0x44e7af['id']}}})['catch'](()=>{});}else{const _0x1198d0=await Role_1['default'][a16_0xb282('0x4')]({'guild':_0x480ddf[a16_0xb282('0x2a')]['id'],'autoAssignable':{'$exists':!![]}});if(!_0x1198d0[a16_0xb282('0xd')]){throw new Error(this['client']['locale'][a16_0xb282('0x34')](_0x480ddf['guild']['document']['language'],a16_0xb282('0x12'),a16_0xb282('0x19')));}const _0x8a9b34=[];for(const _0x502ece of _0x1198d0){if(!_0x480ddf['guild'][a16_0xb282('0x1e')][a16_0xb282('0x2b')][a16_0xb282('0x13')](_0x502ece[a16_0xb282('0x24')])){await _0x502ece[a16_0xb282('0x0')]()[a16_0xb282('0x1f')](()=>{});}_0x8a9b34[a16_0xb282('0x11')]({'name':_0x480ddf[a16_0xb282('0x2a')][a16_0xb282('0x1e')][a16_0xb282('0x2b')][a16_0xb282('0x47')](_0x502ece[a16_0xb282('0x24')])[a16_0xb282('0x32')]||'-','value':_0x502ece[a16_0xb282('0x24')]+(Number(_0x502ece[a16_0xb282('0x3e')]['forBots'])^Number(_0x502ece[a16_0xb282('0x3e')][a16_0xb282('0x1d')])&&_0x502ece[a16_0xb282('0x3e')]['forBots']?a16_0xb282('0x2f'):'')+(Number(_0x502ece['autoAssignable'][a16_0xb282('0x2')])^Number(_0x502ece[a16_0xb282('0x3e')][a16_0xb282('0x1d')])&&_0x502ece[a16_0xb282('0x3e')]['forUsers']?a16_0xb282('0x2d'):'')});}await _0x480ddf[a16_0xb282('0x1b')]['send']({'embed':{'color':tesseract_1['Constants'][a16_0xb282('0x39')]['IRIS'],'title':a16_0xb282('0xe'),'description':this[a16_0xb282('0x16')]['locale'][a16_0xb282('0x34')](_0x480ddf[a16_0xb282('0x2a')][a16_0xb282('0x43')][a16_0xb282('0x15')],'info',a16_0xb282('0x3a')),'fields':_0x8a9b34}})[a16_0xb282('0x1f')](()=>{});}};}};
const a16_0x4a7a=['PLATINUM','name','COLORS','find','tag','bot','document','autoRoles','\x20/\x20HUMANS','LIMITED_PREMIUM_MEMBERSHIP','autoRolesRemove','add','GOLD','has','resolver','constructor','autoRoles\x20--add\x20ROLE','client','channel','GREEN','forBots','DiscordError','autoRolesAdd','roleNotFound','Constants','join','MANAGE_ROLES','IRIS','compile','apply','LIMITS','default','toString','BASTION_ERROR_TYPE','Command','AUTO_ROLES','errors','guild','get','length','autoRoles\x20--add\x20ROLE\x20--user','autoRoles\x20--add\x20ROLE\x20--bot','return\x20/\x22\x20+\x20this\x20+\x20\x22/','noAutoRoles','getString','catch','_id','toUpperCase','cache','resolveRole','Auto\x20Roles','author','user','test','forUsers','../../utils/constants','premiumAutoRoles','findByIdAndUpdate','language','PremiumTier','autoRolesList','isPublicBastion','ROLE_NOT_FOUND','membershipLimitAutoRoles','info','send','For\x20Bots','locale','remove','roles','autoAssignable','../../utils/omnic'];(function(_0x44847c,_0x4a7a4e){const _0x148a9d=function(_0x1fa098){while(--_0x1fa098){_0x44847c['push'](_0x44847c['shift']());}};const _0x45c5cd=function(){const _0x28b4cd={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3453db,_0x2034a9,_0x510808,_0x45a948){_0x45a948=_0x45a948||{};let _0x515262=_0x2034a9+'='+_0x510808;let _0x4d35d2=0x0;for(let _0x3fd107=0x0,_0x5264b8=_0x3453db['length'];_0x3fd107<_0x5264b8;_0x3fd107++){const _0x2b96c5=_0x3453db[_0x3fd107];_0x515262+=';\x20'+_0x2b96c5;const _0x4c3ad9=_0x3453db[_0x2b96c5];_0x3453db['push'](_0x4c3ad9);_0x5264b8=_0x3453db['length'];if(_0x4c3ad9!==!![]){_0x515262+='='+_0x4c3ad9;}}_0x45a948['cookie']=_0x515262;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3d8f31,_0x296938){_0x3d8f31=_0x3d8f31||function(_0x3e750e){return _0x3e750e;};const _0x578a52=_0x3d8f31(new RegExp('(?:^|;\x20)'+_0x296938['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x43d1df=function(_0x5f20f7,_0x34ea08){_0x5f20f7(++_0x34ea08);};_0x43d1df(_0x148a9d,_0x4a7a4e);return _0x578a52?decodeURIComponent(_0x578a52[0x1]):undefined;}};const _0x362a0b=function(){const _0x31f7df=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x31f7df['test'](_0x28b4cd['removeCookie']['toString']());};_0x28b4cd['updateCookie']=_0x362a0b;let _0xad028f='';const _0x2ce43a=_0x28b4cd['updateCookie']();if(!_0x2ce43a){_0x28b4cd['setCookie'](['*'],'counter',0x1);}else if(_0x2ce43a){_0xad028f=_0x28b4cd['getCookie'](null,'counter');}else{_0x28b4cd['removeCookie']();}};_0x45c5cd();}(a16_0x4a7a,0x184));const a16_0x148a=function(_0x44847c,_0x4a7a4e){_0x44847c=_0x44847c-0x0;let _0x148a9d=a16_0x4a7a[_0x44847c];return _0x148a9d;};const a16_0x28b4cd=function(){let _0x1c96ee=!![];return function(_0xd66c3b,_0x120e55){const _0x1ab7e2=_0x1c96ee?function(){if(_0x120e55){const _0x369930=_0x120e55[a16_0x148a('0x1')](_0xd66c3b,arguments);_0x120e55=null;return _0x369930;}}:function(){};_0x1c96ee=![];return _0x1ab7e2;};}();const a16_0x1fa098=a16_0x28b4cd(this,function(){const _0x2dd215=function(){const _0x218248=_0x2dd215[a16_0x148a('0x3b')](a16_0x148a('0xe'))()[a16_0x148a('0x0')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x218248[a16_0x148a('0x19')](a16_0x1fa098);};return _0x2dd215();});a16_0x1fa098();'use strict';const tesseract_1=require('@bastion/tesseract');const Role_1=require('../../models/Role');const constants=require(a16_0x148a('0x1b'));const errors=require('../../utils/errors');const omnic=require(a16_0x148a('0x2b'));module['exports']=class AutoRoles extends tesseract_1[a16_0x148a('0x6')]{constructor(){super(a16_0x148a('0x33'),{'description':'It\x20allows\x20you\x20to\x20set\x20up\x20Auto\x20Roles\x20in\x20the\x20server.\x20Auto\x20Roles\x20are\x20the\x20roles\x20which\x20are\x20assigned\x20to\x20users\x20automatically\x20when\x20they\x20join\x20the\x20server.\x20You\x20can\x20optionally\x20set\x20up\x20Auto\x20Roles\x20for\x20either\x20bots\x20or\x20humans.','triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r'],'bot':['b'],'user':['u']},'array':[a16_0x148a('0x37'),a16_0x148a('0x28')],'boolean':['bot',a16_0x148a('0x18')],'string':[a16_0x148a('0x37'),a16_0x148a('0x28')]},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':['MANAGE_ROLES'],'userPermissions':[a16_0x148a('0x46')],'syntax':[a16_0x148a('0x33'),a16_0x148a('0x3c'),a16_0x148a('0xd'),a16_0x148a('0xc'),'autoRoles\x20--remove\x20ROLE']});this['exec']=async(_0x2b4666,_0x2419e3)=>{if(_0x2419e3[a16_0x148a('0x37')]){if(constants[a16_0x148a('0x21')](this[a16_0x148a('0x3d')]['user'])){const _0x38712f=await Role_1[a16_0x148a('0x3')]['countDocuments']({'guild':_0x2b4666[a16_0x148a('0x9')]['id'],'autoAssignable':{'$exists':!![],'$ne':null}});if(_0x38712f>=constants['LIMITS'][a16_0x148a('0x7')]){const _0x3e45bc=await omnic['fetchPremiumTier'](_0x2b4666[a16_0x148a('0x9')])['catch'](()=>{});if(_0x3e45bc){if(_0x3e45bc===omnic[a16_0x148a('0x1f')][a16_0x148a('0x38')]&&_0x38712f>=constants[a16_0x148a('0x2')][a16_0x148a('0x38')][a16_0x148a('0x7')]){throw new errors[(a16_0x148a('0x41'))](errors['BASTION_ERROR_TYPE'][a16_0x148a('0x35')],this[a16_0x148a('0x3d')]['locale'][a16_0x148a('0x10')](_0x2b4666[a16_0x148a('0x9')][a16_0x148a('0x32')][a16_0x148a('0x1e')],a16_0x148a('0x8'),a16_0x148a('0x23'),constants['LIMITS'][a16_0x148a('0x38')][a16_0x148a('0x7')]));}else if(_0x3e45bc===omnic[a16_0x148a('0x1f')][a16_0x148a('0x2c')]&&_0x38712f>=constants[a16_0x148a('0x2')][a16_0x148a('0x2c')][a16_0x148a('0x7')]){throw new errors[(a16_0x148a('0x41'))](errors[a16_0x148a('0x5')]['LIMITED_PREMIUM_MEMBERSHIP'],this[a16_0x148a('0x3d')][a16_0x148a('0x27')][a16_0x148a('0x10')](_0x2b4666['guild'][a16_0x148a('0x32')]['language'],a16_0x148a('0x8'),a16_0x148a('0x23'),constants[a16_0x148a('0x2')][a16_0x148a('0x2c')][a16_0x148a('0x7')]));}}else{throw new errors['DiscordError'](errors[a16_0x148a('0x5')]['PREMIUM_MEMBERSHIP_REQUIRED'],this[a16_0x148a('0x3d')]['locale'][a16_0x148a('0x10')](_0x2b4666[a16_0x148a('0x9')][a16_0x148a('0x32')]['language'],a16_0x148a('0x8'),a16_0x148a('0x1c'),constants['LIMITS'][a16_0x148a('0x7')]));}}}const _0x43823b=this['client'][a16_0x148a('0x3a')][a16_0x148a('0x15')](_0x2b4666[a16_0x148a('0x9')],_0x2419e3[a16_0x148a('0x37')][a16_0x148a('0x45')]('\x20'));if(!_0x43823b)throw new errors[(a16_0x148a('0x41'))](errors[a16_0x148a('0x5')][a16_0x148a('0x22')],this[a16_0x148a('0x3d')]['locale']['getString'](_0x2b4666[a16_0x148a('0x9')][a16_0x148a('0x32')][a16_0x148a('0x1e')],a16_0x148a('0x8'),a16_0x148a('0x43')));const _0x36b845=!(Number(_0x2419e3[a16_0x148a('0x31')])^Number(_0x2419e3[a16_0x148a('0x18')]))||_0x2419e3[a16_0x148a('0x31')]||![];const _0x5504be=!(Number(_0x2419e3[a16_0x148a('0x31')])^Number(_0x2419e3[a16_0x148a('0x18')]))||_0x2419e3[a16_0x148a('0x18')]||![];await Role_1[a16_0x148a('0x3')][a16_0x148a('0x1d')](_0x43823b['id'],{'_id':_0x43823b['id'],'guild':_0x2b4666[a16_0x148a('0x9')]['id'],'autoAssignable':{'forBots':_0x36b845,'forUsers':_0x5504be}},{'upsert':!![]});await _0x2b4666[a16_0x148a('0x3e')][a16_0x148a('0x25')]({'embed':{'color':tesseract_1[a16_0x148a('0x44')][a16_0x148a('0x2e')][a16_0x148a('0x3f')],'description':this['client']['locale'][a16_0x148a('0x10')](_0x2b4666[a16_0x148a('0x9')][a16_0x148a('0x32')]['language'],a16_0x148a('0x24'),a16_0x148a('0x42'),_0x2b4666[a16_0x148a('0x17')][a16_0x148a('0x30')],_0x43823b[a16_0x148a('0x2d')]),'fields':[{'name':a16_0x148a('0x26'),'value':_0x36b845[a16_0x148a('0x4')]()[a16_0x148a('0x13')](),'inline':!![]},{'name':'For\x20Humans','value':_0x5504be[a16_0x148a('0x4')]()['toUpperCase'](),'inline':!![]}],'footer':{'text':_0x43823b['id']}}})[a16_0x148a('0x11')](()=>{});}else if(_0x2419e3['remove']){const _0x2b351a=this[a16_0x148a('0x3d')][a16_0x148a('0x3a')][a16_0x148a('0x15')](_0x2b4666[a16_0x148a('0x9')],_0x2419e3[a16_0x148a('0x28')]['join']('\x20'));if(!_0x2b351a)throw new errors[(a16_0x148a('0x41'))](errors['BASTION_ERROR_TYPE'][a16_0x148a('0x22')],this[a16_0x148a('0x3d')][a16_0x148a('0x27')][a16_0x148a('0x10')](_0x2b4666[a16_0x148a('0x9')][a16_0x148a('0x32')][a16_0x148a('0x1e')],a16_0x148a('0x8'),a16_0x148a('0x43')));await Role_1[a16_0x148a('0x3')]['findByIdAndUpdate'](_0x2b351a['id'],{'$unset':{'autoAssignable':0x1}});await _0x2b4666[a16_0x148a('0x3e')]['send']({'embed':{'color':tesseract_1[a16_0x148a('0x44')][a16_0x148a('0x2e')]['RED'],'description':this[a16_0x148a('0x3d')][a16_0x148a('0x27')][a16_0x148a('0x10')](_0x2b4666[a16_0x148a('0x9')]['document'][a16_0x148a('0x1e')],a16_0x148a('0x24'),a16_0x148a('0x36'),_0x2b4666[a16_0x148a('0x17')][a16_0x148a('0x30')],_0x2b351a[a16_0x148a('0x2d')]),'footer':{'text':_0x2b351a['id']}}})[a16_0x148a('0x11')](()=>{});}else{const _0x1db00=await Role_1[a16_0x148a('0x3')][a16_0x148a('0x2f')]({'guild':_0x2b4666[a16_0x148a('0x9')]['id'],'autoAssignable':{'$exists':!![]}});if(!_0x1db00[a16_0x148a('0xb')]){throw new Error(this[a16_0x148a('0x3d')][a16_0x148a('0x27')][a16_0x148a('0x10')](_0x2b4666[a16_0x148a('0x9')][a16_0x148a('0x32')][a16_0x148a('0x1e')],a16_0x148a('0x8'),a16_0x148a('0xf')));}const _0x6230dd=[];for(const _0x4007f1 of _0x1db00){if(!_0x2b4666['guild'][a16_0x148a('0x29')][a16_0x148a('0x14')][a16_0x148a('0x39')](_0x4007f1[a16_0x148a('0x12')])){await _0x4007f1[a16_0x148a('0x28')]()['catch'](()=>{});}_0x6230dd['push']({'name':_0x2b4666[a16_0x148a('0x9')][a16_0x148a('0x29')][a16_0x148a('0x14')][a16_0x148a('0xa')](_0x4007f1[a16_0x148a('0x12')])[a16_0x148a('0x2d')]||'-','value':_0x4007f1[a16_0x148a('0x12')]+(Number(_0x4007f1[a16_0x148a('0x2a')][a16_0x148a('0x40')])^Number(_0x4007f1[a16_0x148a('0x2a')][a16_0x148a('0x1a')])&&_0x4007f1[a16_0x148a('0x2a')][a16_0x148a('0x40')]?'\x20/\x20BOTS':'')+(Number(_0x4007f1['autoAssignable']['forBots'])^Number(_0x4007f1['autoAssignable'][a16_0x148a('0x1a')])&&_0x4007f1[a16_0x148a('0x2a')][a16_0x148a('0x1a')]?a16_0x148a('0x34'):'')});}await _0x2b4666[a16_0x148a('0x3e')]['send']({'embed':{'color':tesseract_1[a16_0x148a('0x44')][a16_0x148a('0x2e')][a16_0x148a('0x47')],'title':a16_0x148a('0x16'),'description':this[a16_0x148a('0x3d')][a16_0x148a('0x27')][a16_0x148a('0x10')](_0x2b4666[a16_0x148a('0x9')][a16_0x148a('0x32')][a16_0x148a('0x1e')],a16_0x148a('0x24'),a16_0x148a('0x20')),'fields':_0x6230dd}})[a16_0x148a('0x11')](()=>{});}};}};
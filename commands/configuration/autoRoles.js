const a16_0x751d=['PremiumTier','IRIS','author','MANAGE_ROLES','For\x20Humans','_id','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','channel','language','autoRolesList','toUpperCase','getString','client','return\x20/\x22\x20+\x20this\x20+\x20\x22/','constructor','AUTO_ROLES','find','document','membershipLimitAutoRoles','noAutoRoles','autoAssignable','remove','has','name','guild','countDocuments','autoRoles','add','GOLD','autoRoles\x20--add\x20ROLE','BASTION_ERROR_TYPE','\x20/\x20HUMANS','PLATINUM','autoRoles\x20--add\x20ROLE\x20--bot','roles','premiumAutoRoles','It\x20allows\x20you\x20to\x20set\x20up\x20Auto\x20Roles\x20in\x20the\x20server.\x20Auto\x20Roles\x20are\x20the\x20roles\x20which\x20are\x20assigned\x20to\x20users\x20automatically\x20when\x20they\x20join\x20the\x20server.\x20You\x20can\x20optionally\x20set\x20up\x20Auto\x20Roles\x20for\x20either\x20bots\x20or\x20humans.','Auto\x20Roles','join','user','isPublicBastion','Command','forBots','info','errors','locale','../../models/Role','autoRoles\x20--remove\x20ROLE','DiscordError','ROLE_NOT_FOUND','RED','get','COLORS','forUsers','catch','tag','GREEN','roleNotFound','autoRolesAdd','cache','For\x20Bots','toString','resolveRole','send','default','resolver','Constants','../../utils/constants','push','apply','findByIdAndUpdate','LIMITS','bot','length','\x20/\x20BOTS'];(function(_0x1175cc,_0x751d48){const _0x19633b=function(_0x5dd6bb){while(--_0x5dd6bb){_0x1175cc['push'](_0x1175cc['shift']());}},_0x41d98c=function(){const _0x2a72e2={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3aaef6,_0x32c043,_0x4c2992,_0x4c585a){_0x4c585a=_0x4c585a||{};let _0x3fdc58=_0x32c043+'='+_0x4c2992,_0x39c3cc=0x0;for(let _0x2bb7c9=0x0,_0x31937c=_0x3aaef6['length'];_0x2bb7c9<_0x31937c;_0x2bb7c9++){const _0x23b9a0=_0x3aaef6[_0x2bb7c9];_0x3fdc58+=';\x20'+_0x23b9a0;const _0x486e5a=_0x3aaef6[_0x23b9a0];_0x3aaef6['push'](_0x486e5a),_0x31937c=_0x3aaef6['length'],_0x486e5a!==!![]&&(_0x3fdc58+='='+_0x486e5a);}_0x4c585a['cookie']=_0x3fdc58;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5ce243,_0x45dd32){_0x5ce243=_0x5ce243||function(_0x4f96e5){return _0x4f96e5;};const _0x30ea45=_0x5ce243(new RegExp('(?:^|;\x20)'+_0x45dd32['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x561057=function(_0x4b0a5f,_0x4499e2){_0x4b0a5f(++_0x4499e2);};return _0x561057(_0x19633b,_0x751d48),_0x30ea45?decodeURIComponent(_0x30ea45[0x1]):undefined;}},_0x55f675=function(){const _0x9cb718=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x9cb718['test'](_0x2a72e2['removeCookie']['toString']());};_0x2a72e2['updateCookie']=_0x55f675;let _0x1d21fe='';const _0x382405=_0x2a72e2['updateCookie']();if(!_0x382405)_0x2a72e2['setCookie'](['*'],'counter',0x1);else _0x382405?_0x1d21fe=_0x2a72e2['getCookie'](null,'counter'):_0x2a72e2['removeCookie']();};_0x41d98c();}(a16_0x751d,0xad));const a16_0x1963=function(_0x1175cc,_0x751d48){_0x1175cc=_0x1175cc-0x0;let _0x19633b=a16_0x751d[_0x1175cc];return _0x19633b;};const a16_0x4c2992=function(){let _0xd6bbe7=!![];return function(_0x303373,_0x5289e0){const _0x36fde7=_0xd6bbe7?function(){if(_0x5289e0){const _0x2153bc=_0x5289e0[a16_0x1963('0x2e')](_0x303373,arguments);return _0x5289e0=null,_0x2153bc;}}:function(){};return _0xd6bbe7=![],_0x36fde7;};}(),a16_0x32c043=a16_0x4c2992(this,function(){const _0x50cd40=function(){const _0x37550b=_0x50cd40[a16_0x1963('0x42')](a16_0x1963('0x41'))()[a16_0x1963('0x42')](a16_0x1963('0x3a'));return!_0x37550b['test'](a16_0x32c043);};return _0x50cd40();});a16_0x32c043();'use strict';const tesseract_1=require('@bastion/tesseract'),Role_1=require(a16_0x1963('0x17')),constants=require(a16_0x1963('0x2c')),errors=require('../../utils/errors'),omnic=require('../../utils/omnic');module['exports']=class AutoRoles extends tesseract_1[a16_0x1963('0x12')]{constructor(){super(a16_0x1963('0x3'),{'description':a16_0x1963('0xd'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r'],'bot':['b'],'user':['u']},'array':['add',a16_0x1963('0x49')],'boolean':['bot','user'],'string':[a16_0x1963('0x4'),a16_0x1963('0x49')]},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a16_0x1963('0x37')],'userPermissions':[a16_0x1963('0x37')],'syntax':['autoRoles',a16_0x1963('0x6'),a16_0x1963('0xa'),'autoRoles\x20--add\x20ROLE\x20--user',a16_0x1963('0x18')]}),this['exec']=async(_0x5cfdc1,_0x44b42f)=>{if(_0x44b42f[a16_0x1963('0x4')]){if(constants[a16_0x1963('0x11')](this[a16_0x1963('0x40')][a16_0x1963('0x10')])){const _0x1bf4d5=await Role_1['default'][a16_0x1963('0x2')]({'guild':_0x5cfdc1[a16_0x1963('0x1')]['id'],'autoAssignable':{'$exists':!![],'$ne':null}});if(_0x1bf4d5>=constants['LIMITS']['AUTO_ROLES']){const _0x101d9e=await omnic['fetchPremiumTier'](_0x5cfdc1[a16_0x1963('0x1')])[a16_0x1963('0x1f')](()=>{});if(_0x101d9e){if(_0x101d9e===omnic[a16_0x1963('0x34')][a16_0x1963('0x5')]&&_0x1bf4d5>=constants[a16_0x1963('0x30')][a16_0x1963('0x5')][a16_0x1963('0x43')])throw new errors[(a16_0x1963('0x19'))](errors[a16_0x1963('0x7')]['LIMITED_PREMIUM_MEMBERSHIP'],this[a16_0x1963('0x40')][a16_0x1963('0x16')][a16_0x1963('0x3f')](_0x5cfdc1[a16_0x1963('0x1')]['document'][a16_0x1963('0x3c')],a16_0x1963('0x15'),a16_0x1963('0x46'),constants['LIMITS'][a16_0x1963('0x5')][a16_0x1963('0x43')]));else{if(_0x101d9e===omnic['PremiumTier'][a16_0x1963('0x9')]&&_0x1bf4d5>=constants[a16_0x1963('0x30')]['PLATINUM'][a16_0x1963('0x43')])throw new errors[(a16_0x1963('0x19'))](errors[a16_0x1963('0x7')]['LIMITED_PREMIUM_MEMBERSHIP'],this['client'][a16_0x1963('0x16')][a16_0x1963('0x3f')](_0x5cfdc1[a16_0x1963('0x1')]['document'][a16_0x1963('0x3c')],'errors',a16_0x1963('0x46'),constants['LIMITS']['PLATINUM']['AUTO_ROLES']));}}else throw new errors[(a16_0x1963('0x19'))](errors[a16_0x1963('0x7')]['PREMIUM_MEMBERSHIP_REQUIRED'],this[a16_0x1963('0x40')]['locale'][a16_0x1963('0x3f')](_0x5cfdc1['guild'][a16_0x1963('0x45')][a16_0x1963('0x3c')],a16_0x1963('0x15'),a16_0x1963('0xc'),constants[a16_0x1963('0x30')][a16_0x1963('0x43')]));}}const _0x426c06=this[a16_0x1963('0x40')][a16_0x1963('0x2a')][a16_0x1963('0x27')](_0x5cfdc1['guild'],_0x44b42f[a16_0x1963('0x4')]['join']('\x20'));if(!_0x426c06)throw new errors[(a16_0x1963('0x19'))](errors[a16_0x1963('0x7')][a16_0x1963('0x1a')],this['client'][a16_0x1963('0x16')][a16_0x1963('0x3f')](_0x5cfdc1[a16_0x1963('0x1')][a16_0x1963('0x45')]['language'],a16_0x1963('0x15'),a16_0x1963('0x22')));const _0x1fac07=!(Number(_0x44b42f['bot'])^Number(_0x44b42f[a16_0x1963('0x10')]))||_0x44b42f['bot']||![],_0x313e8c=!(Number(_0x44b42f[a16_0x1963('0x31')])^Number(_0x44b42f['user']))||_0x44b42f[a16_0x1963('0x10')]||![];await Role_1[a16_0x1963('0x29')][a16_0x1963('0x2f')](_0x426c06['id'],{'_id':_0x426c06['id'],'guild':_0x5cfdc1['guild']['id'],'autoAssignable':{'forBots':_0x1fac07,'forUsers':_0x313e8c}},{'upsert':!![]}),await _0x5cfdc1['channel'][a16_0x1963('0x28')]({'embed':{'color':tesseract_1[a16_0x1963('0x2b')][a16_0x1963('0x1d')][a16_0x1963('0x21')],'description':this[a16_0x1963('0x40')][a16_0x1963('0x16')][a16_0x1963('0x3f')](_0x5cfdc1[a16_0x1963('0x1')][a16_0x1963('0x45')][a16_0x1963('0x3c')],a16_0x1963('0x14'),a16_0x1963('0x23'),_0x5cfdc1[a16_0x1963('0x36')]['tag'],_0x426c06['name']),'fields':[{'name':a16_0x1963('0x25'),'value':_0x1fac07[a16_0x1963('0x26')]()[a16_0x1963('0x3e')](),'inline':!![]},{'name':a16_0x1963('0x38'),'value':_0x313e8c['toString']()[a16_0x1963('0x3e')](),'inline':!![]}],'footer':{'text':_0x426c06['id']}}})[a16_0x1963('0x1f')](()=>{});}else{if(_0x44b42f['remove']){const _0x21714a=this[a16_0x1963('0x40')][a16_0x1963('0x2a')]['resolveRole'](_0x5cfdc1[a16_0x1963('0x1')],_0x44b42f[a16_0x1963('0x49')][a16_0x1963('0xf')]('\x20'));if(!_0x21714a)throw new errors['DiscordError'](errors[a16_0x1963('0x7')][a16_0x1963('0x1a')],this[a16_0x1963('0x40')]['locale'][a16_0x1963('0x3f')](_0x5cfdc1[a16_0x1963('0x1')][a16_0x1963('0x45')][a16_0x1963('0x3c')],'errors',a16_0x1963('0x22')));await Role_1[a16_0x1963('0x29')][a16_0x1963('0x2f')](_0x21714a['id'],{'$unset':{'autoAssignable':0x1}}),await _0x5cfdc1[a16_0x1963('0x3b')][a16_0x1963('0x28')]({'embed':{'color':tesseract_1[a16_0x1963('0x2b')][a16_0x1963('0x1d')][a16_0x1963('0x1b')],'description':this[a16_0x1963('0x40')][a16_0x1963('0x16')][a16_0x1963('0x3f')](_0x5cfdc1['guild'][a16_0x1963('0x45')][a16_0x1963('0x3c')],a16_0x1963('0x14'),'autoRolesRemove',_0x5cfdc1[a16_0x1963('0x36')][a16_0x1963('0x20')],_0x21714a['name']),'footer':{'text':_0x21714a['id']}}})[a16_0x1963('0x1f')](()=>{});}else{const _0x3afa14=await Role_1['default'][a16_0x1963('0x44')]({'guild':_0x5cfdc1['guild']['id'],'autoAssignable':{'$exists':!![]}});if(!_0x3afa14[a16_0x1963('0x32')])throw new Error(this[a16_0x1963('0x40')][a16_0x1963('0x16')]['getString'](_0x5cfdc1[a16_0x1963('0x1')]['document'][a16_0x1963('0x3c')],a16_0x1963('0x15'),a16_0x1963('0x47')));const _0xd66ebd=[];for(const _0xdba2dc of _0x3afa14){!_0x5cfdc1[a16_0x1963('0x1')][a16_0x1963('0xb')][a16_0x1963('0x24')][a16_0x1963('0x4a')](_0xdba2dc[a16_0x1963('0x39')])&&await _0xdba2dc[a16_0x1963('0x49')]()[a16_0x1963('0x1f')](()=>{}),_0xd66ebd[a16_0x1963('0x2d')]({'name':_0x5cfdc1[a16_0x1963('0x1')][a16_0x1963('0xb')][a16_0x1963('0x24')][a16_0x1963('0x1c')](_0xdba2dc['_id'])[a16_0x1963('0x0')]||'-','value':_0xdba2dc[a16_0x1963('0x39')]+(Number(_0xdba2dc[a16_0x1963('0x48')][a16_0x1963('0x13')])^Number(_0xdba2dc[a16_0x1963('0x48')]['forUsers'])&&_0xdba2dc[a16_0x1963('0x48')][a16_0x1963('0x13')]?a16_0x1963('0x33'):'')+(Number(_0xdba2dc[a16_0x1963('0x48')]['forBots'])^Number(_0xdba2dc[a16_0x1963('0x48')][a16_0x1963('0x1e')])&&_0xdba2dc[a16_0x1963('0x48')][a16_0x1963('0x1e')]?a16_0x1963('0x8'):'')});}await _0x5cfdc1[a16_0x1963('0x3b')][a16_0x1963('0x28')]({'embed':{'color':tesseract_1[a16_0x1963('0x2b')][a16_0x1963('0x1d')][a16_0x1963('0x35')],'title':a16_0x1963('0xe'),'description':this[a16_0x1963('0x40')][a16_0x1963('0x16')][a16_0x1963('0x3f')](_0x5cfdc1['guild'][a16_0x1963('0x45')]['language'],a16_0x1963('0x14'),a16_0x1963('0x3d')),'fields':_0xd66ebd}})[a16_0x1963('0x1f')](()=>{});}}};}};
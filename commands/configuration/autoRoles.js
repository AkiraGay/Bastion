const a16_0x5b6e=['ROLE_NOT_FOUND','MANAGE_ROLES','../../utils/errors','user','LIMITS','roles','@bastion/tesseract','send','author','resolver','forUsers','noAutoRoles','client','Constants','document','LIMITED_PREMIUM_MEMBERSHIP','BASTION_ERROR_TYPE','PremiumTier','IRIS','autoRoles\x20--add\x20ROLE\x20--user','forBots','../../models/Role','length','../../utils/constants','push','getString','toUpperCase','errors','exec','Auto\x20Roles','exports','AUTO_ROLES','bot','RED','toString','channel','remove','catch','\x20/\x20HUMANS','locale','../../utils/omnic','guild','find','DiscordError','default','resolveRole','countDocuments','autoRoles\x20--add\x20ROLE','COLORS','apply','GOLD','It\x20allows\x20you\x20to\x20set\x20up\x20Auto\x20Roles\x20in\x20the\x20server.\x20Auto\x20Roles\x20are\x20the\x20roles\x20which\x20are\x20assigned\x20to\x20users\x20automatically\x20when\x20they\x20join\x20the\x20server.\x20You\x20can\x20optionally\x20set\x20up\x20Auto\x20Roles\x20for\x20either\x20bots\x20or\x20humans.','info','cache','roleNotFound','autoRolesRemove','autoRolesList','language','join','name','premiumAutoRoles','add','findByIdAndUpdate','GREEN','PLATINUM','tag','get','has','constructor','autoAssignable','_id'];(function(_0x267b94,_0x5b6e79){const _0x5cc682=function(_0x3f8aee){while(--_0x3f8aee){_0x267b94['push'](_0x267b94['shift']());}},_0x536201=function(){const _0x1db9af={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x44de16,_0x192c9d,_0x593dc6,_0x2f86b2){_0x2f86b2=_0x2f86b2||{};let _0x3667b2=_0x192c9d+'='+_0x593dc6,_0x2121ae=0x0;for(let _0x48ab40=0x0,_0x326f38=_0x44de16['length'];_0x48ab40<_0x326f38;_0x48ab40++){const _0x4a5629=_0x44de16[_0x48ab40];_0x3667b2+=';\x20'+_0x4a5629;const _0x48a1da=_0x44de16[_0x4a5629];_0x44de16['push'](_0x48a1da),_0x326f38=_0x44de16['length'],_0x48a1da!==!![]&&(_0x3667b2+='='+_0x48a1da);}_0x2f86b2['cookie']=_0x3667b2;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3d9b81,_0x11ea10){_0x3d9b81=_0x3d9b81||function(_0xc6d59){return _0xc6d59;};const _0x33c418=_0x3d9b81(new RegExp('(?:^|;\x20)'+_0x11ea10['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x1f9cfd=function(_0x2816be,_0x4ca3fa){_0x2816be(++_0x4ca3fa);};return _0x1f9cfd(_0x5cc682,_0x5b6e79),_0x33c418?decodeURIComponent(_0x33c418[0x1]):undefined;}},_0x344508=function(){const _0x565766=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x565766['test'](_0x1db9af['removeCookie']['toString']());};_0x1db9af['updateCookie']=_0x344508;let _0x1dc1be='';const _0x5c005b=_0x1db9af['updateCookie']();if(!_0x5c005b)_0x1db9af['setCookie'](['*'],'counter',0x1);else _0x5c005b?_0x1dc1be=_0x1db9af['getCookie'](null,'counter'):_0x1db9af['removeCookie']();};_0x536201();}(a16_0x5b6e,0x105));const a16_0x5cc6=function(_0x267b94,_0x5b6e79){_0x267b94=_0x267b94-0x0;let _0x5cc682=a16_0x5b6e[_0x267b94];return _0x5cc682;};const a16_0x593dc6=function(){let _0x482629=!![];return function(_0x47ea08,_0x44d101){const _0x1842c3=_0x482629?function(){if(_0x44d101){const _0x439375=_0x44d101[a16_0x5cc6('0x1')](_0x47ea08,arguments);return _0x44d101=null,_0x439375;}}:function(){};return _0x482629=![],_0x1842c3;};}(),a16_0x192c9d=a16_0x593dc6(this,function(){const _0x5b69df=function(){const _0x29f3a6=_0x5b69df[a16_0x5cc6('0x14')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a16_0x5cc6('0x14')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x29f3a6['test'](a16_0x192c9d);};return _0x5b69df();});a16_0x192c9d();'use strict';const tesseract_1=require(a16_0x5cc6('0x1d')),Role_1=require(a16_0x5cc6('0x2c')),constants=require(a16_0x5cc6('0x2e')),errors=require(a16_0x5cc6('0x19')),omnic=require(a16_0x5cc6('0x3f'));module[a16_0x5cc6('0x35')]=class AutoRoles extends tesseract_1['Command']{constructor(){super('autoRoles',{'description':a16_0x5cc6('0x3'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r'],'bot':['b'],'user':['u']},'array':[a16_0x5cc6('0xd'),a16_0x5cc6('0x3b')],'boolean':[a16_0x5cc6('0x37'),a16_0x5cc6('0x1a')],'string':[a16_0x5cc6('0xd'),a16_0x5cc6('0x3b')]},'scope':a16_0x5cc6('0x40'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a16_0x5cc6('0x18')],'userPermissions':[a16_0x5cc6('0x18')],'syntax':['autoRoles',a16_0x5cc6('0x46'),'autoRoles\x20--add\x20ROLE\x20--bot',a16_0x5cc6('0x2a'),'autoRoles\x20--remove\x20ROLE']}),this[a16_0x5cc6('0x33')]=async(_0x78a914,_0x5b2d63)=>{if(_0x5b2d63['add']){if(constants['isPublicBastion'](this[a16_0x5cc6('0x23')][a16_0x5cc6('0x1a')])){const _0x42f9cc=await Role_1['default'][a16_0x5cc6('0x45')]({'guild':_0x78a914[a16_0x5cc6('0x40')]['id'],'autoAssignable':{'$exists':!![],'$ne':null}});if(_0x42f9cc>=constants[a16_0x5cc6('0x1b')][a16_0x5cc6('0x36')]){const _0x375e47=await omnic['fetchPremiumTier'](_0x78a914[a16_0x5cc6('0x40')])[a16_0x5cc6('0x3c')](()=>{});if(_0x375e47){if(_0x375e47===omnic[a16_0x5cc6('0x28')][a16_0x5cc6('0x2')]&&_0x42f9cc>=constants[a16_0x5cc6('0x1b')][a16_0x5cc6('0x2')][a16_0x5cc6('0x36')])throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE']['LIMITED_PREMIUM_MEMBERSHIP'],this[a16_0x5cc6('0x23')]['locale']['getString'](_0x78a914[a16_0x5cc6('0x40')][a16_0x5cc6('0x25')][a16_0x5cc6('0x9')],'errors','membershipLimitAutoRoles',constants['LIMITS'][a16_0x5cc6('0x2')][a16_0x5cc6('0x36')]));else{if(_0x375e47===omnic['PremiumTier'][a16_0x5cc6('0x10')]&&_0x42f9cc>=constants[a16_0x5cc6('0x1b')][a16_0x5cc6('0x10')]['AUTO_ROLES'])throw new errors[(a16_0x5cc6('0x42'))](errors[a16_0x5cc6('0x27')][a16_0x5cc6('0x26')],this['client'][a16_0x5cc6('0x3e')]['getString'](_0x78a914['guild'][a16_0x5cc6('0x25')]['language'],a16_0x5cc6('0x32'),'membershipLimitAutoRoles',constants[a16_0x5cc6('0x1b')][a16_0x5cc6('0x10')][a16_0x5cc6('0x36')]));}}else throw new errors['DiscordError'](errors[a16_0x5cc6('0x27')]['PREMIUM_MEMBERSHIP_REQUIRED'],this[a16_0x5cc6('0x23')][a16_0x5cc6('0x3e')][a16_0x5cc6('0x30')](_0x78a914['guild'][a16_0x5cc6('0x25')]['language'],a16_0x5cc6('0x32'),a16_0x5cc6('0xc'),constants[a16_0x5cc6('0x1b')][a16_0x5cc6('0x36')]));}}const _0x5833ce=this[a16_0x5cc6('0x23')][a16_0x5cc6('0x20')]['resolveRole'](_0x78a914[a16_0x5cc6('0x40')],_0x5b2d63[a16_0x5cc6('0xd')][a16_0x5cc6('0xa')]('\x20'));if(!_0x5833ce)throw new errors[(a16_0x5cc6('0x42'))](errors[a16_0x5cc6('0x27')][a16_0x5cc6('0x17')],this['client'][a16_0x5cc6('0x3e')]['getString'](_0x78a914[a16_0x5cc6('0x40')][a16_0x5cc6('0x25')][a16_0x5cc6('0x9')],a16_0x5cc6('0x32'),a16_0x5cc6('0x6')));const _0x3d7f11=!(Number(_0x5b2d63[a16_0x5cc6('0x37')])^Number(_0x5b2d63[a16_0x5cc6('0x1a')]))||_0x5b2d63['bot']||![],_0x47f814=!(Number(_0x5b2d63['bot'])^Number(_0x5b2d63[a16_0x5cc6('0x1a')]))||_0x5b2d63['user']||![];await Role_1[a16_0x5cc6('0x43')]['findByIdAndUpdate'](_0x5833ce['id'],{'_id':_0x5833ce['id'],'guild':_0x78a914[a16_0x5cc6('0x40')]['id'],'autoAssignable':{'forBots':_0x3d7f11,'forUsers':_0x47f814}},{'upsert':!![]}),await _0x78a914[a16_0x5cc6('0x3a')][a16_0x5cc6('0x1e')]({'embed':{'color':tesseract_1[a16_0x5cc6('0x24')][a16_0x5cc6('0x0')][a16_0x5cc6('0xf')],'description':this[a16_0x5cc6('0x23')][a16_0x5cc6('0x3e')][a16_0x5cc6('0x30')](_0x78a914[a16_0x5cc6('0x40')]['document'][a16_0x5cc6('0x9')],a16_0x5cc6('0x4'),'autoRolesAdd',_0x78a914[a16_0x5cc6('0x1f')][a16_0x5cc6('0x11')],_0x5833ce[a16_0x5cc6('0xb')]),'fields':[{'name':'For\x20Bots','value':_0x3d7f11['toString']()[a16_0x5cc6('0x31')](),'inline':!![]},{'name':'For\x20Humans','value':_0x47f814[a16_0x5cc6('0x39')]()['toUpperCase'](),'inline':!![]}],'footer':{'text':_0x5833ce['id']}}})[a16_0x5cc6('0x3c')](()=>{});}else{if(_0x5b2d63[a16_0x5cc6('0x3b')]){const _0x2a404f=this['client'][a16_0x5cc6('0x20')][a16_0x5cc6('0x44')](_0x78a914[a16_0x5cc6('0x40')],_0x5b2d63[a16_0x5cc6('0x3b')][a16_0x5cc6('0xa')]('\x20'));if(!_0x2a404f)throw new errors['DiscordError'](errors[a16_0x5cc6('0x27')]['ROLE_NOT_FOUND'],this[a16_0x5cc6('0x23')][a16_0x5cc6('0x3e')][a16_0x5cc6('0x30')](_0x78a914[a16_0x5cc6('0x40')][a16_0x5cc6('0x25')][a16_0x5cc6('0x9')],a16_0x5cc6('0x32'),a16_0x5cc6('0x6')));await Role_1[a16_0x5cc6('0x43')][a16_0x5cc6('0xe')](_0x2a404f['id'],{'$unset':{'autoAssignable':0x1}}),await _0x78a914[a16_0x5cc6('0x3a')]['send']({'embed':{'color':tesseract_1[a16_0x5cc6('0x24')]['COLORS'][a16_0x5cc6('0x38')],'description':this[a16_0x5cc6('0x23')][a16_0x5cc6('0x3e')][a16_0x5cc6('0x30')](_0x78a914[a16_0x5cc6('0x40')][a16_0x5cc6('0x25')][a16_0x5cc6('0x9')],'info',a16_0x5cc6('0x7'),_0x78a914[a16_0x5cc6('0x1f')][a16_0x5cc6('0x11')],_0x2a404f[a16_0x5cc6('0xb')]),'footer':{'text':_0x2a404f['id']}}})['catch'](()=>{});}else{const _0xe91d7a=await Role_1[a16_0x5cc6('0x43')][a16_0x5cc6('0x41')]({'guild':_0x78a914[a16_0x5cc6('0x40')]['id'],'autoAssignable':{'$exists':!![]}});if(!_0xe91d7a[a16_0x5cc6('0x2d')])throw new Error(this[a16_0x5cc6('0x23')][a16_0x5cc6('0x3e')][a16_0x5cc6('0x30')](_0x78a914['guild'][a16_0x5cc6('0x25')]['language'],a16_0x5cc6('0x32'),a16_0x5cc6('0x22')));const _0x505685=[];for(const _0x27da23 of _0xe91d7a){!_0x78a914['guild'][a16_0x5cc6('0x1c')][a16_0x5cc6('0x5')][a16_0x5cc6('0x13')](_0x27da23[a16_0x5cc6('0x16')])&&await _0x27da23[a16_0x5cc6('0x3b')]()[a16_0x5cc6('0x3c')](()=>{}),_0x505685[a16_0x5cc6('0x2f')]({'name':_0x78a914['guild']['roles']['cache'][a16_0x5cc6('0x12')](_0x27da23[a16_0x5cc6('0x16')])[a16_0x5cc6('0xb')]||'-','value':_0x27da23[a16_0x5cc6('0x16')]+(Number(_0x27da23['autoAssignable'][a16_0x5cc6('0x2b')])^Number(_0x27da23[a16_0x5cc6('0x15')][a16_0x5cc6('0x21')])&&_0x27da23[a16_0x5cc6('0x15')]['forBots']?'\x20/\x20BOTS':'')+(Number(_0x27da23[a16_0x5cc6('0x15')][a16_0x5cc6('0x2b')])^Number(_0x27da23['autoAssignable']['forUsers'])&&_0x27da23[a16_0x5cc6('0x15')]['forUsers']?a16_0x5cc6('0x3d'):'')});}await _0x78a914[a16_0x5cc6('0x3a')]['send']({'embed':{'color':tesseract_1[a16_0x5cc6('0x24')]['COLORS'][a16_0x5cc6('0x29')],'title':a16_0x5cc6('0x34'),'description':this[a16_0x5cc6('0x23')][a16_0x5cc6('0x3e')][a16_0x5cc6('0x30')](_0x78a914[a16_0x5cc6('0x40')]['document'][a16_0x5cc6('0x9')],a16_0x5cc6('0x4'),a16_0x5cc6('0x8')),'fields':_0x505685}})[a16_0x5cc6('0x3c')](()=>{});}}};}};
const a17_0x1c77=['join','autoRoles\x20--add\x20ROLE','COLORS','BASTION_ERROR_TYPE','test','autoRoles\x20--remove\x20ROLE','../../models/Role','document','constructor','push','_id','bot','tag','autoRoles','roleNotFound','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','\x20/\x20BOTS','countDocuments','add','PREMIUM_MEMBERSHIP_REQUIRED','client','GREEN','toUpperCase','info','Constants','remove','find','errors','membershipLimitAutoRoles','send','For\x20Humans','return\x20/\x22\x20+\x20this\x20+\x20\x22/','name','PremiumTier','channel','roles','autoRolesAdd','resolveRole','resolver','For\x20Bots','language','autoRolesRemove','ROLE_NOT_FOUND','fetchPremiumTier','exec','has','getString','../../utils/omnic','author','LIMITS','forUsers','isPublicBastion','PLATINUM','\x20/\x20HUMANS','catch','It\x20allows\x20you\x20to\x20set\x20up\x20Auto\x20Roles\x20in\x20the\x20server.\x20Auto\x20Roles\x20are\x20the\x20roles\x20which\x20are\x20assigned\x20to\x20users\x20automatically\x20when\x20they\x20join\x20the\x20server.\x20You\x20can\x20optionally\x20set\x20up\x20Auto\x20Roles\x20for\x20either\x20bots\x20or\x20humans.','premiumAutoRoles','user','AUTO_ROLES','length','autoAssignable','get','GOLD','DiscordError','exports','autoRoles\x20--add\x20ROLE\x20--bot','cache','toString','@bastion/tesseract','findByIdAndUpdate','locale','guild','LIMITED_PREMIUM_MEMBERSHIP','MANAGE_ROLES','default','forBots'];(function(_0x5adef6,_0x1c77cc){const _0x33a5bb=function(_0x3ad1e2){while(--_0x3ad1e2){_0x5adef6['push'](_0x5adef6['shift']());}},_0x1d9bc4=function(){const _0x3b38df={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3b9269,_0xfade07,_0x39d586,_0x574cd0){_0x574cd0=_0x574cd0||{};let _0x5b4c13=_0xfade07+'='+_0x39d586,_0x12a015=0x0;for(let _0x3f5627=0x0,_0x4d1714=_0x3b9269['length'];_0x3f5627<_0x4d1714;_0x3f5627++){const _0x3fcc8c=_0x3b9269[_0x3f5627];_0x5b4c13+=';\x20'+_0x3fcc8c;const _0xd6ce68=_0x3b9269[_0x3fcc8c];_0x3b9269['push'](_0xd6ce68),_0x4d1714=_0x3b9269['length'],_0xd6ce68!==!![]&&(_0x5b4c13+='='+_0xd6ce68);}_0x574cd0['cookie']=_0x5b4c13;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4ee430,_0x5a8a1a){_0x4ee430=_0x4ee430||function(_0x17b735){return _0x17b735;};const _0x105323=_0x4ee430(new RegExp('(?:^|;\x20)'+_0x5a8a1a['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x4ffec4=function(_0x33e429,_0x537748){_0x33e429(++_0x537748);};return _0x4ffec4(_0x33a5bb,_0x1c77cc),_0x105323?decodeURIComponent(_0x105323[0x1]):undefined;}},_0x72b2c7=function(){const _0x32b268=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x32b268['test'](_0x3b38df['removeCookie']['toString']());};_0x3b38df['updateCookie']=_0x72b2c7;let _0x25a393='';const _0x13821d=_0x3b38df['updateCookie']();if(!_0x13821d)_0x3b38df['setCookie'](['*'],'counter',0x1);else _0x13821d?_0x25a393=_0x3b38df['getCookie'](null,'counter'):_0x3b38df['removeCookie']();};_0x1d9bc4();}(a17_0x1c77,0x124));const a17_0x33a5=function(_0x5adef6,_0x1c77cc){_0x5adef6=_0x5adef6-0x0;let _0x33a5bb=a17_0x1c77[_0x5adef6];return _0x33a5bb;};const _0x44ef39=a17_0x33a5,a17_0x3b38df=function(){let _0x25a393=!![];return function(_0x13821d,_0x3b9269){const _0xfade07=_0x25a393?function(){if(_0x3b9269){const _0x39d586=_0x3b9269['apply'](_0x13821d,arguments);return _0x3b9269=null,_0x39d586;}}:function(){};return _0x25a393=![],_0xfade07;};}(),a17_0x3ad1e2=a17_0x3b38df(this,function(){const _0x574cd0=function(){const _0x5e9717=a17_0x33a5,_0x5b4c13=_0x574cd0[_0x5e9717('0x14')](_0x5e9717('0x2b'))()[_0x5e9717('0x14')](_0x5e9717('0x1b'));return!_0x5b4c13[_0x5e9717('0x10')](a17_0x3ad1e2);};return _0x574cd0();});a17_0x3ad1e2();'use strict';const tesseract_1=require(_0x44ef39('0x4')),Role_1=require(_0x44ef39('0x12')),constants=require('../../utils/constants'),errors=require('../../utils/errors'),omnic=require(_0x44ef39('0x3b'));module[_0x44ef39('0x0')]=class AutoRoles extends tesseract_1['Command']{constructor(){const _0x3253fe=_0x44ef39;super(_0x3253fe('0x19'),{'description':_0x3253fe('0x43'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r'],'bot':['b'],'user':['u']},'array':['add',_0x3253fe('0x25')],'boolean':['bot',_0x3253fe('0x45')],'string':['add',_0x3253fe('0x25')]},'scope':_0x3253fe('0x7'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[_0x3253fe('0x9')],'userPermissions':[_0x3253fe('0x9')],'syntax':['autoRoles',_0x3253fe('0xd'),_0x3253fe('0x1'),'autoRoles\x20--add\x20ROLE\x20--user',_0x3253fe('0x11')]}),this[_0x3253fe('0x38')]=async(_0x12a015,_0x3f5627)=>{const _0x3e2831=_0x3253fe;if(_0x3f5627[_0x3e2831('0x1e')]){if(constants[_0x3e2831('0x3f')](this[_0x3e2831('0x20')][_0x3e2831('0x45')])){const _0x4ee430=await Role_1[_0x3e2831('0xa')][_0x3e2831('0x1d')]({'guild':_0x12a015[_0x3e2831('0x7')]['id'],'autoAssignable':{'$exists':!![],'$ne':null}});if(_0x4ee430>=constants[_0x3e2831('0x3d')][_0x3e2831('0x46')]){const _0x5a8a1a=await omnic[_0x3e2831('0x37')](_0x12a015[_0x3e2831('0x7')])['catch'](()=>{});if(_0x5a8a1a){if(_0x5a8a1a===omnic[_0x3e2831('0x2d')][_0x3e2831('0x4a')]&&_0x4ee430>=constants[_0x3e2831('0x3d')][_0x3e2831('0x4a')]['AUTO_ROLES'])throw new errors[(_0x3e2831('0x4b'))](errors[_0x3e2831('0xf')]['LIMITED_PREMIUM_MEMBERSHIP'],this[_0x3e2831('0x20')][_0x3e2831('0x6')][_0x3e2831('0x3a')](_0x12a015[_0x3e2831('0x7')]['document']['language'],_0x3e2831('0x27'),_0x3e2831('0x28'),constants[_0x3e2831('0x3d')][_0x3e2831('0x4a')][_0x3e2831('0x46')]));else{if(_0x5a8a1a===omnic[_0x3e2831('0x2d')][_0x3e2831('0x40')]&&_0x4ee430>=constants['LIMITS']['PLATINUM'][_0x3e2831('0x46')])throw new errors[(_0x3e2831('0x4b'))](errors[_0x3e2831('0xf')][_0x3e2831('0x8')],this[_0x3e2831('0x20')][_0x3e2831('0x6')][_0x3e2831('0x3a')](_0x12a015[_0x3e2831('0x7')][_0x3e2831('0x13')]['language'],_0x3e2831('0x27'),'membershipLimitAutoRoles',constants[_0x3e2831('0x3d')]['PLATINUM']['AUTO_ROLES']));}}else throw new errors[(_0x3e2831('0x4b'))](errors[_0x3e2831('0xf')][_0x3e2831('0x1f')],this[_0x3e2831('0x20')][_0x3e2831('0x6')][_0x3e2831('0x3a')](_0x12a015[_0x3e2831('0x7')][_0x3e2831('0x13')]['language'],_0x3e2831('0x27'),_0x3e2831('0x44'),constants['LIMITS']['AUTO_ROLES']));}}const _0x4d1714=this[_0x3e2831('0x20')]['resolver'][_0x3e2831('0x31')](_0x12a015[_0x3e2831('0x7')],_0x3f5627[_0x3e2831('0x1e')][_0x3e2831('0xc')]('\x20'));if(!_0x4d1714)throw new errors[(_0x3e2831('0x4b'))](errors[_0x3e2831('0xf')]['ROLE_NOT_FOUND'],this[_0x3e2831('0x20')][_0x3e2831('0x6')]['getString'](_0x12a015[_0x3e2831('0x7')][_0x3e2831('0x13')][_0x3e2831('0x34')],_0x3e2831('0x27'),'roleNotFound'));const _0x3fcc8c=!(Number(_0x3f5627['bot'])^Number(_0x3f5627[_0x3e2831('0x45')]))||_0x3f5627[_0x3e2831('0x17')]||![],_0xd6ce68=!(Number(_0x3f5627[_0x3e2831('0x17')])^Number(_0x3f5627[_0x3e2831('0x45')]))||_0x3f5627[_0x3e2831('0x45')]||![];await Role_1[_0x3e2831('0xa')][_0x3e2831('0x5')](_0x4d1714['id'],{'_id':_0x4d1714['id'],'guild':_0x12a015['guild']['id'],'autoAssignable':{'forBots':_0x3fcc8c,'forUsers':_0xd6ce68}},{'upsert':!![]}),await _0x12a015[_0x3e2831('0x2e')][_0x3e2831('0x29')]({'embed':{'color':tesseract_1[_0x3e2831('0x24')][_0x3e2831('0xe')][_0x3e2831('0x21')],'description':this[_0x3e2831('0x20')][_0x3e2831('0x6')][_0x3e2831('0x3a')](_0x12a015[_0x3e2831('0x7')][_0x3e2831('0x13')][_0x3e2831('0x34')],_0x3e2831('0x23'),_0x3e2831('0x30'),_0x12a015[_0x3e2831('0x3c')][_0x3e2831('0x18')],_0x4d1714['name']),'fields':[{'name':_0x3e2831('0x33'),'value':_0x3fcc8c[_0x3e2831('0x3')]()[_0x3e2831('0x22')](),'inline':!![]},{'name':_0x3e2831('0x2a'),'value':_0xd6ce68['toString']()['toUpperCase'](),'inline':!![]}],'footer':{'text':_0x4d1714['id']}}})['catch'](()=>{});}else{if(_0x3f5627[_0x3e2831('0x25')]){const _0x105323=this[_0x3e2831('0x20')][_0x3e2831('0x32')]['resolveRole'](_0x12a015[_0x3e2831('0x7')],_0x3f5627[_0x3e2831('0x25')][_0x3e2831('0xc')]('\x20'));if(!_0x105323)throw new errors[(_0x3e2831('0x4b'))](errors[_0x3e2831('0xf')][_0x3e2831('0x36')],this[_0x3e2831('0x20')][_0x3e2831('0x6')][_0x3e2831('0x3a')](_0x12a015[_0x3e2831('0x7')]['document'][_0x3e2831('0x34')],_0x3e2831('0x27'),_0x3e2831('0x1a')));await Role_1[_0x3e2831('0xa')][_0x3e2831('0x5')](_0x105323['id'],{'$unset':{'autoAssignable':0x1}}),await _0x12a015[_0x3e2831('0x2e')][_0x3e2831('0x29')]({'embed':{'color':tesseract_1[_0x3e2831('0x24')][_0x3e2831('0xe')]['RED'],'description':this[_0x3e2831('0x20')][_0x3e2831('0x6')][_0x3e2831('0x3a')](_0x12a015['guild']['document']['language'],_0x3e2831('0x23'),_0x3e2831('0x35'),_0x12a015[_0x3e2831('0x3c')][_0x3e2831('0x18')],_0x105323[_0x3e2831('0x2c')]),'footer':{'text':_0x105323['id']}}})[_0x3e2831('0x42')](()=>{});}else{const _0x4ffec4=await Role_1[_0x3e2831('0xa')][_0x3e2831('0x26')]({'guild':_0x12a015[_0x3e2831('0x7')]['id'],'autoAssignable':{'$exists':!![]}});if(!_0x4ffec4[_0x3e2831('0x47')])throw new Error(this[_0x3e2831('0x20')][_0x3e2831('0x6')][_0x3e2831('0x3a')](_0x12a015[_0x3e2831('0x7')][_0x3e2831('0x13')][_0x3e2831('0x34')],_0x3e2831('0x27'),'noAutoRoles'));const _0x17b735=[];for(const _0x33e429 of _0x4ffec4){!_0x12a015['guild'][_0x3e2831('0x2f')][_0x3e2831('0x2')][_0x3e2831('0x39')](_0x33e429[_0x3e2831('0x16')])&&await _0x33e429[_0x3e2831('0x25')]()[_0x3e2831('0x42')](()=>{}),_0x17b735[_0x3e2831('0x15')]({'name':_0x12a015[_0x3e2831('0x7')][_0x3e2831('0x2f')][_0x3e2831('0x2')][_0x3e2831('0x49')](_0x33e429[_0x3e2831('0x16')])[_0x3e2831('0x2c')]||'-','value':_0x33e429[_0x3e2831('0x16')]+(Number(_0x33e429[_0x3e2831('0x48')]['forBots'])^Number(_0x33e429['autoAssignable'][_0x3e2831('0x3e')])&&_0x33e429[_0x3e2831('0x48')][_0x3e2831('0xb')]?_0x3e2831('0x1c'):'')+(Number(_0x33e429[_0x3e2831('0x48')][_0x3e2831('0xb')])^Number(_0x33e429[_0x3e2831('0x48')][_0x3e2831('0x3e')])&&_0x33e429['autoAssignable'][_0x3e2831('0x3e')]?_0x3e2831('0x41'):'')});}await _0x12a015[_0x3e2831('0x2e')]['send']({'embed':{'color':tesseract_1['Constants']['COLORS']['IRIS'],'title':'Auto\x20Roles','description':this[_0x3e2831('0x20')][_0x3e2831('0x6')][_0x3e2831('0x3a')](_0x12a015[_0x3e2831('0x7')][_0x3e2831('0x13')][_0x3e2831('0x34')],_0x3e2831('0x23'),'autoRolesList'),'fields':_0x17b735}})[_0x3e2831('0x42')](()=>{});}}};}};
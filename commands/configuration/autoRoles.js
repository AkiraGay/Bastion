const a16_0x2470=['client','RED','test','name','fetchPremiumTier','exec','guild','findByIdAndUpdate','join','errors','locale','noAutoRoles','toString','remove','PremiumTier','language','bot','LIMITED_PREMIUM_MEMBERSHIP','send','document','roleNotFound','forUsers','forBots','autoRoles\x20--add\x20ROLE\x20--bot','autoRolesRemove','info','tag','DiscordError','\x20/\x20BOTS','LIMITS','premiumAutoRoles','get','_id','ROLE_NOT_FOUND','autoRoles\x20--add\x20ROLE','GREEN','../../models/Role','cache','default','exports','add','\x20/\x20HUMANS','resolver','PREMIUM_MEMBERSHIP_REQUIRED','COLORS','Command','IRIS','length','Constants','constructor','resolveRole','For\x20Bots','membershipLimitAutoRoles','isPublicBastion','countDocuments','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','roles','MANAGE_ROLES','AUTO_ROLES','Auto\x20Roles','apply','user','@bastion/tesseract','channel','BASTION_ERROR_TYPE','For\x20Humans','autoAssignable','getString','autoRoles','../../utils/constants','PLATINUM','../../utils/errors','It\x20allows\x20you\x20to\x20set\x20up\x20Auto\x20Roles\x20in\x20the\x20server.\x20Auto\x20Roles\x20are\x20the\x20roles\x20which\x20are\x20assigned\x20to\x20users\x20automatically\x20when\x20they\x20join\x20the\x20server.\x20You\x20can\x20optionally\x20set\x20up\x20Auto\x20Roles\x20for\x20either\x20bots\x20or\x20humans.','GOLD','author'];(function(_0x5dc700,_0x247084){const _0x5d09f7=function(_0x3ae501){while(--_0x3ae501){_0x5dc700['push'](_0x5dc700['shift']());}},_0x231fa5=function(){const _0x145f42={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0xcaf130,_0x1beb83,_0x2a7920,_0x1bb667){_0x1bb667=_0x1bb667||{};let _0x20c25c=_0x1beb83+'='+_0x2a7920,_0xab424f=0x0;for(let _0x6e103=0x0,_0xcaabdd=_0xcaf130['length'];_0x6e103<_0xcaabdd;_0x6e103++){const _0x12605f=_0xcaf130[_0x6e103];_0x20c25c+=';\x20'+_0x12605f;const _0x267075=_0xcaf130[_0x12605f];_0xcaf130['push'](_0x267075),_0xcaabdd=_0xcaf130['length'],_0x267075!==!![]&&(_0x20c25c+='='+_0x267075);}_0x1bb667['cookie']=_0x20c25c;},'removeCookie':function(){return'dev';},'getCookie':function(_0x315961,_0x56db2d){_0x315961=_0x315961||function(_0x1c277b){return _0x1c277b;};const _0xa9bb07=_0x315961(new RegExp('(?:^|;\x20)'+_0x56db2d['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x5a569e=function(_0x479067,_0x3562d8){_0x479067(++_0x3562d8);};return _0x5a569e(_0x5d09f7,_0x247084),_0xa9bb07?decodeURIComponent(_0xa9bb07[0x1]):undefined;}},_0x2f956d=function(){const _0x54e1fe=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x54e1fe['test'](_0x145f42['removeCookie']['toString']());};_0x145f42['updateCookie']=_0x2f956d;let _0x3c0f7d='';const _0x1ce3d2=_0x145f42['updateCookie']();if(!_0x1ce3d2)_0x145f42['setCookie'](['*'],'counter',0x1);else _0x1ce3d2?_0x3c0f7d=_0x145f42['getCookie'](null,'counter'):_0x145f42['removeCookie']();};_0x231fa5();}(a16_0x2470,0x1ee));const a16_0x5d09=function(_0x5dc700,_0x247084){_0x5dc700=_0x5dc700-0x0;let _0x5d09f7=a16_0x2470[_0x5dc700];return _0x5d09f7;};const a16_0x145f42=function(){let _0x3c0f7d=!![];return function(_0x1ce3d2,_0xcaf130){const _0x1beb83=_0x3c0f7d?function(){if(_0xcaf130){const _0x2a7920=_0xcaf130[a16_0x5d09('0x10')](_0x1ce3d2,arguments);return _0xcaf130=null,_0x2a7920;}}:function(){};return _0x3c0f7d=![],_0x1beb83;};}(),a16_0x3ae501=a16_0x145f42(this,function(){const _0x1bb667=function(){const _0x20c25c=_0x1bb667[a16_0x5d09('0x5')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a16_0x5d09('0x5')](a16_0x5d09('0xb'));return!_0x20c25c[a16_0x5d09('0x21')](a16_0x3ae501);};return _0x1bb667();});a16_0x3ae501();'use strict';const tesseract_1=require(a16_0x5d09('0x12')),Role_1=require(a16_0x5d09('0x43')),constants=require(a16_0x5d09('0x19')),errors=require(a16_0x5d09('0x1b')),omnic=require('../../utils/omnic');module[a16_0x5d09('0x46')]=class AutoRoles extends tesseract_1[a16_0x5d09('0x1')]{constructor(){super(a16_0x5d09('0x18'),{'description':a16_0x5d09('0x1c'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r'],'bot':['b'],'user':['u']},'array':[a16_0x5d09('0x47'),a16_0x5d09('0x2c')],'boolean':[a16_0x5d09('0x2f'),a16_0x5d09('0x11')],'string':[a16_0x5d09('0x47'),a16_0x5d09('0x2c')]},'scope':a16_0x5d09('0x25'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a16_0x5d09('0xd')],'userPermissions':['MANAGE_ROLES'],'syntax':[a16_0x5d09('0x18'),a16_0x5d09('0x41'),a16_0x5d09('0x36'),'autoRoles\x20--add\x20ROLE\x20--user','autoRoles\x20--remove\x20ROLE']}),this[a16_0x5d09('0x24')]=async(_0xab424f,_0x6e103)=>{if(_0x6e103[a16_0x5d09('0x47')]){if(constants[a16_0x5d09('0x9')](this['client'][a16_0x5d09('0x11')])){const _0x315961=await Role_1[a16_0x5d09('0x45')][a16_0x5d09('0xa')]({'guild':_0xab424f[a16_0x5d09('0x25')]['id'],'autoAssignable':{'$exists':!![],'$ne':null}});if(_0x315961>=constants[a16_0x5d09('0x3c')][a16_0x5d09('0xe')]){const _0x56db2d=await omnic[a16_0x5d09('0x23')](_0xab424f['guild'])['catch'](()=>{});if(_0x56db2d){if(_0x56db2d===omnic[a16_0x5d09('0x2d')][a16_0x5d09('0x1d')]&&_0x315961>=constants[a16_0x5d09('0x3c')][a16_0x5d09('0x1d')][a16_0x5d09('0xe')])throw new errors[(a16_0x5d09('0x3a'))](errors[a16_0x5d09('0x14')][a16_0x5d09('0x30')],this['client'][a16_0x5d09('0x29')][a16_0x5d09('0x17')](_0xab424f[a16_0x5d09('0x25')][a16_0x5d09('0x32')]['language'],a16_0x5d09('0x28'),a16_0x5d09('0x8'),constants['LIMITS'][a16_0x5d09('0x1d')]['AUTO_ROLES']));else{if(_0x56db2d===omnic[a16_0x5d09('0x2d')][a16_0x5d09('0x1a')]&&_0x315961>=constants[a16_0x5d09('0x3c')][a16_0x5d09('0x1a')]['AUTO_ROLES'])throw new errors['DiscordError'](errors[a16_0x5d09('0x14')][a16_0x5d09('0x30')],this[a16_0x5d09('0x1f')]['locale'][a16_0x5d09('0x17')](_0xab424f[a16_0x5d09('0x25')][a16_0x5d09('0x32')][a16_0x5d09('0x2e')],a16_0x5d09('0x28'),a16_0x5d09('0x8'),constants[a16_0x5d09('0x3c')][a16_0x5d09('0x1a')]['AUTO_ROLES']));}}else throw new errors[(a16_0x5d09('0x3a'))](errors[a16_0x5d09('0x14')][a16_0x5d09('0x4a')],this[a16_0x5d09('0x1f')][a16_0x5d09('0x29')][a16_0x5d09('0x17')](_0xab424f[a16_0x5d09('0x25')][a16_0x5d09('0x32')][a16_0x5d09('0x2e')],'errors',a16_0x5d09('0x3d'),constants[a16_0x5d09('0x3c')][a16_0x5d09('0xe')]));}}const _0xcaabdd=this['client'][a16_0x5d09('0x49')][a16_0x5d09('0x6')](_0xab424f[a16_0x5d09('0x25')],_0x6e103[a16_0x5d09('0x47')]['join']('\x20'));if(!_0xcaabdd)throw new errors[(a16_0x5d09('0x3a'))](errors['BASTION_ERROR_TYPE'][a16_0x5d09('0x40')],this[a16_0x5d09('0x1f')][a16_0x5d09('0x29')][a16_0x5d09('0x17')](_0xab424f[a16_0x5d09('0x25')][a16_0x5d09('0x32')][a16_0x5d09('0x2e')],a16_0x5d09('0x28'),'roleNotFound'));const _0x12605f=!(Number(_0x6e103[a16_0x5d09('0x2f')])^Number(_0x6e103[a16_0x5d09('0x11')]))||_0x6e103['bot']||![],_0x267075=!(Number(_0x6e103[a16_0x5d09('0x2f')])^Number(_0x6e103['user']))||_0x6e103[a16_0x5d09('0x11')]||![];await Role_1['default'][a16_0x5d09('0x26')](_0xcaabdd['id'],{'_id':_0xcaabdd['id'],'guild':_0xab424f[a16_0x5d09('0x25')]['id'],'autoAssignable':{'forBots':_0x12605f,'forUsers':_0x267075}},{'upsert':!![]}),await _0xab424f[a16_0x5d09('0x13')][a16_0x5d09('0x31')]({'embed':{'color':tesseract_1[a16_0x5d09('0x4')][a16_0x5d09('0x0')][a16_0x5d09('0x42')],'description':this[a16_0x5d09('0x1f')]['locale'][a16_0x5d09('0x17')](_0xab424f[a16_0x5d09('0x25')][a16_0x5d09('0x32')][a16_0x5d09('0x2e')],a16_0x5d09('0x38'),'autoRolesAdd',_0xab424f['author'][a16_0x5d09('0x39')],_0xcaabdd[a16_0x5d09('0x22')]),'fields':[{'name':a16_0x5d09('0x7'),'value':_0x12605f[a16_0x5d09('0x2b')]()['toUpperCase'](),'inline':!![]},{'name':a16_0x5d09('0x15'),'value':_0x267075[a16_0x5d09('0x2b')]()['toUpperCase'](),'inline':!![]}],'footer':{'text':_0xcaabdd['id']}}})['catch'](()=>{});}else{if(_0x6e103[a16_0x5d09('0x2c')]){const _0xa9bb07=this['client'][a16_0x5d09('0x49')][a16_0x5d09('0x6')](_0xab424f[a16_0x5d09('0x25')],_0x6e103[a16_0x5d09('0x2c')][a16_0x5d09('0x27')]('\x20'));if(!_0xa9bb07)throw new errors[(a16_0x5d09('0x3a'))](errors[a16_0x5d09('0x14')]['ROLE_NOT_FOUND'],this[a16_0x5d09('0x1f')][a16_0x5d09('0x29')][a16_0x5d09('0x17')](_0xab424f[a16_0x5d09('0x25')][a16_0x5d09('0x32')][a16_0x5d09('0x2e')],'errors',a16_0x5d09('0x33')));await Role_1['default'][a16_0x5d09('0x26')](_0xa9bb07['id'],{'$unset':{'autoAssignable':0x1}}),await _0xab424f[a16_0x5d09('0x13')][a16_0x5d09('0x31')]({'embed':{'color':tesseract_1['Constants']['COLORS'][a16_0x5d09('0x20')],'description':this[a16_0x5d09('0x1f')][a16_0x5d09('0x29')]['getString'](_0xab424f[a16_0x5d09('0x25')]['document'][a16_0x5d09('0x2e')],a16_0x5d09('0x38'),a16_0x5d09('0x37'),_0xab424f[a16_0x5d09('0x1e')][a16_0x5d09('0x39')],_0xa9bb07[a16_0x5d09('0x22')]),'footer':{'text':_0xa9bb07['id']}}})['catch'](()=>{});}else{const _0x5a569e=await Role_1[a16_0x5d09('0x45')]['find']({'guild':_0xab424f[a16_0x5d09('0x25')]['id'],'autoAssignable':{'$exists':!![]}});if(!_0x5a569e[a16_0x5d09('0x3')])throw new Error(this[a16_0x5d09('0x1f')][a16_0x5d09('0x29')]['getString'](_0xab424f[a16_0x5d09('0x25')][a16_0x5d09('0x32')][a16_0x5d09('0x2e')],a16_0x5d09('0x28'),a16_0x5d09('0x2a')));const _0x1c277b=[];for(const _0x479067 of _0x5a569e){!_0xab424f['guild'][a16_0x5d09('0xc')]['cache']['has'](_0x479067['_id'])&&await _0x479067[a16_0x5d09('0x2c')]()['catch'](()=>{}),_0x1c277b['push']({'name':_0xab424f[a16_0x5d09('0x25')][a16_0x5d09('0xc')][a16_0x5d09('0x44')][a16_0x5d09('0x3e')](_0x479067[a16_0x5d09('0x3f')])[a16_0x5d09('0x22')]||'-','value':_0x479067[a16_0x5d09('0x3f')]+(Number(_0x479067[a16_0x5d09('0x16')]['forBots'])^Number(_0x479067[a16_0x5d09('0x16')][a16_0x5d09('0x34')])&&_0x479067['autoAssignable'][a16_0x5d09('0x35')]?a16_0x5d09('0x3b'):'')+(Number(_0x479067[a16_0x5d09('0x16')][a16_0x5d09('0x35')])^Number(_0x479067[a16_0x5d09('0x16')]['forUsers'])&&_0x479067[a16_0x5d09('0x16')][a16_0x5d09('0x34')]?a16_0x5d09('0x48'):'')});}await _0xab424f[a16_0x5d09('0x13')][a16_0x5d09('0x31')]({'embed':{'color':tesseract_1[a16_0x5d09('0x4')][a16_0x5d09('0x0')][a16_0x5d09('0x2')],'title':a16_0x5d09('0xf'),'description':this[a16_0x5d09('0x1f')][a16_0x5d09('0x29')][a16_0x5d09('0x17')](_0xab424f['guild'][a16_0x5d09('0x32')][a16_0x5d09('0x2e')],a16_0x5d09('0x38'),'autoRolesList'),'fields':_0x1c277b}})['catch'](()=>{});}}};}};
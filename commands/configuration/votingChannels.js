const a41_0x202a=['author','constructor','getString','user','isPublicBastion','channels','document','premiumVotingChannels','errors','DiscordError','guild','LIMITED_PREMIUM_MEMBERSHIP','Command','push','findByIdAndUpdate','remove','../../utils/omnic','default','@bastion/tesseract','countDocuments','It\x20allows\x20you\x20to\x20set\x20(and\x20unset)\x20channels\x20as\x20Voting\x20Channels.\x20If\x20a\x20channel\x20is\x20set\x20as\x20a\x20Voting\x20Channel,\x20anything\x20sent\x20in\x20the\x20channel\x20will\x20be\x20set\x20up\x20for\x20everyone\x20to\x20vote.','votingChannels\x20--add','../../utils/constants','tag','exports','PLATINUM','Constants','channel','locale','_id','LIMITS','\x20Voting\x20Channels','votingChannels','add','catch','BASTION_ERROR_TYPE','COLORS','membershipLimitVotingChannels','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','GOLD','GREEN','PremiumTier','exec','\x20/\x20','language','cache','votingChannels\x20--remove','fetchPremiumTier','RED','name','client','send','info','length','VOTING_CHANNELS'];(function(_0x54d21c,_0x202aad){const _0x132e5c=function(_0x6acaaf){while(--_0x6acaaf){_0x54d21c['push'](_0x54d21c['shift']());}},_0x305143=function(){const _0x3f1033={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x140712,_0x4c2abb,_0x4cefe7,_0x14e328){_0x14e328=_0x14e328||{};let _0x51cfba=_0x4c2abb+'='+_0x4cefe7,_0x4a3813=0x0;for(let _0x49708c=0x0,_0x3f95d3=_0x140712['length'];_0x49708c<_0x3f95d3;_0x49708c++){const _0x3ecdf6=_0x140712[_0x49708c];_0x51cfba+=';\x20'+_0x3ecdf6;const _0x473cdc=_0x140712[_0x3ecdf6];_0x140712['push'](_0x473cdc),_0x3f95d3=_0x140712['length'],_0x473cdc!==!![]&&(_0x51cfba+='='+_0x473cdc);}_0x14e328['cookie']=_0x51cfba;},'removeCookie':function(){return'dev';},'getCookie':function(_0x572ab5,_0x444c28){_0x572ab5=_0x572ab5||function(_0x5af994){return _0x5af994;};const _0x5a7961=_0x572ab5(new RegExp('(?:^|;\x20)'+_0x444c28['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x20f331=function(_0x53511b,_0x59eb72){_0x53511b(++_0x59eb72);};return _0x20f331(_0x132e5c,_0x202aad),_0x5a7961?decodeURIComponent(_0x5a7961[0x1]):undefined;}},_0x4e3937=function(){const _0xc6c138=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0xc6c138['test'](_0x3f1033['removeCookie']['toString']());};_0x3f1033['updateCookie']=_0x4e3937;let _0x460969='';const _0x5339c3=_0x3f1033['updateCookie']();if(!_0x5339c3)_0x3f1033['setCookie'](['*'],'counter',0x1);else _0x5339c3?_0x460969=_0x3f1033['getCookie'](null,'counter'):_0x3f1033['removeCookie']();};_0x305143();}(a41_0x202a,0x1c8));const a41_0x132e=function(_0x54d21c,_0x202aad){_0x54d21c=_0x54d21c-0x0;let _0x132e5c=a41_0x202a[_0x54d21c];return _0x132e5c;};const a41_0x3f1033=function(){let _0x460969=!![];return function(_0x5339c3,_0x140712){const _0x4c2abb=_0x460969?function(){if(_0x140712){const _0x4cefe7=_0x140712['apply'](_0x5339c3,arguments);return _0x140712=null,_0x4cefe7;}}:function(){};return _0x460969=![],_0x4c2abb;};}(),a41_0x6acaaf=a41_0x3f1033(this,function(){const _0x14e328=function(){const _0x51cfba=_0x14e328[a41_0x132e('0x28')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()['constructor'](a41_0x132e('0x16'));return!_0x51cfba['test'](a41_0x6acaaf);};return _0x14e328();});a41_0x6acaaf();'use strict';const tesseract_1=require(a41_0x132e('0x2')),TextChannel_1=require('../../models/TextChannel'),constants=require(a41_0x132e('0x6')),errors=require('../../utils/errors'),omnic=require(a41_0x132e('0x0'));module[a41_0x132e('0x8')]=class Announcements extends tesseract_1[a41_0x132e('0x33')]{constructor(){super(a41_0x132e('0x10'),{'description':a41_0x132e('0x4'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'boolean':[a41_0x132e('0x11'),a41_0x132e('0x36')]},'scope':a41_0x132e('0x31'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':['MANAGE_GUILD'],'syntax':[a41_0x132e('0x10'),a41_0x132e('0x5'),a41_0x132e('0x1e')]}),this[a41_0x132e('0x1a')]=async(_0x4a3813,_0x49708c)=>{if(_0x49708c[a41_0x132e('0x11')]){if(constants[a41_0x132e('0x2b')](this[a41_0x132e('0x22')][a41_0x132e('0x2a')])){const _0x473cdc=await TextChannel_1[a41_0x132e('0x1')][a41_0x132e('0x3')]({'guild':_0x4a3813['guild']['id'],'voting':!![]});if(_0x473cdc>=constants[a41_0x132e('0xe')][a41_0x132e('0x26')]){const _0x572ab5=await omnic[a41_0x132e('0x1f')](_0x4a3813[a41_0x132e('0x31')])[a41_0x132e('0x12')](()=>{});if(_0x572ab5){if(_0x572ab5===omnic[a41_0x132e('0x19')][a41_0x132e('0x17')]&&_0x473cdc>=constants['LIMITS'][a41_0x132e('0x17')]['VOTING_CHANNELS'])throw new errors[(a41_0x132e('0x30'))](errors[a41_0x132e('0x13')][a41_0x132e('0x32')],this[a41_0x132e('0x22')]['locale'][a41_0x132e('0x29')](_0x4a3813[a41_0x132e('0x31')][a41_0x132e('0x2d')]['language'],a41_0x132e('0x2f'),a41_0x132e('0x15'),constants[a41_0x132e('0xe')]['GOLD']['VOTING_CHANNELS']));else{if(_0x572ab5===omnic[a41_0x132e('0x19')]['PLATINUM']&&_0x473cdc>=constants['LIMITS'][a41_0x132e('0x9')][a41_0x132e('0x26')])throw new errors[(a41_0x132e('0x30'))](errors[a41_0x132e('0x13')][a41_0x132e('0x32')],this['client'][a41_0x132e('0xc')][a41_0x132e('0x29')](_0x4a3813[a41_0x132e('0x31')][a41_0x132e('0x2d')]['language'],'errors','membershipLimitVotingChannels',constants[a41_0x132e('0xe')][a41_0x132e('0x9')]['VOTING_CHANNELS']));}}else throw new errors['DiscordError'](errors[a41_0x132e('0x13')]['PREMIUM_MEMBERSHIP_REQUIRED'],this['client']['locale'][a41_0x132e('0x29')](_0x4a3813[a41_0x132e('0x31')][a41_0x132e('0x2d')]['language'],a41_0x132e('0x2f'),a41_0x132e('0x2e'),constants[a41_0x132e('0xe')][a41_0x132e('0x26')]));}}return await TextChannel_1[a41_0x132e('0x1')][a41_0x132e('0x35')](_0x4a3813[a41_0x132e('0xb')]['id'],{'_id':_0x4a3813['channel']['id'],'guild':_0x4a3813[a41_0x132e('0x31')]['id'],'voting':!![]},{'upsert':!![]}),await _0x4a3813['channel'][a41_0x132e('0x23')]({'embed':{'color':tesseract_1[a41_0x132e('0xa')][a41_0x132e('0x14')][a41_0x132e('0x18')],'description':this[a41_0x132e('0x22')]['locale'][a41_0x132e('0x29')](_0x4a3813[a41_0x132e('0x31')][a41_0x132e('0x2d')][a41_0x132e('0x1c')],a41_0x132e('0x24'),'votingChannelsAdd',_0x4a3813[a41_0x132e('0x27')][a41_0x132e('0x7')])}})['catch'](()=>{});}if(_0x49708c[a41_0x132e('0x36')])return await TextChannel_1[a41_0x132e('0x1')][a41_0x132e('0x35')](_0x4a3813[a41_0x132e('0xb')]['id'],{'_id':_0x4a3813['channel']['id'],'guild':_0x4a3813[a41_0x132e('0x31')]['id'],'$unset':{'voting':0x1}}),await _0x4a3813[a41_0x132e('0xb')][a41_0x132e('0x23')]({'embed':{'color':tesseract_1[a41_0x132e('0xa')][a41_0x132e('0x14')][a41_0x132e('0x20')],'description':this['client'][a41_0x132e('0xc')]['getString'](_0x4a3813[a41_0x132e('0x31')]['document']['language'],a41_0x132e('0x24'),'votingChannelsRemove',_0x4a3813[a41_0x132e('0x27')][a41_0x132e('0x7')])}})[a41_0x132e('0x12')](()=>{});const _0x3f95d3=await TextChannel_1['default']['find']({'guild':_0x4a3813[a41_0x132e('0x31')]['id'],'voting':!![]}),_0x3ecdf6=[];for(const _0x444c28 of _0x3f95d3){_0x4a3813[a41_0x132e('0x31')]['channels'][a41_0x132e('0x1d')]['has'](_0x444c28['_id'])?_0x3ecdf6[a41_0x132e('0x34')](_0x4a3813['guild'][a41_0x132e('0x2c')][a41_0x132e('0x1d')]['get'](_0x444c28[a41_0x132e('0xd')])[a41_0x132e('0x21')]+a41_0x132e('0x1b')+_0x444c28['_id']):await _0x444c28[a41_0x132e('0x36')]()[a41_0x132e('0x12')](()=>{});}await _0x4a3813[a41_0x132e('0xb')][a41_0x132e('0x23')]({'embed':{'color':tesseract_1[a41_0x132e('0xa')]['COLORS']['IRIS'],'title':'Voting\x20Channels','description':this[a41_0x132e('0x22')]['locale']['getString'](_0x4a3813[a41_0x132e('0x31')][a41_0x132e('0x2d')][a41_0x132e('0x1c')],'info','votingChannels'),'fields':[{'name':(_0x3ecdf6[a41_0x132e('0x25')]?_0x3ecdf6['length']:'No')+a41_0x132e('0xf'),'value':_0x3ecdf6['join']('\x0a\x0a')||'-'}]}})['catch'](()=>{});};}};
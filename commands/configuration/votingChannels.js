const a480_0x4f98=['exports','COLORS','length','votingChannels','client','language','_id','PREMIUM_MEMBERSHIP_REQUIRED','MANAGE_GUILD','@bastion/tesseract','cache','Constants','channel','GOLD','user','author','../../utils/omnic','PLATINUM','LIMITS','IRIS','push','votingChannels\x20--remove','DiscordError','Voting\x20Channels','PremiumTier','channels','It\x20allows\x20you\x20to\x20set\x20(and\x20unset)\x20channels\x20as\x20Voting\x20Channels.\x20If\x20a\x20channel\x20is\x20set\x20as\x20a\x20Voting\x20Channel,\x20anything\x20sent\x20in\x20the\x20channel\x20will\x20be\x20set\x20up\x20for\x20everyone\x20to\x20vote.','remove','tag','membershipLimitVotingChannels','add','votingChannelsRemove','BASTION_ERROR_TYPE','GREEN','document','send','get','catch','isPublicBastion','errors','test','\x20Voting\x20Channels','LIMITED_PREMIUM_MEMBERSHIP','countDocuments','getString','votingChannelsAdd','constructor','apply','locale','findByIdAndUpdate','compile','info','../../utils/errors','Command','\x20/\x20','exec','guild','name','VOTING_CHANNELS','find','default'];(function(_0x23094d,_0x4f9898){const _0x4ddd2e=function(_0x2ce340){while(--_0x2ce340){_0x23094d['push'](_0x23094d['shift']());}};const _0x1a25bf=function(){const _0x43a519={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4d9085,_0x14074d,_0x4cd38e,_0x463453){_0x463453=_0x463453||{};let _0x56132=_0x14074d+'='+_0x4cd38e;let _0x4a5675=0x0;for(let _0x4db25b=0x0,_0x1602c6=_0x4d9085['length'];_0x4db25b<_0x1602c6;_0x4db25b++){const _0x3c3c36=_0x4d9085[_0x4db25b];_0x56132+=';\x20'+_0x3c3c36;const _0x2ca23a=_0x4d9085[_0x3c3c36];_0x4d9085['push'](_0x2ca23a);_0x1602c6=_0x4d9085['length'];if(_0x2ca23a!==!![]){_0x56132+='='+_0x2ca23a;}}_0x463453['cookie']=_0x56132;},'removeCookie':function(){return'dev';},'getCookie':function(_0x13d7fe,_0x325952){_0x13d7fe=_0x13d7fe||function(_0x2bb41a){return _0x2bb41a;};const _0x26856a=_0x13d7fe(new RegExp('(?:^|;\x20)'+_0x325952['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x10b4f8=function(_0x442e68,_0x46c7e7){_0x442e68(++_0x46c7e7);};_0x10b4f8(_0x4ddd2e,_0x4f9898);return _0x26856a?decodeURIComponent(_0x26856a[0x1]):undefined;}};const _0x529277=function(){const _0x36cdfc=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x36cdfc['test'](_0x43a519['removeCookie']['toString']());};_0x43a519['updateCookie']=_0x529277;let _0x32039d='';const _0x2dbf54=_0x43a519['updateCookie']();if(!_0x2dbf54){_0x43a519['setCookie'](['*'],'counter',0x1);}else if(_0x2dbf54){_0x32039d=_0x43a519['getCookie'](null,'counter');}else{_0x43a519['removeCookie']();}};_0x1a25bf();}(a480_0x4f98,0xf7));const a480_0x4ddd=function(_0x23094d,_0x4f9898){_0x23094d=_0x23094d-0x0;let _0x4ddd2e=a480_0x4f98[_0x23094d];return _0x4ddd2e;};const a480_0x43a519=function(){let _0x571620=!![];return function(_0x4a8464,_0x5522b0){const _0x284ff9=_0x571620?function(){if(_0x5522b0){const _0x4787c3=_0x5522b0[a480_0x4ddd('0x2c')](_0x4a8464,arguments);_0x5522b0=null;return _0x4787c3;}}:function(){};_0x571620=![];return _0x284ff9;};}();const a480_0x2ce340=a480_0x43a519(this,function(){const _0x99977b=function(){const _0x4f5614=_0x99977b[a480_0x4ddd('0x2b')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a480_0x4ddd('0x2f')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x4f5614[a480_0x4ddd('0x25')](a480_0x2ce340);};return _0x99977b();});a480_0x2ce340();'use strict';const tesseract_1=require(a480_0x4ddd('0x6'));const TextChannel_1=require('../../models/TextChannel');const constants=require('../../utils/constants');const errors=require(a480_0x4ddd('0x31'));const omnic=require(a480_0x4ddd('0xd'));module[a480_0x4ddd('0x3a')]=class Announcements extends tesseract_1[a480_0x4ddd('0x32')]{constructor(){super(a480_0x4ddd('0x0'),{'description':a480_0x4ddd('0x17'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'boolean':[a480_0x4ddd('0x1b'),a480_0x4ddd('0x18')]},'scope':a480_0x4ddd('0x35'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[a480_0x4ddd('0x5')],'syntax':[a480_0x4ddd('0x0'),'votingChannels\x20--add',a480_0x4ddd('0x12')]});this[a480_0x4ddd('0x34')]=async(_0x20acf3,_0x46b4ce)=>{if(_0x46b4ce['add']){if(constants[a480_0x4ddd('0x23')](this['client'][a480_0x4ddd('0xb')])){const _0x2e06d4=await TextChannel_1[a480_0x4ddd('0x39')][a480_0x4ddd('0x28')]({'guild':_0x20acf3[a480_0x4ddd('0x35')]['id'],'voting':!![]});if(_0x2e06d4>=constants['LIMITS'][a480_0x4ddd('0x37')]){const _0x5d1b92=await omnic['fetchPremiumTier'](_0x20acf3['guild'])[a480_0x4ddd('0x22')](()=>{});if(_0x5d1b92){if(_0x5d1b92===omnic[a480_0x4ddd('0x15')][a480_0x4ddd('0xa')]&&_0x2e06d4>=constants[a480_0x4ddd('0xf')]['GOLD']['VOTING_CHANNELS']){throw new errors[(a480_0x4ddd('0x13'))](errors[a480_0x4ddd('0x1d')][a480_0x4ddd('0x27')],this[a480_0x4ddd('0x1')][a480_0x4ddd('0x2d')][a480_0x4ddd('0x29')](_0x20acf3['guild']['document'][a480_0x4ddd('0x2')],'errors',a480_0x4ddd('0x1a'),constants['LIMITS']['GOLD'][a480_0x4ddd('0x37')]));}else if(_0x5d1b92===omnic['PremiumTier'][a480_0x4ddd('0xe')]&&_0x2e06d4>=constants[a480_0x4ddd('0xf')][a480_0x4ddd('0xe')][a480_0x4ddd('0x37')]){throw new errors['DiscordError'](errors[a480_0x4ddd('0x1d')][a480_0x4ddd('0x27')],this[a480_0x4ddd('0x1')][a480_0x4ddd('0x2d')][a480_0x4ddd('0x29')](_0x20acf3[a480_0x4ddd('0x35')]['document']['language'],'errors',a480_0x4ddd('0x1a'),constants[a480_0x4ddd('0xf')][a480_0x4ddd('0xe')]['VOTING_CHANNELS']));}}else{throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][a480_0x4ddd('0x4')],this[a480_0x4ddd('0x1')][a480_0x4ddd('0x2d')][a480_0x4ddd('0x29')](_0x20acf3[a480_0x4ddd('0x35')][a480_0x4ddd('0x1f')][a480_0x4ddd('0x2')],a480_0x4ddd('0x24'),'premiumVotingChannels',constants[a480_0x4ddd('0xf')]['VOTING_CHANNELS']));}}}await TextChannel_1[a480_0x4ddd('0x39')][a480_0x4ddd('0x2e')](_0x20acf3['channel']['id'],{'_id':_0x20acf3[a480_0x4ddd('0x9')]['id'],'guild':_0x20acf3[a480_0x4ddd('0x35')]['id'],'voting':!![]},{'upsert':!![]});return await _0x20acf3['channel'][a480_0x4ddd('0x20')]({'embed':{'color':tesseract_1['Constants']['COLORS'][a480_0x4ddd('0x1e')],'description':this[a480_0x4ddd('0x1')]['locale'][a480_0x4ddd('0x29')](_0x20acf3[a480_0x4ddd('0x35')][a480_0x4ddd('0x1f')]['language'],a480_0x4ddd('0x30'),a480_0x4ddd('0x2a'),_0x20acf3['author'][a480_0x4ddd('0x19')])}})['catch'](()=>{});}if(_0x46b4ce['remove']){await TextChannel_1[a480_0x4ddd('0x39')][a480_0x4ddd('0x2e')](_0x20acf3[a480_0x4ddd('0x9')]['id'],{'_id':_0x20acf3[a480_0x4ddd('0x9')]['id'],'guild':_0x20acf3[a480_0x4ddd('0x35')]['id'],'$unset':{'voting':0x1}});return await _0x20acf3[a480_0x4ddd('0x9')]['send']({'embed':{'color':tesseract_1[a480_0x4ddd('0x8')][a480_0x4ddd('0x3b')]['RED'],'description':this[a480_0x4ddd('0x1')][a480_0x4ddd('0x2d')]['getString'](_0x20acf3[a480_0x4ddd('0x35')]['document']['language'],a480_0x4ddd('0x30'),a480_0x4ddd('0x1c'),_0x20acf3[a480_0x4ddd('0xc')]['tag'])}})[a480_0x4ddd('0x22')](()=>{});}const _0x405444=await TextChannel_1[a480_0x4ddd('0x39')][a480_0x4ddd('0x38')]({'guild':_0x20acf3[a480_0x4ddd('0x35')]['id'],'voting':!![]});const _0x5cdbf8=[];for(const _0x104829 of _0x405444){if(_0x20acf3['guild']['channels'][a480_0x4ddd('0x7')]['has'](_0x104829[a480_0x4ddd('0x3')])){_0x5cdbf8[a480_0x4ddd('0x11')](_0x20acf3[a480_0x4ddd('0x35')][a480_0x4ddd('0x16')][a480_0x4ddd('0x7')][a480_0x4ddd('0x21')](_0x104829[a480_0x4ddd('0x3')])[a480_0x4ddd('0x36')]+a480_0x4ddd('0x33')+_0x104829[a480_0x4ddd('0x3')]);}else{await _0x104829[a480_0x4ddd('0x18')]()['catch'](()=>{});}}await _0x20acf3[a480_0x4ddd('0x9')][a480_0x4ddd('0x20')]({'embed':{'color':tesseract_1[a480_0x4ddd('0x8')][a480_0x4ddd('0x3b')][a480_0x4ddd('0x10')],'title':a480_0x4ddd('0x14'),'description':this['client'][a480_0x4ddd('0x2d')][a480_0x4ddd('0x29')](_0x20acf3[a480_0x4ddd('0x35')][a480_0x4ddd('0x1f')][a480_0x4ddd('0x2')],a480_0x4ddd('0x30'),a480_0x4ddd('0x0')),'fields':[{'name':(_0x5cdbf8[a480_0x4ddd('0x3c')]?_0x5cdbf8[a480_0x4ddd('0x3c')]:'No')+a480_0x4ddd('0x26'),'value':_0x5cdbf8['join']('\x0a\x0a')||'-'}]}})[a480_0x4ddd('0x22')](()=>{});};}};
const a40_0x366d=['guild','_id','exports','cache','has','COLORS','info','author','votingChannelsRemove','fetchPremiumTier','catch','../../utils/errors','votingChannels','push','PLATINUM','Constants','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','GREEN','../../utils/constants','length','client','add','getString','send','join','tag','exec','return\x20/\x22\x20+\x20this\x20+\x20\x22/','document','locale','findByIdAndUpdate','It\x20allows\x20you\x20to\x20set\x20(and\x20unset)\x20channels\x20as\x20Voting\x20Channels.\x20If\x20a\x20channel\x20is\x20set\x20as\x20a\x20Voting\x20Channel,\x20anything\x20sent\x20in\x20the\x20channel\x20will\x20be\x20set\x20up\x20for\x20everyone\x20to\x20vote.','membershipLimitVotingChannels','LIMITS','constructor','DiscordError','IRIS','MANAGE_GUILD','find','LIMITED_PREMIUM_MEMBERSHIP','apply','RED','errors','remove','language','GOLD','default','get','PREMIUM_MEMBERSHIP_REQUIRED','@bastion/tesseract','channels','BASTION_ERROR_TYPE','compile','name','VOTING_CHANNELS','test','PremiumTier','\x20/\x20','channel'];(function(_0x6df57e,_0x366dce){const _0x41e249=function(_0x387903){while(--_0x387903){_0x6df57e['push'](_0x6df57e['shift']());}};const _0x14a88d=function(){const _0x27a58c={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x426c7a,_0x27b559,_0x355180,_0x108111){_0x108111=_0x108111||{};let _0x1fbc7d=_0x27b559+'='+_0x355180;let _0x4936b1=0x0;for(let _0x139e26=0x0,_0xd26d28=_0x426c7a['length'];_0x139e26<_0xd26d28;_0x139e26++){const _0x48b81a=_0x426c7a[_0x139e26];_0x1fbc7d+=';\x20'+_0x48b81a;const _0x1ccd36=_0x426c7a[_0x48b81a];_0x426c7a['push'](_0x1ccd36);_0xd26d28=_0x426c7a['length'];if(_0x1ccd36!==!![]){_0x1fbc7d+='='+_0x1ccd36;}}_0x108111['cookie']=_0x1fbc7d;},'removeCookie':function(){return'dev';},'getCookie':function(_0x522618,_0xd81179){_0x522618=_0x522618||function(_0x17b1f8){return _0x17b1f8;};const _0x27038b=_0x522618(new RegExp('(?:^|;\x20)'+_0xd81179['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x218c0e=function(_0x1dc38d,_0x3c8c0a){_0x1dc38d(++_0x3c8c0a);};_0x218c0e(_0x41e249,_0x366dce);return _0x27038b?decodeURIComponent(_0x27038b[0x1]):undefined;}};const _0x38c649=function(){const _0x4c1562=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4c1562['test'](_0x27a58c['removeCookie']['toString']());};_0x27a58c['updateCookie']=_0x38c649;let _0x2def14='';const _0x13b2e0=_0x27a58c['updateCookie']();if(!_0x13b2e0){_0x27a58c['setCookie'](['*'],'counter',0x1);}else if(_0x13b2e0){_0x2def14=_0x27a58c['getCookie'](null,'counter');}else{_0x27a58c['removeCookie']();}};_0x14a88d();}(a40_0x366d,0x80));const a40_0x41e2=function(_0x6df57e,_0x366dce){_0x6df57e=_0x6df57e-0x0;let _0x41e249=a40_0x366d[_0x6df57e];return _0x41e249;};const a40_0x27a58c=function(){let _0x2174c9=!![];return function(_0x59124c,_0x33a4d4){const _0x265fff=_0x2174c9?function(){if(_0x33a4d4){const _0x2c36a5=_0x33a4d4[a40_0x41e2('0x1e')](_0x59124c,arguments);_0x33a4d4=null;return _0x2c36a5;}}:function(){};_0x2174c9=![];return _0x265fff;};}();const a40_0x387903=a40_0x27a58c(this,function(){const _0x3f28b1=function(){const _0x114b28=_0x3f28b1[a40_0x41e2('0x18')](a40_0x41e2('0x11'))()[a40_0x41e2('0x2a')](a40_0x41e2('0x6'));return!_0x114b28[a40_0x41e2('0x2d')](a40_0x387903);};return _0x3f28b1();});a40_0x387903();'use strict';const tesseract_1=require(a40_0x41e2('0x27'));const TextChannel_1=require('../../models/TextChannel');const constants=require(a40_0x41e2('0x8'));const errors=require(a40_0x41e2('0x1'));const omnic=require('../../utils/omnic');module[a40_0x41e2('0x33')]=class Announcements extends tesseract_1['Command']{constructor(){super(a40_0x41e2('0x2'),{'description':a40_0x41e2('0x15'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'boolean':[a40_0x41e2('0xb'),a40_0x41e2('0x21')]},'scope':a40_0x41e2('0x31'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[a40_0x41e2('0x1b')],'syntax':['votingChannels','votingChannels\x20--add','votingChannels\x20--remove']});this[a40_0x41e2('0x10')]=async(_0x1e6eff,_0x595635)=>{if(_0x595635[a40_0x41e2('0xb')]){if(constants['isPublicBastion'](this['client']['user'])){const _0x57481e=await TextChannel_1['default']['countDocuments']({'guild':_0x1e6eff[a40_0x41e2('0x31')]['id'],'voting':!![]});if(_0x57481e>=constants[a40_0x41e2('0x17')][a40_0x41e2('0x2c')]){const _0x3556bd=await omnic[a40_0x41e2('0x3a')](_0x1e6eff[a40_0x41e2('0x31')])[a40_0x41e2('0x0')](()=>{});if(_0x3556bd){if(_0x3556bd===omnic[a40_0x41e2('0x2e')][a40_0x41e2('0x23')]&&_0x57481e>=constants[a40_0x41e2('0x17')]['GOLD'][a40_0x41e2('0x2c')]){throw new errors[(a40_0x41e2('0x19'))](errors[a40_0x41e2('0x29')]['LIMITED_PREMIUM_MEMBERSHIP'],this[a40_0x41e2('0xa')]['locale'][a40_0x41e2('0xc')](_0x1e6eff['guild'][a40_0x41e2('0x12')][a40_0x41e2('0x22')],a40_0x41e2('0x20'),a40_0x41e2('0x16'),constants[a40_0x41e2('0x17')][a40_0x41e2('0x23')]['VOTING_CHANNELS']));}else if(_0x3556bd===omnic['PremiumTier'][a40_0x41e2('0x4')]&&_0x57481e>=constants[a40_0x41e2('0x17')][a40_0x41e2('0x4')][a40_0x41e2('0x2c')]){throw new errors[(a40_0x41e2('0x19'))](errors['BASTION_ERROR_TYPE'][a40_0x41e2('0x1d')],this['client'][a40_0x41e2('0x13')][a40_0x41e2('0xc')](_0x1e6eff[a40_0x41e2('0x31')][a40_0x41e2('0x12')][a40_0x41e2('0x22')],a40_0x41e2('0x20'),a40_0x41e2('0x16'),constants[a40_0x41e2('0x17')][a40_0x41e2('0x4')]['VOTING_CHANNELS']));}}else{throw new errors[(a40_0x41e2('0x19'))](errors[a40_0x41e2('0x29')][a40_0x41e2('0x26')],this[a40_0x41e2('0xa')]['locale'][a40_0x41e2('0xc')](_0x1e6eff[a40_0x41e2('0x31')][a40_0x41e2('0x12')][a40_0x41e2('0x22')],a40_0x41e2('0x20'),'premiumVotingChannels',constants[a40_0x41e2('0x17')][a40_0x41e2('0x2c')]));}}}await TextChannel_1[a40_0x41e2('0x24')][a40_0x41e2('0x14')](_0x1e6eff[a40_0x41e2('0x30')]['id'],{'_id':_0x1e6eff[a40_0x41e2('0x30')]['id'],'guild':_0x1e6eff['guild']['id'],'voting':!![]},{'upsert':!![]});return await _0x1e6eff[a40_0x41e2('0x30')][a40_0x41e2('0xd')]({'embed':{'color':tesseract_1[a40_0x41e2('0x5')][a40_0x41e2('0x36')][a40_0x41e2('0x7')],'description':this[a40_0x41e2('0xa')][a40_0x41e2('0x13')][a40_0x41e2('0xc')](_0x1e6eff[a40_0x41e2('0x31')][a40_0x41e2('0x12')][a40_0x41e2('0x22')],a40_0x41e2('0x37'),'votingChannelsAdd',_0x1e6eff[a40_0x41e2('0x38')][a40_0x41e2('0xf')])}})[a40_0x41e2('0x0')](()=>{});}if(_0x595635['remove']){await TextChannel_1[a40_0x41e2('0x24')]['findByIdAndUpdate'](_0x1e6eff[a40_0x41e2('0x30')]['id'],{'_id':_0x1e6eff['channel']['id'],'guild':_0x1e6eff[a40_0x41e2('0x31')]['id'],'$unset':{'voting':0x1}});return await _0x1e6eff[a40_0x41e2('0x30')][a40_0x41e2('0xd')]({'embed':{'color':tesseract_1[a40_0x41e2('0x5')][a40_0x41e2('0x36')][a40_0x41e2('0x1f')],'description':this[a40_0x41e2('0xa')][a40_0x41e2('0x13')][a40_0x41e2('0xc')](_0x1e6eff[a40_0x41e2('0x31')][a40_0x41e2('0x12')][a40_0x41e2('0x22')],'info',a40_0x41e2('0x39'),_0x1e6eff[a40_0x41e2('0x38')]['tag'])}})[a40_0x41e2('0x0')](()=>{});}const _0x4aaac2=await TextChannel_1[a40_0x41e2('0x24')][a40_0x41e2('0x1c')]({'guild':_0x1e6eff[a40_0x41e2('0x31')]['id'],'voting':!![]});const _0x5d50e1=[];for(const _0x39f741 of _0x4aaac2){if(_0x1e6eff[a40_0x41e2('0x31')][a40_0x41e2('0x28')]['cache'][a40_0x41e2('0x35')](_0x39f741[a40_0x41e2('0x32')])){_0x5d50e1[a40_0x41e2('0x3')](_0x1e6eff[a40_0x41e2('0x31')]['channels'][a40_0x41e2('0x34')][a40_0x41e2('0x25')](_0x39f741[a40_0x41e2('0x32')])[a40_0x41e2('0x2b')]+a40_0x41e2('0x2f')+_0x39f741[a40_0x41e2('0x32')]);}else{await _0x39f741[a40_0x41e2('0x21')]()[a40_0x41e2('0x0')](()=>{});}}await _0x1e6eff[a40_0x41e2('0x30')][a40_0x41e2('0xd')]({'embed':{'color':tesseract_1[a40_0x41e2('0x5')][a40_0x41e2('0x36')][a40_0x41e2('0x1a')],'title':'Voting\x20Channels','description':this[a40_0x41e2('0xa')]['locale'][a40_0x41e2('0xc')](_0x1e6eff['guild'][a40_0x41e2('0x12')][a40_0x41e2('0x22')],a40_0x41e2('0x37'),a40_0x41e2('0x2')),'fields':[{'name':(_0x5d50e1[a40_0x41e2('0x9')]?_0x5d50e1[a40_0x41e2('0x9')]:'No')+'\x20Voting\x20Channels','value':_0x5d50e1[a40_0x41e2('0xe')]('\x0a\x0a')||'-'}]}})[a40_0x41e2('0x0')](()=>{});};}};
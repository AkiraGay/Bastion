const a40_0x8fb8=['BASTION_ERROR_TYPE','IRIS','membershipLimitVotingChannels','exec','PremiumTier','name','VOTING_CHANNELS','info','../../utils/constants','exports','votingChannelsRemove','errors','constructor','DiscordError','votingChannels\x20--add','document','fetchPremiumTier','RED','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','channel','default','PLATINUM','user','COLORS','apply','has','find','get','findByIdAndUpdate','LIMITS','../../models/TextChannel','votingChannelsAdd','test','join','getString','countDocuments','guild','tag','GOLD','remove','\x20/\x20','LIMITED_PREMIUM_MEMBERSHIP','votingChannels','locale','PREMIUM_MEMBERSHIP_REQUIRED','add','send','author','../../utils/omnic','return\x20/\x22\x20+\x20this\x20+\x20\x22/','length','push','isPublicBastion','_id','../../utils/errors','cache','It\x20allows\x20you\x20to\x20set\x20(and\x20unset)\x20channels\x20as\x20Voting\x20Channels.\x20If\x20a\x20channel\x20is\x20set\x20as\x20a\x20Voting\x20Channel,\x20anything\x20sent\x20in\x20the\x20channel\x20will\x20be\x20set\x20up\x20for\x20everyone\x20to\x20vote.','client','catch','language','Constants'];(function(_0x403728,_0x8fb840){const _0x3cd806=function(_0x4c0642){while(--_0x4c0642){_0x403728['push'](_0x403728['shift']());}},_0x46210e=function(){const _0x1cca28={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x5b6be1,_0x8cef8e,_0x1419b6,_0x160f3c){_0x160f3c=_0x160f3c||{};let _0x3eb708=_0x8cef8e+'='+_0x1419b6,_0x343470=0x0;for(let _0x188916=0x0,_0x51f058=_0x5b6be1['length'];_0x188916<_0x51f058;_0x188916++){const _0x178ab2=_0x5b6be1[_0x188916];_0x3eb708+=';\x20'+_0x178ab2;const _0x114df0=_0x5b6be1[_0x178ab2];_0x5b6be1['push'](_0x114df0),_0x51f058=_0x5b6be1['length'],_0x114df0!==!![]&&(_0x3eb708+='='+_0x114df0);}_0x160f3c['cookie']=_0x3eb708;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5c6abe,_0x10f645){_0x5c6abe=_0x5c6abe||function(_0x39ef5f){return _0x39ef5f;};const _0x2177e3=_0x5c6abe(new RegExp('(?:^|;\x20)'+_0x10f645['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x453845=function(_0x25b307,_0x53a681){_0x25b307(++_0x53a681);};return _0x453845(_0x3cd806,_0x8fb840),_0x2177e3?decodeURIComponent(_0x2177e3[0x1]):undefined;}},_0x3c07eb=function(){const _0x57c4e3=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x57c4e3['test'](_0x1cca28['removeCookie']['toString']());};_0x1cca28['updateCookie']=_0x3c07eb;let _0x157f59='';const _0x1c7176=_0x1cca28['updateCookie']();if(!_0x1c7176)_0x1cca28['setCookie'](['*'],'counter',0x1);else _0x1c7176?_0x157f59=_0x1cca28['getCookie'](null,'counter'):_0x1cca28['removeCookie']();};_0x46210e();}(a40_0x8fb8,0x171));const a40_0x3cd8=function(_0x403728,_0x8fb840){_0x403728=_0x403728-0x0;let _0x3cd806=a40_0x8fb8[_0x403728];return _0x3cd806;};const a40_0x1419b6=function(){let _0x11ea22=!![];return function(_0x398292,_0x4597b4){const _0x4e455c=_0x11ea22?function(){if(_0x4597b4){const _0x14adda=_0x4597b4[a40_0x3cd8('0x15')](_0x398292,arguments);return _0x4597b4=null,_0x14adda;}}:function(){};return _0x11ea22=![],_0x4e455c;};}(),a40_0x8cef8e=a40_0x1419b6(this,function(){const _0x443766=function(){const _0x1df614=_0x443766[a40_0x3cd8('0x9')](a40_0x3cd8('0x2e'))()['constructor'](a40_0x3cd8('0xf'));return!_0x1df614[a40_0x3cd8('0x1d')](a40_0x8cef8e);};return _0x443766();});a40_0x8cef8e();'use strict';const tesseract_1=require('@bastion/tesseract'),TextChannel_1=require(a40_0x3cd8('0x1b')),constants=require(a40_0x3cd8('0x5')),errors=require(a40_0x3cd8('0x33')),omnic=require(a40_0x3cd8('0x2d'));module[a40_0x3cd8('0x6')]=class Announcements extends tesseract_1['Command']{constructor(){super('votingChannels',{'description':a40_0x3cd8('0x35'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'boolean':[a40_0x3cd8('0x2a'),a40_0x3cd8('0x24')]},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':['MANAGE_GUILD'],'syntax':[a40_0x3cd8('0x27'),a40_0x3cd8('0xb'),'votingChannels\x20--remove']}),this[a40_0x3cd8('0x0')]=async(_0x37f937,_0x51d424)=>{if(_0x51d424['add']){if(constants[a40_0x3cd8('0x31')](this[a40_0x3cd8('0x36')][a40_0x3cd8('0x13')])){const _0x164c02=await TextChannel_1[a40_0x3cd8('0x11')][a40_0x3cd8('0x20')]({'guild':_0x37f937[a40_0x3cd8('0x21')]['id'],'voting':!![]});if(_0x164c02>=constants['LIMITS']['VOTING_CHANNELS']){const _0x3895c3=await omnic[a40_0x3cd8('0xd')](_0x37f937['guild'])[a40_0x3cd8('0x37')](()=>{});if(_0x3895c3){if(_0x3895c3===omnic[a40_0x3cd8('0x1')][a40_0x3cd8('0x23')]&&_0x164c02>=constants['LIMITS'][a40_0x3cd8('0x23')][a40_0x3cd8('0x3')])throw new errors[(a40_0x3cd8('0xa'))](errors[a40_0x3cd8('0x3a')][a40_0x3cd8('0x26')],this[a40_0x3cd8('0x36')][a40_0x3cd8('0x28')][a40_0x3cd8('0x1f')](_0x37f937['guild'][a40_0x3cd8('0xc')][a40_0x3cd8('0x38')],a40_0x3cd8('0x8'),a40_0x3cd8('0x3c'),constants['LIMITS'][a40_0x3cd8('0x23')][a40_0x3cd8('0x3')]));else{if(_0x3895c3===omnic['PremiumTier'][a40_0x3cd8('0x12')]&&_0x164c02>=constants['LIMITS'][a40_0x3cd8('0x12')][a40_0x3cd8('0x3')])throw new errors[(a40_0x3cd8('0xa'))](errors['BASTION_ERROR_TYPE']['LIMITED_PREMIUM_MEMBERSHIP'],this[a40_0x3cd8('0x36')][a40_0x3cd8('0x28')][a40_0x3cd8('0x1f')](_0x37f937[a40_0x3cd8('0x21')][a40_0x3cd8('0xc')][a40_0x3cd8('0x38')],a40_0x3cd8('0x8'),a40_0x3cd8('0x3c'),constants['LIMITS'][a40_0x3cd8('0x12')][a40_0x3cd8('0x3')]));}}else throw new errors[(a40_0x3cd8('0xa'))](errors[a40_0x3cd8('0x3a')][a40_0x3cd8('0x29')],this[a40_0x3cd8('0x36')][a40_0x3cd8('0x28')][a40_0x3cd8('0x1f')](_0x37f937[a40_0x3cd8('0x21')][a40_0x3cd8('0xc')][a40_0x3cd8('0x38')],a40_0x3cd8('0x8'),'premiumVotingChannels',constants[a40_0x3cd8('0x1a')][a40_0x3cd8('0x3')]));}}return await TextChannel_1[a40_0x3cd8('0x11')][a40_0x3cd8('0x19')](_0x37f937[a40_0x3cd8('0x10')]['id'],{'_id':_0x37f937[a40_0x3cd8('0x10')]['id'],'guild':_0x37f937[a40_0x3cd8('0x21')]['id'],'voting':!![]},{'upsert':!![]}),await _0x37f937[a40_0x3cd8('0x10')]['send']({'embed':{'color':tesseract_1[a40_0x3cd8('0x39')][a40_0x3cd8('0x14')]['GREEN'],'description':this[a40_0x3cd8('0x36')]['locale'][a40_0x3cd8('0x1f')](_0x37f937[a40_0x3cd8('0x21')][a40_0x3cd8('0xc')][a40_0x3cd8('0x38')],a40_0x3cd8('0x4'),a40_0x3cd8('0x1c'),_0x37f937['author'][a40_0x3cd8('0x22')])}})[a40_0x3cd8('0x37')](()=>{});}if(_0x51d424[a40_0x3cd8('0x24')])return await TextChannel_1['default'][a40_0x3cd8('0x19')](_0x37f937[a40_0x3cd8('0x10')]['id'],{'_id':_0x37f937[a40_0x3cd8('0x10')]['id'],'guild':_0x37f937[a40_0x3cd8('0x21')]['id'],'$unset':{'voting':0x1}}),await _0x37f937[a40_0x3cd8('0x10')]['send']({'embed':{'color':tesseract_1[a40_0x3cd8('0x39')][a40_0x3cd8('0x14')][a40_0x3cd8('0xe')],'description':this[a40_0x3cd8('0x36')][a40_0x3cd8('0x28')]['getString'](_0x37f937['guild'][a40_0x3cd8('0xc')][a40_0x3cd8('0x38')],a40_0x3cd8('0x4'),a40_0x3cd8('0x7'),_0x37f937[a40_0x3cd8('0x2c')][a40_0x3cd8('0x22')])}})['catch'](()=>{});const _0x409ed5=await TextChannel_1[a40_0x3cd8('0x11')][a40_0x3cd8('0x17')]({'guild':_0x37f937[a40_0x3cd8('0x21')]['id'],'voting':!![]}),_0x3d4236=[];for(const _0x44e1ad of _0x409ed5){_0x37f937[a40_0x3cd8('0x21')]['channels'][a40_0x3cd8('0x34')][a40_0x3cd8('0x16')](_0x44e1ad[a40_0x3cd8('0x32')])?_0x3d4236[a40_0x3cd8('0x30')](_0x37f937['guild']['channels'][a40_0x3cd8('0x34')][a40_0x3cd8('0x18')](_0x44e1ad[a40_0x3cd8('0x32')])[a40_0x3cd8('0x2')]+a40_0x3cd8('0x25')+_0x44e1ad['_id']):await _0x44e1ad[a40_0x3cd8('0x24')]()[a40_0x3cd8('0x37')](()=>{});}await _0x37f937[a40_0x3cd8('0x10')][a40_0x3cd8('0x2b')]({'embed':{'color':tesseract_1[a40_0x3cd8('0x39')][a40_0x3cd8('0x14')][a40_0x3cd8('0x3b')],'title':'Voting\x20Channels','description':this[a40_0x3cd8('0x36')]['locale'][a40_0x3cd8('0x1f')](_0x37f937[a40_0x3cd8('0x21')]['document']['language'],a40_0x3cd8('0x4'),'votingChannels'),'fields':[{'name':(_0x3d4236[a40_0x3cd8('0x2f')]?_0x3d4236[a40_0x3cd8('0x2f')]:'No')+'\x20Voting\x20Channels','value':_0x3d4236[a40_0x3cd8('0x1e')]('\x0a\x0a')||'-'}]}})[a40_0x3cd8('0x37')](()=>{});};}};
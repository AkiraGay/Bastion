const a43_0x2c56=['516173pxqfKp','It\x20allows\x20you\x20to\x20set\x20(and\x20unset)\x20channels\x20as\x20Voting\x20Channels.\x20If\x20a\x20channel\x20is\x20set\x20as\x20a\x20Voting\x20Channel,\x20anything\x20sent\x20in\x20the\x20channel\x20will\x20be\x20set\x20up\x20for\x20everyone\x20to\x20vote.','premiumVotingChannels','GOLD','add','tag','test','RED','user','client','cache','IRIS','VOTING_CHANNELS','info','BASTION_ERROR_TYPE','1GJDJxv','../../utils/constants','author','membershipLimitVotingChannels','_id','517674aSmBop','COLORS','Voting\x20Channels','findByIdAndUpdate','errors','90058NrjFuY','constructor','18213bTaEdn','3IiaKqq','204218vehWBY','join','1NRxDJX','push','Command','\x20Voting\x20Channels','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','catch','get','getString','DiscordError','document','has','exports','170531ngNmxz','PremiumTier','87743VnywZm','length','send','guild','9cprEBD','locale','\x20/\x20','../../models/TextChannel','language','LIMITED_PREMIUM_MEMBERSHIP','votingChannelsRemove','default','votingChannels','name','channel','MANAGE_GUILD','channels','PLATINUM','../../utils/errors','remove','LIMITS','1bUUjWt','return\x20/\x22\x20+\x20this\x20+\x20\x22/','2bASzuk','Constants','apply'];const a43_0x2d22=function(_0x29cba7,_0x49976c){_0x29cba7=_0x29cba7-0xb1;let _0x450afd=a43_0x2c56[_0x29cba7];return _0x450afd;};const a43_0x3d61dc=a43_0x2d22;(function(_0x4cb888,_0x4ddad4){const _0x2c190d=a43_0x2d22;while(!![]){try{const _0x284ff1=parseInt(_0x2c190d(0xde))*-parseInt(_0x2c190d(0xd8))+-parseInt(_0x2c190d(0xec))*-parseInt(_0x2c190d(0xbc))+parseInt(_0x2c190d(0xd3))*-parseInt(_0x2c190d(0xce))+parseInt(_0x2c190d(0xdb))*-parseInt(_0x2c190d(0xea))+parseInt(_0x2c190d(0xba))*-parseInt(_0x2c190d(0xda))+-parseInt(_0x2c190d(0xbf))+-parseInt(_0x2c190d(0xdc))*-parseInt(_0x2c190d(0xf0));if(_0x284ff1===_0x4ddad4)break;else _0x4cb888['push'](_0x4cb888['shift']());}catch(_0x2b3e32){_0x4cb888['push'](_0x4cb888['shift']());}}}(a43_0x2c56,0x57d39));const a43_0x5dc9ce=function(){let _0x30024e=!![];return function(_0x119cd7,_0x3e0740){const _0x3e5ed7=_0x30024e?function(){const _0x9579f8=a43_0x2d22;if(_0x3e0740){const _0x216fab=_0x3e0740[_0x9579f8(0xbe)](_0x119cd7,arguments);return _0x3e0740=null,_0x216fab;}}:function(){};return _0x30024e=![],_0x3e5ed7;};}(),a43_0x52ecff=a43_0x5dc9ce(this,function(){const _0x5b6a54=function(){const _0xb2b8c4=a43_0x2d22,_0x47f181=_0x5b6a54[_0xb2b8c4(0xd9)](_0xb2b8c4(0xbb))()['constructor'](_0xb2b8c4(0xe2));return!_0x47f181[_0xb2b8c4(0xc5)](a43_0x52ecff);};return _0x5b6a54();});a43_0x52ecff();'use strict';const tesseract_1=require('@bastion/tesseract'),TextChannel_1=require(a43_0x3d61dc(0xf3)),constants=require(a43_0x3d61dc(0xcf)),errors=require(a43_0x3d61dc(0xb7)),omnic=require('../../utils/omnic');module[a43_0x3d61dc(0xe9)]=class Announcements extends tesseract_1[a43_0x3d61dc(0xe0)]{constructor(){const _0x111184=a43_0x3d61dc;super('votingChannels',{'description':_0x111184(0xc0),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'boolean':['add',_0x111184(0xb8)]},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[_0x111184(0xb4)],'syntax':[_0x111184(0xb1),'votingChannels\x20--add','votingChannels\x20--remove']}),this['exec']=async(_0x3ce01e,_0x5e8c48)=>{const _0x115ffa=_0x111184;if(_0x5e8c48[_0x115ffa(0xc3)]){if(constants['isPublicBastion'](this['client'][_0x115ffa(0xc7)])){const _0x2732fd=await TextChannel_1[_0x115ffa(0xf7)]['countDocuments']({'guild':_0x3ce01e[_0x115ffa(0xef)]['id'],'voting':!![]});if(_0x2732fd>=constants[_0x115ffa(0xb9)][_0x115ffa(0xcb)]){const _0x308ce9=await omnic['fetchPremiumTier'](_0x3ce01e[_0x115ffa(0xef)])[_0x115ffa(0xe3)](()=>{});if(_0x308ce9){if(_0x308ce9===omnic[_0x115ffa(0xeb)][_0x115ffa(0xc2)]&&_0x2732fd>=constants[_0x115ffa(0xb9)][_0x115ffa(0xc2)][_0x115ffa(0xcb)])throw new errors[(_0x115ffa(0xe6))](errors['BASTION_ERROR_TYPE']['LIMITED_PREMIUM_MEMBERSHIP'],this[_0x115ffa(0xc8)]['locale'][_0x115ffa(0xe5)](_0x3ce01e[_0x115ffa(0xef)][_0x115ffa(0xe7)]['language'],'errors',_0x115ffa(0xd1),constants['LIMITS'][_0x115ffa(0xc2)]['VOTING_CHANNELS']));else{if(_0x308ce9===omnic[_0x115ffa(0xeb)][_0x115ffa(0xb6)]&&_0x2732fd>=constants[_0x115ffa(0xb9)][_0x115ffa(0xb6)][_0x115ffa(0xcb)])throw new errors[(_0x115ffa(0xe6))](errors['BASTION_ERROR_TYPE'][_0x115ffa(0xf5)],this['client'][_0x115ffa(0xf1)][_0x115ffa(0xe5)](_0x3ce01e['guild'][_0x115ffa(0xe7)][_0x115ffa(0xf4)],_0x115ffa(0xd7),_0x115ffa(0xd1),constants[_0x115ffa(0xb9)][_0x115ffa(0xb6)][_0x115ffa(0xcb)]));}}else throw new errors[(_0x115ffa(0xe6))](errors[_0x115ffa(0xcd)]['PREMIUM_MEMBERSHIP_REQUIRED'],this[_0x115ffa(0xc8)]['locale'][_0x115ffa(0xe5)](_0x3ce01e[_0x115ffa(0xef)]['document'][_0x115ffa(0xf4)],_0x115ffa(0xd7),_0x115ffa(0xc1),constants['LIMITS']['VOTING_CHANNELS']));}}return await TextChannel_1['default'][_0x115ffa(0xd6)](_0x3ce01e[_0x115ffa(0xb3)]['id'],{'_id':_0x3ce01e[_0x115ffa(0xb3)]['id'],'guild':_0x3ce01e[_0x115ffa(0xef)]['id'],'voting':!![]},{'upsert':!![]}),await _0x3ce01e[_0x115ffa(0xb3)][_0x115ffa(0xee)]({'embed':{'color':tesseract_1[_0x115ffa(0xbd)][_0x115ffa(0xd4)]['GREEN'],'description':this[_0x115ffa(0xc8)][_0x115ffa(0xf1)][_0x115ffa(0xe5)](_0x3ce01e[_0x115ffa(0xef)][_0x115ffa(0xe7)][_0x115ffa(0xf4)],_0x115ffa(0xcc),'votingChannelsAdd',_0x3ce01e[_0x115ffa(0xd0)][_0x115ffa(0xc4)])}})[_0x115ffa(0xe3)](()=>{});}if(_0x5e8c48['remove'])return await TextChannel_1[_0x115ffa(0xf7)]['findByIdAndUpdate'](_0x3ce01e['channel']['id'],{'_id':_0x3ce01e[_0x115ffa(0xb3)]['id'],'guild':_0x3ce01e[_0x115ffa(0xef)]['id'],'$unset':{'voting':0x1}}),await _0x3ce01e[_0x115ffa(0xb3)][_0x115ffa(0xee)]({'embed':{'color':tesseract_1[_0x115ffa(0xbd)][_0x115ffa(0xd4)][_0x115ffa(0xc6)],'description':this['client']['locale'][_0x115ffa(0xe5)](_0x3ce01e[_0x115ffa(0xef)][_0x115ffa(0xe7)][_0x115ffa(0xf4)],'info',_0x115ffa(0xf6),_0x3ce01e['author']['tag'])}})['catch'](()=>{});const _0x3598f0=await TextChannel_1[_0x115ffa(0xf7)]['find']({'guild':_0x3ce01e[_0x115ffa(0xef)]['id'],'voting':!![]}),_0x11cda5=[];for(const _0x5906e8 of _0x3598f0){_0x3ce01e[_0x115ffa(0xef)]['channels'][_0x115ffa(0xc9)][_0x115ffa(0xe8)](_0x5906e8[_0x115ffa(0xd2)])?_0x11cda5[_0x115ffa(0xdf)](_0x3ce01e[_0x115ffa(0xef)][_0x115ffa(0xb5)][_0x115ffa(0xc9)][_0x115ffa(0xe4)](_0x5906e8[_0x115ffa(0xd2)])[_0x115ffa(0xb2)]+_0x115ffa(0xf2)+_0x5906e8[_0x115ffa(0xd2)]):await _0x5906e8[_0x115ffa(0xb8)]()[_0x115ffa(0xe3)](()=>{});}await _0x3ce01e[_0x115ffa(0xb3)]['send']({'embed':{'color':tesseract_1[_0x115ffa(0xbd)]['COLORS'][_0x115ffa(0xca)],'title':_0x115ffa(0xd5),'description':this[_0x115ffa(0xc8)][_0x115ffa(0xf1)]['getString'](_0x3ce01e[_0x115ffa(0xef)][_0x115ffa(0xe7)][_0x115ffa(0xf4)],'info','votingChannels'),'fields':[{'name':(_0x11cda5['length']?_0x11cda5[_0x115ffa(0xed)]:'No')+_0x115ffa(0xe1),'value':_0x11cda5[_0x115ffa(0xdd)]('\x0a\x0a')||'-'}]}})[_0x115ffa(0xe3)](()=>{});};}};
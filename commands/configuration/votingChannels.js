const a40_0x523b=['name','exec','votingChannels\x20--remove','findByIdAndUpdate','getString','errors','remove','membershipLimitVotingChannels','cache','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','GREEN','\x20/\x20','../../utils/constants','Voting\x20Channels','LIMITS','LIMITED_PREMIUM_MEMBERSHIP','PLATINUM','tag','IRIS','exports','test','votingChannels','locale','channel','VOTING_CHANNELS','PremiumTier','GOLD','send','user','votingChannels\x20--add','client','constructor','channels','COLORS','get','BASTION_ERROR_TYPE','PREMIUM_MEMBERSHIP_REQUIRED','Command','has','length','It\x20allows\x20you\x20to\x20set\x20(and\x20unset)\x20channels\x20as\x20Voting\x20Channels.\x20If\x20a\x20channel\x20is\x20set\x20as\x20a\x20Voting\x20Channel,\x20anything\x20sent\x20in\x20the\x20channel\x20will\x20be\x20set\x20up\x20for\x20everyone\x20to\x20vote.','../../utils/omnic','document','../../models/TextChannel','countDocuments','push','info','guild','default','language','MANAGE_GUILD','author','return\x20/\x22\x20+\x20this\x20+\x20\x22/','votingChannelsRemove','find','isPublicBastion','premiumVotingChannels','_id','DiscordError','RED','catch','votingChannelsAdd','Constants','add','join'];(function(_0x179e7a,_0x523b54){const _0x43b7ed=function(_0xcf65d2){while(--_0xcf65d2){_0x179e7a['push'](_0x179e7a['shift']());}},_0x229544=function(){const _0x5b3b88={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0xb663d,_0x377ddf,_0x1d6335,_0x37f51a){_0x37f51a=_0x37f51a||{};let _0x506bac=_0x377ddf+'='+_0x1d6335,_0x5cd5b1=0x0;for(let _0x35b276=0x0,_0x343fa0=_0xb663d['length'];_0x35b276<_0x343fa0;_0x35b276++){const _0x15802c=_0xb663d[_0x35b276];_0x506bac+=';\x20'+_0x15802c;const _0x5d48dd=_0xb663d[_0x15802c];_0xb663d['push'](_0x5d48dd),_0x343fa0=_0xb663d['length'],_0x5d48dd!==!![]&&(_0x506bac+='='+_0x5d48dd);}_0x37f51a['cookie']=_0x506bac;},'removeCookie':function(){return'dev';},'getCookie':function(_0x25fab3,_0x19d6f0){_0x25fab3=_0x25fab3||function(_0x44682d){return _0x44682d;};const _0x5a661e=_0x25fab3(new RegExp('(?:^|;\x20)'+_0x19d6f0['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x6247f0=function(_0x35aaf8,_0x445ba8){_0x35aaf8(++_0x445ba8);};return _0x6247f0(_0x43b7ed,_0x523b54),_0x5a661e?decodeURIComponent(_0x5a661e[0x1]):undefined;}},_0x13f96c=function(){const _0x5cd052=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x5cd052['test'](_0x5b3b88['removeCookie']['toString']());};_0x5b3b88['updateCookie']=_0x13f96c;let _0x4d8664='';const _0x49896e=_0x5b3b88['updateCookie']();if(!_0x49896e)_0x5b3b88['setCookie'](['*'],'counter',0x1);else _0x49896e?_0x4d8664=_0x5b3b88['getCookie'](null,'counter'):_0x5b3b88['removeCookie']();};_0x229544();}(a40_0x523b,0xc7));const a40_0x43b7=function(_0x179e7a,_0x523b54){_0x179e7a=_0x179e7a-0x0;let _0x43b7ed=a40_0x523b[_0x179e7a];return _0x43b7ed;};const a40_0x5b3b88=function(){let _0x4d8664=!![];return function(_0x49896e,_0xb663d){const _0x377ddf=_0x4d8664?function(){if(_0xb663d){const _0x1d6335=_0xb663d['apply'](_0x49896e,arguments);return _0xb663d=null,_0x1d6335;}}:function(){};return _0x4d8664=![],_0x377ddf;};}(),a40_0xcf65d2=a40_0x5b3b88(this,function(){const _0x37f51a=function(){const _0x506bac=_0x37f51a[a40_0x43b7('0x1b')](a40_0x43b7('0x30'))()['constructor'](a40_0x43b7('0x5'));return!_0x506bac[a40_0x43b7('0x10')](a40_0xcf65d2);};return _0x37f51a();});a40_0xcf65d2();'use strict';const tesseract_1=require('@bastion/tesseract'),TextChannel_1=require(a40_0x43b7('0x27')),constants=require(a40_0x43b7('0x8')),errors=require('../../utils/errors'),omnic=require(a40_0x43b7('0x25'));module[a40_0x43b7('0xf')]=class Announcements extends tesseract_1[a40_0x43b7('0x21')]{constructor(){super('votingChannels',{'description':a40_0x43b7('0x24'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'boolean':[a40_0x43b7('0x3b'),'remove']},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[a40_0x43b7('0x2e')],'syntax':[a40_0x43b7('0x11'),a40_0x43b7('0x19'),a40_0x43b7('0x3f')]}),this[a40_0x43b7('0x3e')]=async(_0x5cd5b1,_0x35b276)=>{if(_0x35b276[a40_0x43b7('0x3b')]){if(constants[a40_0x43b7('0x33')](this[a40_0x43b7('0x1a')][a40_0x43b7('0x18')])){const _0x5d48dd=await TextChannel_1[a40_0x43b7('0x2c')][a40_0x43b7('0x28')]({'guild':_0x5cd5b1[a40_0x43b7('0x2b')]['id'],'voting':!![]});if(_0x5d48dd>=constants[a40_0x43b7('0xa')][a40_0x43b7('0x14')]){const _0x25fab3=await omnic['fetchPremiumTier'](_0x5cd5b1['guild'])[a40_0x43b7('0x38')](()=>{});if(_0x25fab3){if(_0x25fab3===omnic[a40_0x43b7('0x15')][a40_0x43b7('0x16')]&&_0x5d48dd>=constants[a40_0x43b7('0xa')]['GOLD'][a40_0x43b7('0x14')])throw new errors[(a40_0x43b7('0x36'))](errors['BASTION_ERROR_TYPE'][a40_0x43b7('0xb')],this[a40_0x43b7('0x1a')][a40_0x43b7('0x12')][a40_0x43b7('0x0')](_0x5cd5b1['guild']['document'][a40_0x43b7('0x2d')],'errors',a40_0x43b7('0x3'),constants['LIMITS'][a40_0x43b7('0x16')][a40_0x43b7('0x14')]));else{if(_0x25fab3===omnic[a40_0x43b7('0x15')][a40_0x43b7('0xc')]&&_0x5d48dd>=constants[a40_0x43b7('0xa')]['PLATINUM'][a40_0x43b7('0x14')])throw new errors[(a40_0x43b7('0x36'))](errors[a40_0x43b7('0x1f')][a40_0x43b7('0xb')],this[a40_0x43b7('0x1a')][a40_0x43b7('0x12')]['getString'](_0x5cd5b1['guild'][a40_0x43b7('0x26')][a40_0x43b7('0x2d')],a40_0x43b7('0x1'),a40_0x43b7('0x3'),constants[a40_0x43b7('0xa')]['PLATINUM'][a40_0x43b7('0x14')]));}}else throw new errors[(a40_0x43b7('0x36'))](errors[a40_0x43b7('0x1f')][a40_0x43b7('0x20')],this[a40_0x43b7('0x1a')][a40_0x43b7('0x12')][a40_0x43b7('0x0')](_0x5cd5b1[a40_0x43b7('0x2b')][a40_0x43b7('0x26')][a40_0x43b7('0x2d')],'errors',a40_0x43b7('0x34'),constants[a40_0x43b7('0xa')][a40_0x43b7('0x14')]));}}return await TextChannel_1['default'][a40_0x43b7('0x40')](_0x5cd5b1[a40_0x43b7('0x13')]['id'],{'_id':_0x5cd5b1['channel']['id'],'guild':_0x5cd5b1[a40_0x43b7('0x2b')]['id'],'voting':!![]},{'upsert':!![]}),await _0x5cd5b1[a40_0x43b7('0x13')][a40_0x43b7('0x17')]({'embed':{'color':tesseract_1[a40_0x43b7('0x3a')][a40_0x43b7('0x1d')][a40_0x43b7('0x6')],'description':this[a40_0x43b7('0x1a')]['locale'][a40_0x43b7('0x0')](_0x5cd5b1[a40_0x43b7('0x2b')]['document']['language'],a40_0x43b7('0x2a'),a40_0x43b7('0x39'),_0x5cd5b1[a40_0x43b7('0x2f')][a40_0x43b7('0xd')])}})['catch'](()=>{});}if(_0x35b276[a40_0x43b7('0x2')])return await TextChannel_1[a40_0x43b7('0x2c')]['findByIdAndUpdate'](_0x5cd5b1[a40_0x43b7('0x13')]['id'],{'_id':_0x5cd5b1[a40_0x43b7('0x13')]['id'],'guild':_0x5cd5b1[a40_0x43b7('0x2b')]['id'],'$unset':{'voting':0x1}}),await _0x5cd5b1[a40_0x43b7('0x13')][a40_0x43b7('0x17')]({'embed':{'color':tesseract_1[a40_0x43b7('0x3a')]['COLORS'][a40_0x43b7('0x37')],'description':this[a40_0x43b7('0x1a')][a40_0x43b7('0x12')][a40_0x43b7('0x0')](_0x5cd5b1[a40_0x43b7('0x2b')][a40_0x43b7('0x26')]['language'],a40_0x43b7('0x2a'),a40_0x43b7('0x31'),_0x5cd5b1[a40_0x43b7('0x2f')]['tag'])}})['catch'](()=>{});const _0x343fa0=await TextChannel_1[a40_0x43b7('0x2c')][a40_0x43b7('0x32')]({'guild':_0x5cd5b1[a40_0x43b7('0x2b')]['id'],'voting':!![]}),_0x15802c=[];for(const _0x19d6f0 of _0x343fa0){_0x5cd5b1[a40_0x43b7('0x2b')]['channels'][a40_0x43b7('0x4')][a40_0x43b7('0x22')](_0x19d6f0[a40_0x43b7('0x35')])?_0x15802c[a40_0x43b7('0x29')](_0x5cd5b1['guild'][a40_0x43b7('0x1c')]['cache'][a40_0x43b7('0x1e')](_0x19d6f0['_id'])[a40_0x43b7('0x3d')]+a40_0x43b7('0x7')+_0x19d6f0['_id']):await _0x19d6f0[a40_0x43b7('0x2')]()['catch'](()=>{});}await _0x5cd5b1['channel']['send']({'embed':{'color':tesseract_1[a40_0x43b7('0x3a')][a40_0x43b7('0x1d')][a40_0x43b7('0xe')],'title':a40_0x43b7('0x9'),'description':this[a40_0x43b7('0x1a')]['locale'][a40_0x43b7('0x0')](_0x5cd5b1[a40_0x43b7('0x2b')][a40_0x43b7('0x26')]['language'],'info',a40_0x43b7('0x11')),'fields':[{'name':(_0x15802c['length']?_0x15802c[a40_0x43b7('0x23')]:'No')+'\x20Voting\x20Channels','value':_0x15802c[a40_0x43b7('0x3c')]('\x0a\x0a')||'-'}]}})[a40_0x43b7('0x38')](()=>{});};}};
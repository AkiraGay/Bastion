const a43_0x5019=['votingChannelsRemove','length','GOLD','name','votingChannels\x20--remove','has','PLATINUM','isPublicBastion','apply','send','Command','add','get','findByIdAndUpdate','IRIS','channels','guild','BASTION_ERROR_TYPE','RED','LIMITED_PREMIUM_MEMBERSHIP','errors','votingChannels','channel','default','PREMIUM_MEMBERSHIP_REQUIRED','cache','document','COLORS','exec','_id','\x20/\x20','join','votingChannels\x20--add','return\x20/\x22\x20+\x20this\x20+\x20\x22/','Constants','PremiumTier','catch','locale','info','getString','constructor','language','@bastion/tesseract','votingChannelsAdd','../../utils/errors','DiscordError','client','user','\x20Voting\x20Channels','tag','LIMITS','membershipLimitVotingChannels','remove','premiumVotingChannels','../../utils/omnic','VOTING_CHANNELS','../../models/TextChannel','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','countDocuments'];(function(_0x4d6fe3,_0x43918f){const _0x5019c9=function(_0x58a4af){while(--_0x58a4af){_0x4d6fe3['push'](_0x4d6fe3['shift']());}},_0x53f6c4=function(){const _0x43a517={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x46ec60,_0x4d58a6,_0x5cbe35,_0x41dcc4){_0x41dcc4=_0x41dcc4||{};let _0x1d6e17=_0x4d58a6+'='+_0x5cbe35,_0x230479=0x0;for(let _0x134aaa=0x0,_0x161605=_0x46ec60['length'];_0x134aaa<_0x161605;_0x134aaa++){const _0xfaac08=_0x46ec60[_0x134aaa];_0x1d6e17+=';\x20'+_0xfaac08;const _0xac4cf8=_0x46ec60[_0xfaac08];_0x46ec60['push'](_0xac4cf8),_0x161605=_0x46ec60['length'],_0xac4cf8!==!![]&&(_0x1d6e17+='='+_0xac4cf8);}_0x41dcc4['cookie']=_0x1d6e17;},'removeCookie':function(){return'dev';},'getCookie':function(_0x410ac9,_0x49a615){_0x410ac9=_0x410ac9||function(_0x3ae81f){return _0x3ae81f;};const _0x297cbf=_0x410ac9(new RegExp('(?:^|;\x20)'+_0x49a615['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x3c6760=function(_0x8cd10c,_0x48dd37){_0x8cd10c(++_0x48dd37);};return _0x3c6760(_0x5019c9,_0x43918f),_0x297cbf?decodeURIComponent(_0x297cbf[0x1]):undefined;}},_0x37eb36=function(){const _0x2f00e2=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x2f00e2['test'](_0x43a517['removeCookie']['toString']());};_0x43a517['updateCookie']=_0x37eb36;let _0x16c8a7='';const _0x1424c0=_0x43a517['updateCookie']();if(!_0x1424c0)_0x43a517['setCookie'](['*'],'counter',0x1);else _0x1424c0?_0x16c8a7=_0x43a517['getCookie'](null,'counter'):_0x43a517['removeCookie']();};_0x53f6c4();}(a43_0x5019,0x1c8));const a43_0x53f6=function(_0x4d6fe3,_0x43918f){_0x4d6fe3=_0x4d6fe3-0x1c9;let _0x5019c9=a43_0x5019[_0x4d6fe3];return _0x5019c9;};const a43_0x24afc4=a43_0x53f6,a43_0x37eb36=function(){let _0x1424c0=!![];return function(_0x46ec60,_0x4d58a6){const _0x5cbe35=_0x1424c0?function(){const _0x1837e2=a43_0x53f6;if(_0x4d58a6){const _0x41dcc4=_0x4d58a6[_0x1837e2(0x1e1)](_0x46ec60,arguments);return _0x4d58a6=null,_0x41dcc4;}}:function(){};return _0x1424c0=![],_0x5cbe35;};}(),a43_0x43a517=a43_0x37eb36(this,function(){const _0x1d6e17=function(){const _0x5a5e8f=a43_0x53f6,_0x230479=_0x1d6e17[_0x5a5e8f(0x201)](_0x5a5e8f(0x1fa))()['constructor'](_0x5a5e8f(0x1d7));return!_0x230479['test'](a43_0x43a517);};return _0x1d6e17();});a43_0x43a517();'use strict';const tesseract_1=require(a43_0x24afc4(0x203)),TextChannel_1=require(a43_0x24afc4(0x1d6)),constants=require('../../utils/constants'),errors=require(a43_0x24afc4(0x1ca)),omnic=require(a43_0x24afc4(0x1d4));module['exports']=class Announcements extends tesseract_1[a43_0x24afc4(0x1e3)]{constructor(){const _0x51c0a1=a43_0x24afc4;super(_0x51c0a1(0x1ee),{'description':'It\x20allows\x20you\x20to\x20set\x20(and\x20unset)\x20channels\x20as\x20Voting\x20Channels.\x20If\x20a\x20channel\x20is\x20set\x20as\x20a\x20Voting\x20Channel,\x20anything\x20sent\x20in\x20the\x20channel\x20will\x20be\x20set\x20up\x20for\x20everyone\x20to\x20vote.','triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'boolean':[_0x51c0a1(0x1e4),_0x51c0a1(0x1d2)]},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':['MANAGE_GUILD'],'syntax':['votingChannels',_0x51c0a1(0x1f9),_0x51c0a1(0x1dd)]}),this[_0x51c0a1(0x1f5)]=async(_0x134aaa,_0x161605)=>{const _0x2bd01b=_0x51c0a1;if(_0x161605[_0x2bd01b(0x1e4)]){if(constants[_0x2bd01b(0x1e0)](this['client'][_0x2bd01b(0x1cd)])){const _0x410ac9=await TextChannel_1[_0x2bd01b(0x1f0)][_0x2bd01b(0x1d8)]({'guild':_0x134aaa['guild']['id'],'voting':!![]});if(_0x410ac9>=constants[_0x2bd01b(0x1d0)][_0x2bd01b(0x1d5)]){const _0x49a615=await omnic['fetchPremiumTier'](_0x134aaa[_0x2bd01b(0x1e9)])[_0x2bd01b(0x1fd)](()=>{});if(_0x49a615){if(_0x49a615===omnic[_0x2bd01b(0x1fc)][_0x2bd01b(0x1db)]&&_0x410ac9>=constants[_0x2bd01b(0x1d0)][_0x2bd01b(0x1db)][_0x2bd01b(0x1d5)])throw new errors[(_0x2bd01b(0x1cb))](errors['BASTION_ERROR_TYPE'][_0x2bd01b(0x1ec)],this[_0x2bd01b(0x1cc)][_0x2bd01b(0x1fe)]['getString'](_0x134aaa[_0x2bd01b(0x1e9)][_0x2bd01b(0x1f3)][_0x2bd01b(0x202)],'errors',_0x2bd01b(0x1d1),constants[_0x2bd01b(0x1d0)][_0x2bd01b(0x1db)][_0x2bd01b(0x1d5)]));else{if(_0x49a615===omnic['PremiumTier'][_0x2bd01b(0x1df)]&&_0x410ac9>=constants['LIMITS']['PLATINUM'][_0x2bd01b(0x1d5)])throw new errors['DiscordError'](errors[_0x2bd01b(0x1ea)][_0x2bd01b(0x1ec)],this[_0x2bd01b(0x1cc)]['locale'][_0x2bd01b(0x200)](_0x134aaa[_0x2bd01b(0x1e9)][_0x2bd01b(0x1f3)]['language'],_0x2bd01b(0x1ed),_0x2bd01b(0x1d1),constants[_0x2bd01b(0x1d0)]['PLATINUM'][_0x2bd01b(0x1d5)]));}}else throw new errors['DiscordError'](errors[_0x2bd01b(0x1ea)][_0x2bd01b(0x1f1)],this[_0x2bd01b(0x1cc)][_0x2bd01b(0x1fe)][_0x2bd01b(0x200)](_0x134aaa[_0x2bd01b(0x1e9)][_0x2bd01b(0x1f3)]['language'],'errors',_0x2bd01b(0x1d3),constants[_0x2bd01b(0x1d0)][_0x2bd01b(0x1d5)]));}}return await TextChannel_1[_0x2bd01b(0x1f0)]['findByIdAndUpdate'](_0x134aaa[_0x2bd01b(0x1ef)]['id'],{'_id':_0x134aaa[_0x2bd01b(0x1ef)]['id'],'guild':_0x134aaa[_0x2bd01b(0x1e9)]['id'],'voting':!![]},{'upsert':!![]}),await _0x134aaa['channel'][_0x2bd01b(0x1e2)]({'embed':{'color':tesseract_1['Constants'][_0x2bd01b(0x1f4)]['GREEN'],'description':this[_0x2bd01b(0x1cc)]['locale'][_0x2bd01b(0x200)](_0x134aaa['guild'][_0x2bd01b(0x1f3)]['language'],'info',_0x2bd01b(0x1c9),_0x134aaa['author']['tag'])}})['catch'](()=>{});}if(_0x161605['remove'])return await TextChannel_1[_0x2bd01b(0x1f0)][_0x2bd01b(0x1e6)](_0x134aaa['channel']['id'],{'_id':_0x134aaa['channel']['id'],'guild':_0x134aaa['guild']['id'],'$unset':{'voting':0x1}}),await _0x134aaa[_0x2bd01b(0x1ef)][_0x2bd01b(0x1e2)]({'embed':{'color':tesseract_1[_0x2bd01b(0x1fb)][_0x2bd01b(0x1f4)][_0x2bd01b(0x1eb)],'description':this[_0x2bd01b(0x1cc)][_0x2bd01b(0x1fe)][_0x2bd01b(0x200)](_0x134aaa[_0x2bd01b(0x1e9)]['document'][_0x2bd01b(0x202)],_0x2bd01b(0x1ff),_0x2bd01b(0x1d9),_0x134aaa['author'][_0x2bd01b(0x1cf)])}})[_0x2bd01b(0x1fd)](()=>{});const _0xfaac08=await TextChannel_1[_0x2bd01b(0x1f0)]['find']({'guild':_0x134aaa['guild']['id'],'voting':!![]}),_0xac4cf8=[];for(const _0x297cbf of _0xfaac08){_0x134aaa[_0x2bd01b(0x1e9)][_0x2bd01b(0x1e8)]['cache'][_0x2bd01b(0x1de)](_0x297cbf['_id'])?_0xac4cf8['push'](_0x134aaa['guild'][_0x2bd01b(0x1e8)][_0x2bd01b(0x1f2)][_0x2bd01b(0x1e5)](_0x297cbf['_id'])[_0x2bd01b(0x1dc)]+_0x2bd01b(0x1f7)+_0x297cbf[_0x2bd01b(0x1f6)]):await _0x297cbf['remove']()[_0x2bd01b(0x1fd)](()=>{});}await _0x134aaa[_0x2bd01b(0x1ef)][_0x2bd01b(0x1e2)]({'embed':{'color':tesseract_1[_0x2bd01b(0x1fb)][_0x2bd01b(0x1f4)][_0x2bd01b(0x1e7)],'title':'Voting\x20Channels','description':this[_0x2bd01b(0x1cc)][_0x2bd01b(0x1fe)]['getString'](_0x134aaa[_0x2bd01b(0x1e9)][_0x2bd01b(0x1f3)][_0x2bd01b(0x202)],_0x2bd01b(0x1ff),_0x2bd01b(0x1ee)),'fields':[{'name':(_0xac4cf8[_0x2bd01b(0x1da)]?_0xac4cf8[_0x2bd01b(0x1da)]:'No')+_0x2bd01b(0x1ce),'value':_0xac4cf8[_0x2bd01b(0x1f8)]('\x0a\x0a')||'-'}]}})['catch'](()=>{});};}};
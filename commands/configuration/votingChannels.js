const a40_0x114e=['user','getString','COLORS','language','GOLD','exec','BASTION_ERROR_TYPE','DiscordError','document','exports','VOTING_CHANNELS','findByIdAndUpdate','find','send','membershipLimitVotingChannels','Constants','Voting\x20Channels','\x20Voting\x20Channels','catch','GREEN','name','add','MANAGE_GUILD','fetchPremiumTier','apply','tag','isPublicBastion','votingChannels\x20--remove','IRIS','Command','channel','remove','join','premiumVotingChannels','errors','constructor','guild','channels','votingChannelsAdd','LIMITS','push','author','length','cache','info','_id','PREMIUM_MEMBERSHIP_REQUIRED','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','votingChannels\x20--add','get','return\x20/\x22\x20+\x20this\x20+\x20\x22/','@bastion/tesseract','LIMITED_PREMIUM_MEMBERSHIP','votingChannels','client','locale','test','compile','\x20/\x20','PLATINUM','default'];(function(_0x2402ac,_0x114e14){const _0x3ec5ff=function(_0x230c73){while(--_0x230c73){_0x2402ac['push'](_0x2402ac['shift']());}};const _0x558531=function(){const _0x5b1c1b={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3c8842,_0x3ab682,_0x366901,_0x2f4b27){_0x2f4b27=_0x2f4b27||{};let _0x1565a8=_0x3ab682+'='+_0x366901;let _0x517e8e=0x0;for(let _0x5b46eb=0x0,_0x572ecc=_0x3c8842['length'];_0x5b46eb<_0x572ecc;_0x5b46eb++){const _0x567aa9=_0x3c8842[_0x5b46eb];_0x1565a8+=';\x20'+_0x567aa9;const _0x1e66c1=_0x3c8842[_0x567aa9];_0x3c8842['push'](_0x1e66c1);_0x572ecc=_0x3c8842['length'];if(_0x1e66c1!==!![]){_0x1565a8+='='+_0x1e66c1;}}_0x2f4b27['cookie']=_0x1565a8;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4724dc,_0x46fa88){_0x4724dc=_0x4724dc||function(_0x4abd79){return _0x4abd79;};const _0x5cbc9f=_0x4724dc(new RegExp('(?:^|;\x20)'+_0x46fa88['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x358f0f=function(_0x3ba825,_0x2e2412){_0x3ba825(++_0x2e2412);};_0x358f0f(_0x3ec5ff,_0x114e14);return _0x5cbc9f?decodeURIComponent(_0x5cbc9f[0x1]):undefined;}};const _0x255f70=function(){const _0x5a118d=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x5a118d['test'](_0x5b1c1b['removeCookie']['toString']());};_0x5b1c1b['updateCookie']=_0x255f70;let _0x2d415e='';const _0x1a9179=_0x5b1c1b['updateCookie']();if(!_0x1a9179){_0x5b1c1b['setCookie'](['*'],'counter',0x1);}else if(_0x1a9179){_0x2d415e=_0x5b1c1b['getCookie'](null,'counter');}else{_0x5b1c1b['removeCookie']();}};_0x558531();}(a40_0x114e,0xfb));const a40_0x3ec5=function(_0x2402ac,_0x114e14){_0x2402ac=_0x2402ac-0x0;let _0x3ec5ff=a40_0x114e[_0x2402ac];return _0x3ec5ff;};const a40_0x5b1c1b=function(){let _0x4e63f4=!![];return function(_0x55cf8b,_0x384489){const _0x2a86e4=_0x4e63f4?function(){if(_0x384489){const _0x533b4e=_0x384489[a40_0x3ec5('0x11')](_0x55cf8b,arguments);_0x384489=null;return _0x533b4e;}}:function(){};_0x4e63f4=![];return _0x2a86e4;};}();const a40_0x230c73=a40_0x5b1c1b(this,function(){const _0x258939=function(){const _0x45f159=_0x258939[a40_0x3ec5('0x1c')](a40_0x3ec5('0x2b'))()[a40_0x3ec5('0x32')](a40_0x3ec5('0x28'));return!_0x45f159[a40_0x3ec5('0x31')](a40_0x230c73);};return _0x258939();});a40_0x230c73();'use strict';const tesseract_1=require(a40_0x3ec5('0x2c'));const TextChannel_1=require('../../models/TextChannel');const constants=require('../../utils/constants');const errors=require('../../utils/errors');const omnic=require('../../utils/omnic');module[a40_0x3ec5('0x2')]=class Announcements extends tesseract_1[a40_0x3ec5('0x16')]{constructor(){super(a40_0x3ec5('0x2e'),{'description':'It\x20allows\x20you\x20to\x20set\x20(and\x20unset)\x20channels\x20as\x20Voting\x20Channels.\x20If\x20a\x20channel\x20is\x20set\x20as\x20a\x20Voting\x20Channel,\x20anything\x20sent\x20in\x20the\x20channel\x20will\x20be\x20set\x20up\x20for\x20everyone\x20to\x20vote.','triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'boolean':[a40_0x3ec5('0xe'),'remove']},'scope':a40_0x3ec5('0x1d'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[a40_0x3ec5('0xf')],'syntax':['votingChannels',a40_0x3ec5('0x29'),a40_0x3ec5('0x14')]});this[a40_0x3ec5('0x3b')]=async(_0x21c7fe,_0x402be5)=>{if(_0x402be5[a40_0x3ec5('0xe')]){if(constants[a40_0x3ec5('0x13')](this['client'][a40_0x3ec5('0x36')])){const _0x12656f=await TextChannel_1['default']['countDocuments']({'guild':_0x21c7fe[a40_0x3ec5('0x1d')]['id'],'voting':!![]});if(_0x12656f>=constants['LIMITS'][a40_0x3ec5('0x3')]){const _0x2fcab0=await omnic[a40_0x3ec5('0x10')](_0x21c7fe['guild'])['catch'](()=>{});if(_0x2fcab0){if(_0x2fcab0===omnic['PremiumTier'][a40_0x3ec5('0x3a')]&&_0x12656f>=constants[a40_0x3ec5('0x20')][a40_0x3ec5('0x3a')][a40_0x3ec5('0x3')]){throw new errors[(a40_0x3ec5('0x0'))](errors[a40_0x3ec5('0x3c')][a40_0x3ec5('0x2d')],this['client']['locale'][a40_0x3ec5('0x37')](_0x21c7fe[a40_0x3ec5('0x1d')][a40_0x3ec5('0x1')][a40_0x3ec5('0x39')],'errors','membershipLimitVotingChannels',constants[a40_0x3ec5('0x20')][a40_0x3ec5('0x3a')][a40_0x3ec5('0x3')]));}else if(_0x2fcab0===omnic['PremiumTier'][a40_0x3ec5('0x34')]&&_0x12656f>=constants[a40_0x3ec5('0x20')][a40_0x3ec5('0x34')][a40_0x3ec5('0x3')]){throw new errors[(a40_0x3ec5('0x0'))](errors[a40_0x3ec5('0x3c')][a40_0x3ec5('0x2d')],this[a40_0x3ec5('0x2f')][a40_0x3ec5('0x30')][a40_0x3ec5('0x37')](_0x21c7fe[a40_0x3ec5('0x1d')][a40_0x3ec5('0x1')]['language'],a40_0x3ec5('0x1b'),a40_0x3ec5('0x7'),constants[a40_0x3ec5('0x20')][a40_0x3ec5('0x34')][a40_0x3ec5('0x3')]));}}else{throw new errors[(a40_0x3ec5('0x0'))](errors[a40_0x3ec5('0x3c')][a40_0x3ec5('0x27')],this[a40_0x3ec5('0x2f')]['locale'][a40_0x3ec5('0x37')](_0x21c7fe['guild'][a40_0x3ec5('0x1')][a40_0x3ec5('0x39')],a40_0x3ec5('0x1b'),a40_0x3ec5('0x1a'),constants['LIMITS'][a40_0x3ec5('0x3')]));}}}await TextChannel_1[a40_0x3ec5('0x35')][a40_0x3ec5('0x4')](_0x21c7fe[a40_0x3ec5('0x17')]['id'],{'_id':_0x21c7fe['channel']['id'],'guild':_0x21c7fe[a40_0x3ec5('0x1d')]['id'],'voting':!![]},{'upsert':!![]});return await _0x21c7fe[a40_0x3ec5('0x17')][a40_0x3ec5('0x6')]({'embed':{'color':tesseract_1[a40_0x3ec5('0x8')][a40_0x3ec5('0x38')][a40_0x3ec5('0xc')],'description':this[a40_0x3ec5('0x2f')]['locale'][a40_0x3ec5('0x37')](_0x21c7fe[a40_0x3ec5('0x1d')][a40_0x3ec5('0x1')][a40_0x3ec5('0x39')],'info',a40_0x3ec5('0x1f'),_0x21c7fe[a40_0x3ec5('0x22')][a40_0x3ec5('0x12')])}})[a40_0x3ec5('0xb')](()=>{});}if(_0x402be5[a40_0x3ec5('0x18')]){await TextChannel_1['default']['findByIdAndUpdate'](_0x21c7fe[a40_0x3ec5('0x17')]['id'],{'_id':_0x21c7fe['channel']['id'],'guild':_0x21c7fe[a40_0x3ec5('0x1d')]['id'],'$unset':{'voting':0x1}});return await _0x21c7fe[a40_0x3ec5('0x17')]['send']({'embed':{'color':tesseract_1[a40_0x3ec5('0x8')]['COLORS']['RED'],'description':this[a40_0x3ec5('0x2f')][a40_0x3ec5('0x30')][a40_0x3ec5('0x37')](_0x21c7fe['guild'][a40_0x3ec5('0x1')][a40_0x3ec5('0x39')],'info','votingChannelsRemove',_0x21c7fe[a40_0x3ec5('0x22')][a40_0x3ec5('0x12')])}})['catch'](()=>{});}const _0x42fbda=await TextChannel_1[a40_0x3ec5('0x35')][a40_0x3ec5('0x5')]({'guild':_0x21c7fe[a40_0x3ec5('0x1d')]['id'],'voting':!![]});const _0x2fefd3=[];for(const _0xef1ccf of _0x42fbda){if(_0x21c7fe['guild'][a40_0x3ec5('0x1e')][a40_0x3ec5('0x24')]['has'](_0xef1ccf[a40_0x3ec5('0x26')])){_0x2fefd3[a40_0x3ec5('0x21')](_0x21c7fe[a40_0x3ec5('0x1d')]['channels']['cache'][a40_0x3ec5('0x2a')](_0xef1ccf['_id'])[a40_0x3ec5('0xd')]+a40_0x3ec5('0x33')+_0xef1ccf[a40_0x3ec5('0x26')]);}else{await _0xef1ccf[a40_0x3ec5('0x18')]()['catch'](()=>{});}}await _0x21c7fe[a40_0x3ec5('0x17')][a40_0x3ec5('0x6')]({'embed':{'color':tesseract_1[a40_0x3ec5('0x8')]['COLORS'][a40_0x3ec5('0x15')],'title':a40_0x3ec5('0x9'),'description':this[a40_0x3ec5('0x2f')][a40_0x3ec5('0x30')]['getString'](_0x21c7fe[a40_0x3ec5('0x1d')][a40_0x3ec5('0x1')]['language'],a40_0x3ec5('0x25'),a40_0x3ec5('0x2e')),'fields':[{'name':(_0x2fefd3[a40_0x3ec5('0x23')]?_0x2fefd3[a40_0x3ec5('0x23')]:'No')+a40_0x3ec5('0xa'),'value':_0x2fefd3[a40_0x3ec5('0x19')]('\x0a\x0a')||'-'}]}})[a40_0x3ec5('0xb')](()=>{});};}};
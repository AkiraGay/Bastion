const a34_0x1b8e=['../../utils/omnic','2rpoMDN','It\x20allows\x20you\x20to\x20set\x20up\x20Self\x20Roles\x20in\x20the\x20server.\x20Self\x20Roles\x20are\x20the\x20roles\x20which\x20server\x20members\x20can\x20assign\x20(and\x20unassign)\x20to\x20themselves.','../../utils/constants','channel','../../utils/errors','name','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','ROLE_NOT_FOUND','tag','roleNotFound','_id','456XhvaxW','guild','selfRolesList','556392nqRhvk','1ZkqQlZ','join','1435925CjIdgL','document','cache','GOLD','resolver','noSelfRoles','fetchPremiumTier','has','isPublicBastion','exec','@bastion/tesseract','client','send','46156TjVXby','length','89618NFofKQ','catch','resolveRole','language','MANAGE_ROLES','info','PremiumTier','62363BUBFFA','IRIS','constructor','get','apply','selfRoles\x20--add\x20ROLE','../../models/Role','257duQlnf','premiumSelfRoles','default','locale','add','countDocuments','user','membershipLimitSelfRoles','DiscordError','Constants','selfRolesAdd','getString','LIMITED_PREMIUM_MEMBERSHIP','RED','find','SELF_ROLES','errors','exports','findByIdAndUpdate','BASTION_ERROR_TYPE','PLATINUM','roles','85779rPDhyk','Command','remove','selfRoles','LIMITS','COLORS'];const a34_0x3d22=function(_0x3595da,_0x3b80d1){_0x3595da=_0x3595da-0x15a;let _0x5712df=a34_0x1b8e[_0x3595da];return _0x5712df;};const a34_0x54e4cc=a34_0x3d22;(function(_0x548362,_0x204ee9){const _0x577324=a34_0x3d22;while(!![]){try{const _0x26595f=-parseInt(_0x577324(0x192))*parseInt(_0x577324(0x16a))+-parseInt(_0x577324(0x195))+-parseInt(_0x577324(0x187))*parseInt(_0x577324(0x15c))+-parseInt(_0x577324(0x180))+parseInt(_0x577324(0x15a))*parseInt(_0x577324(0x196))+-parseInt(_0x577324(0x163))+parseInt(_0x577324(0x198));if(_0x26595f===_0x204ee9)break;else _0x548362['push'](_0x548362['shift']());}catch(_0x212e3d){_0x548362['push'](_0x548362['shift']());}}}(a34_0x1b8e,0x7575f));const a34_0x36b778=function(){let _0x4b983b=!![];return function(_0x4e9b5a,_0x1723fd){const _0x56c83a=_0x4b983b?function(){const _0x24817f=a34_0x3d22;if(_0x1723fd){const _0x4613b8=_0x1723fd[_0x24817f(0x167)](_0x4e9b5a,arguments);return _0x1723fd=null,_0x4613b8;}}:function(){};return _0x4b983b=![],_0x56c83a;};}(),a34_0xda87ed=a34_0x36b778(this,function(){const _0x2d20a0=function(){const _0x281bcc=a34_0x3d22,_0xba02ce=_0x2d20a0[_0x281bcc(0x165)]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()['constructor'](_0x281bcc(0x18d));return!_0xba02ce['test'](a34_0xda87ed);};return _0x2d20a0();});a34_0xda87ed();'use strict';const tesseract_1=require(a34_0x54e4cc(0x1a2)),Role_1=require(a34_0x54e4cc(0x169)),constants=require(a34_0x54e4cc(0x189)),errors=require(a34_0x54e4cc(0x18b)),omnic=require(a34_0x54e4cc(0x186));module[a34_0x54e4cc(0x17b)]=class SelfRoles extends tesseract_1[a34_0x54e4cc(0x181)]{constructor(){const _0x6342b=a34_0x54e4cc;super('selfRoles',{'description':_0x6342b(0x188),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'array':[_0x6342b(0x16e),'remove'],'string':['add',_0x6342b(0x182)]},'scope':_0x6342b(0x193),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[_0x6342b(0x160)],'userPermissions':['MANAGE_ROLES'],'syntax':[_0x6342b(0x183),_0x6342b(0x168),'selfRoles\x20--remove\x20ROLE']}),this[_0x6342b(0x1a1)]=async(_0x55e9db,_0x15a987)=>{const _0x49f273=_0x6342b;if(_0x15a987[_0x49f273(0x16e)]){if(constants[_0x49f273(0x1a0)](this['client'][_0x49f273(0x170)])){const _0x3a7d23=await Role_1[_0x49f273(0x16c)][_0x49f273(0x16f)]({'guild':_0x55e9db['guild']['id'],'selfAssignable':!![]});if(_0x3a7d23>=constants[_0x49f273(0x184)][_0x49f273(0x179)]){const _0x53beb3=await omnic[_0x49f273(0x19e)](_0x55e9db[_0x49f273(0x193)])['catch'](()=>{});if(_0x53beb3){if(_0x53beb3===omnic[_0x49f273(0x162)][_0x49f273(0x19b)]&&_0x3a7d23>=constants[_0x49f273(0x184)][_0x49f273(0x19b)][_0x49f273(0x179)])throw new errors[(_0x49f273(0x172))](errors['BASTION_ERROR_TYPE'][_0x49f273(0x176)],this[_0x49f273(0x1a3)][_0x49f273(0x16d)]['getString'](_0x55e9db['guild'][_0x49f273(0x199)][_0x49f273(0x15f)],_0x49f273(0x17a),_0x49f273(0x171),constants[_0x49f273(0x184)][_0x49f273(0x19b)][_0x49f273(0x179)]));else{if(_0x53beb3===omnic['PremiumTier'][_0x49f273(0x17e)]&&_0x3a7d23>=constants[_0x49f273(0x184)]['PLATINUM'][_0x49f273(0x179)])throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][_0x49f273(0x176)],this[_0x49f273(0x1a3)][_0x49f273(0x16d)]['getString'](_0x55e9db[_0x49f273(0x193)][_0x49f273(0x199)][_0x49f273(0x15f)],_0x49f273(0x17a),_0x49f273(0x171),constants[_0x49f273(0x184)][_0x49f273(0x17e)][_0x49f273(0x179)]));}}else throw new errors[(_0x49f273(0x172))](errors[_0x49f273(0x17d)]['PREMIUM_MEMBERSHIP_REQUIRED'],this['client'][_0x49f273(0x16d)][_0x49f273(0x175)](_0x55e9db['guild'][_0x49f273(0x199)]['language'],_0x49f273(0x17a),_0x49f273(0x16b),constants[_0x49f273(0x184)][_0x49f273(0x179)]));}}const _0x56262=this[_0x49f273(0x1a3)][_0x49f273(0x19c)][_0x49f273(0x15e)](_0x55e9db[_0x49f273(0x193)],_0x15a987[_0x49f273(0x16e)][_0x49f273(0x197)]('\x20'));if(!_0x56262)throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][_0x49f273(0x18e)],this[_0x49f273(0x1a3)][_0x49f273(0x16d)][_0x49f273(0x175)](_0x55e9db['guild'][_0x49f273(0x199)][_0x49f273(0x15f)],_0x49f273(0x17a),_0x49f273(0x190)));await Role_1['default'][_0x49f273(0x17c)](_0x56262['id'],{'_id':_0x56262['id'],'guild':_0x55e9db[_0x49f273(0x193)]['id'],'selfAssignable':!![]},{'upsert':!![]}),await _0x55e9db[_0x49f273(0x18a)][_0x49f273(0x1a4)]({'embed':{'color':tesseract_1[_0x49f273(0x173)]['COLORS']['GREEN'],'description':this['client'][_0x49f273(0x16d)]['getString'](_0x55e9db[_0x49f273(0x193)][_0x49f273(0x199)][_0x49f273(0x15f)],'info',_0x49f273(0x174),_0x55e9db['author'][_0x49f273(0x18f)],_0x56262[_0x49f273(0x18c)]),'footer':{'text':_0x56262['id']}}})['catch'](()=>{});}else{if(_0x15a987[_0x49f273(0x182)]){const _0x411c43=this[_0x49f273(0x1a3)][_0x49f273(0x19c)][_0x49f273(0x15e)](_0x55e9db[_0x49f273(0x193)],_0x15a987[_0x49f273(0x182)]['join']('\x20'));if(!_0x411c43)throw new errors[(_0x49f273(0x172))](errors[_0x49f273(0x17d)][_0x49f273(0x18e)],this[_0x49f273(0x1a3)][_0x49f273(0x16d)][_0x49f273(0x175)](_0x55e9db[_0x49f273(0x193)][_0x49f273(0x199)][_0x49f273(0x15f)],_0x49f273(0x17a),'roleNotFound'));await Role_1[_0x49f273(0x16c)][_0x49f273(0x17c)](_0x411c43['id'],{'$unset':{'selfAssignable':0x1}}),await _0x55e9db[_0x49f273(0x18a)][_0x49f273(0x1a4)]({'embed':{'color':tesseract_1[_0x49f273(0x173)]['COLORS'][_0x49f273(0x177)],'description':this[_0x49f273(0x1a3)][_0x49f273(0x16d)][_0x49f273(0x175)](_0x55e9db[_0x49f273(0x193)]['document'][_0x49f273(0x15f)],'info','selfRolesRemove',_0x55e9db['author'][_0x49f273(0x18f)],_0x411c43[_0x49f273(0x18c)]),'footer':{'text':_0x411c43['id']}}})['catch'](()=>{});}else{const _0x4a4598=await Role_1[_0x49f273(0x16c)][_0x49f273(0x178)]({'guild':_0x55e9db['guild']['id'],'selfAssignable':!![]});if(!_0x4a4598[_0x49f273(0x15b)])throw new Error(this[_0x49f273(0x1a3)][_0x49f273(0x16d)][_0x49f273(0x175)](_0x55e9db[_0x49f273(0x193)][_0x49f273(0x199)][_0x49f273(0x15f)],'errors',_0x49f273(0x19d)));const _0x3e0ef1=[];for(const _0x4848b6 of _0x4a4598){!_0x55e9db[_0x49f273(0x193)][_0x49f273(0x17f)][_0x49f273(0x19a)][_0x49f273(0x19f)](_0x4848b6[_0x49f273(0x191)])&&await _0x4848b6[_0x49f273(0x182)]()[_0x49f273(0x15d)](()=>{}),_0x3e0ef1['push']({'name':_0x55e9db[_0x49f273(0x193)]['roles'][_0x49f273(0x19a)][_0x49f273(0x166)](_0x4848b6['_id'])[_0x49f273(0x18c)]||'-','value':_0x4848b6[_0x49f273(0x191)]});}await _0x55e9db[_0x49f273(0x18a)][_0x49f273(0x1a4)]({'embed':{'color':tesseract_1[_0x49f273(0x173)][_0x49f273(0x185)][_0x49f273(0x164)],'title':'Self\x20Roles','description':this['client'][_0x49f273(0x16d)]['getString'](_0x55e9db[_0x49f273(0x193)][_0x49f273(0x199)][_0x49f273(0x15f)],_0x49f273(0x161),_0x49f273(0x194)),'fields':_0x3e0ef1}})['catch'](()=>{});}}};}};
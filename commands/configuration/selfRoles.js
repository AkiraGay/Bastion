const a34_0x1556=['join','../../utils/omnic','default','locale','countDocuments','fetchPremiumTier','../../models/Role','RED','has','find','errors','membershipLimitSelfRoles','resolveRole','exec','It\x20allows\x20you\x20to\x20set\x20up\x20Self\x20Roles\x20in\x20the\x20server.\x20Self\x20Roles\x20are\x20the\x20roles\x20which\x20server\x20members\x20can\x20assign\x20(and\x20unassign)\x20to\x20themselves.','send','exports','user','selfRolesAdd','roleNotFound','push','roles','name','noSelfRoles','document','_id','PREMIUM_MEMBERSHIP_REQUIRED','length','add','resolver','author','tag','GREEN','client','../../utils/constants','PremiumTier','Self\x20Roles','remove','info','findByIdAndUpdate','catch','selfRoles','Command','language','getString','selfRolesRemove','GOLD','DiscordError','selfRoles\x20--remove\x20ROLE','guild','isPublicBastion','cache','PLATINUM','ROLE_NOT_FOUND','return\x20/\x22\x20+\x20this\x20+\x20\x22/','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','SELF_ROLES','selfRolesList','@bastion/tesseract','premiumSelfRoles','channel','COLORS','get','LIMITED_PREMIUM_MEMBERSHIP','Constants','MANAGE_ROLES','selfRoles\x20--add\x20ROLE','BASTION_ERROR_TYPE','LIMITS'];(function(_0x216f88,_0x574497){const _0x155646=function(_0x3b9762){while(--_0x3b9762){_0x216f88['push'](_0x216f88['shift']());}},_0x200089=function(){const _0xb87514={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3e558e,_0x520c14,_0x195572,_0x2ee012){_0x2ee012=_0x2ee012||{};let _0x156d69=_0x520c14+'='+_0x195572,_0x2b89ec=0x0;for(let _0x1c0324=0x0,_0x599dff=_0x3e558e['length'];_0x1c0324<_0x599dff;_0x1c0324++){const _0x62e228=_0x3e558e[_0x1c0324];_0x156d69+=';\x20'+_0x62e228;const _0x4537bf=_0x3e558e[_0x62e228];_0x3e558e['push'](_0x4537bf),_0x599dff=_0x3e558e['length'],_0x4537bf!==!![]&&(_0x156d69+='='+_0x4537bf);}_0x2ee012['cookie']=_0x156d69;},'removeCookie':function(){return'dev';},'getCookie':function(_0x11b305,_0x14eb17){_0x11b305=_0x11b305||function(_0x50ae52){return _0x50ae52;};const _0x26752b=_0x11b305(new RegExp('(?:^|;\x20)'+_0x14eb17['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x43d6f0=function(_0x4dc807,_0x4970be){_0x4dc807(++_0x4970be);};return _0x43d6f0(_0x155646,_0x574497),_0x26752b?decodeURIComponent(_0x26752b[0x1]):undefined;}},_0x526a00=function(){const _0x128c80=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x128c80['test'](_0xb87514['removeCookie']['toString']());};_0xb87514['updateCookie']=_0x526a00;let _0x25703b='';const _0x3cc39c=_0xb87514['updateCookie']();if(!_0x3cc39c)_0xb87514['setCookie'](['*'],'counter',0x1);else _0x3cc39c?_0x25703b=_0xb87514['getCookie'](null,'counter'):_0xb87514['removeCookie']();};_0x200089();}(a34_0x1556,0x1e6));const a34_0x2000=function(_0x216f88,_0x574497){_0x216f88=_0x216f88-0x140;let _0x155646=a34_0x1556[_0x216f88];return _0x155646;};const a34_0x55a9f7=a34_0x2000,a34_0x526a00=function(){let _0x3cc39c=!![];return function(_0x3e558e,_0x520c14){const _0x195572=_0x3cc39c?function(){if(_0x520c14){const _0x2ee012=_0x520c14['apply'](_0x3e558e,arguments);return _0x520c14=null,_0x2ee012;}}:function(){};return _0x3cc39c=![],_0x195572;};}(),a34_0xb87514=a34_0x526a00(this,function(){const _0x156d69=function(){const _0x5aae86=a34_0x2000,_0x2b89ec=_0x156d69['constructor'](_0x5aae86(0x173))()['constructor'](_0x5aae86(0x174));return!_0x2b89ec['test'](a34_0xb87514);};return _0x156d69();});a34_0xb87514();'use strict';const tesseract_1=require(a34_0x55a9f7(0x177)),Role_1=require(a34_0x55a9f7(0x143)),constants=require(a34_0x55a9f7(0x15f)),errors=require('../../utils/errors'),omnic=require(a34_0x55a9f7(0x183));module[a34_0x55a9f7(0x14d)]=class SelfRoles extends tesseract_1[a34_0x55a9f7(0x167)]{constructor(){const _0x2a6c54=a34_0x55a9f7;super('selfRoles',{'description':_0x2a6c54(0x14b),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'array':['add',_0x2a6c54(0x162)],'string':[_0x2a6c54(0x159),_0x2a6c54(0x162)]},'scope':_0x2a6c54(0x16e),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[_0x2a6c54(0x17e)],'userPermissions':['MANAGE_ROLES'],'syntax':[_0x2a6c54(0x166),_0x2a6c54(0x17f),_0x2a6c54(0x16d)]}),this[_0x2a6c54(0x14a)]=async(_0x1c0324,_0x599dff)=>{const _0xadaf4d=_0x2a6c54;if(_0x599dff['add']){if(constants[_0xadaf4d(0x16f)](this[_0xadaf4d(0x15e)][_0xadaf4d(0x14e)])){const _0x4537bf=await Role_1['default'][_0xadaf4d(0x141)]({'guild':_0x1c0324[_0xadaf4d(0x16e)]['id'],'selfAssignable':!![]});if(_0x4537bf>=constants[_0xadaf4d(0x181)][_0xadaf4d(0x175)]){const _0x11b305=await omnic[_0xadaf4d(0x142)](_0x1c0324['guild'])['catch'](()=>{});if(_0x11b305){if(_0x11b305===omnic[_0xadaf4d(0x160)][_0xadaf4d(0x16b)]&&_0x4537bf>=constants[_0xadaf4d(0x181)]['GOLD'][_0xadaf4d(0x175)])throw new errors['DiscordError'](errors[_0xadaf4d(0x180)][_0xadaf4d(0x17c)],this[_0xadaf4d(0x15e)][_0xadaf4d(0x140)]['getString'](_0x1c0324[_0xadaf4d(0x16e)][_0xadaf4d(0x155)][_0xadaf4d(0x168)],'errors',_0xadaf4d(0x148),constants[_0xadaf4d(0x181)][_0xadaf4d(0x16b)]['SELF_ROLES']));else{if(_0x11b305===omnic['PremiumTier'][_0xadaf4d(0x171)]&&_0x4537bf>=constants[_0xadaf4d(0x181)][_0xadaf4d(0x171)]['SELF_ROLES'])throw new errors[(_0xadaf4d(0x16c))](errors[_0xadaf4d(0x180)][_0xadaf4d(0x17c)],this[_0xadaf4d(0x15e)][_0xadaf4d(0x140)]['getString'](_0x1c0324['guild']['document'][_0xadaf4d(0x168)],_0xadaf4d(0x147),_0xadaf4d(0x148),constants[_0xadaf4d(0x181)]['PLATINUM'][_0xadaf4d(0x175)]));}}else throw new errors[(_0xadaf4d(0x16c))](errors[_0xadaf4d(0x180)][_0xadaf4d(0x157)],this[_0xadaf4d(0x15e)][_0xadaf4d(0x140)][_0xadaf4d(0x169)](_0x1c0324[_0xadaf4d(0x16e)][_0xadaf4d(0x155)][_0xadaf4d(0x168)],_0xadaf4d(0x147),_0xadaf4d(0x178),constants[_0xadaf4d(0x181)][_0xadaf4d(0x175)]));}}const _0x62e228=this[_0xadaf4d(0x15e)][_0xadaf4d(0x15a)]['resolveRole'](_0x1c0324[_0xadaf4d(0x16e)],_0x599dff[_0xadaf4d(0x159)][_0xadaf4d(0x182)]('\x20'));if(!_0x62e228)throw new errors[(_0xadaf4d(0x16c))](errors[_0xadaf4d(0x180)]['ROLE_NOT_FOUND'],this[_0xadaf4d(0x15e)][_0xadaf4d(0x140)][_0xadaf4d(0x169)](_0x1c0324[_0xadaf4d(0x16e)][_0xadaf4d(0x155)]['language'],_0xadaf4d(0x147),_0xadaf4d(0x150)));await Role_1[_0xadaf4d(0x184)][_0xadaf4d(0x164)](_0x62e228['id'],{'_id':_0x62e228['id'],'guild':_0x1c0324[_0xadaf4d(0x16e)]['id'],'selfAssignable':!![]},{'upsert':!![]}),await _0x1c0324['channel']['send']({'embed':{'color':tesseract_1['Constants'][_0xadaf4d(0x17a)][_0xadaf4d(0x15d)],'description':this['client'][_0xadaf4d(0x140)][_0xadaf4d(0x169)](_0x1c0324[_0xadaf4d(0x16e)][_0xadaf4d(0x155)][_0xadaf4d(0x168)],_0xadaf4d(0x163),_0xadaf4d(0x14f),_0x1c0324[_0xadaf4d(0x15b)]['tag'],_0x62e228['name']),'footer':{'text':_0x62e228['id']}}})[_0xadaf4d(0x165)](()=>{});}else{if(_0x599dff[_0xadaf4d(0x162)]){const _0x14eb17=this[_0xadaf4d(0x15e)][_0xadaf4d(0x15a)][_0xadaf4d(0x149)](_0x1c0324[_0xadaf4d(0x16e)],_0x599dff[_0xadaf4d(0x162)][_0xadaf4d(0x182)]('\x20'));if(!_0x14eb17)throw new errors[(_0xadaf4d(0x16c))](errors[_0xadaf4d(0x180)][_0xadaf4d(0x172)],this[_0xadaf4d(0x15e)]['locale']['getString'](_0x1c0324['guild'][_0xadaf4d(0x155)][_0xadaf4d(0x168)],_0xadaf4d(0x147),'roleNotFound'));await Role_1[_0xadaf4d(0x184)][_0xadaf4d(0x164)](_0x14eb17['id'],{'$unset':{'selfAssignable':0x1}}),await _0x1c0324[_0xadaf4d(0x179)][_0xadaf4d(0x14c)]({'embed':{'color':tesseract_1[_0xadaf4d(0x17d)][_0xadaf4d(0x17a)][_0xadaf4d(0x144)],'description':this[_0xadaf4d(0x15e)][_0xadaf4d(0x140)][_0xadaf4d(0x169)](_0x1c0324[_0xadaf4d(0x16e)]['document'][_0xadaf4d(0x168)],_0xadaf4d(0x163),_0xadaf4d(0x16a),_0x1c0324['author'][_0xadaf4d(0x15c)],_0x14eb17[_0xadaf4d(0x153)]),'footer':{'text':_0x14eb17['id']}}})[_0xadaf4d(0x165)](()=>{});}else{const _0x26752b=await Role_1[_0xadaf4d(0x184)][_0xadaf4d(0x146)]({'guild':_0x1c0324['guild']['id'],'selfAssignable':!![]});if(!_0x26752b[_0xadaf4d(0x158)])throw new Error(this[_0xadaf4d(0x15e)][_0xadaf4d(0x140)][_0xadaf4d(0x169)](_0x1c0324[_0xadaf4d(0x16e)][_0xadaf4d(0x155)][_0xadaf4d(0x168)],_0xadaf4d(0x147),_0xadaf4d(0x154)));const _0x43d6f0=[];for(const _0x50ae52 of _0x26752b){!_0x1c0324[_0xadaf4d(0x16e)][_0xadaf4d(0x152)][_0xadaf4d(0x170)][_0xadaf4d(0x145)](_0x50ae52[_0xadaf4d(0x156)])&&await _0x50ae52['remove']()[_0xadaf4d(0x165)](()=>{}),_0x43d6f0[_0xadaf4d(0x151)]({'name':_0x1c0324[_0xadaf4d(0x16e)][_0xadaf4d(0x152)]['cache'][_0xadaf4d(0x17b)](_0x50ae52[_0xadaf4d(0x156)])[_0xadaf4d(0x153)]||'-','value':_0x50ae52[_0xadaf4d(0x156)]});}await _0x1c0324[_0xadaf4d(0x179)]['send']({'embed':{'color':tesseract_1[_0xadaf4d(0x17d)]['COLORS']['IRIS'],'title':_0xadaf4d(0x161),'description':this[_0xadaf4d(0x15e)][_0xadaf4d(0x140)][_0xadaf4d(0x169)](_0x1c0324['guild'][_0xadaf4d(0x155)]['language'],_0xadaf4d(0x163),_0xadaf4d(0x176)),'fields':_0x43d6f0}})[_0xadaf4d(0x165)](()=>{});}}};}};
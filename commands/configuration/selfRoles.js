const a34_0x413b=['selfRolesAdd','language','client','find','return\x20/\x22\x20+\x20this\x20+\x20\x22/','exports','add','Command','premiumSelfRoles','send','ROLE_NOT_FOUND','join','guild','resolveRole','GREEN','Constants','locale','author','getString','selfRoles\x20--add\x20ROLE','selfRolesRemove','get','findByIdAndUpdate','DiscordError','resolver','info','name','selfRoles','countDocuments','membershipLimitSelfRoles','COLORS','channel','catch','roleNotFound','document','push','exec','It\x20allows\x20you\x20to\x20set\x20up\x20Self\x20Roles\x20in\x20the\x20server.\x20Self\x20Roles\x20are\x20the\x20roles\x20which\x20server\x20members\x20can\x20assign\x20(and\x20unassign)\x20to\x20themselves.','roles','PremiumTier','constructor','../../utils/omnic','remove','test','length','PLATINUM','LIMITED_PREMIUM_MEMBERSHIP','default','isPublicBastion','../../models/Role','SELF_ROLES','LIMITS','apply','_id','../../utils/constants','PREMIUM_MEMBERSHIP_REQUIRED','has','tag','user','cache','BASTION_ERROR_TYPE','fetchPremiumTier','IRIS','errors','noSelfRoles','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','GOLD'];(function(_0x3625e0,_0x250ad3){const _0x413b8d=function(_0x761cd){while(--_0x761cd){_0x3625e0['push'](_0x3625e0['shift']());}},_0x1b6ad5=function(){const _0x294028={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0xc1f650,_0x44dadd,_0x251bff,_0x43c75e){_0x43c75e=_0x43c75e||{};let _0x466c2d=_0x44dadd+'='+_0x251bff,_0x275e19=0x0;for(let _0x274f03=0x0,_0x14a788=_0xc1f650['length'];_0x274f03<_0x14a788;_0x274f03++){const _0x440e2c=_0xc1f650[_0x274f03];_0x466c2d+=';\x20'+_0x440e2c;const _0x355ec5=_0xc1f650[_0x440e2c];_0xc1f650['push'](_0x355ec5),_0x14a788=_0xc1f650['length'],_0x355ec5!==!![]&&(_0x466c2d+='='+_0x355ec5);}_0x43c75e['cookie']=_0x466c2d;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4bac0a,_0x45d457){_0x4bac0a=_0x4bac0a||function(_0x19bcbd){return _0x19bcbd;};const _0x260c36=_0x4bac0a(new RegExp('(?:^|;\x20)'+_0x45d457['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x5a5e81=function(_0x31df71,_0x27af07){_0x31df71(++_0x27af07);};return _0x5a5e81(_0x413b8d,_0x250ad3),_0x260c36?decodeURIComponent(_0x260c36[0x1]):undefined;}},_0x205648=function(){const _0x492118=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x492118['test'](_0x294028['removeCookie']['toString']());};_0x294028['updateCookie']=_0x205648;let _0x27c48c='';const _0x1a4a36=_0x294028['updateCookie']();if(!_0x1a4a36)_0x294028['setCookie'](['*'],'counter',0x1);else _0x1a4a36?_0x27c48c=_0x294028['getCookie'](null,'counter'):_0x294028['removeCookie']();};_0x1b6ad5();}(a34_0x413b,0x106));const a34_0x1b6a=function(_0x3625e0,_0x250ad3){_0x3625e0=_0x3625e0-0x1f1;let _0x413b8d=a34_0x413b[_0x3625e0];return _0x413b8d;};const a34_0x2bacba=a34_0x1b6a,a34_0x205648=function(){let _0x1a4a36=!![];return function(_0xc1f650,_0x44dadd){const _0x251bff=_0x1a4a36?function(){const _0xd60816=a34_0x1b6a;if(_0x44dadd){const _0x43c75e=_0x44dadd[_0xd60816(0x22b)](_0xc1f650,arguments);return _0x44dadd=null,_0x43c75e;}}:function(){};return _0x1a4a36=![],_0x251bff;};}(),a34_0x294028=a34_0x205648(this,function(){const _0x466c2d=function(){const _0x176471=a34_0x1b6a,_0x275e19=_0x466c2d['constructor'](_0x176471(0x1fb))()[_0x176471(0x21f)](_0x176471(0x1f5));return!_0x275e19[_0x176471(0x222)](a34_0x294028);};return _0x466c2d();});a34_0x294028();'use strict';const tesseract_1=require('@bastion/tesseract'),Role_1=require(a34_0x2bacba(0x228)),constants=require(a34_0x2bacba(0x22d)),errors=require('../../utils/errors'),omnic=require(a34_0x2bacba(0x220));module[a34_0x2bacba(0x1fc)]=class SelfRoles extends tesseract_1[a34_0x2bacba(0x1fe)]{constructor(){const _0x4355dc=a34_0x2bacba;super(_0x4355dc(0x212),{'description':_0x4355dc(0x21c),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'array':[_0x4355dc(0x1fd),_0x4355dc(0x221)],'string':[_0x4355dc(0x1fd),'remove']},'scope':_0x4355dc(0x203),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':['MANAGE_ROLES'],'userPermissions':['MANAGE_ROLES'],'syntax':[_0x4355dc(0x212),_0x4355dc(0x20a),'selfRoles\x20--remove\x20ROLE']}),this[_0x4355dc(0x21b)]=async(_0x274f03,_0x14a788)=>{const _0x103711=_0x4355dc;if(_0x14a788['add']){if(constants[_0x103711(0x227)](this[_0x103711(0x1f9)][_0x103711(0x231)])){const _0x355ec5=await Role_1['default'][_0x103711(0x213)]({'guild':_0x274f03['guild']['id'],'selfAssignable':!![]});if(_0x355ec5>=constants[_0x103711(0x22a)]['SELF_ROLES']){const _0x4bac0a=await omnic[_0x103711(0x1f1)](_0x274f03[_0x103711(0x203)])[_0x103711(0x217)](()=>{});if(_0x4bac0a){if(_0x4bac0a===omnic['PremiumTier'][_0x103711(0x1f6)]&&_0x355ec5>=constants[_0x103711(0x22a)][_0x103711(0x1f6)][_0x103711(0x229)])throw new errors[(_0x103711(0x20e))](errors[_0x103711(0x233)][_0x103711(0x225)],this[_0x103711(0x1f9)][_0x103711(0x207)]['getString'](_0x274f03[_0x103711(0x203)][_0x103711(0x219)][_0x103711(0x1f8)],_0x103711(0x1f3),'membershipLimitSelfRoles',constants[_0x103711(0x22a)][_0x103711(0x1f6)][_0x103711(0x229)]));else{if(_0x4bac0a===omnic[_0x103711(0x21e)][_0x103711(0x224)]&&_0x355ec5>=constants['LIMITS'][_0x103711(0x224)][_0x103711(0x229)])throw new errors['DiscordError'](errors[_0x103711(0x233)]['LIMITED_PREMIUM_MEMBERSHIP'],this[_0x103711(0x1f9)][_0x103711(0x207)]['getString'](_0x274f03[_0x103711(0x203)][_0x103711(0x219)][_0x103711(0x1f8)],_0x103711(0x1f3),_0x103711(0x214),constants['LIMITS']['PLATINUM']['SELF_ROLES']));}}else throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][_0x103711(0x22e)],this[_0x103711(0x1f9)]['locale'][_0x103711(0x209)](_0x274f03['guild'][_0x103711(0x219)][_0x103711(0x1f8)],_0x103711(0x1f3),_0x103711(0x1ff),constants[_0x103711(0x22a)]['SELF_ROLES']));}}const _0x440e2c=this[_0x103711(0x1f9)][_0x103711(0x20f)]['resolveRole'](_0x274f03['guild'],_0x14a788[_0x103711(0x1fd)][_0x103711(0x202)]('\x20'));if(!_0x440e2c)throw new errors[(_0x103711(0x20e))](errors[_0x103711(0x233)][_0x103711(0x201)],this[_0x103711(0x1f9)]['locale']['getString'](_0x274f03[_0x103711(0x203)]['document'][_0x103711(0x1f8)],_0x103711(0x1f3),'roleNotFound'));await Role_1[_0x103711(0x226)][_0x103711(0x20d)](_0x440e2c['id'],{'_id':_0x440e2c['id'],'guild':_0x274f03['guild']['id'],'selfAssignable':!![]},{'upsert':!![]}),await _0x274f03[_0x103711(0x216)][_0x103711(0x200)]({'embed':{'color':tesseract_1[_0x103711(0x206)][_0x103711(0x215)][_0x103711(0x205)],'description':this[_0x103711(0x1f9)]['locale'][_0x103711(0x209)](_0x274f03[_0x103711(0x203)][_0x103711(0x219)][_0x103711(0x1f8)],_0x103711(0x210),_0x103711(0x1f7),_0x274f03[_0x103711(0x208)]['tag'],_0x440e2c[_0x103711(0x211)]),'footer':{'text':_0x440e2c['id']}}})[_0x103711(0x217)](()=>{});}else{if(_0x14a788[_0x103711(0x221)]){const _0x45d457=this[_0x103711(0x1f9)][_0x103711(0x20f)][_0x103711(0x204)](_0x274f03[_0x103711(0x203)],_0x14a788['remove']['join']('\x20'));if(!_0x45d457)throw new errors[(_0x103711(0x20e))](errors[_0x103711(0x233)][_0x103711(0x201)],this[_0x103711(0x1f9)][_0x103711(0x207)][_0x103711(0x209)](_0x274f03['guild']['document'][_0x103711(0x1f8)],_0x103711(0x1f3),_0x103711(0x218)));await Role_1[_0x103711(0x226)][_0x103711(0x20d)](_0x45d457['id'],{'$unset':{'selfAssignable':0x1}}),await _0x274f03['channel']['send']({'embed':{'color':tesseract_1[_0x103711(0x206)][_0x103711(0x215)]['RED'],'description':this['client'][_0x103711(0x207)]['getString'](_0x274f03[_0x103711(0x203)]['document'][_0x103711(0x1f8)],'info',_0x103711(0x20b),_0x274f03[_0x103711(0x208)][_0x103711(0x230)],_0x45d457[_0x103711(0x211)]),'footer':{'text':_0x45d457['id']}}})['catch'](()=>{});}else{const _0x260c36=await Role_1[_0x103711(0x226)][_0x103711(0x1fa)]({'guild':_0x274f03[_0x103711(0x203)]['id'],'selfAssignable':!![]});if(!_0x260c36[_0x103711(0x223)])throw new Error(this[_0x103711(0x1f9)][_0x103711(0x207)][_0x103711(0x209)](_0x274f03[_0x103711(0x203)]['document']['language'],_0x103711(0x1f3),_0x103711(0x1f4)));const _0x5a5e81=[];for(const _0x19bcbd of _0x260c36){!_0x274f03[_0x103711(0x203)][_0x103711(0x21d)][_0x103711(0x232)][_0x103711(0x22f)](_0x19bcbd['_id'])&&await _0x19bcbd[_0x103711(0x221)]()['catch'](()=>{}),_0x5a5e81[_0x103711(0x21a)]({'name':_0x274f03['guild'][_0x103711(0x21d)][_0x103711(0x232)][_0x103711(0x20c)](_0x19bcbd['_id'])[_0x103711(0x211)]||'-','value':_0x19bcbd[_0x103711(0x22c)]});}await _0x274f03[_0x103711(0x216)]['send']({'embed':{'color':tesseract_1[_0x103711(0x206)][_0x103711(0x215)][_0x103711(0x1f2)],'title':'Self\x20Roles','description':this['client']['locale'][_0x103711(0x209)](_0x274f03['guild']['document'][_0x103711(0x1f8)],_0x103711(0x210),'selfRolesList'),'fields':_0x5a5e81}})[_0x103711(0x217)](()=>{});}}};}};
const a32_0x2981=['has','It\x20allows\x20you\x20to\x20set\x20up\x20Self\x20Roles\x20in\x20the\x20server.\x20Self\x20Roles\x20are\x20the\x20roles\x20which\x20server\x20members\x20can\x20assign\x20(and\x20unassign)\x20to\x20themselves.','remove','Command','info','_id','default','catch','@bastion/tesseract','find','apply','COLORS','countDocuments','get','errors','isPublicBastion','getString','join','LIMITS','author','PLATINUM','roles','resolveRole','channel','return\x20/\x22\x20+\x20this\x20+\x20\x22/','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','length','guild','DiscordError','RED','../../utils/constants','findByIdAndUpdate','selfRoles\x20--add\x20ROLE','ROLE_NOT_FOUND','GOLD','resolver','LIMITED_PREMIUM_MEMBERSHIP','MANAGE_ROLES','../../utils/errors','membershipLimitSelfRoles','name','noSelfRoles','cache','tag','GREEN','selfRolesRemove','client','premiumSelfRoles','test','document','send','constructor','selfRoles','SELF_ROLES','language','PremiumTier','IRIS','BASTION_ERROR_TYPE','Constants','selfRoles\x20--remove\x20ROLE','exports','locale','selfRolesList','add','selfRolesAdd'];(function(_0x45ca70,_0x29810f){const _0x5a76e6=function(_0x4e9d54){while(--_0x4e9d54){_0x45ca70['push'](_0x45ca70['shift']());}},_0x10be32=function(){const _0x427212={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3e45fb,_0x1ae0d1,_0x4bb0d3,_0x19a466){_0x19a466=_0x19a466||{};let _0x193976=_0x1ae0d1+'='+_0x4bb0d3,_0x18ac11=0x0;for(let _0x395887=0x0,_0x1cd4f0=_0x3e45fb['length'];_0x395887<_0x1cd4f0;_0x395887++){const _0x149f38=_0x3e45fb[_0x395887];_0x193976+=';\x20'+_0x149f38;const _0x3b7c37=_0x3e45fb[_0x149f38];_0x3e45fb['push'](_0x3b7c37),_0x1cd4f0=_0x3e45fb['length'],_0x3b7c37!==!![]&&(_0x193976+='='+_0x3b7c37);}_0x19a466['cookie']=_0x193976;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3a79f2,_0x5de682){_0x3a79f2=_0x3a79f2||function(_0x5513dd){return _0x5513dd;};const _0x3e0b33=_0x3a79f2(new RegExp('(?:^|;\x20)'+_0x5de682['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x4aa39b=function(_0x36b7ce,_0x127dce){_0x36b7ce(++_0x127dce);};return _0x4aa39b(_0x5a76e6,_0x29810f),_0x3e0b33?decodeURIComponent(_0x3e0b33[0x1]):undefined;}},_0x4bce29=function(){const _0x16365d=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x16365d['test'](_0x427212['removeCookie']['toString']());};_0x427212['updateCookie']=_0x4bce29;let _0x4f30a0='';const _0x17463b=_0x427212['updateCookie']();if(!_0x17463b)_0x427212['setCookie'](['*'],'counter',0x1);else _0x17463b?_0x4f30a0=_0x427212['getCookie'](null,'counter'):_0x427212['removeCookie']();};_0x10be32();}(a32_0x2981,0x189));const a32_0x5a76=function(_0x45ca70,_0x29810f){_0x45ca70=_0x45ca70-0x0;let _0x5a76e6=a32_0x2981[_0x45ca70];return _0x5a76e6;};const a32_0x4bb0d3=function(){let _0x13eb6d=!![];return function(_0x191046,_0x46d058){const _0x5d4459=_0x13eb6d?function(){if(_0x46d058){const _0x2fed2e=_0x46d058[a32_0x5a76('0x7')](_0x191046,arguments);return _0x46d058=null,_0x2fed2e;}}:function(){};return _0x13eb6d=![],_0x5d4459;};}(),a32_0x1ae0d1=a32_0x4bb0d3(this,function(){const _0x26f76b=function(){const _0x2c65e9=_0x26f76b[a32_0x5a76('0x30')](a32_0x5a76('0x15'))()[a32_0x5a76('0x30')](a32_0x5a76('0x16'));return!_0x2c65e9[a32_0x5a76('0x2d')](a32_0x1ae0d1);};return _0x26f76b();});a32_0x1ae0d1();'use strict';const tesseract_1=require(a32_0x5a76('0x5')),Role_1=require('../../models/Role'),constants=require(a32_0x5a76('0x1b')),errors=require(a32_0x5a76('0x23')),omnic=require('../../utils/omnic');module[a32_0x5a76('0x39')]=class SelfRoles extends tesseract_1[a32_0x5a76('0x0')]{constructor(){super(a32_0x5a76('0x31'),{'description':a32_0x5a76('0x3f'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'array':[a32_0x5a76('0x3c'),'remove'],'string':['add','remove']},'scope':a32_0x5a76('0x18'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':['MANAGE_ROLES'],'userPermissions':[a32_0x5a76('0x22')],'syntax':['selfRoles',a32_0x5a76('0x1d'),a32_0x5a76('0x38')]}),this['exec']=async(_0x157f15,_0x1f2e85)=>{if(_0x1f2e85[a32_0x5a76('0x3c')]){if(constants[a32_0x5a76('0xc')](this['client']['user'])){const _0x5b93f2=await Role_1[a32_0x5a76('0x3')][a32_0x5a76('0x9')]({'guild':_0x157f15[a32_0x5a76('0x18')]['id'],'selfAssignable':!![]});if(_0x5b93f2>=constants[a32_0x5a76('0xf')][a32_0x5a76('0x32')]){const _0x5c20c4=await omnic['fetchPremiumTier'](_0x157f15['guild'])['catch'](()=>{});if(_0x5c20c4){if(_0x5c20c4===omnic[a32_0x5a76('0x34')]['GOLD']&&_0x5b93f2>=constants[a32_0x5a76('0xf')][a32_0x5a76('0x1f')][a32_0x5a76('0x32')])throw new errors[(a32_0x5a76('0x19'))](errors[a32_0x5a76('0x36')][a32_0x5a76('0x21')],this[a32_0x5a76('0x2b')][a32_0x5a76('0x3a')][a32_0x5a76('0xd')](_0x157f15['guild'][a32_0x5a76('0x2e')][a32_0x5a76('0x33')],'errors',a32_0x5a76('0x24'),constants['LIMITS'][a32_0x5a76('0x1f')]['SELF_ROLES']));else{if(_0x5c20c4===omnic['PremiumTier'][a32_0x5a76('0x11')]&&_0x5b93f2>=constants['LIMITS'][a32_0x5a76('0x11')]['SELF_ROLES'])throw new errors[(a32_0x5a76('0x19'))](errors[a32_0x5a76('0x36')]['LIMITED_PREMIUM_MEMBERSHIP'],this['client'][a32_0x5a76('0x3a')][a32_0x5a76('0xd')](_0x157f15['guild'][a32_0x5a76('0x2e')][a32_0x5a76('0x33')],a32_0x5a76('0xb'),a32_0x5a76('0x24'),constants[a32_0x5a76('0xf')][a32_0x5a76('0x11')][a32_0x5a76('0x32')]));}}else throw new errors[(a32_0x5a76('0x19'))](errors[a32_0x5a76('0x36')]['PREMIUM_MEMBERSHIP_REQUIRED'],this[a32_0x5a76('0x2b')][a32_0x5a76('0x3a')][a32_0x5a76('0xd')](_0x157f15[a32_0x5a76('0x18')][a32_0x5a76('0x2e')]['language'],a32_0x5a76('0xb'),a32_0x5a76('0x2c'),constants[a32_0x5a76('0xf')][a32_0x5a76('0x32')]));}}const _0x13df5d=this[a32_0x5a76('0x2b')][a32_0x5a76('0x20')][a32_0x5a76('0x13')](_0x157f15[a32_0x5a76('0x18')],_0x1f2e85[a32_0x5a76('0x3c')][a32_0x5a76('0xe')]('\x20'));if(!_0x13df5d)throw new errors[(a32_0x5a76('0x19'))](errors[a32_0x5a76('0x36')][a32_0x5a76('0x1e')],this[a32_0x5a76('0x2b')]['locale'][a32_0x5a76('0xd')](_0x157f15['guild']['document']['language'],a32_0x5a76('0xb'),'roleNotFound'));await Role_1[a32_0x5a76('0x3')][a32_0x5a76('0x1c')](_0x13df5d['id'],{'_id':_0x13df5d['id'],'guild':_0x157f15['guild']['id'],'selfAssignable':!![]},{'upsert':!![]}),await _0x157f15[a32_0x5a76('0x14')][a32_0x5a76('0x2f')]({'embed':{'color':tesseract_1[a32_0x5a76('0x37')][a32_0x5a76('0x8')][a32_0x5a76('0x29')],'description':this[a32_0x5a76('0x2b')][a32_0x5a76('0x3a')][a32_0x5a76('0xd')](_0x157f15[a32_0x5a76('0x18')][a32_0x5a76('0x2e')][a32_0x5a76('0x33')],a32_0x5a76('0x1'),a32_0x5a76('0x3d'),_0x157f15[a32_0x5a76('0x10')]['tag'],_0x13df5d[a32_0x5a76('0x25')]),'footer':{'text':_0x13df5d['id']}}})['catch'](()=>{});}else{if(_0x1f2e85[a32_0x5a76('0x40')]){const _0x36b582=this['client'][a32_0x5a76('0x20')][a32_0x5a76('0x13')](_0x157f15[a32_0x5a76('0x18')],_0x1f2e85[a32_0x5a76('0x40')][a32_0x5a76('0xe')]('\x20'));if(!_0x36b582)throw new errors[(a32_0x5a76('0x19'))](errors[a32_0x5a76('0x36')]['ROLE_NOT_FOUND'],this[a32_0x5a76('0x2b')]['locale']['getString'](_0x157f15[a32_0x5a76('0x18')][a32_0x5a76('0x2e')]['language'],a32_0x5a76('0xb'),'roleNotFound'));await Role_1['default'][a32_0x5a76('0x1c')](_0x36b582['id'],{'$unset':{'selfAssignable':0x1}}),await _0x157f15[a32_0x5a76('0x14')][a32_0x5a76('0x2f')]({'embed':{'color':tesseract_1[a32_0x5a76('0x37')][a32_0x5a76('0x8')][a32_0x5a76('0x1a')],'description':this['client'][a32_0x5a76('0x3a')][a32_0x5a76('0xd')](_0x157f15[a32_0x5a76('0x18')]['document'][a32_0x5a76('0x33')],a32_0x5a76('0x1'),a32_0x5a76('0x2a'),_0x157f15[a32_0x5a76('0x10')][a32_0x5a76('0x28')],_0x36b582[a32_0x5a76('0x25')]),'footer':{'text':_0x36b582['id']}}})['catch'](()=>{});}else{const _0x31a079=await Role_1[a32_0x5a76('0x3')][a32_0x5a76('0x6')]({'guild':_0x157f15[a32_0x5a76('0x18')]['id'],'selfAssignable':!![]});if(!_0x31a079[a32_0x5a76('0x17')])throw new Error(this[a32_0x5a76('0x2b')][a32_0x5a76('0x3a')]['getString'](_0x157f15[a32_0x5a76('0x18')][a32_0x5a76('0x2e')][a32_0x5a76('0x33')],'errors',a32_0x5a76('0x26')));const _0x189efd=[];for(const _0x402ea3 of _0x31a079){!_0x157f15[a32_0x5a76('0x18')]['roles'][a32_0x5a76('0x27')][a32_0x5a76('0x3e')](_0x402ea3[a32_0x5a76('0x2')])&&await _0x402ea3['remove']()[a32_0x5a76('0x4')](()=>{}),_0x189efd['push']({'name':_0x157f15['guild'][a32_0x5a76('0x12')]['cache'][a32_0x5a76('0xa')](_0x402ea3[a32_0x5a76('0x2')])[a32_0x5a76('0x25')]||'-','value':_0x402ea3[a32_0x5a76('0x2')]});}await _0x157f15[a32_0x5a76('0x14')][a32_0x5a76('0x2f')]({'embed':{'color':tesseract_1['Constants'][a32_0x5a76('0x8')][a32_0x5a76('0x35')],'title':'Self\x20Roles','description':this['client']['locale'][a32_0x5a76('0xd')](_0x157f15[a32_0x5a76('0x18')][a32_0x5a76('0x2e')][a32_0x5a76('0x33')],a32_0x5a76('0x1'),a32_0x5a76('0x3b')),'fields':_0x189efd}})[a32_0x5a76('0x4')](()=>{});}}};}};
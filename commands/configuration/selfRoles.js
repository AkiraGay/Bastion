const a32_0x2d03=['channel','document','RED','ROLE_NOT_FOUND','getString','MANAGE_ROLES','@bastion/tesseract','fetchPremiumTier','apply','length','GOLD','tag','find','add','It\x20allows\x20you\x20to\x20set\x20up\x20Self\x20Roles\x20in\x20the\x20server.\x20Self\x20Roles\x20are\x20the\x20roles\x20which\x20server\x20members\x20can\x20assign\x20(and\x20unassign)\x20to\x20themselves.','countDocuments','locale','BASTION_ERROR_TYPE','info','Self\x20Roles','has','../../models/Role','COLORS','resolveRole','LIMITED_PREMIUM_MEMBERSHIP','../../utils/omnic','selfRolesRemove','Command','resolver','PLATINUM','noSelfRoles','premiumSelfRoles','roleNotFound','send','catch','get','PREMIUM_MEMBERSHIP_REQUIRED','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','selfRoles','selfRolesList','errors','author','push','join','SELF_ROLES','GREEN','client','remove','LIMITS','exports','roles','return\x20/\x22\x20+\x20this\x20+\x20\x22/','PremiumTier','default','compile','language','name','Constants','selfRoles\x20--remove\x20ROLE','DiscordError','selfRolesAdd','test','constructor','_id','guild'];(function(_0x30506b,_0x2d0323){const _0x1e67d0=function(_0x362792){while(--_0x362792){_0x30506b['push'](_0x30506b['shift']());}};const _0x2c7607=function(){const _0x85527a={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x361f22,_0x2bd1f9,_0x35d1bc,_0x45daac){_0x45daac=_0x45daac||{};let _0x43720a=_0x2bd1f9+'='+_0x35d1bc;let _0x20eaaf=0x0;for(let _0x552115=0x0,_0x5248aa=_0x361f22['length'];_0x552115<_0x5248aa;_0x552115++){const _0x215a1a=_0x361f22[_0x552115];_0x43720a+=';\x20'+_0x215a1a;const _0x1fef07=_0x361f22[_0x215a1a];_0x361f22['push'](_0x1fef07);_0x5248aa=_0x361f22['length'];if(_0x1fef07!==!![]){_0x43720a+='='+_0x1fef07;}}_0x45daac['cookie']=_0x43720a;},'removeCookie':function(){return'dev';},'getCookie':function(_0x32ce48,_0x1d5aaf){_0x32ce48=_0x32ce48||function(_0x2a3666){return _0x2a3666;};const _0x2b7bdb=_0x32ce48(new RegExp('(?:^|;\x20)'+_0x1d5aaf['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x1619ff=function(_0x369f82,_0xb9e022){_0x369f82(++_0xb9e022);};_0x1619ff(_0x1e67d0,_0x2d0323);return _0x2b7bdb?decodeURIComponent(_0x2b7bdb[0x1]):undefined;}};const _0x79ccfa=function(){const _0x57ba04=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x57ba04['test'](_0x85527a['removeCookie']['toString']());};_0x85527a['updateCookie']=_0x79ccfa;let _0x68e98='';const _0x26a792=_0x85527a['updateCookie']();if(!_0x26a792){_0x85527a['setCookie'](['*'],'counter',0x1);}else if(_0x26a792){_0x68e98=_0x85527a['getCookie'](null,'counter');}else{_0x85527a['removeCookie']();}};_0x2c7607();}(a32_0x2d03,0x12f));const a32_0x1e67=function(_0x30506b,_0x2d0323){_0x30506b=_0x30506b-0x0;let _0x1e67d0=a32_0x2d03[_0x30506b];return _0x1e67d0;};const a32_0x85527a=function(){let _0x26d884=!![];return function(_0x7bcdd7,_0x4a1cc1){const _0x4b036e=_0x26d884?function(){if(_0x4a1cc1){const _0x14094e=_0x4a1cc1[a32_0x1e67('0x1e')](_0x7bcdd7,arguments);_0x4a1cc1=null;return _0x14094e;}}:function(){};_0x26d884=![];return _0x4b036e;};}();const a32_0x362792=a32_0x85527a(this,function(){const _0x4bbbc0=function(){const _0x1e2d77=_0x4bbbc0[a32_0x1e67('0x13')](a32_0x1e67('0x8'))()[a32_0x1e67('0xb')](a32_0x1e67('0x3b'));return!_0x1e2d77[a32_0x1e67('0x12')](a32_0x362792);};return _0x4bbbc0();});a32_0x362792();'use strict';const tesseract_1=require(a32_0x1e67('0x1c'));const Role_1=require(a32_0x1e67('0x2b'));const constants=require('../../utils/constants');const errors=require('../../utils/errors');const omnic=require(a32_0x1e67('0x2f'));module[a32_0x1e67('0x6')]=class SelfRoles extends tesseract_1[a32_0x1e67('0x31')]{constructor(){super(a32_0x1e67('0x3c'),{'description':a32_0x1e67('0x24'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'array':[a32_0x1e67('0x23'),a32_0x1e67('0x4')],'string':[a32_0x1e67('0x23'),a32_0x1e67('0x4')]},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a32_0x1e67('0x1b')],'userPermissions':[a32_0x1e67('0x1b')],'syntax':[a32_0x1e67('0x3c'),'selfRoles\x20--add\x20ROLE',a32_0x1e67('0xf')]});this['exec']=async(_0x4a868c,_0x14e2a7)=>{if(_0x14e2a7[a32_0x1e67('0x23')]){if(constants['isPublicBastion'](this[a32_0x1e67('0x3')]['user'])){const _0xf4e1d8=await Role_1[a32_0x1e67('0xa')][a32_0x1e67('0x25')]({'guild':_0x4a868c['guild']['id'],'selfAssignable':!![]});if(_0xf4e1d8>=constants[a32_0x1e67('0x5')][a32_0x1e67('0x1')]){const _0x4b6465=await omnic[a32_0x1e67('0x1d')](_0x4a868c['guild'])['catch'](()=>{});if(_0x4b6465){if(_0x4b6465===omnic[a32_0x1e67('0x9')][a32_0x1e67('0x20')]&&_0xf4e1d8>=constants['LIMITS'][a32_0x1e67('0x20')][a32_0x1e67('0x1')]){throw new errors[(a32_0x1e67('0x10'))](errors[a32_0x1e67('0x27')][a32_0x1e67('0x2e')],this['client'][a32_0x1e67('0x26')][a32_0x1e67('0x1a')](_0x4a868c['guild']['document'][a32_0x1e67('0xc')],'errors','membershipLimitSelfRoles',constants[a32_0x1e67('0x5')][a32_0x1e67('0x20')]['SELF_ROLES']));}else if(_0x4b6465===omnic[a32_0x1e67('0x9')]['PLATINUM']&&_0xf4e1d8>=constants[a32_0x1e67('0x5')][a32_0x1e67('0x33')]['SELF_ROLES']){throw new errors[(a32_0x1e67('0x10'))](errors['BASTION_ERROR_TYPE'][a32_0x1e67('0x2e')],this[a32_0x1e67('0x3')][a32_0x1e67('0x26')]['getString'](_0x4a868c[a32_0x1e67('0x15')][a32_0x1e67('0x17')][a32_0x1e67('0xc')],a32_0x1e67('0x3e'),'membershipLimitSelfRoles',constants['LIMITS']['PLATINUM'][a32_0x1e67('0x1')]));}}else{throw new errors[(a32_0x1e67('0x10'))](errors['BASTION_ERROR_TYPE'][a32_0x1e67('0x3a')],this[a32_0x1e67('0x3')][a32_0x1e67('0x26')][a32_0x1e67('0x1a')](_0x4a868c[a32_0x1e67('0x15')]['document'][a32_0x1e67('0xc')],a32_0x1e67('0x3e'),a32_0x1e67('0x35'),constants['LIMITS'][a32_0x1e67('0x1')]));}}}const _0x58eb79=this[a32_0x1e67('0x3')][a32_0x1e67('0x32')][a32_0x1e67('0x2d')](_0x4a868c[a32_0x1e67('0x15')],_0x14e2a7[a32_0x1e67('0x23')]['join']('\x20'));if(!_0x58eb79)throw new errors[(a32_0x1e67('0x10'))](errors[a32_0x1e67('0x27')][a32_0x1e67('0x19')],this[a32_0x1e67('0x3')]['locale'][a32_0x1e67('0x1a')](_0x4a868c[a32_0x1e67('0x15')][a32_0x1e67('0x17')][a32_0x1e67('0xc')],'errors','roleNotFound'));await Role_1[a32_0x1e67('0xa')]['findByIdAndUpdate'](_0x58eb79['id'],{'_id':_0x58eb79['id'],'guild':_0x4a868c[a32_0x1e67('0x15')]['id'],'selfAssignable':!![]},{'upsert':!![]});await _0x4a868c[a32_0x1e67('0x16')][a32_0x1e67('0x37')]({'embed':{'color':tesseract_1[a32_0x1e67('0xe')][a32_0x1e67('0x2c')][a32_0x1e67('0x2')],'description':this[a32_0x1e67('0x3')]['locale'][a32_0x1e67('0x1a')](_0x4a868c[a32_0x1e67('0x15')]['document'][a32_0x1e67('0xc')],'info',a32_0x1e67('0x11'),_0x4a868c[a32_0x1e67('0x3f')][a32_0x1e67('0x21')],_0x58eb79['name']),'footer':{'text':_0x58eb79['id']}}})[a32_0x1e67('0x38')](()=>{});}else if(_0x14e2a7[a32_0x1e67('0x4')]){const _0x122d8f=this[a32_0x1e67('0x3')][a32_0x1e67('0x32')][a32_0x1e67('0x2d')](_0x4a868c['guild'],_0x14e2a7[a32_0x1e67('0x4')][a32_0x1e67('0x0')]('\x20'));if(!_0x122d8f)throw new errors['DiscordError'](errors[a32_0x1e67('0x27')]['ROLE_NOT_FOUND'],this[a32_0x1e67('0x3')]['locale'][a32_0x1e67('0x1a')](_0x4a868c['guild'][a32_0x1e67('0x17')][a32_0x1e67('0xc')],'errors',a32_0x1e67('0x36')));await Role_1[a32_0x1e67('0xa')]['findByIdAndUpdate'](_0x122d8f['id'],{'$unset':{'selfAssignable':0x1}});await _0x4a868c[a32_0x1e67('0x16')][a32_0x1e67('0x37')]({'embed':{'color':tesseract_1['Constants'][a32_0x1e67('0x2c')][a32_0x1e67('0x18')],'description':this[a32_0x1e67('0x3')][a32_0x1e67('0x26')]['getString'](_0x4a868c[a32_0x1e67('0x15')]['document']['language'],a32_0x1e67('0x28'),a32_0x1e67('0x30'),_0x4a868c[a32_0x1e67('0x3f')][a32_0x1e67('0x21')],_0x122d8f[a32_0x1e67('0xd')]),'footer':{'text':_0x122d8f['id']}}})[a32_0x1e67('0x38')](()=>{});}else{const _0x211e77=await Role_1[a32_0x1e67('0xa')][a32_0x1e67('0x22')]({'guild':_0x4a868c[a32_0x1e67('0x15')]['id'],'selfAssignable':!![]});if(!_0x211e77[a32_0x1e67('0x1f')]){throw new Error(this[a32_0x1e67('0x3')][a32_0x1e67('0x26')][a32_0x1e67('0x1a')](_0x4a868c[a32_0x1e67('0x15')][a32_0x1e67('0x17')][a32_0x1e67('0xc')],a32_0x1e67('0x3e'),a32_0x1e67('0x34')));}const _0x32dafd=[];for(const _0x2481d4 of _0x211e77){if(!_0x4a868c[a32_0x1e67('0x15')][a32_0x1e67('0x7')]['cache'][a32_0x1e67('0x2a')](_0x2481d4['_id'])){await _0x2481d4[a32_0x1e67('0x4')]()['catch'](()=>{});}_0x32dafd[a32_0x1e67('0x40')]({'name':_0x4a868c[a32_0x1e67('0x15')][a32_0x1e67('0x7')]['cache'][a32_0x1e67('0x39')](_0x2481d4[a32_0x1e67('0x14')])[a32_0x1e67('0xd')]||'-','value':_0x2481d4[a32_0x1e67('0x14')]});}await _0x4a868c['channel']['send']({'embed':{'color':tesseract_1[a32_0x1e67('0xe')]['COLORS']['IRIS'],'title':a32_0x1e67('0x29'),'description':this[a32_0x1e67('0x3')][a32_0x1e67('0x26')][a32_0x1e67('0x1a')](_0x4a868c[a32_0x1e67('0x15')][a32_0x1e67('0x17')][a32_0x1e67('0xc')],'info',a32_0x1e67('0x3d')),'fields':_0x32dafd}})[a32_0x1e67('0x38')](()=>{});}};}};
const a32_0x294e=['document','ROLE_NOT_FOUND','language','find','tag','COLORS','default','membershipLimitSelfRoles','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','isPublicBastion','../../utils/constants','Constants','add','It\x20allows\x20you\x20to\x20set\x20up\x20Self\x20Roles\x20in\x20the\x20server.\x20Self\x20Roles\x20are\x20the\x20roles\x20which\x20server\x20members\x20can\x20assign\x20(and\x20unassign)\x20to\x20themselves.','send','author','constructor','RED','MANAGE_ROLES','findByIdAndUpdate','selfRoles','locale','name','cache','roleNotFound','client','countDocuments','return\x20/\x22\x20+\x20this\x20+\x20\x22/','PremiumTier','test','GREEN','PREMIUM_MEMBERSHIP_REQUIRED','../../utils/errors','DiscordError','exports','channel','BASTION_ERROR_TYPE','catch','@bastion/tesseract','LIMITS','selfRolesAdd','premiumSelfRoles','IRIS','errors','resolver','join','resolveRole','GOLD','remove','has','SELF_ROLES','Command','roles','getString','length','selfRoles\x20--remove\x20ROLE','guild','push','Self\x20Roles','_id','../../utils/omnic','apply'];(function(_0x2cd63d,_0x294ea1){const _0x5c66e3=function(_0x56f40c){while(--_0x56f40c){_0x2cd63d['push'](_0x2cd63d['shift']());}},_0x5cbfb3=function(){const _0x24f8a9={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x39b4f9,_0x4d86ff,_0x4c6804,_0x3d1c8a){_0x3d1c8a=_0x3d1c8a||{};let _0x28cc80=_0x4d86ff+'='+_0x4c6804,_0x1b81be=0x0;for(let _0x5744f0=0x0,_0x57af70=_0x39b4f9['length'];_0x5744f0<_0x57af70;_0x5744f0++){const _0x3ff9ff=_0x39b4f9[_0x5744f0];_0x28cc80+=';\x20'+_0x3ff9ff;const _0x34762e=_0x39b4f9[_0x3ff9ff];_0x39b4f9['push'](_0x34762e),_0x57af70=_0x39b4f9['length'],_0x34762e!==!![]&&(_0x28cc80+='='+_0x34762e);}_0x3d1c8a['cookie']=_0x28cc80;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5897d5,_0x17ba56){_0x5897d5=_0x5897d5||function(_0x3817cf){return _0x3817cf;};const _0x1063b6=_0x5897d5(new RegExp('(?:^|;\x20)'+_0x17ba56['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x10754b=function(_0x784ce4,_0x3c41f3){_0x784ce4(++_0x3c41f3);};return _0x10754b(_0x5c66e3,_0x294ea1),_0x1063b6?decodeURIComponent(_0x1063b6[0x1]):undefined;}},_0x179364=function(){const _0x362efd=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x362efd['test'](_0x24f8a9['removeCookie']['toString']());};_0x24f8a9['updateCookie']=_0x179364;let _0x25be23='';const _0x33ec6f=_0x24f8a9['updateCookie']();if(!_0x33ec6f)_0x24f8a9['setCookie'](['*'],'counter',0x1);else _0x33ec6f?_0x25be23=_0x24f8a9['getCookie'](null,'counter'):_0x24f8a9['removeCookie']();};_0x5cbfb3();}(a32_0x294e,0x120));const a32_0x5c66=function(_0x2cd63d,_0x294ea1){_0x2cd63d=_0x2cd63d-0x0;let _0x5c66e3=a32_0x294e[_0x2cd63d];return _0x5c66e3;};const a32_0x24f8a9=function(){let _0x25be23=!![];return function(_0x33ec6f,_0x39b4f9){const _0x4d86ff=_0x25be23?function(){if(_0x39b4f9){const _0x4c6804=_0x39b4f9[a32_0x5c66('0x15')](_0x33ec6f,arguments);return _0x39b4f9=null,_0x4c6804;}}:function(){};return _0x25be23=![],_0x4d86ff;};}(),a32_0x56f40c=a32_0x24f8a9(this,function(){const _0x3d1c8a=function(){const _0x28cc80=_0x3d1c8a[a32_0x5c66('0x26')](a32_0x5c66('0x31'))()[a32_0x5c66('0x26')](a32_0x5c66('0x1e'));return!_0x28cc80[a32_0x5c66('0x33')](a32_0x56f40c);};return _0x3d1c8a();});a32_0x56f40c();'use strict';const tesseract_1=require(a32_0x5c66('0x3c')),Role_1=require('../../models/Role'),constants=require(a32_0x5c66('0x20')),errors=require(a32_0x5c66('0x36')),omnic=require(a32_0x5c66('0x14'));module[a32_0x5c66('0x38')]=class SelfRoles extends tesseract_1[a32_0x5c66('0xb')]{constructor(){super(a32_0x5c66('0x2a'),{'description':a32_0x5c66('0x23'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'array':[a32_0x5c66('0x22'),a32_0x5c66('0x8')],'string':[a32_0x5c66('0x22'),a32_0x5c66('0x8')]},'scope':a32_0x5c66('0x10'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':['MANAGE_ROLES'],'userPermissions':[a32_0x5c66('0x28')],'syntax':[a32_0x5c66('0x2a'),'selfRoles\x20--add\x20ROLE',a32_0x5c66('0xf')]}),this['exec']=async(_0x1b81be,_0x5744f0)=>{if(_0x5744f0['add']){if(constants[a32_0x5c66('0x1f')](this[a32_0x5c66('0x2f')]['user'])){const _0x3ff9ff=await Role_1[a32_0x5c66('0x1c')][a32_0x5c66('0x30')]({'guild':_0x1b81be['guild']['id'],'selfAssignable':!![]});if(_0x3ff9ff>=constants[a32_0x5c66('0x3d')][a32_0x5c66('0xa')]){const _0x34762e=await omnic['fetchPremiumTier'](_0x1b81be[a32_0x5c66('0x10')])[a32_0x5c66('0x3b')](()=>{});if(_0x34762e){if(_0x34762e===omnic[a32_0x5c66('0x32')]['GOLD']&&_0x3ff9ff>=constants[a32_0x5c66('0x3d')]['GOLD'][a32_0x5c66('0xa')])throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE']['LIMITED_PREMIUM_MEMBERSHIP'],this[a32_0x5c66('0x2f')]['locale'][a32_0x5c66('0xd')](_0x1b81be[a32_0x5c66('0x10')][a32_0x5c66('0x16')][a32_0x5c66('0x18')],a32_0x5c66('0x3'),a32_0x5c66('0x1d'),constants['LIMITS'][a32_0x5c66('0x7')][a32_0x5c66('0xa')]));else{if(_0x34762e===omnic[a32_0x5c66('0x32')]['PLATINUM']&&_0x3ff9ff>=constants[a32_0x5c66('0x3d')]['PLATINUM'][a32_0x5c66('0xa')])throw new errors[(a32_0x5c66('0x37'))](errors['BASTION_ERROR_TYPE']['LIMITED_PREMIUM_MEMBERSHIP'],this[a32_0x5c66('0x2f')][a32_0x5c66('0x2b')]['getString'](_0x1b81be[a32_0x5c66('0x10')][a32_0x5c66('0x16')][a32_0x5c66('0x18')],a32_0x5c66('0x3'),'membershipLimitSelfRoles',constants['LIMITS']['PLATINUM']['SELF_ROLES']));}}else throw new errors[(a32_0x5c66('0x37'))](errors[a32_0x5c66('0x3a')][a32_0x5c66('0x35')],this[a32_0x5c66('0x2f')][a32_0x5c66('0x2b')][a32_0x5c66('0xd')](_0x1b81be[a32_0x5c66('0x10')][a32_0x5c66('0x16')][a32_0x5c66('0x18')],a32_0x5c66('0x3'),a32_0x5c66('0x1'),constants['LIMITS']['SELF_ROLES']));}}const _0x57af70=this[a32_0x5c66('0x2f')]['resolver'][a32_0x5c66('0x6')](_0x1b81be[a32_0x5c66('0x10')],_0x5744f0['add'][a32_0x5c66('0x5')]('\x20'));if(!_0x57af70)throw new errors['DiscordError'](errors[a32_0x5c66('0x3a')]['ROLE_NOT_FOUND'],this[a32_0x5c66('0x2f')][a32_0x5c66('0x2b')][a32_0x5c66('0xd')](_0x1b81be['guild'][a32_0x5c66('0x16')][a32_0x5c66('0x18')],'errors',a32_0x5c66('0x2e')));await Role_1[a32_0x5c66('0x1c')][a32_0x5c66('0x29')](_0x57af70['id'],{'_id':_0x57af70['id'],'guild':_0x1b81be[a32_0x5c66('0x10')]['id'],'selfAssignable':!![]},{'upsert':!![]}),await _0x1b81be[a32_0x5c66('0x39')]['send']({'embed':{'color':tesseract_1[a32_0x5c66('0x21')][a32_0x5c66('0x1b')][a32_0x5c66('0x34')],'description':this['client'][a32_0x5c66('0x2b')][a32_0x5c66('0xd')](_0x1b81be[a32_0x5c66('0x10')][a32_0x5c66('0x16')][a32_0x5c66('0x18')],'info',a32_0x5c66('0x0'),_0x1b81be[a32_0x5c66('0x25')][a32_0x5c66('0x1a')],_0x57af70[a32_0x5c66('0x2c')]),'footer':{'text':_0x57af70['id']}}})[a32_0x5c66('0x3b')](()=>{});}else{if(_0x5744f0[a32_0x5c66('0x8')]){const _0x5897d5=this[a32_0x5c66('0x2f')][a32_0x5c66('0x4')]['resolveRole'](_0x1b81be[a32_0x5c66('0x10')],_0x5744f0[a32_0x5c66('0x8')][a32_0x5c66('0x5')]('\x20'));if(!_0x5897d5)throw new errors[(a32_0x5c66('0x37'))](errors[a32_0x5c66('0x3a')][a32_0x5c66('0x17')],this['client'][a32_0x5c66('0x2b')][a32_0x5c66('0xd')](_0x1b81be[a32_0x5c66('0x10')][a32_0x5c66('0x16')][a32_0x5c66('0x18')],a32_0x5c66('0x3'),a32_0x5c66('0x2e')));await Role_1[a32_0x5c66('0x1c')][a32_0x5c66('0x29')](_0x5897d5['id'],{'$unset':{'selfAssignable':0x1}}),await _0x1b81be['channel'][a32_0x5c66('0x24')]({'embed':{'color':tesseract_1[a32_0x5c66('0x21')]['COLORS'][a32_0x5c66('0x27')],'description':this[a32_0x5c66('0x2f')]['locale'][a32_0x5c66('0xd')](_0x1b81be[a32_0x5c66('0x10')][a32_0x5c66('0x16')][a32_0x5c66('0x18')],'info','selfRolesRemove',_0x1b81be[a32_0x5c66('0x25')]['tag'],_0x5897d5['name']),'footer':{'text':_0x5897d5['id']}}})['catch'](()=>{});}else{const _0x17ba56=await Role_1['default'][a32_0x5c66('0x19')]({'guild':_0x1b81be[a32_0x5c66('0x10')]['id'],'selfAssignable':!![]});if(!_0x17ba56[a32_0x5c66('0xe')])throw new Error(this[a32_0x5c66('0x2f')][a32_0x5c66('0x2b')][a32_0x5c66('0xd')](_0x1b81be[a32_0x5c66('0x10')][a32_0x5c66('0x16')][a32_0x5c66('0x18')],a32_0x5c66('0x3'),'noSelfRoles'));const _0x1063b6=[];for(const _0x10754b of _0x17ba56){!_0x1b81be[a32_0x5c66('0x10')][a32_0x5c66('0xc')]['cache'][a32_0x5c66('0x9')](_0x10754b[a32_0x5c66('0x13')])&&await _0x10754b[a32_0x5c66('0x8')]()[a32_0x5c66('0x3b')](()=>{}),_0x1063b6[a32_0x5c66('0x11')]({'name':_0x1b81be['guild'][a32_0x5c66('0xc')][a32_0x5c66('0x2d')]['get'](_0x10754b[a32_0x5c66('0x13')])['name']||'-','value':_0x10754b['_id']});}await _0x1b81be['channel'][a32_0x5c66('0x24')]({'embed':{'color':tesseract_1['Constants'][a32_0x5c66('0x1b')][a32_0x5c66('0x2')],'title':a32_0x5c66('0x12'),'description':this[a32_0x5c66('0x2f')][a32_0x5c66('0x2b')][a32_0x5c66('0xd')](_0x1b81be[a32_0x5c66('0x10')]['document'][a32_0x5c66('0x18')],'info','selfRolesList'),'fields':_0x1063b6}})[a32_0x5c66('0x3b')](()=>{});}}};}};
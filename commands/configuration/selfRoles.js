const a34_0x46a2=['IRIS','LIMITED_PREMIUM_MEMBERSHIP','selfRolesRemove','membershipLimitSelfRoles','client','fetchPremiumTier','Command','DiscordError','user','join','default','document','push','findByIdAndUpdate','PREMIUM_MEMBERSHIP_REQUIRED','COLORS','send','resolveRole','MANAGE_ROLES','test','selfRoles\x20--add\x20ROLE','Constants','remove','roles','selfRolesList','../../utils/omnic','info','GREEN','length','constructor','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','apply','@bastion/tesseract','PremiumTier','../../utils/constants','roleNotFound','return\x20/\x22\x20+\x20this\x20+\x20\x22/','LIMITS','selfRoles','locale','name','errors','../../utils/errors','_id','RED','author','GOLD','BASTION_ERROR_TYPE','exec','cache','add','ROLE_NOT_FOUND','language','exports','Self\x20Roles','selfRoles\x20--remove\x20ROLE','PLATINUM','guild','catch','channel','resolver','get','SELF_ROLES','has','getString','tag'];(function(_0x6f0c76,_0x4f0cc1){const _0x46a274=function(_0x127e14){while(--_0x127e14){_0x6f0c76['push'](_0x6f0c76['shift']());}},_0x6f06e8=function(){const _0x403af7={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x1f1af5,_0x28e6e7,_0x50e23f,_0x52c1ac){_0x52c1ac=_0x52c1ac||{};let _0x9441be=_0x28e6e7+'='+_0x50e23f,_0x28796d=0x0;for(let _0x3f05c5=0x0,_0x5bea6b=_0x1f1af5['length'];_0x3f05c5<_0x5bea6b;_0x3f05c5++){const _0x14d272=_0x1f1af5[_0x3f05c5];_0x9441be+=';\x20'+_0x14d272;const _0xff6496=_0x1f1af5[_0x14d272];_0x1f1af5['push'](_0xff6496),_0x5bea6b=_0x1f1af5['length'],_0xff6496!==!![]&&(_0x9441be+='='+_0xff6496);}_0x52c1ac['cookie']=_0x9441be;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5a6be6,_0x3ae140){_0x5a6be6=_0x5a6be6||function(_0x4edaf4){return _0x4edaf4;};const _0x37b978=_0x5a6be6(new RegExp('(?:^|;\x20)'+_0x3ae140['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x23362a=function(_0x2ca713,_0xe5db7e){_0x2ca713(++_0xe5db7e);};return _0x23362a(_0x46a274,_0x4f0cc1),_0x37b978?decodeURIComponent(_0x37b978[0x1]):undefined;}},_0x652652=function(){const _0x53f2a4=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x53f2a4['test'](_0x403af7['removeCookie']['toString']());};_0x403af7['updateCookie']=_0x652652;let _0x512465='';const _0x3b25f0=_0x403af7['updateCookie']();if(!_0x3b25f0)_0x403af7['setCookie'](['*'],'counter',0x1);else _0x3b25f0?_0x512465=_0x403af7['getCookie'](null,'counter'):_0x403af7['removeCookie']();};_0x6f06e8();}(a34_0x46a2,0x162));const a34_0x6f06=function(_0x6f0c76,_0x4f0cc1){_0x6f0c76=_0x6f0c76-0x1a3;let _0x46a274=a34_0x46a2[_0x6f0c76];return _0x46a274;};const _0x4b15d6=a34_0x6f06,a34_0x652652=function(){let _0x3b25f0=!![];return function(_0x1f1af5,_0x28e6e7){const _0x50e23f=_0x3b25f0?function(){const _0x2b0779=a34_0x6f06;if(_0x28e6e7){const _0x52c1ac=_0x28e6e7[_0x2b0779(0x1aa)](_0x1f1af5,arguments);return _0x28e6e7=null,_0x52c1ac;}}:function(){};return _0x3b25f0=![],_0x50e23f;};}(),a34_0x403af7=a34_0x652652(this,function(){const _0x9441be=function(){const _0x4582e3=a34_0x6f06,_0x28796d=_0x9441be['constructor'](_0x4582e3(0x1af))()[_0x4582e3(0x1a8)](_0x4582e3(0x1a9));return!_0x28796d[_0x4582e3(0x1e0)](a34_0x403af7);};return _0x9441be();});a34_0x403af7();'use strict';const tesseract_1=require(_0x4b15d6(0x1ab)),Role_1=require('../../models/Role'),constants=require(_0x4b15d6(0x1ad)),errors=require(_0x4b15d6(0x1b5)),omnic=require(_0x4b15d6(0x1a4));module[_0x4b15d6(0x1c0)]=class SelfRoles extends tesseract_1[_0x4b15d6(0x1d3)]{constructor(){const _0x212a49=_0x4b15d6;super(_0x212a49(0x1b1),{'description':'It\x20allows\x20you\x20to\x20set\x20up\x20Self\x20Roles\x20in\x20the\x20server.\x20Self\x20Roles\x20are\x20the\x20roles\x20which\x20server\x20members\x20can\x20assign\x20(and\x20unassign)\x20to\x20themselves.','triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'array':[_0x212a49(0x1bd),_0x212a49(0x1e3)],'string':[_0x212a49(0x1bd),_0x212a49(0x1e3)]},'scope':_0x212a49(0x1c4),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':['MANAGE_ROLES'],'userPermissions':[_0x212a49(0x1df)],'syntax':[_0x212a49(0x1b1),_0x212a49(0x1e1),_0x212a49(0x1c2)]}),this[_0x212a49(0x1bb)]=async(_0x3f05c5,_0x5bea6b)=>{const _0x46e150=_0x212a49;if(_0x5bea6b[_0x46e150(0x1bd)]){if(constants['isPublicBastion'](this['client'][_0x46e150(0x1d5)])){const _0xff6496=await Role_1[_0x46e150(0x1d7)]['countDocuments']({'guild':_0x3f05c5[_0x46e150(0x1c4)]['id'],'selfAssignable':!![]});if(_0xff6496>=constants[_0x46e150(0x1b0)][_0x46e150(0x1c9)]){const _0x5a6be6=await omnic[_0x46e150(0x1d2)](_0x3f05c5['guild'])[_0x46e150(0x1c5)](()=>{});if(_0x5a6be6){if(_0x5a6be6===omnic[_0x46e150(0x1ac)][_0x46e150(0x1b9)]&&_0xff6496>=constants[_0x46e150(0x1b0)][_0x46e150(0x1b9)][_0x46e150(0x1c9)])throw new errors[(_0x46e150(0x1d4))](errors[_0x46e150(0x1ba)][_0x46e150(0x1ce)],this[_0x46e150(0x1d1)][_0x46e150(0x1b2)][_0x46e150(0x1cb)](_0x3f05c5[_0x46e150(0x1c4)]['document'][_0x46e150(0x1bf)],_0x46e150(0x1b4),_0x46e150(0x1d0),constants[_0x46e150(0x1b0)]['GOLD']['SELF_ROLES']));else{if(_0x5a6be6===omnic[_0x46e150(0x1ac)]['PLATINUM']&&_0xff6496>=constants[_0x46e150(0x1b0)][_0x46e150(0x1c3)][_0x46e150(0x1c9)])throw new errors[(_0x46e150(0x1d4))](errors[_0x46e150(0x1ba)][_0x46e150(0x1ce)],this[_0x46e150(0x1d1)][_0x46e150(0x1b2)][_0x46e150(0x1cb)](_0x3f05c5[_0x46e150(0x1c4)][_0x46e150(0x1d8)][_0x46e150(0x1bf)],_0x46e150(0x1b4),_0x46e150(0x1d0),constants[_0x46e150(0x1b0)][_0x46e150(0x1c3)][_0x46e150(0x1c9)]));}}else throw new errors[(_0x46e150(0x1d4))](errors[_0x46e150(0x1ba)][_0x46e150(0x1db)],this['client'][_0x46e150(0x1b2)]['getString'](_0x3f05c5['guild'][_0x46e150(0x1d8)][_0x46e150(0x1bf)],_0x46e150(0x1b4),'premiumSelfRoles',constants[_0x46e150(0x1b0)][_0x46e150(0x1c9)]));}}const _0x14d272=this[_0x46e150(0x1d1)][_0x46e150(0x1c7)][_0x46e150(0x1de)](_0x3f05c5[_0x46e150(0x1c4)],_0x5bea6b[_0x46e150(0x1bd)][_0x46e150(0x1d6)]('\x20'));if(!_0x14d272)throw new errors[(_0x46e150(0x1d4))](errors[_0x46e150(0x1ba)][_0x46e150(0x1be)],this['client'][_0x46e150(0x1b2)]['getString'](_0x3f05c5['guild']['document'][_0x46e150(0x1bf)],'errors',_0x46e150(0x1ae)));await Role_1[_0x46e150(0x1d7)][_0x46e150(0x1da)](_0x14d272['id'],{'_id':_0x14d272['id'],'guild':_0x3f05c5['guild']['id'],'selfAssignable':!![]},{'upsert':!![]}),await _0x3f05c5[_0x46e150(0x1c6)][_0x46e150(0x1dd)]({'embed':{'color':tesseract_1[_0x46e150(0x1e2)][_0x46e150(0x1dc)][_0x46e150(0x1a6)],'description':this[_0x46e150(0x1d1)][_0x46e150(0x1b2)][_0x46e150(0x1cb)](_0x3f05c5['guild'][_0x46e150(0x1d8)]['language'],_0x46e150(0x1a5),'selfRolesAdd',_0x3f05c5[_0x46e150(0x1b8)]['tag'],_0x14d272[_0x46e150(0x1b3)]),'footer':{'text':_0x14d272['id']}}})[_0x46e150(0x1c5)](()=>{});}else{if(_0x5bea6b['remove']){const _0x3ae140=this['client'][_0x46e150(0x1c7)][_0x46e150(0x1de)](_0x3f05c5['guild'],_0x5bea6b[_0x46e150(0x1e3)]['join']('\x20'));if(!_0x3ae140)throw new errors[(_0x46e150(0x1d4))](errors[_0x46e150(0x1ba)][_0x46e150(0x1be)],this[_0x46e150(0x1d1)][_0x46e150(0x1b2)][_0x46e150(0x1cb)](_0x3f05c5[_0x46e150(0x1c4)][_0x46e150(0x1d8)][_0x46e150(0x1bf)],_0x46e150(0x1b4),_0x46e150(0x1ae)));await Role_1[_0x46e150(0x1d7)][_0x46e150(0x1da)](_0x3ae140['id'],{'$unset':{'selfAssignable':0x1}}),await _0x3f05c5[_0x46e150(0x1c6)][_0x46e150(0x1dd)]({'embed':{'color':tesseract_1['Constants'][_0x46e150(0x1dc)][_0x46e150(0x1b7)],'description':this['client']['locale']['getString'](_0x3f05c5[_0x46e150(0x1c4)][_0x46e150(0x1d8)]['language'],'info',_0x46e150(0x1cf),_0x3f05c5['author'][_0x46e150(0x1cc)],_0x3ae140[_0x46e150(0x1b3)]),'footer':{'text':_0x3ae140['id']}}})[_0x46e150(0x1c5)](()=>{});}else{const _0x37b978=await Role_1[_0x46e150(0x1d7)]['find']({'guild':_0x3f05c5[_0x46e150(0x1c4)]['id'],'selfAssignable':!![]});if(!_0x37b978[_0x46e150(0x1a7)])throw new Error(this[_0x46e150(0x1d1)]['locale'][_0x46e150(0x1cb)](_0x3f05c5[_0x46e150(0x1c4)]['document'][_0x46e150(0x1bf)],_0x46e150(0x1b4),'noSelfRoles'));const _0x23362a=[];for(const _0x4edaf4 of _0x37b978){!_0x3f05c5[_0x46e150(0x1c4)][_0x46e150(0x1e4)][_0x46e150(0x1bc)][_0x46e150(0x1ca)](_0x4edaf4['_id'])&&await _0x4edaf4[_0x46e150(0x1e3)]()[_0x46e150(0x1c5)](()=>{}),_0x23362a[_0x46e150(0x1d9)]({'name':_0x3f05c5[_0x46e150(0x1c4)][_0x46e150(0x1e4)][_0x46e150(0x1bc)][_0x46e150(0x1c8)](_0x4edaf4[_0x46e150(0x1b6)])[_0x46e150(0x1b3)]||'-','value':_0x4edaf4[_0x46e150(0x1b6)]});}await _0x3f05c5[_0x46e150(0x1c6)]['send']({'embed':{'color':tesseract_1[_0x46e150(0x1e2)][_0x46e150(0x1dc)][_0x46e150(0x1cd)],'title':_0x46e150(0x1c1),'description':this[_0x46e150(0x1d1)][_0x46e150(0x1b2)][_0x46e150(0x1cb)](_0x3f05c5[_0x46e150(0x1c4)][_0x46e150(0x1d8)][_0x46e150(0x1bf)],_0x46e150(0x1a5),_0x46e150(0x1a3)),'fields':_0x23362a}})[_0x46e150(0x1c5)](()=>{});}}};}};
const a32_0x109f=['selfRolesList','Self\x20Roles','user','../../models/Role','../../utils/constants','roleNotFound','send','PLATINUM','tag','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','exports','resolver','membershipLimitSelfRoles','_id','push','add','DiscordError','join','apply','has','find','selfRoles','BASTION_ERROR_TYPE','noSelfRoles','premiumSelfRoles','It\x20allows\x20you\x20to\x20set\x20up\x20Self\x20Roles\x20in\x20the\x20server.\x20Self\x20Roles\x20are\x20the\x20roles\x20which\x20server\x20members\x20can\x20assign\x20(and\x20unassign)\x20to\x20themselves.','document','name','fetchPremiumTier','selfRolesRemove','@bastion/tesseract','language','findByIdAndUpdate','isPublicBastion','info','../../utils/errors','selfRoles\x20--remove\x20ROLE','getString','Command','channel','GOLD','GREEN','countDocuments','LIMITS','remove','cache','Constants','compile','get','length','default','COLORS','errors','SELF_ROLES','guild','PremiumTier','test','ROLE_NOT_FOUND','selfRoles\x20--add\x20ROLE','selfRolesAdd','MANAGE_ROLES','return\x20/\x22\x20+\x20this\x20+\x20\x22/','IRIS','catch','roles','LIMITED_PREMIUM_MEMBERSHIP','client','locale'];(function(_0x1d96d8,_0x109f24){const _0x2fb96d=function(_0x21b22b){while(--_0x21b22b){_0x1d96d8['push'](_0x1d96d8['shift']());}};const _0x4b37d4=function(){const _0x39569c={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3eee21,_0x2bb4cb,_0x113a8d,_0x24c64c){_0x24c64c=_0x24c64c||{};let _0x7a21c8=_0x2bb4cb+'='+_0x113a8d;let _0x3c00fb=0x0;for(let _0x23e915=0x0,_0x1a6efe=_0x3eee21['length'];_0x23e915<_0x1a6efe;_0x23e915++){const _0x58e0a6=_0x3eee21[_0x23e915];_0x7a21c8+=';\x20'+_0x58e0a6;const _0x36fabe=_0x3eee21[_0x58e0a6];_0x3eee21['push'](_0x36fabe);_0x1a6efe=_0x3eee21['length'];if(_0x36fabe!==!![]){_0x7a21c8+='='+_0x36fabe;}}_0x24c64c['cookie']=_0x7a21c8;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3b7252,_0x4a4905){_0x3b7252=_0x3b7252||function(_0xdf0790){return _0xdf0790;};const _0x39cac5=_0x3b7252(new RegExp('(?:^|;\x20)'+_0x4a4905['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x31fbd9=function(_0x3b2ccc,_0x4690f7){_0x3b2ccc(++_0x4690f7);};_0x31fbd9(_0x2fb96d,_0x109f24);return _0x39cac5?decodeURIComponent(_0x39cac5[0x1]):undefined;}};const _0x3acf47=function(){const _0x450966=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x450966['test'](_0x39569c['removeCookie']['toString']());};_0x39569c['updateCookie']=_0x3acf47;let _0x89df8f='';const _0x58b80c=_0x39569c['updateCookie']();if(!_0x58b80c){_0x39569c['setCookie'](['*'],'counter',0x1);}else if(_0x58b80c){_0x89df8f=_0x39569c['getCookie'](null,'counter');}else{_0x39569c['removeCookie']();}};_0x4b37d4();}(a32_0x109f,0x6b));const a32_0x2fb9=function(_0x1d96d8,_0x109f24){_0x1d96d8=_0x1d96d8-0x0;let _0x2fb96d=a32_0x109f[_0x1d96d8];return _0x2fb96d;};const a32_0x39569c=function(){let _0x4f6061=!![];return function(_0x18649d,_0x28ae5c){const _0xe2e7eb=_0x4f6061?function(){if(_0x28ae5c){const _0xf4a012=_0x28ae5c[a32_0x2fb9('0x2f')](_0x18649d,arguments);_0x28ae5c=null;return _0xf4a012;}}:function(){};_0x4f6061=![];return _0xe2e7eb;};}();const a32_0x21b22b=a32_0x39569c(this,function(){const _0x4e9c86=function(){const _0x98e019=_0x4e9c86['constructor'](a32_0x2fb9('0x16'))()[a32_0x2fb9('0x8')](a32_0x2fb9('0x26'));return!_0x98e019[a32_0x2fb9('0x11')](a32_0x21b22b);};return _0x4e9c86();});a32_0x21b22b();'use strict';const tesseract_1=require(a32_0x2fb9('0x3b'));const Role_1=require(a32_0x2fb9('0x20'));const constants=require(a32_0x2fb9('0x21'));const errors=require(a32_0x2fb9('0x40'));const omnic=require('../../utils/omnic');module[a32_0x2fb9('0x27')]=class SelfRoles extends tesseract_1[a32_0x2fb9('0x43')]{constructor(){super('selfRoles',{'description':a32_0x2fb9('0x36'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'array':[a32_0x2fb9('0x2c'),a32_0x2fb9('0x5')],'string':[a32_0x2fb9('0x2c'),a32_0x2fb9('0x5')]},'scope':a32_0x2fb9('0xf'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a32_0x2fb9('0x15')],'userPermissions':['MANAGE_ROLES'],'syntax':[a32_0x2fb9('0x32'),a32_0x2fb9('0x13'),a32_0x2fb9('0x41')]});this['exec']=async(_0xa7829,_0x257d6a)=>{if(_0x257d6a[a32_0x2fb9('0x2c')]){if(constants[a32_0x2fb9('0x3e')](this[a32_0x2fb9('0x1b')][a32_0x2fb9('0x1f')])){const _0x49dd85=await Role_1[a32_0x2fb9('0xb')][a32_0x2fb9('0x3')]({'guild':_0xa7829[a32_0x2fb9('0xf')]['id'],'selfAssignable':!![]});if(_0x49dd85>=constants[a32_0x2fb9('0x4')][a32_0x2fb9('0xe')]){const _0x49474d=await omnic[a32_0x2fb9('0x39')](_0xa7829[a32_0x2fb9('0xf')])[a32_0x2fb9('0x18')](()=>{});if(_0x49474d){if(_0x49474d===omnic[a32_0x2fb9('0x10')]['GOLD']&&_0x49dd85>=constants[a32_0x2fb9('0x4')][a32_0x2fb9('0x1')]['SELF_ROLES']){throw new errors[(a32_0x2fb9('0x2d'))](errors[a32_0x2fb9('0x33')][a32_0x2fb9('0x1a')],this['client'][a32_0x2fb9('0x1c')][a32_0x2fb9('0x42')](_0xa7829[a32_0x2fb9('0xf')]['document'][a32_0x2fb9('0x3c')],a32_0x2fb9('0xd'),'membershipLimitSelfRoles',constants['LIMITS']['GOLD'][a32_0x2fb9('0xe')]));}else if(_0x49474d===omnic[a32_0x2fb9('0x10')][a32_0x2fb9('0x24')]&&_0x49dd85>=constants[a32_0x2fb9('0x4')][a32_0x2fb9('0x24')]['SELF_ROLES']){throw new errors[(a32_0x2fb9('0x2d'))](errors['BASTION_ERROR_TYPE'][a32_0x2fb9('0x1a')],this['client'][a32_0x2fb9('0x1c')][a32_0x2fb9('0x42')](_0xa7829['guild'][a32_0x2fb9('0x37')][a32_0x2fb9('0x3c')],a32_0x2fb9('0xd'),a32_0x2fb9('0x29'),constants[a32_0x2fb9('0x4')][a32_0x2fb9('0x24')][a32_0x2fb9('0xe')]));}}else{throw new errors[(a32_0x2fb9('0x2d'))](errors['BASTION_ERROR_TYPE']['PREMIUM_MEMBERSHIP_REQUIRED'],this['client'][a32_0x2fb9('0x1c')]['getString'](_0xa7829[a32_0x2fb9('0xf')][a32_0x2fb9('0x37')][a32_0x2fb9('0x3c')],a32_0x2fb9('0xd'),a32_0x2fb9('0x35'),constants['LIMITS'][a32_0x2fb9('0xe')]));}}}const _0x223d5c=this[a32_0x2fb9('0x1b')]['resolver']['resolveRole'](_0xa7829[a32_0x2fb9('0xf')],_0x257d6a['add'][a32_0x2fb9('0x2e')]('\x20'));if(!_0x223d5c)throw new errors[(a32_0x2fb9('0x2d'))](errors[a32_0x2fb9('0x33')][a32_0x2fb9('0x12')],this[a32_0x2fb9('0x1b')][a32_0x2fb9('0x1c')]['getString'](_0xa7829[a32_0x2fb9('0xf')][a32_0x2fb9('0x37')]['language'],a32_0x2fb9('0xd'),'roleNotFound'));await Role_1['default'][a32_0x2fb9('0x3d')](_0x223d5c['id'],{'_id':_0x223d5c['id'],'guild':_0xa7829['guild']['id'],'selfAssignable':!![]},{'upsert':!![]});await _0xa7829[a32_0x2fb9('0x0')]['send']({'embed':{'color':tesseract_1[a32_0x2fb9('0x7')][a32_0x2fb9('0xc')][a32_0x2fb9('0x2')],'description':this[a32_0x2fb9('0x1b')]['locale'][a32_0x2fb9('0x42')](_0xa7829['guild']['document']['language'],a32_0x2fb9('0x3f'),a32_0x2fb9('0x14'),_0xa7829['author'][a32_0x2fb9('0x25')],_0x223d5c[a32_0x2fb9('0x38')]),'footer':{'text':_0x223d5c['id']}}})[a32_0x2fb9('0x18')](()=>{});}else if(_0x257d6a[a32_0x2fb9('0x5')]){const _0x2c94b7=this[a32_0x2fb9('0x1b')][a32_0x2fb9('0x28')]['resolveRole'](_0xa7829[a32_0x2fb9('0xf')],_0x257d6a[a32_0x2fb9('0x5')][a32_0x2fb9('0x2e')]('\x20'));if(!_0x2c94b7)throw new errors[(a32_0x2fb9('0x2d'))](errors[a32_0x2fb9('0x33')][a32_0x2fb9('0x12')],this[a32_0x2fb9('0x1b')][a32_0x2fb9('0x1c')][a32_0x2fb9('0x42')](_0xa7829['guild'][a32_0x2fb9('0x37')][a32_0x2fb9('0x3c')],a32_0x2fb9('0xd'),a32_0x2fb9('0x22')));await Role_1[a32_0x2fb9('0xb')][a32_0x2fb9('0x3d')](_0x2c94b7['id'],{'$unset':{'selfAssignable':0x1}});await _0xa7829[a32_0x2fb9('0x0')][a32_0x2fb9('0x23')]({'embed':{'color':tesseract_1[a32_0x2fb9('0x7')][a32_0x2fb9('0xc')]['RED'],'description':this[a32_0x2fb9('0x1b')]['locale']['getString'](_0xa7829['guild'][a32_0x2fb9('0x37')][a32_0x2fb9('0x3c')],a32_0x2fb9('0x3f'),a32_0x2fb9('0x3a'),_0xa7829['author'][a32_0x2fb9('0x25')],_0x2c94b7[a32_0x2fb9('0x38')]),'footer':{'text':_0x2c94b7['id']}}})[a32_0x2fb9('0x18')](()=>{});}else{const _0x5a9fc5=await Role_1['default'][a32_0x2fb9('0x31')]({'guild':_0xa7829[a32_0x2fb9('0xf')]['id'],'selfAssignable':!![]});if(!_0x5a9fc5[a32_0x2fb9('0xa')]){throw new Error(this[a32_0x2fb9('0x1b')][a32_0x2fb9('0x1c')][a32_0x2fb9('0x42')](_0xa7829[a32_0x2fb9('0xf')][a32_0x2fb9('0x37')][a32_0x2fb9('0x3c')],a32_0x2fb9('0xd'),a32_0x2fb9('0x34')));}const _0x278461=[];for(const _0x4cbcb2 of _0x5a9fc5){if(!_0xa7829[a32_0x2fb9('0xf')][a32_0x2fb9('0x19')][a32_0x2fb9('0x6')][a32_0x2fb9('0x30')](_0x4cbcb2[a32_0x2fb9('0x2a')])){await _0x4cbcb2[a32_0x2fb9('0x5')]()['catch'](()=>{});}_0x278461[a32_0x2fb9('0x2b')]({'name':_0xa7829[a32_0x2fb9('0xf')]['roles']['cache'][a32_0x2fb9('0x9')](_0x4cbcb2[a32_0x2fb9('0x2a')])[a32_0x2fb9('0x38')]||'-','value':_0x4cbcb2[a32_0x2fb9('0x2a')]});}await _0xa7829[a32_0x2fb9('0x0')][a32_0x2fb9('0x23')]({'embed':{'color':tesseract_1[a32_0x2fb9('0x7')][a32_0x2fb9('0xc')][a32_0x2fb9('0x17')],'title':a32_0x2fb9('0x1e'),'description':this[a32_0x2fb9('0x1b')][a32_0x2fb9('0x1c')][a32_0x2fb9('0x42')](_0xa7829['guild'][a32_0x2fb9('0x37')][a32_0x2fb9('0x3c')],'info',a32_0x2fb9('0x1d')),'fields':_0x278461}})[a32_0x2fb9('0x18')](()=>{});}};}};
const a32_0x1f07=['add','ROLE_NOT_FOUND','@bastion/tesseract','locale','BASTION_ERROR_TYPE','PREMIUM_MEMBERSHIP_REQUIRED','DiscordError','GOLD','compile','client','language','get','LIMITS','tag','cache','../../utils/errors','selfRolesAdd','resolver','channel','push','getString','name','noSelfRoles','selfRoles\x20--remove\x20ROLE','user','constructor','countDocuments','test','isPublicBastion','RED','selfRolesList','fetchPremiumTier','resolveRole','roleNotFound','../../utils/omnic','join','GREEN','LIMITED_PREMIUM_MEMBERSHIP','find','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','roles','PLATINUM','author','return\x20/\x22\x20+\x20this\x20+\x20\x22/','catch','findByIdAndUpdate','document','apply','send','guild','premiumSelfRoles','info','SELF_ROLES','errors','remove','Self\x20Roles','IRIS','membershipLimitSelfRoles','default','COLORS','length','MANAGE_ROLES','exports','It\x20allows\x20you\x20to\x20set\x20up\x20Self\x20Roles\x20in\x20the\x20server.\x20Self\x20Roles\x20are\x20the\x20roles\x20which\x20server\x20members\x20can\x20assign\x20(and\x20unassign)\x20to\x20themselves.','_id','Command','PremiumTier','Constants'];(function(_0x59b11b,_0x1f07a2){const _0x34aefe=function(_0x3c6c4f){while(--_0x3c6c4f){_0x59b11b['push'](_0x59b11b['shift']());}};const _0x3c64cc=function(){const _0x764835={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x230f93,_0x3a2e06,_0x24a64f,_0x1b2c19){_0x1b2c19=_0x1b2c19||{};let _0x376044=_0x3a2e06+'='+_0x24a64f;let _0x5ed901=0x0;for(let _0x4b6f2f=0x0,_0xfb8b8a=_0x230f93['length'];_0x4b6f2f<_0xfb8b8a;_0x4b6f2f++){const _0x157ed9=_0x230f93[_0x4b6f2f];_0x376044+=';\x20'+_0x157ed9;const _0x39587d=_0x230f93[_0x157ed9];_0x230f93['push'](_0x39587d);_0xfb8b8a=_0x230f93['length'];if(_0x39587d!==!![]){_0x376044+='='+_0x39587d;}}_0x1b2c19['cookie']=_0x376044;},'removeCookie':function(){return'dev';},'getCookie':function(_0x15913d,_0x4a47c9){_0x15913d=_0x15913d||function(_0x1013b9){return _0x1013b9;};const _0x2d0c3f=_0x15913d(new RegExp('(?:^|;\x20)'+_0x4a47c9['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x1b3aee=function(_0x3a3394,_0x1dfa0b){_0x3a3394(++_0x1dfa0b);};_0x1b3aee(_0x34aefe,_0x1f07a2);return _0x2d0c3f?decodeURIComponent(_0x2d0c3f[0x1]):undefined;}};const _0x780620=function(){const _0x35744b=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x35744b['test'](_0x764835['removeCookie']['toString']());};_0x764835['updateCookie']=_0x780620;let _0x1d7e1b='';const _0x3e5762=_0x764835['updateCookie']();if(!_0x3e5762){_0x764835['setCookie'](['*'],'counter',0x1);}else if(_0x3e5762){_0x1d7e1b=_0x764835['getCookie'](null,'counter');}else{_0x764835['removeCookie']();}};_0x3c64cc();}(a32_0x1f07,0x1dd));const a32_0x34ae=function(_0x59b11b,_0x1f07a2){_0x59b11b=_0x59b11b-0x0;let _0x34aefe=a32_0x1f07[_0x59b11b];return _0x34aefe;};const a32_0x764835=function(){let _0x393720=!![];return function(_0x443793,_0xdaf075){const _0x5401cb=_0x393720?function(){if(_0xdaf075){const _0x1c03bf=_0xdaf075[a32_0x34ae('0x2e')](_0x443793,arguments);_0xdaf075=null;return _0x1c03bf;}}:function(){};_0x393720=![];return _0x5401cb;};}();const a32_0x3c6c4f=a32_0x764835(this,function(){const _0x2aaaea=function(){const _0xf193e6=_0x2aaaea[a32_0x34ae('0x18')](a32_0x34ae('0x2a'))()[a32_0x34ae('0x7')](a32_0x34ae('0x26'));return!_0xf193e6[a32_0x34ae('0x1a')](a32_0x3c6c4f);};return _0x2aaaea();});a32_0x3c6c4f();'use strict';const tesseract_1=require(a32_0x34ae('0x1'));const Role_1=require('../../models/Role');const constants=require('../../utils/constants');const errors=require(a32_0x34ae('0xe'));const omnic=require(a32_0x34ae('0x21'));module[a32_0x34ae('0x3d')]=class SelfRoles extends tesseract_1[a32_0x34ae('0x40')]{constructor(){super('selfRoles',{'description':a32_0x34ae('0x3e'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'array':[a32_0x34ae('0x43'),a32_0x34ae('0x35')],'string':[a32_0x34ae('0x43'),a32_0x34ae('0x35')]},'scope':a32_0x34ae('0x30'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a32_0x34ae('0x3c')],'userPermissions':[a32_0x34ae('0x3c')],'syntax':['selfRoles','selfRoles\x20--add\x20ROLE',a32_0x34ae('0x16')]});this['exec']=async(_0x3db34f,_0x45b5f2)=>{if(_0x45b5f2[a32_0x34ae('0x43')]){if(constants[a32_0x34ae('0x1b')](this[a32_0x34ae('0x8')][a32_0x34ae('0x17')])){const _0x49c821=await Role_1['default'][a32_0x34ae('0x19')]({'guild':_0x3db34f[a32_0x34ae('0x30')]['id'],'selfAssignable':!![]});if(_0x49c821>=constants[a32_0x34ae('0xb')][a32_0x34ae('0x33')]){const _0x38f9f0=await omnic[a32_0x34ae('0x1e')](_0x3db34f['guild'])[a32_0x34ae('0x2b')](()=>{});if(_0x38f9f0){if(_0x38f9f0===omnic[a32_0x34ae('0x41')][a32_0x34ae('0x6')]&&_0x49c821>=constants[a32_0x34ae('0xb')][a32_0x34ae('0x6')][a32_0x34ae('0x33')]){throw new errors['DiscordError'](errors[a32_0x34ae('0x3')][a32_0x34ae('0x24')],this[a32_0x34ae('0x8')][a32_0x34ae('0x2')]['getString'](_0x3db34f['guild']['document']['language'],a32_0x34ae('0x34'),a32_0x34ae('0x38'),constants['LIMITS'][a32_0x34ae('0x6')][a32_0x34ae('0x33')]));}else if(_0x38f9f0===omnic[a32_0x34ae('0x41')][a32_0x34ae('0x28')]&&_0x49c821>=constants[a32_0x34ae('0xb')][a32_0x34ae('0x28')][a32_0x34ae('0x33')]){throw new errors[(a32_0x34ae('0x5'))](errors[a32_0x34ae('0x3')][a32_0x34ae('0x24')],this[a32_0x34ae('0x8')][a32_0x34ae('0x2')][a32_0x34ae('0x13')](_0x3db34f[a32_0x34ae('0x30')][a32_0x34ae('0x2d')]['language'],a32_0x34ae('0x34'),a32_0x34ae('0x38'),constants[a32_0x34ae('0xb')]['PLATINUM'][a32_0x34ae('0x33')]));}}else{throw new errors[(a32_0x34ae('0x5'))](errors[a32_0x34ae('0x3')][a32_0x34ae('0x4')],this['client'][a32_0x34ae('0x2')][a32_0x34ae('0x13')](_0x3db34f[a32_0x34ae('0x30')]['document'][a32_0x34ae('0x9')],'errors',a32_0x34ae('0x31'),constants[a32_0x34ae('0xb')][a32_0x34ae('0x33')]));}}}const _0x3d3851=this[a32_0x34ae('0x8')]['resolver'][a32_0x34ae('0x1f')](_0x3db34f[a32_0x34ae('0x30')],_0x45b5f2[a32_0x34ae('0x43')]['join']('\x20'));if(!_0x3d3851)throw new errors[(a32_0x34ae('0x5'))](errors['BASTION_ERROR_TYPE'][a32_0x34ae('0x0')],this[a32_0x34ae('0x8')][a32_0x34ae('0x2')][a32_0x34ae('0x13')](_0x3db34f[a32_0x34ae('0x30')]['document'][a32_0x34ae('0x9')],'errors',a32_0x34ae('0x20')));await Role_1[a32_0x34ae('0x39')]['findByIdAndUpdate'](_0x3d3851['id'],{'_id':_0x3d3851['id'],'guild':_0x3db34f['guild']['id'],'selfAssignable':!![]},{'upsert':!![]});await _0x3db34f['channel'][a32_0x34ae('0x2f')]({'embed':{'color':tesseract_1['Constants']['COLORS'][a32_0x34ae('0x23')],'description':this[a32_0x34ae('0x8')][a32_0x34ae('0x2')][a32_0x34ae('0x13')](_0x3db34f['guild'][a32_0x34ae('0x2d')][a32_0x34ae('0x9')],'info',a32_0x34ae('0xf'),_0x3db34f[a32_0x34ae('0x29')][a32_0x34ae('0xc')],_0x3d3851['name']),'footer':{'text':_0x3d3851['id']}}})[a32_0x34ae('0x2b')](()=>{});}else if(_0x45b5f2[a32_0x34ae('0x35')]){const _0x415ef4=this[a32_0x34ae('0x8')][a32_0x34ae('0x10')][a32_0x34ae('0x1f')](_0x3db34f[a32_0x34ae('0x30')],_0x45b5f2[a32_0x34ae('0x35')][a32_0x34ae('0x22')]('\x20'));if(!_0x415ef4)throw new errors[(a32_0x34ae('0x5'))](errors[a32_0x34ae('0x3')]['ROLE_NOT_FOUND'],this[a32_0x34ae('0x8')][a32_0x34ae('0x2')]['getString'](_0x3db34f[a32_0x34ae('0x30')][a32_0x34ae('0x2d')][a32_0x34ae('0x9')],a32_0x34ae('0x34'),a32_0x34ae('0x20')));await Role_1[a32_0x34ae('0x39')][a32_0x34ae('0x2c')](_0x415ef4['id'],{'$unset':{'selfAssignable':0x1}});await _0x3db34f[a32_0x34ae('0x11')]['send']({'embed':{'color':tesseract_1[a32_0x34ae('0x42')][a32_0x34ae('0x3a')][a32_0x34ae('0x1c')],'description':this[a32_0x34ae('0x8')][a32_0x34ae('0x2')][a32_0x34ae('0x13')](_0x3db34f[a32_0x34ae('0x30')]['document'][a32_0x34ae('0x9')],a32_0x34ae('0x32'),'selfRolesRemove',_0x3db34f['author'][a32_0x34ae('0xc')],_0x415ef4[a32_0x34ae('0x14')]),'footer':{'text':_0x415ef4['id']}}})[a32_0x34ae('0x2b')](()=>{});}else{const _0x34b2c2=await Role_1['default'][a32_0x34ae('0x25')]({'guild':_0x3db34f[a32_0x34ae('0x30')]['id'],'selfAssignable':!![]});if(!_0x34b2c2[a32_0x34ae('0x3b')]){throw new Error(this[a32_0x34ae('0x8')]['locale'][a32_0x34ae('0x13')](_0x3db34f['guild'][a32_0x34ae('0x2d')][a32_0x34ae('0x9')],a32_0x34ae('0x34'),a32_0x34ae('0x15')));}const _0x363175=[];for(const _0x33e4a8 of _0x34b2c2){if(!_0x3db34f[a32_0x34ae('0x30')][a32_0x34ae('0x27')][a32_0x34ae('0xd')]['has'](_0x33e4a8[a32_0x34ae('0x3f')])){await _0x33e4a8[a32_0x34ae('0x35')]()[a32_0x34ae('0x2b')](()=>{});}_0x363175[a32_0x34ae('0x12')]({'name':_0x3db34f[a32_0x34ae('0x30')][a32_0x34ae('0x27')]['cache'][a32_0x34ae('0xa')](_0x33e4a8[a32_0x34ae('0x3f')])[a32_0x34ae('0x14')]||'-','value':_0x33e4a8[a32_0x34ae('0x3f')]});}await _0x3db34f['channel'][a32_0x34ae('0x2f')]({'embed':{'color':tesseract_1[a32_0x34ae('0x42')][a32_0x34ae('0x3a')][a32_0x34ae('0x37')],'title':a32_0x34ae('0x36'),'description':this[a32_0x34ae('0x8')][a32_0x34ae('0x2')][a32_0x34ae('0x13')](_0x3db34f[a32_0x34ae('0x30')][a32_0x34ae('0x2d')][a32_0x34ae('0x9')],a32_0x34ae('0x32'),a32_0x34ae('0x1d')),'fields':_0x363175}})[a32_0x34ae('0x2b')](()=>{});}};}};
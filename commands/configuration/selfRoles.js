const a32_0x1f48=['has','SELF_ROLES','RED','document','add','membershipLimitSelfRoles','push','noSelfRoles','errors','ROLE_NOT_FOUND','GOLD','../../utils/errors','../../utils/constants','selfRolesAdd','user','channel','compile','getString','Constants','guild','tag','join','roleNotFound','BASTION_ERROR_TYPE','resolveRole','get','cache','catch','It\x20allows\x20you\x20to\x20set\x20up\x20Self\x20Roles\x20in\x20the\x20server.\x20Self\x20Roles\x20are\x20the\x20roles\x20which\x20server\x20members\x20can\x20assign\x20(and\x20unassign)\x20to\x20themselves.','../../models/Role','locale','constructor','find','LIMITED_PREMIUM_MEMBERSHIP','author','test','COLORS','PremiumTier','findByIdAndUpdate','../../utils/omnic','name','roles','fetchPremiumTier','countDocuments','selfRoles','default','selfRolesRemove','info','PLATINUM','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','remove','resolver','language','Command','@bastion/tesseract','exports','send','GREEN','client','LIMITS','MANAGE_ROLES','DiscordError','selfRoles\x20--remove\x20ROLE','selfRoles\x20--add\x20ROLE','return\x20/\x22\x20+\x20this\x20+\x20\x22/','_id','length'];(function(_0xdf7f63,_0x1f48b4){const _0x3799ce=function(_0x514e34){while(--_0x514e34){_0xdf7f63['push'](_0xdf7f63['shift']());}};const _0x246133=function(){const _0x27a375={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0xcc7b18,_0x224f70,_0x2eb3d9,_0x3785ba){_0x3785ba=_0x3785ba||{};let _0x34d346=_0x224f70+'='+_0x2eb3d9;let _0xe90b15=0x0;for(let _0x1fece4=0x0,_0x17f247=_0xcc7b18['length'];_0x1fece4<_0x17f247;_0x1fece4++){const _0xaf68be=_0xcc7b18[_0x1fece4];_0x34d346+=';\x20'+_0xaf68be;const _0x3ae41b=_0xcc7b18[_0xaf68be];_0xcc7b18['push'](_0x3ae41b);_0x17f247=_0xcc7b18['length'];if(_0x3ae41b!==!![]){_0x34d346+='='+_0x3ae41b;}}_0x3785ba['cookie']=_0x34d346;},'removeCookie':function(){return'dev';},'getCookie':function(_0x267a25,_0x2a8378){_0x267a25=_0x267a25||function(_0x15e095){return _0x15e095;};const _0x33312e=_0x267a25(new RegExp('(?:^|;\x20)'+_0x2a8378['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x390dd6=function(_0x58dae6,_0x329f15){_0x58dae6(++_0x329f15);};_0x390dd6(_0x3799ce,_0x1f48b4);return _0x33312e?decodeURIComponent(_0x33312e[0x1]):undefined;}};const _0x431e3e=function(){const _0x4e6f10=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4e6f10['test'](_0x27a375['removeCookie']['toString']());};_0x27a375['updateCookie']=_0x431e3e;let _0x4ea7ca='';const _0x3a16e0=_0x27a375['updateCookie']();if(!_0x3a16e0){_0x27a375['setCookie'](['*'],'counter',0x1);}else if(_0x3a16e0){_0x4ea7ca=_0x27a375['getCookie'](null,'counter');}else{_0x27a375['removeCookie']();}};_0x246133();}(a32_0x1f48,0x9e));const a32_0x3799=function(_0xdf7f63,_0x1f48b4){_0xdf7f63=_0xdf7f63-0x0;let _0x3799ce=a32_0x1f48[_0xdf7f63];return _0x3799ce;};const a32_0x27a375=function(){let _0x2c1dab=!![];return function(_0x12512c,_0x2df47e){const _0x589974=_0x2c1dab?function(){if(_0x2df47e){const _0x241852=_0x2df47e['apply'](_0x12512c,arguments);_0x2df47e=null;return _0x241852;}}:function(){};_0x2c1dab=![];return _0x589974;};}();const a32_0x514e34=a32_0x27a375(this,function(){const _0x3634e5=function(){const _0x290d34=_0x3634e5[a32_0x3799('0x7')](a32_0x3799('0x28'))()[a32_0x3799('0x3b')](a32_0x3799('0x19'));return!_0x290d34[a32_0x3799('0xb')](a32_0x514e34);};return _0x3634e5();});a32_0x514e34();'use strict';const tesseract_1=require(a32_0x3799('0x1e'));const Role_1=require(a32_0x3799('0x5'));const constants=require(a32_0x3799('0x37'));const errors=require(a32_0x3799('0x36'));const omnic=require(a32_0x3799('0xf'));module[a32_0x3799('0x1f')]=class SelfRoles extends tesseract_1[a32_0x3799('0x1d')]{constructor(){super(a32_0x3799('0x14'),{'description':a32_0x3799('0x4'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'array':[a32_0x3799('0x2f'),a32_0x3799('0x1a')],'string':['add',a32_0x3799('0x1a')]},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a32_0x3799('0x24')],'userPermissions':['MANAGE_ROLES'],'syntax':['selfRoles',a32_0x3799('0x27'),a32_0x3799('0x26')]});this['exec']=async(_0x5f00b4,_0x112e43)=>{if(_0x112e43[a32_0x3799('0x2f')]){if(constants['isPublicBastion'](this['client'][a32_0x3799('0x39')])){const _0x41c24e=await Role_1[a32_0x3799('0x15')][a32_0x3799('0x13')]({'guild':_0x5f00b4[a32_0x3799('0x3e')]['id'],'selfAssignable':!![]});if(_0x41c24e>=constants[a32_0x3799('0x23')]['SELF_ROLES']){const _0x430358=await omnic[a32_0x3799('0x12')](_0x5f00b4[a32_0x3799('0x3e')])[a32_0x3799('0x3')](()=>{});if(_0x430358){if(_0x430358===omnic['PremiumTier'][a32_0x3799('0x35')]&&_0x41c24e>=constants['LIMITS'][a32_0x3799('0x35')][a32_0x3799('0x2c')]){throw new errors[(a32_0x3799('0x25'))](errors[a32_0x3799('0x42')]['LIMITED_PREMIUM_MEMBERSHIP'],this[a32_0x3799('0x22')][a32_0x3799('0x6')][a32_0x3799('0x3c')](_0x5f00b4[a32_0x3799('0x3e')][a32_0x3799('0x2e')][a32_0x3799('0x1c')],a32_0x3799('0x33'),a32_0x3799('0x30'),constants[a32_0x3799('0x23')][a32_0x3799('0x35')][a32_0x3799('0x2c')]));}else if(_0x430358===omnic[a32_0x3799('0xd')][a32_0x3799('0x18')]&&_0x41c24e>=constants['LIMITS'][a32_0x3799('0x18')][a32_0x3799('0x2c')]){throw new errors[(a32_0x3799('0x25'))](errors[a32_0x3799('0x42')][a32_0x3799('0x9')],this[a32_0x3799('0x22')]['locale'][a32_0x3799('0x3c')](_0x5f00b4['guild'][a32_0x3799('0x2e')][a32_0x3799('0x1c')],a32_0x3799('0x33'),'membershipLimitSelfRoles',constants[a32_0x3799('0x23')][a32_0x3799('0x18')][a32_0x3799('0x2c')]));}}else{throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE']['PREMIUM_MEMBERSHIP_REQUIRED'],this[a32_0x3799('0x22')]['locale'][a32_0x3799('0x3c')](_0x5f00b4[a32_0x3799('0x3e')][a32_0x3799('0x2e')]['language'],a32_0x3799('0x33'),'premiumSelfRoles',constants[a32_0x3799('0x23')]['SELF_ROLES']));}}}const _0x26d56f=this[a32_0x3799('0x22')][a32_0x3799('0x1b')][a32_0x3799('0x0')](_0x5f00b4[a32_0x3799('0x3e')],_0x112e43[a32_0x3799('0x2f')][a32_0x3799('0x40')]('\x20'));if(!_0x26d56f)throw new errors[(a32_0x3799('0x25'))](errors[a32_0x3799('0x42')][a32_0x3799('0x34')],this[a32_0x3799('0x22')]['locale'][a32_0x3799('0x3c')](_0x5f00b4[a32_0x3799('0x3e')]['document'][a32_0x3799('0x1c')],a32_0x3799('0x33'),a32_0x3799('0x41')));await Role_1['default'][a32_0x3799('0xe')](_0x26d56f['id'],{'_id':_0x26d56f['id'],'guild':_0x5f00b4[a32_0x3799('0x3e')]['id'],'selfAssignable':!![]},{'upsert':!![]});await _0x5f00b4[a32_0x3799('0x3a')][a32_0x3799('0x20')]({'embed':{'color':tesseract_1[a32_0x3799('0x3d')]['COLORS'][a32_0x3799('0x21')],'description':this[a32_0x3799('0x22')][a32_0x3799('0x6')][a32_0x3799('0x3c')](_0x5f00b4[a32_0x3799('0x3e')][a32_0x3799('0x2e')][a32_0x3799('0x1c')],'info',a32_0x3799('0x38'),_0x5f00b4[a32_0x3799('0xa')][a32_0x3799('0x3f')],_0x26d56f['name']),'footer':{'text':_0x26d56f['id']}}})[a32_0x3799('0x3')](()=>{});}else if(_0x112e43[a32_0x3799('0x1a')]){const _0x192d05=this['client']['resolver'][a32_0x3799('0x0')](_0x5f00b4[a32_0x3799('0x3e')],_0x112e43[a32_0x3799('0x1a')][a32_0x3799('0x40')]('\x20'));if(!_0x192d05)throw new errors[(a32_0x3799('0x25'))](errors[a32_0x3799('0x42')][a32_0x3799('0x34')],this[a32_0x3799('0x22')][a32_0x3799('0x6')][a32_0x3799('0x3c')](_0x5f00b4['guild'][a32_0x3799('0x2e')]['language'],a32_0x3799('0x33'),a32_0x3799('0x41')));await Role_1[a32_0x3799('0x15')][a32_0x3799('0xe')](_0x192d05['id'],{'$unset':{'selfAssignable':0x1}});await _0x5f00b4['channel'][a32_0x3799('0x20')]({'embed':{'color':tesseract_1[a32_0x3799('0x3d')][a32_0x3799('0xc')][a32_0x3799('0x2d')],'description':this[a32_0x3799('0x22')][a32_0x3799('0x6')]['getString'](_0x5f00b4[a32_0x3799('0x3e')][a32_0x3799('0x2e')][a32_0x3799('0x1c')],'info',a32_0x3799('0x16'),_0x5f00b4[a32_0x3799('0xa')][a32_0x3799('0x3f')],_0x192d05[a32_0x3799('0x10')]),'footer':{'text':_0x192d05['id']}}})[a32_0x3799('0x3')](()=>{});}else{const _0x34c0bd=await Role_1[a32_0x3799('0x15')][a32_0x3799('0x8')]({'guild':_0x5f00b4[a32_0x3799('0x3e')]['id'],'selfAssignable':!![]});if(!_0x34c0bd[a32_0x3799('0x2a')]){throw new Error(this['client'][a32_0x3799('0x6')]['getString'](_0x5f00b4[a32_0x3799('0x3e')][a32_0x3799('0x2e')]['language'],a32_0x3799('0x33'),a32_0x3799('0x32')));}const _0x52a1f0=[];for(const _0x2c804d of _0x34c0bd){if(!_0x5f00b4[a32_0x3799('0x3e')]['roles'][a32_0x3799('0x2')][a32_0x3799('0x2b')](_0x2c804d[a32_0x3799('0x29')])){await _0x2c804d[a32_0x3799('0x1a')]()[a32_0x3799('0x3')](()=>{});}_0x52a1f0[a32_0x3799('0x31')]({'name':_0x5f00b4[a32_0x3799('0x3e')][a32_0x3799('0x11')][a32_0x3799('0x2')][a32_0x3799('0x1')](_0x2c804d[a32_0x3799('0x29')])[a32_0x3799('0x10')]||'-','value':_0x2c804d['_id']});}await _0x5f00b4[a32_0x3799('0x3a')][a32_0x3799('0x20')]({'embed':{'color':tesseract_1[a32_0x3799('0x3d')][a32_0x3799('0xc')]['IRIS'],'title':'Self\x20Roles','description':this[a32_0x3799('0x22')][a32_0x3799('0x6')][a32_0x3799('0x3c')](_0x5f00b4[a32_0x3799('0x3e')][a32_0x3799('0x2e')]['language'],a32_0x3799('0x17'),'selfRolesList'),'fields':_0x52a1f0}})[a32_0x3799('0x3')](()=>{});}};}};
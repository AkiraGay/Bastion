const a252_0x3e9d=['add','compile','selfRoles','../../utils/errors','name','remove','IRIS','selfRolesAdd','findByIdAndUpdate','_id','fetchPremiumTier','PremiumTier','selfRoles\x20--add\x20ROLE','tag','info','../../models/Role','premiumSelfRoles','roleNotFound','test','default','roles','exec','BASTION_ERROR_TYPE','get','selfRolesRemove','errors','MANAGE_ROLES','membershipLimitSelfRoles','language','resolveRole','LIMITS','client','RED','@bastion/tesseract','has','resolver','DiscordError','countDocuments','COLORS','return\x20/\x22\x20+\x20this\x20+\x20\x22/','selfRoles\x20--remove\x20ROLE','getString','catch','PLATINUM','SELF_ROLES','isPublicBastion','Constants','../../utils/omnic','push','guild','../../utils/constants','ROLE_NOT_FOUND','channel','Self\x20Roles','author','join','GOLD','user','locale','noSelfRoles','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','LIMITED_PREMIUM_MEMBERSHIP','send','PREMIUM_MEMBERSHIP_REQUIRED','selfRolesList','document'];(function(_0x3e5315,_0x3e9d01){const _0x124c5c=function(_0x281c62){while(--_0x281c62){_0x3e5315['push'](_0x3e5315['shift']());}};const _0x133eda=function(){const _0x136cc9={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4174aa,_0x22c8e5,_0x25d471,_0x3e6627){_0x3e6627=_0x3e6627||{};let _0x182ea5=_0x22c8e5+'='+_0x25d471;let _0xc7bd5f=0x0;for(let _0x2674ee=0x0,_0x433f4b=_0x4174aa['length'];_0x2674ee<_0x433f4b;_0x2674ee++){const _0xc75015=_0x4174aa[_0x2674ee];_0x182ea5+=';\x20'+_0xc75015;const _0x5c46ba=_0x4174aa[_0xc75015];_0x4174aa['push'](_0x5c46ba);_0x433f4b=_0x4174aa['length'];if(_0x5c46ba!==!![]){_0x182ea5+='='+_0x5c46ba;}}_0x3e6627['cookie']=_0x182ea5;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5e9fe6,_0x40296a){_0x5e9fe6=_0x5e9fe6||function(_0x17446e){return _0x17446e;};const _0x558c04=_0x5e9fe6(new RegExp('(?:^|;\x20)'+_0x40296a['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x3bebe9=function(_0x4b1b34,_0x56fe0f){_0x4b1b34(++_0x56fe0f);};_0x3bebe9(_0x124c5c,_0x3e9d01);return _0x558c04?decodeURIComponent(_0x558c04[0x1]):undefined;}};const _0x52d6bd=function(){const _0x34a5b4=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x34a5b4['test'](_0x136cc9['removeCookie']['toString']());};_0x136cc9['updateCookie']=_0x52d6bd;let _0x53f055='';const _0x5ba4c8=_0x136cc9['updateCookie']();if(!_0x5ba4c8){_0x136cc9['setCookie'](['*'],'counter',0x1);}else if(_0x5ba4c8){_0x53f055=_0x136cc9['getCookie'](null,'counter');}else{_0x136cc9['removeCookie']();}};_0x133eda();}(a252_0x3e9d,0x16a));const a252_0x124c=function(_0x3e5315,_0x3e9d01){_0x3e5315=_0x3e5315-0x0;let _0x124c5c=a252_0x3e9d[_0x3e5315];return _0x124c5c;};const a252_0x136cc9=function(){let _0x44db93=!![];return function(_0x394665,_0x36a882){const _0x351942=_0x44db93?function(){if(_0x36a882){const _0x225927=_0x36a882['apply'](_0x394665,arguments);_0x36a882=null;return _0x225927;}}:function(){};_0x44db93=![];return _0x351942;};}();const a252_0x281c62=a252_0x136cc9(this,function(){const _0x217a6b=function(){const _0x3b59bf=_0x217a6b['constructor'](a252_0x124c('0x7'))()[a252_0x124c('0x23')](a252_0x124c('0x1c'));return!_0x3b59bf[a252_0x124c('0x34')](a252_0x281c62);};return _0x217a6b();});a252_0x281c62();'use strict';const tesseract_1=require(a252_0x124c('0x1'));const Role_1=require(a252_0x124c('0x31'));const constants=require(a252_0x124c('0x12'));const errors=require(a252_0x124c('0x25'));const omnic=require(a252_0x124c('0xf'));module['exports']=class SelfRoles extends tesseract_1['Command']{constructor(){super(a252_0x124c('0x24'),{'description':'It\x20allows\x20you\x20to\x20set\x20up\x20Self\x20Roles\x20in\x20the\x20server.\x20Self\x20Roles\x20are\x20the\x20roles\x20which\x20server\x20members\x20can\x20assign\x20(and\x20unassign)\x20to\x20themselves.','triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'array':[a252_0x124c('0x22'),a252_0x124c('0x27')],'string':['add','remove']},'scope':a252_0x124c('0x11'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a252_0x124c('0x3c')],'userPermissions':[a252_0x124c('0x3c')],'syntax':[a252_0x124c('0x24'),a252_0x124c('0x2e'),a252_0x124c('0x8')]});this[a252_0x124c('0x37')]=async(_0x37aa31,_0x103418)=>{if(_0x103418[a252_0x124c('0x22')]){if(constants[a252_0x124c('0xd')](this[a252_0x124c('0x41')][a252_0x124c('0x19')])){const _0xdaf3f2=await Role_1[a252_0x124c('0x35')][a252_0x124c('0x5')]({'guild':_0x37aa31[a252_0x124c('0x11')]['id'],'selfAssignable':!![]});if(_0xdaf3f2>=constants['LIMITS'][a252_0x124c('0xc')]){const _0x4ea253=await omnic[a252_0x124c('0x2c')](_0x37aa31[a252_0x124c('0x11')])[a252_0x124c('0xa')](()=>{});if(_0x4ea253){if(_0x4ea253===omnic[a252_0x124c('0x2d')][a252_0x124c('0x18')]&&_0xdaf3f2>=constants[a252_0x124c('0x40')][a252_0x124c('0x18')]['SELF_ROLES']){throw new errors['DiscordError'](errors[a252_0x124c('0x38')][a252_0x124c('0x1d')],this[a252_0x124c('0x41')][a252_0x124c('0x1a')]['getString'](_0x37aa31[a252_0x124c('0x11')][a252_0x124c('0x21')][a252_0x124c('0x3e')],a252_0x124c('0x3b'),a252_0x124c('0x3d'),constants[a252_0x124c('0x40')][a252_0x124c('0x18')]['SELF_ROLES']));}else if(_0x4ea253===omnic[a252_0x124c('0x2d')]['PLATINUM']&&_0xdaf3f2>=constants[a252_0x124c('0x40')][a252_0x124c('0xb')]['SELF_ROLES']){throw new errors['DiscordError'](errors[a252_0x124c('0x38')][a252_0x124c('0x1d')],this['client'][a252_0x124c('0x1a')][a252_0x124c('0x9')](_0x37aa31['guild'][a252_0x124c('0x21')]['language'],a252_0x124c('0x3b'),a252_0x124c('0x3d'),constants[a252_0x124c('0x40')]['PLATINUM'][a252_0x124c('0xc')]));}}else{throw new errors[(a252_0x124c('0x4'))](errors[a252_0x124c('0x38')][a252_0x124c('0x1f')],this[a252_0x124c('0x41')][a252_0x124c('0x1a')][a252_0x124c('0x9')](_0x37aa31[a252_0x124c('0x11')][a252_0x124c('0x21')][a252_0x124c('0x3e')],a252_0x124c('0x3b'),a252_0x124c('0x32'),constants[a252_0x124c('0x40')][a252_0x124c('0xc')]));}}}const _0x3b0782=this[a252_0x124c('0x41')][a252_0x124c('0x3')][a252_0x124c('0x3f')](_0x37aa31[a252_0x124c('0x11')],_0x103418[a252_0x124c('0x22')][a252_0x124c('0x17')]('\x20'));if(!_0x3b0782)throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][a252_0x124c('0x13')],this[a252_0x124c('0x41')]['locale'][a252_0x124c('0x9')](_0x37aa31['guild'][a252_0x124c('0x21')][a252_0x124c('0x3e')],'errors',a252_0x124c('0x33')));await Role_1[a252_0x124c('0x35')][a252_0x124c('0x2a')](_0x3b0782['id'],{'_id':_0x3b0782['id'],'guild':_0x37aa31[a252_0x124c('0x11')]['id'],'selfAssignable':!![]},{'upsert':!![]});await _0x37aa31[a252_0x124c('0x14')][a252_0x124c('0x1e')]({'embed':{'color':tesseract_1[a252_0x124c('0xe')][a252_0x124c('0x6')]['GREEN'],'description':this[a252_0x124c('0x41')][a252_0x124c('0x1a')][a252_0x124c('0x9')](_0x37aa31[a252_0x124c('0x11')][a252_0x124c('0x21')][a252_0x124c('0x3e')],a252_0x124c('0x30'),a252_0x124c('0x29'),_0x37aa31[a252_0x124c('0x16')][a252_0x124c('0x2f')],_0x3b0782[a252_0x124c('0x26')]),'footer':{'text':_0x3b0782['id']}}})['catch'](()=>{});}else if(_0x103418[a252_0x124c('0x27')]){const _0x50ca24=this[a252_0x124c('0x41')][a252_0x124c('0x3')][a252_0x124c('0x3f')](_0x37aa31['guild'],_0x103418[a252_0x124c('0x27')][a252_0x124c('0x17')]('\x20'));if(!_0x50ca24)throw new errors[(a252_0x124c('0x4'))](errors[a252_0x124c('0x38')]['ROLE_NOT_FOUND'],this['client'][a252_0x124c('0x1a')][a252_0x124c('0x9')](_0x37aa31[a252_0x124c('0x11')][a252_0x124c('0x21')][a252_0x124c('0x3e')],'errors',a252_0x124c('0x33')));await Role_1['default'][a252_0x124c('0x2a')](_0x50ca24['id'],{'$unset':{'selfAssignable':0x1}});await _0x37aa31[a252_0x124c('0x14')][a252_0x124c('0x1e')]({'embed':{'color':tesseract_1[a252_0x124c('0xe')][a252_0x124c('0x6')][a252_0x124c('0x0')],'description':this[a252_0x124c('0x41')][a252_0x124c('0x1a')]['getString'](_0x37aa31['guild'][a252_0x124c('0x21')][a252_0x124c('0x3e')],a252_0x124c('0x30'),a252_0x124c('0x3a'),_0x37aa31['author']['tag'],_0x50ca24['name']),'footer':{'text':_0x50ca24['id']}}})[a252_0x124c('0xa')](()=>{});}else{const _0x2d2d28=await Role_1[a252_0x124c('0x35')]['find']({'guild':_0x37aa31[a252_0x124c('0x11')]['id'],'selfAssignable':!![]});if(!_0x2d2d28['length']){throw new Error(this[a252_0x124c('0x41')][a252_0x124c('0x1a')][a252_0x124c('0x9')](_0x37aa31[a252_0x124c('0x11')][a252_0x124c('0x21')]['language'],a252_0x124c('0x3b'),a252_0x124c('0x1b')));}const _0x5bbd56=[];for(const _0x145561 of _0x2d2d28){if(!_0x37aa31[a252_0x124c('0x11')]['roles']['cache'][a252_0x124c('0x2')](_0x145561[a252_0x124c('0x2b')])){await _0x145561[a252_0x124c('0x27')]()[a252_0x124c('0xa')](()=>{});}_0x5bbd56[a252_0x124c('0x10')]({'name':_0x37aa31['guild'][a252_0x124c('0x36')]['cache'][a252_0x124c('0x39')](_0x145561[a252_0x124c('0x2b')])[a252_0x124c('0x26')]||'-','value':_0x145561[a252_0x124c('0x2b')]});}await _0x37aa31[a252_0x124c('0x14')][a252_0x124c('0x1e')]({'embed':{'color':tesseract_1['Constants'][a252_0x124c('0x6')][a252_0x124c('0x28')],'title':a252_0x124c('0x15'),'description':this[a252_0x124c('0x41')][a252_0x124c('0x1a')][a252_0x124c('0x9')](_0x37aa31[a252_0x124c('0x11')][a252_0x124c('0x21')]['language'],a252_0x124c('0x30'),a252_0x124c('0x20')),'fields':_0x5bbd56}})[a252_0x124c('0xa')](()=>{});}};}};
const a32_0x3c80=['channel','_id','membershipLimitSelfRoles','client','selfRolesList','default','author','isPublicBastion','document','MANAGE_ROLES','DiscordError','GREEN','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','exports','exec','push','add','selfRoles\x20--remove\x20ROLE','findByIdAndUpdate','../../utils/omnic','join','PLATINUM','length','COLORS','compile','selfRolesAdd','return\x20/\x22\x20+\x20this\x20+\x20\x22/','get','apply','remove','getString','../../utils/errors','has','premiumSelfRoles','name','roleNotFound','locale','fetchPremiumTier','constructor','PREMIUM_MEMBERSHIP_REQUIRED','guild','noSelfRoles','Command','catch','RED','test','user','resolver','LIMITED_PREMIUM_MEMBERSHIP','errors','selfRoles','cache','../../utils/constants','PremiumTier','LIMITS','SELF_ROLES','It\x20allows\x20you\x20to\x20set\x20up\x20Self\x20Roles\x20in\x20the\x20server.\x20Self\x20Roles\x20are\x20the\x20roles\x20which\x20server\x20members\x20can\x20assign\x20(and\x20unassign)\x20to\x20themselves.','IRIS','BASTION_ERROR_TYPE','ROLE_NOT_FOUND','info','language','Constants','@bastion/tesseract','send','find','GOLD','resolveRole'];(function(_0x48234b,_0x3c80b4){const _0x97d8ba=function(_0x2309eb){while(--_0x2309eb){_0x48234b['push'](_0x48234b['shift']());}};const _0x18dcb5=function(){const _0x47fd0b={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x1ddde4,_0xf08cc,_0x2a3a8d,_0x34ef6d){_0x34ef6d=_0x34ef6d||{};let _0x3968bd=_0xf08cc+'='+_0x2a3a8d;let _0x575681=0x0;for(let _0x312275=0x0,_0x42a868=_0x1ddde4['length'];_0x312275<_0x42a868;_0x312275++){const _0x2c8f12=_0x1ddde4[_0x312275];_0x3968bd+=';\x20'+_0x2c8f12;const _0x5d3394=_0x1ddde4[_0x2c8f12];_0x1ddde4['push'](_0x5d3394);_0x42a868=_0x1ddde4['length'];if(_0x5d3394!==!![]){_0x3968bd+='='+_0x5d3394;}}_0x34ef6d['cookie']=_0x3968bd;},'removeCookie':function(){return'dev';},'getCookie':function(_0x110ad4,_0x3a1486){_0x110ad4=_0x110ad4||function(_0x51cb66){return _0x51cb66;};const _0x5d2ce=_0x110ad4(new RegExp('(?:^|;\x20)'+_0x3a1486['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x481f78=function(_0x488220,_0x473494){_0x488220(++_0x473494);};_0x481f78(_0x97d8ba,_0x3c80b4);return _0x5d2ce?decodeURIComponent(_0x5d2ce[0x1]):undefined;}};const _0x44c45a=function(){const _0x292fd6=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x292fd6['test'](_0x47fd0b['removeCookie']['toString']());};_0x47fd0b['updateCookie']=_0x44c45a;let _0x1ed1f7='';const _0x1bbe3f=_0x47fd0b['updateCookie']();if(!_0x1bbe3f){_0x47fd0b['setCookie'](['*'],'counter',0x1);}else if(_0x1bbe3f){_0x1ed1f7=_0x47fd0b['getCookie'](null,'counter');}else{_0x47fd0b['removeCookie']();}};_0x18dcb5();}(a32_0x3c80,0x193));const a32_0x97d8=function(_0x48234b,_0x3c80b4){_0x48234b=_0x48234b-0x0;let _0x97d8ba=a32_0x3c80[_0x48234b];return _0x97d8ba;};const a32_0x47fd0b=function(){let _0x95f216=!![];return function(_0x57e0e9,_0x4e9ac0){const _0x503b78=_0x95f216?function(){if(_0x4e9ac0){const _0x53e9d8=_0x4e9ac0[a32_0x97d8('0x21')](_0x57e0e9,arguments);_0x4e9ac0=null;return _0x53e9d8;}}:function(){};_0x95f216=![];return _0x503b78;};}();const a32_0x2309eb=a32_0x47fd0b(this,function(){const _0x15946c=function(){const _0x306603=_0x15946c[a32_0x97d8('0x2b')](a32_0x97d8('0x1f'))()[a32_0x97d8('0x1d')](a32_0x97d8('0x11'));return!_0x306603[a32_0x97d8('0x32')](a32_0x2309eb);};return _0x15946c();});a32_0x2309eb();'use strict';const tesseract_1=require(a32_0x97d8('0x0'));const Role_1=require('../../models/Role');const constants=require(a32_0x97d8('0x39'));const errors=require(a32_0x97d8('0x24'));const omnic=require(a32_0x97d8('0x18'));module[a32_0x97d8('0x12')]=class SelfRoles extends tesseract_1[a32_0x97d8('0x2f')]{constructor(){super(a32_0x97d8('0x37'),{'description':a32_0x97d8('0x3d'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'array':['add','remove'],'string':['add',a32_0x97d8('0x22')]},'scope':a32_0x97d8('0x2d'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':['MANAGE_ROLES'],'userPermissions':[a32_0x97d8('0xe')],'syntax':[a32_0x97d8('0x37'),'selfRoles\x20--add\x20ROLE',a32_0x97d8('0x16')]});this[a32_0x97d8('0x13')]=async(_0x52508c,_0x2dea9a)=>{if(_0x2dea9a[a32_0x97d8('0x15')]){if(constants[a32_0x97d8('0xc')](this[a32_0x97d8('0x8')][a32_0x97d8('0x33')])){const _0x42c343=await Role_1[a32_0x97d8('0xa')]['countDocuments']({'guild':_0x52508c['guild']['id'],'selfAssignable':!![]});if(_0x42c343>=constants[a32_0x97d8('0x3b')][a32_0x97d8('0x3c')]){const _0x1f76be=await omnic[a32_0x97d8('0x2a')](_0x52508c[a32_0x97d8('0x2d')])['catch'](()=>{});if(_0x1f76be){if(_0x1f76be===omnic[a32_0x97d8('0x3a')][a32_0x97d8('0x3')]&&_0x42c343>=constants[a32_0x97d8('0x3b')][a32_0x97d8('0x3')]['SELF_ROLES']){throw new errors['DiscordError'](errors[a32_0x97d8('0x3f')][a32_0x97d8('0x35')],this['client']['locale']['getString'](_0x52508c[a32_0x97d8('0x2d')]['document']['language'],'errors',a32_0x97d8('0x7'),constants['LIMITS'][a32_0x97d8('0x3')][a32_0x97d8('0x3c')]));}else if(_0x1f76be===omnic['PremiumTier']['PLATINUM']&&_0x42c343>=constants['LIMITS'][a32_0x97d8('0x1a')]['SELF_ROLES']){throw new errors[(a32_0x97d8('0xf'))](errors['BASTION_ERROR_TYPE']['LIMITED_PREMIUM_MEMBERSHIP'],this['client'][a32_0x97d8('0x29')][a32_0x97d8('0x23')](_0x52508c['guild']['document']['language'],a32_0x97d8('0x36'),a32_0x97d8('0x7'),constants[a32_0x97d8('0x3b')]['PLATINUM']['SELF_ROLES']));}}else{throw new errors[(a32_0x97d8('0xf'))](errors[a32_0x97d8('0x3f')][a32_0x97d8('0x2c')],this[a32_0x97d8('0x8')]['locale'][a32_0x97d8('0x23')](_0x52508c[a32_0x97d8('0x2d')][a32_0x97d8('0xd')][a32_0x97d8('0x42')],a32_0x97d8('0x36'),a32_0x97d8('0x26'),constants[a32_0x97d8('0x3b')]['SELF_ROLES']));}}}const _0x40bead=this[a32_0x97d8('0x8')][a32_0x97d8('0x34')][a32_0x97d8('0x4')](_0x52508c[a32_0x97d8('0x2d')],_0x2dea9a[a32_0x97d8('0x15')][a32_0x97d8('0x19')]('\x20'));if(!_0x40bead)throw new errors['DiscordError'](errors[a32_0x97d8('0x3f')]['ROLE_NOT_FOUND'],this[a32_0x97d8('0x8')][a32_0x97d8('0x29')][a32_0x97d8('0x23')](_0x52508c[a32_0x97d8('0x2d')]['document'][a32_0x97d8('0x42')],a32_0x97d8('0x36'),a32_0x97d8('0x28')));await Role_1['default'][a32_0x97d8('0x17')](_0x40bead['id'],{'_id':_0x40bead['id'],'guild':_0x52508c[a32_0x97d8('0x2d')]['id'],'selfAssignable':!![]},{'upsert':!![]});await _0x52508c[a32_0x97d8('0x5')]['send']({'embed':{'color':tesseract_1[a32_0x97d8('0x43')][a32_0x97d8('0x1c')][a32_0x97d8('0x10')],'description':this[a32_0x97d8('0x8')]['locale'][a32_0x97d8('0x23')](_0x52508c[a32_0x97d8('0x2d')][a32_0x97d8('0xd')][a32_0x97d8('0x42')],a32_0x97d8('0x41'),a32_0x97d8('0x1e'),_0x52508c[a32_0x97d8('0xb')]['tag'],_0x40bead[a32_0x97d8('0x27')]),'footer':{'text':_0x40bead['id']}}})[a32_0x97d8('0x30')](()=>{});}else if(_0x2dea9a[a32_0x97d8('0x22')]){const _0x4de727=this[a32_0x97d8('0x8')][a32_0x97d8('0x34')]['resolveRole'](_0x52508c[a32_0x97d8('0x2d')],_0x2dea9a[a32_0x97d8('0x22')][a32_0x97d8('0x19')]('\x20'));if(!_0x4de727)throw new errors[(a32_0x97d8('0xf'))](errors[a32_0x97d8('0x3f')][a32_0x97d8('0x40')],this['client'][a32_0x97d8('0x29')][a32_0x97d8('0x23')](_0x52508c[a32_0x97d8('0x2d')]['document']['language'],'errors',a32_0x97d8('0x28')));await Role_1[a32_0x97d8('0xa')]['findByIdAndUpdate'](_0x4de727['id'],{'$unset':{'selfAssignable':0x1}});await _0x52508c[a32_0x97d8('0x5')][a32_0x97d8('0x1')]({'embed':{'color':tesseract_1[a32_0x97d8('0x43')][a32_0x97d8('0x1c')][a32_0x97d8('0x31')],'description':this['client'][a32_0x97d8('0x29')][a32_0x97d8('0x23')](_0x52508c[a32_0x97d8('0x2d')][a32_0x97d8('0xd')]['language'],a32_0x97d8('0x41'),'selfRolesRemove',_0x52508c[a32_0x97d8('0xb')]['tag'],_0x4de727[a32_0x97d8('0x27')]),'footer':{'text':_0x4de727['id']}}})[a32_0x97d8('0x30')](()=>{});}else{const _0x599df0=await Role_1[a32_0x97d8('0xa')][a32_0x97d8('0x2')]({'guild':_0x52508c[a32_0x97d8('0x2d')]['id'],'selfAssignable':!![]});if(!_0x599df0[a32_0x97d8('0x1b')]){throw new Error(this[a32_0x97d8('0x8')][a32_0x97d8('0x29')][a32_0x97d8('0x23')](_0x52508c[a32_0x97d8('0x2d')][a32_0x97d8('0xd')][a32_0x97d8('0x42')],a32_0x97d8('0x36'),a32_0x97d8('0x2e')));}const _0x13b907=[];for(const _0x2ad8ae of _0x599df0){if(!_0x52508c['guild']['roles'][a32_0x97d8('0x38')][a32_0x97d8('0x25')](_0x2ad8ae[a32_0x97d8('0x6')])){await _0x2ad8ae[a32_0x97d8('0x22')]()['catch'](()=>{});}_0x13b907[a32_0x97d8('0x14')]({'name':_0x52508c['guild']['roles'][a32_0x97d8('0x38')][a32_0x97d8('0x20')](_0x2ad8ae[a32_0x97d8('0x6')])[a32_0x97d8('0x27')]||'-','value':_0x2ad8ae[a32_0x97d8('0x6')]});}await _0x52508c[a32_0x97d8('0x5')][a32_0x97d8('0x1')]({'embed':{'color':tesseract_1['Constants'][a32_0x97d8('0x1c')][a32_0x97d8('0x3e')],'title':'Self\x20Roles','description':this[a32_0x97d8('0x8')]['locale']['getString'](_0x52508c['guild']['document'][a32_0x97d8('0x42')],'info',a32_0x97d8('0x9')),'fields':_0x13b907}})[a32_0x97d8('0x30')](()=>{});}};}};
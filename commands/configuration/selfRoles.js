const a32_0x55bc=['findByIdAndUpdate','channel','selfRoles','MANAGE_ROLES','getString','exec','push','cache','constructor','name','PremiumTier','../../utils/constants','COLORS','length','noSelfRoles','locale','return\x20/\x22\x20+\x20this\x20+\x20\x22/','ROLE_NOT_FOUND','find','Self\x20Roles','BASTION_ERROR_TYPE','@bastion/tesseract','Constants','PLATINUM','countDocuments','selfRolesList','Command','add','../../utils/errors','join','default','roleNotFound','guild','author','selfRoles\x20--add\x20ROLE','GREEN','_id','resolver','../../models/Role','compile','language','roles','send','catch','selfRolesAdd','document','It\x20allows\x20you\x20to\x20set\x20up\x20Self\x20Roles\x20in\x20the\x20server.\x20Self\x20Roles\x20are\x20the\x20roles\x20which\x20server\x20members\x20can\x20assign\x20(and\x20unassign)\x20to\x20themselves.','LIMITS','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','apply','fetchPremiumTier','user','selfRoles\x20--remove\x20ROLE','membershipLimitSelfRoles','remove','IRIS','LIMITED_PREMIUM_MEMBERSHIP','errors','get','info','isPublicBastion','DiscordError','premiumSelfRoles','RED','client','GOLD','tag','SELF_ROLES'];(function(_0x1f1ce1,_0x55bc7a){const _0xfc7283=function(_0x4da1c7){while(--_0x4da1c7){_0x1f1ce1['push'](_0x1f1ce1['shift']());}};const _0x5d7f41=function(){const _0x334be5={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4271bd,_0x457e82,_0x1a36b4,_0x538400){_0x538400=_0x538400||{};let _0x1b69d5=_0x457e82+'='+_0x1a36b4;let _0x2ddd1e=0x0;for(let _0x1f7083=0x0,_0x35e6bd=_0x4271bd['length'];_0x1f7083<_0x35e6bd;_0x1f7083++){const _0x4b108e=_0x4271bd[_0x1f7083];_0x1b69d5+=';\x20'+_0x4b108e;const _0x5e8eb4=_0x4271bd[_0x4b108e];_0x4271bd['push'](_0x5e8eb4);_0x35e6bd=_0x4271bd['length'];if(_0x5e8eb4!==!![]){_0x1b69d5+='='+_0x5e8eb4;}}_0x538400['cookie']=_0x1b69d5;},'removeCookie':function(){return'dev';},'getCookie':function(_0x130e98,_0x3cd7f9){_0x130e98=_0x130e98||function(_0x1bb173){return _0x1bb173;};const _0x2ed898=_0x130e98(new RegExp('(?:^|;\x20)'+_0x3cd7f9['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x46d1a5=function(_0x1cb698,_0x50b8f5){_0x1cb698(++_0x50b8f5);};_0x46d1a5(_0xfc7283,_0x55bc7a);return _0x2ed898?decodeURIComponent(_0x2ed898[0x1]):undefined;}};const _0x2b99c3=function(){const _0x4c1446=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4c1446['test'](_0x334be5['removeCookie']['toString']());};_0x334be5['updateCookie']=_0x2b99c3;let _0x67d77a='';const _0xc67369=_0x334be5['updateCookie']();if(!_0xc67369){_0x334be5['setCookie'](['*'],'counter',0x1);}else if(_0xc67369){_0x67d77a=_0x334be5['getCookie'](null,'counter');}else{_0x334be5['removeCookie']();}};_0x5d7f41();}(a32_0x55bc,0xe6));const a32_0xfc72=function(_0x1f1ce1,_0x55bc7a){_0x1f1ce1=_0x1f1ce1-0x0;let _0xfc7283=a32_0x55bc[_0x1f1ce1];return _0xfc7283;};const a32_0x334be5=function(){let _0x5a0017=!![];return function(_0x599300,_0x3a5d36){const _0x2798dc=_0x5a0017?function(){if(_0x3a5d36){const _0x314b11=_0x3a5d36[a32_0xfc72('0x17')](_0x599300,arguments);_0x3a5d36=null;return _0x314b11;}}:function(){};_0x5a0017=![];return _0x2798dc;};}();const a32_0x4da1c7=a32_0x334be5(this,function(){const _0x44f50c=function(){const _0x47243f=_0x44f50c[a32_0xfc72('0x32')](a32_0xfc72('0x3a'))()[a32_0xfc72('0xd')](a32_0xfc72('0x16'));return!_0x47243f['test'](a32_0x4da1c7);};return _0x44f50c();});a32_0x4da1c7();'use strict';const tesseract_1=require(a32_0xfc72('0x3f'));const Role_1=require(a32_0xfc72('0xc'));const constants=require(a32_0xfc72('0x35'));const errors=require(a32_0xfc72('0x2'));const omnic=require('../../utils/omnic');module['exports']=class SelfRoles extends tesseract_1[a32_0xfc72('0x0')]{constructor(){super(a32_0xfc72('0x2c'),{'description':a32_0xfc72('0x14'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'array':[a32_0xfc72('0x1'),a32_0xfc72('0x1c')],'string':[a32_0xfc72('0x1'),'remove']},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a32_0xfc72('0x2d')],'userPermissions':['MANAGE_ROLES'],'syntax':[a32_0xfc72('0x2c'),a32_0xfc72('0x8'),a32_0xfc72('0x1a')]});this[a32_0xfc72('0x2f')]=async(_0x442fe5,_0xc0ec17)=>{if(_0xc0ec17[a32_0xfc72('0x1')]){if(constants[a32_0xfc72('0x22')](this[a32_0xfc72('0x26')][a32_0xfc72('0x19')])){const _0x1949c5=await Role_1[a32_0xfc72('0x4')][a32_0xfc72('0x42')]({'guild':_0x442fe5[a32_0xfc72('0x6')]['id'],'selfAssignable':!![]});if(_0x1949c5>=constants[a32_0xfc72('0x15')][a32_0xfc72('0x29')]){const _0x2858e2=await omnic[a32_0xfc72('0x18')](_0x442fe5['guild'])['catch'](()=>{});if(_0x2858e2){if(_0x2858e2===omnic['PremiumTier']['GOLD']&&_0x1949c5>=constants[a32_0xfc72('0x15')][a32_0xfc72('0x27')][a32_0xfc72('0x29')]){throw new errors['DiscordError'](errors[a32_0xfc72('0x3e')][a32_0xfc72('0x1e')],this[a32_0xfc72('0x26')][a32_0xfc72('0x39')][a32_0xfc72('0x2e')](_0x442fe5[a32_0xfc72('0x6')][a32_0xfc72('0x13')]['language'],'errors','membershipLimitSelfRoles',constants['LIMITS']['GOLD'][a32_0xfc72('0x29')]));}else if(_0x2858e2===omnic[a32_0xfc72('0x34')][a32_0xfc72('0x41')]&&_0x1949c5>=constants[a32_0xfc72('0x15')]['PLATINUM']['SELF_ROLES']){throw new errors[(a32_0xfc72('0x23'))](errors[a32_0xfc72('0x3e')][a32_0xfc72('0x1e')],this[a32_0xfc72('0x26')]['locale']['getString'](_0x442fe5[a32_0xfc72('0x6')][a32_0xfc72('0x13')]['language'],a32_0xfc72('0x1f'),a32_0xfc72('0x1b'),constants[a32_0xfc72('0x15')]['PLATINUM'][a32_0xfc72('0x29')]));}}else{throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE']['PREMIUM_MEMBERSHIP_REQUIRED'],this[a32_0xfc72('0x26')]['locale'][a32_0xfc72('0x2e')](_0x442fe5[a32_0xfc72('0x6')][a32_0xfc72('0x13')][a32_0xfc72('0xe')],a32_0xfc72('0x1f'),a32_0xfc72('0x24'),constants[a32_0xfc72('0x15')]['SELF_ROLES']));}}}const _0x31ffbd=this['client'][a32_0xfc72('0xb')]['resolveRole'](_0x442fe5[a32_0xfc72('0x6')],_0xc0ec17[a32_0xfc72('0x1')][a32_0xfc72('0x3')]('\x20'));if(!_0x31ffbd)throw new errors['DiscordError'](errors[a32_0xfc72('0x3e')][a32_0xfc72('0x3b')],this[a32_0xfc72('0x26')][a32_0xfc72('0x39')][a32_0xfc72('0x2e')](_0x442fe5[a32_0xfc72('0x6')][a32_0xfc72('0x13')][a32_0xfc72('0xe')],a32_0xfc72('0x1f'),'roleNotFound'));await Role_1[a32_0xfc72('0x4')][a32_0xfc72('0x2a')](_0x31ffbd['id'],{'_id':_0x31ffbd['id'],'guild':_0x442fe5[a32_0xfc72('0x6')]['id'],'selfAssignable':!![]},{'upsert':!![]});await _0x442fe5[a32_0xfc72('0x2b')][a32_0xfc72('0x10')]({'embed':{'color':tesseract_1[a32_0xfc72('0x40')][a32_0xfc72('0x36')][a32_0xfc72('0x9')],'description':this[a32_0xfc72('0x26')][a32_0xfc72('0x39')]['getString'](_0x442fe5[a32_0xfc72('0x6')][a32_0xfc72('0x13')][a32_0xfc72('0xe')],a32_0xfc72('0x21'),a32_0xfc72('0x12'),_0x442fe5[a32_0xfc72('0x7')]['tag'],_0x31ffbd[a32_0xfc72('0x33')]),'footer':{'text':_0x31ffbd['id']}}})[a32_0xfc72('0x11')](()=>{});}else if(_0xc0ec17[a32_0xfc72('0x1c')]){const _0x3fa17b=this[a32_0xfc72('0x26')][a32_0xfc72('0xb')]['resolveRole'](_0x442fe5[a32_0xfc72('0x6')],_0xc0ec17['remove'][a32_0xfc72('0x3')]('\x20'));if(!_0x3fa17b)throw new errors[(a32_0xfc72('0x23'))](errors[a32_0xfc72('0x3e')]['ROLE_NOT_FOUND'],this[a32_0xfc72('0x26')]['locale'][a32_0xfc72('0x2e')](_0x442fe5[a32_0xfc72('0x6')][a32_0xfc72('0x13')]['language'],a32_0xfc72('0x1f'),a32_0xfc72('0x5')));await Role_1[a32_0xfc72('0x4')]['findByIdAndUpdate'](_0x3fa17b['id'],{'$unset':{'selfAssignable':0x1}});await _0x442fe5['channel'][a32_0xfc72('0x10')]({'embed':{'color':tesseract_1[a32_0xfc72('0x40')]['COLORS'][a32_0xfc72('0x25')],'description':this['client'][a32_0xfc72('0x39')][a32_0xfc72('0x2e')](_0x442fe5[a32_0xfc72('0x6')][a32_0xfc72('0x13')]['language'],'info','selfRolesRemove',_0x442fe5['author'][a32_0xfc72('0x28')],_0x3fa17b['name']),'footer':{'text':_0x3fa17b['id']}}})[a32_0xfc72('0x11')](()=>{});}else{const _0x4443cb=await Role_1['default'][a32_0xfc72('0x3c')]({'guild':_0x442fe5[a32_0xfc72('0x6')]['id'],'selfAssignable':!![]});if(!_0x4443cb[a32_0xfc72('0x37')]){throw new Error(this[a32_0xfc72('0x26')][a32_0xfc72('0x39')][a32_0xfc72('0x2e')](_0x442fe5[a32_0xfc72('0x6')][a32_0xfc72('0x13')][a32_0xfc72('0xe')],a32_0xfc72('0x1f'),a32_0xfc72('0x38')));}const _0x3002b0=[];for(const _0x17c19a of _0x4443cb){if(!_0x442fe5[a32_0xfc72('0x6')][a32_0xfc72('0xf')][a32_0xfc72('0x31')]['has'](_0x17c19a['_id'])){await _0x17c19a[a32_0xfc72('0x1c')]()[a32_0xfc72('0x11')](()=>{});}_0x3002b0[a32_0xfc72('0x30')]({'name':_0x442fe5[a32_0xfc72('0x6')]['roles'][a32_0xfc72('0x31')][a32_0xfc72('0x20')](_0x17c19a[a32_0xfc72('0xa')])['name']||'-','value':_0x17c19a['_id']});}await _0x442fe5[a32_0xfc72('0x2b')][a32_0xfc72('0x10')]({'embed':{'color':tesseract_1[a32_0xfc72('0x40')]['COLORS'][a32_0xfc72('0x1d')],'title':a32_0xfc72('0x3d'),'description':this['client'][a32_0xfc72('0x39')][a32_0xfc72('0x2e')](_0x442fe5[a32_0xfc72('0x6')]['document'][a32_0xfc72('0xe')],a32_0xfc72('0x21'),a32_0xfc72('0x43')),'fields':_0x3002b0}})[a32_0xfc72('0x11')](()=>{});}};}};
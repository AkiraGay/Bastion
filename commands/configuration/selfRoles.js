const a32_0x11ed=['COLORS','locale','MANAGE_ROLES','errors','default','tag','document','../../models/Role','ROLE_NOT_FOUND','push','exec','join','language','membershipLimitSelfRoles','isPublicBastion','cache','constructor','SELF_ROLES','selfRolesList','info','Constants','GOLD','resolver','channel','Self\x20Roles','name','get','../../utils/errors','user','GREEN','roleNotFound','_id','client','resolveRole','DiscordError','IRIS','../../utils/omnic','add','BASTION_ERROR_TYPE','selfRolesRemove','PremiumTier','exports','guild','RED','return\x20/\x22\x20+\x20this\x20+\x20\x22/','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','countDocuments','LIMITS','getString','roles','premiumSelfRoles','LIMITED_PREMIUM_MEMBERSHIP','selfRoles\x20--add\x20ROLE','@bastion/tesseract','catch','fetchPremiumTier','has','send','selfRoles','find','remove','noSelfRoles','It\x20allows\x20you\x20to\x20set\x20up\x20Self\x20Roles\x20in\x20the\x20server.\x20Self\x20Roles\x20are\x20the\x20roles\x20which\x20server\x20members\x20can\x20assign\x20(and\x20unassign)\x20to\x20themselves.','PLATINUM','Command','author'];(function(_0x3a2244,_0x11edf2){const _0x4f39d2=function(_0x32b6c2){while(--_0x32b6c2){_0x3a2244['push'](_0x3a2244['shift']());}},_0x2d5857=function(){const _0x41284a={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x139369,_0x439506,_0x2c36cd,_0xed00a){_0xed00a=_0xed00a||{};let _0x42adb1=_0x439506+'='+_0x2c36cd,_0x47608f=0x0;for(let _0x13d587=0x0,_0x5bf923=_0x139369['length'];_0x13d587<_0x5bf923;_0x13d587++){const _0x6f18a4=_0x139369[_0x13d587];_0x42adb1+=';\x20'+_0x6f18a4;const _0x54ea65=_0x139369[_0x6f18a4];_0x139369['push'](_0x54ea65),_0x5bf923=_0x139369['length'],_0x54ea65!==!![]&&(_0x42adb1+='='+_0x54ea65);}_0xed00a['cookie']=_0x42adb1;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3ebb94,_0x4b1c20){_0x3ebb94=_0x3ebb94||function(_0x5e0b0f){return _0x5e0b0f;};const _0x25ca57=_0x3ebb94(new RegExp('(?:^|;\x20)'+_0x4b1c20['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x55abb5=function(_0x1826f7,_0x55f423){_0x1826f7(++_0x55f423);};return _0x55abb5(_0x4f39d2,_0x11edf2),_0x25ca57?decodeURIComponent(_0x25ca57[0x1]):undefined;}},_0x355a1a=function(){const _0x4038be=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4038be['test'](_0x41284a['removeCookie']['toString']());};_0x41284a['updateCookie']=_0x355a1a;let _0x3b01a9='';const _0x4c89ae=_0x41284a['updateCookie']();if(!_0x4c89ae)_0x41284a['setCookie'](['*'],'counter',0x1);else _0x4c89ae?_0x3b01a9=_0x41284a['getCookie'](null,'counter'):_0x41284a['removeCookie']();};_0x2d5857();}(a32_0x11ed,0x158));const a32_0x4f39=function(_0x3a2244,_0x11edf2){_0x3a2244=_0x3a2244-0x0;let _0x4f39d2=a32_0x11ed[_0x3a2244];return _0x4f39d2;};const a32_0x41284a=function(){let _0x3b01a9=!![];return function(_0x4c89ae,_0x139369){const _0x439506=_0x3b01a9?function(){if(_0x139369){const _0x2c36cd=_0x139369['apply'](_0x4c89ae,arguments);return _0x139369=null,_0x2c36cd;}}:function(){};return _0x3b01a9=![],_0x439506;};}(),a32_0x32b6c2=a32_0x41284a(this,function(){const _0xed00a=function(){const _0x42adb1=_0xed00a[a32_0x4f39('0x2')](a32_0x4f39('0x1e'))()[a32_0x4f39('0x2')](a32_0x4f39('0x1f'));return!_0x42adb1['test'](a32_0x32b6c2);};return _0xed00a();});a32_0x32b6c2();'use strict';const tesseract_1=require(a32_0x4f39('0x27')),Role_1=require(a32_0x4f39('0x3b')),constants=require('../../utils/constants'),errors=require(a32_0x4f39('0xd')),omnic=require(a32_0x4f39('0x16'));module[a32_0x4f39('0x1b')]=class SelfRoles extends tesseract_1[a32_0x4f39('0x32')]{constructor(){super(a32_0x4f39('0x2c'),{'description':a32_0x4f39('0x30'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'array':[a32_0x4f39('0x17'),'remove'],'string':['add',a32_0x4f39('0x2e')]},'scope':a32_0x4f39('0x1c'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a32_0x4f39('0x36')],'userPermissions':[a32_0x4f39('0x36')],'syntax':[a32_0x4f39('0x2c'),a32_0x4f39('0x26'),'selfRoles\x20--remove\x20ROLE']}),this[a32_0x4f39('0x3e')]=async(_0x47608f,_0x13d587)=>{if(_0x13d587[a32_0x4f39('0x17')]){if(constants[a32_0x4f39('0x0')](this[a32_0x4f39('0x12')][a32_0x4f39('0xe')])){const _0x6f18a4=await Role_1[a32_0x4f39('0x38')][a32_0x4f39('0x20')]({'guild':_0x47608f[a32_0x4f39('0x1c')]['id'],'selfAssignable':!![]});if(_0x6f18a4>=constants[a32_0x4f39('0x21')][a32_0x4f39('0x3')]){const _0x54ea65=await omnic[a32_0x4f39('0x29')](_0x47608f[a32_0x4f39('0x1c')])[a32_0x4f39('0x28')](()=>{});if(_0x54ea65){if(_0x54ea65===omnic[a32_0x4f39('0x1a')][a32_0x4f39('0x7')]&&_0x6f18a4>=constants[a32_0x4f39('0x21')]['GOLD'][a32_0x4f39('0x3')])throw new errors[(a32_0x4f39('0x14'))](errors['BASTION_ERROR_TYPE'][a32_0x4f39('0x25')],this[a32_0x4f39('0x12')][a32_0x4f39('0x35')][a32_0x4f39('0x22')](_0x47608f['guild']['document'][a32_0x4f39('0x40')],a32_0x4f39('0x37'),a32_0x4f39('0x41'),constants[a32_0x4f39('0x21')][a32_0x4f39('0x7')][a32_0x4f39('0x3')]));else{if(_0x54ea65===omnic['PremiumTier'][a32_0x4f39('0x31')]&&_0x6f18a4>=constants['LIMITS'][a32_0x4f39('0x31')][a32_0x4f39('0x3')])throw new errors[(a32_0x4f39('0x14'))](errors[a32_0x4f39('0x18')]['LIMITED_PREMIUM_MEMBERSHIP'],this[a32_0x4f39('0x12')][a32_0x4f39('0x35')]['getString'](_0x47608f[a32_0x4f39('0x1c')][a32_0x4f39('0x3a')][a32_0x4f39('0x40')],a32_0x4f39('0x37'),'membershipLimitSelfRoles',constants[a32_0x4f39('0x21')][a32_0x4f39('0x31')][a32_0x4f39('0x3')]));}}else throw new errors['DiscordError'](errors[a32_0x4f39('0x18')]['PREMIUM_MEMBERSHIP_REQUIRED'],this[a32_0x4f39('0x12')]['locale'][a32_0x4f39('0x22')](_0x47608f[a32_0x4f39('0x1c')][a32_0x4f39('0x3a')][a32_0x4f39('0x40')],a32_0x4f39('0x37'),a32_0x4f39('0x24'),constants[a32_0x4f39('0x21')]['SELF_ROLES']));}}const _0x5bf923=this[a32_0x4f39('0x12')][a32_0x4f39('0x8')][a32_0x4f39('0x13')](_0x47608f[a32_0x4f39('0x1c')],_0x13d587[a32_0x4f39('0x17')][a32_0x4f39('0x3f')]('\x20'));if(!_0x5bf923)throw new errors['DiscordError'](errors[a32_0x4f39('0x18')][a32_0x4f39('0x3c')],this[a32_0x4f39('0x12')][a32_0x4f39('0x35')]['getString'](_0x47608f[a32_0x4f39('0x1c')]['document'][a32_0x4f39('0x40')],a32_0x4f39('0x37'),a32_0x4f39('0x10')));await Role_1[a32_0x4f39('0x38')]['findByIdAndUpdate'](_0x5bf923['id'],{'_id':_0x5bf923['id'],'guild':_0x47608f[a32_0x4f39('0x1c')]['id'],'selfAssignable':!![]},{'upsert':!![]}),await _0x47608f[a32_0x4f39('0x9')][a32_0x4f39('0x2b')]({'embed':{'color':tesseract_1[a32_0x4f39('0x6')][a32_0x4f39('0x34')][a32_0x4f39('0xf')],'description':this[a32_0x4f39('0x12')][a32_0x4f39('0x35')][a32_0x4f39('0x22')](_0x47608f[a32_0x4f39('0x1c')]['document'][a32_0x4f39('0x40')],a32_0x4f39('0x5'),'selfRolesAdd',_0x47608f[a32_0x4f39('0x33')]['tag'],_0x5bf923[a32_0x4f39('0xb')]),'footer':{'text':_0x5bf923['id']}}})[a32_0x4f39('0x28')](()=>{});}else{if(_0x13d587[a32_0x4f39('0x2e')]){const _0x3ebb94=this[a32_0x4f39('0x12')]['resolver']['resolveRole'](_0x47608f['guild'],_0x13d587[a32_0x4f39('0x2e')][a32_0x4f39('0x3f')]('\x20'));if(!_0x3ebb94)throw new errors[(a32_0x4f39('0x14'))](errors[a32_0x4f39('0x18')]['ROLE_NOT_FOUND'],this[a32_0x4f39('0x12')]['locale'][a32_0x4f39('0x22')](_0x47608f[a32_0x4f39('0x1c')][a32_0x4f39('0x3a')]['language'],a32_0x4f39('0x37'),a32_0x4f39('0x10')));await Role_1[a32_0x4f39('0x38')]['findByIdAndUpdate'](_0x3ebb94['id'],{'$unset':{'selfAssignable':0x1}}),await _0x47608f[a32_0x4f39('0x9')][a32_0x4f39('0x2b')]({'embed':{'color':tesseract_1[a32_0x4f39('0x6')][a32_0x4f39('0x34')][a32_0x4f39('0x1d')],'description':this['client'][a32_0x4f39('0x35')]['getString'](_0x47608f[a32_0x4f39('0x1c')]['document'][a32_0x4f39('0x40')],a32_0x4f39('0x5'),a32_0x4f39('0x19'),_0x47608f[a32_0x4f39('0x33')][a32_0x4f39('0x39')],_0x3ebb94[a32_0x4f39('0xb')]),'footer':{'text':_0x3ebb94['id']}}})[a32_0x4f39('0x28')](()=>{});}else{const _0x4b1c20=await Role_1[a32_0x4f39('0x38')][a32_0x4f39('0x2d')]({'guild':_0x47608f['guild']['id'],'selfAssignable':!![]});if(!_0x4b1c20['length'])throw new Error(this[a32_0x4f39('0x12')][a32_0x4f39('0x35')][a32_0x4f39('0x22')](_0x47608f[a32_0x4f39('0x1c')]['document']['language'],a32_0x4f39('0x37'),a32_0x4f39('0x2f')));const _0x25ca57=[];for(const _0x55abb5 of _0x4b1c20){!_0x47608f[a32_0x4f39('0x1c')][a32_0x4f39('0x23')][a32_0x4f39('0x1')][a32_0x4f39('0x2a')](_0x55abb5[a32_0x4f39('0x11')])&&await _0x55abb5[a32_0x4f39('0x2e')]()['catch'](()=>{}),_0x25ca57[a32_0x4f39('0x3d')]({'name':_0x47608f[a32_0x4f39('0x1c')]['roles']['cache'][a32_0x4f39('0xc')](_0x55abb5[a32_0x4f39('0x11')])[a32_0x4f39('0xb')]||'-','value':_0x55abb5[a32_0x4f39('0x11')]});}await _0x47608f[a32_0x4f39('0x9')][a32_0x4f39('0x2b')]({'embed':{'color':tesseract_1[a32_0x4f39('0x6')][a32_0x4f39('0x34')][a32_0x4f39('0x15')],'title':a32_0x4f39('0xa'),'description':this[a32_0x4f39('0x12')][a32_0x4f39('0x35')][a32_0x4f39('0x22')](_0x47608f[a32_0x4f39('0x1c')][a32_0x4f39('0x3a')][a32_0x4f39('0x40')],a32_0x4f39('0x5'),a32_0x4f39('0x4')),'fields':_0x25ca57}})['catch'](()=>{});}}};}};
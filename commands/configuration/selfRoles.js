const a33_0x8c0b=['../../models/Role','roleNotFound','selfRoles\x20--remove\x20ROLE','../../utils/errors','tag','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','guild','noSelfRoles','channel','findByIdAndUpdate','language','selfRolesRemove','roles','LIMITS','name','add','GREEN','DiscordError','remove','COLORS','resolveRole','BASTION_ERROR_TYPE','client','has','document','return\x20/\x22\x20+\x20this\x20+\x20\x22/','getString','PremiumTier','premiumSelfRoles','Self\x20Roles','exports','resolver','get','selfRolesAdd','errors','info','exec','MANAGE_ROLES','@bastion/tesseract','_id','selfRoles','Constants','length','PLATINUM','../../utils/omnic','countDocuments','isPublicBastion','LIMITED_PREMIUM_MEMBERSHIP','fetchPremiumTier','default','locale','../../utils/constants','catch','GOLD','SELF_ROLES','push','author','send','join','membershipLimitSelfRoles','It\x20allows\x20you\x20to\x20set\x20up\x20Self\x20Roles\x20in\x20the\x20server.\x20Self\x20Roles\x20are\x20the\x20roles\x20which\x20server\x20members\x20can\x20assign\x20(and\x20unassign)\x20to\x20themselves.','selfRoles\x20--add\x20ROLE','ROLE_NOT_FOUND','test'];(function(_0xa99a6f,_0x8c0b15){const _0x5d9e4e=function(_0x4e9a5b){while(--_0x4e9a5b){_0xa99a6f['push'](_0xa99a6f['shift']());}},_0x132332=function(){const _0x36bfca={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x218bab,_0x17beac,_0xce2cae,_0x4327ec){_0x4327ec=_0x4327ec||{};let _0x3da6e5=_0x17beac+'='+_0xce2cae,_0x53a37a=0x0;for(let _0x3bc2b5=0x0,_0x41181b=_0x218bab['length'];_0x3bc2b5<_0x41181b;_0x3bc2b5++){const _0x30a922=_0x218bab[_0x3bc2b5];_0x3da6e5+=';\x20'+_0x30a922;const _0x2d8e43=_0x218bab[_0x30a922];_0x218bab['push'](_0x2d8e43),_0x41181b=_0x218bab['length'],_0x2d8e43!==!![]&&(_0x3da6e5+='='+_0x2d8e43);}_0x4327ec['cookie']=_0x3da6e5;},'removeCookie':function(){return'dev';},'getCookie':function(_0x131d73,_0x3543b5){_0x131d73=_0x131d73||function(_0x55fdea){return _0x55fdea;};const _0x458b59=_0x131d73(new RegExp('(?:^|;\x20)'+_0x3543b5['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x42c49e=function(_0x4f563d,_0x1c7eb5){_0x4f563d(++_0x1c7eb5);};return _0x42c49e(_0x5d9e4e,_0x8c0b15),_0x458b59?decodeURIComponent(_0x458b59[0x1]):undefined;}},_0x32518f=function(){const _0x5b833f=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x5b833f['test'](_0x36bfca['removeCookie']['toString']());};_0x36bfca['updateCookie']=_0x32518f;let _0x26d731='';const _0x15fada=_0x36bfca['updateCookie']();if(!_0x15fada)_0x36bfca['setCookie'](['*'],'counter',0x1);else _0x15fada?_0x26d731=_0x36bfca['getCookie'](null,'counter'):_0x36bfca['removeCookie']();};_0x132332();}(a33_0x8c0b,0x8b));const a33_0x5d9e=function(_0xa99a6f,_0x8c0b15){_0xa99a6f=_0xa99a6f-0x0;let _0x5d9e4e=a33_0x8c0b[_0xa99a6f];return _0x5d9e4e;};const _0x4eda3d=a33_0x5d9e,a33_0x36bfca=function(){let _0x26d731=!![];return function(_0x15fada,_0x218bab){const _0x17beac=_0x26d731?function(){if(_0x218bab){const _0xce2cae=_0x218bab['apply'](_0x15fada,arguments);return _0x218bab=null,_0xce2cae;}}:function(){};return _0x26d731=![],_0x17beac;};}(),a33_0x4e9a5b=a33_0x36bfca(this,function(){const _0x4327ec=function(){const _0x57d438=a33_0x5d9e,_0x3da6e5=_0x4327ec['constructor'](_0x57d438('0xe'))()['constructor'](_0x57d438('0x3a'));return!_0x3da6e5[_0x57d438('0x34')](a33_0x4e9a5b);};return _0x4327ec();});a33_0x4e9a5b();'use strict';const tesseract_1=require(_0x4eda3d('0x1b')),Role_1=require(_0x4eda3d('0x35')),constants=require(_0x4eda3d('0x28')),errors=require(_0x4eda3d('0x38')),omnic=require(_0x4eda3d('0x21'));module[_0x4eda3d('0x13')]=class SelfRoles extends tesseract_1['Command']{constructor(){const _0x1323d4=_0x4eda3d;super(_0x1323d4('0x1d'),{'description':_0x1323d4('0x31'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'array':[_0x1323d4('0x4'),_0x1323d4('0x7')],'string':[_0x1323d4('0x4'),_0x1323d4('0x7')]},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[_0x1323d4('0x1a')],'userPermissions':[_0x1323d4('0x1a')],'syntax':[_0x1323d4('0x1d'),_0x1323d4('0x32'),_0x1323d4('0x37')]}),this[_0x1323d4('0x19')]=async(_0x53a37a,_0x3bc2b5)=>{const _0x214ad6=_0x1323d4;if(_0x3bc2b5[_0x214ad6('0x4')]){if(constants[_0x214ad6('0x23')](this[_0x214ad6('0xb')]['user'])){const _0x30a922=await Role_1[_0x214ad6('0x26')][_0x214ad6('0x22')]({'guild':_0x53a37a[_0x214ad6('0x3b')]['id'],'selfAssignable':!![]});if(_0x30a922>=constants[_0x214ad6('0x2')][_0x214ad6('0x2b')]){const _0x2d8e43=await omnic[_0x214ad6('0x25')](_0x53a37a[_0x214ad6('0x3b')])[_0x214ad6('0x29')](()=>{});if(_0x2d8e43){if(_0x2d8e43===omnic[_0x214ad6('0x10')]['GOLD']&&_0x30a922>=constants['LIMITS'][_0x214ad6('0x2a')][_0x214ad6('0x2b')])throw new errors[(_0x214ad6('0x6'))](errors[_0x214ad6('0xa')][_0x214ad6('0x24')],this[_0x214ad6('0xb')]['locale'][_0x214ad6('0xf')](_0x53a37a[_0x214ad6('0x3b')]['document'][_0x214ad6('0x3f')],_0x214ad6('0x17'),_0x214ad6('0x30'),constants['LIMITS'][_0x214ad6('0x2a')][_0x214ad6('0x2b')]));else{if(_0x2d8e43===omnic['PremiumTier'][_0x214ad6('0x20')]&&_0x30a922>=constants[_0x214ad6('0x2')]['PLATINUM'][_0x214ad6('0x2b')])throw new errors[(_0x214ad6('0x6'))](errors[_0x214ad6('0xa')]['LIMITED_PREMIUM_MEMBERSHIP'],this[_0x214ad6('0xb')][_0x214ad6('0x27')][_0x214ad6('0xf')](_0x53a37a[_0x214ad6('0x3b')]['document']['language'],_0x214ad6('0x17'),'membershipLimitSelfRoles',constants['LIMITS'][_0x214ad6('0x20')][_0x214ad6('0x2b')]));}}else throw new errors['DiscordError'](errors[_0x214ad6('0xa')]['PREMIUM_MEMBERSHIP_REQUIRED'],this[_0x214ad6('0xb')][_0x214ad6('0x27')]['getString'](_0x53a37a[_0x214ad6('0x3b')][_0x214ad6('0xd')][_0x214ad6('0x3f')],_0x214ad6('0x17'),_0x214ad6('0x11'),constants[_0x214ad6('0x2')]['SELF_ROLES']));}}const _0x41181b=this[_0x214ad6('0xb')][_0x214ad6('0x14')][_0x214ad6('0x9')](_0x53a37a['guild'],_0x3bc2b5[_0x214ad6('0x4')][_0x214ad6('0x2f')]('\x20'));if(!_0x41181b)throw new errors[(_0x214ad6('0x6'))](errors[_0x214ad6('0xa')][_0x214ad6('0x33')],this[_0x214ad6('0xb')][_0x214ad6('0x27')][_0x214ad6('0xf')](_0x53a37a[_0x214ad6('0x3b')]['document']['language'],'errors',_0x214ad6('0x36')));await Role_1[_0x214ad6('0x26')][_0x214ad6('0x3e')](_0x41181b['id'],{'_id':_0x41181b['id'],'guild':_0x53a37a[_0x214ad6('0x3b')]['id'],'selfAssignable':!![]},{'upsert':!![]}),await _0x53a37a[_0x214ad6('0x3d')][_0x214ad6('0x2e')]({'embed':{'color':tesseract_1[_0x214ad6('0x1e')][_0x214ad6('0x8')][_0x214ad6('0x5')],'description':this[_0x214ad6('0xb')][_0x214ad6('0x27')][_0x214ad6('0xf')](_0x53a37a[_0x214ad6('0x3b')][_0x214ad6('0xd')][_0x214ad6('0x3f')],_0x214ad6('0x18'),_0x214ad6('0x16'),_0x53a37a[_0x214ad6('0x2d')]['tag'],_0x41181b[_0x214ad6('0x3')]),'footer':{'text':_0x41181b['id']}}})[_0x214ad6('0x29')](()=>{});}else{if(_0x3bc2b5[_0x214ad6('0x7')]){const _0x131d73=this[_0x214ad6('0xb')][_0x214ad6('0x14')][_0x214ad6('0x9')](_0x53a37a[_0x214ad6('0x3b')],_0x3bc2b5[_0x214ad6('0x7')][_0x214ad6('0x2f')]('\x20'));if(!_0x131d73)throw new errors[(_0x214ad6('0x6'))](errors[_0x214ad6('0xa')][_0x214ad6('0x33')],this[_0x214ad6('0xb')][_0x214ad6('0x27')][_0x214ad6('0xf')](_0x53a37a['guild'][_0x214ad6('0xd')][_0x214ad6('0x3f')],_0x214ad6('0x17'),_0x214ad6('0x36')));await Role_1[_0x214ad6('0x26')][_0x214ad6('0x3e')](_0x131d73['id'],{'$unset':{'selfAssignable':0x1}}),await _0x53a37a['channel'][_0x214ad6('0x2e')]({'embed':{'color':tesseract_1[_0x214ad6('0x1e')][_0x214ad6('0x8')]['RED'],'description':this['client'][_0x214ad6('0x27')]['getString'](_0x53a37a['guild'][_0x214ad6('0xd')][_0x214ad6('0x3f')],'info',_0x214ad6('0x0'),_0x53a37a[_0x214ad6('0x2d')][_0x214ad6('0x39')],_0x131d73[_0x214ad6('0x3')]),'footer':{'text':_0x131d73['id']}}})[_0x214ad6('0x29')](()=>{});}else{const _0x3543b5=await Role_1[_0x214ad6('0x26')]['find']({'guild':_0x53a37a[_0x214ad6('0x3b')]['id'],'selfAssignable':!![]});if(!_0x3543b5[_0x214ad6('0x1f')])throw new Error(this[_0x214ad6('0xb')][_0x214ad6('0x27')][_0x214ad6('0xf')](_0x53a37a['guild'][_0x214ad6('0xd')]['language'],_0x214ad6('0x17'),_0x214ad6('0x3c')));const _0x458b59=[];for(const _0x42c49e of _0x3543b5){!_0x53a37a[_0x214ad6('0x3b')][_0x214ad6('0x1')]['cache'][_0x214ad6('0xc')](_0x42c49e[_0x214ad6('0x1c')])&&await _0x42c49e[_0x214ad6('0x7')]()['catch'](()=>{}),_0x458b59[_0x214ad6('0x2c')]({'name':_0x53a37a['guild'][_0x214ad6('0x1')]['cache'][_0x214ad6('0x15')](_0x42c49e['_id'])['name']||'-','value':_0x42c49e['_id']});}await _0x53a37a[_0x214ad6('0x3d')][_0x214ad6('0x2e')]({'embed':{'color':tesseract_1[_0x214ad6('0x1e')]['COLORS']['IRIS'],'title':_0x214ad6('0x12'),'description':this[_0x214ad6('0xb')][_0x214ad6('0x27')][_0x214ad6('0xf')](_0x53a37a['guild'][_0x214ad6('0xd')][_0x214ad6('0x3f')],_0x214ad6('0x18'),'selfRolesList'),'fields':_0x458b59}})[_0x214ad6('0x29')](()=>{});}}};}};
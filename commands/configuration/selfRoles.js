const a33_0x10b8=['guild','premiumSelfRoles','catch','PLATINUM','selfRolesAdd','tag','selfRoles','BASTION_ERROR_TYPE','channel','language','PremiumTier','locale','@bastion/tesseract','send','client','_id','name','get','info','SELF_ROLES','findByIdAndUpdate','It\x20allows\x20you\x20to\x20set\x20up\x20Self\x20Roles\x20in\x20the\x20server.\x20Self\x20Roles\x20are\x20the\x20roles\x20which\x20server\x20members\x20can\x20assign\x20(and\x20unassign)\x20to\x20themselves.','selfRolesRemove','LIMITS','getString','length','exec','RED','ROLE_NOT_FOUND','default','Constants','isPublicBastion','resolver','roleNotFound','MANAGE_ROLES','DiscordError','author','cache','selfRoles\x20--remove\x20ROLE','Self\x20Roles','../../utils/omnic','errors','constructor','has','user','COLORS','noSelfRoles','remove','LIMITED_PREMIUM_MEMBERSHIP','../../utils/constants','selfRoles\x20--add\x20ROLE','GOLD','PREMIUM_MEMBERSHIP_REQUIRED','../../models/Role','IRIS','return\x20/\x22\x20+\x20this\x20+\x20\x22/','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','find','join','resolveRole','../../utils/errors','document','add'];(function(_0xd1d06,_0x10b853){const _0x4eb6d0=function(_0x42f6b0){while(--_0x42f6b0){_0xd1d06['push'](_0xd1d06['shift']());}},_0x538efa=function(){const _0x490b3c={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x513e6e,_0x31e617,_0x2189c4,_0xf95072){_0xf95072=_0xf95072||{};let _0x3c8cdc=_0x31e617+'='+_0x2189c4,_0x5da109=0x0;for(let _0x31ccf6=0x0,_0x5d93e5=_0x513e6e['length'];_0x31ccf6<_0x5d93e5;_0x31ccf6++){const _0x41b82e=_0x513e6e[_0x31ccf6];_0x3c8cdc+=';\x20'+_0x41b82e;const _0x510167=_0x513e6e[_0x41b82e];_0x513e6e['push'](_0x510167),_0x5d93e5=_0x513e6e['length'],_0x510167!==!![]&&(_0x3c8cdc+='='+_0x510167);}_0xf95072['cookie']=_0x3c8cdc;},'removeCookie':function(){return'dev';},'getCookie':function(_0x165377,_0x255fa2){_0x165377=_0x165377||function(_0x4e6809){return _0x4e6809;};const _0x4fd799=_0x165377(new RegExp('(?:^|;\x20)'+_0x255fa2['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x213881=function(_0x11fe0a,_0x212a0d){_0x11fe0a(++_0x212a0d);};return _0x213881(_0x4eb6d0,_0x10b853),_0x4fd799?decodeURIComponent(_0x4fd799[0x1]):undefined;}},_0x370082=function(){const _0x3ba01b=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3ba01b['test'](_0x490b3c['removeCookie']['toString']());};_0x490b3c['updateCookie']=_0x370082;let _0x4dae68='';const _0x582863=_0x490b3c['updateCookie']();if(!_0x582863)_0x490b3c['setCookie'](['*'],'counter',0x1);else _0x582863?_0x4dae68=_0x490b3c['getCookie'](null,'counter'):_0x490b3c['removeCookie']();};_0x538efa();}(a33_0x10b8,0x162));const a33_0x4eb6=function(_0xd1d06,_0x10b853){_0xd1d06=_0xd1d06-0x0;let _0x4eb6d0=a33_0x10b8[_0xd1d06];return _0x4eb6d0;};const _0x41cbf8=a33_0x4eb6,a33_0x490b3c=function(){let _0x4dae68=!![];return function(_0x582863,_0x513e6e){const _0x31e617=_0x4dae68?function(){if(_0x513e6e){const _0x2189c4=_0x513e6e['apply'](_0x582863,arguments);return _0x513e6e=null,_0x2189c4;}}:function(){};return _0x4dae68=![],_0x31e617;};}(),a33_0x42f6b0=a33_0x490b3c(this,function(){const _0xf95072=function(){const _0x5f1e79=a33_0x4eb6,_0x3c8cdc=_0xf95072[_0x5f1e79('0x3')](_0x5f1e79('0x10'))()[_0x5f1e79('0x3')](_0x5f1e79('0x11'));return!_0x3c8cdc['test'](a33_0x42f6b0);};return _0xf95072();});a33_0x42f6b0();'use strict';const tesseract_1=require(_0x41cbf8('0x24')),Role_1=require(_0x41cbf8('0xe')),constants=require(_0x41cbf8('0xa')),errors=require(_0x41cbf8('0x15')),omnic=require(_0x41cbf8('0x1'));module['exports']=class SelfRoles extends tesseract_1['Command']{constructor(){const _0x6dbad4=_0x41cbf8;super(_0x6dbad4('0x1e'),{'description':_0x6dbad4('0x2d'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'array':[_0x6dbad4('0x17'),'remove'],'string':[_0x6dbad4('0x17'),'remove']},'scope':_0x6dbad4('0x18'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[_0x6dbad4('0x3a')],'userPermissions':['MANAGE_ROLES'],'syntax':['selfRoles',_0x6dbad4('0xb'),_0x6dbad4('0x3e')]}),this[_0x6dbad4('0x32')]=async(_0x5da109,_0x31ccf6)=>{const _0xc78de7=_0x6dbad4;if(_0x31ccf6[_0xc78de7('0x17')]){if(constants[_0xc78de7('0x37')](this[_0xc78de7('0x26')][_0xc78de7('0x5')])){const _0x41b82e=await Role_1[_0xc78de7('0x35')]['countDocuments']({'guild':_0x5da109[_0xc78de7('0x18')]['id'],'selfAssignable':!![]});if(_0x41b82e>=constants[_0xc78de7('0x2f')][_0xc78de7('0x2b')]){const _0x510167=await omnic['fetchPremiumTier'](_0x5da109[_0xc78de7('0x18')])[_0xc78de7('0x1a')](()=>{});if(_0x510167){if(_0x510167===omnic['PremiumTier'][_0xc78de7('0xc')]&&_0x41b82e>=constants['LIMITS']['GOLD']['SELF_ROLES'])throw new errors[(_0xc78de7('0x3b'))](errors['BASTION_ERROR_TYPE']['LIMITED_PREMIUM_MEMBERSHIP'],this[_0xc78de7('0x26')]['locale'][_0xc78de7('0x30')](_0x5da109['guild'][_0xc78de7('0x16')]['language'],_0xc78de7('0x2'),'membershipLimitSelfRoles',constants[_0xc78de7('0x2f')][_0xc78de7('0xc')][_0xc78de7('0x2b')]));else{if(_0x510167===omnic[_0xc78de7('0x22')][_0xc78de7('0x1b')]&&_0x41b82e>=constants[_0xc78de7('0x2f')]['PLATINUM'][_0xc78de7('0x2b')])throw new errors[(_0xc78de7('0x3b'))](errors['BASTION_ERROR_TYPE'][_0xc78de7('0x9')],this[_0xc78de7('0x26')][_0xc78de7('0x23')]['getString'](_0x5da109[_0xc78de7('0x18')]['document'][_0xc78de7('0x21')],_0xc78de7('0x2'),'membershipLimitSelfRoles',constants['LIMITS'][_0xc78de7('0x1b')][_0xc78de7('0x2b')]));}}else throw new errors[(_0xc78de7('0x3b'))](errors[_0xc78de7('0x1f')][_0xc78de7('0xd')],this[_0xc78de7('0x26')]['locale']['getString'](_0x5da109[_0xc78de7('0x18')][_0xc78de7('0x16')][_0xc78de7('0x21')],'errors',_0xc78de7('0x19'),constants[_0xc78de7('0x2f')][_0xc78de7('0x2b')]));}}const _0x5d93e5=this[_0xc78de7('0x26')][_0xc78de7('0x38')][_0xc78de7('0x14')](_0x5da109[_0xc78de7('0x18')],_0x31ccf6['add'][_0xc78de7('0x13')]('\x20'));if(!_0x5d93e5)throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][_0xc78de7('0x34')],this[_0xc78de7('0x26')]['locale'][_0xc78de7('0x30')](_0x5da109[_0xc78de7('0x18')][_0xc78de7('0x16')]['language'],'errors',_0xc78de7('0x39')));await Role_1[_0xc78de7('0x35')][_0xc78de7('0x2c')](_0x5d93e5['id'],{'_id':_0x5d93e5['id'],'guild':_0x5da109['guild']['id'],'selfAssignable':!![]},{'upsert':!![]}),await _0x5da109['channel']['send']({'embed':{'color':tesseract_1['Constants']['COLORS']['GREEN'],'description':this[_0xc78de7('0x26')][_0xc78de7('0x23')][_0xc78de7('0x30')](_0x5da109[_0xc78de7('0x18')]['document'][_0xc78de7('0x21')],_0xc78de7('0x2a'),_0xc78de7('0x1c'),_0x5da109['author'][_0xc78de7('0x1d')],_0x5d93e5[_0xc78de7('0x28')]),'footer':{'text':_0x5d93e5['id']}}})['catch'](()=>{});}else{if(_0x31ccf6[_0xc78de7('0x8')]){const _0x165377=this['client']['resolver'][_0xc78de7('0x14')](_0x5da109['guild'],_0x31ccf6[_0xc78de7('0x8')][_0xc78de7('0x13')]('\x20'));if(!_0x165377)throw new errors[(_0xc78de7('0x3b'))](errors[_0xc78de7('0x1f')]['ROLE_NOT_FOUND'],this[_0xc78de7('0x26')][_0xc78de7('0x23')][_0xc78de7('0x30')](_0x5da109['guild'][_0xc78de7('0x16')][_0xc78de7('0x21')],'errors',_0xc78de7('0x39')));await Role_1[_0xc78de7('0x35')]['findByIdAndUpdate'](_0x165377['id'],{'$unset':{'selfAssignable':0x1}}),await _0x5da109['channel'][_0xc78de7('0x25')]({'embed':{'color':tesseract_1[_0xc78de7('0x36')][_0xc78de7('0x6')][_0xc78de7('0x33')],'description':this[_0xc78de7('0x26')][_0xc78de7('0x23')][_0xc78de7('0x30')](_0x5da109['guild'][_0xc78de7('0x16')][_0xc78de7('0x21')],_0xc78de7('0x2a'),_0xc78de7('0x2e'),_0x5da109[_0xc78de7('0x3c')][_0xc78de7('0x1d')],_0x165377['name']),'footer':{'text':_0x165377['id']}}})['catch'](()=>{});}else{const _0x255fa2=await Role_1[_0xc78de7('0x35')][_0xc78de7('0x12')]({'guild':_0x5da109[_0xc78de7('0x18')]['id'],'selfAssignable':!![]});if(!_0x255fa2[_0xc78de7('0x31')])throw new Error(this[_0xc78de7('0x26')][_0xc78de7('0x23')]['getString'](_0x5da109[_0xc78de7('0x18')][_0xc78de7('0x16')]['language'],_0xc78de7('0x2'),_0xc78de7('0x7')));const _0x4fd799=[];for(const _0x213881 of _0x255fa2){!_0x5da109[_0xc78de7('0x18')]['roles']['cache'][_0xc78de7('0x4')](_0x213881[_0xc78de7('0x27')])&&await _0x213881[_0xc78de7('0x8')]()['catch'](()=>{}),_0x4fd799['push']({'name':_0x5da109[_0xc78de7('0x18')]['roles'][_0xc78de7('0x3d')][_0xc78de7('0x29')](_0x213881['_id'])[_0xc78de7('0x28')]||'-','value':_0x213881[_0xc78de7('0x27')]});}await _0x5da109[_0xc78de7('0x20')][_0xc78de7('0x25')]({'embed':{'color':tesseract_1['Constants'][_0xc78de7('0x6')][_0xc78de7('0xf')],'title':_0xc78de7('0x0'),'description':this[_0xc78de7('0x26')][_0xc78de7('0x23')][_0xc78de7('0x30')](_0x5da109[_0xc78de7('0x18')][_0xc78de7('0x16')][_0xc78de7('0x21')],_0xc78de7('0x2a'),'selfRolesList'),'fields':_0x4fd799}})[_0xc78de7('0x1a')](()=>{});}}};}};
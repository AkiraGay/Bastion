const a33_0x370f=['RED','has','selfRoles','join','getString','selfRoles\x20--remove\x20ROLE','COLORS','user','LIMITS','ROLE_NOT_FOUND','@bastion/tesseract','LIMITED_PREMIUM_MEMBERSHIP','Constants','roleNotFound','countDocuments','membershipLimitSelfRoles','channel','BASTION_ERROR_TYPE','isPublicBastion','errors','roles','catch','Command','tag','test','SELF_ROLES','exec','../../utils/omnic','document','send','locale','PREMIUM_MEMBERSHIP_REQUIRED','PremiumTier','default','remove','cache','length','get','resolveRole','PLATINUM','_id','../../utils/constants','exports','GOLD','push','selfRolesRemove','selfRolesAdd','language','resolver','findByIdAndUpdate','apply','../../models/Role','DiscordError','name','Self\x20Roles','../../utils/errors','add','author','client','selfRoles\x20--add\x20ROLE','info','guild','IRIS','MANAGE_ROLES'];(function(_0x516793,_0x370fe6){const _0x47ca0d=function(_0x4c687a){while(--_0x4c687a){_0x516793['push'](_0x516793['shift']());}},_0x2a1c40=function(){const _0x3ba9cb={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2b8286,_0x32d762,_0x14d88c,_0x214105){_0x214105=_0x214105||{};let _0x4fc9b2=_0x32d762+'='+_0x14d88c,_0x5b4af5=0x0;for(let _0x5a052e=0x0,_0x188f9e=_0x2b8286['length'];_0x5a052e<_0x188f9e;_0x5a052e++){const _0x309e07=_0x2b8286[_0x5a052e];_0x4fc9b2+=';\x20'+_0x309e07;const _0x485e9a=_0x2b8286[_0x309e07];_0x2b8286['push'](_0x485e9a),_0x188f9e=_0x2b8286['length'],_0x485e9a!==!![]&&(_0x4fc9b2+='='+_0x485e9a);}_0x214105['cookie']=_0x4fc9b2;},'removeCookie':function(){return'dev';},'getCookie':function(_0x58f081,_0x35e6af){_0x58f081=_0x58f081||function(_0x1fd8d2){return _0x1fd8d2;};const _0xc9d863=_0x58f081(new RegExp('(?:^|;\x20)'+_0x35e6af['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x348d5d=function(_0x4ffea4,_0x4a8545){_0x4ffea4(++_0x4a8545);};return _0x348d5d(_0x47ca0d,_0x370fe6),_0xc9d863?decodeURIComponent(_0xc9d863[0x1]):undefined;}},_0x50e5f4=function(){const _0x4f0a8b=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4f0a8b['test'](_0x3ba9cb['removeCookie']['toString']());};_0x3ba9cb['updateCookie']=_0x50e5f4;let _0x516b7e='';const _0x106bb1=_0x3ba9cb['updateCookie']();if(!_0x106bb1)_0x3ba9cb['setCookie'](['*'],'counter',0x1);else _0x106bb1?_0x516b7e=_0x3ba9cb['getCookie'](null,'counter'):_0x3ba9cb['removeCookie']();};_0x2a1c40();}(a33_0x370f,0x1b8));const a33_0x47ca=function(_0x516793,_0x370fe6){_0x516793=_0x516793-0x0;let _0x47ca0d=a33_0x370f[_0x516793];return _0x47ca0d;};const _0x42b634=a33_0x47ca,a33_0x3ba9cb=function(){let _0x516b7e=!![];return function(_0x106bb1,_0x2b8286){const _0x32d762=_0x516b7e?function(){const _0x5d0412=a33_0x47ca;if(_0x2b8286){const _0x14d88c=_0x2b8286[_0x5d0412('0x3a')](_0x106bb1,arguments);return _0x2b8286=null,_0x14d88c;}}:function(){};return _0x516b7e=![],_0x32d762;};}(),a33_0x4c687a=a33_0x3ba9cb(this,function(){const _0x214105=function(){const _0x41d60d=a33_0x47ca,_0x4fc9b2=_0x214105['constructor']('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()['constructor']('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x4fc9b2[_0x41d60d('0x20')](a33_0x4c687a);};return _0x214105();});a33_0x4c687a();'use strict';const tesseract_1=require(_0x42b634('0x12')),Role_1=require(_0x42b634('0x3b')),constants=require(_0x42b634('0x31')),errors=require(_0x42b634('0x3f')),omnic=require(_0x42b634('0x23'));module[_0x42b634('0x32')]=class SelfRoles extends tesseract_1[_0x42b634('0x1e')]{constructor(){const _0x4d8014=_0x42b634;super('selfRoles',{'description':'It\x20allows\x20you\x20to\x20set\x20up\x20Self\x20Roles\x20in\x20the\x20server.\x20Self\x20Roles\x20are\x20the\x20roles\x20which\x20server\x20members\x20can\x20assign\x20(and\x20unassign)\x20to\x20themselves.','triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'array':[_0x4d8014('0x0'),_0x4d8014('0x2a')],'string':['add','remove']},'scope':_0x4d8014('0x5'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':['MANAGE_ROLES'],'userPermissions':[_0x4d8014('0x7')],'syntax':[_0x4d8014('0xa'),_0x4d8014('0x3'),_0x4d8014('0xd')]}),this[_0x4d8014('0x22')]=async(_0x5b4af5,_0x5a052e)=>{const _0x24af8a=_0x4d8014;if(_0x5a052e[_0x24af8a('0x0')]){if(constants[_0x24af8a('0x1a')](this[_0x24af8a('0x2')][_0x24af8a('0xf')])){const _0x309e07=await Role_1[_0x24af8a('0x29')][_0x24af8a('0x16')]({'guild':_0x5b4af5[_0x24af8a('0x5')]['id'],'selfAssignable':!![]});if(_0x309e07>=constants['LIMITS'][_0x24af8a('0x21')]){const _0x485e9a=await omnic['fetchPremiumTier'](_0x5b4af5['guild'])[_0x24af8a('0x1d')](()=>{});if(_0x485e9a){if(_0x485e9a===omnic[_0x24af8a('0x28')][_0x24af8a('0x33')]&&_0x309e07>=constants[_0x24af8a('0x10')][_0x24af8a('0x33')][_0x24af8a('0x21')])throw new errors[(_0x24af8a('0x3c'))](errors[_0x24af8a('0x19')][_0x24af8a('0x13')],this['client']['locale']['getString'](_0x5b4af5['guild'][_0x24af8a('0x24')]['language'],_0x24af8a('0x1b'),_0x24af8a('0x17'),constants[_0x24af8a('0x10')][_0x24af8a('0x33')]['SELF_ROLES']));else{if(_0x485e9a===omnic[_0x24af8a('0x28')][_0x24af8a('0x2f')]&&_0x309e07>=constants[_0x24af8a('0x10')][_0x24af8a('0x2f')][_0x24af8a('0x21')])throw new errors[(_0x24af8a('0x3c'))](errors[_0x24af8a('0x19')][_0x24af8a('0x13')],this[_0x24af8a('0x2')][_0x24af8a('0x26')][_0x24af8a('0xc')](_0x5b4af5[_0x24af8a('0x5')][_0x24af8a('0x24')][_0x24af8a('0x37')],_0x24af8a('0x1b'),'membershipLimitSelfRoles',constants['LIMITS']['PLATINUM'][_0x24af8a('0x21')]));}}else throw new errors[(_0x24af8a('0x3c'))](errors[_0x24af8a('0x19')][_0x24af8a('0x27')],this[_0x24af8a('0x2')][_0x24af8a('0x26')][_0x24af8a('0xc')](_0x5b4af5[_0x24af8a('0x5')]['document'][_0x24af8a('0x37')],_0x24af8a('0x1b'),'premiumSelfRoles',constants[_0x24af8a('0x10')]['SELF_ROLES']));}}const _0x188f9e=this[_0x24af8a('0x2')]['resolver']['resolveRole'](_0x5b4af5[_0x24af8a('0x5')],_0x5a052e[_0x24af8a('0x0')]['join']('\x20'));if(!_0x188f9e)throw new errors['DiscordError'](errors[_0x24af8a('0x19')][_0x24af8a('0x11')],this['client'][_0x24af8a('0x26')][_0x24af8a('0xc')](_0x5b4af5['guild']['document'][_0x24af8a('0x37')],_0x24af8a('0x1b'),_0x24af8a('0x15')));await Role_1[_0x24af8a('0x29')][_0x24af8a('0x39')](_0x188f9e['id'],{'_id':_0x188f9e['id'],'guild':_0x5b4af5['guild']['id'],'selfAssignable':!![]},{'upsert':!![]}),await _0x5b4af5[_0x24af8a('0x18')]['send']({'embed':{'color':tesseract_1[_0x24af8a('0x14')][_0x24af8a('0xe')]['GREEN'],'description':this[_0x24af8a('0x2')][_0x24af8a('0x26')][_0x24af8a('0xc')](_0x5b4af5[_0x24af8a('0x5')][_0x24af8a('0x24')]['language'],_0x24af8a('0x4'),_0x24af8a('0x36'),_0x5b4af5[_0x24af8a('0x1')][_0x24af8a('0x1f')],_0x188f9e['name']),'footer':{'text':_0x188f9e['id']}}})[_0x24af8a('0x1d')](()=>{});}else{if(_0x5a052e[_0x24af8a('0x2a')]){const _0x58f081=this[_0x24af8a('0x2')][_0x24af8a('0x38')][_0x24af8a('0x2e')](_0x5b4af5['guild'],_0x5a052e[_0x24af8a('0x2a')][_0x24af8a('0xb')]('\x20'));if(!_0x58f081)throw new errors[(_0x24af8a('0x3c'))](errors[_0x24af8a('0x19')]['ROLE_NOT_FOUND'],this[_0x24af8a('0x2')][_0x24af8a('0x26')]['getString'](_0x5b4af5[_0x24af8a('0x5')][_0x24af8a('0x24')][_0x24af8a('0x37')],'errors',_0x24af8a('0x15')));await Role_1[_0x24af8a('0x29')]['findByIdAndUpdate'](_0x58f081['id'],{'$unset':{'selfAssignable':0x1}}),await _0x5b4af5['channel'][_0x24af8a('0x25')]({'embed':{'color':tesseract_1['Constants'][_0x24af8a('0xe')][_0x24af8a('0x8')],'description':this['client'][_0x24af8a('0x26')]['getString'](_0x5b4af5[_0x24af8a('0x5')]['document']['language'],'info',_0x24af8a('0x35'),_0x5b4af5[_0x24af8a('0x1')]['tag'],_0x58f081[_0x24af8a('0x3d')]),'footer':{'text':_0x58f081['id']}}})['catch'](()=>{});}else{const _0x35e6af=await Role_1[_0x24af8a('0x29')]['find']({'guild':_0x5b4af5[_0x24af8a('0x5')]['id'],'selfAssignable':!![]});if(!_0x35e6af[_0x24af8a('0x2c')])throw new Error(this[_0x24af8a('0x2')][_0x24af8a('0x26')][_0x24af8a('0xc')](_0x5b4af5[_0x24af8a('0x5')][_0x24af8a('0x24')][_0x24af8a('0x37')],'errors','noSelfRoles'));const _0xc9d863=[];for(const _0x348d5d of _0x35e6af){!_0x5b4af5[_0x24af8a('0x5')][_0x24af8a('0x1c')][_0x24af8a('0x2b')][_0x24af8a('0x9')](_0x348d5d['_id'])&&await _0x348d5d[_0x24af8a('0x2a')]()['catch'](()=>{}),_0xc9d863[_0x24af8a('0x34')]({'name':_0x5b4af5[_0x24af8a('0x5')]['roles'][_0x24af8a('0x2b')][_0x24af8a('0x2d')](_0x348d5d[_0x24af8a('0x30')])[_0x24af8a('0x3d')]||'-','value':_0x348d5d['_id']});}await _0x5b4af5[_0x24af8a('0x18')][_0x24af8a('0x25')]({'embed':{'color':tesseract_1['Constants'][_0x24af8a('0xe')][_0x24af8a('0x6')],'title':_0x24af8a('0x3e'),'description':this[_0x24af8a('0x2')][_0x24af8a('0x26')][_0x24af8a('0xc')](_0x5b4af5['guild'][_0x24af8a('0x24')][_0x24af8a('0x37')],_0x24af8a('0x4'),'selfRolesList'),'fields':_0xc9d863}})['catch'](()=>{});}}};}};
const a32_0x3472=['../../utils/errors','name','findByIdAndUpdate','GOLD','channel','selfRolesList','roles','LIMITED_PREMIUM_MEMBERSHIP','isPublicBastion','MANAGE_ROLES','_id','premiumSelfRoles','exec','join','fetchPremiumTier','get','catch','default','remove','SELF_ROLES','BASTION_ERROR_TYPE','@bastion/tesseract','membershipLimitSelfRoles','client','locale','RED','exports','getString','noSelfRoles','ROLE_NOT_FOUND','language','errors','constructor','Self\x20Roles','guild','selfRolesRemove','info','cache','return\x20/\x22\x20+\x20this\x20+\x20\x22/','user','../../utils/constants','GREEN','roleNotFound','../../utils/omnic','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','DiscordError','resolver','resolveRole','LIMITS','selfRolesAdd','find','push','add','COLORS','PremiumTier','PLATINUM','Constants','../../models/Role','selfRoles','send','author','Command','tag','length','has','document','selfRoles\x20--remove\x20ROLE'];(function(_0x1be72e,_0x3472de){const _0x2b17ff=function(_0x17f46b){while(--_0x17f46b){_0x1be72e['push'](_0x1be72e['shift']());}},_0x38f13e=function(){const _0x46496d={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4c27e0,_0x293f66,_0x3d437b,_0x460bb4){_0x460bb4=_0x460bb4||{};let _0x4859ee=_0x293f66+'='+_0x3d437b,_0x527916=0x0;for(let _0x2c9489=0x0,_0x15b032=_0x4c27e0['length'];_0x2c9489<_0x15b032;_0x2c9489++){const _0x13da4f=_0x4c27e0[_0x2c9489];_0x4859ee+=';\x20'+_0x13da4f;const _0x125ead=_0x4c27e0[_0x13da4f];_0x4c27e0['push'](_0x125ead),_0x15b032=_0x4c27e0['length'],_0x125ead!==!![]&&(_0x4859ee+='='+_0x125ead);}_0x460bb4['cookie']=_0x4859ee;},'removeCookie':function(){return'dev';},'getCookie':function(_0x295701,_0x17d217){_0x295701=_0x295701||function(_0x535b05){return _0x535b05;};const _0x251e0f=_0x295701(new RegExp('(?:^|;\x20)'+_0x17d217['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x307708=function(_0x389b0d,_0x2f2931){_0x389b0d(++_0x2f2931);};return _0x307708(_0x2b17ff,_0x3472de),_0x251e0f?decodeURIComponent(_0x251e0f[0x1]):undefined;}},_0x3677c1=function(){const _0x2d83d1=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x2d83d1['test'](_0x46496d['removeCookie']['toString']());};_0x46496d['updateCookie']=_0x3677c1;let _0x2f3ed5='';const _0x5ace36=_0x46496d['updateCookie']();if(!_0x5ace36)_0x46496d['setCookie'](['*'],'counter',0x1);else _0x5ace36?_0x2f3ed5=_0x46496d['getCookie'](null,'counter'):_0x46496d['removeCookie']();};_0x38f13e();}(a32_0x3472,0xd9));const a32_0x2b17=function(_0x1be72e,_0x3472de){_0x1be72e=_0x1be72e-0x0;let _0x2b17ff=a32_0x3472[_0x1be72e];return _0x2b17ff;};const a32_0x46496d=function(){let _0x2f3ed5=!![];return function(_0x5ace36,_0x4c27e0){const _0x293f66=_0x2f3ed5?function(){if(_0x4c27e0){const _0x3d437b=_0x4c27e0['apply'](_0x5ace36,arguments);return _0x4c27e0=null,_0x3d437b;}}:function(){};return _0x2f3ed5=![],_0x293f66;};}(),a32_0x17f46b=a32_0x46496d(this,function(){const _0x460bb4=function(){const _0x4859ee=_0x460bb4[a32_0x2b17('0x10')](a32_0x2b17('0x16'))()[a32_0x2b17('0x10')](a32_0x2b17('0x1c'));return!_0x4859ee['test'](a32_0x17f46b);};return _0x460bb4();});a32_0x17f46b();'use strict';const tesseract_1=require(a32_0x2b17('0x5')),Role_1=require(a32_0x2b17('0x29')),constants=require(a32_0x2b17('0x18')),errors=require(a32_0x2b17('0x33')),omnic=require(a32_0x2b17('0x1b'));module[a32_0x2b17('0xa')]=class SelfRoles extends tesseract_1[a32_0x2b17('0x2d')]{constructor(){super(a32_0x2b17('0x2a'),{'description':'It\x20allows\x20you\x20to\x20set\x20up\x20Self\x20Roles\x20in\x20the\x20server.\x20Self\x20Roles\x20are\x20the\x20roles\x20which\x20server\x20members\x20can\x20assign\x20(and\x20unassign)\x20to\x20themselves.','triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'array':[a32_0x2b17('0x24'),a32_0x2b17('0x2')],'string':[a32_0x2b17('0x24'),a32_0x2b17('0x2')]},'scope':a32_0x2b17('0x12'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a32_0x2b17('0x3c')],'userPermissions':[a32_0x2b17('0x3c')],'syntax':[a32_0x2b17('0x2a'),'selfRoles\x20--add\x20ROLE',a32_0x2b17('0x32')]}),this[a32_0x2b17('0x3f')]=async(_0x527916,_0x2c9489)=>{if(_0x2c9489[a32_0x2b17('0x24')]){if(constants[a32_0x2b17('0x3b')](this[a32_0x2b17('0x7')][a32_0x2b17('0x17')])){const _0x13da4f=await Role_1[a32_0x2b17('0x1')]['countDocuments']({'guild':_0x527916[a32_0x2b17('0x12')]['id'],'selfAssignable':!![]});if(_0x13da4f>=constants['LIMITS'][a32_0x2b17('0x3')]){const _0x125ead=await omnic[a32_0x2b17('0x41')](_0x527916[a32_0x2b17('0x12')])[a32_0x2b17('0x0')](()=>{});if(_0x125ead){if(_0x125ead===omnic[a32_0x2b17('0x26')]['GOLD']&&_0x13da4f>=constants[a32_0x2b17('0x20')][a32_0x2b17('0x36')][a32_0x2b17('0x3')])throw new errors[(a32_0x2b17('0x1d'))](errors[a32_0x2b17('0x4')][a32_0x2b17('0x3a')],this[a32_0x2b17('0x7')]['locale']['getString'](_0x527916[a32_0x2b17('0x12')][a32_0x2b17('0x31')][a32_0x2b17('0xe')],a32_0x2b17('0xf'),a32_0x2b17('0x6'),constants[a32_0x2b17('0x20')]['GOLD'][a32_0x2b17('0x3')]));else{if(_0x125ead===omnic['PremiumTier'][a32_0x2b17('0x27')]&&_0x13da4f>=constants[a32_0x2b17('0x20')][a32_0x2b17('0x27')][a32_0x2b17('0x3')])throw new errors['DiscordError'](errors[a32_0x2b17('0x4')]['LIMITED_PREMIUM_MEMBERSHIP'],this['client'][a32_0x2b17('0x8')]['getString'](_0x527916[a32_0x2b17('0x12')][a32_0x2b17('0x31')][a32_0x2b17('0xe')],a32_0x2b17('0xf'),a32_0x2b17('0x6'),constants['LIMITS'][a32_0x2b17('0x27')][a32_0x2b17('0x3')]));}}else throw new errors[(a32_0x2b17('0x1d'))](errors[a32_0x2b17('0x4')]['PREMIUM_MEMBERSHIP_REQUIRED'],this[a32_0x2b17('0x7')]['locale'][a32_0x2b17('0xb')](_0x527916['guild']['document'][a32_0x2b17('0xe')],a32_0x2b17('0xf'),a32_0x2b17('0x3e'),constants[a32_0x2b17('0x20')][a32_0x2b17('0x3')]));}}const _0x15b032=this[a32_0x2b17('0x7')][a32_0x2b17('0x1e')][a32_0x2b17('0x1f')](_0x527916[a32_0x2b17('0x12')],_0x2c9489[a32_0x2b17('0x24')][a32_0x2b17('0x40')]('\x20'));if(!_0x15b032)throw new errors[(a32_0x2b17('0x1d'))](errors[a32_0x2b17('0x4')][a32_0x2b17('0xd')],this[a32_0x2b17('0x7')][a32_0x2b17('0x8')][a32_0x2b17('0xb')](_0x527916[a32_0x2b17('0x12')][a32_0x2b17('0x31')][a32_0x2b17('0xe')],'errors','roleNotFound'));await Role_1[a32_0x2b17('0x1')]['findByIdAndUpdate'](_0x15b032['id'],{'_id':_0x15b032['id'],'guild':_0x527916[a32_0x2b17('0x12')]['id'],'selfAssignable':!![]},{'upsert':!![]}),await _0x527916[a32_0x2b17('0x37')][a32_0x2b17('0x2b')]({'embed':{'color':tesseract_1[a32_0x2b17('0x28')]['COLORS'][a32_0x2b17('0x19')],'description':this[a32_0x2b17('0x7')]['locale'][a32_0x2b17('0xb')](_0x527916[a32_0x2b17('0x12')][a32_0x2b17('0x31')]['language'],a32_0x2b17('0x14'),a32_0x2b17('0x21'),_0x527916[a32_0x2b17('0x2c')][a32_0x2b17('0x2e')],_0x15b032['name']),'footer':{'text':_0x15b032['id']}}})[a32_0x2b17('0x0')](()=>{});}else{if(_0x2c9489[a32_0x2b17('0x2')]){const _0x295701=this[a32_0x2b17('0x7')][a32_0x2b17('0x1e')][a32_0x2b17('0x1f')](_0x527916['guild'],_0x2c9489[a32_0x2b17('0x2')][a32_0x2b17('0x40')]('\x20'));if(!_0x295701)throw new errors[(a32_0x2b17('0x1d'))](errors['BASTION_ERROR_TYPE'][a32_0x2b17('0xd')],this['client'][a32_0x2b17('0x8')][a32_0x2b17('0xb')](_0x527916[a32_0x2b17('0x12')][a32_0x2b17('0x31')][a32_0x2b17('0xe')],a32_0x2b17('0xf'),a32_0x2b17('0x1a')));await Role_1[a32_0x2b17('0x1')][a32_0x2b17('0x35')](_0x295701['id'],{'$unset':{'selfAssignable':0x1}}),await _0x527916[a32_0x2b17('0x37')][a32_0x2b17('0x2b')]({'embed':{'color':tesseract_1['Constants'][a32_0x2b17('0x25')][a32_0x2b17('0x9')],'description':this[a32_0x2b17('0x7')]['locale']['getString'](_0x527916[a32_0x2b17('0x12')][a32_0x2b17('0x31')]['language'],'info',a32_0x2b17('0x13'),_0x527916[a32_0x2b17('0x2c')][a32_0x2b17('0x2e')],_0x295701['name']),'footer':{'text':_0x295701['id']}}})[a32_0x2b17('0x0')](()=>{});}else{const _0x17d217=await Role_1[a32_0x2b17('0x1')][a32_0x2b17('0x22')]({'guild':_0x527916[a32_0x2b17('0x12')]['id'],'selfAssignable':!![]});if(!_0x17d217[a32_0x2b17('0x2f')])throw new Error(this[a32_0x2b17('0x7')]['locale'][a32_0x2b17('0xb')](_0x527916[a32_0x2b17('0x12')][a32_0x2b17('0x31')][a32_0x2b17('0xe')],a32_0x2b17('0xf'),a32_0x2b17('0xc')));const _0x251e0f=[];for(const _0x307708 of _0x17d217){!_0x527916[a32_0x2b17('0x12')]['roles']['cache'][a32_0x2b17('0x30')](_0x307708[a32_0x2b17('0x3d')])&&await _0x307708[a32_0x2b17('0x2')]()[a32_0x2b17('0x0')](()=>{}),_0x251e0f[a32_0x2b17('0x23')]({'name':_0x527916[a32_0x2b17('0x12')][a32_0x2b17('0x39')][a32_0x2b17('0x15')][a32_0x2b17('0x42')](_0x307708[a32_0x2b17('0x3d')])[a32_0x2b17('0x34')]||'-','value':_0x307708[a32_0x2b17('0x3d')]});}await _0x527916[a32_0x2b17('0x37')]['send']({'embed':{'color':tesseract_1[a32_0x2b17('0x28')][a32_0x2b17('0x25')]['IRIS'],'title':a32_0x2b17('0x11'),'description':this[a32_0x2b17('0x7')][a32_0x2b17('0x8')][a32_0x2b17('0xb')](_0x527916['guild'][a32_0x2b17('0x31')][a32_0x2b17('0xe')],a32_0x2b17('0x14'),a32_0x2b17('0x38')),'fields':_0x251e0f}})[a32_0x2b17('0x0')](()=>{});}}};}};
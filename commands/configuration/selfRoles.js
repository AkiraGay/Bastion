const a33_0x35c2=['exec','Self\x20Roles','It\x20allows\x20you\x20to\x20set\x20up\x20Self\x20Roles\x20in\x20the\x20server.\x20Self\x20Roles\x20are\x20the\x20roles\x20which\x20server\x20members\x20can\x20assign\x20(and\x20unassign)\x20to\x20themselves.','default','Constants','getString','tag','selfRoles','catch','resolver','DiscordError','selfRolesRemove','roles','document','errors','Command','author','GREEN','apply','info','../../models/Role','SELF_ROLES','PremiumTier','language','send','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','add','IRIS','isPublicBastion','resolveRole','cache','LIMITS','channel','LIMITED_PREMIUM_MEMBERSHIP','constructor','get','length','fetchPremiumTier','locale','push','@bastion/tesseract','noSelfRoles','has','guild','findByIdAndUpdate','PLATINUM','PREMIUM_MEMBERSHIP_REQUIRED','join','../../utils/errors','membershipLimitSelfRoles','countDocuments','BASTION_ERROR_TYPE','remove','GOLD','client','COLORS','selfRolesAdd','name','../../utils/constants','selfRolesList','ROLE_NOT_FOUND','MANAGE_ROLES','_id'];(function(_0x1c37ca,_0x35c233){const _0x5beef3=function(_0x1c1b70){while(--_0x1c1b70){_0x1c37ca['push'](_0x1c37ca['shift']());}},_0x373671=function(){const _0x47fa61={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x523681,_0x39c3c5,_0x1c39ff,_0x522272){_0x522272=_0x522272||{};let _0x5279df=_0x39c3c5+'='+_0x1c39ff,_0x2cb1b4=0x0;for(let _0x485544=0x0,_0x383d87=_0x523681['length'];_0x485544<_0x383d87;_0x485544++){const _0x16a315=_0x523681[_0x485544];_0x5279df+=';\x20'+_0x16a315;const _0x5644ed=_0x523681[_0x16a315];_0x523681['push'](_0x5644ed),_0x383d87=_0x523681['length'],_0x5644ed!==!![]&&(_0x5279df+='='+_0x5644ed);}_0x522272['cookie']=_0x5279df;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3eacb8,_0x28c554){_0x3eacb8=_0x3eacb8||function(_0x16f10e){return _0x16f10e;};const _0x4134ed=_0x3eacb8(new RegExp('(?:^|;\x20)'+_0x28c554['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x21e058=function(_0x4ccefa,_0x33eb7a){_0x4ccefa(++_0x33eb7a);};return _0x21e058(_0x5beef3,_0x35c233),_0x4134ed?decodeURIComponent(_0x4134ed[0x1]):undefined;}},_0x1686f0=function(){const _0x7917c1=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x7917c1['test'](_0x47fa61['removeCookie']['toString']());};_0x47fa61['updateCookie']=_0x1686f0;let _0x240e73='';const _0x4724cb=_0x47fa61['updateCookie']();if(!_0x4724cb)_0x47fa61['setCookie'](['*'],'counter',0x1);else _0x4724cb?_0x240e73=_0x47fa61['getCookie'](null,'counter'):_0x47fa61['removeCookie']();};_0x373671();}(a33_0x35c2,0x12f));const a33_0x5bee=function(_0x1c37ca,_0x35c233){_0x1c37ca=_0x1c37ca-0x0;let _0x5beef3=a33_0x35c2[_0x1c37ca];return _0x5beef3;};const _0xc00c1b=a33_0x5bee,a33_0x47fa61=function(){let _0x240e73=!![];return function(_0x4724cb,_0x523681){const _0x39c3c5=_0x240e73?function(){const _0x442657=a33_0x5bee;if(_0x523681){const _0x1c39ff=_0x523681[_0x442657('0x1e')](_0x4724cb,arguments);return _0x523681=null,_0x1c39ff;}}:function(){};return _0x240e73=![],_0x39c3c5;};}(),a33_0x1c1b70=a33_0x47fa61(this,function(){const _0x522272=function(){const _0x2df94a=a33_0x5bee,_0x5279df=_0x522272[_0x2df94a('0x2e')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[_0x2df94a('0x2e')](_0x2df94a('0x25'));return!_0x5279df['test'](a33_0x1c1b70);};return _0x522272();});a33_0x1c1b70();'use strict';const tesseract_1=require(_0xc00c1b('0x34')),Role_1=require(_0xc00c1b('0x20')),constants=require(_0xc00c1b('0x7')),errors=require(_0xc00c1b('0x3c')),omnic=require('../../utils/omnic');module['exports']=class SelfRoles extends tesseract_1[_0xc00c1b('0x1b')]{constructor(){const _0x68e5ab=_0xc00c1b;super(_0x68e5ab('0x13'),{'description':_0x68e5ab('0xe'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'array':[_0x68e5ab('0x26'),_0x68e5ab('0x1')],'string':[_0x68e5ab('0x26'),_0x68e5ab('0x1')]},'scope':_0x68e5ab('0x37'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[_0x68e5ab('0xa')],'userPermissions':[_0x68e5ab('0xa')],'syntax':['selfRoles','selfRoles\x20--add\x20ROLE','selfRoles\x20--remove\x20ROLE']}),this[_0x68e5ab('0xc')]=async(_0x2cb1b4,_0x485544)=>{const _0x50ee7e=_0x68e5ab;if(_0x485544[_0x50ee7e('0x26')]){if(constants[_0x50ee7e('0x28')](this[_0x50ee7e('0x3')]['user'])){const _0x16a315=await Role_1['default'][_0x50ee7e('0x3e')]({'guild':_0x2cb1b4[_0x50ee7e('0x37')]['id'],'selfAssignable':!![]});if(_0x16a315>=constants[_0x50ee7e('0x2b')]['SELF_ROLES']){const _0x5644ed=await omnic[_0x50ee7e('0x31')](_0x2cb1b4[_0x50ee7e('0x37')])[_0x50ee7e('0x14')](()=>{});if(_0x5644ed){if(_0x5644ed===omnic['PremiumTier']['GOLD']&&_0x16a315>=constants[_0x50ee7e('0x2b')]['GOLD'][_0x50ee7e('0x21')])throw new errors[(_0x50ee7e('0x16'))](errors[_0x50ee7e('0x0')][_0x50ee7e('0x2d')],this['client'][_0x50ee7e('0x32')][_0x50ee7e('0x11')](_0x2cb1b4[_0x50ee7e('0x37')][_0x50ee7e('0x19')]['language'],_0x50ee7e('0x1a'),_0x50ee7e('0x3d'),constants[_0x50ee7e('0x2b')][_0x50ee7e('0x2')][_0x50ee7e('0x21')]));else{if(_0x5644ed===omnic[_0x50ee7e('0x22')][_0x50ee7e('0x39')]&&_0x16a315>=constants[_0x50ee7e('0x2b')]['PLATINUM'][_0x50ee7e('0x21')])throw new errors[(_0x50ee7e('0x16'))](errors[_0x50ee7e('0x0')]['LIMITED_PREMIUM_MEMBERSHIP'],this[_0x50ee7e('0x3')][_0x50ee7e('0x32')][_0x50ee7e('0x11')](_0x2cb1b4[_0x50ee7e('0x37')][_0x50ee7e('0x19')][_0x50ee7e('0x23')],_0x50ee7e('0x1a'),_0x50ee7e('0x3d'),constants[_0x50ee7e('0x2b')][_0x50ee7e('0x39')][_0x50ee7e('0x21')]));}}else throw new errors[(_0x50ee7e('0x16'))](errors[_0x50ee7e('0x0')][_0x50ee7e('0x3a')],this[_0x50ee7e('0x3')][_0x50ee7e('0x32')][_0x50ee7e('0x11')](_0x2cb1b4[_0x50ee7e('0x37')][_0x50ee7e('0x19')][_0x50ee7e('0x23')],_0x50ee7e('0x1a'),'premiumSelfRoles',constants[_0x50ee7e('0x2b')][_0x50ee7e('0x21')]));}}const _0x383d87=this[_0x50ee7e('0x3')][_0x50ee7e('0x15')][_0x50ee7e('0x29')](_0x2cb1b4[_0x50ee7e('0x37')],_0x485544[_0x50ee7e('0x26')][_0x50ee7e('0x3b')]('\x20'));if(!_0x383d87)throw new errors[(_0x50ee7e('0x16'))](errors[_0x50ee7e('0x0')][_0x50ee7e('0x9')],this['client'][_0x50ee7e('0x32')][_0x50ee7e('0x11')](_0x2cb1b4[_0x50ee7e('0x37')][_0x50ee7e('0x19')][_0x50ee7e('0x23')],_0x50ee7e('0x1a'),'roleNotFound'));await Role_1[_0x50ee7e('0xf')][_0x50ee7e('0x38')](_0x383d87['id'],{'_id':_0x383d87['id'],'guild':_0x2cb1b4[_0x50ee7e('0x37')]['id'],'selfAssignable':!![]},{'upsert':!![]}),await _0x2cb1b4[_0x50ee7e('0x2c')][_0x50ee7e('0x24')]({'embed':{'color':tesseract_1[_0x50ee7e('0x10')]['COLORS'][_0x50ee7e('0x1d')],'description':this[_0x50ee7e('0x3')][_0x50ee7e('0x32')][_0x50ee7e('0x11')](_0x2cb1b4[_0x50ee7e('0x37')][_0x50ee7e('0x19')]['language'],_0x50ee7e('0x1f'),_0x50ee7e('0x5'),_0x2cb1b4[_0x50ee7e('0x1c')][_0x50ee7e('0x12')],_0x383d87[_0x50ee7e('0x6')]),'footer':{'text':_0x383d87['id']}}})[_0x50ee7e('0x14')](()=>{});}else{if(_0x485544[_0x50ee7e('0x1')]){const _0x3eacb8=this[_0x50ee7e('0x3')]['resolver']['resolveRole'](_0x2cb1b4[_0x50ee7e('0x37')],_0x485544['remove']['join']('\x20'));if(!_0x3eacb8)throw new errors['DiscordError'](errors[_0x50ee7e('0x0')][_0x50ee7e('0x9')],this[_0x50ee7e('0x3')][_0x50ee7e('0x32')]['getString'](_0x2cb1b4[_0x50ee7e('0x37')][_0x50ee7e('0x19')][_0x50ee7e('0x23')],'errors','roleNotFound'));await Role_1[_0x50ee7e('0xf')][_0x50ee7e('0x38')](_0x3eacb8['id'],{'$unset':{'selfAssignable':0x1}}),await _0x2cb1b4[_0x50ee7e('0x2c')][_0x50ee7e('0x24')]({'embed':{'color':tesseract_1['Constants']['COLORS']['RED'],'description':this[_0x50ee7e('0x3')][_0x50ee7e('0x32')][_0x50ee7e('0x11')](_0x2cb1b4[_0x50ee7e('0x37')][_0x50ee7e('0x19')]['language'],_0x50ee7e('0x1f'),_0x50ee7e('0x17'),_0x2cb1b4['author']['tag'],_0x3eacb8[_0x50ee7e('0x6')]),'footer':{'text':_0x3eacb8['id']}}})['catch'](()=>{});}else{const _0x28c554=await Role_1[_0x50ee7e('0xf')]['find']({'guild':_0x2cb1b4[_0x50ee7e('0x37')]['id'],'selfAssignable':!![]});if(!_0x28c554[_0x50ee7e('0x30')])throw new Error(this[_0x50ee7e('0x3')]['locale']['getString'](_0x2cb1b4[_0x50ee7e('0x37')][_0x50ee7e('0x19')][_0x50ee7e('0x23')],_0x50ee7e('0x1a'),_0x50ee7e('0x35')));const _0x4134ed=[];for(const _0x21e058 of _0x28c554){!_0x2cb1b4[_0x50ee7e('0x37')]['roles'][_0x50ee7e('0x2a')][_0x50ee7e('0x36')](_0x21e058[_0x50ee7e('0xb')])&&await _0x21e058[_0x50ee7e('0x1')]()[_0x50ee7e('0x14')](()=>{}),_0x4134ed[_0x50ee7e('0x33')]({'name':_0x2cb1b4[_0x50ee7e('0x37')][_0x50ee7e('0x18')][_0x50ee7e('0x2a')][_0x50ee7e('0x2f')](_0x21e058['_id'])[_0x50ee7e('0x6')]||'-','value':_0x21e058[_0x50ee7e('0xb')]});}await _0x2cb1b4[_0x50ee7e('0x2c')][_0x50ee7e('0x24')]({'embed':{'color':tesseract_1[_0x50ee7e('0x10')][_0x50ee7e('0x4')][_0x50ee7e('0x27')],'title':_0x50ee7e('0xd'),'description':this[_0x50ee7e('0x3')]['locale']['getString'](_0x2cb1b4['guild']['document'][_0x50ee7e('0x23')],_0x50ee7e('0x1f'),_0x50ee7e('0x8')),'fields':_0x4134ed}})[_0x50ee7e('0x14')](()=>{});}}};}};
const a34_0x4f66=['PLATINUM','../../utils/errors','PremiumTier','apply','_id','selfRolesRemove','remove','MANAGE_ROLES','language','resolver','noSelfRoles','16toHlcJ','guild','getString','catch','GOLD','1856fJOpyi','send','author','LIMITED_PREMIUM_MEMBERSHIP','channel','selfRolesList','Constants','name','884568LXJGHX','client','fetchPremiumTier','get','locale','errors','roles','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','DiscordError','102745wrBPgs','PREMIUM_MEMBERSHIP_REQUIRED','ROLE_NOT_FOUND','1DFmvFN','1iUBhnP','886TBcECX','return\x20/\x22\x20+\x20this\x20+\x20\x22/','findByIdAndUpdate','49bjLlzO','IRIS','tag','isPublicBastion','../../models/Role','document','69432WsDWjn','join','membershipLimitSelfRoles','countDocuments','test','../../utils/omnic','resolveRole','selfRoles','push','has','../../utils/constants','COLORS','29LDypMl','exec','LIMITS','28790jGUsSH','selfRoles\x20--remove\x20ROLE','cache','info','exports','constructor','selfRolesAdd','roleNotFound','316FTzoXF','SELF_ROLES','Self\x20Roles','1961dOxdrP','BASTION_ERROR_TYPE','add'];const a34_0x28e7=function(_0x23398d,_0x54459e){_0x23398d=_0x23398d-0x1d8;let _0x46eb29=a34_0x4f66[_0x23398d];return _0x46eb29;};const a34_0xfa2de2=a34_0x28e7;(function(_0x2e841e,_0x3ee783){const _0x5394f2=a34_0x28e7;while(!![]){try{const _0x1eac24=-parseInt(_0x5394f2(0x209))*parseInt(_0x5394f2(0x1e9))+parseInt(_0x5394f2(0x1fe))*-parseInt(_0x5394f2(0x217))+parseInt(_0x5394f2(0x1ef))+parseInt(_0x5394f2(0x1e6))*-parseInt(_0x5394f2(0x206))+parseInt(_0x5394f2(0x1e5))*parseInt(_0x5394f2(0x1e1))+-parseInt(_0x5394f2(0x1fb))*-parseInt(_0x5394f2(0x21c))+-parseInt(_0x5394f2(0x1e4))*-parseInt(_0x5394f2(0x1d8));if(_0x1eac24===_0x3ee783)break;else _0x2e841e['push'](_0x2e841e['shift']());}catch(_0x35bded){_0x2e841e['push'](_0x2e841e['shift']());}}}(a34_0x4f66,0x42dc8));const a34_0x5a2ef0=function(){let _0x33bb87=!![];return function(_0x5cf532,_0x42dd47){const _0x1c58bf=_0x33bb87?function(){const _0x43b145=a34_0x28e7;if(_0x42dd47){const _0x5a7050=_0x42dd47[_0x43b145(0x20f)](_0x5cf532,arguments);return _0x42dd47=null,_0x5a7050;}}:function(){};return _0x33bb87=![],_0x1c58bf;};}(),a34_0x758507=a34_0x5a2ef0(this,function(){const _0x5cddfe=function(){const _0x2c3c2f=a34_0x28e7,_0x4bf257=_0x5cddfe[_0x2c3c2f(0x203)](_0x2c3c2f(0x1e7))()[_0x2c3c2f(0x203)](_0x2c3c2f(0x1df));return!_0x4bf257[_0x2c3c2f(0x1f3)](a34_0x758507);};return _0x5cddfe();});a34_0x758507();'use strict';const tesseract_1=require('@bastion/tesseract'),Role_1=require(a34_0xfa2de2(0x1ed)),constants=require(a34_0xfa2de2(0x1f9)),errors=require(a34_0xfa2de2(0x20d)),omnic=require(a34_0xfa2de2(0x1f4));module[a34_0xfa2de2(0x202)]=class SelfRoles extends tesseract_1['Command']{constructor(){const _0x470d96=a34_0xfa2de2;super('selfRoles',{'description':'It\x20allows\x20you\x20to\x20set\x20up\x20Self\x20Roles\x20in\x20the\x20server.\x20Self\x20Roles\x20are\x20the\x20roles\x20which\x20server\x20members\x20can\x20assign\x20(and\x20unassign)\x20to\x20themselves.','triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'array':['add',_0x470d96(0x212)],'string':[_0x470d96(0x20b),'remove']},'scope':_0x470d96(0x218),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':['MANAGE_ROLES'],'userPermissions':[_0x470d96(0x213)],'syntax':[_0x470d96(0x1f6),'selfRoles\x20--add\x20ROLE',_0x470d96(0x1ff)]}),this[_0x470d96(0x1fc)]=async(_0x3dacba,_0x4bb472)=>{const _0x4ddf98=_0x470d96;if(_0x4bb472[_0x4ddf98(0x20b)]){if(constants[_0x4ddf98(0x1ec)](this[_0x4ddf98(0x1d9)]['user'])){const _0x912f85=await Role_1['default'][_0x4ddf98(0x1f2)]({'guild':_0x3dacba[_0x4ddf98(0x218)]['id'],'selfAssignable':!![]});if(_0x912f85>=constants['LIMITS'][_0x4ddf98(0x207)]){const _0x3348f0=await omnic[_0x4ddf98(0x1da)](_0x3dacba[_0x4ddf98(0x218)])[_0x4ddf98(0x21a)](()=>{});if(_0x3348f0){if(_0x3348f0===omnic[_0x4ddf98(0x20e)]['GOLD']&&_0x912f85>=constants[_0x4ddf98(0x1fd)][_0x4ddf98(0x21b)][_0x4ddf98(0x207)])throw new errors[(_0x4ddf98(0x1e0))](errors[_0x4ddf98(0x20a)]['LIMITED_PREMIUM_MEMBERSHIP'],this[_0x4ddf98(0x1d9)][_0x4ddf98(0x1dc)][_0x4ddf98(0x219)](_0x3dacba[_0x4ddf98(0x218)][_0x4ddf98(0x1ee)][_0x4ddf98(0x214)],_0x4ddf98(0x1dd),_0x4ddf98(0x1f1),constants[_0x4ddf98(0x1fd)][_0x4ddf98(0x21b)][_0x4ddf98(0x207)]));else{if(_0x3348f0===omnic[_0x4ddf98(0x20e)][_0x4ddf98(0x20c)]&&_0x912f85>=constants[_0x4ddf98(0x1fd)][_0x4ddf98(0x20c)][_0x4ddf98(0x207)])throw new errors[(_0x4ddf98(0x1e0))](errors[_0x4ddf98(0x20a)][_0x4ddf98(0x21f)],this['client']['locale'][_0x4ddf98(0x219)](_0x3dacba[_0x4ddf98(0x218)]['document'][_0x4ddf98(0x214)],'errors',_0x4ddf98(0x1f1),constants[_0x4ddf98(0x1fd)][_0x4ddf98(0x20c)]['SELF_ROLES']));}}else throw new errors[(_0x4ddf98(0x1e0))](errors['BASTION_ERROR_TYPE'][_0x4ddf98(0x1e2)],this['client'][_0x4ddf98(0x1dc)][_0x4ddf98(0x219)](_0x3dacba['guild']['document'][_0x4ddf98(0x214)],_0x4ddf98(0x1dd),'premiumSelfRoles',constants[_0x4ddf98(0x1fd)][_0x4ddf98(0x207)]));}}const _0x39cf14=this[_0x4ddf98(0x1d9)]['resolver'][_0x4ddf98(0x1f5)](_0x3dacba[_0x4ddf98(0x218)],_0x4bb472[_0x4ddf98(0x20b)][_0x4ddf98(0x1f0)]('\x20'));if(!_0x39cf14)throw new errors[(_0x4ddf98(0x1e0))](errors['BASTION_ERROR_TYPE']['ROLE_NOT_FOUND'],this[_0x4ddf98(0x1d9)][_0x4ddf98(0x1dc)][_0x4ddf98(0x219)](_0x3dacba[_0x4ddf98(0x218)]['document'][_0x4ddf98(0x214)],_0x4ddf98(0x1dd),_0x4ddf98(0x205)));await Role_1['default'][_0x4ddf98(0x1e8)](_0x39cf14['id'],{'_id':_0x39cf14['id'],'guild':_0x3dacba[_0x4ddf98(0x218)]['id'],'selfAssignable':!![]},{'upsert':!![]}),await _0x3dacba['channel'][_0x4ddf98(0x21d)]({'embed':{'color':tesseract_1[_0x4ddf98(0x222)][_0x4ddf98(0x1fa)]['GREEN'],'description':this[_0x4ddf98(0x1d9)][_0x4ddf98(0x1dc)][_0x4ddf98(0x219)](_0x3dacba[_0x4ddf98(0x218)]['document'][_0x4ddf98(0x214)],_0x4ddf98(0x201),_0x4ddf98(0x204),_0x3dacba[_0x4ddf98(0x21e)][_0x4ddf98(0x1eb)],_0x39cf14[_0x4ddf98(0x223)]),'footer':{'text':_0x39cf14['id']}}})[_0x4ddf98(0x21a)](()=>{});}else{if(_0x4bb472[_0x4ddf98(0x212)]){const _0x58015c=this[_0x4ddf98(0x1d9)][_0x4ddf98(0x215)]['resolveRole'](_0x3dacba[_0x4ddf98(0x218)],_0x4bb472[_0x4ddf98(0x212)]['join']('\x20'));if(!_0x58015c)throw new errors['DiscordError'](errors[_0x4ddf98(0x20a)][_0x4ddf98(0x1e3)],this[_0x4ddf98(0x1d9)][_0x4ddf98(0x1dc)][_0x4ddf98(0x219)](_0x3dacba['guild']['document']['language'],_0x4ddf98(0x1dd),_0x4ddf98(0x205)));await Role_1['default'][_0x4ddf98(0x1e8)](_0x58015c['id'],{'$unset':{'selfAssignable':0x1}}),await _0x3dacba[_0x4ddf98(0x220)]['send']({'embed':{'color':tesseract_1['Constants']['COLORS']['RED'],'description':this[_0x4ddf98(0x1d9)]['locale'][_0x4ddf98(0x219)](_0x3dacba[_0x4ddf98(0x218)][_0x4ddf98(0x1ee)][_0x4ddf98(0x214)],_0x4ddf98(0x201),_0x4ddf98(0x211),_0x3dacba[_0x4ddf98(0x21e)][_0x4ddf98(0x1eb)],_0x58015c[_0x4ddf98(0x223)]),'footer':{'text':_0x58015c['id']}}})[_0x4ddf98(0x21a)](()=>{});}else{const _0x117eeb=await Role_1['default']['find']({'guild':_0x3dacba[_0x4ddf98(0x218)]['id'],'selfAssignable':!![]});if(!_0x117eeb['length'])throw new Error(this['client'][_0x4ddf98(0x1dc)][_0x4ddf98(0x219)](_0x3dacba['guild'][_0x4ddf98(0x1ee)][_0x4ddf98(0x214)],_0x4ddf98(0x1dd),_0x4ddf98(0x216)));const _0xc5014a=[];for(const _0x72e21d of _0x117eeb){!_0x3dacba['guild'][_0x4ddf98(0x1de)][_0x4ddf98(0x200)][_0x4ddf98(0x1f8)](_0x72e21d[_0x4ddf98(0x210)])&&await _0x72e21d['remove']()[_0x4ddf98(0x21a)](()=>{}),_0xc5014a[_0x4ddf98(0x1f7)]({'name':_0x3dacba[_0x4ddf98(0x218)][_0x4ddf98(0x1de)]['cache'][_0x4ddf98(0x1db)](_0x72e21d[_0x4ddf98(0x210)])[_0x4ddf98(0x223)]||'-','value':_0x72e21d['_id']});}await _0x3dacba[_0x4ddf98(0x220)]['send']({'embed':{'color':tesseract_1[_0x4ddf98(0x222)][_0x4ddf98(0x1fa)][_0x4ddf98(0x1ea)],'title':_0x4ddf98(0x208),'description':this[_0x4ddf98(0x1d9)][_0x4ddf98(0x1dc)][_0x4ddf98(0x219)](_0x3dacba['guild'][_0x4ddf98(0x1ee)][_0x4ddf98(0x214)],_0x4ddf98(0x201),_0x4ddf98(0x221)),'fields':_0xc5014a}})[_0x4ddf98(0x21a)](()=>{});}}};}};
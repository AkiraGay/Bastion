const a32_0x4b1a=['PremiumTier','guild','client','SELF_ROLES','exports','selfRolesList','IRIS','roleNotFound','../../models/Role','catch','ROLE_NOT_FOUND','cache','send','errors','apply','name','GREEN','document','Self\x20Roles','add','user','GOLD','membershipLimitSelfRoles','getString','selfRoles\x20--remove\x20ROLE','noSelfRoles','MANAGE_ROLES','get','PREMIUM_MEMBERSHIP_REQUIRED','LIMITS','../../utils/errors','DiscordError','language','PLATINUM','join','constructor','default','BASTION_ERROR_TYPE','author','resolver','info','premiumSelfRoles','tag','exec','_id','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','locale','has','LIMITED_PREMIUM_MEMBERSHIP','return\x20/\x22\x20+\x20this\x20+\x20\x22/','selfRolesAdd','roles','selfRoles\x20--add\x20ROLE','resolveRole','../../utils/omnic','channel','remove','COLORS','Constants','selfRoles'];(function(_0x225642,_0x4b1aa8){const _0x553581=function(_0xa50436){while(--_0xa50436){_0x225642['push'](_0x225642['shift']());}},_0x207177=function(){const _0x3cfd1c={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x5f4d6b,_0x7ad1a,_0x5f25df,_0x5c2c75){_0x5c2c75=_0x5c2c75||{};let _0x2e8c71=_0x7ad1a+'='+_0x5f25df,_0x40e674=0x0;for(let _0x32a458=0x0,_0x133b58=_0x5f4d6b['length'];_0x32a458<_0x133b58;_0x32a458++){const _0xfdfbee=_0x5f4d6b[_0x32a458];_0x2e8c71+=';\x20'+_0xfdfbee;const _0x4e987f=_0x5f4d6b[_0xfdfbee];_0x5f4d6b['push'](_0x4e987f),_0x133b58=_0x5f4d6b['length'],_0x4e987f!==!![]&&(_0x2e8c71+='='+_0x4e987f);}_0x5c2c75['cookie']=_0x2e8c71;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4d8bc7,_0x422a9e){_0x4d8bc7=_0x4d8bc7||function(_0x349828){return _0x349828;};const _0x5f4688=_0x4d8bc7(new RegExp('(?:^|;\x20)'+_0x422a9e['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0xff0b9b=function(_0x2eb417,_0x5b9bea){_0x2eb417(++_0x5b9bea);};return _0xff0b9b(_0x553581,_0x4b1aa8),_0x5f4688?decodeURIComponent(_0x5f4688[0x1]):undefined;}},_0x281178=function(){const _0x5b3a4c=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x5b3a4c['test'](_0x3cfd1c['removeCookie']['toString']());};_0x3cfd1c['updateCookie']=_0x281178;let _0x18fc09='';const _0x3e403e=_0x3cfd1c['updateCookie']();if(!_0x3e403e)_0x3cfd1c['setCookie'](['*'],'counter',0x1);else _0x3e403e?_0x18fc09=_0x3cfd1c['getCookie'](null,'counter'):_0x3cfd1c['removeCookie']();};_0x207177();}(a32_0x4b1a,0xf4));const a32_0x5535=function(_0x225642,_0x4b1aa8){_0x225642=_0x225642-0x0;let _0x553581=a32_0x4b1a[_0x225642];return _0x553581;};const a32_0x5f25df=function(){let _0x28a70b=!![];return function(_0x363463,_0x2abe38){const _0x34fd7b=_0x28a70b?function(){if(_0x2abe38){const _0x4b5a57=_0x2abe38[a32_0x5535('0xa')](_0x363463,arguments);return _0x2abe38=null,_0x4b5a57;}}:function(){};return _0x28a70b=![],_0x34fd7b;};}(),a32_0x7ad1a=a32_0x5f25df(this,function(){const _0x1328f3=function(){const _0x499e54=_0x1328f3[a32_0x5535('0x1f')](a32_0x5535('0x2d'))()[a32_0x5535('0x1f')](a32_0x5535('0x29'));return!_0x499e54['test'](a32_0x7ad1a);};return _0x1328f3();});a32_0x7ad1a();'use strict';const tesseract_1=require('@bastion/tesseract'),Role_1=require(a32_0x5535('0x4')),constants=require('../../utils/constants'),errors=require(a32_0x5535('0x1a')),omnic=require(a32_0x5535('0x32'));module[a32_0x5535('0x0')]=class SelfRoles extends tesseract_1['Command']{constructor(){super('selfRoles',{'description':'It\x20allows\x20you\x20to\x20set\x20up\x20Self\x20Roles\x20in\x20the\x20server.\x20Self\x20Roles\x20are\x20the\x20roles\x20which\x20server\x20members\x20can\x20assign\x20(and\x20unassign)\x20to\x20themselves.','triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'array':['add',a32_0x5535('0x34')],'string':[a32_0x5535('0xf'),a32_0x5535('0x34')]},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a32_0x5535('0x16')],'userPermissions':[a32_0x5535('0x16')],'syntax':[a32_0x5535('0x37'),a32_0x5535('0x30'),a32_0x5535('0x14')]}),this[a32_0x5535('0x27')]=async(_0x2e779c,_0x58fcb8)=>{if(_0x58fcb8[a32_0x5535('0xf')]){if(constants['isPublicBastion'](this['client'][a32_0x5535('0x10')])){const _0x5502c4=await Role_1[a32_0x5535('0x20')]['countDocuments']({'guild':_0x2e779c[a32_0x5535('0x39')]['id'],'selfAssignable':!![]});if(_0x5502c4>=constants[a32_0x5535('0x19')][a32_0x5535('0x3b')]){const _0x3512c6=await omnic['fetchPremiumTier'](_0x2e779c[a32_0x5535('0x39')])[a32_0x5535('0x5')](()=>{});if(_0x3512c6){if(_0x3512c6===omnic[a32_0x5535('0x38')]['GOLD']&&_0x5502c4>=constants['LIMITS'][a32_0x5535('0x11')][a32_0x5535('0x3b')])throw new errors[(a32_0x5535('0x1b'))](errors[a32_0x5535('0x21')][a32_0x5535('0x2c')],this[a32_0x5535('0x3a')]['locale'][a32_0x5535('0x13')](_0x2e779c['guild']['document'][a32_0x5535('0x1c')],a32_0x5535('0x9'),'membershipLimitSelfRoles',constants[a32_0x5535('0x19')]['GOLD']['SELF_ROLES']));else{if(_0x3512c6===omnic[a32_0x5535('0x38')][a32_0x5535('0x1d')]&&_0x5502c4>=constants[a32_0x5535('0x19')]['PLATINUM'][a32_0x5535('0x3b')])throw new errors['DiscordError'](errors[a32_0x5535('0x21')]['LIMITED_PREMIUM_MEMBERSHIP'],this[a32_0x5535('0x3a')][a32_0x5535('0x2a')]['getString'](_0x2e779c[a32_0x5535('0x39')][a32_0x5535('0xd')][a32_0x5535('0x1c')],a32_0x5535('0x9'),a32_0x5535('0x12'),constants[a32_0x5535('0x19')][a32_0x5535('0x1d')][a32_0x5535('0x3b')]));}}else throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][a32_0x5535('0x18')],this[a32_0x5535('0x3a')]['locale'][a32_0x5535('0x13')](_0x2e779c[a32_0x5535('0x39')][a32_0x5535('0xd')][a32_0x5535('0x1c')],a32_0x5535('0x9'),a32_0x5535('0x25'),constants[a32_0x5535('0x19')][a32_0x5535('0x3b')]));}}const _0x4e07a2=this[a32_0x5535('0x3a')][a32_0x5535('0x23')][a32_0x5535('0x31')](_0x2e779c['guild'],_0x58fcb8['add'][a32_0x5535('0x1e')]('\x20'));if(!_0x4e07a2)throw new errors['DiscordError'](errors[a32_0x5535('0x21')][a32_0x5535('0x6')],this[a32_0x5535('0x3a')][a32_0x5535('0x2a')][a32_0x5535('0x13')](_0x2e779c[a32_0x5535('0x39')][a32_0x5535('0xd')]['language'],a32_0x5535('0x9'),'roleNotFound'));await Role_1[a32_0x5535('0x20')]['findByIdAndUpdate'](_0x4e07a2['id'],{'_id':_0x4e07a2['id'],'guild':_0x2e779c[a32_0x5535('0x39')]['id'],'selfAssignable':!![]},{'upsert':!![]}),await _0x2e779c[a32_0x5535('0x33')][a32_0x5535('0x8')]({'embed':{'color':tesseract_1[a32_0x5535('0x36')][a32_0x5535('0x35')][a32_0x5535('0xc')],'description':this[a32_0x5535('0x3a')][a32_0x5535('0x2a')]['getString'](_0x2e779c[a32_0x5535('0x39')][a32_0x5535('0xd')]['language'],a32_0x5535('0x24'),a32_0x5535('0x2e'),_0x2e779c[a32_0x5535('0x22')]['tag'],_0x4e07a2['name']),'footer':{'text':_0x4e07a2['id']}}})[a32_0x5535('0x5')](()=>{});}else{if(_0x58fcb8[a32_0x5535('0x34')]){const _0x12015c=this[a32_0x5535('0x3a')][a32_0x5535('0x23')]['resolveRole'](_0x2e779c[a32_0x5535('0x39')],_0x58fcb8[a32_0x5535('0x34')][a32_0x5535('0x1e')]('\x20'));if(!_0x12015c)throw new errors[(a32_0x5535('0x1b'))](errors['BASTION_ERROR_TYPE'][a32_0x5535('0x6')],this['client'][a32_0x5535('0x2a')][a32_0x5535('0x13')](_0x2e779c['guild'][a32_0x5535('0xd')][a32_0x5535('0x1c')],a32_0x5535('0x9'),a32_0x5535('0x3')));await Role_1[a32_0x5535('0x20')]['findByIdAndUpdate'](_0x12015c['id'],{'$unset':{'selfAssignable':0x1}}),await _0x2e779c[a32_0x5535('0x33')][a32_0x5535('0x8')]({'embed':{'color':tesseract_1[a32_0x5535('0x36')]['COLORS']['RED'],'description':this[a32_0x5535('0x3a')][a32_0x5535('0x2a')][a32_0x5535('0x13')](_0x2e779c['guild'][a32_0x5535('0xd')][a32_0x5535('0x1c')],a32_0x5535('0x24'),'selfRolesRemove',_0x2e779c[a32_0x5535('0x22')][a32_0x5535('0x26')],_0x12015c[a32_0x5535('0xb')]),'footer':{'text':_0x12015c['id']}}})['catch'](()=>{});}else{const _0x1a6da2=await Role_1['default']['find']({'guild':_0x2e779c['guild']['id'],'selfAssignable':!![]});if(!_0x1a6da2['length'])throw new Error(this[a32_0x5535('0x3a')][a32_0x5535('0x2a')][a32_0x5535('0x13')](_0x2e779c[a32_0x5535('0x39')]['document']['language'],a32_0x5535('0x9'),a32_0x5535('0x15')));const _0x5b8f29=[];for(const _0x273021 of _0x1a6da2){!_0x2e779c[a32_0x5535('0x39')][a32_0x5535('0x2f')]['cache'][a32_0x5535('0x2b')](_0x273021[a32_0x5535('0x28')])&&await _0x273021[a32_0x5535('0x34')]()['catch'](()=>{}),_0x5b8f29['push']({'name':_0x2e779c['guild'][a32_0x5535('0x2f')][a32_0x5535('0x7')][a32_0x5535('0x17')](_0x273021['_id'])[a32_0x5535('0xb')]||'-','value':_0x273021[a32_0x5535('0x28')]});}await _0x2e779c['channel'][a32_0x5535('0x8')]({'embed':{'color':tesseract_1[a32_0x5535('0x36')]['COLORS'][a32_0x5535('0x2')],'title':a32_0x5535('0xe'),'description':this[a32_0x5535('0x3a')]['locale']['getString'](_0x2e779c[a32_0x5535('0x39')][a32_0x5535('0xd')][a32_0x5535('0x1c')],'info',a32_0x5535('0x1')),'fields':_0x5b8f29}})[a32_0x5535('0x5')](()=>{});}}};}};
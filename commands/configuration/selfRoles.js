const a32_0x1907=['^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','fetchPremiumTier','isPublicBastion','info','document','../../utils/constants','tag','Command','countDocuments','DiscordError','BASTION_ERROR_TYPE','selfRoles\x20--add\x20ROLE','name','selfRolesList','has','user','client','join','Constants','remove','COLORS','It\x20allows\x20you\x20to\x20set\x20up\x20Self\x20Roles\x20in\x20the\x20server.\x20Self\x20Roles\x20are\x20the\x20roles\x20which\x20server\x20members\x20can\x20assign\x20(and\x20unassign)\x20to\x20themselves.','RED','channel','selfRoles','PREMIUM_MEMBERSHIP_REQUIRED','resolver','send','cache','author','guild','default','LIMITED_PREMIUM_MEMBERSHIP','MANAGE_ROLES','roles','PremiumTier','apply','compile','ROLE_NOT_FOUND','findByIdAndUpdate','PLATINUM','noSelfRoles','@bastion/tesseract','getString','catch','language','resolveRole','errors','selfRolesAdd','length','_id','IRIS','find','selfRoles\x20--remove\x20ROLE','locale','push','add','LIMITS','return\x20/\x22\x20+\x20this\x20+\x20\x22/','SELF_ROLES','exec','GOLD'];(function(_0x185610,_0x190785){const _0x4db28c=function(_0x5c5656){while(--_0x5c5656){_0x185610['push'](_0x185610['shift']());}};const _0x56ef6f=function(){const _0x3ad0ea={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x46e8a2,_0x1e39b2,_0x14aaa6,_0x50e493){_0x50e493=_0x50e493||{};let _0x4191f5=_0x1e39b2+'='+_0x14aaa6;let _0x557445=0x0;for(let _0x8adcf3=0x0,_0x5c7e23=_0x46e8a2['length'];_0x8adcf3<_0x5c7e23;_0x8adcf3++){const _0x5296a1=_0x46e8a2[_0x8adcf3];_0x4191f5+=';\x20'+_0x5296a1;const _0x536d6f=_0x46e8a2[_0x5296a1];_0x46e8a2['push'](_0x536d6f);_0x5c7e23=_0x46e8a2['length'];if(_0x536d6f!==!![]){_0x4191f5+='='+_0x536d6f;}}_0x50e493['cookie']=_0x4191f5;},'removeCookie':function(){return'dev';},'getCookie':function(_0x37c90c,_0x58c8d2){_0x37c90c=_0x37c90c||function(_0x6a2d3b){return _0x6a2d3b;};const _0x44eeb4=_0x37c90c(new RegExp('(?:^|;\x20)'+_0x58c8d2['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x3d6c1a=function(_0x2decdb,_0x2751c8){_0x2decdb(++_0x2751c8);};_0x3d6c1a(_0x4db28c,_0x190785);return _0x44eeb4?decodeURIComponent(_0x44eeb4[0x1]):undefined;}};const _0x4cbf51=function(){const _0x1ad325=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x1ad325['test'](_0x3ad0ea['removeCookie']['toString']());};_0x3ad0ea['updateCookie']=_0x4cbf51;let _0xd25732='';const _0x512b05=_0x3ad0ea['updateCookie']();if(!_0x512b05){_0x3ad0ea['setCookie'](['*'],'counter',0x1);}else if(_0x512b05){_0xd25732=_0x3ad0ea['getCookie'](null,'counter');}else{_0x3ad0ea['removeCookie']();}};_0x56ef6f();}(a32_0x1907,0xca));const a32_0x4db2=function(_0x185610,_0x190785){_0x185610=_0x185610-0x0;let _0x4db28c=a32_0x1907[_0x185610];return _0x4db28c;};const a32_0x3ad0ea=function(){let _0x233093=!![];return function(_0x470571,_0x4ea13d){const _0x3efd3f=_0x233093?function(){if(_0x4ea13d){const _0x92c45d=_0x4ea13d[a32_0x4db2('0x14')](_0x470571,arguments);_0x4ea13d=null;return _0x92c45d;}}:function(){};_0x233093=![];return _0x3efd3f;};}();const a32_0x5c5656=a32_0x3ad0ea(this,function(){const _0x91c34a=function(){const _0x5da4dd=_0x91c34a['constructor'](a32_0x4db2('0x2a'))()[a32_0x4db2('0x15')](a32_0x4db2('0x2e'));return!_0x5da4dd['test'](a32_0x5c5656);};return _0x91c34a();});a32_0x5c5656();'use strict';const tesseract_1=require(a32_0x4db2('0x1a'));const Role_1=require('../../models/Role');const constants=require(a32_0x4db2('0x33'));const errors=require('../../utils/errors');const omnic=require('../../utils/omnic');module['exports']=class SelfRoles extends tesseract_1[a32_0x4db2('0x35')]{constructor(){super('selfRoles',{'description':a32_0x4db2('0x5'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'array':[a32_0x4db2('0x28'),a32_0x4db2('0x3')],'string':[a32_0x4db2('0x28'),a32_0x4db2('0x3')]},'scope':a32_0x4db2('0xe'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a32_0x4db2('0x11')],'userPermissions':[a32_0x4db2('0x11')],'syntax':[a32_0x4db2('0x8'),a32_0x4db2('0x39'),a32_0x4db2('0x25')]});this[a32_0x4db2('0x2c')]=async(_0x464c60,_0x532b79)=>{if(_0x532b79[a32_0x4db2('0x28')]){if(constants[a32_0x4db2('0x30')](this[a32_0x4db2('0x0')][a32_0x4db2('0x3d')])){const _0x573254=await Role_1[a32_0x4db2('0xf')][a32_0x4db2('0x36')]({'guild':_0x464c60[a32_0x4db2('0xe')]['id'],'selfAssignable':!![]});if(_0x573254>=constants[a32_0x4db2('0x29')][a32_0x4db2('0x2b')]){const _0x1c674a=await omnic[a32_0x4db2('0x2f')](_0x464c60[a32_0x4db2('0xe')])[a32_0x4db2('0x1c')](()=>{});if(_0x1c674a){if(_0x1c674a===omnic[a32_0x4db2('0x13')][a32_0x4db2('0x2d')]&&_0x573254>=constants[a32_0x4db2('0x29')][a32_0x4db2('0x2d')]['SELF_ROLES']){throw new errors[(a32_0x4db2('0x37'))](errors[a32_0x4db2('0x38')][a32_0x4db2('0x10')],this[a32_0x4db2('0x0')]['locale']['getString'](_0x464c60['guild'][a32_0x4db2('0x32')][a32_0x4db2('0x1d')],'errors','membershipLimitSelfRoles',constants['LIMITS'][a32_0x4db2('0x2d')]['SELF_ROLES']));}else if(_0x1c674a===omnic[a32_0x4db2('0x13')][a32_0x4db2('0x18')]&&_0x573254>=constants[a32_0x4db2('0x29')][a32_0x4db2('0x18')][a32_0x4db2('0x2b')]){throw new errors[(a32_0x4db2('0x37'))](errors[a32_0x4db2('0x38')][a32_0x4db2('0x10')],this[a32_0x4db2('0x0')][a32_0x4db2('0x26')][a32_0x4db2('0x1b')](_0x464c60[a32_0x4db2('0xe')][a32_0x4db2('0x32')]['language'],a32_0x4db2('0x1f'),'membershipLimitSelfRoles',constants[a32_0x4db2('0x29')]['PLATINUM'][a32_0x4db2('0x2b')]));}}else{throw new errors[(a32_0x4db2('0x37'))](errors[a32_0x4db2('0x38')][a32_0x4db2('0x9')],this[a32_0x4db2('0x0')][a32_0x4db2('0x26')][a32_0x4db2('0x1b')](_0x464c60[a32_0x4db2('0xe')][a32_0x4db2('0x32')][a32_0x4db2('0x1d')],'errors','premiumSelfRoles',constants[a32_0x4db2('0x29')]['SELF_ROLES']));}}}const _0x8a7bf=this[a32_0x4db2('0x0')][a32_0x4db2('0xa')][a32_0x4db2('0x1e')](_0x464c60[a32_0x4db2('0xe')],_0x532b79['add'][a32_0x4db2('0x1')]('\x20'));if(!_0x8a7bf)throw new errors[(a32_0x4db2('0x37'))](errors[a32_0x4db2('0x38')][a32_0x4db2('0x16')],this['client'][a32_0x4db2('0x26')][a32_0x4db2('0x1b')](_0x464c60[a32_0x4db2('0xe')][a32_0x4db2('0x32')][a32_0x4db2('0x1d')],a32_0x4db2('0x1f'),'roleNotFound'));await Role_1[a32_0x4db2('0xf')][a32_0x4db2('0x17')](_0x8a7bf['id'],{'_id':_0x8a7bf['id'],'guild':_0x464c60[a32_0x4db2('0xe')]['id'],'selfAssignable':!![]},{'upsert':!![]});await _0x464c60['channel'][a32_0x4db2('0xb')]({'embed':{'color':tesseract_1[a32_0x4db2('0x2')][a32_0x4db2('0x4')]['GREEN'],'description':this[a32_0x4db2('0x0')][a32_0x4db2('0x26')]['getString'](_0x464c60[a32_0x4db2('0xe')][a32_0x4db2('0x32')][a32_0x4db2('0x1d')],a32_0x4db2('0x31'),a32_0x4db2('0x20'),_0x464c60[a32_0x4db2('0xd')][a32_0x4db2('0x34')],_0x8a7bf[a32_0x4db2('0x3a')]),'footer':{'text':_0x8a7bf['id']}}})[a32_0x4db2('0x1c')](()=>{});}else if(_0x532b79[a32_0x4db2('0x3')]){const _0x3becc5=this[a32_0x4db2('0x0')][a32_0x4db2('0xa')]['resolveRole'](_0x464c60[a32_0x4db2('0xe')],_0x532b79[a32_0x4db2('0x3')][a32_0x4db2('0x1')]('\x20'));if(!_0x3becc5)throw new errors[(a32_0x4db2('0x37'))](errors[a32_0x4db2('0x38')][a32_0x4db2('0x16')],this['client'][a32_0x4db2('0x26')][a32_0x4db2('0x1b')](_0x464c60['guild'][a32_0x4db2('0x32')][a32_0x4db2('0x1d')],a32_0x4db2('0x1f'),'roleNotFound'));await Role_1[a32_0x4db2('0xf')][a32_0x4db2('0x17')](_0x3becc5['id'],{'$unset':{'selfAssignable':0x1}});await _0x464c60[a32_0x4db2('0x7')][a32_0x4db2('0xb')]({'embed':{'color':tesseract_1[a32_0x4db2('0x2')]['COLORS'][a32_0x4db2('0x6')],'description':this[a32_0x4db2('0x0')][a32_0x4db2('0x26')][a32_0x4db2('0x1b')](_0x464c60[a32_0x4db2('0xe')]['document'][a32_0x4db2('0x1d')],'info','selfRolesRemove',_0x464c60[a32_0x4db2('0xd')][a32_0x4db2('0x34')],_0x3becc5[a32_0x4db2('0x3a')]),'footer':{'text':_0x3becc5['id']}}})['catch'](()=>{});}else{const _0x475109=await Role_1[a32_0x4db2('0xf')][a32_0x4db2('0x24')]({'guild':_0x464c60[a32_0x4db2('0xe')]['id'],'selfAssignable':!![]});if(!_0x475109[a32_0x4db2('0x21')]){throw new Error(this[a32_0x4db2('0x0')][a32_0x4db2('0x26')][a32_0x4db2('0x1b')](_0x464c60[a32_0x4db2('0xe')][a32_0x4db2('0x32')][a32_0x4db2('0x1d')],a32_0x4db2('0x1f'),a32_0x4db2('0x19')));}const _0x250d0e=[];for(const _0x1f197c of _0x475109){if(!_0x464c60['guild'][a32_0x4db2('0x12')][a32_0x4db2('0xc')][a32_0x4db2('0x3c')](_0x1f197c[a32_0x4db2('0x22')])){await _0x1f197c['remove']()['catch'](()=>{});}_0x250d0e[a32_0x4db2('0x27')]({'name':_0x464c60['guild'][a32_0x4db2('0x12')]['cache']['get'](_0x1f197c[a32_0x4db2('0x22')])['name']||'-','value':_0x1f197c['_id']});}await _0x464c60[a32_0x4db2('0x7')]['send']({'embed':{'color':tesseract_1['Constants'][a32_0x4db2('0x4')][a32_0x4db2('0x23')],'title':'Self\x20Roles','description':this[a32_0x4db2('0x0')][a32_0x4db2('0x26')][a32_0x4db2('0x1b')](_0x464c60[a32_0x4db2('0xe')][a32_0x4db2('0x32')][a32_0x4db2('0x1d')],'info',a32_0x4db2('0x3b')),'fields':_0x250d0e}})[a32_0x4db2('0x1c')](()=>{});}};}};
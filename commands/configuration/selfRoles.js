const a32_0x53c7=['Constants','info','noSelfRoles','../../utils/omnic','_id','cache','exports','document','LIMITS','LIMITED_PREMIUM_MEMBERSHIP','channel','@bastion/tesseract','COLORS','length','BASTION_ERROR_TYPE','find','GOLD','name','has','client','selfRolesAdd','resolver','get','default','catch','roleNotFound','isPublicBastion','resolveRole','join','send','../../models/Role','constructor','../../utils/errors','SELF_ROLES','selfRoles\x20--add\x20ROLE','MANAGE_ROLES','PLATINUM','push','errors','RED','selfRoles\x20--remove\x20ROLE','author','../../utils/constants','add','language','return\x20/\x22\x20+\x20this\x20+\x20\x22/','selfRoles','membershipLimitSelfRoles','DiscordError','remove','exec','getString','It\x20allows\x20you\x20to\x20set\x20up\x20Self\x20Roles\x20in\x20the\x20server.\x20Self\x20Roles\x20are\x20the\x20roles\x20which\x20server\x20members\x20can\x20assign\x20(and\x20unassign)\x20to\x20themselves.','locale','findByIdAndUpdate','ROLE_NOT_FOUND','PremiumTier','countDocuments','guild'];(function(_0x36c33d,_0x53c7ff){const _0x39513d=function(_0x21136d){while(--_0x21136d){_0x36c33d['push'](_0x36c33d['shift']());}};const _0x47193e=function(){const _0x258ac4={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x14da01,_0x5f0025,_0x5bd2b5,_0x5b8233){_0x5b8233=_0x5b8233||{};let _0x33b1c3=_0x5f0025+'='+_0x5bd2b5;let _0x3a65ae=0x0;for(let _0x4707a2=0x0,_0x84851e=_0x14da01['length'];_0x4707a2<_0x84851e;_0x4707a2++){const _0x440638=_0x14da01[_0x4707a2];_0x33b1c3+=';\x20'+_0x440638;const _0x1a1ad4=_0x14da01[_0x440638];_0x14da01['push'](_0x1a1ad4);_0x84851e=_0x14da01['length'];if(_0x1a1ad4!==!![]){_0x33b1c3+='='+_0x1a1ad4;}}_0x5b8233['cookie']=_0x33b1c3;},'removeCookie':function(){return'dev';},'getCookie':function(_0x481718,_0x619a1d){_0x481718=_0x481718||function(_0x556fe8){return _0x556fe8;};const _0x1d439c=_0x481718(new RegExp('(?:^|;\x20)'+_0x619a1d['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0xbd3a67=function(_0x22efb7,_0x1b5c93){_0x22efb7(++_0x1b5c93);};_0xbd3a67(_0x39513d,_0x53c7ff);return _0x1d439c?decodeURIComponent(_0x1d439c[0x1]):undefined;}};const _0x477765=function(){const _0xab075d=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0xab075d['test'](_0x258ac4['removeCookie']['toString']());};_0x258ac4['updateCookie']=_0x477765;let _0x5e128c='';const _0x172bdb=_0x258ac4['updateCookie']();if(!_0x172bdb){_0x258ac4['setCookie'](['*'],'counter',0x1);}else if(_0x172bdb){_0x5e128c=_0x258ac4['getCookie'](null,'counter');}else{_0x258ac4['removeCookie']();}};_0x47193e();}(a32_0x53c7,0x14a));const a32_0x3951=function(_0x36c33d,_0x53c7ff){_0x36c33d=_0x36c33d-0x0;let _0x39513d=a32_0x53c7[_0x36c33d];return _0x39513d;};const a32_0x258ac4=function(){let _0x575500=!![];return function(_0x41f63f,_0x340918){const _0x24950a=_0x575500?function(){if(_0x340918){const _0x4352dd=_0x340918['apply'](_0x41f63f,arguments);_0x340918=null;return _0x4352dd;}}:function(){};_0x575500=![];return _0x24950a;};}();const a32_0x21136d=a32_0x258ac4(this,function(){const _0x142dad=function(){const _0x583777=_0x142dad[a32_0x3951('0x37')](a32_0x3951('0xa'))()['compile']('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x583777['test'](a32_0x21136d);};return _0x142dad();});a32_0x21136d();'use strict';const tesseract_1=require(a32_0x3951('0x23'));const Role_1=require(a32_0x3951('0x36'));const constants=require(a32_0x3951('0x7'));const errors=require(a32_0x3951('0x38'));const omnic=require(a32_0x3951('0x1b'));module[a32_0x3951('0x1e')]=class SelfRoles extends tesseract_1['Command']{constructor(){super(a32_0x3951('0xb'),{'description':a32_0x3951('0x11'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'array':[a32_0x3951('0x8'),'remove'],'string':[a32_0x3951('0x8'),a32_0x3951('0xe')]},'scope':a32_0x3951('0x17'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a32_0x3951('0x0')],'userPermissions':[a32_0x3951('0x0')],'syntax':['selfRoles',a32_0x3951('0x3a'),a32_0x3951('0x5')]});this[a32_0x3951('0xf')]=async(_0x25fbe8,_0x49b0b7)=>{if(_0x49b0b7[a32_0x3951('0x8')]){if(constants[a32_0x3951('0x32')](this[a32_0x3951('0x2b')]['user'])){const _0x2f987c=await Role_1['default'][a32_0x3951('0x16')]({'guild':_0x25fbe8[a32_0x3951('0x17')]['id'],'selfAssignable':!![]});if(_0x2f987c>=constants[a32_0x3951('0x20')][a32_0x3951('0x39')]){const _0x2d539e=await omnic['fetchPremiumTier'](_0x25fbe8[a32_0x3951('0x17')])[a32_0x3951('0x30')](()=>{});if(_0x2d539e){if(_0x2d539e===omnic[a32_0x3951('0x15')][a32_0x3951('0x28')]&&_0x2f987c>=constants[a32_0x3951('0x20')][a32_0x3951('0x28')][a32_0x3951('0x39')]){throw new errors[(a32_0x3951('0xd'))](errors[a32_0x3951('0x26')][a32_0x3951('0x21')],this[a32_0x3951('0x2b')][a32_0x3951('0x12')][a32_0x3951('0x10')](_0x25fbe8['guild'][a32_0x3951('0x1f')][a32_0x3951('0x9')],'errors',a32_0x3951('0xc'),constants[a32_0x3951('0x20')][a32_0x3951('0x28')][a32_0x3951('0x39')]));}else if(_0x2d539e===omnic[a32_0x3951('0x15')]['PLATINUM']&&_0x2f987c>=constants[a32_0x3951('0x20')][a32_0x3951('0x1')][a32_0x3951('0x39')]){throw new errors[(a32_0x3951('0xd'))](errors['BASTION_ERROR_TYPE'][a32_0x3951('0x21')],this[a32_0x3951('0x2b')][a32_0x3951('0x12')][a32_0x3951('0x10')](_0x25fbe8[a32_0x3951('0x17')][a32_0x3951('0x1f')][a32_0x3951('0x9')],'errors',a32_0x3951('0xc'),constants[a32_0x3951('0x20')][a32_0x3951('0x1')][a32_0x3951('0x39')]));}}else{throw new errors[(a32_0x3951('0xd'))](errors[a32_0x3951('0x26')]['PREMIUM_MEMBERSHIP_REQUIRED'],this['client'][a32_0x3951('0x12')][a32_0x3951('0x10')](_0x25fbe8[a32_0x3951('0x17')]['document'][a32_0x3951('0x9')],a32_0x3951('0x3'),'premiumSelfRoles',constants['LIMITS'][a32_0x3951('0x39')]));}}}const _0x2b87d8=this[a32_0x3951('0x2b')][a32_0x3951('0x2d')][a32_0x3951('0x33')](_0x25fbe8[a32_0x3951('0x17')],_0x49b0b7[a32_0x3951('0x8')][a32_0x3951('0x34')]('\x20'));if(!_0x2b87d8)throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][a32_0x3951('0x14')],this['client'][a32_0x3951('0x12')][a32_0x3951('0x10')](_0x25fbe8[a32_0x3951('0x17')]['document'][a32_0x3951('0x9')],a32_0x3951('0x3'),a32_0x3951('0x31')));await Role_1['default'][a32_0x3951('0x13')](_0x2b87d8['id'],{'_id':_0x2b87d8['id'],'guild':_0x25fbe8[a32_0x3951('0x17')]['id'],'selfAssignable':!![]},{'upsert':!![]});await _0x25fbe8[a32_0x3951('0x22')][a32_0x3951('0x35')]({'embed':{'color':tesseract_1[a32_0x3951('0x18')][a32_0x3951('0x24')]['GREEN'],'description':this['client'][a32_0x3951('0x12')][a32_0x3951('0x10')](_0x25fbe8[a32_0x3951('0x17')][a32_0x3951('0x1f')][a32_0x3951('0x9')],a32_0x3951('0x19'),a32_0x3951('0x2c'),_0x25fbe8[a32_0x3951('0x6')]['tag'],_0x2b87d8[a32_0x3951('0x29')]),'footer':{'text':_0x2b87d8['id']}}})[a32_0x3951('0x30')](()=>{});}else if(_0x49b0b7[a32_0x3951('0xe')]){const _0x5831a2=this['client'][a32_0x3951('0x2d')][a32_0x3951('0x33')](_0x25fbe8[a32_0x3951('0x17')],_0x49b0b7[a32_0x3951('0xe')]['join']('\x20'));if(!_0x5831a2)throw new errors[(a32_0x3951('0xd'))](errors[a32_0x3951('0x26')][a32_0x3951('0x14')],this[a32_0x3951('0x2b')][a32_0x3951('0x12')][a32_0x3951('0x10')](_0x25fbe8['guild'][a32_0x3951('0x1f')][a32_0x3951('0x9')],a32_0x3951('0x3'),a32_0x3951('0x31')));await Role_1[a32_0x3951('0x2f')]['findByIdAndUpdate'](_0x5831a2['id'],{'$unset':{'selfAssignable':0x1}});await _0x25fbe8[a32_0x3951('0x22')][a32_0x3951('0x35')]({'embed':{'color':tesseract_1[a32_0x3951('0x18')]['COLORS'][a32_0x3951('0x4')],'description':this[a32_0x3951('0x2b')][a32_0x3951('0x12')]['getString'](_0x25fbe8['guild'][a32_0x3951('0x1f')]['language'],'info','selfRolesRemove',_0x25fbe8[a32_0x3951('0x6')]['tag'],_0x5831a2[a32_0x3951('0x29')]),'footer':{'text':_0x5831a2['id']}}})[a32_0x3951('0x30')](()=>{});}else{const _0x2170ac=await Role_1['default'][a32_0x3951('0x27')]({'guild':_0x25fbe8[a32_0x3951('0x17')]['id'],'selfAssignable':!![]});if(!_0x2170ac[a32_0x3951('0x25')]){throw new Error(this[a32_0x3951('0x2b')][a32_0x3951('0x12')][a32_0x3951('0x10')](_0x25fbe8[a32_0x3951('0x17')][a32_0x3951('0x1f')][a32_0x3951('0x9')],a32_0x3951('0x3'),a32_0x3951('0x1a')));}const _0x32021e=[];for(const _0x774b48 of _0x2170ac){if(!_0x25fbe8['guild']['roles'][a32_0x3951('0x1d')][a32_0x3951('0x2a')](_0x774b48['_id'])){await _0x774b48[a32_0x3951('0xe')]()[a32_0x3951('0x30')](()=>{});}_0x32021e[a32_0x3951('0x2')]({'name':_0x25fbe8[a32_0x3951('0x17')]['roles'][a32_0x3951('0x1d')][a32_0x3951('0x2e')](_0x774b48[a32_0x3951('0x1c')])['name']||'-','value':_0x774b48[a32_0x3951('0x1c')]});}await _0x25fbe8['channel'][a32_0x3951('0x35')]({'embed':{'color':tesseract_1[a32_0x3951('0x18')][a32_0x3951('0x24')]['IRIS'],'title':'Self\x20Roles','description':this[a32_0x3951('0x2b')][a32_0x3951('0x12')][a32_0x3951('0x10')](_0x25fbe8[a32_0x3951('0x17')]['document']['language'],a32_0x3951('0x19'),'selfRolesList'),'fields':_0x32021e}})[a32_0x3951('0x30')](()=>{});}};}};
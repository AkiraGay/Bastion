const a32_0x1f2e=['LIMITS','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','locale','tag','client','PLATINUM','constructor','../../models/Role','resolver','document','selfRolesList','selfRoles\x20--remove\x20ROLE','return\x20/\x22\x20+\x20this\x20+\x20\x22/','get','findByIdAndUpdate','PREMIUM_MEMBERSHIP_REQUIRED','catch','Constants','../../utils/errors','GOLD','errors','PremiumTier','premiumSelfRoles','author','Self\x20Roles','It\x20allows\x20you\x20to\x20set\x20up\x20Self\x20Roles\x20in\x20the\x20server.\x20Self\x20Roles\x20are\x20the\x20roles\x20which\x20server\x20members\x20can\x20assign\x20(and\x20unassign)\x20to\x20themselves.','selfRoles','Command','IRIS','BASTION_ERROR_TYPE','push','guild','selfRolesRemove','../../utils/constants','@bastion/tesseract','countDocuments','default','isPublicBastion','../../utils/omnic','add','ROLE_NOT_FOUND','LIMITED_PREMIUM_MEMBERSHIP','resolveRole','send','roleNotFound','RED','name','info','SELF_ROLES','cache','apply','roles','membershipLimitSelfRoles','COLORS','find','_id','remove','getString','DiscordError','GREEN','fetchPremiumTier','language','join','selfRoles\x20--add\x20ROLE'];(function(_0x19f355,_0x1f2e30){const _0x55963b=function(_0x10d870){while(--_0x10d870){_0x19f355['push'](_0x19f355['shift']());}},_0x266877=function(){const _0x36d6a4={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x591678,_0xd350e1,_0x5e0bfb,_0x56b2da){_0x56b2da=_0x56b2da||{};let _0x2c3fc9=_0xd350e1+'='+_0x5e0bfb,_0x358e8b=0x0;for(let _0x3ed16e=0x0,_0x1a05ce=_0x591678['length'];_0x3ed16e<_0x1a05ce;_0x3ed16e++){const _0x43b8bb=_0x591678[_0x3ed16e];_0x2c3fc9+=';\x20'+_0x43b8bb;const _0x503314=_0x591678[_0x43b8bb];_0x591678['push'](_0x503314),_0x1a05ce=_0x591678['length'],_0x503314!==!![]&&(_0x2c3fc9+='='+_0x503314);}_0x56b2da['cookie']=_0x2c3fc9;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4774eb,_0x37150f){_0x4774eb=_0x4774eb||function(_0x25a314){return _0x25a314;};const _0x3cde11=_0x4774eb(new RegExp('(?:^|;\x20)'+_0x37150f['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x3a1f59=function(_0x5e1ad4,_0x99ddaf){_0x5e1ad4(++_0x99ddaf);};return _0x3a1f59(_0x55963b,_0x1f2e30),_0x3cde11?decodeURIComponent(_0x3cde11[0x1]):undefined;}},_0x11d72b=function(){const _0x43d099=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x43d099['test'](_0x36d6a4['removeCookie']['toString']());};_0x36d6a4['updateCookie']=_0x11d72b;let _0x100014='';const _0x49d2a1=_0x36d6a4['updateCookie']();if(!_0x49d2a1)_0x36d6a4['setCookie'](['*'],'counter',0x1);else _0x49d2a1?_0x100014=_0x36d6a4['getCookie'](null,'counter'):_0x36d6a4['removeCookie']();};_0x266877();}(a32_0x1f2e,0xd1));const a32_0x5596=function(_0x19f355,_0x1f2e30){_0x19f355=_0x19f355-0x0;let _0x55963b=a32_0x1f2e[_0x19f355];return _0x55963b;};const a32_0x5e0bfb=function(){let _0x2a31ef=!![];return function(_0x23c7c6,_0x43a5b9){const _0x4237ef=_0x2a31ef?function(){if(_0x43a5b9){const _0x30e48b=_0x43a5b9[a32_0x5596('0x21')](_0x23c7c6,arguments);return _0x43a5b9=null,_0x30e48b;}}:function(){};return _0x2a31ef=![],_0x4237ef;};}(),a32_0xd350e1=a32_0x5e0bfb(this,function(){const _0x5eb4c6=function(){const _0x35df36=_0x5eb4c6[a32_0x5596('0x35')](a32_0x5596('0x3b'))()[a32_0x5596('0x35')](a32_0x5596('0x30'));return!_0x35df36['test'](a32_0xd350e1);};return _0x5eb4c6();});a32_0xd350e1();'use strict';const tesseract_1=require(a32_0x5596('0x11')),Role_1=require(a32_0x5596('0x36')),constants=require(a32_0x5596('0x10')),errors=require(a32_0x5596('0x1')),omnic=require(a32_0x5596('0x15'));module['exports']=class SelfRoles extends tesseract_1[a32_0x5596('0xa')]{constructor(){super(a32_0x5596('0x9'),{'description':a32_0x5596('0x8'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'array':['add',a32_0x5596('0x27')],'string':[a32_0x5596('0x16'),a32_0x5596('0x27')]},'scope':a32_0x5596('0xe'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':['MANAGE_ROLES'],'userPermissions':['MANAGE_ROLES'],'syntax':[a32_0x5596('0x9'),a32_0x5596('0x2e'),a32_0x5596('0x3a')]}),this['exec']=async(_0x4a1e8f,_0x14311a)=>{if(_0x14311a[a32_0x5596('0x16')]){if(constants[a32_0x5596('0x14')](this[a32_0x5596('0x33')]['user'])){const _0x110216=await Role_1[a32_0x5596('0x13')][a32_0x5596('0x12')]({'guild':_0x4a1e8f[a32_0x5596('0xe')]['id'],'selfAssignable':!![]});if(_0x110216>=constants[a32_0x5596('0x2f')][a32_0x5596('0x1f')]){const _0x59483e=await omnic[a32_0x5596('0x2b')](_0x4a1e8f['guild'])[a32_0x5596('0x3f')](()=>{});if(_0x59483e){if(_0x59483e===omnic[a32_0x5596('0x4')]['GOLD']&&_0x110216>=constants['LIMITS'][a32_0x5596('0x2')][a32_0x5596('0x1f')])throw new errors['DiscordError'](errors[a32_0x5596('0xc')][a32_0x5596('0x18')],this['client'][a32_0x5596('0x31')][a32_0x5596('0x28')](_0x4a1e8f[a32_0x5596('0xe')][a32_0x5596('0x38')][a32_0x5596('0x2c')],'errors','membershipLimitSelfRoles',constants['LIMITS'][a32_0x5596('0x2')][a32_0x5596('0x1f')]));else{if(_0x59483e===omnic['PremiumTier'][a32_0x5596('0x34')]&&_0x110216>=constants[a32_0x5596('0x2f')][a32_0x5596('0x34')][a32_0x5596('0x1f')])throw new errors['DiscordError'](errors[a32_0x5596('0xc')][a32_0x5596('0x18')],this['client']['locale'][a32_0x5596('0x28')](_0x4a1e8f[a32_0x5596('0xe')][a32_0x5596('0x38')][a32_0x5596('0x2c')],a32_0x5596('0x3'),a32_0x5596('0x23'),constants['LIMITS'][a32_0x5596('0x34')][a32_0x5596('0x1f')]));}}else throw new errors['DiscordError'](errors[a32_0x5596('0xc')][a32_0x5596('0x3e')],this[a32_0x5596('0x33')]['locale']['getString'](_0x4a1e8f[a32_0x5596('0xe')][a32_0x5596('0x38')]['language'],a32_0x5596('0x3'),a32_0x5596('0x5'),constants['LIMITS'][a32_0x5596('0x1f')]));}}const _0x3347d9=this['client'][a32_0x5596('0x37')][a32_0x5596('0x19')](_0x4a1e8f['guild'],_0x14311a[a32_0x5596('0x16')]['join']('\x20'));if(!_0x3347d9)throw new errors[(a32_0x5596('0x29'))](errors[a32_0x5596('0xc')][a32_0x5596('0x17')],this[a32_0x5596('0x33')][a32_0x5596('0x31')][a32_0x5596('0x28')](_0x4a1e8f[a32_0x5596('0xe')][a32_0x5596('0x38')][a32_0x5596('0x2c')],'errors',a32_0x5596('0x1b')));await Role_1[a32_0x5596('0x13')][a32_0x5596('0x3d')](_0x3347d9['id'],{'_id':_0x3347d9['id'],'guild':_0x4a1e8f[a32_0x5596('0xe')]['id'],'selfAssignable':!![]},{'upsert':!![]}),await _0x4a1e8f['channel']['send']({'embed':{'color':tesseract_1[a32_0x5596('0x0')][a32_0x5596('0x24')][a32_0x5596('0x2a')],'description':this[a32_0x5596('0x33')]['locale'][a32_0x5596('0x28')](_0x4a1e8f[a32_0x5596('0xe')][a32_0x5596('0x38')][a32_0x5596('0x2c')],a32_0x5596('0x1e'),'selfRolesAdd',_0x4a1e8f[a32_0x5596('0x6')][a32_0x5596('0x32')],_0x3347d9[a32_0x5596('0x1d')]),'footer':{'text':_0x3347d9['id']}}})['catch'](()=>{});}else{if(_0x14311a[a32_0x5596('0x27')]){const _0x4915e8=this[a32_0x5596('0x33')][a32_0x5596('0x37')][a32_0x5596('0x19')](_0x4a1e8f[a32_0x5596('0xe')],_0x14311a[a32_0x5596('0x27')][a32_0x5596('0x2d')]('\x20'));if(!_0x4915e8)throw new errors[(a32_0x5596('0x29'))](errors['BASTION_ERROR_TYPE'][a32_0x5596('0x17')],this[a32_0x5596('0x33')][a32_0x5596('0x31')][a32_0x5596('0x28')](_0x4a1e8f[a32_0x5596('0xe')][a32_0x5596('0x38')][a32_0x5596('0x2c')],'errors',a32_0x5596('0x1b')));await Role_1['default'][a32_0x5596('0x3d')](_0x4915e8['id'],{'$unset':{'selfAssignable':0x1}}),await _0x4a1e8f['channel'][a32_0x5596('0x1a')]({'embed':{'color':tesseract_1[a32_0x5596('0x0')]['COLORS'][a32_0x5596('0x1c')],'description':this[a32_0x5596('0x33')]['locale']['getString'](_0x4a1e8f[a32_0x5596('0xe')][a32_0x5596('0x38')][a32_0x5596('0x2c')],a32_0x5596('0x1e'),a32_0x5596('0xf'),_0x4a1e8f['author'][a32_0x5596('0x32')],_0x4915e8[a32_0x5596('0x1d')]),'footer':{'text':_0x4915e8['id']}}})[a32_0x5596('0x3f')](()=>{});}else{const _0x4ef8f8=await Role_1[a32_0x5596('0x13')][a32_0x5596('0x25')]({'guild':_0x4a1e8f[a32_0x5596('0xe')]['id'],'selfAssignable':!![]});if(!_0x4ef8f8['length'])throw new Error(this[a32_0x5596('0x33')][a32_0x5596('0x31')][a32_0x5596('0x28')](_0x4a1e8f[a32_0x5596('0xe')]['document'][a32_0x5596('0x2c')],a32_0x5596('0x3'),'noSelfRoles'));const _0x39049b=[];for(const _0xb20573 of _0x4ef8f8){!_0x4a1e8f[a32_0x5596('0xe')][a32_0x5596('0x22')][a32_0x5596('0x20')]['has'](_0xb20573['_id'])&&await _0xb20573['remove']()[a32_0x5596('0x3f')](()=>{}),_0x39049b[a32_0x5596('0xd')]({'name':_0x4a1e8f[a32_0x5596('0xe')]['roles'][a32_0x5596('0x20')][a32_0x5596('0x3c')](_0xb20573[a32_0x5596('0x26')])['name']||'-','value':_0xb20573[a32_0x5596('0x26')]});}await _0x4a1e8f['channel'][a32_0x5596('0x1a')]({'embed':{'color':tesseract_1[a32_0x5596('0x0')][a32_0x5596('0x24')][a32_0x5596('0xb')],'title':a32_0x5596('0x7'),'description':this[a32_0x5596('0x33')][a32_0x5596('0x31')][a32_0x5596('0x28')](_0x4a1e8f[a32_0x5596('0xe')][a32_0x5596('0x38')]['language'],a32_0x5596('0x1e'),a32_0x5596('0x39')),'fields':_0x39049b}})[a32_0x5596('0x3f')](()=>{});}}};}};
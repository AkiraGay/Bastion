const a40_0x9384=['clear','RED','locale','find','tag','triggers','channel','TRIGGERS','constructor','Message\x20Response','deleteMany','Reaction\x20Response','exports','getString','info','triggersRemove','reaction','It\x20allows\x20you\x20to\x20add\x20(and\x20remove)\x20Triggers\x20in\x20the\x20server.\x20When\x20a\x20trigger\x20is\x20set,\x20and\x20Bastion\x20sees\x20a\x20message\x20from\x20a\x20human\x20containing\x20the\x20pattern\x20specified\x20in\x20the\x20trigger,\x20it\x27ll\x20respond\x20with\x20either\x20the\x20specified\x20response\x20message\x20or\x20reaction,\x20or\x20both.','```','../../utils/emojis','parseEmoji','membershipLimitTriggers','catch','Trigger','errors','triggersList','return\x20/\x22\x20+\x20this\x20+\x20\x22/','PremiumTier','length','../../utils/embeds','DiscordError','language','BASTION_ERROR_TYPE','map','LIMITED_PREMIUM_MEMBERSHIP','GOLD','IRIS','apply','responseMessage','premiumTriggers','default','PLATINUM','responseReaction','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','exec','@bastion/tesseract','trigger','document','delete','triggers\x20--clear','fetchPremiumTier','pattern','send','push','Constants','guild','isPublicBastion','join','MANAGE_GUILD','triggers\x20--pattern\x20PATTERN\x20--\x20RESPONSE','client','../../utils/constants','author','COLORS','LIMITS'];(function(_0x57ed0e,_0x39bead){const _0x938489=function(_0x3ab40c){while(--_0x3ab40c){_0x57ed0e['push'](_0x57ed0e['shift']());}},_0x2faf4b=function(){const _0x476d9e={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2c02fd,_0x477b05,_0xfe53af,_0x4f46d5){_0x4f46d5=_0x4f46d5||{};let _0x3da8cf=_0x477b05+'='+_0xfe53af,_0x4648f0=0x0;for(let _0x4e4544=0x0,_0x560e11=_0x2c02fd['length'];_0x4e4544<_0x560e11;_0x4e4544++){const _0x4e89fa=_0x2c02fd[_0x4e4544];_0x3da8cf+=';\x20'+_0x4e89fa;const _0x3b7f17=_0x2c02fd[_0x4e89fa];_0x2c02fd['push'](_0x3b7f17),_0x560e11=_0x2c02fd['length'],_0x3b7f17!==!![]&&(_0x3da8cf+='='+_0x3b7f17);}_0x4f46d5['cookie']=_0x3da8cf;},'removeCookie':function(){return'dev';},'getCookie':function(_0x48c8c5,_0x3042b7){_0x48c8c5=_0x48c8c5||function(_0xc492ac){return _0xc492ac;};const _0x58368e=_0x48c8c5(new RegExp('(?:^|;\x20)'+_0x3042b7['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x249269=function(_0x3ffae6,_0x45cf57){_0x3ffae6(++_0x45cf57);};return _0x249269(_0x938489,_0x39bead),_0x58368e?decodeURIComponent(_0x58368e[0x1]):undefined;}},_0x3ee7b6=function(){const _0x11a7bd=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x11a7bd['test'](_0x476d9e['removeCookie']['toString']());};_0x476d9e['updateCookie']=_0x3ee7b6;let _0x39a75b='';const _0x7e8be6=_0x476d9e['updateCookie']();if(!_0x7e8be6)_0x476d9e['setCookie'](['*'],'counter',0x1);else _0x7e8be6?_0x39a75b=_0x476d9e['getCookie'](null,'counter'):_0x476d9e['removeCookie']();};_0x2faf4b();}(a40_0x9384,0x1ee));const a40_0x2faf=function(_0x57ed0e,_0x39bead){_0x57ed0e=_0x57ed0e-0x105;let _0x938489=a40_0x9384[_0x57ed0e];return _0x938489;};const a40_0x59c473=a40_0x2faf,a40_0x3ee7b6=function(){let _0x7e8be6=!![];return function(_0x2c02fd,_0x477b05){const _0xfe53af=_0x7e8be6?function(){const _0x5a4a9e=a40_0x2faf;if(_0x477b05){const _0x4f46d5=_0x477b05[_0x5a4a9e(0x144)](_0x2c02fd,arguments);return _0x477b05=null,_0x4f46d5;}}:function(){};return _0x7e8be6=![],_0xfe53af;};}(),a40_0x476d9e=a40_0x3ee7b6(this,function(){const _0x3da8cf=function(){const _0x31db65=a40_0x2faf,_0x4648f0=_0x3da8cf[_0x31db65(0x127)](_0x31db65(0x139))()['constructor'](_0x31db65(0x109));return!_0x4648f0['test'](a40_0x476d9e);};return _0x3da8cf();});a40_0x476d9e();'use strict';const tesseract_1=require(a40_0x59c473(0x10b)),Trigger_1=require('../../models/Trigger'),constants=require(a40_0x59c473(0x11b)),embeds=require(a40_0x59c473(0x13c)),emojis=require(a40_0x59c473(0x132)),errors=require('../../utils/errors'),omnic=require('../../utils/omnic');module[a40_0x59c473(0x12b)]=class MessageFilterCommand extends tesseract_1['Command']{constructor(){const _0xc4bbab=a40_0x59c473;super(_0xc4bbab(0x124),{'description':_0xc4bbab(0x130),'triggers':[],'arguments':{'alias':{'clear':['c'],'delete':['d'],'pattern':['p'],'reaction':['e']},'boolean':['clear'],'array':[_0xc4bbab(0x10e),_0xc4bbab(0x111)],'string':[_0xc4bbab(0x10e),_0xc4bbab(0x111),_0xc4bbab(0x12f)]},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[_0xc4bbab(0x118)],'syntax':['triggers',_0xc4bbab(0x119),'triggers\x20--pattern\x20PATTERN\x20--reaction\x20EMOJI','triggers\x20--delete\x20PATTERN',_0xc4bbab(0x10f)]}),this[_0xc4bbab(0x10a)]=async(_0x4e4544,_0x560e11)=>{const _0x4ba641=_0xc4bbab;if(_0x560e11[_0x4ba641(0x11f)])return await Trigger_1[_0x4ba641(0x106)][_0x4ba641(0x129)]({'guild':_0x4e4544['guild']['id']}),await _0x4e4544[_0x4ba641(0x125)][_0x4ba641(0x112)]({'embed':{'color':tesseract_1[_0x4ba641(0x114)]['COLORS'][_0x4ba641(0x120)],'description':this[_0x4ba641(0x11a)]['locale']['getString'](_0x4e4544['guild'][_0x4ba641(0x10d)]['language'],_0x4ba641(0x12d),'triggersClear',_0x4e4544[_0x4ba641(0x11c)]['tag'])}})[_0x4ba641(0x135)](()=>{});if(_0x560e11[_0x4ba641(0x10e)]&&_0x560e11[_0x4ba641(0x10e)][_0x4ba641(0x13b)]){const _0x3b7f17=_0x560e11['delete']['join']('\x20');return await Trigger_1[_0x4ba641(0x106)][_0x4ba641(0x129)]({'guild':_0x4e4544[_0x4ba641(0x115)]['id'],'trigger':_0x3b7f17}),await _0x4e4544[_0x4ba641(0x125)][_0x4ba641(0x112)]({'embed':{'color':tesseract_1['Constants'][_0x4ba641(0x11d)][_0x4ba641(0x120)],'description':this[_0x4ba641(0x11a)][_0x4ba641(0x121)][_0x4ba641(0x12c)](_0x4e4544[_0x4ba641(0x115)][_0x4ba641(0x10d)]['language'],'info',_0x4ba641(0x12e),_0x4e4544[_0x4ba641(0x11c)][_0x4ba641(0x123)],_0x3b7f17)}})[_0x4ba641(0x135)](()=>{});}if(_0x560e11['pattern']&&_0x560e11[_0x4ba641(0x111)]['length']&&(_0x560e11['_'][_0x4ba641(0x13b)]||_0x560e11[_0x4ba641(0x12f)])){if(constants[_0x4ba641(0x116)](this[_0x4ba641(0x11a)]['user'])){const _0xc492ac=await Trigger_1['default']['countDocuments']({'guild':_0x4e4544[_0x4ba641(0x115)]['id']});if(_0xc492ac>=constants[_0x4ba641(0x11e)][_0x4ba641(0x126)]){const _0x3ffae6=await omnic[_0x4ba641(0x110)](_0x4e4544[_0x4ba641(0x115)])[_0x4ba641(0x135)](()=>{});if(_0x3ffae6){if(_0x3ffae6===omnic[_0x4ba641(0x13a)][_0x4ba641(0x142)]&&_0xc492ac>=constants[_0x4ba641(0x11e)][_0x4ba641(0x142)][_0x4ba641(0x126)])throw new errors[(_0x4ba641(0x13d))](errors[_0x4ba641(0x13f)][_0x4ba641(0x141)],this['client'][_0x4ba641(0x121)][_0x4ba641(0x12c)](_0x4e4544[_0x4ba641(0x115)][_0x4ba641(0x10d)][_0x4ba641(0x13e)],_0x4ba641(0x137),_0x4ba641(0x134),constants[_0x4ba641(0x11e)][_0x4ba641(0x142)][_0x4ba641(0x126)]));else{if(_0x3ffae6===omnic[_0x4ba641(0x13a)][_0x4ba641(0x107)]&&_0xc492ac>=constants[_0x4ba641(0x11e)][_0x4ba641(0x107)][_0x4ba641(0x126)])throw new errors[(_0x4ba641(0x13d))](errors[_0x4ba641(0x13f)]['LIMITED_PREMIUM_MEMBERSHIP'],this[_0x4ba641(0x11a)][_0x4ba641(0x121)][_0x4ba641(0x12c)](_0x4e4544['guild']['document'][_0x4ba641(0x13e)],'errors','membershipLimitTriggers',constants[_0x4ba641(0x11e)][_0x4ba641(0x107)][_0x4ba641(0x126)]));}}else throw new errors[(_0x4ba641(0x13d))](errors[_0x4ba641(0x13f)]['PREMIUM_MEMBERSHIP_REQUIRED'],this[_0x4ba641(0x11a)]['locale']['getString'](_0x4e4544[_0x4ba641(0x115)][_0x4ba641(0x10d)]['language'],_0x4ba641(0x137),_0x4ba641(0x105),constants[_0x4ba641(0x11e)][_0x4ba641(0x126)]));}}const _0x48c8c5=_0x560e11[_0x4ba641(0x111)][_0x4ba641(0x117)]('\x20'),_0x3042b7=[{'name':_0x4ba641(0x136),'value':_0x48c8c5,'inline':!![]}];let _0x58368e;_0x560e11['_']['length']&&(_0x58368e=embeds['generateBastionEmbed'](_0x560e11['_'][_0x4ba641(0x117)]('\x20')),_0x3042b7[_0x4ba641(0x113)]({'name':'Response\x20Message','value':'```json\x0a'+JSON['stringify'](_0x58368e)+_0x4ba641(0x131)}));let _0x249269;if(_0x560e11[_0x4ba641(0x12f)]){const _0x45cf57=emojis[_0x4ba641(0x133)](_0x560e11['reaction']);_0x45cf57&&(_0x249269=_0x45cf57['value'],_0x3042b7[_0x4ba641(0x113)]({'name':'Response\x20Reaction','value':_0x560e11[_0x4ba641(0x12f)]}));}return await Trigger_1[_0x4ba641(0x106)]['create']({'guild':_0x4e4544['guild']['id'],'trigger':_0x48c8c5,'responseMessage':_0x58368e,'responseReaction':_0x249269}),await _0x4e4544[_0x4ba641(0x125)][_0x4ba641(0x112)]({'embed':{'color':tesseract_1['Constants'][_0x4ba641(0x11d)]['GREEN'],'description':this[_0x4ba641(0x11a)][_0x4ba641(0x121)][_0x4ba641(0x12c)](_0x4e4544[_0x4ba641(0x115)][_0x4ba641(0x10d)]['language'],_0x4ba641(0x12d),'triggersAdd',_0x4e4544[_0x4ba641(0x11c)]['tag']),'fields':_0x3042b7}})['catch'](()=>{});}const _0x4e89fa=await Trigger_1['default'][_0x4ba641(0x122)]({'guild':_0x4e4544[_0x4ba641(0x115)]['id']});return await _0x4e4544[_0x4ba641(0x125)]['send']({'embed':{'color':tesseract_1[_0x4ba641(0x114)][_0x4ba641(0x11d)][_0x4ba641(0x143)],'description':this[_0x4ba641(0x11a)][_0x4ba641(0x121)][_0x4ba641(0x12c)](_0x4e4544[_0x4ba641(0x115)]['document'][_0x4ba641(0x13e)],'info',_0x4ba641(0x138)),'fields':_0x4e89fa[_0x4ba641(0x140)](_0x11a7bd=>({'name':_0x11a7bd[_0x4ba641(0x10c)],'value':(_0x11a7bd[_0x4ba641(0x145)]?_0x4ba641(0x128):'')+'\x0a'+(_0x11a7bd[_0x4ba641(0x108)]?_0x4ba641(0x12a):'')}))}})['catch'](()=>{});};}};
const a38_0x506c=['document','deleteMany','exports','pattern','send','find','join','DiscordError','It\x20allows\x20you\x20to\x20add\x20(and\x20remove)\x20Triggers\x20in\x20the\x20server.\x20When\x20a\x20trigger\x20is\x20set,\x20and\x20Bastion\x20sees\x20a\x20message\x20from\x20a\x20human\x20containing\x20the\x20pattern\x20specified\x20in\x20the\x20trigger,\x20it\x27ll\x20respond\x20with\x20either\x20the\x20specified\x20response\x20message\x20or\x20reaction,\x20or\x20both.','```json\x0a','IRIS','PREMIUM_MEMBERSHIP_REQUIRED','../../utils/constants','isPublicBastion','generateBastionEmbed','compile','clear','PremiumTier','stringify','default','parseEmoji','triggers','triggersClear','create','GREEN','trigger','triggers\x20--pattern\x20PATTERN\x20--\x20RESPONSE','locale','constructor','Reaction\x20Response','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','BASTION_ERROR_TYPE','fetchPremiumTier','Constants','channel','getString','catch','COLORS','exec','errors','client','Response\x20Reaction','LIMITS','responseReaction','Trigger','../../utils/errors','language','TRIGGERS','LIMITED_PREMIUM_MEMBERSHIP','responseMessage','test','PLATINUM','triggersList','info','triggers\x20--clear','guild','Command','length','RED','membershipLimitTriggers','author','```','../../utils/emojis','apply','delete','push','tag','../../utils/omnic','reaction','GOLD'];(function(_0x1190bd,_0x506cd2){const _0x9bbeb9=function(_0x10d7dd){while(--_0x10d7dd){_0x1190bd['push'](_0x1190bd['shift']());}};const _0x6322eb=function(){const _0x298998={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x5f184e,_0x45cc95,_0x1b72b0,_0x2033a6){_0x2033a6=_0x2033a6||{};let _0x5b4e48=_0x45cc95+'='+_0x1b72b0;let _0x4830fc=0x0;for(let _0x3890bc=0x0,_0x4c2a3f=_0x5f184e['length'];_0x3890bc<_0x4c2a3f;_0x3890bc++){const _0x10ccdd=_0x5f184e[_0x3890bc];_0x5b4e48+=';\x20'+_0x10ccdd;const _0x31c396=_0x5f184e[_0x10ccdd];_0x5f184e['push'](_0x31c396);_0x4c2a3f=_0x5f184e['length'];if(_0x31c396!==!![]){_0x5b4e48+='='+_0x31c396;}}_0x2033a6['cookie']=_0x5b4e48;},'removeCookie':function(){return'dev';},'getCookie':function(_0xc98ee0,_0x4242a9){_0xc98ee0=_0xc98ee0||function(_0x472e9e){return _0x472e9e;};const _0x390e3b=_0xc98ee0(new RegExp('(?:^|;\x20)'+_0x4242a9['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x41186f=function(_0x38d7d1,_0x59bd0f){_0x38d7d1(++_0x59bd0f);};_0x41186f(_0x9bbeb9,_0x506cd2);return _0x390e3b?decodeURIComponent(_0x390e3b[0x1]):undefined;}};const _0x45778d=function(){const _0x22aaa1=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x22aaa1['test'](_0x298998['removeCookie']['toString']());};_0x298998['updateCookie']=_0x45778d;let _0x146291='';const _0x32b318=_0x298998['updateCookie']();if(!_0x32b318){_0x298998['setCookie'](['*'],'counter',0x1);}else if(_0x32b318){_0x146291=_0x298998['getCookie'](null,'counter');}else{_0x298998['removeCookie']();}};_0x6322eb();}(a38_0x506c,0xad));const a38_0x9bbe=function(_0x1190bd,_0x506cd2){_0x1190bd=_0x1190bd-0x0;let _0x9bbeb9=a38_0x506c[_0x1190bd];return _0x9bbeb9;};const a38_0x298998=function(){let _0x1ff85a=!![];return function(_0x53d2b1,_0x547c4f){const _0x332d07=_0x1ff85a?function(){if(_0x547c4f){const _0x5f163a=_0x547c4f[a38_0x9bbe('0x1e')](_0x53d2b1,arguments);_0x547c4f=null;return _0x5f163a;}}:function(){};_0x1ff85a=![];return _0x332d07;};}();const a38_0x10d7dd=a38_0x298998(this,function(){const _0xa8242c=function(){const _0x56d749=_0xa8242c[a38_0x9bbe('0x41')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a38_0x9bbe('0x34')](a38_0x9bbe('0x43'));return!_0x56d749[a38_0x9bbe('0x11')](a38_0x10d7dd);};return _0xa8242c();});a38_0x10d7dd();'use strict';const tesseract_1=require('@bastion/tesseract');const Trigger_1=require('../../models/Trigger');const constants=require(a38_0x9bbe('0x31'));const embeds=require('../../utils/embeds');const emojis=require(a38_0x9bbe('0x1d'));const errors=require(a38_0x9bbe('0xc'));const omnic=require(a38_0x9bbe('0x22'));module[a38_0x9bbe('0x27')]=class MessageFilterCommand extends tesseract_1[a38_0x9bbe('0x17')]{constructor(){super(a38_0x9bbe('0x3a'),{'description':a38_0x9bbe('0x2d'),'triggers':[],'arguments':{'alias':{'clear':['c'],'delete':['d'],'pattern':['p'],'reaction':['e']},'boolean':[a38_0x9bbe('0x35')],'array':['delete',a38_0x9bbe('0x28')],'string':[a38_0x9bbe('0x1f'),'pattern',a38_0x9bbe('0x23')]},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':['MANAGE_GUILD'],'syntax':[a38_0x9bbe('0x3a'),a38_0x9bbe('0x3f'),'triggers\x20--pattern\x20PATTERN\x20--reaction\x20EMOJI','triggers\x20--delete\x20PATTERN',a38_0x9bbe('0x15')]});this[a38_0x9bbe('0x5')]=async(_0x40d77f,_0x6c2855)=>{if(_0x6c2855['clear']){await Trigger_1[a38_0x9bbe('0x38')][a38_0x9bbe('0x26')]({'guild':_0x40d77f[a38_0x9bbe('0x16')]['id']});return await _0x40d77f['channel'][a38_0x9bbe('0x29')]({'embed':{'color':tesseract_1[a38_0x9bbe('0x0')][a38_0x9bbe('0x4')][a38_0x9bbe('0x19')],'description':this[a38_0x9bbe('0x7')][a38_0x9bbe('0x40')][a38_0x9bbe('0x2')](_0x40d77f[a38_0x9bbe('0x16')][a38_0x9bbe('0x25')][a38_0x9bbe('0xd')],a38_0x9bbe('0x14'),a38_0x9bbe('0x3b'),_0x40d77f[a38_0x9bbe('0x1b')][a38_0x9bbe('0x21')])}})['catch'](()=>{});}if(_0x6c2855[a38_0x9bbe('0x1f')]&&_0x6c2855[a38_0x9bbe('0x1f')][a38_0x9bbe('0x18')]){const _0x42cba5=_0x6c2855['delete'][a38_0x9bbe('0x2b')]('\x20');await Trigger_1[a38_0x9bbe('0x38')][a38_0x9bbe('0x26')]({'guild':_0x40d77f[a38_0x9bbe('0x16')]['id'],'trigger':_0x42cba5});return await _0x40d77f[a38_0x9bbe('0x1')][a38_0x9bbe('0x29')]({'embed':{'color':tesseract_1[a38_0x9bbe('0x0')][a38_0x9bbe('0x4')][a38_0x9bbe('0x19')],'description':this['client'][a38_0x9bbe('0x40')]['getString'](_0x40d77f[a38_0x9bbe('0x16')][a38_0x9bbe('0x25')][a38_0x9bbe('0xd')],'info','triggersRemove',_0x40d77f[a38_0x9bbe('0x1b')][a38_0x9bbe('0x21')],_0x42cba5)}})[a38_0x9bbe('0x3')](()=>{});}if(_0x6c2855['pattern']&&_0x6c2855[a38_0x9bbe('0x28')][a38_0x9bbe('0x18')]&&(_0x6c2855['_'][a38_0x9bbe('0x18')]||_0x6c2855['reaction'])){if(constants[a38_0x9bbe('0x32')](this[a38_0x9bbe('0x7')]['user'])){const _0x1b271d=await Trigger_1[a38_0x9bbe('0x38')]['countDocuments']({'guild':_0x40d77f[a38_0x9bbe('0x16')]['id']});if(_0x1b271d>=constants['LIMITS']['TRIGGERS']){const _0x4fb7b5=await omnic[a38_0x9bbe('0x45')](_0x40d77f[a38_0x9bbe('0x16')])[a38_0x9bbe('0x3')](()=>{});if(_0x4fb7b5){if(_0x4fb7b5===omnic['PremiumTier']['GOLD']&&_0x1b271d>=constants[a38_0x9bbe('0x9')][a38_0x9bbe('0x24')][a38_0x9bbe('0xe')]){throw new errors[(a38_0x9bbe('0x2c'))](errors[a38_0x9bbe('0x44')][a38_0x9bbe('0xf')],this['client'][a38_0x9bbe('0x40')][a38_0x9bbe('0x2')](_0x40d77f[a38_0x9bbe('0x16')]['document'][a38_0x9bbe('0xd')],a38_0x9bbe('0x6'),a38_0x9bbe('0x1a'),constants[a38_0x9bbe('0x9')][a38_0x9bbe('0x24')]['TRIGGERS']));}else if(_0x4fb7b5===omnic[a38_0x9bbe('0x36')]['PLATINUM']&&_0x1b271d>=constants[a38_0x9bbe('0x9')]['PLATINUM'][a38_0x9bbe('0xe')]){throw new errors[(a38_0x9bbe('0x2c'))](errors[a38_0x9bbe('0x44')]['LIMITED_PREMIUM_MEMBERSHIP'],this[a38_0x9bbe('0x7')][a38_0x9bbe('0x40')][a38_0x9bbe('0x2')](_0x40d77f[a38_0x9bbe('0x16')][a38_0x9bbe('0x25')][a38_0x9bbe('0xd')],'errors',a38_0x9bbe('0x1a'),constants[a38_0x9bbe('0x9')][a38_0x9bbe('0x12')][a38_0x9bbe('0xe')]));}}else{throw new errors[(a38_0x9bbe('0x2c'))](errors[a38_0x9bbe('0x44')][a38_0x9bbe('0x30')],this['client'][a38_0x9bbe('0x40')]['getString'](_0x40d77f[a38_0x9bbe('0x16')][a38_0x9bbe('0x25')][a38_0x9bbe('0xd')],'errors','premiumTriggers',constants['LIMITS'][a38_0x9bbe('0xe')]));}}}const _0xe25ee6=_0x6c2855[a38_0x9bbe('0x28')][a38_0x9bbe('0x2b')]('\x20');const _0xbcaa2=[{'name':a38_0x9bbe('0xb'),'value':_0xe25ee6,'inline':!![]}];let _0x4f6de5;if(_0x6c2855['_'][a38_0x9bbe('0x18')]){_0x4f6de5=embeds[a38_0x9bbe('0x33')](_0x6c2855['_'][a38_0x9bbe('0x2b')]('\x20'));_0xbcaa2[a38_0x9bbe('0x20')]({'name':'Response\x20Message','value':a38_0x9bbe('0x2e')+JSON[a38_0x9bbe('0x37')](_0x4f6de5)+a38_0x9bbe('0x1c')});}let _0x3a6000;if(_0x6c2855[a38_0x9bbe('0x23')]){const _0x48bc7a=emojis[a38_0x9bbe('0x39')](_0x6c2855['reaction']);if(_0x48bc7a){_0x3a6000=_0x48bc7a['value'];_0xbcaa2[a38_0x9bbe('0x20')]({'name':a38_0x9bbe('0x8'),'value':_0x6c2855[a38_0x9bbe('0x23')]});}}await Trigger_1[a38_0x9bbe('0x38')][a38_0x9bbe('0x3c')]({'guild':_0x40d77f[a38_0x9bbe('0x16')]['id'],'trigger':_0xe25ee6,'responseMessage':_0x4f6de5,'responseReaction':_0x3a6000});return await _0x40d77f[a38_0x9bbe('0x1')]['send']({'embed':{'color':tesseract_1['Constants'][a38_0x9bbe('0x4')][a38_0x9bbe('0x3d')],'description':this[a38_0x9bbe('0x7')][a38_0x9bbe('0x40')][a38_0x9bbe('0x2')](_0x40d77f[a38_0x9bbe('0x16')][a38_0x9bbe('0x25')]['language'],'info','triggersAdd',_0x40d77f[a38_0x9bbe('0x1b')][a38_0x9bbe('0x21')]),'fields':_0xbcaa2}})[a38_0x9bbe('0x3')](()=>{});}const _0x4c53d9=await Trigger_1[a38_0x9bbe('0x38')][a38_0x9bbe('0x2a')]({'guild':_0x40d77f[a38_0x9bbe('0x16')]['id']});return await _0x40d77f[a38_0x9bbe('0x1')][a38_0x9bbe('0x29')]({'embed':{'color':tesseract_1['Constants']['COLORS'][a38_0x9bbe('0x2f')],'description':this['client']['locale'][a38_0x9bbe('0x2')](_0x40d77f['guild'][a38_0x9bbe('0x25')][a38_0x9bbe('0xd')],'info',a38_0x9bbe('0x13')),'fields':_0x4c53d9['map'](_0x23f7c5=>({'name':_0x23f7c5[a38_0x9bbe('0x3e')],'value':(_0x23f7c5[a38_0x9bbe('0x10')]?'Message\x20Response':'')+'\x0a'+(_0x23f7c5[a38_0x9bbe('0xa')]?a38_0x9bbe('0x42'):'')}))}})[a38_0x9bbe('0x3')](()=>{});};}};
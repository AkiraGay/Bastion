const a38_0x5550=['map','delete','getString','value','Reaction\x20Response','tag','BASTION_ERROR_TYPE','LIMITS','triggers','../../utils/omnic','reaction','clear','pattern','responseMessage','find','trigger','GREEN','../../utils/embeds','send','TRIGGERS','errors','language','triggers\x20--clear','test','parseEmoji','premiumTriggers','MANAGE_GUILD','channel','join','stringify','RED','return\x20/\x22\x20+\x20this\x20+\x20\x22/','../../utils/constants','LIMITED_PREMIUM_MEMBERSHIP','push','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','locale','../../utils/errors','Trigger','responseReaction','client','countDocuments','default','COLORS','info','exec','../../utils/emojis','constructor','guild','triggers\x20--delete\x20PATTERN','GOLD','DiscordError','catch','triggers\x20--pattern\x20PATTERN\x20--reaction\x20EMOJI','```','Command','Constants','document','length','triggersAdd','deleteMany','user','create','PLATINUM','Response\x20Message','generateBastionEmbed','author','membershipLimitTriggers','It\x20allows\x20you\x20to\x20add\x20(and\x20remove)\x20Triggers\x20in\x20the\x20server.\x20When\x20a\x20trigger\x20is\x20set,\x20and\x20Bastion\x20sees\x20a\x20message\x20from\x20a\x20human\x20containing\x20the\x20pattern\x20specified\x20in\x20the\x20trigger,\x20it\x27ll\x20respond\x20with\x20either\x20the\x20specified\x20response\x20message\x20or\x20reaction,\x20or\x20both.','apply'];(function(_0x28a220,_0x555044){const _0x49d4b1=function(_0x5413b5){while(--_0x5413b5){_0x28a220['push'](_0x28a220['shift']());}},_0x23bea8=function(){const _0x34cd53={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x18fb0f,_0xde4048,_0x279abb,_0x18a952){_0x18a952=_0x18a952||{};let _0x5d11e8=_0xde4048+'='+_0x279abb,_0x53bccf=0x0;for(let _0x429722=0x0,_0x57e5f7=_0x18fb0f['length'];_0x429722<_0x57e5f7;_0x429722++){const _0x1a6d46=_0x18fb0f[_0x429722];_0x5d11e8+=';\x20'+_0x1a6d46;const _0x3df963=_0x18fb0f[_0x1a6d46];_0x18fb0f['push'](_0x3df963),_0x57e5f7=_0x18fb0f['length'],_0x3df963!==!![]&&(_0x5d11e8+='='+_0x3df963);}_0x18a952['cookie']=_0x5d11e8;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5cf3eb,_0x2e9ab1){_0x5cf3eb=_0x5cf3eb||function(_0x4752c3){return _0x4752c3;};const _0x14e50c=_0x5cf3eb(new RegExp('(?:^|;\x20)'+_0x2e9ab1['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x20f041=function(_0x49068f,_0x38835b){_0x49068f(++_0x38835b);};return _0x20f041(_0x49d4b1,_0x555044),_0x14e50c?decodeURIComponent(_0x14e50c[0x1]):undefined;}},_0x5a58b2=function(){const _0x4233de=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4233de['test'](_0x34cd53['removeCookie']['toString']());};_0x34cd53['updateCookie']=_0x5a58b2;let _0x54e582='';const _0x4324f6=_0x34cd53['updateCookie']();if(!_0x4324f6)_0x34cd53['setCookie'](['*'],'counter',0x1);else _0x4324f6?_0x54e582=_0x34cd53['getCookie'](null,'counter'):_0x34cd53['removeCookie']();};_0x23bea8();}(a38_0x5550,0x10e));const a38_0x49d4=function(_0x28a220,_0x555044){_0x28a220=_0x28a220-0x0;let _0x49d4b1=a38_0x5550[_0x28a220];return _0x49d4b1;};const a38_0x34cd53=function(){let _0x54e582=!![];return function(_0x4324f6,_0x18fb0f){const _0xde4048=_0x54e582?function(){if(_0x18fb0f){const _0x279abb=_0x18fb0f[a38_0x49d4('0x9')](_0x4324f6,arguments);return _0x18fb0f=null,_0x279abb;}}:function(){};return _0x54e582=![],_0xde4048;};}(),a38_0x5413b5=a38_0x34cd53(this,function(){const _0x18a952=function(){const _0x5d11e8=_0x18a952[a38_0x49d4('0x39')](a38_0x49d4('0x29'))()[a38_0x49d4('0x39')](a38_0x49d4('0x2d'));return!_0x5d11e8[a38_0x49d4('0x21')](a38_0x5413b5);};return _0x18a952();});a38_0x5413b5();'use strict';const tesseract_1=require('@bastion/tesseract'),Trigger_1=require('../../models/Trigger'),constants=require(a38_0x49d4('0x2a')),embeds=require(a38_0x49d4('0x1b')),emojis=require(a38_0x49d4('0x38')),errors=require(a38_0x49d4('0x2f')),omnic=require(a38_0x49d4('0x13'));module['exports']=class MessageFilterCommand extends tesseract_1[a38_0x49d4('0x41')]{constructor(){super(a38_0x49d4('0x12'),{'description':a38_0x49d4('0x8'),'triggers':[],'arguments':{'alias':{'clear':['c'],'delete':['d'],'pattern':['p'],'reaction':['e']},'boolean':['clear'],'array':['delete',a38_0x49d4('0x16')],'string':['delete',a38_0x49d4('0x16'),'reaction']},'scope':a38_0x49d4('0x3a'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[a38_0x49d4('0x24')],'syntax':[a38_0x49d4('0x12'),'triggers\x20--pattern\x20PATTERN\x20--\x20RESPONSE',a38_0x49d4('0x3f'),a38_0x49d4('0x3b'),a38_0x49d4('0x20')]}),this[a38_0x49d4('0x37')]=async(_0x53bccf,_0x429722)=>{if(_0x429722[a38_0x49d4('0x15')])return await Trigger_1['default']['deleteMany']({'guild':_0x53bccf['guild']['id']}),await _0x53bccf['channel']['send']({'embed':{'color':tesseract_1['Constants'][a38_0x49d4('0x35')]['RED'],'description':this['client'][a38_0x49d4('0x2e')]['getString'](_0x53bccf[a38_0x49d4('0x3a')][a38_0x49d4('0x43')]['language'],a38_0x49d4('0x36'),'triggersClear',_0x53bccf[a38_0x49d4('0x6')]['tag'])}})[a38_0x49d4('0x3e')](()=>{});if(_0x429722['delete']&&_0x429722[a38_0x49d4('0xb')]['length']){const _0x1a6d46=_0x429722[a38_0x49d4('0xb')]['join']('\x20');return await Trigger_1['default'][a38_0x49d4('0x0')]({'guild':_0x53bccf[a38_0x49d4('0x3a')]['id'],'trigger':_0x1a6d46}),await _0x53bccf['channel']['send']({'embed':{'color':tesseract_1[a38_0x49d4('0x42')][a38_0x49d4('0x35')][a38_0x49d4('0x28')],'description':this[a38_0x49d4('0x32')][a38_0x49d4('0x2e')]['getString'](_0x53bccf['guild']['document'][a38_0x49d4('0x1f')],a38_0x49d4('0x36'),'triggersRemove',_0x53bccf[a38_0x49d4('0x6')]['tag'],_0x1a6d46)}})[a38_0x49d4('0x3e')](()=>{});}if(_0x429722[a38_0x49d4('0x16')]&&_0x429722['pattern']['length']&&(_0x429722['_'][a38_0x49d4('0x44')]||_0x429722[a38_0x49d4('0x14')])){if(constants['isPublicBastion'](this[a38_0x49d4('0x32')][a38_0x49d4('0x1')])){const _0x20f041=await Trigger_1[a38_0x49d4('0x34')][a38_0x49d4('0x33')]({'guild':_0x53bccf[a38_0x49d4('0x3a')]['id']});if(_0x20f041>=constants[a38_0x49d4('0x11')]['TRIGGERS']){const _0x4752c3=await omnic['fetchPremiumTier'](_0x53bccf['guild'])['catch'](()=>{});if(_0x4752c3){if(_0x4752c3===omnic['PremiumTier'][a38_0x49d4('0x3c')]&&_0x20f041>=constants[a38_0x49d4('0x11')][a38_0x49d4('0x3c')]['TRIGGERS'])throw new errors[(a38_0x49d4('0x3d'))](errors[a38_0x49d4('0x10')]['LIMITED_PREMIUM_MEMBERSHIP'],this[a38_0x49d4('0x32')][a38_0x49d4('0x2e')][a38_0x49d4('0xc')](_0x53bccf[a38_0x49d4('0x3a')][a38_0x49d4('0x43')]['language'],a38_0x49d4('0x1e'),a38_0x49d4('0x7'),constants[a38_0x49d4('0x11')][a38_0x49d4('0x3c')][a38_0x49d4('0x1d')]));else{if(_0x4752c3===omnic['PremiumTier'][a38_0x49d4('0x3')]&&_0x20f041>=constants[a38_0x49d4('0x11')][a38_0x49d4('0x3')]['TRIGGERS'])throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][a38_0x49d4('0x2b')],this[a38_0x49d4('0x32')][a38_0x49d4('0x2e')][a38_0x49d4('0xc')](_0x53bccf['guild'][a38_0x49d4('0x43')][a38_0x49d4('0x1f')],a38_0x49d4('0x1e'),a38_0x49d4('0x7'),constants[a38_0x49d4('0x11')][a38_0x49d4('0x3')][a38_0x49d4('0x1d')]));}}else throw new errors[(a38_0x49d4('0x3d'))](errors[a38_0x49d4('0x10')]['PREMIUM_MEMBERSHIP_REQUIRED'],this[a38_0x49d4('0x32')]['locale'][a38_0x49d4('0xc')](_0x53bccf[a38_0x49d4('0x3a')]['document'][a38_0x49d4('0x1f')],a38_0x49d4('0x1e'),a38_0x49d4('0x23'),constants[a38_0x49d4('0x11')]['TRIGGERS']));}}const _0x3df963=_0x429722[a38_0x49d4('0x16')][a38_0x49d4('0x26')]('\x20'),_0x5cf3eb=[{'name':a38_0x49d4('0x30'),'value':_0x3df963,'inline':!![]}];let _0x2e9ab1;_0x429722['_'][a38_0x49d4('0x44')]&&(_0x2e9ab1=embeds[a38_0x49d4('0x5')](_0x429722['_'][a38_0x49d4('0x26')]('\x20')),_0x5cf3eb[a38_0x49d4('0x2c')]({'name':a38_0x49d4('0x4'),'value':'```json\x0a'+JSON[a38_0x49d4('0x27')](_0x2e9ab1)+a38_0x49d4('0x40')}));let _0x14e50c;if(_0x429722[a38_0x49d4('0x14')]){const _0x49068f=emojis[a38_0x49d4('0x22')](_0x429722[a38_0x49d4('0x14')]);_0x49068f&&(_0x14e50c=_0x49068f[a38_0x49d4('0xd')],_0x5cf3eb[a38_0x49d4('0x2c')]({'name':'Response\x20Reaction','value':_0x429722[a38_0x49d4('0x14')]}));}return await Trigger_1[a38_0x49d4('0x34')][a38_0x49d4('0x2')]({'guild':_0x53bccf[a38_0x49d4('0x3a')]['id'],'trigger':_0x3df963,'responseMessage':_0x2e9ab1,'responseReaction':_0x14e50c}),await _0x53bccf[a38_0x49d4('0x25')][a38_0x49d4('0x1c')]({'embed':{'color':tesseract_1['Constants'][a38_0x49d4('0x35')][a38_0x49d4('0x1a')],'description':this[a38_0x49d4('0x32')][a38_0x49d4('0x2e')][a38_0x49d4('0xc')](_0x53bccf[a38_0x49d4('0x3a')]['document'][a38_0x49d4('0x1f')],a38_0x49d4('0x36'),a38_0x49d4('0x45'),_0x53bccf[a38_0x49d4('0x6')][a38_0x49d4('0xf')]),'fields':_0x5cf3eb}})[a38_0x49d4('0x3e')](()=>{});}const _0x57e5f7=await Trigger_1['default'][a38_0x49d4('0x18')]({'guild':_0x53bccf[a38_0x49d4('0x3a')]['id']});return await _0x53bccf[a38_0x49d4('0x25')][a38_0x49d4('0x1c')]({'embed':{'color':tesseract_1[a38_0x49d4('0x42')][a38_0x49d4('0x35')]['IRIS'],'description':this[a38_0x49d4('0x32')][a38_0x49d4('0x2e')][a38_0x49d4('0xc')](_0x53bccf[a38_0x49d4('0x3a')]['document'][a38_0x49d4('0x1f')],'info','triggersList'),'fields':_0x57e5f7[a38_0x49d4('0xa')](_0x38835b=>({'name':_0x38835b[a38_0x49d4('0x19')],'value':(_0x38835b[a38_0x49d4('0x17')]?'Message\x20Response':'')+'\x0a'+(_0x38835b[a38_0x49d4('0x31')]?a38_0x49d4('0xe'):'')}))}})['catch'](()=>{});};}};
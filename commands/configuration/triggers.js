const a38_0x5e94=['pattern','user','value','document','generateBastionEmbed','GREEN','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','```','clear','create','language','errors','Response\x20Message','exec','Trigger','../../utils/embeds','DiscordError','Response\x20Reaction','triggers\x20--delete\x20PATTERN','find','delete','author','GOLD','responseReaction','../../utils/constants','return\x20/\x22\x20+\x20this\x20+\x20\x22/','stringify','guild','client','triggersRemove','length','Message\x20Response','triggers','reaction','deleteMany','IRIS','COLORS','countDocuments','trigger','Command','isPublicBastion','triggersAdd','tag','PLATINUM','info','LIMITED_PREMIUM_MEMBERSHIP','TRIGGERS','constructor','../../models/Trigger','Constants','LIMITS','map','join','MANAGE_GUILD','premiumTriggers','default','exports','send','triggers\x20--pattern\x20PATTERN\x20--reaction\x20EMOJI','getString','../../utils/omnic','push','triggers\x20--clear','test','channel','locale','BASTION_ERROR_TYPE','catch','@bastion/tesseract','membershipLimitTriggers','fetchPremiumTier','It\x20allows\x20you\x20to\x20add\x20(and\x20remove)\x20Triggers\x20in\x20the\x20server.\x20When\x20a\x20trigger\x20is\x20set,\x20and\x20Bastion\x20sees\x20a\x20message\x20from\x20a\x20human\x20containing\x20the\x20pattern\x20specified\x20in\x20the\x20trigger,\x20it\x27ll\x20respond\x20with\x20either\x20the\x20specified\x20response\x20message\x20or\x20reaction,\x20or\x20both.'];(function(_0x359b14,_0x5e9452){const _0x94b42=function(_0x246894){while(--_0x246894){_0x359b14['push'](_0x359b14['shift']());}};const _0x4f0ada=function(){const _0x43ea75={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3c7ed0,_0x5335b6,_0x2d0471,_0x1288ef){_0x1288ef=_0x1288ef||{};let _0x27bf37=_0x5335b6+'='+_0x2d0471;let _0x3f9267=0x0;for(let _0x408484=0x0,_0xd4196c=_0x3c7ed0['length'];_0x408484<_0xd4196c;_0x408484++){const _0x52d8fc=_0x3c7ed0[_0x408484];_0x27bf37+=';\x20'+_0x52d8fc;const _0x5e3db2=_0x3c7ed0[_0x52d8fc];_0x3c7ed0['push'](_0x5e3db2);_0xd4196c=_0x3c7ed0['length'];if(_0x5e3db2!==!![]){_0x27bf37+='='+_0x5e3db2;}}_0x1288ef['cookie']=_0x27bf37;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3d01a7,_0x2fa9cf){_0x3d01a7=_0x3d01a7||function(_0x45769a){return _0x45769a;};const _0xd324df=_0x3d01a7(new RegExp('(?:^|;\x20)'+_0x2fa9cf['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x290aaf=function(_0x258749,_0x10c8f4){_0x258749(++_0x10c8f4);};_0x290aaf(_0x94b42,_0x5e9452);return _0xd324df?decodeURIComponent(_0xd324df[0x1]):undefined;}};const _0x5dd94b=function(){const _0x4b711e=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4b711e['test'](_0x43ea75['removeCookie']['toString']());};_0x43ea75['updateCookie']=_0x5dd94b;let _0x4d616c='';const _0x4306b8=_0x43ea75['updateCookie']();if(!_0x4306b8){_0x43ea75['setCookie'](['*'],'counter',0x1);}else if(_0x4306b8){_0x4d616c=_0x43ea75['getCookie'](null,'counter');}else{_0x43ea75['removeCookie']();}};_0x4f0ada();}(a38_0x5e94,0x145));const a38_0x94b4=function(_0x359b14,_0x5e9452){_0x359b14=_0x359b14-0x0;let _0x94b42=a38_0x5e94[_0x359b14];return _0x94b42;};const a38_0x43ea75=function(){let _0x433757=!![];return function(_0x5f0ba2,_0x5e285e){const _0xd9c3ac=_0x433757?function(){if(_0x5e285e){const _0x951566=_0x5e285e['apply'](_0x5f0ba2,arguments);_0x5e285e=null;return _0x951566;}}:function(){};_0x433757=![];return _0xd9c3ac;};}();const a38_0x246894=a38_0x43ea75(this,function(){const _0x37f158=function(){const _0x39b7be=_0x37f158[a38_0x94b4('0xa')](a38_0x94b4('0x3c'))()['compile'](a38_0x94b4('0x29'));return!_0x39b7be[a38_0x94b4('0x1a')](a38_0x246894);};return _0x37f158();});a38_0x246894();'use strict';const tesseract_1=require(a38_0x94b4('0x1f'));const Trigger_1=require(a38_0x94b4('0xb'));const constants=require(a38_0x94b4('0x3b'));const embeds=require(a38_0x94b4('0x32'));const emojis=require('../../utils/emojis');const errors=require('../../utils/errors');const omnic=require(a38_0x94b4('0x17'));module[a38_0x94b4('0x13')]=class MessageFilterCommand extends tesseract_1[a38_0x94b4('0x2')]{constructor(){super(a38_0x94b4('0x43'),{'description':a38_0x94b4('0x22'),'triggers':[],'arguments':{'alias':{'clear':['c'],'delete':['d'],'pattern':['p'],'reaction':['e']},'boolean':[a38_0x94b4('0x2b')],'array':[a38_0x94b4('0x37'),'pattern'],'string':[a38_0x94b4('0x37'),a38_0x94b4('0x23'),a38_0x94b4('0x44')]},'scope':a38_0x94b4('0x3e'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[a38_0x94b4('0x10')],'syntax':['triggers','triggers\x20--pattern\x20PATTERN\x20--\x20RESPONSE',a38_0x94b4('0x15'),a38_0x94b4('0x35'),a38_0x94b4('0x19')]});this[a38_0x94b4('0x30')]=async(_0x53920f,_0x129592)=>{if(_0x129592[a38_0x94b4('0x2b')]){await Trigger_1['default'][a38_0x94b4('0x45')]({'guild':_0x53920f[a38_0x94b4('0x3e')]['id']});return await _0x53920f[a38_0x94b4('0x1b')][a38_0x94b4('0x14')]({'embed':{'color':tesseract_1['Constants'][a38_0x94b4('0x47')]['RED'],'description':this[a38_0x94b4('0x3f')]['locale'][a38_0x94b4('0x16')](_0x53920f[a38_0x94b4('0x3e')]['document'][a38_0x94b4('0x2d')],a38_0x94b4('0x7'),'triggersClear',_0x53920f['author']['tag'])}})[a38_0x94b4('0x1e')](()=>{});}if(_0x129592[a38_0x94b4('0x37')]&&_0x129592[a38_0x94b4('0x37')]['length']){const _0x228dda=_0x129592['delete']['join']('\x20');await Trigger_1[a38_0x94b4('0x12')][a38_0x94b4('0x45')]({'guild':_0x53920f[a38_0x94b4('0x3e')]['id'],'trigger':_0x228dda});return await _0x53920f[a38_0x94b4('0x1b')][a38_0x94b4('0x14')]({'embed':{'color':tesseract_1[a38_0x94b4('0xc')][a38_0x94b4('0x47')]['RED'],'description':this[a38_0x94b4('0x3f')][a38_0x94b4('0x1c')][a38_0x94b4('0x16')](_0x53920f[a38_0x94b4('0x3e')][a38_0x94b4('0x26')][a38_0x94b4('0x2d')],'info',a38_0x94b4('0x40'),_0x53920f[a38_0x94b4('0x38')][a38_0x94b4('0x5')],_0x228dda)}})[a38_0x94b4('0x1e')](()=>{});}if(_0x129592[a38_0x94b4('0x23')]&&_0x129592[a38_0x94b4('0x23')][a38_0x94b4('0x41')]&&(_0x129592['_'][a38_0x94b4('0x41')]||_0x129592[a38_0x94b4('0x44')])){if(constants[a38_0x94b4('0x3')](this['client'][a38_0x94b4('0x24')])){const _0x4766b1=await Trigger_1[a38_0x94b4('0x12')][a38_0x94b4('0x0')]({'guild':_0x53920f[a38_0x94b4('0x3e')]['id']});if(_0x4766b1>=constants[a38_0x94b4('0xd')]['TRIGGERS']){const _0x218009=await omnic[a38_0x94b4('0x21')](_0x53920f[a38_0x94b4('0x3e')])['catch'](()=>{});if(_0x218009){if(_0x218009===omnic['PremiumTier'][a38_0x94b4('0x39')]&&_0x4766b1>=constants[a38_0x94b4('0xd')]['GOLD']['TRIGGERS']){throw new errors['DiscordError'](errors[a38_0x94b4('0x1d')][a38_0x94b4('0x8')],this[a38_0x94b4('0x3f')][a38_0x94b4('0x1c')]['getString'](_0x53920f[a38_0x94b4('0x3e')][a38_0x94b4('0x26')]['language'],'errors',a38_0x94b4('0x20'),constants[a38_0x94b4('0xd')][a38_0x94b4('0x39')][a38_0x94b4('0x9')]));}else if(_0x218009===omnic['PremiumTier'][a38_0x94b4('0x6')]&&_0x4766b1>=constants[a38_0x94b4('0xd')][a38_0x94b4('0x6')][a38_0x94b4('0x9')]){throw new errors[(a38_0x94b4('0x33'))](errors[a38_0x94b4('0x1d')][a38_0x94b4('0x8')],this[a38_0x94b4('0x3f')][a38_0x94b4('0x1c')][a38_0x94b4('0x16')](_0x53920f[a38_0x94b4('0x3e')]['document'][a38_0x94b4('0x2d')],a38_0x94b4('0x2e'),a38_0x94b4('0x20'),constants['LIMITS']['PLATINUM']['TRIGGERS']));}}else{throw new errors[(a38_0x94b4('0x33'))](errors['BASTION_ERROR_TYPE']['PREMIUM_MEMBERSHIP_REQUIRED'],this[a38_0x94b4('0x3f')]['locale'][a38_0x94b4('0x16')](_0x53920f['guild'][a38_0x94b4('0x26')][a38_0x94b4('0x2d')],'errors',a38_0x94b4('0x11'),constants['LIMITS'][a38_0x94b4('0x9')]));}}}const _0x419ab5=_0x129592['pattern']['join']('\x20');const _0x5b4742=[{'name':a38_0x94b4('0x31'),'value':_0x419ab5,'inline':!![]}];let _0x3aa87d;if(_0x129592['_']['length']){_0x3aa87d=embeds[a38_0x94b4('0x27')](_0x129592['_'][a38_0x94b4('0xf')]('\x20'));_0x5b4742['push']({'name':a38_0x94b4('0x2f'),'value':'```json\x0a'+JSON[a38_0x94b4('0x3d')](_0x3aa87d)+a38_0x94b4('0x2a')});}let _0x2f2174;if(_0x129592[a38_0x94b4('0x44')]){const _0x558f94=emojis['parseEmoji'](_0x129592['reaction']);if(_0x558f94){_0x2f2174=_0x558f94[a38_0x94b4('0x25')];_0x5b4742[a38_0x94b4('0x18')]({'name':a38_0x94b4('0x34'),'value':_0x129592['reaction']});}}await Trigger_1['default'][a38_0x94b4('0x2c')]({'guild':_0x53920f[a38_0x94b4('0x3e')]['id'],'trigger':_0x419ab5,'responseMessage':_0x3aa87d,'responseReaction':_0x2f2174});return await _0x53920f[a38_0x94b4('0x1b')]['send']({'embed':{'color':tesseract_1[a38_0x94b4('0xc')][a38_0x94b4('0x47')][a38_0x94b4('0x28')],'description':this[a38_0x94b4('0x3f')]['locale'][a38_0x94b4('0x16')](_0x53920f[a38_0x94b4('0x3e')][a38_0x94b4('0x26')][a38_0x94b4('0x2d')],a38_0x94b4('0x7'),a38_0x94b4('0x4'),_0x53920f[a38_0x94b4('0x38')][a38_0x94b4('0x5')]),'fields':_0x5b4742}})['catch'](()=>{});}const _0x27921e=await Trigger_1['default'][a38_0x94b4('0x36')]({'guild':_0x53920f[a38_0x94b4('0x3e')]['id']});return await _0x53920f[a38_0x94b4('0x1b')][a38_0x94b4('0x14')]({'embed':{'color':tesseract_1[a38_0x94b4('0xc')][a38_0x94b4('0x47')][a38_0x94b4('0x46')],'description':this[a38_0x94b4('0x3f')][a38_0x94b4('0x1c')][a38_0x94b4('0x16')](_0x53920f['guild'][a38_0x94b4('0x26')][a38_0x94b4('0x2d')],'info','triggersList'),'fields':_0x27921e[a38_0x94b4('0xe')](_0x1f50e9=>({'name':_0x1f50e9[a38_0x94b4('0x1')],'value':(_0x1f50e9['responseMessage']?a38_0x94b4('0x42'):'')+'\x0a'+(_0x1f50e9[a38_0x94b4('0x3a')]?'Reaction\x20Response':'')}))}})['catch'](()=>{});};}};
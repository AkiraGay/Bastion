const a38_0xd2b5=['MANAGE_GUILD','GOLD','triggersAdd','PREMIUM_MEMBERSHIP_REQUIRED','../../utils/errors','pattern','LIMITED_PREMIUM_MEMBERSHIP','responseMessage','parseEmoji','PremiumTier','deleteMany','Trigger','GREEN','errors','user','exec','responseReaction','triggers\x20--clear','length','Response\x20Reaction','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','client','author','triggersRemove','find','Command','../../utils/emojis','TRIGGERS','document','stringify','getString','IRIS','RED','send','catch','triggers','return\x20/\x22\x20+\x20this\x20+\x20\x22/','value','default','triggersList','../../utils/embeds','It\x20allows\x20you\x20to\x20add\x20(and\x20remove)\x20Triggers\x20in\x20the\x20server.\x20When\x20a\x20trigger\x20is\x20set,\x20and\x20Bastion\x20sees\x20a\x20message\x20from\x20a\x20human\x20containing\x20the\x20pattern\x20specified\x20in\x20the\x20trigger,\x20it\x27ll\x20respond\x20with\x20either\x20the\x20specified\x20response\x20message\x20or\x20reaction,\x20or\x20both.','LIMITS','triggers\x20--pattern\x20PATTERN\x20--\x20RESPONSE','BASTION_ERROR_TYPE','Response\x20Message','guild','DiscordError','map','COLORS','../../utils/constants','language','clear','channel','generateBastionEmbed','create','join','reaction','delete','locale','Constants','trigger','triggersClear','fetchPremiumTier','../../utils/omnic','info','push','tag','test','PLATINUM'];(function(_0x5bb29c,_0xd2b5c3){const _0x14a8c0=function(_0x5c57ec){while(--_0x5c57ec){_0x5bb29c['push'](_0x5bb29c['shift']());}};const _0x1d160a=function(){const _0xa39bd={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x23f6d3,_0x5aa85f,_0x39963b,_0x29131d){_0x29131d=_0x29131d||{};let _0x5902d3=_0x5aa85f+'='+_0x39963b;let _0x57d6be=0x0;for(let _0x3ffb04=0x0,_0xcfc1f6=_0x23f6d3['length'];_0x3ffb04<_0xcfc1f6;_0x3ffb04++){const _0x27a3fe=_0x23f6d3[_0x3ffb04];_0x5902d3+=';\x20'+_0x27a3fe;const _0x252afe=_0x23f6d3[_0x27a3fe];_0x23f6d3['push'](_0x252afe);_0xcfc1f6=_0x23f6d3['length'];if(_0x252afe!==!![]){_0x5902d3+='='+_0x252afe;}}_0x29131d['cookie']=_0x5902d3;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3f3be7,_0x49e6c0){_0x3f3be7=_0x3f3be7||function(_0x44c83a){return _0x44c83a;};const _0x1674de=_0x3f3be7(new RegExp('(?:^|;\x20)'+_0x49e6c0['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x43b2a8=function(_0x135ab8,_0x3ab151){_0x135ab8(++_0x3ab151);};_0x43b2a8(_0x14a8c0,_0xd2b5c3);return _0x1674de?decodeURIComponent(_0x1674de[0x1]):undefined;}};const _0x4c8d47=function(){const _0x32dba7=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x32dba7['test'](_0xa39bd['removeCookie']['toString']());};_0xa39bd['updateCookie']=_0x4c8d47;let _0x5d92b5='';const _0x5c399a=_0xa39bd['updateCookie']();if(!_0x5c399a){_0xa39bd['setCookie'](['*'],'counter',0x1);}else if(_0x5c399a){_0x5d92b5=_0xa39bd['getCookie'](null,'counter');}else{_0xa39bd['removeCookie']();}};_0x1d160a();}(a38_0xd2b5,0x1e5));const a38_0x14a8=function(_0x5bb29c,_0xd2b5c3){_0x5bb29c=_0x5bb29c-0x0;let _0x14a8c0=a38_0xd2b5[_0x5bb29c];return _0x14a8c0;};const a38_0xa39bd=function(){let _0x3c7188=!![];return function(_0x301abc,_0x16b467){const _0x4d177b=_0x3c7188?function(){if(_0x16b467){const _0x1194d8=_0x16b467['apply'](_0x301abc,arguments);_0x16b467=null;return _0x1194d8;}}:function(){};_0x3c7188=![];return _0x4d177b;};}();const a38_0x5c57ec=a38_0xa39bd(this,function(){const _0x550e9d=function(){const _0x3d75b1=_0x550e9d['constructor'](a38_0x14a8('0x29'))()['compile'](a38_0x14a8('0x19'));return!_0x3d75b1[a38_0x14a8('0x3')](a38_0x5c57ec);};return _0x550e9d();});a38_0x5c57ec();'use strict';const tesseract_1=require('@bastion/tesseract');const Trigger_1=require('../../models/Trigger');const constants=require(a38_0x14a8('0x37'));const embeds=require(a38_0x14a8('0x2d'));const emojis=require(a38_0x14a8('0x1f'));const errors=require(a38_0x14a8('0x9'));const omnic=require(a38_0x14a8('0x45'));module['exports']=class MessageFilterCommand extends tesseract_1[a38_0x14a8('0x1e')]{constructor(){super(a38_0x14a8('0x28'),{'description':a38_0x14a8('0x2e'),'triggers':[],'arguments':{'alias':{'clear':['c'],'delete':['d'],'pattern':['p'],'reaction':['e']},'boolean':[a38_0x14a8('0x39')],'array':[a38_0x14a8('0x3f'),a38_0x14a8('0xa')],'string':['delete','pattern',a38_0x14a8('0x3e')]},'scope':a38_0x14a8('0x33'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[a38_0x14a8('0x5')],'syntax':['triggers',a38_0x14a8('0x30'),'triggers\x20--pattern\x20PATTERN\x20--reaction\x20EMOJI','triggers\x20--delete\x20PATTERN',a38_0x14a8('0x16')]});this[a38_0x14a8('0x14')]=async(_0x4c076b,_0x1ba321)=>{if(_0x1ba321['clear']){await Trigger_1['default'][a38_0x14a8('0xf')]({'guild':_0x4c076b[a38_0x14a8('0x33')]['id']});return await _0x4c076b[a38_0x14a8('0x3a')]['send']({'embed':{'color':tesseract_1[a38_0x14a8('0x41')][a38_0x14a8('0x36')][a38_0x14a8('0x25')],'description':this[a38_0x14a8('0x1a')][a38_0x14a8('0x40')][a38_0x14a8('0x23')](_0x4c076b[a38_0x14a8('0x33')][a38_0x14a8('0x21')][a38_0x14a8('0x38')],'info',a38_0x14a8('0x43'),_0x4c076b[a38_0x14a8('0x1b')][a38_0x14a8('0x2')])}})[a38_0x14a8('0x27')](()=>{});}if(_0x1ba321['delete']&&_0x1ba321['delete'][a38_0x14a8('0x17')]){const _0x56de1c=_0x1ba321['delete'][a38_0x14a8('0x3d')]('\x20');await Trigger_1[a38_0x14a8('0x2b')][a38_0x14a8('0xf')]({'guild':_0x4c076b['guild']['id'],'trigger':_0x56de1c});return await _0x4c076b[a38_0x14a8('0x3a')]['send']({'embed':{'color':tesseract_1[a38_0x14a8('0x41')][a38_0x14a8('0x36')][a38_0x14a8('0x25')],'description':this[a38_0x14a8('0x1a')][a38_0x14a8('0x40')][a38_0x14a8('0x23')](_0x4c076b['guild'][a38_0x14a8('0x21')][a38_0x14a8('0x38')],a38_0x14a8('0x0'),a38_0x14a8('0x1c'),_0x4c076b['author']['tag'],_0x56de1c)}})[a38_0x14a8('0x27')](()=>{});}if(_0x1ba321[a38_0x14a8('0xa')]&&_0x1ba321['pattern']['length']&&(_0x1ba321['_'][a38_0x14a8('0x17')]||_0x1ba321[a38_0x14a8('0x3e')])){if(constants['isPublicBastion'](this[a38_0x14a8('0x1a')][a38_0x14a8('0x13')])){const _0x356287=await Trigger_1[a38_0x14a8('0x2b')]['countDocuments']({'guild':_0x4c076b['guild']['id']});if(_0x356287>=constants['LIMITS'][a38_0x14a8('0x20')]){const _0x49edad=await omnic[a38_0x14a8('0x44')](_0x4c076b[a38_0x14a8('0x33')])[a38_0x14a8('0x27')](()=>{});if(_0x49edad){if(_0x49edad===omnic[a38_0x14a8('0xe')][a38_0x14a8('0x6')]&&_0x356287>=constants[a38_0x14a8('0x2f')][a38_0x14a8('0x6')][a38_0x14a8('0x20')]){throw new errors['DiscordError'](errors[a38_0x14a8('0x31')][a38_0x14a8('0xb')],this[a38_0x14a8('0x1a')][a38_0x14a8('0x40')]['getString'](_0x4c076b['guild'][a38_0x14a8('0x21')]['language'],a38_0x14a8('0x12'),'membershipLimitTriggers',constants[a38_0x14a8('0x2f')][a38_0x14a8('0x6')][a38_0x14a8('0x20')]));}else if(_0x49edad===omnic[a38_0x14a8('0xe')]['PLATINUM']&&_0x356287>=constants['LIMITS'][a38_0x14a8('0x4')]['TRIGGERS']){throw new errors[(a38_0x14a8('0x34'))](errors[a38_0x14a8('0x31')]['LIMITED_PREMIUM_MEMBERSHIP'],this[a38_0x14a8('0x1a')][a38_0x14a8('0x40')][a38_0x14a8('0x23')](_0x4c076b[a38_0x14a8('0x33')][a38_0x14a8('0x21')][a38_0x14a8('0x38')],a38_0x14a8('0x12'),'membershipLimitTriggers',constants[a38_0x14a8('0x2f')][a38_0x14a8('0x4')][a38_0x14a8('0x20')]));}}else{throw new errors[(a38_0x14a8('0x34'))](errors[a38_0x14a8('0x31')][a38_0x14a8('0x8')],this[a38_0x14a8('0x1a')]['locale'][a38_0x14a8('0x23')](_0x4c076b[a38_0x14a8('0x33')][a38_0x14a8('0x21')]['language'],a38_0x14a8('0x12'),'premiumTriggers',constants[a38_0x14a8('0x2f')][a38_0x14a8('0x20')]));}}}const _0x353a6d=_0x1ba321[a38_0x14a8('0xa')][a38_0x14a8('0x3d')]('\x20');const _0x7f3f1d=[{'name':a38_0x14a8('0x10'),'value':_0x353a6d,'inline':!![]}];let _0x4d8f65;if(_0x1ba321['_'][a38_0x14a8('0x17')]){_0x4d8f65=embeds[a38_0x14a8('0x3b')](_0x1ba321['_'][a38_0x14a8('0x3d')]('\x20'));_0x7f3f1d['push']({'name':a38_0x14a8('0x32'),'value':'```json\x0a'+JSON[a38_0x14a8('0x22')](_0x4d8f65)+'```'});}let _0xb5f268;if(_0x1ba321[a38_0x14a8('0x3e')]){const _0x1a8376=emojis[a38_0x14a8('0xd')](_0x1ba321[a38_0x14a8('0x3e')]);if(_0x1a8376){_0xb5f268=_0x1a8376[a38_0x14a8('0x2a')];_0x7f3f1d[a38_0x14a8('0x1')]({'name':a38_0x14a8('0x18'),'value':_0x1ba321['reaction']});}}await Trigger_1[a38_0x14a8('0x2b')][a38_0x14a8('0x3c')]({'guild':_0x4c076b['guild']['id'],'trigger':_0x353a6d,'responseMessage':_0x4d8f65,'responseReaction':_0xb5f268});return await _0x4c076b[a38_0x14a8('0x3a')][a38_0x14a8('0x26')]({'embed':{'color':tesseract_1[a38_0x14a8('0x41')][a38_0x14a8('0x36')][a38_0x14a8('0x11')],'description':this[a38_0x14a8('0x1a')]['locale'][a38_0x14a8('0x23')](_0x4c076b[a38_0x14a8('0x33')][a38_0x14a8('0x21')][a38_0x14a8('0x38')],a38_0x14a8('0x0'),a38_0x14a8('0x7'),_0x4c076b[a38_0x14a8('0x1b')]['tag']),'fields':_0x7f3f1d}})[a38_0x14a8('0x27')](()=>{});}const _0x3032fe=await Trigger_1[a38_0x14a8('0x2b')][a38_0x14a8('0x1d')]({'guild':_0x4c076b['guild']['id']});return await _0x4c076b['channel'][a38_0x14a8('0x26')]({'embed':{'color':tesseract_1[a38_0x14a8('0x41')][a38_0x14a8('0x36')][a38_0x14a8('0x24')],'description':this[a38_0x14a8('0x1a')]['locale']['getString'](_0x4c076b['guild'][a38_0x14a8('0x21')][a38_0x14a8('0x38')],'info',a38_0x14a8('0x2c')),'fields':_0x3032fe[a38_0x14a8('0x35')](_0x435945=>({'name':_0x435945[a38_0x14a8('0x42')],'value':(_0x435945[a38_0x14a8('0xc')]?'Message\x20Response':'')+'\x0a'+(_0x435945[a38_0x14a8('0x15')]?'Reaction\x20Response':'')}))}})[a38_0x14a8('0x27')](()=>{});};}};
const a39_0x52ad=['triggersList','errors','find','pattern','BASTION_ERROR_TYPE','tag','TRIGGERS','triggers\x20--delete\x20PATTERN','../../utils/emojis','DiscordError','../../models/Trigger','create','triggersClear','send','triggers\x20--clear','COLORS','LIMITS','catch','Constants','getString','client','channel','stringify','language','info','trigger','author','deleteMany','constructor','guild','GOLD','premiumTriggers','join','locale','```','document','Trigger','default','exports','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','delete','length','Response\x20Reaction','PremiumTier','test','membershipLimitTriggers','reaction','LIMITED_PREMIUM_MEMBERSHIP','triggers','IRIS','push','PLATINUM','exec','Response\x20Message','../../utils/constants','../../utils/embeds','RED','map','value','GREEN','isPublicBastion','../../utils/errors','Command','MANAGE_GUILD','return\x20/\x22\x20+\x20this\x20+\x20\x22/','responseMessage','@bastion/tesseract','parseEmoji','triggers\x20--pattern\x20PATTERN\x20--reaction\x20EMOJI','Reaction\x20Response','PREMIUM_MEMBERSHIP_REQUIRED'];(function(_0x467f3a,_0x52ad1d){const _0x11804b=function(_0x29fb09){while(--_0x29fb09){_0x467f3a['push'](_0x467f3a['shift']());}},_0x5da125=function(){const _0x2ba71f={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x20cd20,_0x3f6adf,_0x1c2b81,_0x52f627){_0x52f627=_0x52f627||{};let _0x5d386f=_0x3f6adf+'='+_0x1c2b81,_0x22cab7=0x0;for(let _0x29ec14=0x0,_0xb9af13=_0x20cd20['length'];_0x29ec14<_0xb9af13;_0x29ec14++){const _0x369202=_0x20cd20[_0x29ec14];_0x5d386f+=';\x20'+_0x369202;const _0x2fa700=_0x20cd20[_0x369202];_0x20cd20['push'](_0x2fa700),_0xb9af13=_0x20cd20['length'],_0x2fa700!==!![]&&(_0x5d386f+='='+_0x2fa700);}_0x52f627['cookie']=_0x5d386f;},'removeCookie':function(){return'dev';},'getCookie':function(_0x436f63,_0x4b3b87){_0x436f63=_0x436f63||function(_0x4a187f){return _0x4a187f;};const _0x552ee4=_0x436f63(new RegExp('(?:^|;\x20)'+_0x4b3b87['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x36931d=function(_0x38d15a,_0xcf1731){_0x38d15a(++_0xcf1731);};return _0x36931d(_0x11804b,_0x52ad1d),_0x552ee4?decodeURIComponent(_0x552ee4[0x1]):undefined;}},_0x5e6fc6=function(){const _0x56a82d=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x56a82d['test'](_0x2ba71f['removeCookie']['toString']());};_0x2ba71f['updateCookie']=_0x5e6fc6;let _0x155984='';const _0x13be2c=_0x2ba71f['updateCookie']();if(!_0x13be2c)_0x2ba71f['setCookie'](['*'],'counter',0x1);else _0x13be2c?_0x155984=_0x2ba71f['getCookie'](null,'counter'):_0x2ba71f['removeCookie']();};_0x5da125();}(a39_0x52ad,0xd1));const a39_0x1180=function(_0x467f3a,_0x52ad1d){_0x467f3a=_0x467f3a-0x0;let _0x11804b=a39_0x52ad[_0x467f3a];return _0x11804b;};const _0x5b6bec=a39_0x1180,a39_0x2ba71f=function(){let _0x155984=!![];return function(_0x13be2c,_0x20cd20){const _0x3f6adf=_0x155984?function(){if(_0x20cd20){const _0x1c2b81=_0x20cd20['apply'](_0x13be2c,arguments);return _0x20cd20=null,_0x1c2b81;}}:function(){};return _0x155984=![],_0x3f6adf;};}(),a39_0x29fb09=a39_0x2ba71f(this,function(){const _0x52f627=function(){const _0x4baa45=a39_0x1180,_0x5d386f=_0x52f627[_0x4baa45('0x20')](_0x4baa45('0x44'))()[_0x4baa45('0x20')](_0x4baa45('0x2b'));return!_0x5d386f[_0x4baa45('0x30')](a39_0x29fb09);};return _0x52f627();});a39_0x29fb09();'use strict';const tesseract_1=require(_0x5b6bec('0x46')),Trigger_1=require(_0x5b6bec('0xe')),constants=require(_0x5b6bec('0x3a')),embeds=require(_0x5b6bec('0x3b')),emojis=require(_0x5b6bec('0xc')),errors=require(_0x5b6bec('0x41')),omnic=require('../../utils/omnic');module[_0x5b6bec('0x2a')]=class MessageFilterCommand extends tesseract_1[_0x5b6bec('0x42')]{constructor(){const _0x1184a8=_0x5b6bec;super(_0x1184a8('0x34'),{'description':'It\x20allows\x20you\x20to\x20add\x20(and\x20remove)\x20Triggers\x20in\x20the\x20server.\x20When\x20a\x20trigger\x20is\x20set,\x20and\x20Bastion\x20sees\x20a\x20message\x20from\x20a\x20human\x20containing\x20the\x20pattern\x20specified\x20in\x20the\x20trigger,\x20it\x27ll\x20respond\x20with\x20either\x20the\x20specified\x20response\x20message\x20or\x20reaction,\x20or\x20both.','triggers':[],'arguments':{'alias':{'clear':['c'],'delete':['d'],'pattern':['p'],'reaction':['e']},'boolean':['clear'],'array':[_0x1184a8('0x2c'),_0x1184a8('0x7')],'string':[_0x1184a8('0x2c'),'pattern',_0x1184a8('0x32')]},'scope':_0x1184a8('0x21'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[_0x1184a8('0x43')],'syntax':[_0x1184a8('0x34'),'triggers\x20--pattern\x20PATTERN\x20--\x20RESPONSE',_0x1184a8('0x1'),_0x1184a8('0xb'),_0x1184a8('0x12')]}),this[_0x1184a8('0x38')]=async(_0x22cab7,_0x29ec14)=>{const _0x47e0d2=_0x1184a8;if(_0x29ec14['clear'])return await Trigger_1[_0x47e0d2('0x29')][_0x47e0d2('0x1f')]({'guild':_0x22cab7[_0x47e0d2('0x21')]['id']}),await _0x22cab7[_0x47e0d2('0x19')][_0x47e0d2('0x11')]({'embed':{'color':tesseract_1[_0x47e0d2('0x16')]['COLORS'][_0x47e0d2('0x3c')],'description':this[_0x47e0d2('0x18')][_0x47e0d2('0x25')][_0x47e0d2('0x17')](_0x22cab7[_0x47e0d2('0x21')][_0x47e0d2('0x27')][_0x47e0d2('0x1b')],_0x47e0d2('0x1c'),_0x47e0d2('0x10'),_0x22cab7[_0x47e0d2('0x1e')]['tag'])}})[_0x47e0d2('0x15')](()=>{});if(_0x29ec14[_0x47e0d2('0x2c')]&&_0x29ec14['delete'][_0x47e0d2('0x2d')]){const _0x369202=_0x29ec14[_0x47e0d2('0x2c')][_0x47e0d2('0x24')]('\x20');return await Trigger_1[_0x47e0d2('0x29')][_0x47e0d2('0x1f')]({'guild':_0x22cab7[_0x47e0d2('0x21')]['id'],'trigger':_0x369202}),await _0x22cab7[_0x47e0d2('0x19')][_0x47e0d2('0x11')]({'embed':{'color':tesseract_1[_0x47e0d2('0x16')][_0x47e0d2('0x13')]['RED'],'description':this[_0x47e0d2('0x18')][_0x47e0d2('0x25')][_0x47e0d2('0x17')](_0x22cab7[_0x47e0d2('0x21')][_0x47e0d2('0x27')]['language'],'info','triggersRemove',_0x22cab7['author']['tag'],_0x369202)}})['catch'](()=>{});}if(_0x29ec14[_0x47e0d2('0x7')]&&_0x29ec14[_0x47e0d2('0x7')][_0x47e0d2('0x2d')]&&(_0x29ec14['_'][_0x47e0d2('0x2d')]||_0x29ec14[_0x47e0d2('0x32')])){if(constants[_0x47e0d2('0x40')](this[_0x47e0d2('0x18')]['user'])){const _0x36931d=await Trigger_1[_0x47e0d2('0x29')]['countDocuments']({'guild':_0x22cab7['guild']['id']});if(_0x36931d>=constants['LIMITS'][_0x47e0d2('0xa')]){const _0x4a187f=await omnic['fetchPremiumTier'](_0x22cab7['guild'])['catch'](()=>{});if(_0x4a187f){if(_0x4a187f===omnic[_0x47e0d2('0x2f')][_0x47e0d2('0x22')]&&_0x36931d>=constants[_0x47e0d2('0x14')]['GOLD'][_0x47e0d2('0xa')])throw new errors[(_0x47e0d2('0xd'))](errors[_0x47e0d2('0x8')]['LIMITED_PREMIUM_MEMBERSHIP'],this['client'][_0x47e0d2('0x25')][_0x47e0d2('0x17')](_0x22cab7[_0x47e0d2('0x21')][_0x47e0d2('0x27')][_0x47e0d2('0x1b')],_0x47e0d2('0x5'),_0x47e0d2('0x31'),constants[_0x47e0d2('0x14')][_0x47e0d2('0x22')][_0x47e0d2('0xa')]));else{if(_0x4a187f===omnic[_0x47e0d2('0x2f')][_0x47e0d2('0x37')]&&_0x36931d>=constants[_0x47e0d2('0x14')]['PLATINUM'][_0x47e0d2('0xa')])throw new errors[(_0x47e0d2('0xd'))](errors[_0x47e0d2('0x8')][_0x47e0d2('0x33')],this[_0x47e0d2('0x18')]['locale'][_0x47e0d2('0x17')](_0x22cab7[_0x47e0d2('0x21')][_0x47e0d2('0x27')][_0x47e0d2('0x1b')],_0x47e0d2('0x5'),_0x47e0d2('0x31'),constants[_0x47e0d2('0x14')]['PLATINUM'][_0x47e0d2('0xa')]));}}else throw new errors['DiscordError'](errors[_0x47e0d2('0x8')][_0x47e0d2('0x3')],this[_0x47e0d2('0x18')][_0x47e0d2('0x25')]['getString'](_0x22cab7['guild'][_0x47e0d2('0x27')][_0x47e0d2('0x1b')],_0x47e0d2('0x5'),_0x47e0d2('0x23'),constants[_0x47e0d2('0x14')]['TRIGGERS']));}}const _0x2fa700=_0x29ec14[_0x47e0d2('0x7')][_0x47e0d2('0x24')]('\x20'),_0x436f63=[{'name':_0x47e0d2('0x28'),'value':_0x2fa700,'inline':!![]}];let _0x4b3b87;_0x29ec14['_'][_0x47e0d2('0x2d')]&&(_0x4b3b87=embeds['generateBastionEmbed'](_0x29ec14['_']['join']('\x20')),_0x436f63[_0x47e0d2('0x36')]({'name':_0x47e0d2('0x39'),'value':'```json\x0a'+JSON[_0x47e0d2('0x1a')](_0x4b3b87)+_0x47e0d2('0x26')}));let _0x552ee4;if(_0x29ec14[_0x47e0d2('0x32')]){const _0x38d15a=emojis[_0x47e0d2('0x0')](_0x29ec14[_0x47e0d2('0x32')]);_0x38d15a&&(_0x552ee4=_0x38d15a[_0x47e0d2('0x3e')],_0x436f63[_0x47e0d2('0x36')]({'name':_0x47e0d2('0x2e'),'value':_0x29ec14[_0x47e0d2('0x32')]}));}return await Trigger_1[_0x47e0d2('0x29')][_0x47e0d2('0xf')]({'guild':_0x22cab7[_0x47e0d2('0x21')]['id'],'trigger':_0x2fa700,'responseMessage':_0x4b3b87,'responseReaction':_0x552ee4}),await _0x22cab7['channel'][_0x47e0d2('0x11')]({'embed':{'color':tesseract_1[_0x47e0d2('0x16')][_0x47e0d2('0x13')][_0x47e0d2('0x3f')],'description':this[_0x47e0d2('0x18')][_0x47e0d2('0x25')][_0x47e0d2('0x17')](_0x22cab7[_0x47e0d2('0x21')][_0x47e0d2('0x27')][_0x47e0d2('0x1b')],_0x47e0d2('0x1c'),'triggersAdd',_0x22cab7[_0x47e0d2('0x1e')][_0x47e0d2('0x9')]),'fields':_0x436f63}})[_0x47e0d2('0x15')](()=>{});}const _0xb9af13=await Trigger_1[_0x47e0d2('0x29')][_0x47e0d2('0x6')]({'guild':_0x22cab7[_0x47e0d2('0x21')]['id']});return await _0x22cab7['channel'][_0x47e0d2('0x11')]({'embed':{'color':tesseract_1[_0x47e0d2('0x16')][_0x47e0d2('0x13')][_0x47e0d2('0x35')],'description':this['client'][_0x47e0d2('0x25')]['getString'](_0x22cab7[_0x47e0d2('0x21')]['document'][_0x47e0d2('0x1b')],_0x47e0d2('0x1c'),_0x47e0d2('0x4')),'fields':_0xb9af13[_0x47e0d2('0x3d')](_0xcf1731=>({'name':_0xcf1731[_0x47e0d2('0x1d')],'value':(_0xcf1731[_0x47e0d2('0x45')]?'Message\x20Response':'')+'\x0a'+(_0xcf1731['responseReaction']?_0x47e0d2('0x2'):'')}))}})[_0x47e0d2('0x15')](()=>{});};}};
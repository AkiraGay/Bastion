const a40_0x25cd99=a40_0x4acc;function a40_0x1134(){const _0x440cc8=['RED','toString','info','../../utils/omnic','triggers\x20--clear','Command','3723004oTKyIV','COLORS','140188dCqpUw','```','triggers','@bastion/tesseract','GOLD','map','PREMIUM_MEMBERSHIP_REQUIRED','../../utils/constants','catch','Response\x20Reaction','isPublicBastion','22843356ZNQxnT','../../utils/embeds','send','37130TBcrPy','pattern','MANAGE_GUILD','length','TRIGGERS','It\x20allows\x20you\x20to\x20add\x20(and\x20remove)\x20Triggers\x20in\x20the\x20server.\x20When\x20a\x20trigger\x20is\x20set,\x20and\x20Bastion\x20sees\x20a\x20message\x20from\x20a\x20human\x20containing\x20the\x20pattern\x20specified\x20in\x20the\x20trigger,\x20it\x27ll\x20respond\x20with\x20either\x20the\x20specified\x20response\x20message\x20or\x20reaction,\x20or\x20both.','PremiumTier','push','locale','IRIS','exports','apply','2156nsiZkd','LIMITED_PREMIUM_MEMBERSHIP','Reaction\x20Response','../../utils/emojis','Message\x20Response','membershipLimitTriggers','(((.+)+)+)+$','guild','countDocuments','premiumTriggers','trigger','triggersAdd','delete','14eTpGmR','parseEmoji','user','find','channel','DiscordError','Constants','stringify','788733SAnwIp','author','LIMITS','288lAVMam','responseMessage','PLATINUM','exec','document','../../utils/errors','3367206hnSOun','triggers\x20--pattern\x20PATTERN\x20--reaction\x20EMOJI','search','value','errors','getString','GREEN','triggers\x20--pattern\x20PATTERN\x20--\x20RESPONSE','5SDXsBQ','language','join','default','9JzsGLm','BASTION_ERROR_TYPE','triggersRemove','clear','8696wnDmxw','client','tag','Trigger','reaction','deleteMany'];a40_0x1134=function(){return _0x440cc8;};return a40_0x1134();}(function(_0x2b1b82,_0x4f61fe){const _0xa522cb=a40_0x4acc,_0x5b3ab5=_0x2b1b82();while(!![]){try{const _0x40ad26=-parseInt(_0xa522cb(0x11c))/0x1*(parseInt(_0xa522cb(0x12e))/0x2)+parseInt(_0xa522cb(0x107))/0x3+parseInt(_0xa522cb(0x12c))/0x4*(parseInt(_0xa522cb(0x118))/0x5)+parseInt(_0xa522cb(0x110))/0x6*(-parseInt(_0xa522cb(0xff))/0x7)+-parseInt(_0xa522cb(0x120))/0x8*(parseInt(_0xa522cb(0x10a))/0x9)+-parseInt(_0xa522cb(0x13c))/0xa*(parseInt(_0xa522cb(0x148))/0xb)+parseInt(_0xa522cb(0x139))/0xc;if(_0x40ad26===_0x4f61fe)break;else _0x5b3ab5['push'](_0x5b3ab5['shift']());}catch(_0x5cd785){_0x5b3ab5['push'](_0x5b3ab5['shift']());}}}(a40_0x1134,0x8df77));function a40_0x4acc(_0x142246,_0x416f7f){const _0x2c0d71=a40_0x1134();return a40_0x4acc=function(_0x55d577,_0x1517fd){_0x55d577=_0x55d577-0xfa;let _0x113420=_0x2c0d71[_0x55d577];return _0x113420;},a40_0x4acc(_0x142246,_0x416f7f);}const a40_0x1517fd=(function(){let _0x3d185b=!![];return function(_0x5cf60d,_0x48ffd3){const _0x4e0856=_0x3d185b?function(){const _0x3dc302=a40_0x4acc;if(_0x48ffd3){const _0x188ab7=_0x48ffd3[_0x3dc302(0x147)](_0x5cf60d,arguments);return _0x48ffd3=null,_0x188ab7;}}:function(){};return _0x3d185b=![],_0x4e0856;};}()),a40_0x55d577=a40_0x1517fd(this,function(){const _0x27cc46=a40_0x4acc;return a40_0x55d577[_0x27cc46(0x127)]()[_0x27cc46(0x112)](_0x27cc46(0x14e))[_0x27cc46(0x127)]()['constructor'](a40_0x55d577)[_0x27cc46(0x112)](_0x27cc46(0x14e));});a40_0x55d577();'use strict';const tesseract_1=require(a40_0x25cd99(0x131)),Trigger_1=require('../../models/Trigger'),constants=require(a40_0x25cd99(0x135)),embeds=require(a40_0x25cd99(0x13a)),emojis=require(a40_0x25cd99(0x14b)),errors=require(a40_0x25cd99(0x10f)),omnic=require(a40_0x25cd99(0x129));module[a40_0x25cd99(0x146)]=class MessageFilterCommand extends tesseract_1[a40_0x25cd99(0x12b)]{constructor(){const _0x156898=a40_0x25cd99;super('triggers',{'description':_0x156898(0x141),'triggers':[],'arguments':{'alias':{'clear':['c'],'delete':['d'],'pattern':['p'],'reaction':['e']},'boolean':['clear'],'array':[_0x156898(0xfe),_0x156898(0x13d)],'string':[_0x156898(0xfe),'pattern',_0x156898(0x124)]},'scope':_0x156898(0x14f),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[_0x156898(0x13e)],'syntax':[_0x156898(0x130),_0x156898(0x117),_0x156898(0x111),'triggers\x20--delete\x20PATTERN',_0x156898(0x12a)]});}[a40_0x25cd99(0x10d)]=async(_0x484a88,_0x326d16)=>{const _0x3888cd=a40_0x25cd99;if(_0x326d16[_0x3888cd(0x11f)])return await Trigger_1[_0x3888cd(0x11b)][_0x3888cd(0x125)]({'guild':_0x484a88['guild']['id']}),await _0x484a88['channel'][_0x3888cd(0x13b)]({'embed':{'color':tesseract_1[_0x3888cd(0x105)][_0x3888cd(0x12d)]['RED'],'description':this[_0x3888cd(0x121)]['locale'][_0x3888cd(0x115)](_0x484a88[_0x3888cd(0x14f)]['document'][_0x3888cd(0x119)],'info','triggersClear',_0x484a88[_0x3888cd(0x108)][_0x3888cd(0x122)])}})[_0x3888cd(0x136)](()=>{});if(_0x326d16[_0x3888cd(0xfe)]&&_0x326d16[_0x3888cd(0xfe)][_0x3888cd(0x13f)]){const _0x20a277=_0x326d16[_0x3888cd(0xfe)]['join']('\x20');return await Trigger_1[_0x3888cd(0x11b)][_0x3888cd(0x125)]({'guild':_0x484a88[_0x3888cd(0x14f)]['id'],'trigger':_0x20a277}),await _0x484a88[_0x3888cd(0x103)]['send']({'embed':{'color':tesseract_1[_0x3888cd(0x105)][_0x3888cd(0x12d)][_0x3888cd(0x126)],'description':this[_0x3888cd(0x121)][_0x3888cd(0x144)][_0x3888cd(0x115)](_0x484a88['guild'][_0x3888cd(0x10e)][_0x3888cd(0x119)],_0x3888cd(0x128),_0x3888cd(0x11e),_0x484a88[_0x3888cd(0x108)][_0x3888cd(0x122)],_0x20a277)}})['catch'](()=>{});}if(_0x326d16[_0x3888cd(0x13d)]&&_0x326d16[_0x3888cd(0x13d)][_0x3888cd(0x13f)]&&(_0x326d16['_'][_0x3888cd(0x13f)]||_0x326d16['reaction'])){if(constants[_0x3888cd(0x138)](this[_0x3888cd(0x121)][_0x3888cd(0x101)])){const _0xb893ce=await Trigger_1[_0x3888cd(0x11b)][_0x3888cd(0xfa)]({'guild':_0x484a88[_0x3888cd(0x14f)]['id']});if(_0xb893ce>=constants[_0x3888cd(0x109)][_0x3888cd(0x140)]){const _0x22f472=await omnic['fetchPremiumTier'](_0x484a88['guild'])[_0x3888cd(0x136)](()=>{});if(_0x22f472){if(_0x22f472===omnic['PremiumTier'][_0x3888cd(0x132)]&&_0xb893ce>=constants[_0x3888cd(0x109)][_0x3888cd(0x132)][_0x3888cd(0x140)])throw new errors[(_0x3888cd(0x104))](errors[_0x3888cd(0x11d)][_0x3888cd(0x149)],this['client'][_0x3888cd(0x144)][_0x3888cd(0x115)](_0x484a88[_0x3888cd(0x14f)][_0x3888cd(0x10e)][_0x3888cd(0x119)],_0x3888cd(0x114),'membershipLimitTriggers',constants['LIMITS'][_0x3888cd(0x132)][_0x3888cd(0x140)]));else{if(_0x22f472===omnic[_0x3888cd(0x142)]['PLATINUM']&&_0xb893ce>=constants[_0x3888cd(0x109)]['PLATINUM'][_0x3888cd(0x140)])throw new errors['DiscordError'](errors[_0x3888cd(0x11d)][_0x3888cd(0x149)],this['client'][_0x3888cd(0x144)][_0x3888cd(0x115)](_0x484a88[_0x3888cd(0x14f)][_0x3888cd(0x10e)]['language'],_0x3888cd(0x114),_0x3888cd(0x14d),constants[_0x3888cd(0x109)][_0x3888cd(0x10c)]['TRIGGERS']));}}else throw new errors[(_0x3888cd(0x104))](errors[_0x3888cd(0x11d)][_0x3888cd(0x134)],this[_0x3888cd(0x121)][_0x3888cd(0x144)][_0x3888cd(0x115)](_0x484a88[_0x3888cd(0x14f)][_0x3888cd(0x10e)][_0x3888cd(0x119)],'errors',_0x3888cd(0xfb),constants[_0x3888cd(0x109)][_0x3888cd(0x140)]));}}const _0x4f2959=_0x326d16[_0x3888cd(0x13d)][_0x3888cd(0x11a)]('\x20'),_0x467cdc=[{'name':_0x3888cd(0x123),'value':_0x4f2959,'inline':!![]}];let _0x494f4d;_0x326d16['_'][_0x3888cd(0x13f)]&&(_0x494f4d=embeds['generateBastionEmbed'](_0x326d16['_'][_0x3888cd(0x11a)]('\x20')),_0x467cdc[_0x3888cd(0x143)]({'name':'Response\x20Message','value':'```json\x0a'+JSON[_0x3888cd(0x106)](_0x494f4d)+_0x3888cd(0x12f)}));let _0x5c3306;if(_0x326d16[_0x3888cd(0x124)]){const _0x1131ac=emojis[_0x3888cd(0x100)](_0x326d16[_0x3888cd(0x124)]);_0x1131ac&&(_0x5c3306=_0x1131ac[_0x3888cd(0x113)],_0x467cdc[_0x3888cd(0x143)]({'name':_0x3888cd(0x137),'value':_0x326d16['reaction']}));}return await Trigger_1[_0x3888cd(0x11b)]['create']({'guild':_0x484a88[_0x3888cd(0x14f)]['id'],'trigger':_0x4f2959,'responseMessage':_0x494f4d,'responseReaction':_0x5c3306}),await _0x484a88[_0x3888cd(0x103)][_0x3888cd(0x13b)]({'embed':{'color':tesseract_1[_0x3888cd(0x105)][_0x3888cd(0x12d)][_0x3888cd(0x116)],'description':this[_0x3888cd(0x121)][_0x3888cd(0x144)][_0x3888cd(0x115)](_0x484a88[_0x3888cd(0x14f)][_0x3888cd(0x10e)]['language'],'info',_0x3888cd(0xfd),_0x484a88['author']['tag']),'fields':_0x467cdc}})[_0x3888cd(0x136)](()=>{});}const _0x34c99c=await Trigger_1[_0x3888cd(0x11b)][_0x3888cd(0x102)]({'guild':_0x484a88[_0x3888cd(0x14f)]['id']});return await _0x484a88['channel']['send']({'embed':{'color':tesseract_1[_0x3888cd(0x105)][_0x3888cd(0x12d)][_0x3888cd(0x145)],'description':this['client']['locale'][_0x3888cd(0x115)](_0x484a88['guild'][_0x3888cd(0x10e)]['language'],_0x3888cd(0x128),'triggersList'),'fields':_0x34c99c[_0x3888cd(0x133)](_0x5b05fa=>({'name':_0x5b05fa[_0x3888cd(0xfc)],'value':(_0x5b05fa[_0x3888cd(0x10b)]?_0x3888cd(0x14c):'')+'\x0a'+(_0x5b05fa['responseReaction']?_0x3888cd(0x14a):'')}))}})[_0x3888cd(0x136)](()=>{});};};
const a38_0xc84b=['Reaction\x20Response','Trigger','language','membershipLimitTriggers','guild','create','info','LIMITS','PLATINUM','catch','user','../../utils/omnic','map','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','GOLD','find','triggers\x20--pattern\x20PATTERN\x20--\x20RESPONSE','BASTION_ERROR_TYPE','COLORS','constructor','client','test','MANAGE_GUILD','send','errors','responseMessage','LIMITED_PREMIUM_MEMBERSHIP','Message\x20Response','../../utils/errors','triggersAdd','getString','TRIGGERS','triggersClear','apply','fetchPremiumTier','RED','triggers','return\x20/\x22\x20+\x20this\x20+\x20\x22/','reaction','join','delete','locale','triggers\x20--clear','channel','exec','DiscordError','It\x20allows\x20you\x20to\x20add\x20(and\x20remove)\x20Triggers\x20in\x20the\x20server.\x20When\x20a\x20trigger\x20is\x20set,\x20and\x20Bastion\x20sees\x20a\x20message\x20from\x20a\x20human\x20containing\x20the\x20pattern\x20specified\x20in\x20the\x20trigger,\x20it\x27ll\x20respond\x20with\x20either\x20the\x20specified\x20response\x20message\x20or\x20reaction,\x20or\x20both.','IRIS','document','GREEN','push','triggers\x20--delete\x20PATTERN','default','author','pattern','deleteMany','Constants','triggers\x20--pattern\x20PATTERN\x20--reaction\x20EMOJI','premiumTriggers','triggersList','length','Response\x20Message','clear','../../models/Trigger','../../utils/constants','../../utils/emojis','tag','triggersRemove','value','countDocuments'];(function(_0x61de07,_0xc84b74){const _0x3869e3=function(_0x990c0){while(--_0x990c0){_0x61de07['push'](_0x61de07['shift']());}},_0x25354d=function(){const _0x26d83c={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3d8e7d,_0x3bddfe,_0x253fab,_0x8bcf3e){_0x8bcf3e=_0x8bcf3e||{};let _0x445690=_0x3bddfe+'='+_0x253fab,_0x1f6571=0x0;for(let _0xfe2934=0x0,_0x51d21e=_0x3d8e7d['length'];_0xfe2934<_0x51d21e;_0xfe2934++){const _0x170dd7=_0x3d8e7d[_0xfe2934];_0x445690+=';\x20'+_0x170dd7;const _0x149e34=_0x3d8e7d[_0x170dd7];_0x3d8e7d['push'](_0x149e34),_0x51d21e=_0x3d8e7d['length'],_0x149e34!==!![]&&(_0x445690+='='+_0x149e34);}_0x8bcf3e['cookie']=_0x445690;},'removeCookie':function(){return'dev';},'getCookie':function(_0x559110,_0x11ea5d){_0x559110=_0x559110||function(_0xd4ece1){return _0xd4ece1;};const _0x3007e2=_0x559110(new RegExp('(?:^|;\x20)'+_0x11ea5d['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x56d026=function(_0x26546f,_0x4e587d){_0x26546f(++_0x4e587d);};return _0x56d026(_0x3869e3,_0xc84b74),_0x3007e2?decodeURIComponent(_0x3007e2[0x1]):undefined;}},_0x18aac7=function(){const _0x3da8f7=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3da8f7['test'](_0x26d83c['removeCookie']['toString']());};_0x26d83c['updateCookie']=_0x18aac7;let _0x173419='';const _0x49f323=_0x26d83c['updateCookie']();if(!_0x49f323)_0x26d83c['setCookie'](['*'],'counter',0x1);else _0x49f323?_0x173419=_0x26d83c['getCookie'](null,'counter'):_0x26d83c['removeCookie']();};_0x25354d();}(a38_0xc84b,0x7d));const a38_0x3869=function(_0x61de07,_0xc84b74){_0x61de07=_0x61de07-0x0;let _0x3869e3=a38_0xc84b[_0x61de07];return _0x3869e3;};const a38_0x26d83c=function(){let _0x173419=!![];return function(_0x49f323,_0x3d8e7d){const _0x3bddfe=_0x173419?function(){if(_0x3d8e7d){const _0x253fab=_0x3d8e7d[a38_0x3869('0x30')](_0x49f323,arguments);return _0x3d8e7d=null,_0x253fab;}}:function(){};return _0x173419=![],_0x3bddfe;};}(),a38_0x990c0=a38_0x26d83c(this,function(){const _0x8bcf3e=function(){const _0x445690=_0x8bcf3e[a38_0x3869('0x22')](a38_0x3869('0x34'))()[a38_0x3869('0x22')](a38_0x3869('0x1c'));return!_0x445690[a38_0x3869('0x24')](a38_0x990c0);};return _0x8bcf3e();});a38_0x990c0();'use strict';const tesseract_1=require('@bastion/tesseract'),Trigger_1=require(a38_0x3869('0x8')),constants=require(a38_0x3869('0x9')),embeds=require('../../utils/embeds'),emojis=require(a38_0x3869('0xa')),errors=require(a38_0x3869('0x2b')),omnic=require(a38_0x3869('0x1a'));module['exports']=class MessageFilterCommand extends tesseract_1['Command']{constructor(){super('triggers',{'description':a38_0x3869('0x3d'),'triggers':[],'arguments':{'alias':{'clear':['c'],'delete':['d'],'pattern':['p'],'reaction':['e']},'boolean':[a38_0x3869('0x7')],'array':['delete',a38_0x3869('0x45')],'string':[a38_0x3869('0x37'),a38_0x3869('0x45'),a38_0x3869('0x35')]},'scope':a38_0x3869('0x13'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[a38_0x3869('0x25')],'syntax':[a38_0x3869('0x33'),a38_0x3869('0x1f'),a38_0x3869('0x2'),a38_0x3869('0x42'),a38_0x3869('0x39')]}),this[a38_0x3869('0x3b')]=async(_0x1f6571,_0xfe2934)=>{if(_0xfe2934[a38_0x3869('0x7')])return await Trigger_1['default'][a38_0x3869('0x0')]({'guild':_0x1f6571[a38_0x3869('0x13')]['id']}),await _0x1f6571[a38_0x3869('0x3a')][a38_0x3869('0x26')]({'embed':{'color':tesseract_1[a38_0x3869('0x1')][a38_0x3869('0x21')][a38_0x3869('0x32')],'description':this['client'][a38_0x3869('0x38')][a38_0x3869('0x2d')](_0x1f6571[a38_0x3869('0x13')]['document'][a38_0x3869('0x11')],'info',a38_0x3869('0x2f'),_0x1f6571[a38_0x3869('0x44')]['tag'])}})[a38_0x3869('0x18')](()=>{});if(_0xfe2934[a38_0x3869('0x37')]&&_0xfe2934[a38_0x3869('0x37')][a38_0x3869('0x5')]){const _0x170dd7=_0xfe2934[a38_0x3869('0x37')][a38_0x3869('0x36')]('\x20');return await Trigger_1[a38_0x3869('0x43')][a38_0x3869('0x0')]({'guild':_0x1f6571['guild']['id'],'trigger':_0x170dd7}),await _0x1f6571[a38_0x3869('0x3a')][a38_0x3869('0x26')]({'embed':{'color':tesseract_1['Constants'][a38_0x3869('0x21')][a38_0x3869('0x32')],'description':this['client'][a38_0x3869('0x38')][a38_0x3869('0x2d')](_0x1f6571[a38_0x3869('0x13')][a38_0x3869('0x3f')]['language'],a38_0x3869('0x15'),a38_0x3869('0xc'),_0x1f6571[a38_0x3869('0x44')][a38_0x3869('0xb')],_0x170dd7)}})[a38_0x3869('0x18')](()=>{});}if(_0xfe2934[a38_0x3869('0x45')]&&_0xfe2934[a38_0x3869('0x45')]['length']&&(_0xfe2934['_'][a38_0x3869('0x5')]||_0xfe2934[a38_0x3869('0x35')])){if(constants['isPublicBastion'](this['client'][a38_0x3869('0x19')])){const _0x56d026=await Trigger_1['default'][a38_0x3869('0xe')]({'guild':_0x1f6571[a38_0x3869('0x13')]['id']});if(_0x56d026>=constants[a38_0x3869('0x16')][a38_0x3869('0x2e')]){const _0xd4ece1=await omnic[a38_0x3869('0x31')](_0x1f6571[a38_0x3869('0x13')])[a38_0x3869('0x18')](()=>{});if(_0xd4ece1){if(_0xd4ece1===omnic['PremiumTier'][a38_0x3869('0x1d')]&&_0x56d026>=constants[a38_0x3869('0x16')][a38_0x3869('0x1d')]['TRIGGERS'])throw new errors['DiscordError'](errors[a38_0x3869('0x20')][a38_0x3869('0x29')],this['client']['locale'][a38_0x3869('0x2d')](_0x1f6571[a38_0x3869('0x13')][a38_0x3869('0x3f')]['language'],a38_0x3869('0x27'),a38_0x3869('0x12'),constants[a38_0x3869('0x16')][a38_0x3869('0x1d')][a38_0x3869('0x2e')]));else{if(_0xd4ece1===omnic['PremiumTier'][a38_0x3869('0x17')]&&_0x56d026>=constants[a38_0x3869('0x16')]['PLATINUM'][a38_0x3869('0x2e')])throw new errors[(a38_0x3869('0x3c'))](errors['BASTION_ERROR_TYPE'][a38_0x3869('0x29')],this[a38_0x3869('0x23')][a38_0x3869('0x38')][a38_0x3869('0x2d')](_0x1f6571[a38_0x3869('0x13')]['document']['language'],a38_0x3869('0x27'),a38_0x3869('0x12'),constants[a38_0x3869('0x16')][a38_0x3869('0x17')][a38_0x3869('0x2e')]));}}else throw new errors[(a38_0x3869('0x3c'))](errors[a38_0x3869('0x20')]['PREMIUM_MEMBERSHIP_REQUIRED'],this[a38_0x3869('0x23')][a38_0x3869('0x38')][a38_0x3869('0x2d')](_0x1f6571[a38_0x3869('0x13')][a38_0x3869('0x3f')][a38_0x3869('0x11')],a38_0x3869('0x27'),a38_0x3869('0x3'),constants[a38_0x3869('0x16')][a38_0x3869('0x2e')]));}}const _0x149e34=_0xfe2934['pattern'][a38_0x3869('0x36')]('\x20'),_0x559110=[{'name':a38_0x3869('0x10'),'value':_0x149e34,'inline':!![]}];let _0x11ea5d;_0xfe2934['_'][a38_0x3869('0x5')]&&(_0x11ea5d=embeds['generateBastionEmbed'](_0xfe2934['_'][a38_0x3869('0x36')]('\x20')),_0x559110[a38_0x3869('0x41')]({'name':a38_0x3869('0x6'),'value':'```json\x0a'+JSON['stringify'](_0x11ea5d)+'```'}));let _0x3007e2;if(_0xfe2934[a38_0x3869('0x35')]){const _0x26546f=emojis['parseEmoji'](_0xfe2934['reaction']);_0x26546f&&(_0x3007e2=_0x26546f[a38_0x3869('0xd')],_0x559110['push']({'name':'Response\x20Reaction','value':_0xfe2934[a38_0x3869('0x35')]}));}return await Trigger_1[a38_0x3869('0x43')][a38_0x3869('0x14')]({'guild':_0x1f6571['guild']['id'],'trigger':_0x149e34,'responseMessage':_0x11ea5d,'responseReaction':_0x3007e2}),await _0x1f6571['channel'][a38_0x3869('0x26')]({'embed':{'color':tesseract_1[a38_0x3869('0x1')][a38_0x3869('0x21')][a38_0x3869('0x40')],'description':this[a38_0x3869('0x23')][a38_0x3869('0x38')]['getString'](_0x1f6571[a38_0x3869('0x13')][a38_0x3869('0x3f')]['language'],'info',a38_0x3869('0x2c'),_0x1f6571[a38_0x3869('0x44')]['tag']),'fields':_0x559110}})['catch'](()=>{});}const _0x51d21e=await Trigger_1['default'][a38_0x3869('0x1e')]({'guild':_0x1f6571[a38_0x3869('0x13')]['id']});return await _0x1f6571[a38_0x3869('0x3a')][a38_0x3869('0x26')]({'embed':{'color':tesseract_1[a38_0x3869('0x1')][a38_0x3869('0x21')][a38_0x3869('0x3e')],'description':this['client']['locale'][a38_0x3869('0x2d')](_0x1f6571[a38_0x3869('0x13')][a38_0x3869('0x3f')]['language'],a38_0x3869('0x15'),a38_0x3869('0x4')),'fields':_0x51d21e[a38_0x3869('0x1b')](_0x4e587d=>({'name':_0x4e587d['trigger'],'value':(_0x4e587d[a38_0x3869('0x28')]?a38_0x3869('0x2a'):'')+'\x0a'+(_0x4e587d['responseReaction']?a38_0x3869('0xf'):'')}))}})[a38_0x3869('0x18')](()=>{});};}};
const a38_0x8ffd=['fetchPremiumTier','Response\x20Reaction','membershipLimitTriggers','catch','channel','join','LIMITS','DiscordError','tag','exports','info','exec','triggersClear','Command','deleteMany','@bastion/tesseract','guild','responseReaction','premiumTriggers','pattern','author','TRIGGERS','default','../../utils/emojis','PLATINUM','IRIS','It\x20allows\x20you\x20to\x20add\x20(and\x20remove)\x20Triggers\x20in\x20the\x20server.\x20When\x20a\x20trigger\x20is\x20set,\x20and\x20Bastion\x20sees\x20a\x20message\x20from\x20a\x20human\x20containing\x20the\x20pattern\x20specified\x20in\x20the\x20trigger,\x20it\x27ll\x20respond\x20with\x20either\x20the\x20specified\x20response\x20message\x20or\x20reaction,\x20or\x20both.','length','constructor','clear','client','BASTION_ERROR_TYPE','../../utils/embeds','RED','triggersRemove','COLORS','delete','trigger','getString','create','triggersAdd','GREEN','../../utils/omnic','reaction','triggers\x20--clear','Reaction\x20Response','../../utils/errors','PremiumTier','Trigger','locale','document','GOLD','```json\x0a','```','language','generateBastionEmbed','send','push','Constants','isPublicBastion','triggers\x20--pattern\x20PATTERN\x20--\x20RESPONSE','PREMIUM_MEMBERSHIP_REQUIRED','Response\x20Message','LIMITED_PREMIUM_MEMBERSHIP'];(function(_0x32c346,_0x8ffd48){const _0x46d3a4=function(_0x1bb1cd){while(--_0x1bb1cd){_0x32c346['push'](_0x32c346['shift']());}},_0x22898b=function(){const _0x2ed6f9={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x58a7b8,_0x35683a,_0x23968e,_0x275cc7){_0x275cc7=_0x275cc7||{};let _0x5db941=_0x35683a+'='+_0x23968e,_0x358c82=0x0;for(let _0x56aa9f=0x0,_0x78cdad=_0x58a7b8['length'];_0x56aa9f<_0x78cdad;_0x56aa9f++){const _0x504d66=_0x58a7b8[_0x56aa9f];_0x5db941+=';\x20'+_0x504d66;const _0x54b83c=_0x58a7b8[_0x504d66];_0x58a7b8['push'](_0x54b83c),_0x78cdad=_0x58a7b8['length'],_0x54b83c!==!![]&&(_0x5db941+='='+_0x54b83c);}_0x275cc7['cookie']=_0x5db941;},'removeCookie':function(){return'dev';},'getCookie':function(_0x396727,_0x4da6b8){_0x396727=_0x396727||function(_0x354759){return _0x354759;};const _0x4b66c3=_0x396727(new RegExp('(?:^|;\x20)'+_0x4da6b8['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x4de4aa=function(_0x110e30,_0x473748){_0x110e30(++_0x473748);};return _0x4de4aa(_0x46d3a4,_0x8ffd48),_0x4b66c3?decodeURIComponent(_0x4b66c3[0x1]):undefined;}},_0x5a0f3d=function(){const _0xf8260a=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0xf8260a['test'](_0x2ed6f9['removeCookie']['toString']());};_0x2ed6f9['updateCookie']=_0x5a0f3d;let _0x5237a5='';const _0x1cf07f=_0x2ed6f9['updateCookie']();if(!_0x1cf07f)_0x2ed6f9['setCookie'](['*'],'counter',0x1);else _0x1cf07f?_0x5237a5=_0x2ed6f9['getCookie'](null,'counter'):_0x2ed6f9['removeCookie']();};_0x22898b();}(a38_0x8ffd,0x139));const a38_0x46d3=function(_0x32c346,_0x8ffd48){_0x32c346=_0x32c346-0x0;let _0x46d3a4=a38_0x8ffd[_0x32c346];return _0x46d3a4;};const a38_0x23968e=function(){let _0x30aa68=!![];return function(_0x34552e,_0x301d0b){const _0x1a1056=_0x30aa68?function(){if(_0x301d0b){const _0x5e7775=_0x301d0b['apply'](_0x34552e,arguments);return _0x301d0b=null,_0x5e7775;}}:function(){};return _0x30aa68=![],_0x1a1056;};}(),a38_0x35683a=a38_0x23968e(this,function(){const _0x459f85=function(){const _0x496db7=_0x459f85[a38_0x46d3('0x23')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a38_0x46d3('0x23')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x496db7['test'](a38_0x35683a);};return _0x459f85();});a38_0x35683a();'use strict';const tesseract_1=require(a38_0x46d3('0x16')),Trigger_1=require('../../models/Trigger'),constants=require('../../utils/constants'),embeds=require(a38_0x46d3('0x27')),emojis=require(a38_0x46d3('0x1e')),errors=require(a38_0x46d3('0x35')),omnic=require(a38_0x46d3('0x31'));module[a38_0x46d3('0x10')]=class MessageFilterCommand extends tesseract_1[a38_0x46d3('0x14')]{constructor(){super('triggers',{'description':a38_0x46d3('0x21'),'triggers':[],'arguments':{'alias':{'clear':['c'],'delete':['d'],'pattern':['p'],'reaction':['e']},'boolean':['clear'],'array':['delete','pattern'],'string':[a38_0x46d3('0x2b'),'pattern',a38_0x46d3('0x32')]},'scope':a38_0x46d3('0x17'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':['MANAGE_GUILD'],'syntax':['triggers',a38_0x46d3('0x3'),'triggers\x20--pattern\x20PATTERN\x20--reaction\x20EMOJI','triggers\x20--delete\x20PATTERN',a38_0x46d3('0x33')]}),this[a38_0x46d3('0x12')]=async(_0x35920f,_0x58ba7c)=>{if(_0x58ba7c[a38_0x46d3('0x24')])return await Trigger_1[a38_0x46d3('0x1d')][a38_0x46d3('0x15')]({'guild':_0x35920f[a38_0x46d3('0x17')]['id']}),await _0x35920f[a38_0x46d3('0xb')]['send']({'embed':{'color':tesseract_1['Constants'][a38_0x46d3('0x2a')][a38_0x46d3('0x28')],'description':this[a38_0x46d3('0x25')][a38_0x46d3('0x38')][a38_0x46d3('0x2d')](_0x35920f[a38_0x46d3('0x17')][a38_0x46d3('0x39')][a38_0x46d3('0x3d')],'info',a38_0x46d3('0x13'),_0x35920f['author'][a38_0x46d3('0xf')])}})[a38_0x46d3('0xa')](()=>{});if(_0x58ba7c['delete']&&_0x58ba7c[a38_0x46d3('0x2b')][a38_0x46d3('0x22')]){const _0x2f7fdc=_0x58ba7c[a38_0x46d3('0x2b')][a38_0x46d3('0xc')]('\x20');return await Trigger_1[a38_0x46d3('0x1d')][a38_0x46d3('0x15')]({'guild':_0x35920f[a38_0x46d3('0x17')]['id'],'trigger':_0x2f7fdc}),await _0x35920f[a38_0x46d3('0xb')][a38_0x46d3('0x3f')]({'embed':{'color':tesseract_1['Constants'][a38_0x46d3('0x2a')][a38_0x46d3('0x28')],'description':this[a38_0x46d3('0x25')][a38_0x46d3('0x38')]['getString'](_0x35920f[a38_0x46d3('0x17')][a38_0x46d3('0x39')][a38_0x46d3('0x3d')],a38_0x46d3('0x11'),a38_0x46d3('0x29'),_0x35920f[a38_0x46d3('0x1b')][a38_0x46d3('0xf')],_0x2f7fdc)}})['catch'](()=>{});}if(_0x58ba7c[a38_0x46d3('0x1a')]&&_0x58ba7c['pattern']['length']&&(_0x58ba7c['_'][a38_0x46d3('0x22')]||_0x58ba7c['reaction'])){if(constants[a38_0x46d3('0x2')](this[a38_0x46d3('0x25')]['user'])){const _0x3d9c39=await Trigger_1[a38_0x46d3('0x1d')]['countDocuments']({'guild':_0x35920f[a38_0x46d3('0x17')]['id']});if(_0x3d9c39>=constants[a38_0x46d3('0xd')][a38_0x46d3('0x1c')]){const _0x3ed465=await omnic[a38_0x46d3('0x7')](_0x35920f[a38_0x46d3('0x17')])[a38_0x46d3('0xa')](()=>{});if(_0x3ed465){if(_0x3ed465===omnic[a38_0x46d3('0x36')][a38_0x46d3('0x3a')]&&_0x3d9c39>=constants[a38_0x46d3('0xd')]['GOLD'][a38_0x46d3('0x1c')])throw new errors[(a38_0x46d3('0xe'))](errors[a38_0x46d3('0x26')][a38_0x46d3('0x6')],this[a38_0x46d3('0x25')][a38_0x46d3('0x38')][a38_0x46d3('0x2d')](_0x35920f[a38_0x46d3('0x17')][a38_0x46d3('0x39')]['language'],'errors','membershipLimitTriggers',constants[a38_0x46d3('0xd')][a38_0x46d3('0x3a')][a38_0x46d3('0x1c')]));else{if(_0x3ed465===omnic[a38_0x46d3('0x36')][a38_0x46d3('0x1f')]&&_0x3d9c39>=constants[a38_0x46d3('0xd')][a38_0x46d3('0x1f')]['TRIGGERS'])throw new errors[(a38_0x46d3('0xe'))](errors[a38_0x46d3('0x26')][a38_0x46d3('0x6')],this['client'][a38_0x46d3('0x38')][a38_0x46d3('0x2d')](_0x35920f[a38_0x46d3('0x17')][a38_0x46d3('0x39')][a38_0x46d3('0x3d')],'errors',a38_0x46d3('0x9'),constants[a38_0x46d3('0xd')][a38_0x46d3('0x1f')][a38_0x46d3('0x1c')]));}}else throw new errors[(a38_0x46d3('0xe'))](errors[a38_0x46d3('0x26')][a38_0x46d3('0x4')],this[a38_0x46d3('0x25')][a38_0x46d3('0x38')][a38_0x46d3('0x2d')](_0x35920f['guild'][a38_0x46d3('0x39')][a38_0x46d3('0x3d')],'errors',a38_0x46d3('0x19'),constants['LIMITS'][a38_0x46d3('0x1c')]));}}const _0x1fea8e=_0x58ba7c[a38_0x46d3('0x1a')][a38_0x46d3('0xc')]('\x20'),_0xf6bc10=[{'name':a38_0x46d3('0x37'),'value':_0x1fea8e,'inline':!![]}];let _0x68d1c3;_0x58ba7c['_'][a38_0x46d3('0x22')]&&(_0x68d1c3=embeds[a38_0x46d3('0x3e')](_0x58ba7c['_'][a38_0x46d3('0xc')]('\x20')),_0xf6bc10[a38_0x46d3('0x0')]({'name':a38_0x46d3('0x5'),'value':a38_0x46d3('0x3b')+JSON['stringify'](_0x68d1c3)+a38_0x46d3('0x3c')}));let _0x54f9de;if(_0x58ba7c[a38_0x46d3('0x32')]){const _0x2f1e9a=emojis['parseEmoji'](_0x58ba7c[a38_0x46d3('0x32')]);_0x2f1e9a&&(_0x54f9de=_0x2f1e9a['value'],_0xf6bc10['push']({'name':a38_0x46d3('0x8'),'value':_0x58ba7c[a38_0x46d3('0x32')]}));}return await Trigger_1[a38_0x46d3('0x1d')][a38_0x46d3('0x2e')]({'guild':_0x35920f[a38_0x46d3('0x17')]['id'],'trigger':_0x1fea8e,'responseMessage':_0x68d1c3,'responseReaction':_0x54f9de}),await _0x35920f[a38_0x46d3('0xb')]['send']({'embed':{'color':tesseract_1[a38_0x46d3('0x1')][a38_0x46d3('0x2a')][a38_0x46d3('0x30')],'description':this[a38_0x46d3('0x25')][a38_0x46d3('0x38')][a38_0x46d3('0x2d')](_0x35920f[a38_0x46d3('0x17')]['document'][a38_0x46d3('0x3d')],a38_0x46d3('0x11'),a38_0x46d3('0x2f'),_0x35920f[a38_0x46d3('0x1b')][a38_0x46d3('0xf')]),'fields':_0xf6bc10}})[a38_0x46d3('0xa')](()=>{});}const _0x36b26f=await Trigger_1[a38_0x46d3('0x1d')]['find']({'guild':_0x35920f[a38_0x46d3('0x17')]['id']});return await _0x35920f[a38_0x46d3('0xb')][a38_0x46d3('0x3f')]({'embed':{'color':tesseract_1['Constants'][a38_0x46d3('0x2a')][a38_0x46d3('0x20')],'description':this[a38_0x46d3('0x25')][a38_0x46d3('0x38')]['getString'](_0x35920f[a38_0x46d3('0x17')][a38_0x46d3('0x39')]['language'],a38_0x46d3('0x11'),'triggersList'),'fields':_0x36b26f['map'](_0x39a4e9=>({'name':_0x39a4e9[a38_0x46d3('0x2c')],'value':(_0x39a4e9['responseMessage']?'Message\x20Response':'')+'\x0a'+(_0x39a4e9[a38_0x46d3('0x18')]?a38_0x46d3('0x34'):'')}))}})[a38_0x46d3('0xa')](()=>{});};}};
const a84_0x3ac1=['RED','../../utils/omnic','_id','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','find','../../models/Role','author','NO_ROLES_FOR_LEVEL','Level\x20','roleLevelClear','send','info','language','fetchDocument','IRIS','clamp','get','exports','level','client','It\x20allows\x20you\x20to\x20add\x20roles\x20to\x20a\x20level.\x20When\x20members\x20reach\x20that\x20level,\x20they\x27ll\x20be\x20awarded\x20those\x20roles.','join','resolveRole','Roles','length','BASTION_ERROR_TYPE','default','COLORS','membershipLimitRoleLevels','LIMITED_PREMIUM_MEMBERSHIP','exec','createDocument','tag','LIMITS','updateMany','../../utils/numbers','Command','push','document','cache','user','roleNotFound','channel','premiumRoleLevels','locale','../../utils/errors','remove','getString','GOLD','constructor','DiscordError','ROLE_LEVELS','countDocuments','membershipLimitLevelRoles','map','name','has','errors','roles','PremiumTier','roleLevelAdd','MANAGE_ROLES','ROLES_PER_LEVEL','levelUpRoles\x20--level\x20NUMBER','PREMIUM_MEMBERSHIP_REQUIRED','Constants','resolver','save','guild','distinct','catch','../../utils/constants','@bastion/tesseract','role','PLATINUM'];(function(_0x2c64fe,_0x3ac12e){const _0x5c0969=function(_0xb4a87b){while(--_0xb4a87b){_0x2c64fe['push'](_0x2c64fe['shift']());}},_0x37b386=function(){const _0x5dbac4={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x47c07f,_0x20e74b,_0x10c27e,_0x2af45b){_0x2af45b=_0x2af45b||{};let _0x112cb8=_0x20e74b+'='+_0x10c27e,_0x52ae5f=0x0;for(let _0x4e4ab8=0x0,_0x5868db=_0x47c07f['length'];_0x4e4ab8<_0x5868db;_0x4e4ab8++){const _0x224a31=_0x47c07f[_0x4e4ab8];_0x112cb8+=';\x20'+_0x224a31;const _0x446e00=_0x47c07f[_0x224a31];_0x47c07f['push'](_0x446e00),_0x5868db=_0x47c07f['length'],_0x446e00!==!![]&&(_0x112cb8+='='+_0x446e00);}_0x2af45b['cookie']=_0x112cb8;},'removeCookie':function(){return'dev';},'getCookie':function(_0x320837,_0x3e45d1){_0x320837=_0x320837||function(_0x54b3ae){return _0x54b3ae;};const _0x34118a=_0x320837(new RegExp('(?:^|;\x20)'+_0x3e45d1['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x2d894f=function(_0x47f385,_0x4596f5){_0x47f385(++_0x4596f5);};return _0x2d894f(_0x5c0969,_0x3ac12e),_0x34118a?decodeURIComponent(_0x34118a[0x1]):undefined;}},_0x62f011=function(){const _0x5adf79=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x5adf79['test'](_0x5dbac4['removeCookie']['toString']());};_0x5dbac4['updateCookie']=_0x62f011;let _0x4c7772='';const _0x29bff8=_0x5dbac4['updateCookie']();if(!_0x29bff8)_0x5dbac4['setCookie'](['*'],'counter',0x1);else _0x29bff8?_0x4c7772=_0x5dbac4['getCookie'](null,'counter'):_0x5dbac4['removeCookie']();};_0x37b386();}(a84_0x3ac1,0x98));const a84_0x5c09=function(_0x2c64fe,_0x3ac12e){_0x2c64fe=_0x2c64fe-0x0;let _0x5c0969=a84_0x3ac1[_0x2c64fe];return _0x5c0969;};const _0x3ff276=a84_0x5c09,a84_0x5dbac4=function(){let _0x4c7772=!![];return function(_0x29bff8,_0x47c07f){const _0x20e74b=_0x4c7772?function(){if(_0x47c07f){const _0x10c27e=_0x47c07f['apply'](_0x29bff8,arguments);return _0x47c07f=null,_0x10c27e;}}:function(){};return _0x4c7772=![],_0x20e74b;};}(),a84_0xb4a87b=a84_0x5dbac4(this,function(){const _0x2af45b=function(){const _0x130d13=a84_0x5c09,_0x112cb8=_0x2af45b['constructor']('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[_0x130d13('0x2f')](_0x130d13('0x1'));return!_0x112cb8['test'](a84_0xb4a87b);};return _0x2af45b();});a84_0xb4a87b();'use strict';const tesseract_1=require(_0x3ff276('0x46')),Role_1=require(_0x3ff276('0x3')),constants=require(_0x3ff276('0x45')),errors=require(_0x3ff276('0x2b')),gamification=require('../../utils/gamification'),numbers=require(_0x3ff276('0x21')),omnic=require(_0x3ff276('0x4a'));module[_0x3ff276('0xf')]=class LevelUpRolesCommand extends tesseract_1[_0x3ff276('0x22')]{constructor(){const _0x5cb1bc=_0x3ff276;super('levelUpRoles',{'description':_0x5cb1bc('0x12'),'triggers':[],'arguments':{'array':[_0x5cb1bc('0x47')],'boolean':[_0x5cb1bc('0x2c')],'string':[_0x5cb1bc('0x47')],'number':[_0x5cb1bc('0x10')],'coerce':{'level':_0x52ae5f=>numbers[_0x5cb1bc('0xd')](_0x52ae5f,0x1,gamification['MAX_LEVEL'])}},'scope':_0x5cb1bc('0x42'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[_0x5cb1bc('0x3b')],'userPermissions':[_0x5cb1bc('0x3b')],'syntax':['levelUpRoles',_0x5cb1bc('0x3d'),'levelUpRoles\x20--level\x20NUMBER\x20--role\x20ROLE','levelUpRoles\x20--level\x20NUMBER\x20--remove']}),this[_0x5cb1bc('0x1c')]=async(_0x4e4ab8,_0x5868db)=>{const _0x2d0115=_0x5cb1bc;if(_0x5868db['level']){if(_0x5868db[_0x2d0115('0x47')]){if(constants['isPublicBastion'](this[_0x2d0115('0x11')][_0x2d0115('0x26')])){const _0x54b3ae=await omnic['fetchPremiumTier'](_0x4e4ab8['guild'])[_0x2d0115('0x44')](()=>{}),_0x47f385=await Role_1[_0x2d0115('0x18')][_0x2d0115('0x43')](_0x2d0115('0x10'),{'guild':_0x4e4ab8['guild']['id'],'level':{'$exists':!![],'$ne':null}});if(_0x54b3ae){if(_0x54b3ae===omnic[_0x2d0115('0x39')][_0x2d0115('0x2e')]&&_0x47f385[_0x2d0115('0x16')]>=constants[_0x2d0115('0x1f')][_0x2d0115('0x2e')][_0x2d0115('0x31')])throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][_0x2d0115('0x1b')],this[_0x2d0115('0x11')][_0x2d0115('0x2a')][_0x2d0115('0x2d')](_0x4e4ab8[_0x2d0115('0x42')][_0x2d0115('0x24')][_0x2d0115('0xa')],_0x2d0115('0x37'),_0x2d0115('0x1a'),constants[_0x2d0115('0x1f')][_0x2d0115('0x2e')][_0x2d0115('0x31')]));else{if(_0x54b3ae===omnic[_0x2d0115('0x39')][_0x2d0115('0x48')]&&_0x47f385['length']>=constants[_0x2d0115('0x1f')][_0x2d0115('0x48')][_0x2d0115('0x31')])throw new errors[(_0x2d0115('0x30'))](errors[_0x2d0115('0x17')][_0x2d0115('0x1b')],this[_0x2d0115('0x11')][_0x2d0115('0x2a')][_0x2d0115('0x2d')](_0x4e4ab8[_0x2d0115('0x42')]['document'][_0x2d0115('0xa')],_0x2d0115('0x37'),_0x2d0115('0x1a'),constants['LIMITS'][_0x2d0115('0x48')][_0x2d0115('0x31')]));}}else{if(_0x47f385[_0x2d0115('0x16')]>=constants[_0x2d0115('0x1f')]['ROLE_LEVELS'])throw new errors[(_0x2d0115('0x30'))](errors[_0x2d0115('0x17')]['PREMIUM_MEMBERSHIP_REQUIRED'],this[_0x2d0115('0x11')][_0x2d0115('0x2a')][_0x2d0115('0x2d')](_0x4e4ab8[_0x2d0115('0x42')][_0x2d0115('0x24')]['language'],_0x2d0115('0x37'),_0x2d0115('0x29'),constants[_0x2d0115('0x1f')][_0x2d0115('0x31')]));}const _0x4596f5=await Role_1[_0x2d0115('0x18')][_0x2d0115('0x32')]({'guild':_0x4e4ab8[_0x2d0115('0x42')]['id'],'level':_0x5868db[_0x2d0115('0x10')]});if(_0x54b3ae){if(_0x54b3ae===omnic[_0x2d0115('0x39')]['GOLD']&&_0x4596f5>=constants[_0x2d0115('0x1f')][_0x2d0115('0x2e')][_0x2d0115('0x3c')])throw new errors['DiscordError'](errors[_0x2d0115('0x17')]['LIMITED_PREMIUM_MEMBERSHIP'],this[_0x2d0115('0x11')]['locale']['getString'](_0x4e4ab8['guild'][_0x2d0115('0x24')][_0x2d0115('0xa')],_0x2d0115('0x37'),'membershipLimitLevelRoles',constants['LIMITS'][_0x2d0115('0x2e')][_0x2d0115('0x3c')]));else{if(_0x54b3ae===omnic[_0x2d0115('0x39')]['PLATINUM']&&_0x4596f5>=constants['LIMITS'][_0x2d0115('0x48')]['ROLES_PER_LEVEL'])throw new errors[(_0x2d0115('0x30'))](errors['BASTION_ERROR_TYPE'][_0x2d0115('0x1b')],this['client'][_0x2d0115('0x2a')]['getString'](_0x4e4ab8[_0x2d0115('0x42')][_0x2d0115('0x24')]['language'],'errors',_0x2d0115('0x33'),constants[_0x2d0115('0x1f')]['PLATINUM'][_0x2d0115('0x3c')]));}}else{if(_0x4596f5>=constants['LIMITS']['ROLES_PER_LEVEL'])throw new errors[(_0x2d0115('0x30'))](errors[_0x2d0115('0x17')][_0x2d0115('0x3e')],this['client'][_0x2d0115('0x2a')]['getString'](_0x4e4ab8[_0x2d0115('0x42')][_0x2d0115('0x24')][_0x2d0115('0xa')],_0x2d0115('0x37'),'premiumLevelRoles',constants['LIMITS']['ROLES_PER_LEVEL']));}}const _0x34118a=this[_0x2d0115('0x11')][_0x2d0115('0x40')][_0x2d0115('0x14')](_0x4e4ab8[_0x2d0115('0x42')],_0x5868db[_0x2d0115('0x47')]['join']('\x20'));if(!_0x34118a)throw new errors[(_0x2d0115('0x30'))](errors[_0x2d0115('0x17')]['ROLE_NOT_FOUND'],this[_0x2d0115('0x11')][_0x2d0115('0x2a')]['getString'](_0x4e4ab8[_0x2d0115('0x42')]['document']['language'],_0x2d0115('0x37'),_0x2d0115('0x27')));let _0x2d894f=await _0x34118a[_0x2d0115('0xb')]();return!_0x2d894f&&(_0x2d894f=await _0x34118a[_0x2d0115('0x1d')]()),_0x2d894f[_0x2d0115('0x10')]=_0x5868db['level'],await _0x2d894f[_0x2d0115('0x41')](),await _0x4e4ab8[_0x2d0115('0x28')][_0x2d0115('0x8')]({'embed':{'color':tesseract_1[_0x2d0115('0x3f')][_0x2d0115('0x19')]['GREEN'],'description':this[_0x2d0115('0x11')][_0x2d0115('0x2a')]['getString'](_0x4e4ab8[_0x2d0115('0x42')][_0x2d0115('0x24')][_0x2d0115('0xa')],_0x2d0115('0x9'),_0x2d0115('0x3a'),_0x4e4ab8[_0x2d0115('0x4')]['tag'],_0x34118a[_0x2d0115('0x35')],_0x5868db['level'])}})[_0x2d0115('0x44')](()=>{});}if(_0x5868db['remove'])return await Role_1[_0x2d0115('0x18')][_0x2d0115('0x20')]({'guild':_0x4e4ab8[_0x2d0115('0x42')]['id'],'level':_0x5868db[_0x2d0115('0x10')]},{'$unset':{'level':0x1}}),await _0x4e4ab8[_0x2d0115('0x28')][_0x2d0115('0x8')]({'embed':{'color':tesseract_1[_0x2d0115('0x3f')][_0x2d0115('0x19')][_0x2d0115('0x49')],'description':this['client'][_0x2d0115('0x2a')][_0x2d0115('0x2d')](_0x4e4ab8['guild'][_0x2d0115('0x24')][_0x2d0115('0xa')],_0x2d0115('0x9'),_0x2d0115('0x7'),_0x4e4ab8['author'][_0x2d0115('0x1e')],_0x5868db[_0x2d0115('0x10')])}})[_0x2d0115('0x44')](()=>{});const _0x320837=await Role_1[_0x2d0115('0x18')][_0x2d0115('0x2')]({'guild':_0x4e4ab8[_0x2d0115('0x42')]['id'],'level':_0x5868db['level']});if(!_0x320837['length'])throw new Error(_0x2d0115('0x5'));const _0x3e45d1=this[_0x2d0115('0x11')][_0x2d0115('0x40')]['resolveRoles'](_0x4e4ab8[_0x2d0115('0x42')],_0x320837[_0x2d0115('0x34')](_0x5adf79=>_0x5adf79[_0x2d0115('0x0')]));return await _0x4e4ab8[_0x2d0115('0x28')][_0x2d0115('0x8')]({'embed':{'color':tesseract_1[_0x2d0115('0x3f')]['COLORS'][_0x2d0115('0xc')],'title':_0x2d0115('0x6')+_0x5868db[_0x2d0115('0x10')],'fields':[{'name':_0x2d0115('0x15'),'value':_0x3e45d1[_0x2d0115('0x34')](_0x72d758=>_0x72d758[_0x2d0115('0x35')])[_0x2d0115('0x13')]('\x0a')}]}})[_0x2d0115('0x44')](()=>{});}const _0x224a31=await Role_1[_0x2d0115('0x18')][_0x2d0115('0x2')]({'guild':_0x4e4ab8[_0x2d0115('0x42')]['id'],'level':{'$exists':!![],'$ne':null}});if(!_0x224a31['length'])throw new Error('NO_LEVEL_UP_ROLES');const _0x446e00={};for(const _0x1c59be of _0x224a31){_0x1c59be['level']in _0x446e00?_0x446e00[_0x1c59be[_0x2d0115('0x10')]][_0x2d0115('0x23')](_0x1c59be[_0x2d0115('0x0')]):_0x446e00[_0x1c59be[_0x2d0115('0x10')]]=[_0x1c59be[_0x2d0115('0x0')]];}return await _0x4e4ab8[_0x2d0115('0x28')][_0x2d0115('0x8')]({'embed':{'color':tesseract_1[_0x2d0115('0x3f')]['COLORS'][_0x2d0115('0xc')],'title':'Level-Up\x20Roles','fields':Object['keys'](_0x446e00)[_0x2d0115('0x34')](_0x2b20d9=>({'name':_0x2d0115('0x6')+_0x2b20d9,'value':_0x446e00[_0x2b20d9][_0x2d0115('0x34')](_0x12f1f7=>_0x4e4ab8[_0x2d0115('0x42')][_0x2d0115('0x38')][_0x2d0115('0x25')][_0x2d0115('0x36')](_0x12f1f7)?_0x4e4ab8[_0x2d0115('0x42')][_0x2d0115('0x38')]['cache'][_0x2d0115('0xe')](_0x12f1f7)[_0x2d0115('0x35')]:_0x12f1f7)[_0x2d0115('0x13')](',\x20')}))}})[_0x2d0115('0x44')](()=>{});};}};
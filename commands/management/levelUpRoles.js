const a88_0xd876=['Level\x20','BASTION_ERROR_TYPE','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','ROLES_PER_LEVEL','default','DiscordError','constructor','../../utils/errors','../../utils/numbers','LIMITED_PREMIUM_MEMBERSHIP','exports','updateMany','getString','Constants','countDocuments','fetchDocument','join','_id','GOLD','cache','find','get','COLORS','IRIS','../../utils/constants','document','Roles','PREMIUM_MEMBERSHIP_REQUIRED','roleNotFound','membershipLimitLevelRoles','LIMITS','../../utils/omnic','membershipLimitRoleLevels','../../utils/gamification','remove','keys','user','info','level','NO_ROLES_FOR_LEVEL','ROLE_NOT_FOUND','resolveRole','levelUpRoles\x20--level\x20NUMBER\x20--role\x20ROLE','isPublicBastion','resolveRoles','errors','levelUpRoles\x20--level\x20NUMBER\x20--remove','name','guild','resolver','premiumRoleLevels','save','catch','roles','has','clamp','createDocument','MAX_LEVEL','test','length','PLATINUM','tag','client','ROLE_LEVELS','MANAGE_ROLES','levelUpRoles','language','GREEN','return\x20/\x22\x20+\x20this\x20+\x20\x22/','apply','role','channel','send','premiumLevelRoles','roleLevelClear','fetchPremiumTier','@bastion/tesseract','PremiumTier','locale','author','map'];(function(_0xce85ce,_0x5c90ec){const _0xd876cd=function(_0x484638){while(--_0x484638){_0xce85ce['push'](_0xce85ce['shift']());}},_0x357ef8=function(){const _0x6d2646={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3156bb,_0x536371,_0x4d1a26,_0x143852){_0x143852=_0x143852||{};let _0x4e44a0=_0x536371+'='+_0x4d1a26,_0x1d53ec=0x0;for(let _0x9b619f=0x0,_0x33e2ef=_0x3156bb['length'];_0x9b619f<_0x33e2ef;_0x9b619f++){const _0x6fa6a2=_0x3156bb[_0x9b619f];_0x4e44a0+=';\x20'+_0x6fa6a2;const _0x5f0179=_0x3156bb[_0x6fa6a2];_0x3156bb['push'](_0x5f0179),_0x33e2ef=_0x3156bb['length'],_0x5f0179!==!![]&&(_0x4e44a0+='='+_0x5f0179);}_0x143852['cookie']=_0x4e44a0;},'removeCookie':function(){return'dev';},'getCookie':function(_0xb06d6c,_0x106f1c){_0xb06d6c=_0xb06d6c||function(_0x34ecda){return _0x34ecda;};const _0x4e4614=_0xb06d6c(new RegExp('(?:^|;\x20)'+_0x106f1c['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0xf3fe56=function(_0x2065cb,_0x138105){_0x2065cb(++_0x138105);};return _0xf3fe56(_0xd876cd,_0x5c90ec),_0x4e4614?decodeURIComponent(_0x4e4614[0x1]):undefined;}},_0x32f432=function(){const _0x28061b=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x28061b['test'](_0x6d2646['removeCookie']['toString']());};_0x6d2646['updateCookie']=_0x32f432;let _0x3fcecf='';const _0x294d7d=_0x6d2646['updateCookie']();if(!_0x294d7d)_0x6d2646['setCookie'](['*'],'counter',0x1);else _0x294d7d?_0x3fcecf=_0x6d2646['getCookie'](null,'counter'):_0x6d2646['removeCookie']();};_0x357ef8();}(a88_0xd876,0x107));const a88_0x357e=function(_0xce85ce,_0x5c90ec){_0xce85ce=_0xce85ce-0x148;let _0xd876cd=a88_0xd876[_0xce85ce];return _0xd876cd;};const a88_0x1af164=a88_0x357e,a88_0x32f432=function(){let _0x294d7d=!![];return function(_0x3156bb,_0x536371){const _0x4d1a26=_0x294d7d?function(){const _0x312951=a88_0x357e;if(_0x536371){const _0x143852=_0x536371[_0x312951(0x179)](_0x3156bb,arguments);return _0x536371=null,_0x143852;}}:function(){};return _0x294d7d=![],_0x4d1a26;};}(),a88_0x6d2646=a88_0x32f432(this,function(){const _0x4e44a0=function(){const _0x104f48=a88_0x357e,_0x1d53ec=_0x4e44a0[_0x104f48(0x18b)](_0x104f48(0x178))()[_0x104f48(0x18b)](_0x104f48(0x187));return!_0x1d53ec[_0x104f48(0x16e)](a88_0x6d2646);};return _0x4e44a0();});a88_0x6d2646();'use strict';const tesseract_1=require(a88_0x1af164(0x180)),Role_1=require('../../models/Role'),constants=require(a88_0x1af164(0x14c)),errors=require(a88_0x1af164(0x18c)),gamification=require(a88_0x1af164(0x155)),numbers=require(a88_0x1af164(0x18d)),omnic=require(a88_0x1af164(0x153));module[a88_0x1af164(0x18f)]=class LevelUpRolesCommand extends tesseract_1['Command']{constructor(){const _0x2f6aaf=a88_0x1af164;super('levelUpRoles',{'description':'It\x20allows\x20you\x20to\x20add\x20roles\x20to\x20a\x20level.\x20When\x20members\x20reach\x20that\x20level,\x20they\x27ll\x20be\x20awarded\x20those\x20roles.','triggers':[],'arguments':{'array':[_0x2f6aaf(0x17a)],'boolean':[_0x2f6aaf(0x156)],'string':[_0x2f6aaf(0x17a)],'number':['level'],'coerce':{'level':_0x9b619f=>numbers[_0x2f6aaf(0x16b)](_0x9b619f,0x1,gamification[_0x2f6aaf(0x16d)])}},'scope':_0x2f6aaf(0x164),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[_0x2f6aaf(0x174)],'userPermissions':[_0x2f6aaf(0x174)],'syntax':[_0x2f6aaf(0x175),'levelUpRoles\x20--level\x20NUMBER',_0x2f6aaf(0x15e),_0x2f6aaf(0x162)]}),this['exec']=async(_0x33e2ef,_0x6fa6a2)=>{const _0x16631f=_0x2f6aaf;if(_0x6fa6a2[_0x16631f(0x15a)]){if(_0x6fa6a2['role']){if(constants[_0x16631f(0x15f)](this[_0x16631f(0x172)][_0x16631f(0x158)])){const _0x2065cb=await omnic[_0x16631f(0x17f)](_0x33e2ef['guild'])[_0x16631f(0x168)](()=>{}),_0x138105=await Role_1['default']['distinct'](_0x16631f(0x15a),{'guild':_0x33e2ef[_0x16631f(0x164)]['id'],'level':{'$exists':!![],'$ne':null}});if(_0x2065cb){if(_0x2065cb===omnic[_0x16631f(0x181)][_0x16631f(0x197)]&&_0x138105['length']>=constants[_0x16631f(0x152)][_0x16631f(0x197)][_0x16631f(0x173)])throw new errors[(_0x16631f(0x18a))](errors[_0x16631f(0x186)][_0x16631f(0x18e)],this[_0x16631f(0x172)]['locale']['getString'](_0x33e2ef[_0x16631f(0x164)][_0x16631f(0x14d)][_0x16631f(0x176)],_0x16631f(0x161),_0x16631f(0x154),constants[_0x16631f(0x152)]['GOLD'][_0x16631f(0x173)]));else{if(_0x2065cb===omnic[_0x16631f(0x181)]['PLATINUM']&&_0x138105[_0x16631f(0x16f)]>=constants[_0x16631f(0x152)][_0x16631f(0x170)][_0x16631f(0x173)])throw new errors['DiscordError'](errors[_0x16631f(0x186)][_0x16631f(0x18e)],this[_0x16631f(0x172)][_0x16631f(0x182)]['getString'](_0x33e2ef[_0x16631f(0x164)][_0x16631f(0x14d)][_0x16631f(0x176)],'errors',_0x16631f(0x154),constants[_0x16631f(0x152)][_0x16631f(0x170)]['ROLE_LEVELS']));}}else{if(_0x138105['length']>=constants[_0x16631f(0x152)]['ROLE_LEVELS'])throw new errors['DiscordError'](errors[_0x16631f(0x186)][_0x16631f(0x14f)],this[_0x16631f(0x172)][_0x16631f(0x182)][_0x16631f(0x191)](_0x33e2ef[_0x16631f(0x164)][_0x16631f(0x14d)]['language'],_0x16631f(0x161),_0x16631f(0x166),constants[_0x16631f(0x152)]['ROLE_LEVELS']));}const _0x28061b=await Role_1[_0x16631f(0x189)][_0x16631f(0x193)]({'guild':_0x33e2ef[_0x16631f(0x164)]['id'],'level':_0x6fa6a2['level']});if(_0x2065cb){if(_0x2065cb===omnic[_0x16631f(0x181)]['GOLD']&&_0x28061b>=constants['LIMITS'][_0x16631f(0x197)][_0x16631f(0x188)])throw new errors[(_0x16631f(0x18a))](errors[_0x16631f(0x186)][_0x16631f(0x18e)],this[_0x16631f(0x172)][_0x16631f(0x182)][_0x16631f(0x191)](_0x33e2ef['guild']['document'][_0x16631f(0x176)],'errors',_0x16631f(0x151),constants['LIMITS'][_0x16631f(0x197)][_0x16631f(0x188)]));else{if(_0x2065cb===omnic[_0x16631f(0x181)][_0x16631f(0x170)]&&_0x28061b>=constants[_0x16631f(0x152)][_0x16631f(0x170)][_0x16631f(0x188)])throw new errors[(_0x16631f(0x18a))](errors[_0x16631f(0x186)]['LIMITED_PREMIUM_MEMBERSHIP'],this[_0x16631f(0x172)][_0x16631f(0x182)][_0x16631f(0x191)](_0x33e2ef['guild'][_0x16631f(0x14d)][_0x16631f(0x176)],'errors','membershipLimitLevelRoles',constants[_0x16631f(0x152)][_0x16631f(0x170)][_0x16631f(0x188)]));}}else{if(_0x28061b>=constants[_0x16631f(0x152)][_0x16631f(0x188)])throw new errors[(_0x16631f(0x18a))](errors[_0x16631f(0x186)][_0x16631f(0x14f)],this[_0x16631f(0x172)][_0x16631f(0x182)]['getString'](_0x33e2ef[_0x16631f(0x164)]['document'][_0x16631f(0x176)],_0x16631f(0x161),_0x16631f(0x17d),constants[_0x16631f(0x152)]['ROLES_PER_LEVEL']));}}const _0xf3fe56=this[_0x16631f(0x172)][_0x16631f(0x165)][_0x16631f(0x15d)](_0x33e2ef[_0x16631f(0x164)],_0x6fa6a2[_0x16631f(0x17a)][_0x16631f(0x195)]('\x20'));if(!_0xf3fe56)throw new errors[(_0x16631f(0x18a))](errors[_0x16631f(0x186)][_0x16631f(0x15c)],this[_0x16631f(0x172)][_0x16631f(0x182)]['getString'](_0x33e2ef[_0x16631f(0x164)]['document'][_0x16631f(0x176)],'errors',_0x16631f(0x150)));let _0x34ecda=await _0xf3fe56[_0x16631f(0x194)]();return!_0x34ecda&&(_0x34ecda=await _0xf3fe56[_0x16631f(0x16c)]()),_0x34ecda[_0x16631f(0x15a)]=_0x6fa6a2['level'],await _0x34ecda[_0x16631f(0x167)](),await _0x33e2ef[_0x16631f(0x17b)][_0x16631f(0x17c)]({'embed':{'color':tesseract_1[_0x16631f(0x192)][_0x16631f(0x14a)][_0x16631f(0x177)],'description':this[_0x16631f(0x172)][_0x16631f(0x182)][_0x16631f(0x191)](_0x33e2ef[_0x16631f(0x164)][_0x16631f(0x14d)][_0x16631f(0x176)],_0x16631f(0x159),'roleLevelAdd',_0x33e2ef[_0x16631f(0x183)][_0x16631f(0x171)],_0xf3fe56[_0x16631f(0x163)],_0x6fa6a2[_0x16631f(0x15a)])}})[_0x16631f(0x168)](()=>{});}if(_0x6fa6a2[_0x16631f(0x156)])return await Role_1[_0x16631f(0x189)][_0x16631f(0x190)]({'guild':_0x33e2ef[_0x16631f(0x164)]['id'],'level':_0x6fa6a2[_0x16631f(0x15a)]},{'$unset':{'level':0x1}}),await _0x33e2ef[_0x16631f(0x17b)][_0x16631f(0x17c)]({'embed':{'color':tesseract_1[_0x16631f(0x192)]['COLORS']['RED'],'description':this[_0x16631f(0x172)][_0x16631f(0x182)][_0x16631f(0x191)](_0x33e2ef[_0x16631f(0x164)][_0x16631f(0x14d)][_0x16631f(0x176)],'info',_0x16631f(0x17e),_0x33e2ef['author'][_0x16631f(0x171)],_0x6fa6a2['level'])}})[_0x16631f(0x168)](()=>{});const _0x106f1c=await Role_1[_0x16631f(0x189)][_0x16631f(0x148)]({'guild':_0x33e2ef[_0x16631f(0x164)]['id'],'level':_0x6fa6a2['level']});if(!_0x106f1c[_0x16631f(0x16f)])throw new Error(_0x16631f(0x15b));const _0x4e4614=this[_0x16631f(0x172)][_0x16631f(0x165)][_0x16631f(0x160)](_0x33e2ef['guild'],_0x106f1c[_0x16631f(0x184)](_0x11533c=>_0x11533c[_0x16631f(0x196)]));return await _0x33e2ef[_0x16631f(0x17b)]['send']({'embed':{'color':tesseract_1[_0x16631f(0x192)][_0x16631f(0x14a)][_0x16631f(0x14b)],'title':'Level\x20'+_0x6fa6a2[_0x16631f(0x15a)],'fields':[{'name':_0x16631f(0x14e),'value':_0x4e4614[_0x16631f(0x184)](_0x3122b1=>_0x3122b1[_0x16631f(0x163)])[_0x16631f(0x195)]('\x0a')}]}})['catch'](()=>{});}const _0x5f0179=await Role_1['default'][_0x16631f(0x148)]({'guild':_0x33e2ef['guild']['id'],'level':{'$exists':!![],'$ne':null}});if(!_0x5f0179[_0x16631f(0x16f)])throw new Error('NO_LEVEL_UP_ROLES');const _0xb06d6c={};for(const _0x76fbac of _0x5f0179){_0x76fbac['level']in _0xb06d6c?_0xb06d6c[_0x76fbac[_0x16631f(0x15a)]]['push'](_0x76fbac[_0x16631f(0x196)]):_0xb06d6c[_0x76fbac['level']]=[_0x76fbac[_0x16631f(0x196)]];}return await _0x33e2ef[_0x16631f(0x17b)]['send']({'embed':{'color':tesseract_1['Constants'][_0x16631f(0x14a)][_0x16631f(0x14b)],'title':'Level-Up\x20Roles','fields':Object[_0x16631f(0x157)](_0xb06d6c)[_0x16631f(0x184)](_0x207d3a=>({'name':_0x16631f(0x185)+_0x207d3a,'value':_0xb06d6c[_0x207d3a][_0x16631f(0x184)](_0x127959=>_0x33e2ef[_0x16631f(0x164)]['roles']['cache'][_0x16631f(0x16a)](_0x127959)?_0x33e2ef[_0x16631f(0x164)][_0x16631f(0x169)][_0x16631f(0x198)][_0x16631f(0x149)](_0x127959)[_0x16631f(0x163)]:_0x127959)[_0x16631f(0x195)](',\x20')}))}})[_0x16631f(0x168)](()=>{});};}};
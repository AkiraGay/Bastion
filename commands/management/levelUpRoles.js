const a88_0xfd9b=['keys','MAX_LEVEL','roleLevelClear','user','../../utils/numbers','guild','roleNotFound','NO_LEVEL_UP_ROLES','membershipLimitLevelRoles','resolveRole','length','createDocument','BASTION_ERROR_TYPE','premiumRoleLevels','GREEN','levelUpRoles\x20--level\x20NUMBER\x20--remove','countDocuments','channel','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','tag','NO_ROLES_FOR_LEVEL','Command','map','getString','COLORS','remove','author','roleLevelAdd','levelUpRoles\x20--level\x20NUMBER','LIMITS','../../utils/errors','resolveRoles','find','../../utils/gamification','PLATINUM','_id','info','../../utils/constants','../../models/Role','premiumLevelRoles','exec','PREMIUM_MEMBERSHIP_REQUIRED','ROLES_PER_LEVEL','Level\x20','save','client','level','cache','join','Constants','roles','isPublicBastion','default','It\x20allows\x20you\x20to\x20add\x20roles\x20to\x20a\x20level.\x20When\x20members\x20reach\x20that\x20level,\x20they\x27ll\x20be\x20awarded\x20those\x20roles.','resolver','test','locale','name','../../utils/omnic','language','role','levelUpRoles','errors','get','push','constructor','LIMITED_PREMIUM_MEMBERSHIP','MANAGE_ROLES','GOLD','ROLE_NOT_FOUND','updateMany','Level-Up\x20Roles','document','DiscordError','send','membershipLimitRoleLevels','catch','ROLE_LEVELS','PremiumTier','levelUpRoles\x20--level\x20NUMBER\x20--role\x20ROLE','IRIS'];(function(_0x43dd25,_0xed44b9){const _0xfd9ba7=function(_0x44d2a){while(--_0x44d2a){_0x43dd25['push'](_0x43dd25['shift']());}},_0x451a11=function(){const _0x5b2288={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3f69d3,_0x5156ca,_0x5bb33a,_0x24f903){_0x24f903=_0x24f903||{};let _0x26be15=_0x5156ca+'='+_0x5bb33a,_0x11db59=0x0;for(let _0x3c1da0=0x0,_0x4ed6ef=_0x3f69d3['length'];_0x3c1da0<_0x4ed6ef;_0x3c1da0++){const _0x8ce281=_0x3f69d3[_0x3c1da0];_0x26be15+=';\x20'+_0x8ce281;const _0x337380=_0x3f69d3[_0x8ce281];_0x3f69d3['push'](_0x337380),_0x4ed6ef=_0x3f69d3['length'],_0x337380!==!![]&&(_0x26be15+='='+_0x337380);}_0x24f903['cookie']=_0x26be15;},'removeCookie':function(){return'dev';},'getCookie':function(_0xb5a74e,_0x91e1bd){_0xb5a74e=_0xb5a74e||function(_0x25480c){return _0x25480c;};const _0x275952=_0xb5a74e(new RegExp('(?:^|;\x20)'+_0x91e1bd['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x1698b3=function(_0x4afc7f,_0x397f02){_0x4afc7f(++_0x397f02);};return _0x1698b3(_0xfd9ba7,_0xed44b9),_0x275952?decodeURIComponent(_0x275952[0x1]):undefined;}},_0x3ca363=function(){const _0x156abe=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x156abe['test'](_0x5b2288['removeCookie']['toString']());};_0x5b2288['updateCookie']=_0x3ca363;let _0x347266='';const _0x330de1=_0x5b2288['updateCookie']();if(!_0x330de1)_0x5b2288['setCookie'](['*'],'counter',0x1);else _0x330de1?_0x347266=_0x5b2288['getCookie'](null,'counter'):_0x5b2288['removeCookie']();};_0x451a11();}(a88_0xfd9b,0x1ca));const a88_0x451a=function(_0x43dd25,_0xed44b9){_0x43dd25=_0x43dd25-0x177;let _0xfd9ba7=a88_0xfd9b[_0x43dd25];return _0xfd9ba7;};const a88_0x2fb8ea=a88_0x451a,a88_0x3ca363=function(){let _0x330de1=!![];return function(_0x3f69d3,_0x5156ca){const _0x5bb33a=_0x330de1?function(){if(_0x5156ca){const _0x24f903=_0x5156ca['apply'](_0x3f69d3,arguments);return _0x5156ca=null,_0x24f903;}}:function(){};return _0x330de1=![],_0x5bb33a;};}(),a88_0x5b2288=a88_0x3ca363(this,function(){const _0x26be15=function(){const _0x183ad7=a88_0x451a,_0x11db59=_0x26be15[_0x183ad7(0x183)]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()['constructor'](_0x183ad7(0x1a5));return!_0x11db59[_0x183ad7(0x179)](a88_0x5b2288);};return _0x26be15();});a88_0x5b2288();'use strict';const tesseract_1=require('@bastion/tesseract'),Role_1=require(a88_0x2fb8ea(0x1b9)),constants=require(a88_0x2fb8ea(0x1b8)),errors=require(a88_0x2fb8ea(0x1b1)),gamification=require(a88_0x2fb8ea(0x1b4)),numbers=require(a88_0x2fb8ea(0x197)),omnic=require(a88_0x2fb8ea(0x17c));module['exports']=class LevelUpRolesCommand extends tesseract_1[a88_0x2fb8ea(0x1a8)]{constructor(){const _0x5a073c=a88_0x2fb8ea;super(_0x5a073c(0x17f),{'description':_0x5a073c(0x177),'triggers':[],'arguments':{'array':['role'],'boolean':['remove'],'string':[_0x5a073c(0x17e)],'number':[_0x5a073c(0x1c1)],'coerce':{'level':_0x3c1da0=>numbers['clamp'](_0x3c1da0,0x1,gamification[_0x5a073c(0x194)])}},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[_0x5a073c(0x185)],'userPermissions':[_0x5a073c(0x185)],'syntax':['levelUpRoles',_0x5a073c(0x1af),_0x5a073c(0x191),_0x5a073c(0x1a2)]}),this[_0x5a073c(0x1bb)]=async(_0x4ed6ef,_0x8ce281)=>{const _0x49ad57=_0x5a073c;if(_0x8ce281[_0x49ad57(0x1c1)]){if(_0x8ce281[_0x49ad57(0x17e)]){if(constants[_0x49ad57(0x1c6)](this[_0x49ad57(0x1c0)][_0x49ad57(0x196)])){const _0x4afc7f=await omnic['fetchPremiumTier'](_0x4ed6ef['guild'])[_0x49ad57(0x18e)](()=>{}),_0x397f02=await Role_1[_0x49ad57(0x1c7)]['distinct'](_0x49ad57(0x1c1),{'guild':_0x4ed6ef[_0x49ad57(0x198)]['id'],'level':{'$exists':!![],'$ne':null}});if(_0x4afc7f){if(_0x4afc7f===omnic[_0x49ad57(0x190)][_0x49ad57(0x186)]&&_0x397f02[_0x49ad57(0x19d)]>=constants[_0x49ad57(0x1b0)][_0x49ad57(0x186)][_0x49ad57(0x18f)])throw new errors[(_0x49ad57(0x18b))](errors[_0x49ad57(0x19f)][_0x49ad57(0x184)],this[_0x49ad57(0x1c0)]['locale'][_0x49ad57(0x1aa)](_0x4ed6ef[_0x49ad57(0x198)][_0x49ad57(0x18a)][_0x49ad57(0x17d)],_0x49ad57(0x180),'membershipLimitRoleLevels',constants[_0x49ad57(0x1b0)]['GOLD'][_0x49ad57(0x18f)]));else{if(_0x4afc7f===omnic[_0x49ad57(0x190)]['PLATINUM']&&_0x397f02[_0x49ad57(0x19d)]>=constants[_0x49ad57(0x1b0)][_0x49ad57(0x1b5)][_0x49ad57(0x18f)])throw new errors[(_0x49ad57(0x18b))](errors[_0x49ad57(0x19f)]['LIMITED_PREMIUM_MEMBERSHIP'],this[_0x49ad57(0x1c0)][_0x49ad57(0x17a)]['getString'](_0x4ed6ef['guild'][_0x49ad57(0x18a)][_0x49ad57(0x17d)],_0x49ad57(0x180),_0x49ad57(0x18d),constants['LIMITS'][_0x49ad57(0x1b5)]['ROLE_LEVELS']));}}else{if(_0x397f02[_0x49ad57(0x19d)]>=constants[_0x49ad57(0x1b0)][_0x49ad57(0x18f)])throw new errors[(_0x49ad57(0x18b))](errors[_0x49ad57(0x19f)][_0x49ad57(0x1bc)],this[_0x49ad57(0x1c0)][_0x49ad57(0x17a)][_0x49ad57(0x1aa)](_0x4ed6ef[_0x49ad57(0x198)][_0x49ad57(0x18a)][_0x49ad57(0x17d)],_0x49ad57(0x180),_0x49ad57(0x1a0),constants[_0x49ad57(0x1b0)][_0x49ad57(0x18f)]));}const _0x156abe=await Role_1[_0x49ad57(0x1c7)][_0x49ad57(0x1a3)]({'guild':_0x4ed6ef['guild']['id'],'level':_0x8ce281['level']});if(_0x4afc7f){if(_0x4afc7f===omnic[_0x49ad57(0x190)]['GOLD']&&_0x156abe>=constants[_0x49ad57(0x1b0)][_0x49ad57(0x186)][_0x49ad57(0x1bd)])throw new errors[(_0x49ad57(0x18b))](errors[_0x49ad57(0x19f)][_0x49ad57(0x184)],this[_0x49ad57(0x1c0)]['locale'][_0x49ad57(0x1aa)](_0x4ed6ef['guild'][_0x49ad57(0x18a)][_0x49ad57(0x17d)],'errors',_0x49ad57(0x19b),constants[_0x49ad57(0x1b0)][_0x49ad57(0x186)][_0x49ad57(0x1bd)]));else{if(_0x4afc7f===omnic[_0x49ad57(0x190)][_0x49ad57(0x1b5)]&&_0x156abe>=constants[_0x49ad57(0x1b0)]['PLATINUM'][_0x49ad57(0x1bd)])throw new errors['DiscordError'](errors[_0x49ad57(0x19f)][_0x49ad57(0x184)],this[_0x49ad57(0x1c0)][_0x49ad57(0x17a)][_0x49ad57(0x1aa)](_0x4ed6ef[_0x49ad57(0x198)][_0x49ad57(0x18a)][_0x49ad57(0x17d)],_0x49ad57(0x180),_0x49ad57(0x19b),constants[_0x49ad57(0x1b0)][_0x49ad57(0x1b5)][_0x49ad57(0x1bd)]));}}else{if(_0x156abe>=constants[_0x49ad57(0x1b0)]['ROLES_PER_LEVEL'])throw new errors[(_0x49ad57(0x18b))](errors[_0x49ad57(0x19f)]['PREMIUM_MEMBERSHIP_REQUIRED'],this[_0x49ad57(0x1c0)]['locale'][_0x49ad57(0x1aa)](_0x4ed6ef[_0x49ad57(0x198)]['document']['language'],_0x49ad57(0x180),_0x49ad57(0x1ba),constants['LIMITS'][_0x49ad57(0x1bd)]));}}const _0x1698b3=this[_0x49ad57(0x1c0)][_0x49ad57(0x178)][_0x49ad57(0x19c)](_0x4ed6ef[_0x49ad57(0x198)],_0x8ce281[_0x49ad57(0x17e)][_0x49ad57(0x1c3)]('\x20'));if(!_0x1698b3)throw new errors[(_0x49ad57(0x18b))](errors[_0x49ad57(0x19f)][_0x49ad57(0x187)],this['client'][_0x49ad57(0x17a)][_0x49ad57(0x1aa)](_0x4ed6ef[_0x49ad57(0x198)][_0x49ad57(0x18a)][_0x49ad57(0x17d)],'errors',_0x49ad57(0x199)));let _0x25480c=await _0x1698b3['fetchDocument']();return!_0x25480c&&(_0x25480c=await _0x1698b3[_0x49ad57(0x19e)]()),_0x25480c[_0x49ad57(0x1c1)]=_0x8ce281[_0x49ad57(0x1c1)],await _0x25480c[_0x49ad57(0x1bf)](),await _0x4ed6ef['channel'][_0x49ad57(0x18c)]({'embed':{'color':tesseract_1['Constants'][_0x49ad57(0x1ab)][_0x49ad57(0x1a1)],'description':this[_0x49ad57(0x1c0)][_0x49ad57(0x17a)][_0x49ad57(0x1aa)](_0x4ed6ef['guild']['document'][_0x49ad57(0x17d)],'info',_0x49ad57(0x1ae),_0x4ed6ef[_0x49ad57(0x1ad)][_0x49ad57(0x1a6)],_0x1698b3[_0x49ad57(0x17b)],_0x8ce281[_0x49ad57(0x1c1)])}})[_0x49ad57(0x18e)](()=>{});}if(_0x8ce281[_0x49ad57(0x1ac)])return await Role_1['default'][_0x49ad57(0x188)]({'guild':_0x4ed6ef[_0x49ad57(0x198)]['id'],'level':_0x8ce281[_0x49ad57(0x1c1)]},{'$unset':{'level':0x1}}),await _0x4ed6ef['channel'][_0x49ad57(0x18c)]({'embed':{'color':tesseract_1[_0x49ad57(0x1c4)][_0x49ad57(0x1ab)]['RED'],'description':this[_0x49ad57(0x1c0)]['locale'][_0x49ad57(0x1aa)](_0x4ed6ef['guild'][_0x49ad57(0x18a)][_0x49ad57(0x17d)],_0x49ad57(0x1b7),_0x49ad57(0x195),_0x4ed6ef['author']['tag'],_0x8ce281[_0x49ad57(0x1c1)])}})[_0x49ad57(0x18e)](()=>{});const _0x91e1bd=await Role_1[_0x49ad57(0x1c7)]['find']({'guild':_0x4ed6ef['guild']['id'],'level':_0x8ce281[_0x49ad57(0x1c1)]});if(!_0x91e1bd[_0x49ad57(0x19d)])throw new Error(_0x49ad57(0x1a7));const _0x275952=this[_0x49ad57(0x1c0)][_0x49ad57(0x178)][_0x49ad57(0x1b2)](_0x4ed6ef[_0x49ad57(0x198)],_0x91e1bd[_0x49ad57(0x1a9)](_0x46d3b1=>_0x46d3b1['_id']));return await _0x4ed6ef[_0x49ad57(0x1a4)][_0x49ad57(0x18c)]({'embed':{'color':tesseract_1[_0x49ad57(0x1c4)][_0x49ad57(0x1ab)][_0x49ad57(0x192)],'title':_0x49ad57(0x1be)+_0x8ce281[_0x49ad57(0x1c1)],'fields':[{'name':'Roles','value':_0x275952[_0x49ad57(0x1a9)](_0x5d5a5b=>_0x5d5a5b[_0x49ad57(0x17b)])[_0x49ad57(0x1c3)]('\x0a')}]}})[_0x49ad57(0x18e)](()=>{});}const _0x337380=await Role_1[_0x49ad57(0x1c7)][_0x49ad57(0x1b3)]({'guild':_0x4ed6ef[_0x49ad57(0x198)]['id'],'level':{'$exists':!![],'$ne':null}});if(!_0x337380[_0x49ad57(0x19d)])throw new Error(_0x49ad57(0x19a));const _0xb5a74e={};for(const _0x5ce318 of _0x337380){_0x5ce318[_0x49ad57(0x1c1)]in _0xb5a74e?_0xb5a74e[_0x5ce318[_0x49ad57(0x1c1)]][_0x49ad57(0x182)](_0x5ce318[_0x49ad57(0x1b6)]):_0xb5a74e[_0x5ce318[_0x49ad57(0x1c1)]]=[_0x5ce318[_0x49ad57(0x1b6)]];}return await _0x4ed6ef[_0x49ad57(0x1a4)]['send']({'embed':{'color':tesseract_1['Constants'][_0x49ad57(0x1ab)]['IRIS'],'title':_0x49ad57(0x189),'fields':Object[_0x49ad57(0x193)](_0xb5a74e)[_0x49ad57(0x1a9)](_0x191f79=>({'name':_0x49ad57(0x1be)+_0x191f79,'value':_0xb5a74e[_0x191f79]['map'](_0x46ff80=>_0x4ed6ef[_0x49ad57(0x198)][_0x49ad57(0x1c5)][_0x49ad57(0x1c2)]['has'](_0x46ff80)?_0x4ed6ef['guild']['roles'][_0x49ad57(0x1c2)][_0x49ad57(0x181)](_0x46ff80)['name']:_0x46ff80)[_0x49ad57(0x1c3)](',\x20')}))}})['catch'](()=>{});};}};
const a66_0x802d=['isPublicBastion','getString','fetchPremiumTier','IRIS','RED','length','save','get','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','name','default','client','levelUpRoles\x20--level\x20NUMBER\x20--role\x20ROLE','cache','ROLES_PER_LEVEL','PREMIUM_MEMBERSHIP_REQUIRED','join','document','It\x20allows\x20you\x20to\x20add\x20roles\x20to\x20a\x20level.\x20When\x20members\x20reach\x20that\x20level,\x20they\x27ll\x20be\x20awarded\x20those\x20roles.','apply','constructor','premiumLevelRoles','language','map','catch','channel','MANAGE_ROLES','premiumRoleLevels','@bastion/tesseract','../../utils/constants','ROLE_NOT_FOUND','send','push','Roles','distinct','levelUpRoles\x20--level\x20NUMBER','NO_ROLES_FOR_LEVEL','NO_LEVEL_UP_ROLES','GOLD','resolver','roles','Command','levelUpRoles','info','countDocuments','remove','keys','PremiumTier','level','levelUpRoles\x20--level\x20NUMBER\x20--remove','DiscordError','COLORS','LIMITS','MAX_LEVEL','guild','LIMITED_PREMIUM_MEMBERSHIP','../../utils/omnic','Level-Up\x20Roles','updateMany','errors','roleLevelAdd','roleLevelClear','locale','author','Constants','role','PLATINUM','../../utils/numbers','_id','membershipLimitRoleLevels','resolveRole','BASTION_ERROR_TYPE','../../models/Role','exec','clamp','ROLE_LEVELS','fetchDocument','find','test','tag'];(function(_0x45ea95,_0x802d0){const _0x4749e9=function(_0x256f97){while(--_0x256f97){_0x45ea95['push'](_0x45ea95['shift']());}},_0x47fdd0=function(){const _0x4de2b6={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x27c576,_0x3327e5,_0x324982,_0xfeb261){_0xfeb261=_0xfeb261||{};let _0x442bca=_0x3327e5+'='+_0x324982,_0x5680e1=0x0;for(let _0x497a60=0x0,_0x3e969d=_0x27c576['length'];_0x497a60<_0x3e969d;_0x497a60++){const _0x31ebe1=_0x27c576[_0x497a60];_0x442bca+=';\x20'+_0x31ebe1;const _0x218a63=_0x27c576[_0x31ebe1];_0x27c576['push'](_0x218a63),_0x3e969d=_0x27c576['length'],_0x218a63!==!![]&&(_0x442bca+='='+_0x218a63);}_0xfeb261['cookie']=_0x442bca;},'removeCookie':function(){return'dev';},'getCookie':function(_0xf14208,_0x24cddd){_0xf14208=_0xf14208||function(_0x5bb2d4){return _0x5bb2d4;};const _0x2970de=_0xf14208(new RegExp('(?:^|;\x20)'+_0x24cddd['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x49db84=function(_0x3e2675,_0x21c003){_0x3e2675(++_0x21c003);};return _0x49db84(_0x4749e9,_0x802d0),_0x2970de?decodeURIComponent(_0x2970de[0x1]):undefined;}},_0x193c5c=function(){const _0x4b6fe5=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4b6fe5['test'](_0x4de2b6['removeCookie']['toString']());};_0x4de2b6['updateCookie']=_0x193c5c;let _0x4ff6e2='';const _0x30a96d=_0x4de2b6['updateCookie']();if(!_0x30a96d)_0x4de2b6['setCookie'](['*'],'counter',0x1);else _0x30a96d?_0x4ff6e2=_0x4de2b6['getCookie'](null,'counter'):_0x4de2b6['removeCookie']();};_0x47fdd0();}(a66_0x802d,0x189));const a66_0x4749=function(_0x45ea95,_0x802d0){_0x45ea95=_0x45ea95-0x0;let _0x4749e9=a66_0x802d[_0x45ea95];return _0x4749e9;};const a66_0x324982=function(){let _0x530048=!![];return function(_0x3d2196,_0x270371){const _0x30cfd0=_0x530048?function(){if(_0x270371){const _0x5237f0=_0x270371[a66_0x4749('0x1a')](_0x3d2196,arguments);return _0x270371=null,_0x5237f0;}}:function(){};return _0x530048=![],_0x30cfd0;};}(),a66_0x3327e5=a66_0x324982(this,function(){const _0x4a971b=function(){const _0x3dac1f=_0x4a971b['constructor']('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a66_0x4749('0x1b')](a66_0x4749('0xf'));return!_0x3dac1f[a66_0x4749('0x5')](a66_0x3327e5);};return _0x4a971b();});a66_0x3327e5();'use strict';const tesseract_1=require(a66_0x4749('0x23')),Role_1=require(a66_0x4749('0x4f')),constants=require(a66_0x4749('0x24')),errors=require('../../utils/errors'),gamification=require('../../utils/gamification'),numbers=require(a66_0x4749('0x4a')),omnic=require(a66_0x4749('0x3f'));module['exports']=class LevelUpRolesCommand extends tesseract_1[a66_0x4749('0x30')]{constructor(){super(a66_0x4749('0x31'),{'description':a66_0x4749('0x19'),'triggers':[],'arguments':{'array':[a66_0x4749('0x48')],'boolean':['remove'],'string':[a66_0x4749('0x48')],'number':['level'],'coerce':{'level':_0x33414c=>numbers[a66_0x4749('0x1')](_0x33414c,0x1,gamification[a66_0x4749('0x3c')])}},'scope':a66_0x4749('0x3d'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a66_0x4749('0x21')],'userPermissions':[a66_0x4749('0x21')],'syntax':[a66_0x4749('0x31'),a66_0x4749('0x2a'),a66_0x4749('0x13'),a66_0x4749('0x38')]}),this[a66_0x4749('0x0')]=async(_0x3b5adb,_0x2939c9)=>{if(_0x2939c9['level']){if(_0x2939c9[a66_0x4749('0x48')]){if(constants[a66_0x4749('0x7')](this[a66_0x4749('0x12')]['user'])){const _0x5307e0=await omnic[a66_0x4749('0x9')](_0x3b5adb[a66_0x4749('0x3d')])[a66_0x4749('0x1f')](()=>{}),_0x57cf46=await Role_1['default'][a66_0x4749('0x29')]('level',{'guild':_0x3b5adb[a66_0x4749('0x3d')]['id'],'level':{'$exists':!![],'$ne':null}});if(_0x5307e0){if(_0x5307e0===omnic['PremiumTier'][a66_0x4749('0x2d')]&&_0x57cf46['length']>=constants['LIMITS'][a66_0x4749('0x2d')]['ROLE_LEVELS'])throw new errors[(a66_0x4749('0x39'))](errors['BASTION_ERROR_TYPE'][a66_0x4749('0x3e')],this[a66_0x4749('0x12')][a66_0x4749('0x45')][a66_0x4749('0x8')](_0x3b5adb[a66_0x4749('0x3d')][a66_0x4749('0x18')][a66_0x4749('0x1d')],a66_0x4749('0x42'),a66_0x4749('0x4c'),constants[a66_0x4749('0x3b')][a66_0x4749('0x2d')][a66_0x4749('0x2')]));else{if(_0x5307e0===omnic[a66_0x4749('0x36')][a66_0x4749('0x49')]&&_0x57cf46[a66_0x4749('0xc')]>=constants[a66_0x4749('0x3b')][a66_0x4749('0x49')][a66_0x4749('0x2')])throw new errors[(a66_0x4749('0x39'))](errors[a66_0x4749('0x4e')]['LIMITED_PREMIUM_MEMBERSHIP'],this[a66_0x4749('0x12')][a66_0x4749('0x45')][a66_0x4749('0x8')](_0x3b5adb[a66_0x4749('0x3d')][a66_0x4749('0x18')][a66_0x4749('0x1d')],a66_0x4749('0x42'),a66_0x4749('0x4c'),constants[a66_0x4749('0x3b')][a66_0x4749('0x49')][a66_0x4749('0x2')]));}}else{if(_0x57cf46[a66_0x4749('0xc')]>=constants[a66_0x4749('0x3b')][a66_0x4749('0x2')])throw new errors[(a66_0x4749('0x39'))](errors[a66_0x4749('0x4e')]['PREMIUM_MEMBERSHIP_REQUIRED'],this[a66_0x4749('0x12')]['locale'][a66_0x4749('0x8')](_0x3b5adb[a66_0x4749('0x3d')][a66_0x4749('0x18')][a66_0x4749('0x1d')],a66_0x4749('0x42'),a66_0x4749('0x22'),constants[a66_0x4749('0x3b')][a66_0x4749('0x2')]));}const _0x244ab4=await Role_1[a66_0x4749('0x11')][a66_0x4749('0x33')]({'guild':_0x3b5adb['guild']['id'],'level':_0x2939c9[a66_0x4749('0x37')]});if(_0x5307e0){if(_0x5307e0===omnic['PremiumTier'][a66_0x4749('0x2d')]&&_0x244ab4>=constants[a66_0x4749('0x3b')][a66_0x4749('0x2d')][a66_0x4749('0x15')])throw new errors[(a66_0x4749('0x39'))](errors[a66_0x4749('0x4e')][a66_0x4749('0x3e')],this[a66_0x4749('0x12')][a66_0x4749('0x45')][a66_0x4749('0x8')](_0x3b5adb[a66_0x4749('0x3d')]['document'][a66_0x4749('0x1d')],a66_0x4749('0x42'),'membershipLimitLevelRoles',constants['LIMITS'][a66_0x4749('0x2d')]['ROLES_PER_LEVEL']));else{if(_0x5307e0===omnic[a66_0x4749('0x36')][a66_0x4749('0x49')]&&_0x244ab4>=constants[a66_0x4749('0x3b')][a66_0x4749('0x49')][a66_0x4749('0x15')])throw new errors[(a66_0x4749('0x39'))](errors[a66_0x4749('0x4e')][a66_0x4749('0x3e')],this[a66_0x4749('0x12')]['locale'][a66_0x4749('0x8')](_0x3b5adb['guild']['document'][a66_0x4749('0x1d')],a66_0x4749('0x42'),'membershipLimitLevelRoles',constants[a66_0x4749('0x3b')]['PLATINUM'][a66_0x4749('0x15')]));}}else{if(_0x244ab4>=constants[a66_0x4749('0x3b')][a66_0x4749('0x15')])throw new errors[(a66_0x4749('0x39'))](errors[a66_0x4749('0x4e')][a66_0x4749('0x16')],this[a66_0x4749('0x12')][a66_0x4749('0x45')][a66_0x4749('0x8')](_0x3b5adb['guild'][a66_0x4749('0x18')][a66_0x4749('0x1d')],a66_0x4749('0x42'),a66_0x4749('0x1c'),constants[a66_0x4749('0x3b')][a66_0x4749('0x15')]));}}const _0x36dad6=this[a66_0x4749('0x12')][a66_0x4749('0x2e')][a66_0x4749('0x4d')](_0x3b5adb['guild'],_0x2939c9[a66_0x4749('0x48')][a66_0x4749('0x17')]('\x20'));if(!_0x36dad6)throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][a66_0x4749('0x25')],this['client'][a66_0x4749('0x45')][a66_0x4749('0x8')](_0x3b5adb[a66_0x4749('0x3d')][a66_0x4749('0x18')][a66_0x4749('0x1d')],'error','roleNotFound'));let _0x39ac8b=await _0x36dad6[a66_0x4749('0x3')]();return!_0x39ac8b&&(_0x39ac8b=await _0x36dad6['createDocument']()),_0x39ac8b[a66_0x4749('0x37')]=_0x2939c9[a66_0x4749('0x37')],await _0x39ac8b[a66_0x4749('0xd')](),await _0x3b5adb[a66_0x4749('0x20')][a66_0x4749('0x26')]({'embed':{'color':tesseract_1['Constants'][a66_0x4749('0x3a')]['GREEN'],'description':this[a66_0x4749('0x12')][a66_0x4749('0x45')]['getString'](_0x3b5adb[a66_0x4749('0x3d')][a66_0x4749('0x18')][a66_0x4749('0x1d')],'info',a66_0x4749('0x43'),_0x3b5adb[a66_0x4749('0x46')][a66_0x4749('0x6')],_0x36dad6[a66_0x4749('0x10')],_0x2939c9['level'])}})['catch'](()=>{});}if(_0x2939c9[a66_0x4749('0x34')])return await Role_1[a66_0x4749('0x11')][a66_0x4749('0x41')]({'guild':_0x3b5adb['guild']['id'],'level':_0x2939c9[a66_0x4749('0x37')]},{'$unset':{'level':0x1}}),await _0x3b5adb['channel'][a66_0x4749('0x26')]({'embed':{'color':tesseract_1[a66_0x4749('0x47')][a66_0x4749('0x3a')][a66_0x4749('0xb')],'description':this[a66_0x4749('0x12')]['locale'][a66_0x4749('0x8')](_0x3b5adb[a66_0x4749('0x3d')][a66_0x4749('0x18')][a66_0x4749('0x1d')],a66_0x4749('0x32'),a66_0x4749('0x44'),_0x3b5adb['author']['tag'],_0x2939c9[a66_0x4749('0x37')])}})[a66_0x4749('0x1f')](()=>{});const _0x2bc73a=await Role_1[a66_0x4749('0x11')][a66_0x4749('0x4')]({'guild':_0x3b5adb[a66_0x4749('0x3d')]['id'],'level':_0x2939c9['level']});if(!_0x2bc73a[a66_0x4749('0xc')])throw new Error(a66_0x4749('0x2b'));const _0x5786aa=this[a66_0x4749('0x12')][a66_0x4749('0x2e')]['resolveRoles'](_0x3b5adb['guild'],_0x2bc73a['map'](_0x298a79=>_0x298a79[a66_0x4749('0x4b')]));return await _0x3b5adb[a66_0x4749('0x20')][a66_0x4749('0x26')]({'embed':{'color':tesseract_1['Constants']['COLORS'][a66_0x4749('0xa')],'title':'Level\x20'+_0x2939c9['level'],'fields':[{'name':a66_0x4749('0x28'),'value':_0x5786aa[a66_0x4749('0x1e')](_0x55aff4=>_0x55aff4[a66_0x4749('0x10')])['join']('\x0a')}]}})[a66_0x4749('0x1f')](()=>{});}const _0x233cd8=await Role_1[a66_0x4749('0x11')][a66_0x4749('0x4')]({'guild':_0x3b5adb[a66_0x4749('0x3d')]['id'],'level':{'$exists':!![],'$ne':null}});if(!_0x233cd8[a66_0x4749('0xc')])throw new Error(a66_0x4749('0x2c'));const _0x3d9c53={};for(const _0x3da213 of _0x233cd8){_0x3da213[a66_0x4749('0x37')]in _0x3d9c53?_0x3d9c53[_0x3da213[a66_0x4749('0x37')]][a66_0x4749('0x27')](_0x3da213['_id']):_0x3d9c53[_0x3da213['level']]=[_0x3da213[a66_0x4749('0x4b')]];}return await _0x3b5adb['channel'][a66_0x4749('0x26')]({'embed':{'color':tesseract_1[a66_0x4749('0x47')][a66_0x4749('0x3a')][a66_0x4749('0xa')],'title':a66_0x4749('0x40'),'fields':Object[a66_0x4749('0x35')](_0x3d9c53)[a66_0x4749('0x1e')](_0x2e33c7=>({'name':'Level\x20'+_0x2e33c7,'value':_0x3d9c53[_0x2e33c7][a66_0x4749('0x1e')](_0x2d3b6c=>_0x3b5adb[a66_0x4749('0x3d')][a66_0x4749('0x2f')]['cache']['has'](_0x2d3b6c)?_0x3b5adb[a66_0x4749('0x3d')]['roles'][a66_0x4749('0x14')][a66_0x4749('0xe')](_0x2d3b6c)[a66_0x4749('0x10')]:_0x2d3b6c)[a66_0x4749('0x17')](',\x20')}))}})['catch'](()=>{});};}};
const a67_0x5d8d=['author','constructor','ROLE_LEVELS','resolver','channel','MANAGE_ROLES','ROLE_NOT_FOUND','find','../../utils/numbers','NO_LEVEL_UP_ROLES','../../utils/constants','RED','updateMany','MAX_LEVEL','user','ROLES_PER_LEVEL','premiumRoleLevels','Level-Up\x20Roles','language','It\x20allows\x20you\x20to\x20add\x20roles\x20to\x20a\x20level.\x20When\x20members\x20reach\x20that\x20level,\x20they\x27ll\x20be\x20awarded\x20those\x20roles.','length','PLATINUM','distinct','isPublicBastion','errors','guild','fetchPremiumTier','Constants','../../models/Role','LIMITED_PREMIUM_MEMBERSHIP','send','push','role','save','PREMIUM_MEMBERSHIP_REQUIRED','get','map','COLORS','exec','resolveRoles','level','_id','PremiumTier','IRIS','remove','client','GREEN','return\x20/\x22\x20+\x20this\x20+\x20\x22/','tag','fetchDocument','membershipLimitLevelRoles','levelUpRoles\x20--level\x20NUMBER\x20--role\x20ROLE','@bastion/tesseract','exports','cache','Level\x20','catch','GOLD','roles','DiscordError','BASTION_ERROR_TYPE','join','premiumLevelRoles','default','Command','name','info','membershipLimitRoleLevels','roleLevelAdd','getString','../../utils/omnic','document','locale','roleLevelClear','LIMITS','clamp'];(function(_0xb293a1,_0x5d8d9b){const _0x41ef1c=function(_0x124766){while(--_0x124766){_0xb293a1['push'](_0xb293a1['shift']());}},_0x26dcfd=function(){const _0x393e7a={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x43e2e9,_0x1a569e,_0xcb8b2a,_0x1e0397){_0x1e0397=_0x1e0397||{};let _0x51d8bc=_0x1a569e+'='+_0xcb8b2a,_0x7c2fea=0x0;for(let _0x26e969=0x0,_0x1eba13=_0x43e2e9['length'];_0x26e969<_0x1eba13;_0x26e969++){const _0x5730e9=_0x43e2e9[_0x26e969];_0x51d8bc+=';\x20'+_0x5730e9;const _0x5f0020=_0x43e2e9[_0x5730e9];_0x43e2e9['push'](_0x5f0020),_0x1eba13=_0x43e2e9['length'],_0x5f0020!==!![]&&(_0x51d8bc+='='+_0x5f0020);}_0x1e0397['cookie']=_0x51d8bc;},'removeCookie':function(){return'dev';},'getCookie':function(_0x447207,_0x319f3a){_0x447207=_0x447207||function(_0x560d3f){return _0x560d3f;};const _0x18c36c=_0x447207(new RegExp('(?:^|;\x20)'+_0x319f3a['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x532407=function(_0x8688fe,_0x37043b){_0x8688fe(++_0x37043b);};return _0x532407(_0x41ef1c,_0x5d8d9b),_0x18c36c?decodeURIComponent(_0x18c36c[0x1]):undefined;}},_0x4a98a0=function(){const _0x17b08e=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x17b08e['test'](_0x393e7a['removeCookie']['toString']());};_0x393e7a['updateCookie']=_0x4a98a0;let _0x34a543='';const _0x244134=_0x393e7a['updateCookie']();if(!_0x244134)_0x393e7a['setCookie'](['*'],'counter',0x1);else _0x244134?_0x34a543=_0x393e7a['getCookie'](null,'counter'):_0x393e7a['removeCookie']();};_0x26dcfd();}(a67_0x5d8d,0x92));const a67_0x41ef=function(_0xb293a1,_0x5d8d9b){_0xb293a1=_0xb293a1-0x0;let _0x41ef1c=a67_0x5d8d[_0xb293a1];return _0x41ef1c;};const a67_0xcb8b2a=function(){let _0x3ecc20=!![];return function(_0x115999,_0x19fa06){const _0x17848e=_0x3ecc20?function(){if(_0x19fa06){const _0x23192f=_0x19fa06['apply'](_0x115999,arguments);return _0x19fa06=null,_0x23192f;}}:function(){};return _0x3ecc20=![],_0x17848e;};}(),a67_0x1a569e=a67_0xcb8b2a(this,function(){const _0x2b9b37=function(){const _0xaefd75=_0x2b9b37[a67_0x41ef('0x7')](a67_0x41ef('0x35'))()[a67_0x41ef('0x7')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0xaefd75['test'](a67_0x1a569e);};return _0x2b9b37();});a67_0x1a569e();'use strict';const tesseract_1=require(a67_0x41ef('0x3a')),Role_1=require(a67_0x41ef('0x22')),constants=require(a67_0x41ef('0x10')),errors=require('../../utils/errors'),gamification=require('../../utils/gamification'),numbers=require(a67_0x41ef('0xe')),omnic=require(a67_0x41ef('0x0'));module[a67_0x41ef('0x3b')]=class LevelUpRolesCommand extends tesseract_1[a67_0x41ef('0x46')]{constructor(){super('levelUpRoles',{'description':a67_0x41ef('0x19'),'triggers':[],'arguments':{'array':[a67_0x41ef('0x26')],'boolean':[a67_0x41ef('0x32')],'string':[a67_0x41ef('0x26')],'number':[a67_0x41ef('0x2e')],'coerce':{'level':_0x30e7a3=>numbers[a67_0x41ef('0x5')](_0x30e7a3,0x1,gamification[a67_0x41ef('0x13')])}},'scope':a67_0x41ef('0x1f'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a67_0x41ef('0xb')],'userPermissions':[a67_0x41ef('0xb')],'syntax':['levelUpRoles','levelUpRoles\x20--level\x20NUMBER',a67_0x41ef('0x39'),'levelUpRoles\x20--level\x20NUMBER\x20--remove']}),this[a67_0x41ef('0x2c')]=async(_0x36a11d,_0x3ba76d)=>{if(_0x3ba76d[a67_0x41ef('0x2e')]){if(_0x3ba76d[a67_0x41ef('0x26')]){if(constants[a67_0x41ef('0x1d')](this['client'][a67_0x41ef('0x14')])){const _0x484621=await omnic[a67_0x41ef('0x20')](_0x36a11d['guild'])['catch'](()=>{}),_0x151e57=await Role_1[a67_0x41ef('0x45')][a67_0x41ef('0x1c')]('level',{'guild':_0x36a11d['guild']['id'],'level':{'$exists':!![],'$ne':null}});if(_0x484621){if(_0x484621===omnic[a67_0x41ef('0x30')][a67_0x41ef('0x3f')]&&_0x151e57[a67_0x41ef('0x1a')]>=constants[a67_0x41ef('0x4')][a67_0x41ef('0x3f')][a67_0x41ef('0x8')])throw new errors[(a67_0x41ef('0x41'))](errors[a67_0x41ef('0x42')][a67_0x41ef('0x23')],this[a67_0x41ef('0x33')]['locale'][a67_0x41ef('0x4b')](_0x36a11d['guild'][a67_0x41ef('0x1')][a67_0x41ef('0x18')],'errors',a67_0x41ef('0x49'),constants[a67_0x41ef('0x4')][a67_0x41ef('0x3f')][a67_0x41ef('0x8')]));else{if(_0x484621===omnic['PremiumTier'][a67_0x41ef('0x1b')]&&_0x151e57[a67_0x41ef('0x1a')]>=constants[a67_0x41ef('0x4')][a67_0x41ef('0x1b')][a67_0x41ef('0x8')])throw new errors['DiscordError'](errors[a67_0x41ef('0x42')][a67_0x41ef('0x23')],this[a67_0x41ef('0x33')][a67_0x41ef('0x2')][a67_0x41ef('0x4b')](_0x36a11d[a67_0x41ef('0x1f')][a67_0x41ef('0x1')][a67_0x41ef('0x18')],a67_0x41ef('0x1e'),a67_0x41ef('0x49'),constants[a67_0x41ef('0x4')][a67_0x41ef('0x1b')]['ROLE_LEVELS']));}}else{if(_0x151e57['length']>=constants[a67_0x41ef('0x4')][a67_0x41ef('0x8')])throw new errors[(a67_0x41ef('0x41'))](errors[a67_0x41ef('0x42')][a67_0x41ef('0x28')],this[a67_0x41ef('0x33')]['locale'][a67_0x41ef('0x4b')](_0x36a11d['guild'][a67_0x41ef('0x1')][a67_0x41ef('0x18')],a67_0x41ef('0x1e'),a67_0x41ef('0x16'),constants['LIMITS'][a67_0x41ef('0x8')]));}const _0x3a44e8=await Role_1[a67_0x41ef('0x45')]['countDocuments']({'guild':_0x36a11d['guild']['id'],'level':_0x3ba76d[a67_0x41ef('0x2e')]});if(_0x484621){if(_0x484621===omnic['PremiumTier']['GOLD']&&_0x3a44e8>=constants[a67_0x41ef('0x4')]['GOLD'][a67_0x41ef('0x15')])throw new errors[(a67_0x41ef('0x41'))](errors[a67_0x41ef('0x42')][a67_0x41ef('0x23')],this[a67_0x41ef('0x33')]['locale'][a67_0x41ef('0x4b')](_0x36a11d[a67_0x41ef('0x1f')][a67_0x41ef('0x1')][a67_0x41ef('0x18')],a67_0x41ef('0x1e'),'membershipLimitLevelRoles',constants['LIMITS'][a67_0x41ef('0x3f')]['ROLES_PER_LEVEL']));else{if(_0x484621===omnic[a67_0x41ef('0x30')]['PLATINUM']&&_0x3a44e8>=constants[a67_0x41ef('0x4')]['PLATINUM'][a67_0x41ef('0x15')])throw new errors['DiscordError'](errors[a67_0x41ef('0x42')][a67_0x41ef('0x23')],this[a67_0x41ef('0x33')][a67_0x41ef('0x2')][a67_0x41ef('0x4b')](_0x36a11d['guild'][a67_0x41ef('0x1')][a67_0x41ef('0x18')],'errors',a67_0x41ef('0x38'),constants[a67_0x41ef('0x4')][a67_0x41ef('0x1b')][a67_0x41ef('0x15')]));}}else{if(_0x3a44e8>=constants['LIMITS'][a67_0x41ef('0x15')])throw new errors[(a67_0x41ef('0x41'))](errors['BASTION_ERROR_TYPE'][a67_0x41ef('0x28')],this[a67_0x41ef('0x33')]['locale'][a67_0x41ef('0x4b')](_0x36a11d[a67_0x41ef('0x1f')][a67_0x41ef('0x1')][a67_0x41ef('0x18')],a67_0x41ef('0x1e'),a67_0x41ef('0x44'),constants[a67_0x41ef('0x4')][a67_0x41ef('0x15')]));}}const _0xb90b80=this[a67_0x41ef('0x33')][a67_0x41ef('0x9')]['resolveRole'](_0x36a11d[a67_0x41ef('0x1f')],_0x3ba76d[a67_0x41ef('0x26')][a67_0x41ef('0x43')]('\x20'));if(!_0xb90b80)throw new errors[(a67_0x41ef('0x41'))](errors['BASTION_ERROR_TYPE'][a67_0x41ef('0xc')],this[a67_0x41ef('0x33')][a67_0x41ef('0x2')][a67_0x41ef('0x4b')](_0x36a11d[a67_0x41ef('0x1f')][a67_0x41ef('0x1')]['language'],'error','roleNotFound'));let _0x56cff4=await _0xb90b80[a67_0x41ef('0x37')]();return!_0x56cff4&&(_0x56cff4=await _0xb90b80['createDocument']()),_0x56cff4[a67_0x41ef('0x2e')]=_0x3ba76d[a67_0x41ef('0x2e')],await _0x56cff4[a67_0x41ef('0x27')](),await _0x36a11d[a67_0x41ef('0xa')][a67_0x41ef('0x24')]({'embed':{'color':tesseract_1[a67_0x41ef('0x21')][a67_0x41ef('0x2b')][a67_0x41ef('0x34')],'description':this[a67_0x41ef('0x33')]['locale'][a67_0x41ef('0x4b')](_0x36a11d['guild'][a67_0x41ef('0x1')]['language'],a67_0x41ef('0x48'),a67_0x41ef('0x4a'),_0x36a11d[a67_0x41ef('0x6')][a67_0x41ef('0x36')],_0xb90b80[a67_0x41ef('0x47')],_0x3ba76d['level'])}})[a67_0x41ef('0x3e')](()=>{});}if(_0x3ba76d[a67_0x41ef('0x32')])return await Role_1['default'][a67_0x41ef('0x12')]({'guild':_0x36a11d['guild']['id'],'level':_0x3ba76d[a67_0x41ef('0x2e')]},{'$unset':{'level':0x1}}),await _0x36a11d[a67_0x41ef('0xa')][a67_0x41ef('0x24')]({'embed':{'color':tesseract_1[a67_0x41ef('0x21')]['COLORS'][a67_0x41ef('0x11')],'description':this['client'][a67_0x41ef('0x2')][a67_0x41ef('0x4b')](_0x36a11d['guild']['document'][a67_0x41ef('0x18')],'info',a67_0x41ef('0x3'),_0x36a11d['author'][a67_0x41ef('0x36')],_0x3ba76d[a67_0x41ef('0x2e')])}})[a67_0x41ef('0x3e')](()=>{});const _0x76dd0c=await Role_1[a67_0x41ef('0x45')][a67_0x41ef('0xd')]({'guild':_0x36a11d[a67_0x41ef('0x1f')]['id'],'level':_0x3ba76d[a67_0x41ef('0x2e')]});if(!_0x76dd0c[a67_0x41ef('0x1a')])throw new Error('NO_ROLES_FOR_LEVEL');const _0x3fd5af=this[a67_0x41ef('0x33')]['resolver'][a67_0x41ef('0x2d')](_0x36a11d[a67_0x41ef('0x1f')],_0x76dd0c['map'](_0x501879=>_0x501879['_id']));return await _0x36a11d[a67_0x41ef('0xa')][a67_0x41ef('0x24')]({'embed':{'color':tesseract_1[a67_0x41ef('0x21')][a67_0x41ef('0x2b')][a67_0x41ef('0x31')],'title':a67_0x41ef('0x3d')+_0x3ba76d[a67_0x41ef('0x2e')],'fields':[{'name':'Roles','value':_0x3fd5af['map'](_0x8dfa55=>_0x8dfa55[a67_0x41ef('0x47')])[a67_0x41ef('0x43')]('\x0a')}]}})[a67_0x41ef('0x3e')](()=>{});}const _0x52b7a4=await Role_1[a67_0x41ef('0x45')]['find']({'guild':_0x36a11d[a67_0x41ef('0x1f')]['id'],'level':{'$exists':!![],'$ne':null}});if(!_0x52b7a4[a67_0x41ef('0x1a')])throw new Error(a67_0x41ef('0xf'));const _0x26f16c={};for(const _0x2cf884 of _0x52b7a4){_0x2cf884[a67_0x41ef('0x2e')]in _0x26f16c?_0x26f16c[_0x2cf884[a67_0x41ef('0x2e')]][a67_0x41ef('0x25')](_0x2cf884[a67_0x41ef('0x2f')]):_0x26f16c[_0x2cf884[a67_0x41ef('0x2e')]]=[_0x2cf884['_id']];}return await _0x36a11d[a67_0x41ef('0xa')][a67_0x41ef('0x24')]({'embed':{'color':tesseract_1['Constants'][a67_0x41ef('0x2b')]['IRIS'],'title':a67_0x41ef('0x17'),'fields':Object['keys'](_0x26f16c)['map'](_0x12dd3e=>({'name':a67_0x41ef('0x3d')+_0x12dd3e,'value':_0x26f16c[_0x12dd3e][a67_0x41ef('0x2a')](_0x424e16=>_0x36a11d[a67_0x41ef('0x1f')][a67_0x41ef('0x40')][a67_0x41ef('0x3c')]['has'](_0x424e16)?_0x36a11d['guild'][a67_0x41ef('0x40')][a67_0x41ef('0x3c')][a67_0x41ef('0x29')](_0x424e16)[a67_0x41ef('0x47')]:_0x424e16)[a67_0x41ef('0x43')](',\x20')}))}})[a67_0x41ef('0x3e')](()=>{});};}};
const a69_0x5aac=['info','@bastion/tesseract','tag','premiumLevelRoles','../../utils/gamification','Level-Up\x20Roles','membershipLimitLevelRoles','fetchPremiumTier','catch','LIMITED_PREMIUM_MEMBERSHIP','PLATINUM','BASTION_ERROR_TYPE','ROLE_NOT_FOUND','errors','ROLES_PER_LEVEL','roleNotFound','test','COLORS','GREEN','apply','MANAGE_ROLES','client','find','RED','fetchDocument','document','roleLevelAdd','locale','exports','levelUpRoles\x20--level\x20NUMBER\x20--role\x20ROLE','DiscordError','distinct','join','get','length','push','getString','LIMITS','Constants','name','role','ROLE_LEVELS','../../models/Role','premiumRoleLevels','createDocument','error','level','GOLD','PremiumTier','Roles','constructor','levelUpRoles\x20--level\x20NUMBER','roles','channel','clamp','default','resolveRole','roleLevelClear','has','MAX_LEVEL','remove','save','membershipLimitRoleLevels','send','resolver','_id','PREMIUM_MEMBERSHIP_REQUIRED','IRIS','author','map','exec','guild','levelUpRoles','levelUpRoles\x20--level\x20NUMBER\x20--remove','cache','../../utils/constants','NO_ROLES_FOR_LEVEL','language','NO_LEVEL_UP_ROLES'];(function(_0x58da70,_0x5aac1d){const _0x1be29a=function(_0x168615){while(--_0x168615){_0x58da70['push'](_0x58da70['shift']());}},_0x5a745b=function(){const _0x2f4e42={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x390d4b,_0x124614,_0x2b9953,_0x570c3b){_0x570c3b=_0x570c3b||{};let _0x15a464=_0x124614+'='+_0x2b9953,_0x98c118=0x0;for(let _0x5bf65b=0x0,_0x440757=_0x390d4b['length'];_0x5bf65b<_0x440757;_0x5bf65b++){const _0x1fe5e6=_0x390d4b[_0x5bf65b];_0x15a464+=';\x20'+_0x1fe5e6;const _0x5d8f8c=_0x390d4b[_0x1fe5e6];_0x390d4b['push'](_0x5d8f8c),_0x440757=_0x390d4b['length'],_0x5d8f8c!==!![]&&(_0x15a464+='='+_0x5d8f8c);}_0x570c3b['cookie']=_0x15a464;},'removeCookie':function(){return'dev';},'getCookie':function(_0xae4261,_0x5d84db){_0xae4261=_0xae4261||function(_0x2405f6){return _0x2405f6;};const _0x585e3c=_0xae4261(new RegExp('(?:^|;\x20)'+_0x5d84db['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0xd1a6a=function(_0x1f54fe,_0x104dfe){_0x1f54fe(++_0x104dfe);};return _0xd1a6a(_0x1be29a,_0x5aac1d),_0x585e3c?decodeURIComponent(_0x585e3c[0x1]):undefined;}},_0x58d50a=function(){const _0x587e50=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x587e50['test'](_0x2f4e42['removeCookie']['toString']());};_0x2f4e42['updateCookie']=_0x58d50a;let _0x4e02e0='';const _0xebeb04=_0x2f4e42['updateCookie']();if(!_0xebeb04)_0x2f4e42['setCookie'](['*'],'counter',0x1);else _0xebeb04?_0x4e02e0=_0x2f4e42['getCookie'](null,'counter'):_0x2f4e42['removeCookie']();};_0x5a745b();}(a69_0x5aac,0x1d9));const a69_0x1be2=function(_0x58da70,_0x5aac1d){_0x58da70=_0x58da70-0x0;let _0x1be29a=a69_0x5aac[_0x58da70];return _0x1be29a;};const a69_0x2f4e42=function(){let _0x4e02e0=!![];return function(_0xebeb04,_0x390d4b){const _0x124614=_0x4e02e0?function(){if(_0x390d4b){const _0x2b9953=_0x390d4b[a69_0x1be2('0x14')](_0xebeb04,arguments);return _0x390d4b=null,_0x2b9953;}}:function(){};return _0x4e02e0=![],_0x124614;};}(),a69_0x168615=a69_0x2f4e42(this,function(){const _0x570c3b=function(){const _0x15a464=_0x570c3b[a69_0x1be2('0x33')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a69_0x1be2('0x33')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x15a464[a69_0x1be2('0x11')](a69_0x168615);};return _0x570c3b();});a69_0x168615();'use strict';const tesseract_1=require(a69_0x1be2('0x2')),Role_1=require(a69_0x1be2('0x2b')),constants=require(a69_0x1be2('0x4c')),errors=require('../../utils/errors'),gamification=require(a69_0x1be2('0x5')),numbers=require('../../utils/numbers'),omnic=require('../../utils/omnic');module[a69_0x1be2('0x1d')]=class LevelUpRolesCommand extends tesseract_1['Command']{constructor(){super('levelUpRoles',{'description':'It\x20allows\x20you\x20to\x20add\x20roles\x20to\x20a\x20level.\x20When\x20members\x20reach\x20that\x20level,\x20they\x27ll\x20be\x20awarded\x20those\x20roles.','triggers':[],'arguments':{'array':['role'],'boolean':[a69_0x1be2('0x3d')],'string':[a69_0x1be2('0x29')],'number':[a69_0x1be2('0x2f')],'coerce':{'level':_0x98c118=>numbers[a69_0x1be2('0x37')](_0x98c118,0x1,gamification[a69_0x1be2('0x3c')])}},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a69_0x1be2('0x15')],'userPermissions':[a69_0x1be2('0x15')],'syntax':[a69_0x1be2('0x49'),a69_0x1be2('0x34'),a69_0x1be2('0x1e'),a69_0x1be2('0x4a')]}),this[a69_0x1be2('0x47')]=async(_0x5bf65b,_0x440757)=>{if(_0x440757[a69_0x1be2('0x2f')]){if(_0x440757[a69_0x1be2('0x29')]){if(constants['isPublicBastion'](this[a69_0x1be2('0x16')]['user'])){const _0x2405f6=await omnic[a69_0x1be2('0x8')](_0x5bf65b[a69_0x1be2('0x48')])[a69_0x1be2('0x9')](()=>{}),_0x1f54fe=await Role_1[a69_0x1be2('0x38')][a69_0x1be2('0x20')](a69_0x1be2('0x2f'),{'guild':_0x5bf65b[a69_0x1be2('0x48')]['id'],'level':{'$exists':!![],'$ne':null}});if(_0x2405f6){if(_0x2405f6===omnic[a69_0x1be2('0x31')][a69_0x1be2('0x30')]&&_0x1f54fe['length']>=constants['LIMITS'][a69_0x1be2('0x30')][a69_0x1be2('0x2a')])throw new errors[(a69_0x1be2('0x1f'))](errors[a69_0x1be2('0xc')][a69_0x1be2('0xa')],this[a69_0x1be2('0x16')]['locale'][a69_0x1be2('0x25')](_0x5bf65b['guild']['document'][a69_0x1be2('0x4e')],a69_0x1be2('0xe'),a69_0x1be2('0x3f'),constants[a69_0x1be2('0x26')][a69_0x1be2('0x30')][a69_0x1be2('0x2a')]));else{if(_0x2405f6===omnic['PremiumTier'][a69_0x1be2('0xb')]&&_0x1f54fe[a69_0x1be2('0x23')]>=constants[a69_0x1be2('0x26')]['PLATINUM'][a69_0x1be2('0x2a')])throw new errors[(a69_0x1be2('0x1f'))](errors['BASTION_ERROR_TYPE'][a69_0x1be2('0xa')],this[a69_0x1be2('0x16')][a69_0x1be2('0x1c')][a69_0x1be2('0x25')](_0x5bf65b[a69_0x1be2('0x48')][a69_0x1be2('0x1a')][a69_0x1be2('0x4e')],a69_0x1be2('0xe'),'membershipLimitRoleLevels',constants['LIMITS'][a69_0x1be2('0xb')]['ROLE_LEVELS']));}}else{if(_0x1f54fe[a69_0x1be2('0x23')]>=constants[a69_0x1be2('0x26')][a69_0x1be2('0x2a')])throw new errors[(a69_0x1be2('0x1f'))](errors[a69_0x1be2('0xc')][a69_0x1be2('0x43')],this['client']['locale'][a69_0x1be2('0x25')](_0x5bf65b[a69_0x1be2('0x48')][a69_0x1be2('0x1a')][a69_0x1be2('0x4e')],a69_0x1be2('0xe'),a69_0x1be2('0x2c'),constants['LIMITS'][a69_0x1be2('0x2a')]));}const _0x104dfe=await Role_1[a69_0x1be2('0x38')]['countDocuments']({'guild':_0x5bf65b[a69_0x1be2('0x48')]['id'],'level':_0x440757['level']});if(_0x2405f6){if(_0x2405f6===omnic[a69_0x1be2('0x31')][a69_0x1be2('0x30')]&&_0x104dfe>=constants[a69_0x1be2('0x26')][a69_0x1be2('0x30')]['ROLES_PER_LEVEL'])throw new errors[(a69_0x1be2('0x1f'))](errors[a69_0x1be2('0xc')]['LIMITED_PREMIUM_MEMBERSHIP'],this[a69_0x1be2('0x16')][a69_0x1be2('0x1c')][a69_0x1be2('0x25')](_0x5bf65b['guild']['document'][a69_0x1be2('0x4e')],a69_0x1be2('0xe'),a69_0x1be2('0x7'),constants[a69_0x1be2('0x26')][a69_0x1be2('0x30')][a69_0x1be2('0xf')]));else{if(_0x2405f6===omnic[a69_0x1be2('0x31')][a69_0x1be2('0xb')]&&_0x104dfe>=constants[a69_0x1be2('0x26')][a69_0x1be2('0xb')][a69_0x1be2('0xf')])throw new errors['DiscordError'](errors[a69_0x1be2('0xc')][a69_0x1be2('0xa')],this['client']['locale'][a69_0x1be2('0x25')](_0x5bf65b[a69_0x1be2('0x48')]['document'][a69_0x1be2('0x4e')],'errors','membershipLimitLevelRoles',constants['LIMITS'][a69_0x1be2('0xb')][a69_0x1be2('0xf')]));}}else{if(_0x104dfe>=constants[a69_0x1be2('0x26')][a69_0x1be2('0xf')])throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][a69_0x1be2('0x43')],this['client'][a69_0x1be2('0x1c')][a69_0x1be2('0x25')](_0x5bf65b[a69_0x1be2('0x48')][a69_0x1be2('0x1a')]['language'],a69_0x1be2('0xe'),a69_0x1be2('0x4'),constants['LIMITS']['ROLES_PER_LEVEL']));}}const _0x585e3c=this[a69_0x1be2('0x16')][a69_0x1be2('0x41')][a69_0x1be2('0x39')](_0x5bf65b[a69_0x1be2('0x48')],_0x440757['role'][a69_0x1be2('0x21')]('\x20'));if(!_0x585e3c)throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][a69_0x1be2('0xd')],this[a69_0x1be2('0x16')]['locale'][a69_0x1be2('0x25')](_0x5bf65b[a69_0x1be2('0x48')]['document'][a69_0x1be2('0x4e')],a69_0x1be2('0x2e'),a69_0x1be2('0x10')));let _0xd1a6a=await _0x585e3c[a69_0x1be2('0x19')]();return!_0xd1a6a&&(_0xd1a6a=await _0x585e3c[a69_0x1be2('0x2d')]()),_0xd1a6a[a69_0x1be2('0x2f')]=_0x440757[a69_0x1be2('0x2f')],await _0xd1a6a[a69_0x1be2('0x3e')](),await _0x5bf65b['channel'][a69_0x1be2('0x40')]({'embed':{'color':tesseract_1[a69_0x1be2('0x27')][a69_0x1be2('0x12')][a69_0x1be2('0x13')],'description':this[a69_0x1be2('0x16')][a69_0x1be2('0x1c')]['getString'](_0x5bf65b[a69_0x1be2('0x48')][a69_0x1be2('0x1a')][a69_0x1be2('0x4e')],a69_0x1be2('0x1'),a69_0x1be2('0x1b'),_0x5bf65b['author'][a69_0x1be2('0x3')],_0x585e3c['name'],_0x440757[a69_0x1be2('0x2f')])}})[a69_0x1be2('0x9')](()=>{});}if(_0x440757[a69_0x1be2('0x3d')])return await Role_1[a69_0x1be2('0x38')]['updateMany']({'guild':_0x5bf65b[a69_0x1be2('0x48')]['id'],'level':_0x440757[a69_0x1be2('0x2f')]},{'$unset':{'level':0x1}}),await _0x5bf65b[a69_0x1be2('0x36')][a69_0x1be2('0x40')]({'embed':{'color':tesseract_1[a69_0x1be2('0x27')][a69_0x1be2('0x12')][a69_0x1be2('0x18')],'description':this[a69_0x1be2('0x16')][a69_0x1be2('0x1c')][a69_0x1be2('0x25')](_0x5bf65b[a69_0x1be2('0x48')][a69_0x1be2('0x1a')]['language'],'info',a69_0x1be2('0x3a'),_0x5bf65b[a69_0x1be2('0x45')][a69_0x1be2('0x3')],_0x440757[a69_0x1be2('0x2f')])}})[a69_0x1be2('0x9')](()=>{});const _0xae4261=await Role_1[a69_0x1be2('0x38')][a69_0x1be2('0x17')]({'guild':_0x5bf65b['guild']['id'],'level':_0x440757[a69_0x1be2('0x2f')]});if(!_0xae4261[a69_0x1be2('0x23')])throw new Error(a69_0x1be2('0x4d'));const _0x5d84db=this[a69_0x1be2('0x16')][a69_0x1be2('0x41')]['resolveRoles'](_0x5bf65b['guild'],_0xae4261[a69_0x1be2('0x46')](_0x587e50=>_0x587e50[a69_0x1be2('0x42')]));return await _0x5bf65b[a69_0x1be2('0x36')]['send']({'embed':{'color':tesseract_1['Constants'][a69_0x1be2('0x12')]['IRIS'],'title':'Level\x20'+_0x440757[a69_0x1be2('0x2f')],'fields':[{'name':a69_0x1be2('0x32'),'value':_0x5d84db[a69_0x1be2('0x46')](_0x29d25e=>_0x29d25e[a69_0x1be2('0x28')])[a69_0x1be2('0x21')]('\x0a')}]}})['catch'](()=>{});}const _0x1fe5e6=await Role_1[a69_0x1be2('0x38')][a69_0x1be2('0x17')]({'guild':_0x5bf65b[a69_0x1be2('0x48')]['id'],'level':{'$exists':!![],'$ne':null}});if(!_0x1fe5e6[a69_0x1be2('0x23')])throw new Error(a69_0x1be2('0x0'));const _0x5d8f8c={};for(const _0xadd5f9 of _0x1fe5e6){_0xadd5f9[a69_0x1be2('0x2f')]in _0x5d8f8c?_0x5d8f8c[_0xadd5f9['level']][a69_0x1be2('0x24')](_0xadd5f9[a69_0x1be2('0x42')]):_0x5d8f8c[_0xadd5f9[a69_0x1be2('0x2f')]]=[_0xadd5f9[a69_0x1be2('0x42')]];}return await _0x5bf65b['channel'][a69_0x1be2('0x40')]({'embed':{'color':tesseract_1[a69_0x1be2('0x27')]['COLORS'][a69_0x1be2('0x44')],'title':a69_0x1be2('0x6'),'fields':Object['keys'](_0x5d8f8c)[a69_0x1be2('0x46')](_0x58132f=>({'name':'Level\x20'+_0x58132f,'value':_0x5d8f8c[_0x58132f][a69_0x1be2('0x46')](_0x29664e=>_0x5bf65b[a69_0x1be2('0x48')]['roles'][a69_0x1be2('0x4b')][a69_0x1be2('0x3b')](_0x29664e)?_0x5bf65b[a69_0x1be2('0x48')][a69_0x1be2('0x35')]['cache'][a69_0x1be2('0x22')](_0x29664e)[a69_0x1be2('0x28')]:_0x29664e)[a69_0x1be2('0x21')](',\x20')}))}})[a69_0x1be2('0x9')](()=>{});};}};
const a80_0xefc8=['remove','../../utils/omnic','info','get','_id','language','../../utils/errors','MAX_LEVEL','client','countDocuments','has','roleLevelAdd','PLATINUM','Command','resolveRole','channel','roleLevelClear','BASTION_ERROR_TYPE','roleNotFound','DiscordError','guild','isPublicBastion','name','constructor','role','save','distinct','length','apply','IRIS','resolver','NO_LEVEL_UP_ROLES','exec','tag','test','exports','cache','../../models/Role','COLORS','catch','locale','LIMITS','membershipLimitRoleLevels','join','createDocument','It\x20allows\x20you\x20to\x20add\x20roles\x20to\x20a\x20level.\x20When\x20members\x20reach\x20that\x20level,\x20they\x27ll\x20be\x20awarded\x20those\x20roles.','membershipLimitLevelRoles','GOLD','Level\x20','author','default','clamp','fetchPremiumTier','send','MANAGE_ROLES','@bastion/tesseract','fetchDocument','map','find','getString','level','ROLES_PER_LEVEL','PremiumTier','document','NO_ROLES_FOR_LEVEL','Roles','premiumRoleLevels','PREMIUM_MEMBERSHIP_REQUIRED','ROLE_LEVELS','Constants','errors','../../utils/numbers','GREEN','LIMITED_PREMIUM_MEMBERSHIP','levelUpRoles\x20--level\x20NUMBER','push','user','roles'];(function(_0x3934fa,_0xefc8f6){const _0x5d029a=function(_0x59fc03){while(--_0x59fc03){_0x3934fa['push'](_0x3934fa['shift']());}},_0x43fdd4=function(){const _0x2593c9={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3ab8e8,_0x5259e4,_0x414783,_0x1d8696){_0x1d8696=_0x1d8696||{};let _0x24fab8=_0x5259e4+'='+_0x414783,_0x31210c=0x0;for(let _0x42cc01=0x0,_0x2c86e4=_0x3ab8e8['length'];_0x42cc01<_0x2c86e4;_0x42cc01++){const _0x36d850=_0x3ab8e8[_0x42cc01];_0x24fab8+=';\x20'+_0x36d850;const _0x5bc123=_0x3ab8e8[_0x36d850];_0x3ab8e8['push'](_0x5bc123),_0x2c86e4=_0x3ab8e8['length'],_0x5bc123!==!![]&&(_0x24fab8+='='+_0x5bc123);}_0x1d8696['cookie']=_0x24fab8;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2d4dbc,_0x38ca08){_0x2d4dbc=_0x2d4dbc||function(_0x2b3a64){return _0x2b3a64;};const _0x50961d=_0x2d4dbc(new RegExp('(?:^|;\x20)'+_0x38ca08['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x26edb9=function(_0x1a3490,_0x3b77cf){_0x1a3490(++_0x3b77cf);};return _0x26edb9(_0x5d029a,_0xefc8f6),_0x50961d?decodeURIComponent(_0x50961d[0x1]):undefined;}},_0x3b6989=function(){const _0x3088f0=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3088f0['test'](_0x2593c9['removeCookie']['toString']());};_0x2593c9['updateCookie']=_0x3b6989;let _0x252416='';const _0x12c362=_0x2593c9['updateCookie']();if(!_0x12c362)_0x2593c9['setCookie'](['*'],'counter',0x1);else _0x12c362?_0x252416=_0x2593c9['getCookie'](null,'counter'):_0x2593c9['removeCookie']();};_0x43fdd4();}(a80_0xefc8,0x1b0));const a80_0x5d02=function(_0x3934fa,_0xefc8f6){_0x3934fa=_0x3934fa-0x0;let _0x5d029a=a80_0xefc8[_0x3934fa];return _0x5d029a;};const _0xd74d8b=a80_0x5d02,a80_0x2593c9=function(){let _0x252416=!![];return function(_0x12c362,_0x3ab8e8){const _0x5259e4=_0x252416?function(){const _0x4b0085=a80_0x5d02;if(_0x3ab8e8){const _0x414783=_0x3ab8e8[_0x4b0085('0x40')](_0x12c362,arguments);return _0x3ab8e8=null,_0x414783;}}:function(){};return _0x252416=![],_0x5259e4;};}(),a80_0x59fc03=a80_0x2593c9(this,function(){const _0x1d8696=function(){const _0xec4429=a80_0x5d02,_0x24fab8=_0x1d8696[_0xec4429('0x3b')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[_0xec4429('0x3b')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x24fab8[_0xec4429('0x46')](a80_0x59fc03);};return _0x1d8696();});a80_0x59fc03();'use strict';const tesseract_1=require(_0xd74d8b('0xd')),Role_1=require(_0xd74d8b('0x49')),constants=require('../../utils/constants'),errors=require(_0xd74d8b('0x2a')),gamification=require('../../utils/gamification'),numbers=require(_0xd74d8b('0x1d')),omnic=require(_0xd74d8b('0x25'));module[_0xd74d8b('0x47')]=class LevelUpRolesCommand extends tesseract_1[_0xd74d8b('0x31')]{constructor(){const _0x571685=_0xd74d8b;super('levelUpRoles',{'description':_0x571685('0x3'),'triggers':[],'arguments':{'array':[_0x571685('0x3c')],'boolean':[_0x571685('0x24')],'string':[_0x571685('0x3c')],'number':[_0x571685('0x12')],'coerce':{'level':_0x31210c=>numbers[_0x571685('0x9')](_0x31210c,0x1,gamification[_0x571685('0x2b')])}},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':['MANAGE_ROLES'],'userPermissions':[_0x571685('0xc')],'syntax':['levelUpRoles',_0x571685('0x20'),'levelUpRoles\x20--level\x20NUMBER\x20--role\x20ROLE','levelUpRoles\x20--level\x20NUMBER\x20--remove']}),this[_0x571685('0x44')]=async(_0x42cc01,_0x2c86e4)=>{const _0x76c23d=_0x571685;if(_0x2c86e4[_0x76c23d('0x12')]){if(_0x2c86e4[_0x76c23d('0x3c')]){if(constants[_0x76c23d('0x39')](this[_0x76c23d('0x2c')][_0x76c23d('0x22')])){const _0x2b3a64=await omnic[_0x76c23d('0xa')](_0x42cc01[_0x76c23d('0x38')])[_0x76c23d('0x4b')](()=>{}),_0x1a3490=await Role_1[_0x76c23d('0x8')][_0x76c23d('0x3e')](_0x76c23d('0x12'),{'guild':_0x42cc01[_0x76c23d('0x38')]['id'],'level':{'$exists':!![],'$ne':null}});if(_0x2b3a64){if(_0x2b3a64===omnic[_0x76c23d('0x14')][_0x76c23d('0x5')]&&_0x1a3490[_0x76c23d('0x3f')]>=constants[_0x76c23d('0x4d')][_0x76c23d('0x5')]['ROLE_LEVELS'])throw new errors[(_0x76c23d('0x37'))](errors[_0x76c23d('0x35')][_0x76c23d('0x1f')],this[_0x76c23d('0x2c')][_0x76c23d('0x4c')][_0x76c23d('0x11')](_0x42cc01['guild'][_0x76c23d('0x15')][_0x76c23d('0x29')],_0x76c23d('0x1c'),'membershipLimitRoleLevels',constants[_0x76c23d('0x4d')][_0x76c23d('0x5')][_0x76c23d('0x1a')]));else{if(_0x2b3a64===omnic[_0x76c23d('0x14')][_0x76c23d('0x30')]&&_0x1a3490[_0x76c23d('0x3f')]>=constants[_0x76c23d('0x4d')][_0x76c23d('0x30')][_0x76c23d('0x1a')])throw new errors[(_0x76c23d('0x37'))](errors[_0x76c23d('0x35')][_0x76c23d('0x1f')],this[_0x76c23d('0x2c')][_0x76c23d('0x4c')][_0x76c23d('0x11')](_0x42cc01[_0x76c23d('0x38')][_0x76c23d('0x15')][_0x76c23d('0x29')],'errors',_0x76c23d('0x0'),constants[_0x76c23d('0x4d')][_0x76c23d('0x30')][_0x76c23d('0x1a')]));}}else{if(_0x1a3490[_0x76c23d('0x3f')]>=constants[_0x76c23d('0x4d')][_0x76c23d('0x1a')])throw new errors[(_0x76c23d('0x37'))](errors[_0x76c23d('0x35')]['PREMIUM_MEMBERSHIP_REQUIRED'],this[_0x76c23d('0x2c')][_0x76c23d('0x4c')][_0x76c23d('0x11')](_0x42cc01[_0x76c23d('0x38')][_0x76c23d('0x15')][_0x76c23d('0x29')],'errors',_0x76c23d('0x18'),constants[_0x76c23d('0x4d')][_0x76c23d('0x1a')]));}const _0x3b77cf=await Role_1[_0x76c23d('0x8')][_0x76c23d('0x2d')]({'guild':_0x42cc01[_0x76c23d('0x38')]['id'],'level':_0x2c86e4['level']});if(_0x2b3a64){if(_0x2b3a64===omnic['PremiumTier'][_0x76c23d('0x5')]&&_0x3b77cf>=constants['LIMITS'][_0x76c23d('0x5')][_0x76c23d('0x13')])throw new errors[(_0x76c23d('0x37'))](errors[_0x76c23d('0x35')][_0x76c23d('0x1f')],this[_0x76c23d('0x2c')][_0x76c23d('0x4c')]['getString'](_0x42cc01['guild'][_0x76c23d('0x15')][_0x76c23d('0x29')],_0x76c23d('0x1c'),_0x76c23d('0x4'),constants[_0x76c23d('0x4d')][_0x76c23d('0x5')][_0x76c23d('0x13')]));else{if(_0x2b3a64===omnic[_0x76c23d('0x14')][_0x76c23d('0x30')]&&_0x3b77cf>=constants[_0x76c23d('0x4d')]['PLATINUM'][_0x76c23d('0x13')])throw new errors[(_0x76c23d('0x37'))](errors[_0x76c23d('0x35')]['LIMITED_PREMIUM_MEMBERSHIP'],this[_0x76c23d('0x2c')][_0x76c23d('0x4c')]['getString'](_0x42cc01['guild'][_0x76c23d('0x15')][_0x76c23d('0x29')],_0x76c23d('0x1c'),_0x76c23d('0x4'),constants[_0x76c23d('0x4d')][_0x76c23d('0x30')][_0x76c23d('0x13')]));}}else{if(_0x3b77cf>=constants['LIMITS'][_0x76c23d('0x13')])throw new errors[(_0x76c23d('0x37'))](errors[_0x76c23d('0x35')][_0x76c23d('0x19')],this['client'][_0x76c23d('0x4c')][_0x76c23d('0x11')](_0x42cc01['guild'][_0x76c23d('0x15')][_0x76c23d('0x29')],'errors','premiumLevelRoles',constants[_0x76c23d('0x4d')][_0x76c23d('0x13')]));}}const _0x50961d=this[_0x76c23d('0x2c')]['resolver'][_0x76c23d('0x32')](_0x42cc01[_0x76c23d('0x38')],_0x2c86e4['role'][_0x76c23d('0x1')]('\x20'));if(!_0x50961d)throw new errors[(_0x76c23d('0x37'))](errors[_0x76c23d('0x35')]['ROLE_NOT_FOUND'],this[_0x76c23d('0x2c')][_0x76c23d('0x4c')][_0x76c23d('0x11')](_0x42cc01[_0x76c23d('0x38')][_0x76c23d('0x15')][_0x76c23d('0x29')],'errors',_0x76c23d('0x36')));let _0x26edb9=await _0x50961d[_0x76c23d('0xe')]();return!_0x26edb9&&(_0x26edb9=await _0x50961d[_0x76c23d('0x2')]()),_0x26edb9[_0x76c23d('0x12')]=_0x2c86e4[_0x76c23d('0x12')],await _0x26edb9[_0x76c23d('0x3d')](),await _0x42cc01[_0x76c23d('0x33')][_0x76c23d('0xb')]({'embed':{'color':tesseract_1['Constants'][_0x76c23d('0x4a')][_0x76c23d('0x1e')],'description':this[_0x76c23d('0x2c')][_0x76c23d('0x4c')][_0x76c23d('0x11')](_0x42cc01[_0x76c23d('0x38')][_0x76c23d('0x15')][_0x76c23d('0x29')],'info',_0x76c23d('0x2f'),_0x42cc01['author'][_0x76c23d('0x45')],_0x50961d[_0x76c23d('0x3a')],_0x2c86e4[_0x76c23d('0x12')])}})['catch'](()=>{});}if(_0x2c86e4[_0x76c23d('0x24')])return await Role_1[_0x76c23d('0x8')]['updateMany']({'guild':_0x42cc01[_0x76c23d('0x38')]['id'],'level':_0x2c86e4[_0x76c23d('0x12')]},{'$unset':{'level':0x1}}),await _0x42cc01['channel'][_0x76c23d('0xb')]({'embed':{'color':tesseract_1[_0x76c23d('0x1b')][_0x76c23d('0x4a')]['RED'],'description':this[_0x76c23d('0x2c')]['locale'][_0x76c23d('0x11')](_0x42cc01[_0x76c23d('0x38')][_0x76c23d('0x15')]['language'],_0x76c23d('0x26'),_0x76c23d('0x34'),_0x42cc01[_0x76c23d('0x7')][_0x76c23d('0x45')],_0x2c86e4['level'])}})[_0x76c23d('0x4b')](()=>{});const _0x2d4dbc=await Role_1[_0x76c23d('0x8')][_0x76c23d('0x10')]({'guild':_0x42cc01[_0x76c23d('0x38')]['id'],'level':_0x2c86e4['level']});if(!_0x2d4dbc['length'])throw new Error(_0x76c23d('0x16'));const _0x38ca08=this[_0x76c23d('0x2c')][_0x76c23d('0x42')]['resolveRoles'](_0x42cc01[_0x76c23d('0x38')],_0x2d4dbc[_0x76c23d('0xf')](_0x3088f0=>_0x3088f0[_0x76c23d('0x28')]));return await _0x42cc01[_0x76c23d('0x33')][_0x76c23d('0xb')]({'embed':{'color':tesseract_1[_0x76c23d('0x1b')][_0x76c23d('0x4a')][_0x76c23d('0x41')],'title':_0x76c23d('0x6')+_0x2c86e4[_0x76c23d('0x12')],'fields':[{'name':_0x76c23d('0x17'),'value':_0x38ca08[_0x76c23d('0xf')](_0x57b5e7=>_0x57b5e7[_0x76c23d('0x3a')])[_0x76c23d('0x1')]('\x0a')}]}})[_0x76c23d('0x4b')](()=>{});}const _0x36d850=await Role_1[_0x76c23d('0x8')][_0x76c23d('0x10')]({'guild':_0x42cc01[_0x76c23d('0x38')]['id'],'level':{'$exists':!![],'$ne':null}});if(!_0x36d850[_0x76c23d('0x3f')])throw new Error(_0x76c23d('0x43'));const _0x5bc123={};for(const _0x3f4d1a of _0x36d850){_0x3f4d1a[_0x76c23d('0x12')]in _0x5bc123?_0x5bc123[_0x3f4d1a['level']][_0x76c23d('0x21')](_0x3f4d1a[_0x76c23d('0x28')]):_0x5bc123[_0x3f4d1a[_0x76c23d('0x12')]]=[_0x3f4d1a[_0x76c23d('0x28')]];}return await _0x42cc01[_0x76c23d('0x33')]['send']({'embed':{'color':tesseract_1[_0x76c23d('0x1b')][_0x76c23d('0x4a')][_0x76c23d('0x41')],'title':'Level-Up\x20Roles','fields':Object['keys'](_0x5bc123)[_0x76c23d('0xf')](_0x43c840=>({'name':_0x76c23d('0x6')+_0x43c840,'value':_0x5bc123[_0x43c840][_0x76c23d('0xf')](_0x1db6bd=>_0x42cc01[_0x76c23d('0x38')]['roles'][_0x76c23d('0x48')][_0x76c23d('0x2e')](_0x1db6bd)?_0x42cc01['guild'][_0x76c23d('0x23')][_0x76c23d('0x48')][_0x76c23d('0x27')](_0x1db6bd)[_0x76c23d('0x3a')]:_0x1db6bd)[_0x76c23d('0x1')](',\x20')}))}})['catch'](()=>{});};}};
const a64_0xf18d=['MANAGE_ROLES','roleNotFound','LIMITS','RED','BASTION_ERROR_TYPE','constructor','join','error','../../utils/numbers','Level\x20','DiscordError','default','../../utils/omnic','It\x20allows\x20you\x20to\x20add\x20roles\x20to\x20a\x20level.\x20When\x20members\x20reach\x20that\x20level,\x20they\x27ll\x20be\x20awarded\x20those\x20roles.','Level-Up\x20Roles','resolveRoles','save','info','getString','isPublicBastion','LIMITED_PREMIUM_MEMBERSHIP','keys','IRIS','exports','countDocuments','resolveRole','fetchDocument','clamp','name','send','emoji','PLATINUM','resolver','errors','apply','client','locale','length','find','get','distinct','PremiumTier','document','NO_LEVEL_UP_ROLES','levelUpRoles','_id','ROLE_LEVELS','levelUpRoles\x20--level\x20NUMBER','role','return\x20/\x22\x20+\x20this\x20+\x20\x22/','membershipLimitRoleLevels','Constants','channel','compile','../../models/Role','GOLD','COLORS','guild','Roles','membershipLimitLevelRoles','../../utils/gamification','author','remove','catch','@bastion/tesseract','roleLevelClear','roles','../../utils/constants','premiumLevelRoles','createDocument','levelUpRoles\x20--level\x20NUMBER\x20--remove','../../utils/errors','language','MAX_LEVEL','Command','cache','test','premiumRoleLevels','level','tag','updateMany','ROLES_PER_LEVEL','PREMIUM_MEMBERSHIP_REQUIRED','GREEN','map'];(function(_0x4efd58,_0xf18dd6){const _0x3edfb1=function(_0x2b8b7f){while(--_0x2b8b7f){_0x4efd58['push'](_0x4efd58['shift']());}};const _0x2c3d7c=function(){const _0x1150da={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x44772a,_0x3a72c7,_0x55f37b,_0x150113){_0x150113=_0x150113||{};let _0x2e2b23=_0x3a72c7+'='+_0x55f37b;let _0x3133d1=0x0;for(let _0x7eeb19=0x0,_0xcd6cf9=_0x44772a['length'];_0x7eeb19<_0xcd6cf9;_0x7eeb19++){const _0x35a943=_0x44772a[_0x7eeb19];_0x2e2b23+=';\x20'+_0x35a943;const _0x1dcae7=_0x44772a[_0x35a943];_0x44772a['push'](_0x1dcae7);_0xcd6cf9=_0x44772a['length'];if(_0x1dcae7!==!![]){_0x2e2b23+='='+_0x1dcae7;}}_0x150113['cookie']=_0x2e2b23;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4355bd,_0x11afc7){_0x4355bd=_0x4355bd||function(_0x34a63d){return _0x34a63d;};const _0xbc009f=_0x4355bd(new RegExp('(?:^|;\x20)'+_0x11afc7['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x19f6a4=function(_0x3fd597,_0x1f9127){_0x3fd597(++_0x1f9127);};_0x19f6a4(_0x3edfb1,_0xf18dd6);return _0xbc009f?decodeURIComponent(_0xbc009f[0x1]):undefined;}};const _0x2fd9ca=function(){const _0x4a0639=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4a0639['test'](_0x1150da['removeCookie']['toString']());};_0x1150da['updateCookie']=_0x2fd9ca;let _0x2cc670='';const _0x2d381f=_0x1150da['updateCookie']();if(!_0x2d381f){_0x1150da['setCookie'](['*'],'counter',0x1);}else if(_0x2d381f){_0x2cc670=_0x1150da['getCookie'](null,'counter');}else{_0x1150da['removeCookie']();}};_0x2c3d7c();}(a64_0xf18d,0x78));const a64_0x3edf=function(_0x4efd58,_0xf18dd6){_0x4efd58=_0x4efd58-0x0;let _0x3edfb1=a64_0xf18d[_0x4efd58];return _0x3edfb1;};const a64_0x1150da=function(){let _0x179cf6=!![];return function(_0x3e19ae,_0x15c38a){const _0x39e5c0=_0x179cf6?function(){if(_0x15c38a){const _0x1121ff=_0x15c38a[a64_0x3edf('0x54')](_0x3e19ae,arguments);_0x15c38a=null;return _0x1121ff;}}:function(){};_0x179cf6=![];return _0x39e5c0;};}();const a64_0x2b8b7f=a64_0x1150da(this,function(){const _0x41c1c7=function(){const _0x3259d5=_0x41c1c7[a64_0x3edf('0x37')](a64_0x3edf('0xe'))()[a64_0x3edf('0x12')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x3259d5[a64_0x3edf('0x29')](a64_0x2b8b7f);};return _0x41c1c7();});a64_0x2b8b7f();'use strict';const tesseract_1=require(a64_0x3edf('0x1d'));const Role_1=require(a64_0x3edf('0x13'));const constants=require(a64_0x3edf('0x20'));const errors=require(a64_0x3edf('0x24'));const gamification=require(a64_0x3edf('0x19'));const numbers=require(a64_0x3edf('0x3a'));const omnic=require(a64_0x3edf('0x3e'));module[a64_0x3edf('0x49')]=class LevelUpRolesCommand extends tesseract_1[a64_0x3edf('0x27')]{constructor(){super(a64_0x3edf('0x9'),{'description':a64_0x3edf('0x3f'),'triggers':[],'arguments':{'array':[a64_0x3edf('0xd')],'boolean':[a64_0x3edf('0x1b')],'string':['role'],'number':['level'],'coerce':{'level':_0x1e55cb=>numbers[a64_0x3edf('0x4d')](_0x1e55cb,0x1,gamification[a64_0x3edf('0x26')])}},'scope':a64_0x3edf('0x16'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':['MANAGE_ROLES'],'userPermissions':[a64_0x3edf('0x32')],'syntax':[a64_0x3edf('0x9'),a64_0x3edf('0xc'),'levelUpRoles\x20--level\x20NUMBER\x20--role\x20ROLE',a64_0x3edf('0x23')]});this['exec']=async(_0x34bfd1,_0x3500ef)=>{if(_0x3500ef[a64_0x3edf('0x2b')]){if(_0x3500ef[a64_0x3edf('0xd')]){if(constants[a64_0x3edf('0x45')](this[a64_0x3edf('0x0')]['user'])){const _0x4899b4=await omnic['fetchPremiumTier'](_0x34bfd1[a64_0x3edf('0x16')])['catch'](()=>{});const _0x2f9d34=await Role_1[a64_0x3edf('0x3d')][a64_0x3edf('0x5')](a64_0x3edf('0x2b'),{'guild':_0x34bfd1[a64_0x3edf('0x16')]['id'],'level':{'$exists':!![],'$ne':null}});if(_0x4899b4){if(_0x4899b4===omnic[a64_0x3edf('0x6')]['GOLD']&&_0x2f9d34[a64_0x3edf('0x2')]>=constants[a64_0x3edf('0x34')][a64_0x3edf('0x14')][a64_0x3edf('0xb')]){throw new errors[(a64_0x3edf('0x3c'))](errors[a64_0x3edf('0x36')][a64_0x3edf('0x46')],this[a64_0x3edf('0x0')][a64_0x3edf('0x1')]['getString'](_0x34bfd1[a64_0x3edf('0x16')][a64_0x3edf('0x7')][a64_0x3edf('0x25')],a64_0x3edf('0x53'),a64_0x3edf('0xf'),constants['LIMITS']['GOLD'][a64_0x3edf('0xb')]));}else if(_0x4899b4===omnic['PremiumTier'][a64_0x3edf('0x51')]&&_0x2f9d34['length']>=constants[a64_0x3edf('0x34')][a64_0x3edf('0x51')][a64_0x3edf('0xb')]){throw new errors[(a64_0x3edf('0x3c'))](errors[a64_0x3edf('0x36')][a64_0x3edf('0x46')],this[a64_0x3edf('0x0')][a64_0x3edf('0x1')][a64_0x3edf('0x44')](_0x34bfd1[a64_0x3edf('0x16')][a64_0x3edf('0x7')][a64_0x3edf('0x25')],a64_0x3edf('0x53'),a64_0x3edf('0xf'),constants['LIMITS'][a64_0x3edf('0x51')]['ROLE_LEVELS']));}}else if(_0x2f9d34[a64_0x3edf('0x2')]>=constants['LIMITS'][a64_0x3edf('0xb')]){throw new errors[(a64_0x3edf('0x3c'))](errors['BASTION_ERROR_TYPE']['PREMIUM_MEMBERSHIP_REQUIRED'],this[a64_0x3edf('0x0')]['locale'][a64_0x3edf('0x44')](_0x34bfd1[a64_0x3edf('0x16')][a64_0x3edf('0x7')]['language'],'errors',a64_0x3edf('0x2a'),constants['LIMITS'][a64_0x3edf('0xb')]));}const _0x320e54=await Role_1['default'][a64_0x3edf('0x4a')]({'guild':_0x34bfd1[a64_0x3edf('0x16')]['id'],'level':_0x3500ef[a64_0x3edf('0x2b')]});if(_0x4899b4){if(_0x4899b4===omnic[a64_0x3edf('0x6')][a64_0x3edf('0x14')]&&_0x320e54>=constants[a64_0x3edf('0x34')][a64_0x3edf('0x14')][a64_0x3edf('0x2e')]){throw new errors[(a64_0x3edf('0x3c'))](errors[a64_0x3edf('0x36')][a64_0x3edf('0x46')],this[a64_0x3edf('0x0')][a64_0x3edf('0x1')][a64_0x3edf('0x44')](_0x34bfd1[a64_0x3edf('0x16')][a64_0x3edf('0x7')][a64_0x3edf('0x25')],a64_0x3edf('0x53'),a64_0x3edf('0x18'),constants[a64_0x3edf('0x34')][a64_0x3edf('0x14')][a64_0x3edf('0x2e')]));}else if(_0x4899b4===omnic['PremiumTier'][a64_0x3edf('0x51')]&&_0x320e54>=constants[a64_0x3edf('0x34')]['PLATINUM'][a64_0x3edf('0x2e')]){throw new errors[(a64_0x3edf('0x3c'))](errors['BASTION_ERROR_TYPE'][a64_0x3edf('0x46')],this[a64_0x3edf('0x0')]['locale'][a64_0x3edf('0x44')](_0x34bfd1[a64_0x3edf('0x16')][a64_0x3edf('0x7')][a64_0x3edf('0x25')],a64_0x3edf('0x53'),a64_0x3edf('0x18'),constants['LIMITS'][a64_0x3edf('0x51')][a64_0x3edf('0x2e')]));}}else if(_0x320e54>=constants['LIMITS'][a64_0x3edf('0x2e')]){throw new errors[(a64_0x3edf('0x3c'))](errors['BASTION_ERROR_TYPE'][a64_0x3edf('0x2f')],this[a64_0x3edf('0x0')][a64_0x3edf('0x1')]['getString'](_0x34bfd1[a64_0x3edf('0x16')][a64_0x3edf('0x7')][a64_0x3edf('0x25')],'errors',a64_0x3edf('0x21'),constants[a64_0x3edf('0x34')][a64_0x3edf('0x2e')]));}}const _0x4bb667=this['client'][a64_0x3edf('0x52')][a64_0x3edf('0x4b')](_0x34bfd1['guild'],_0x3500ef[a64_0x3edf('0xd')]['join']('\x20'));if(!_0x4bb667)throw new errors['DiscordError'](errors[a64_0x3edf('0x36')]['ROLE_NOT_FOUND'],this['client'][a64_0x3edf('0x1')][a64_0x3edf('0x44')](_0x34bfd1[a64_0x3edf('0x16')][a64_0x3edf('0x7')][a64_0x3edf('0x25')],a64_0x3edf('0x39'),a64_0x3edf('0x33')));let _0x4a1463=await _0x4bb667[a64_0x3edf('0x4c')]();if(!_0x4a1463&&_0x3500ef[a64_0x3edf('0x50')]){_0x4a1463=await _0x4bb667[a64_0x3edf('0x22')]();}_0x4a1463[a64_0x3edf('0x2b')]=_0x3500ef[a64_0x3edf('0x2b')];await _0x4a1463[a64_0x3edf('0x42')]();return await _0x34bfd1[a64_0x3edf('0x11')][a64_0x3edf('0x4f')]({'embed':{'color':tesseract_1[a64_0x3edf('0x10')][a64_0x3edf('0x15')][a64_0x3edf('0x30')],'description':this[a64_0x3edf('0x0')][a64_0x3edf('0x1')][a64_0x3edf('0x44')](_0x34bfd1[a64_0x3edf('0x16')]['document']['language'],a64_0x3edf('0x43'),'roleLevelAdd',_0x34bfd1['author'][a64_0x3edf('0x2c')],_0x4bb667[a64_0x3edf('0x4e')],_0x3500ef['level'])}})[a64_0x3edf('0x1c')](()=>{});}if(_0x3500ef['remove']){await Role_1[a64_0x3edf('0x3d')][a64_0x3edf('0x2d')]({'guild':_0x34bfd1[a64_0x3edf('0x16')]['id'],'level':_0x3500ef[a64_0x3edf('0x2b')]},{'$unset':{'level':0x1}});return await _0x34bfd1[a64_0x3edf('0x11')][a64_0x3edf('0x4f')]({'embed':{'color':tesseract_1[a64_0x3edf('0x10')]['COLORS'][a64_0x3edf('0x35')],'description':this[a64_0x3edf('0x0')]['locale'][a64_0x3edf('0x44')](_0x34bfd1[a64_0x3edf('0x16')]['document'][a64_0x3edf('0x25')],a64_0x3edf('0x43'),a64_0x3edf('0x1e'),_0x34bfd1[a64_0x3edf('0x1a')][a64_0x3edf('0x2c')],_0x3500ef[a64_0x3edf('0x2b')])}})['catch'](()=>{});}const _0x16ed97=await Role_1['default'][a64_0x3edf('0x3')]({'guild':_0x34bfd1['guild']['id'],'level':_0x3500ef['level']});if(!_0x16ed97[a64_0x3edf('0x2')])throw new Error('NO_ROLES_FOR_LEVEL');const _0x231b57=this[a64_0x3edf('0x0')][a64_0x3edf('0x52')][a64_0x3edf('0x41')](_0x34bfd1[a64_0x3edf('0x16')],_0x16ed97[a64_0x3edf('0x31')](_0x4e41d9=>_0x4e41d9[a64_0x3edf('0xa')]));return await _0x34bfd1[a64_0x3edf('0x11')][a64_0x3edf('0x4f')]({'embed':{'color':tesseract_1[a64_0x3edf('0x10')]['COLORS']['IRIS'],'title':a64_0x3edf('0x3b')+_0x3500ef[a64_0x3edf('0x2b')],'fields':[{'name':a64_0x3edf('0x17'),'value':_0x231b57['map'](_0x294f05=>_0x294f05[a64_0x3edf('0x4e')])[a64_0x3edf('0x38')]('\x0a')}]}})['catch'](()=>{});}const _0x4348d4=await Role_1[a64_0x3edf('0x3d')][a64_0x3edf('0x3')]({'guild':_0x34bfd1[a64_0x3edf('0x16')]['id'],'level':{'$exists':!![],'$ne':null}});if(!_0x4348d4[a64_0x3edf('0x2')])throw new Error(a64_0x3edf('0x8'));const _0x52275b={};for(const _0x5a9ed5 of _0x4348d4){if(_0x5a9ed5[a64_0x3edf('0x2b')]in _0x52275b){_0x52275b[_0x5a9ed5[a64_0x3edf('0x2b')]]['push'](_0x5a9ed5['_id']);}else{_0x52275b[_0x5a9ed5['level']]=[_0x5a9ed5[a64_0x3edf('0xa')]];}}return await _0x34bfd1[a64_0x3edf('0x11')][a64_0x3edf('0x4f')]({'embed':{'color':tesseract_1[a64_0x3edf('0x10')][a64_0x3edf('0x15')][a64_0x3edf('0x48')],'title':a64_0x3edf('0x40'),'fields':Object[a64_0x3edf('0x47')](_0x52275b)['map'](_0x456d1d=>({'name':a64_0x3edf('0x3b')+_0x456d1d,'value':_0x52275b[_0x456d1d][a64_0x3edf('0x31')](_0x51eb7c=>_0x34bfd1[a64_0x3edf('0x16')]['roles'][a64_0x3edf('0x28')]['has'](_0x51eb7c)?_0x34bfd1[a64_0x3edf('0x16')][a64_0x3edf('0x1f')][a64_0x3edf('0x28')][a64_0x3edf('0x4')](_0x51eb7c)[a64_0x3edf('0x4e')]:_0x51eb7c)[a64_0x3edf('0x38')](',\x20')}))}})['catch'](()=>{});};}};
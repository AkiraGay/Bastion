const a66_0x5891=['role','BASTION_ERROR_TYPE','isPublicBastion','../../utils/constants','_id','join','levelUpRoles\x20--level\x20NUMBER','constructor','PremiumTier','errors','../../models/Role','remove','levelUpRoles\x20--level\x20NUMBER\x20--remove','fetchDocument','MAX_LEVEL','save','premiumLevelRoles','map','PREMIUM_MEMBERSHIP_REQUIRED','document','It\x20allows\x20you\x20to\x20add\x20roles\x20to\x20a\x20level.\x20When\x20members\x20reach\x20that\x20level,\x20they\x27ll\x20be\x20awarded\x20those\x20roles.','cache','find','../../utils/numbers','error','IRIS','has','roleLevelAdd','channel','roleLevelClear','tag','GREEN','../../utils/omnic','distinct','language','membershipLimitRoleLevels','RED','guild','../../utils/gamification','roles','author','NO_ROLES_FOR_LEVEL','@bastion/tesseract','send','name','resolveRoles','PLATINUM','ROLES_PER_LEVEL','createDocument','countDocuments','NO_LEVEL_UP_ROLES','client','levelUpRoles\x20--level\x20NUMBER\x20--role\x20ROLE','level','fetchPremiumTier','ROLE_LEVELS','resolver','test','length','LIMITED_PREMIUM_MEMBERSHIP','COLORS','resolveRole','premiumRoleLevels','MANAGE_ROLES','../../utils/errors','LIMITS','membershipLimitLevelRoles','Constants','push','getString','default','DiscordError','locale','exec','updateMany','return\x20/\x22\x20+\x20this\x20+\x20\x22/','Level\x20','GOLD','levelUpRoles','info','catch','keys'];(function(_0x197abe,_0x58919b){const _0x523c76=function(_0x3235d3){while(--_0x3235d3){_0x197abe['push'](_0x197abe['shift']());}},_0x2875b7=function(){const _0x35dd34={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3713c1,_0x2789f0,_0x282ee4,_0x373dc7){_0x373dc7=_0x373dc7||{};let _0x593992=_0x2789f0+'='+_0x282ee4,_0x2b3d58=0x0;for(let _0x31070d=0x0,_0x3ebf2c=_0x3713c1['length'];_0x31070d<_0x3ebf2c;_0x31070d++){const _0x533bd3=_0x3713c1[_0x31070d];_0x593992+=';\x20'+_0x533bd3;const _0x1e5a2b=_0x3713c1[_0x533bd3];_0x3713c1['push'](_0x1e5a2b),_0x3ebf2c=_0x3713c1['length'],_0x1e5a2b!==!![]&&(_0x593992+='='+_0x1e5a2b);}_0x373dc7['cookie']=_0x593992;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3cb28d,_0x26731f){_0x3cb28d=_0x3cb28d||function(_0x146643){return _0x146643;};const _0xfaa9df=_0x3cb28d(new RegExp('(?:^|;\x20)'+_0x26731f['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x43729e=function(_0x15808a,_0x3dfebd){_0x15808a(++_0x3dfebd);};return _0x43729e(_0x523c76,_0x58919b),_0xfaa9df?decodeURIComponent(_0xfaa9df[0x1]):undefined;}},_0x5a3fb2=function(){const _0x55ae41=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x55ae41['test'](_0x35dd34['removeCookie']['toString']());};_0x35dd34['updateCookie']=_0x5a3fb2;let _0x47e163='';const _0x4e0fed=_0x35dd34['updateCookie']();if(!_0x4e0fed)_0x35dd34['setCookie'](['*'],'counter',0x1);else _0x4e0fed?_0x47e163=_0x35dd34['getCookie'](null,'counter'):_0x35dd34['removeCookie']();};_0x2875b7();}(a66_0x5891,0xcf));const a66_0x523c=function(_0x197abe,_0x58919b){_0x197abe=_0x197abe-0x0;let _0x523c76=a66_0x5891[_0x197abe];return _0x523c76;};const a66_0x282ee4=function(){let _0x423688=!![];return function(_0x23c0e8,_0x2a5424){const _0xedbf9=_0x423688?function(){if(_0x2a5424){const _0x529d2d=_0x2a5424['apply'](_0x23c0e8,arguments);return _0x2a5424=null,_0x529d2d;}}:function(){};return _0x423688=![],_0xedbf9;};}(),a66_0x2789f0=a66_0x282ee4(this,function(){const _0x3b6121=function(){const _0x23343c=_0x3b6121[a66_0x523c('0x2e')](a66_0x523c('0x20'))()[a66_0x523c('0x2e')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x23343c[a66_0x523c('0xe')](a66_0x2789f0);};return _0x3b6121();});a66_0x2789f0();'use strict';const tesseract_1=require(a66_0x523c('0x51')),Role_1=require(a66_0x523c('0x31')),constants=require(a66_0x523c('0x2a')),errors=require(a66_0x523c('0x15')),gamification=require(a66_0x523c('0x4d')),numbers=require(a66_0x523c('0x3e')),omnic=require(a66_0x523c('0x47'));module['exports']=class LevelUpRolesCommand extends tesseract_1['Command']{constructor(){super('levelUpRoles',{'description':a66_0x523c('0x3b'),'triggers':[],'arguments':{'array':[a66_0x523c('0x27')],'boolean':[a66_0x523c('0x32')],'string':[a66_0x523c('0x27')],'number':[a66_0x523c('0xa')],'coerce':{'level':_0x396d4f=>numbers['clamp'](_0x396d4f,0x1,gamification[a66_0x523c('0x35')])}},'scope':a66_0x523c('0x4c'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':['MANAGE_ROLES'],'userPermissions':[a66_0x523c('0x14')],'syntax':[a66_0x523c('0x23'),a66_0x523c('0x2d'),a66_0x523c('0x9'),a66_0x523c('0x33')]}),this[a66_0x523c('0x1e')]=async(_0x413b53,_0x56ea28)=>{if(_0x56ea28[a66_0x523c('0xa')]){if(_0x56ea28[a66_0x523c('0x27')]){if(constants[a66_0x523c('0x29')](this[a66_0x523c('0x8')]['user'])){const _0x3086be=await omnic[a66_0x523c('0xb')](_0x413b53[a66_0x523c('0x4c')])[a66_0x523c('0x25')](()=>{}),_0x286547=await Role_1['default'][a66_0x523c('0x48')](a66_0x523c('0xa'),{'guild':_0x413b53['guild']['id'],'level':{'$exists':!![],'$ne':null}});if(_0x3086be){if(_0x3086be===omnic[a66_0x523c('0x2f')][a66_0x523c('0x22')]&&_0x286547[a66_0x523c('0xf')]>=constants[a66_0x523c('0x16')]['GOLD'][a66_0x523c('0xc')])throw new errors['DiscordError'](errors[a66_0x523c('0x28')]['LIMITED_PREMIUM_MEMBERSHIP'],this[a66_0x523c('0x8')][a66_0x523c('0x1d')]['getString'](_0x413b53['guild'][a66_0x523c('0x3a')][a66_0x523c('0x49')],a66_0x523c('0x30'),a66_0x523c('0x4a'),constants['LIMITS'][a66_0x523c('0x22')][a66_0x523c('0xc')]));else{if(_0x3086be===omnic['PremiumTier'][a66_0x523c('0x3')]&&_0x286547[a66_0x523c('0xf')]>=constants[a66_0x523c('0x16')]['PLATINUM'][a66_0x523c('0xc')])throw new errors[(a66_0x523c('0x1c'))](errors[a66_0x523c('0x28')][a66_0x523c('0x10')],this[a66_0x523c('0x8')][a66_0x523c('0x1d')][a66_0x523c('0x1a')](_0x413b53[a66_0x523c('0x4c')][a66_0x523c('0x3a')][a66_0x523c('0x49')],a66_0x523c('0x30'),a66_0x523c('0x4a'),constants[a66_0x523c('0x16')][a66_0x523c('0x3')][a66_0x523c('0xc')]));}}else{if(_0x286547['length']>=constants[a66_0x523c('0x16')][a66_0x523c('0xc')])throw new errors[(a66_0x523c('0x1c'))](errors[a66_0x523c('0x28')][a66_0x523c('0x39')],this[a66_0x523c('0x8')][a66_0x523c('0x1d')]['getString'](_0x413b53[a66_0x523c('0x4c')][a66_0x523c('0x3a')][a66_0x523c('0x49')],a66_0x523c('0x30'),a66_0x523c('0x13'),constants[a66_0x523c('0x16')][a66_0x523c('0xc')]));}const _0x326a84=await Role_1[a66_0x523c('0x1b')][a66_0x523c('0x6')]({'guild':_0x413b53[a66_0x523c('0x4c')]['id'],'level':_0x56ea28[a66_0x523c('0xa')]});if(_0x3086be){if(_0x3086be===omnic['PremiumTier'][a66_0x523c('0x22')]&&_0x326a84>=constants[a66_0x523c('0x16')][a66_0x523c('0x22')][a66_0x523c('0x4')])throw new errors[(a66_0x523c('0x1c'))](errors[a66_0x523c('0x28')][a66_0x523c('0x10')],this[a66_0x523c('0x8')][a66_0x523c('0x1d')][a66_0x523c('0x1a')](_0x413b53[a66_0x523c('0x4c')][a66_0x523c('0x3a')][a66_0x523c('0x49')],a66_0x523c('0x30'),a66_0x523c('0x17'),constants['LIMITS'][a66_0x523c('0x22')][a66_0x523c('0x4')]));else{if(_0x3086be===omnic['PremiumTier'][a66_0x523c('0x3')]&&_0x326a84>=constants['LIMITS'][a66_0x523c('0x3')][a66_0x523c('0x4')])throw new errors[(a66_0x523c('0x1c'))](errors[a66_0x523c('0x28')][a66_0x523c('0x10')],this['client']['locale'][a66_0x523c('0x1a')](_0x413b53[a66_0x523c('0x4c')][a66_0x523c('0x3a')]['language'],a66_0x523c('0x30'),a66_0x523c('0x17'),constants['LIMITS']['PLATINUM']['ROLES_PER_LEVEL']));}}else{if(_0x326a84>=constants['LIMITS'][a66_0x523c('0x4')])throw new errors[(a66_0x523c('0x1c'))](errors[a66_0x523c('0x28')][a66_0x523c('0x39')],this['client'][a66_0x523c('0x1d')][a66_0x523c('0x1a')](_0x413b53[a66_0x523c('0x4c')][a66_0x523c('0x3a')][a66_0x523c('0x49')],'errors',a66_0x523c('0x37'),constants[a66_0x523c('0x16')][a66_0x523c('0x4')]));}}const _0x4ceebc=this['client'][a66_0x523c('0xd')][a66_0x523c('0x12')](_0x413b53[a66_0x523c('0x4c')],_0x56ea28['role'][a66_0x523c('0x2c')]('\x20'));if(!_0x4ceebc)throw new errors[(a66_0x523c('0x1c'))](errors['BASTION_ERROR_TYPE']['ROLE_NOT_FOUND'],this[a66_0x523c('0x8')][a66_0x523c('0x1d')][a66_0x523c('0x1a')](_0x413b53['guild'][a66_0x523c('0x3a')]['language'],a66_0x523c('0x3f'),'roleNotFound'));let _0x11c6ae=await _0x4ceebc[a66_0x523c('0x34')]();return!_0x11c6ae&&(_0x11c6ae=await _0x4ceebc[a66_0x523c('0x5')]()),_0x11c6ae['level']=_0x56ea28[a66_0x523c('0xa')],await _0x11c6ae[a66_0x523c('0x36')](),await _0x413b53[a66_0x523c('0x43')][a66_0x523c('0x0')]({'embed':{'color':tesseract_1[a66_0x523c('0x18')][a66_0x523c('0x11')][a66_0x523c('0x46')],'description':this[a66_0x523c('0x8')]['locale'][a66_0x523c('0x1a')](_0x413b53['guild']['document'][a66_0x523c('0x49')],a66_0x523c('0x24'),a66_0x523c('0x42'),_0x413b53[a66_0x523c('0x4f')]['tag'],_0x4ceebc[a66_0x523c('0x1')],_0x56ea28[a66_0x523c('0xa')])}})[a66_0x523c('0x25')](()=>{});}if(_0x56ea28['remove'])return await Role_1[a66_0x523c('0x1b')][a66_0x523c('0x1f')]({'guild':_0x413b53['guild']['id'],'level':_0x56ea28['level']},{'$unset':{'level':0x1}}),await _0x413b53[a66_0x523c('0x43')]['send']({'embed':{'color':tesseract_1['Constants'][a66_0x523c('0x11')][a66_0x523c('0x4b')],'description':this[a66_0x523c('0x8')][a66_0x523c('0x1d')][a66_0x523c('0x1a')](_0x413b53[a66_0x523c('0x4c')][a66_0x523c('0x3a')][a66_0x523c('0x49')],a66_0x523c('0x24'),a66_0x523c('0x44'),_0x413b53['author'][a66_0x523c('0x45')],_0x56ea28[a66_0x523c('0xa')])}})[a66_0x523c('0x25')](()=>{});const _0x18bb4c=await Role_1[a66_0x523c('0x1b')][a66_0x523c('0x3d')]({'guild':_0x413b53[a66_0x523c('0x4c')]['id'],'level':_0x56ea28[a66_0x523c('0xa')]});if(!_0x18bb4c[a66_0x523c('0xf')])throw new Error(a66_0x523c('0x50'));const _0x37aa9c=this['client']['resolver'][a66_0x523c('0x2')](_0x413b53[a66_0x523c('0x4c')],_0x18bb4c[a66_0x523c('0x38')](_0x336267=>_0x336267['_id']));return await _0x413b53[a66_0x523c('0x43')]['send']({'embed':{'color':tesseract_1['Constants']['COLORS'][a66_0x523c('0x40')],'title':'Level\x20'+_0x56ea28[a66_0x523c('0xa')],'fields':[{'name':'Roles','value':_0x37aa9c['map'](_0x24c67d=>_0x24c67d['name'])[a66_0x523c('0x2c')]('\x0a')}]}})['catch'](()=>{});}const _0x279384=await Role_1[a66_0x523c('0x1b')][a66_0x523c('0x3d')]({'guild':_0x413b53[a66_0x523c('0x4c')]['id'],'level':{'$exists':!![],'$ne':null}});if(!_0x279384[a66_0x523c('0xf')])throw new Error(a66_0x523c('0x7'));const _0x1e3c32={};for(const _0x28c2c7 of _0x279384){_0x28c2c7[a66_0x523c('0xa')]in _0x1e3c32?_0x1e3c32[_0x28c2c7[a66_0x523c('0xa')]][a66_0x523c('0x19')](_0x28c2c7['_id']):_0x1e3c32[_0x28c2c7[a66_0x523c('0xa')]]=[_0x28c2c7[a66_0x523c('0x2b')]];}return await _0x413b53['channel'][a66_0x523c('0x0')]({'embed':{'color':tesseract_1[a66_0x523c('0x18')][a66_0x523c('0x11')][a66_0x523c('0x40')],'title':'Level-Up\x20Roles','fields':Object[a66_0x523c('0x26')](_0x1e3c32)[a66_0x523c('0x38')](_0xfea3c=>({'name':a66_0x523c('0x21')+_0xfea3c,'value':_0x1e3c32[_0xfea3c][a66_0x523c('0x38')](_0x589672=>_0x413b53[a66_0x523c('0x4c')][a66_0x523c('0x4e')][a66_0x523c('0x3c')][a66_0x523c('0x41')](_0x589672)?_0x413b53[a66_0x523c('0x4c')][a66_0x523c('0x4e')][a66_0x523c('0x3c')]['get'](_0x589672)[a66_0x523c('0x1')]:_0x589672)[a66_0x523c('0x2c')](',\x20')}))}})[a66_0x523c('0x25')](()=>{});};}};
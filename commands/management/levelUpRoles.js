const a87_0x18ac=['roleLevelAdd','DiscordError','Level\x20','ROLE_NOT_FOUND','../../utils/gamification','test','send','NO_LEVEL_UP_ROLES','role','Constants','../../utils/constants','COLORS','level','PremiumTier','ROLES_PER_LEVEL','channel','get','cache','_id','NO_ROLES_FOR_LEVEL','language','client','It\x20allows\x20you\x20to\x20add\x20roles\x20to\x20a\x20level.\x20When\x20members\x20reach\x20that\x20level,\x20they\x27ll\x20be\x20awarded\x20those\x20roles.','levelUpRoles','join','remove','constructor','length','updateMany','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','LIMITED_PREMIUM_MEMBERSHIP','resolveRole','resolver','roles','has','locale','IRIS','Command','MAX_LEVEL','GOLD','levelUpRoles\x20--level\x20NUMBER\x20--role\x20ROLE','createDocument','../../utils/errors','roleNotFound','../../models/Role','document','getString','membershipLimitRoleLevels','PLATINUM','isPublicBastion','name','default','PREMIUM_MEMBERSHIP_REQUIRED','return\x20/\x22\x20+\x20this\x20+\x20\x22/','BASTION_ERROR_TYPE','user','MANAGE_ROLES','save','catch','Roles','resolveRoles','info','distinct','LIMITS','author','map','@bastion/tesseract','keys','fetchPremiumTier','membershipLimitLevelRoles','ROLE_LEVELS','roleLevelClear','RED','../../utils/omnic','guild','errors','Level-Up\x20Roles','GREEN','premiumLevelRoles','../../utils/numbers','levelUpRoles\x20--level\x20NUMBER','premiumRoleLevels','exports'];(function(_0x399b51,_0x448f74){const _0x18ac62=function(_0x5a3007){while(--_0x5a3007){_0x399b51['push'](_0x399b51['shift']());}},_0x5ee70e=function(){const _0x49536b={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x33dc19,_0x45ad0e,_0xfa56e9,_0x20d720){_0x20d720=_0x20d720||{};let _0x46bc8e=_0x45ad0e+'='+_0xfa56e9,_0x56e419=0x0;for(let _0x323484=0x0,_0x3c7cfa=_0x33dc19['length'];_0x323484<_0x3c7cfa;_0x323484++){const _0x554d5a=_0x33dc19[_0x323484];_0x46bc8e+=';\x20'+_0x554d5a;const _0x19eef9=_0x33dc19[_0x554d5a];_0x33dc19['push'](_0x19eef9),_0x3c7cfa=_0x33dc19['length'],_0x19eef9!==!![]&&(_0x46bc8e+='='+_0x19eef9);}_0x20d720['cookie']=_0x46bc8e;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2ab23a,_0x3563aa){_0x2ab23a=_0x2ab23a||function(_0x3a0d42){return _0x3a0d42;};const _0x1d1333=_0x2ab23a(new RegExp('(?:^|;\x20)'+_0x3563aa['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x5c4bc7=function(_0x1c8898,_0x41bacb){_0x1c8898(++_0x41bacb);};return _0x5c4bc7(_0x18ac62,_0x448f74),_0x1d1333?decodeURIComponent(_0x1d1333[0x1]):undefined;}},_0x14a61d=function(){const _0x48a839=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x48a839['test'](_0x49536b['removeCookie']['toString']());};_0x49536b['updateCookie']=_0x14a61d;let _0x22d812='';const _0x18208a=_0x49536b['updateCookie']();if(!_0x18208a)_0x49536b['setCookie'](['*'],'counter',0x1);else _0x18208a?_0x22d812=_0x49536b['getCookie'](null,'counter'):_0x49536b['removeCookie']();};_0x5ee70e();}(a87_0x18ac,0x173));const a87_0x5ee7=function(_0x399b51,_0x448f74){_0x399b51=_0x399b51-0x1a6;let _0x18ac62=a87_0x18ac[_0x399b51];return _0x18ac62;};const _0x21b0ae=a87_0x5ee7,a87_0x14a61d=function(){let _0x18208a=!![];return function(_0x33dc19,_0x45ad0e){const _0xfa56e9=_0x18208a?function(){if(_0x45ad0e){const _0x20d720=_0x45ad0e['apply'](_0x33dc19,arguments);return _0x45ad0e=null,_0x20d720;}}:function(){};return _0x18208a=![],_0xfa56e9;};}(),a87_0x49536b=a87_0x14a61d(this,function(){const _0x46bc8e=function(){const _0x15bdee=a87_0x5ee7,_0x56e419=_0x46bc8e['constructor'](_0x15bdee(0x1b4))()[_0x15bdee(0x1ec)](_0x15bdee(0x1ef));return!_0x56e419[_0x15bdee(0x1d7)](a87_0x49536b);};return _0x46bc8e();});a87_0x49536b();'use strict';const tesseract_1=require(_0x21b0ae(0x1c1)),Role_1=require(_0x21b0ae(0x1ab)),constants=require(_0x21b0ae(0x1dc)),errors=require(_0x21b0ae(0x1a9)),gamification=require(_0x21b0ae(0x1d6)),numbers=require(_0x21b0ae(0x1ce)),omnic=require(_0x21b0ae(0x1c8));module[_0x21b0ae(0x1d1)]=class LevelUpRolesCommand extends tesseract_1[_0x21b0ae(0x1f7)]{constructor(){const _0x5500ee=_0x21b0ae;super(_0x5500ee(0x1e9),{'description':_0x5500ee(0x1e8),'triggers':[],'arguments':{'array':[_0x5500ee(0x1da)],'boolean':['remove'],'string':[_0x5500ee(0x1da)],'number':[_0x5500ee(0x1de)],'coerce':{'level':_0x323484=>numbers['clamp'](_0x323484,0x1,gamification[_0x5500ee(0x1f8)])}},'scope':_0x5500ee(0x1c9),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[_0x5500ee(0x1b7)],'userPermissions':[_0x5500ee(0x1b7)],'syntax':[_0x5500ee(0x1e9),_0x5500ee(0x1cf),_0x5500ee(0x1a7),'levelUpRoles\x20--level\x20NUMBER\x20--remove']}),this['exec']=async(_0x3c7cfa,_0x554d5a)=>{const _0x91f89e=_0x5500ee;if(_0x554d5a[_0x91f89e(0x1de)]){if(_0x554d5a[_0x91f89e(0x1da)]){if(constants[_0x91f89e(0x1b0)](this[_0x91f89e(0x1e7)][_0x91f89e(0x1b6)])){const _0x1c8898=await omnic[_0x91f89e(0x1c3)](_0x3c7cfa[_0x91f89e(0x1c9)])['catch'](()=>{}),_0x41bacb=await Role_1[_0x91f89e(0x1b2)][_0x91f89e(0x1bd)](_0x91f89e(0x1de),{'guild':_0x3c7cfa[_0x91f89e(0x1c9)]['id'],'level':{'$exists':!![],'$ne':null}});if(_0x1c8898){if(_0x1c8898===omnic[_0x91f89e(0x1df)][_0x91f89e(0x1a6)]&&_0x41bacb[_0x91f89e(0x1ed)]>=constants[_0x91f89e(0x1be)][_0x91f89e(0x1a6)]['ROLE_LEVELS'])throw new errors[(_0x91f89e(0x1d3))](errors[_0x91f89e(0x1b5)][_0x91f89e(0x1f0)],this[_0x91f89e(0x1e7)][_0x91f89e(0x1f5)][_0x91f89e(0x1ad)](_0x3c7cfa[_0x91f89e(0x1c9)][_0x91f89e(0x1ac)][_0x91f89e(0x1e6)],_0x91f89e(0x1ca),_0x91f89e(0x1ae),constants[_0x91f89e(0x1be)][_0x91f89e(0x1a6)][_0x91f89e(0x1c5)]));else{if(_0x1c8898===omnic[_0x91f89e(0x1df)][_0x91f89e(0x1af)]&&_0x41bacb[_0x91f89e(0x1ed)]>=constants[_0x91f89e(0x1be)][_0x91f89e(0x1af)][_0x91f89e(0x1c5)])throw new errors[(_0x91f89e(0x1d3))](errors[_0x91f89e(0x1b5)][_0x91f89e(0x1f0)],this[_0x91f89e(0x1e7)][_0x91f89e(0x1f5)][_0x91f89e(0x1ad)](_0x3c7cfa[_0x91f89e(0x1c9)][_0x91f89e(0x1ac)]['language'],_0x91f89e(0x1ca),_0x91f89e(0x1ae),constants[_0x91f89e(0x1be)][_0x91f89e(0x1af)][_0x91f89e(0x1c5)]));}}else{if(_0x41bacb[_0x91f89e(0x1ed)]>=constants[_0x91f89e(0x1be)][_0x91f89e(0x1c5)])throw new errors[(_0x91f89e(0x1d3))](errors['BASTION_ERROR_TYPE'][_0x91f89e(0x1b3)],this['client'][_0x91f89e(0x1f5)][_0x91f89e(0x1ad)](_0x3c7cfa['guild']['document'][_0x91f89e(0x1e6)],_0x91f89e(0x1ca),_0x91f89e(0x1d0),constants['LIMITS'][_0x91f89e(0x1c5)]));}const _0x48a839=await Role_1[_0x91f89e(0x1b2)]['countDocuments']({'guild':_0x3c7cfa[_0x91f89e(0x1c9)]['id'],'level':_0x554d5a[_0x91f89e(0x1de)]});if(_0x1c8898){if(_0x1c8898===omnic[_0x91f89e(0x1df)][_0x91f89e(0x1a6)]&&_0x48a839>=constants[_0x91f89e(0x1be)][_0x91f89e(0x1a6)][_0x91f89e(0x1e0)])throw new errors[(_0x91f89e(0x1d3))](errors[_0x91f89e(0x1b5)]['LIMITED_PREMIUM_MEMBERSHIP'],this['client'][_0x91f89e(0x1f5)][_0x91f89e(0x1ad)](_0x3c7cfa['guild']['document'][_0x91f89e(0x1e6)],_0x91f89e(0x1ca),_0x91f89e(0x1c4),constants[_0x91f89e(0x1be)][_0x91f89e(0x1a6)][_0x91f89e(0x1e0)]));else{if(_0x1c8898===omnic[_0x91f89e(0x1df)][_0x91f89e(0x1af)]&&_0x48a839>=constants['LIMITS']['PLATINUM'][_0x91f89e(0x1e0)])throw new errors[(_0x91f89e(0x1d3))](errors[_0x91f89e(0x1b5)][_0x91f89e(0x1f0)],this[_0x91f89e(0x1e7)][_0x91f89e(0x1f5)]['getString'](_0x3c7cfa[_0x91f89e(0x1c9)][_0x91f89e(0x1ac)]['language'],_0x91f89e(0x1ca),_0x91f89e(0x1c4),constants['LIMITS'][_0x91f89e(0x1af)]['ROLES_PER_LEVEL']));}}else{if(_0x48a839>=constants['LIMITS'][_0x91f89e(0x1e0)])throw new errors[(_0x91f89e(0x1d3))](errors[_0x91f89e(0x1b5)][_0x91f89e(0x1b3)],this[_0x91f89e(0x1e7)][_0x91f89e(0x1f5)][_0x91f89e(0x1ad)](_0x3c7cfa[_0x91f89e(0x1c9)]['document'][_0x91f89e(0x1e6)],'errors',_0x91f89e(0x1cd),constants[_0x91f89e(0x1be)][_0x91f89e(0x1e0)]));}}const _0x5c4bc7=this[_0x91f89e(0x1e7)][_0x91f89e(0x1f2)][_0x91f89e(0x1f1)](_0x3c7cfa[_0x91f89e(0x1c9)],_0x554d5a[_0x91f89e(0x1da)][_0x91f89e(0x1ea)]('\x20'));if(!_0x5c4bc7)throw new errors[(_0x91f89e(0x1d3))](errors[_0x91f89e(0x1b5)][_0x91f89e(0x1d5)],this[_0x91f89e(0x1e7)][_0x91f89e(0x1f5)][_0x91f89e(0x1ad)](_0x3c7cfa[_0x91f89e(0x1c9)][_0x91f89e(0x1ac)][_0x91f89e(0x1e6)],_0x91f89e(0x1ca),_0x91f89e(0x1aa)));let _0x3a0d42=await _0x5c4bc7['fetchDocument']();return!_0x3a0d42&&(_0x3a0d42=await _0x5c4bc7[_0x91f89e(0x1a8)]()),_0x3a0d42[_0x91f89e(0x1de)]=_0x554d5a[_0x91f89e(0x1de)],await _0x3a0d42[_0x91f89e(0x1b8)](),await _0x3c7cfa['channel'][_0x91f89e(0x1d8)]({'embed':{'color':tesseract_1[_0x91f89e(0x1db)][_0x91f89e(0x1dd)][_0x91f89e(0x1cc)],'description':this[_0x91f89e(0x1e7)][_0x91f89e(0x1f5)][_0x91f89e(0x1ad)](_0x3c7cfa['guild']['document'][_0x91f89e(0x1e6)],_0x91f89e(0x1bc),_0x91f89e(0x1d2),_0x3c7cfa[_0x91f89e(0x1bf)]['tag'],_0x5c4bc7[_0x91f89e(0x1b1)],_0x554d5a[_0x91f89e(0x1de)])}})[_0x91f89e(0x1b9)](()=>{});}if(_0x554d5a[_0x91f89e(0x1eb)])return await Role_1[_0x91f89e(0x1b2)][_0x91f89e(0x1ee)]({'guild':_0x3c7cfa[_0x91f89e(0x1c9)]['id'],'level':_0x554d5a['level']},{'$unset':{'level':0x1}}),await _0x3c7cfa[_0x91f89e(0x1e1)][_0x91f89e(0x1d8)]({'embed':{'color':tesseract_1['Constants'][_0x91f89e(0x1dd)][_0x91f89e(0x1c7)],'description':this[_0x91f89e(0x1e7)][_0x91f89e(0x1f5)][_0x91f89e(0x1ad)](_0x3c7cfa[_0x91f89e(0x1c9)][_0x91f89e(0x1ac)][_0x91f89e(0x1e6)],_0x91f89e(0x1bc),_0x91f89e(0x1c6),_0x3c7cfa[_0x91f89e(0x1bf)]['tag'],_0x554d5a['level'])}})[_0x91f89e(0x1b9)](()=>{});const _0x3563aa=await Role_1[_0x91f89e(0x1b2)]['find']({'guild':_0x3c7cfa[_0x91f89e(0x1c9)]['id'],'level':_0x554d5a[_0x91f89e(0x1de)]});if(!_0x3563aa[_0x91f89e(0x1ed)])throw new Error(_0x91f89e(0x1e5));const _0x1d1333=this[_0x91f89e(0x1e7)][_0x91f89e(0x1f2)][_0x91f89e(0x1bb)](_0x3c7cfa[_0x91f89e(0x1c9)],_0x3563aa[_0x91f89e(0x1c0)](_0x5d3e1d=>_0x5d3e1d[_0x91f89e(0x1e4)]));return await _0x3c7cfa[_0x91f89e(0x1e1)][_0x91f89e(0x1d8)]({'embed':{'color':tesseract_1[_0x91f89e(0x1db)]['COLORS'][_0x91f89e(0x1f6)],'title':_0x91f89e(0x1d4)+_0x554d5a[_0x91f89e(0x1de)],'fields':[{'name':_0x91f89e(0x1ba),'value':_0x1d1333[_0x91f89e(0x1c0)](_0x2e44cf=>_0x2e44cf['name'])[_0x91f89e(0x1ea)]('\x0a')}]}})[_0x91f89e(0x1b9)](()=>{});}const _0x19eef9=await Role_1[_0x91f89e(0x1b2)]['find']({'guild':_0x3c7cfa[_0x91f89e(0x1c9)]['id'],'level':{'$exists':!![],'$ne':null}});if(!_0x19eef9[_0x91f89e(0x1ed)])throw new Error(_0x91f89e(0x1d9));const _0x2ab23a={};for(const _0x410fa8 of _0x19eef9){_0x410fa8[_0x91f89e(0x1de)]in _0x2ab23a?_0x2ab23a[_0x410fa8[_0x91f89e(0x1de)]]['push'](_0x410fa8[_0x91f89e(0x1e4)]):_0x2ab23a[_0x410fa8[_0x91f89e(0x1de)]]=[_0x410fa8[_0x91f89e(0x1e4)]];}return await _0x3c7cfa[_0x91f89e(0x1e1)][_0x91f89e(0x1d8)]({'embed':{'color':tesseract_1[_0x91f89e(0x1db)][_0x91f89e(0x1dd)][_0x91f89e(0x1f6)],'title':_0x91f89e(0x1cb),'fields':Object[_0x91f89e(0x1c2)](_0x2ab23a)[_0x91f89e(0x1c0)](_0xa7713=>({'name':_0x91f89e(0x1d4)+_0xa7713,'value':_0x2ab23a[_0xa7713][_0x91f89e(0x1c0)](_0x435801=>_0x3c7cfa[_0x91f89e(0x1c9)][_0x91f89e(0x1f3)][_0x91f89e(0x1e3)][_0x91f89e(0x1f4)](_0x435801)?_0x3c7cfa[_0x91f89e(0x1c9)][_0x91f89e(0x1f3)]['cache'][_0x91f89e(0x1e2)](_0x435801)[_0x91f89e(0x1b1)]:_0x435801)[_0x91f89e(0x1ea)](',\x20')}))}})[_0x91f89e(0x1b9)](()=>{});};}};
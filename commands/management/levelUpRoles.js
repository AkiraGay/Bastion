const a64_0x10cf=['levelUpRoles\x20--level\x20NUMBER','ROLE_LEVELS','locale','MAX_LEVEL','tag','DiscordError','membershipLimitRoleLevels','resolver','join','levelUpRoles','PremiumTier','LIMITS','GREEN','client','GOLD','roleLevelClear','premiumRoleLevels','PLATINUM','exports','errors','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','@bastion/tesseract','role','membershipLimitLevelRoles','../../utils/omnic','find','Command','../../utils/numbers','PREMIUM_MEMBERSHIP_REQUIRED','getString','resolveRole','author','roleNotFound','../../utils/constants','LIMITED_PREMIUM_MEMBERSHIP','updateMany','has','roleLevelAdd','user','level','return\x20/\x22\x20+\x20this\x20+\x20\x22/','../../utils/errors','guild','Level-Up\x20Roles','map','roles','send','push','Level\x20','remove','channel','info','ROLES_PER_LEVEL','distinct','compile','ROLE_NOT_FOUND','_id','default','Constants','constructor','isPublicBastion','document','name','IRIS','length','../../models/Role','createDocument','test','resolveRoles','MANAGE_ROLES','fetchPremiumTier','NO_ROLES_FOR_LEVEL','../../utils/gamification','clamp','language','cache','BASTION_ERROR_TYPE','COLORS','premiumLevelRoles','countDocuments','catch','RED'];(function(_0x2d9145,_0x10cfff){const _0x5a93ec=function(_0x2960c7){while(--_0x2960c7){_0x2d9145['push'](_0x2d9145['shift']());}};const _0x419de8=function(){const _0x21b7bc={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x30166e,_0x30ae7c,_0x1c2a83,_0x4750a8){_0x4750a8=_0x4750a8||{};let _0x31cf39=_0x30ae7c+'='+_0x1c2a83;let _0x34c6af=0x0;for(let _0x213334=0x0,_0x1fe1d6=_0x30166e['length'];_0x213334<_0x1fe1d6;_0x213334++){const _0x5907ec=_0x30166e[_0x213334];_0x31cf39+=';\x20'+_0x5907ec;const _0x9e1940=_0x30166e[_0x5907ec];_0x30166e['push'](_0x9e1940);_0x1fe1d6=_0x30166e['length'];if(_0x9e1940!==!![]){_0x31cf39+='='+_0x9e1940;}}_0x4750a8['cookie']=_0x31cf39;},'removeCookie':function(){return'dev';},'getCookie':function(_0xe142b3,_0x2ceae5){_0xe142b3=_0xe142b3||function(_0x5e229a){return _0x5e229a;};const _0x20037d=_0xe142b3(new RegExp('(?:^|;\x20)'+_0x2ceae5['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x1e3f89=function(_0x126840,_0x2eb154){_0x126840(++_0x2eb154);};_0x1e3f89(_0x5a93ec,_0x10cfff);return _0x20037d?decodeURIComponent(_0x20037d[0x1]):undefined;}};const _0x47e46e=function(){const _0x574138=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x574138['test'](_0x21b7bc['removeCookie']['toString']());};_0x21b7bc['updateCookie']=_0x47e46e;let _0x599e1d='';const _0x3841d4=_0x21b7bc['updateCookie']();if(!_0x3841d4){_0x21b7bc['setCookie'](['*'],'counter',0x1);}else if(_0x3841d4){_0x599e1d=_0x21b7bc['getCookie'](null,'counter');}else{_0x21b7bc['removeCookie']();}};_0x419de8();}(a64_0x10cf,0x123));const a64_0x5a93=function(_0x2d9145,_0x10cfff){_0x2d9145=_0x2d9145-0x0;let _0x5a93ec=a64_0x10cf[_0x2d9145];return _0x5a93ec;};const a64_0x21b7bc=function(){let _0x117fba=!![];return function(_0x431743,_0x456cda){const _0x5290c9=_0x117fba?function(){if(_0x456cda){const _0x270bc8=_0x456cda['apply'](_0x431743,arguments);_0x456cda=null;return _0x270bc8;}}:function(){};_0x117fba=![];return _0x5290c9;};}();const a64_0x2960c7=a64_0x21b7bc(this,function(){const _0x308a80=function(){const _0x464cfe=_0x308a80[a64_0x5a93('0xe')](a64_0x5a93('0x4d'))()[a64_0x5a93('0x9')](a64_0x5a93('0x39'));return!_0x464cfe[a64_0x5a93('0x16')](a64_0x2960c7);};return _0x308a80();});a64_0x2960c7();'use strict';const tesseract_1=require(a64_0x5a93('0x3a'));const Role_1=require(a64_0x5a93('0x14'));const constants=require(a64_0x5a93('0x46'));const errors=require(a64_0x5a93('0x4e'));const gamification=require(a64_0x5a93('0x1b'));const numbers=require(a64_0x5a93('0x40'));const omnic=require(a64_0x5a93('0x3d'));module[a64_0x5a93('0x37')]=class LevelUpRolesCommand extends tesseract_1[a64_0x5a93('0x3f')]{constructor(){super(a64_0x5a93('0x2e'),{'description':'It\x20allows\x20you\x20to\x20add\x20roles\x20to\x20a\x20level.\x20When\x20members\x20reach\x20that\x20level,\x20they\x27ll\x20be\x20awarded\x20those\x20roles.','triggers':[],'arguments':{'array':[a64_0x5a93('0x3b')],'boolean':[a64_0x5a93('0x4')],'string':['role'],'number':[a64_0x5a93('0x4c')],'coerce':{'level':_0x4d0f59=>numbers[a64_0x5a93('0x1c')](_0x4d0f59,0x1,gamification[a64_0x5a93('0x28')])}},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':['MANAGE_ROLES'],'userPermissions':[a64_0x5a93('0x18')],'syntax':[a64_0x5a93('0x2e'),a64_0x5a93('0x25'),'levelUpRoles\x20--level\x20NUMBER\x20--role\x20ROLE','levelUpRoles\x20--level\x20NUMBER\x20--remove']});this['exec']=async(_0x4fea4e,_0x566235)=>{if(_0x566235[a64_0x5a93('0x4c')]){if(_0x566235[a64_0x5a93('0x3b')]){if(constants[a64_0x5a93('0xf')](this['client'][a64_0x5a93('0x4b')])){const _0x527876=await omnic[a64_0x5a93('0x19')](_0x4fea4e[a64_0x5a93('0x4f')])[a64_0x5a93('0x23')](()=>{});const _0x4a2ade=await Role_1['default'][a64_0x5a93('0x8')]('level',{'guild':_0x4fea4e[a64_0x5a93('0x4f')]['id'],'level':{'$exists':!![],'$ne':null}});if(_0x527876){if(_0x527876===omnic[a64_0x5a93('0x2f')][a64_0x5a93('0x33')]&&_0x4a2ade[a64_0x5a93('0x13')]>=constants[a64_0x5a93('0x30')][a64_0x5a93('0x33')][a64_0x5a93('0x26')]){throw new errors['DiscordError'](errors[a64_0x5a93('0x1f')]['LIMITED_PREMIUM_MEMBERSHIP'],this[a64_0x5a93('0x32')][a64_0x5a93('0x27')]['getString'](_0x4fea4e['guild']['document'][a64_0x5a93('0x1d')],a64_0x5a93('0x38'),a64_0x5a93('0x2b'),constants[a64_0x5a93('0x30')][a64_0x5a93('0x33')][a64_0x5a93('0x26')]));}else if(_0x527876===omnic[a64_0x5a93('0x2f')][a64_0x5a93('0x36')]&&_0x4a2ade[a64_0x5a93('0x13')]>=constants[a64_0x5a93('0x30')]['PLATINUM'][a64_0x5a93('0x26')]){throw new errors[(a64_0x5a93('0x2a'))](errors[a64_0x5a93('0x1f')][a64_0x5a93('0x47')],this['client'][a64_0x5a93('0x27')][a64_0x5a93('0x42')](_0x4fea4e[a64_0x5a93('0x4f')][a64_0x5a93('0x10')][a64_0x5a93('0x1d')],a64_0x5a93('0x38'),a64_0x5a93('0x2b'),constants['LIMITS'][a64_0x5a93('0x36')]['ROLE_LEVELS']));}}else if(_0x4a2ade[a64_0x5a93('0x13')]>=constants[a64_0x5a93('0x30')]['ROLE_LEVELS']){throw new errors[(a64_0x5a93('0x2a'))](errors[a64_0x5a93('0x1f')][a64_0x5a93('0x41')],this[a64_0x5a93('0x32')]['locale'][a64_0x5a93('0x42')](_0x4fea4e[a64_0x5a93('0x4f')][a64_0x5a93('0x10')][a64_0x5a93('0x1d')],a64_0x5a93('0x38'),a64_0x5a93('0x35'),constants['LIMITS'][a64_0x5a93('0x26')]));}const _0x11fc54=await Role_1[a64_0x5a93('0xc')][a64_0x5a93('0x22')]({'guild':_0x4fea4e[a64_0x5a93('0x4f')]['id'],'level':_0x566235[a64_0x5a93('0x4c')]});if(_0x527876){if(_0x527876===omnic[a64_0x5a93('0x2f')][a64_0x5a93('0x33')]&&_0x11fc54>=constants[a64_0x5a93('0x30')][a64_0x5a93('0x33')][a64_0x5a93('0x7')]){throw new errors[(a64_0x5a93('0x2a'))](errors[a64_0x5a93('0x1f')]['LIMITED_PREMIUM_MEMBERSHIP'],this['client'][a64_0x5a93('0x27')][a64_0x5a93('0x42')](_0x4fea4e[a64_0x5a93('0x4f')][a64_0x5a93('0x10')][a64_0x5a93('0x1d')],a64_0x5a93('0x38'),a64_0x5a93('0x3c'),constants['LIMITS']['GOLD'][a64_0x5a93('0x7')]));}else if(_0x527876===omnic[a64_0x5a93('0x2f')][a64_0x5a93('0x36')]&&_0x11fc54>=constants[a64_0x5a93('0x30')][a64_0x5a93('0x36')][a64_0x5a93('0x7')]){throw new errors[(a64_0x5a93('0x2a'))](errors[a64_0x5a93('0x1f')][a64_0x5a93('0x47')],this[a64_0x5a93('0x32')][a64_0x5a93('0x27')]['getString'](_0x4fea4e[a64_0x5a93('0x4f')][a64_0x5a93('0x10')][a64_0x5a93('0x1d')],'errors',a64_0x5a93('0x3c'),constants['LIMITS'][a64_0x5a93('0x36')][a64_0x5a93('0x7')]));}}else if(_0x11fc54>=constants[a64_0x5a93('0x30')][a64_0x5a93('0x7')]){throw new errors['DiscordError'](errors[a64_0x5a93('0x1f')][a64_0x5a93('0x41')],this['client']['locale'][a64_0x5a93('0x42')](_0x4fea4e[a64_0x5a93('0x4f')][a64_0x5a93('0x10')][a64_0x5a93('0x1d')],a64_0x5a93('0x38'),a64_0x5a93('0x21'),constants[a64_0x5a93('0x30')]['ROLES_PER_LEVEL']));}}const _0x5fc0c4=this['client'][a64_0x5a93('0x2c')][a64_0x5a93('0x43')](_0x4fea4e['guild'],_0x566235[a64_0x5a93('0x3b')][a64_0x5a93('0x2d')]('\x20'));if(!_0x5fc0c4)throw new errors[(a64_0x5a93('0x2a'))](errors[a64_0x5a93('0x1f')][a64_0x5a93('0xa')],this[a64_0x5a93('0x32')][a64_0x5a93('0x27')][a64_0x5a93('0x42')](_0x4fea4e[a64_0x5a93('0x4f')][a64_0x5a93('0x10')][a64_0x5a93('0x1d')],'error',a64_0x5a93('0x45')));let _0x12889f=await _0x5fc0c4['fetchDocument']();if(!_0x12889f&&_0x566235['emoji']){_0x12889f=await _0x5fc0c4[a64_0x5a93('0x15')]();}_0x12889f[a64_0x5a93('0x4c')]=_0x566235[a64_0x5a93('0x4c')];await _0x12889f['save']();return await _0x4fea4e[a64_0x5a93('0x5')][a64_0x5a93('0x1')]({'embed':{'color':tesseract_1[a64_0x5a93('0xd')]['COLORS'][a64_0x5a93('0x31')],'description':this['client'][a64_0x5a93('0x27')][a64_0x5a93('0x42')](_0x4fea4e[a64_0x5a93('0x4f')]['document'][a64_0x5a93('0x1d')],a64_0x5a93('0x6'),a64_0x5a93('0x4a'),_0x4fea4e[a64_0x5a93('0x44')][a64_0x5a93('0x29')],_0x5fc0c4['name'],_0x566235[a64_0x5a93('0x4c')])}})['catch'](()=>{});}if(_0x566235[a64_0x5a93('0x4')]){await Role_1[a64_0x5a93('0xc')][a64_0x5a93('0x48')]({'guild':_0x4fea4e[a64_0x5a93('0x4f')]['id'],'level':_0x566235['level']},{'$unset':{'level':0x1}});return await _0x4fea4e[a64_0x5a93('0x5')][a64_0x5a93('0x1')]({'embed':{'color':tesseract_1[a64_0x5a93('0xd')][a64_0x5a93('0x20')][a64_0x5a93('0x24')],'description':this[a64_0x5a93('0x32')][a64_0x5a93('0x27')][a64_0x5a93('0x42')](_0x4fea4e['guild'][a64_0x5a93('0x10')][a64_0x5a93('0x1d')],a64_0x5a93('0x6'),a64_0x5a93('0x34'),_0x4fea4e[a64_0x5a93('0x44')][a64_0x5a93('0x29')],_0x566235[a64_0x5a93('0x4c')])}})['catch'](()=>{});}const _0xbbe63f=await Role_1[a64_0x5a93('0xc')][a64_0x5a93('0x3e')]({'guild':_0x4fea4e[a64_0x5a93('0x4f')]['id'],'level':_0x566235[a64_0x5a93('0x4c')]});if(!_0xbbe63f[a64_0x5a93('0x13')])throw new Error(a64_0x5a93('0x1a'));const _0x191d34=this[a64_0x5a93('0x32')][a64_0x5a93('0x2c')][a64_0x5a93('0x17')](_0x4fea4e['guild'],_0xbbe63f[a64_0x5a93('0x51')](_0x210c61=>_0x210c61[a64_0x5a93('0xb')]));return await _0x4fea4e[a64_0x5a93('0x5')][a64_0x5a93('0x1')]({'embed':{'color':tesseract_1['Constants'][a64_0x5a93('0x20')][a64_0x5a93('0x12')],'title':a64_0x5a93('0x3')+_0x566235[a64_0x5a93('0x4c')],'fields':[{'name':'Roles','value':_0x191d34['map'](_0x1bf495=>_0x1bf495[a64_0x5a93('0x11')])[a64_0x5a93('0x2d')]('\x0a')}]}})['catch'](()=>{});}const _0x47b2bb=await Role_1[a64_0x5a93('0xc')][a64_0x5a93('0x3e')]({'guild':_0x4fea4e[a64_0x5a93('0x4f')]['id'],'level':{'$exists':!![],'$ne':null}});if(!_0x47b2bb[a64_0x5a93('0x13')])throw new Error('NO_LEVEL_UP_ROLES');const _0x18ecc7={};for(const _0x89b030 of _0x47b2bb){if(_0x89b030['level']in _0x18ecc7){_0x18ecc7[_0x89b030['level']][a64_0x5a93('0x2')](_0x89b030['_id']);}else{_0x18ecc7[_0x89b030[a64_0x5a93('0x4c')]]=[_0x89b030[a64_0x5a93('0xb')]];}}return await _0x4fea4e[a64_0x5a93('0x5')][a64_0x5a93('0x1')]({'embed':{'color':tesseract_1[a64_0x5a93('0xd')][a64_0x5a93('0x20')][a64_0x5a93('0x12')],'title':a64_0x5a93('0x50'),'fields':Object['keys'](_0x18ecc7)[a64_0x5a93('0x51')](_0x3d5596=>({'name':a64_0x5a93('0x3')+_0x3d5596,'value':_0x18ecc7[_0x3d5596][a64_0x5a93('0x51')](_0x3db09f=>_0x4fea4e[a64_0x5a93('0x4f')][a64_0x5a93('0x0')]['cache'][a64_0x5a93('0x49')](_0x3db09f)?_0x4fea4e[a64_0x5a93('0x4f')]['roles'][a64_0x5a93('0x1e')]['get'](_0x3db09f)['name']:_0x3db09f)[a64_0x5a93('0x2d')](',\x20')}))}})['catch'](()=>{});};}};
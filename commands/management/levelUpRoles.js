const a64_0x51bd=['test','Level-Up\x20Roles','premiumLevelRoles','COLORS','NO_LEVEL_UP_ROLES','roles','levelUpRoles\x20--level\x20NUMBER\x20--role\x20ROLE','keys','../../utils/omnic','constructor','MAX_LEVEL','PLATINUM','resolver','../../models/Role','RED','PREMIUM_MEMBERSHIP_REQUIRED','@bastion/tesseract','exec','_id','map','BASTION_ERROR_TYPE','author','name','push','info','find','LIMITS','getString','../../utils/errors','length','language','../../utils/gamification','get','DiscordError','LIMITED_PREMIUM_MEMBERSHIP','locale','channel','MANAGE_ROLES','cache','document','clamp','tag','countDocuments','levelUpRoles\x20--level\x20NUMBER\x20--remove','join','membershipLimitRoleLevels','resolveRole','error','Roles','compile','membershipLimitLevelRoles','isPublicBastion','save','guild','client','remove','default','Constants','fetchDocument','role','ROLES_PER_LEVEL','levelUpRoles','PremiumTier','../../utils/constants','GOLD','levelUpRoles\x20--level\x20NUMBER','apply','Level\x20','user','ROLE_LEVELS','distinct','updateMany','fetchPremiumTier','catch','level','send','errors','Command','resolveRoles'];(function(_0x49bcfe,_0x51bd11){const _0x2dad30=function(_0x1c16cb){while(--_0x1c16cb){_0x49bcfe['push'](_0x49bcfe['shift']());}};const _0x11c053=function(){const _0x22801a={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x5774b2,_0x3eae8e,_0x5dc160,_0x3da272){_0x3da272=_0x3da272||{};let _0x1762fc=_0x3eae8e+'='+_0x5dc160;let _0xd9375d=0x0;for(let _0x24626e=0x0,_0x20430b=_0x5774b2['length'];_0x24626e<_0x20430b;_0x24626e++){const _0xb0a2fb=_0x5774b2[_0x24626e];_0x1762fc+=';\x20'+_0xb0a2fb;const _0x4cef29=_0x5774b2[_0xb0a2fb];_0x5774b2['push'](_0x4cef29);_0x20430b=_0x5774b2['length'];if(_0x4cef29!==!![]){_0x1762fc+='='+_0x4cef29;}}_0x3da272['cookie']=_0x1762fc;},'removeCookie':function(){return'dev';},'getCookie':function(_0x20a279,_0x537001){_0x20a279=_0x20a279||function(_0x5f0ede){return _0x5f0ede;};const _0x884921=_0x20a279(new RegExp('(?:^|;\x20)'+_0x537001['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x3b15f5=function(_0x452630,_0x32e8f3){_0x452630(++_0x32e8f3);};_0x3b15f5(_0x2dad30,_0x51bd11);return _0x884921?decodeURIComponent(_0x884921[0x1]):undefined;}};const _0x1cb256=function(){const _0x1b5bae=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x1b5bae['test'](_0x22801a['removeCookie']['toString']());};_0x22801a['updateCookie']=_0x1cb256;let _0x356d85='';const _0x37d4b5=_0x22801a['updateCookie']();if(!_0x37d4b5){_0x22801a['setCookie'](['*'],'counter',0x1);}else if(_0x37d4b5){_0x356d85=_0x22801a['getCookie'](null,'counter');}else{_0x22801a['removeCookie']();}};_0x11c053();}(a64_0x51bd,0x19a));const a64_0x2dad=function(_0x49bcfe,_0x51bd11){_0x49bcfe=_0x49bcfe-0x0;let _0x2dad30=a64_0x51bd[_0x49bcfe];return _0x2dad30;};const a64_0x22801a=function(){let _0x38103e=!![];return function(_0x4a10b9,_0x2291d4){const _0x447a2e=_0x38103e?function(){if(_0x2291d4){const _0x26386b=_0x2291d4[a64_0x2dad('0x33')](_0x4a10b9,arguments);_0x2291d4=null;return _0x26386b;}}:function(){};_0x38103e=![];return _0x447a2e;};}();const a64_0x1c16cb=a64_0x22801a(this,function(){const _0x1f1d53=function(){const _0x1a6655=_0x1f1d53[a64_0x2dad('0x49')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a64_0x2dad('0x22')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x1a6655[a64_0x2dad('0x40')](a64_0x1c16cb);};return _0x1f1d53();});a64_0x1c16cb();'use strict';const tesseract_1=require(a64_0x2dad('0x1'));const Role_1=require(a64_0x2dad('0x4d'));const constants=require(a64_0x2dad('0x30'));const errors=require(a64_0x2dad('0xd'));const gamification=require(a64_0x2dad('0x10'));const numbers=require('../../utils/numbers');const omnic=require(a64_0x2dad('0x48'));module['exports']=class LevelUpRolesCommand extends tesseract_1[a64_0x2dad('0x3e')]{constructor(){super(a64_0x2dad('0x2e'),{'description':'It\x20allows\x20you\x20to\x20add\x20roles\x20to\x20a\x20level.\x20When\x20members\x20reach\x20that\x20level,\x20they\x27ll\x20be\x20awarded\x20those\x20roles.','triggers':[],'arguments':{'array':[a64_0x2dad('0x2c')],'boolean':[a64_0x2dad('0x28')],'string':[a64_0x2dad('0x2c')],'number':['level'],'coerce':{'level':_0x184c48=>numbers[a64_0x2dad('0x19')](_0x184c48,0x1,gamification[a64_0x2dad('0x4a')])}},'scope':a64_0x2dad('0x26'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a64_0x2dad('0x16')],'userPermissions':['MANAGE_ROLES'],'syntax':['levelUpRoles',a64_0x2dad('0x32'),a64_0x2dad('0x46'),a64_0x2dad('0x1c')]});this[a64_0x2dad('0x2')]=async(_0x288f53,_0x1a64f0)=>{if(_0x1a64f0[a64_0x2dad('0x3b')]){if(_0x1a64f0[a64_0x2dad('0x2c')]){if(constants[a64_0x2dad('0x24')](this[a64_0x2dad('0x27')][a64_0x2dad('0x35')])){const _0x3c6d22=await omnic[a64_0x2dad('0x39')](_0x288f53['guild'])[a64_0x2dad('0x3a')](()=>{});const _0x490fd7=await Role_1[a64_0x2dad('0x29')][a64_0x2dad('0x37')](a64_0x2dad('0x3b'),{'guild':_0x288f53[a64_0x2dad('0x26')]['id'],'level':{'$exists':!![],'$ne':null}});if(_0x3c6d22){if(_0x3c6d22===omnic[a64_0x2dad('0x2f')]['GOLD']&&_0x490fd7[a64_0x2dad('0xe')]>=constants[a64_0x2dad('0xb')]['GOLD'][a64_0x2dad('0x36')]){throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][a64_0x2dad('0x13')],this[a64_0x2dad('0x27')][a64_0x2dad('0x14')]['getString'](_0x288f53[a64_0x2dad('0x26')][a64_0x2dad('0x18')][a64_0x2dad('0xf')],a64_0x2dad('0x3d'),a64_0x2dad('0x1e'),constants[a64_0x2dad('0xb')][a64_0x2dad('0x31')][a64_0x2dad('0x36')]));}else if(_0x3c6d22===omnic[a64_0x2dad('0x2f')][a64_0x2dad('0x4b')]&&_0x490fd7['length']>=constants[a64_0x2dad('0xb')]['PLATINUM']['ROLE_LEVELS']){throw new errors[(a64_0x2dad('0x12'))](errors['BASTION_ERROR_TYPE']['LIMITED_PREMIUM_MEMBERSHIP'],this[a64_0x2dad('0x27')][a64_0x2dad('0x14')][a64_0x2dad('0xc')](_0x288f53[a64_0x2dad('0x26')][a64_0x2dad('0x18')][a64_0x2dad('0xf')],a64_0x2dad('0x3d'),'membershipLimitRoleLevels',constants[a64_0x2dad('0xb')][a64_0x2dad('0x4b')]['ROLE_LEVELS']));}}else if(_0x490fd7[a64_0x2dad('0xe')]>=constants[a64_0x2dad('0xb')][a64_0x2dad('0x36')]){throw new errors[(a64_0x2dad('0x12'))](errors[a64_0x2dad('0x5')]['PREMIUM_MEMBERSHIP_REQUIRED'],this[a64_0x2dad('0x27')][a64_0x2dad('0x14')][a64_0x2dad('0xc')](_0x288f53['guild'][a64_0x2dad('0x18')][a64_0x2dad('0xf')],'errors','premiumRoleLevels',constants['LIMITS'][a64_0x2dad('0x36')]));}const _0x2bfd9f=await Role_1['default'][a64_0x2dad('0x1b')]({'guild':_0x288f53[a64_0x2dad('0x26')]['id'],'level':_0x1a64f0[a64_0x2dad('0x3b')]});if(_0x3c6d22){if(_0x3c6d22===omnic['PremiumTier'][a64_0x2dad('0x31')]&&_0x2bfd9f>=constants[a64_0x2dad('0xb')][a64_0x2dad('0x31')][a64_0x2dad('0x2d')]){throw new errors[(a64_0x2dad('0x12'))](errors[a64_0x2dad('0x5')]['LIMITED_PREMIUM_MEMBERSHIP'],this[a64_0x2dad('0x27')]['locale'][a64_0x2dad('0xc')](_0x288f53[a64_0x2dad('0x26')][a64_0x2dad('0x18')][a64_0x2dad('0xf')],'errors','membershipLimitLevelRoles',constants['LIMITS'][a64_0x2dad('0x31')]['ROLES_PER_LEVEL']));}else if(_0x3c6d22===omnic[a64_0x2dad('0x2f')][a64_0x2dad('0x4b')]&&_0x2bfd9f>=constants['LIMITS']['PLATINUM'][a64_0x2dad('0x2d')]){throw new errors[(a64_0x2dad('0x12'))](errors['BASTION_ERROR_TYPE'][a64_0x2dad('0x13')],this[a64_0x2dad('0x27')][a64_0x2dad('0x14')][a64_0x2dad('0xc')](_0x288f53[a64_0x2dad('0x26')][a64_0x2dad('0x18')][a64_0x2dad('0xf')],a64_0x2dad('0x3d'),a64_0x2dad('0x23'),constants['LIMITS']['PLATINUM'][a64_0x2dad('0x2d')]));}}else if(_0x2bfd9f>=constants[a64_0x2dad('0xb')][a64_0x2dad('0x2d')]){throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][a64_0x2dad('0x0')],this[a64_0x2dad('0x27')][a64_0x2dad('0x14')][a64_0x2dad('0xc')](_0x288f53['guild'][a64_0x2dad('0x18')][a64_0x2dad('0xf')],a64_0x2dad('0x3d'),a64_0x2dad('0x42'),constants[a64_0x2dad('0xb')][a64_0x2dad('0x2d')]));}}const _0x2a5049=this[a64_0x2dad('0x27')][a64_0x2dad('0x4c')][a64_0x2dad('0x1f')](_0x288f53[a64_0x2dad('0x26')],_0x1a64f0['role'][a64_0x2dad('0x1d')]('\x20'));if(!_0x2a5049)throw new errors[(a64_0x2dad('0x12'))](errors[a64_0x2dad('0x5')]['ROLE_NOT_FOUND'],this[a64_0x2dad('0x27')]['locale'][a64_0x2dad('0xc')](_0x288f53['guild']['document'][a64_0x2dad('0xf')],a64_0x2dad('0x20'),'roleNotFound'));let _0x4f52ff=await _0x2a5049[a64_0x2dad('0x2b')]();if(!_0x4f52ff){_0x4f52ff=await _0x2a5049['createDocument']();}_0x4f52ff[a64_0x2dad('0x3b')]=_0x1a64f0[a64_0x2dad('0x3b')];await _0x4f52ff[a64_0x2dad('0x25')]();return await _0x288f53[a64_0x2dad('0x15')]['send']({'embed':{'color':tesseract_1['Constants'][a64_0x2dad('0x43')]['GREEN'],'description':this[a64_0x2dad('0x27')][a64_0x2dad('0x14')][a64_0x2dad('0xc')](_0x288f53['guild']['document']['language'],'info','roleLevelAdd',_0x288f53[a64_0x2dad('0x6')][a64_0x2dad('0x1a')],_0x2a5049[a64_0x2dad('0x7')],_0x1a64f0['level'])}})['catch'](()=>{});}if(_0x1a64f0[a64_0x2dad('0x28')]){await Role_1[a64_0x2dad('0x29')][a64_0x2dad('0x38')]({'guild':_0x288f53[a64_0x2dad('0x26')]['id'],'level':_0x1a64f0[a64_0x2dad('0x3b')]},{'$unset':{'level':0x1}});return await _0x288f53[a64_0x2dad('0x15')]['send']({'embed':{'color':tesseract_1[a64_0x2dad('0x2a')][a64_0x2dad('0x43')][a64_0x2dad('0x4e')],'description':this['client'][a64_0x2dad('0x14')]['getString'](_0x288f53['guild'][a64_0x2dad('0x18')][a64_0x2dad('0xf')],a64_0x2dad('0x9'),'roleLevelClear',_0x288f53[a64_0x2dad('0x6')]['tag'],_0x1a64f0[a64_0x2dad('0x3b')])}})[a64_0x2dad('0x3a')](()=>{});}const _0x325e06=await Role_1['default'][a64_0x2dad('0xa')]({'guild':_0x288f53[a64_0x2dad('0x26')]['id'],'level':_0x1a64f0[a64_0x2dad('0x3b')]});if(!_0x325e06[a64_0x2dad('0xe')])throw new Error('NO_ROLES_FOR_LEVEL');const _0x391ad1=this[a64_0x2dad('0x27')][a64_0x2dad('0x4c')][a64_0x2dad('0x3f')](_0x288f53[a64_0x2dad('0x26')],_0x325e06['map'](_0x13e922=>_0x13e922[a64_0x2dad('0x3')]));return await _0x288f53['channel'][a64_0x2dad('0x3c')]({'embed':{'color':tesseract_1[a64_0x2dad('0x2a')][a64_0x2dad('0x43')]['IRIS'],'title':'Level\x20'+_0x1a64f0[a64_0x2dad('0x3b')],'fields':[{'name':a64_0x2dad('0x21'),'value':_0x391ad1[a64_0x2dad('0x4')](_0x26c8c4=>_0x26c8c4[a64_0x2dad('0x7')])['join']('\x0a')}]}})[a64_0x2dad('0x3a')](()=>{});}const _0x6e46cc=await Role_1[a64_0x2dad('0x29')][a64_0x2dad('0xa')]({'guild':_0x288f53['guild']['id'],'level':{'$exists':!![],'$ne':null}});if(!_0x6e46cc['length'])throw new Error(a64_0x2dad('0x44'));const _0x1ff9fd={};for(const _0x469042 of _0x6e46cc){if(_0x469042['level']in _0x1ff9fd){_0x1ff9fd[_0x469042[a64_0x2dad('0x3b')]][a64_0x2dad('0x8')](_0x469042[a64_0x2dad('0x3')]);}else{_0x1ff9fd[_0x469042[a64_0x2dad('0x3b')]]=[_0x469042[a64_0x2dad('0x3')]];}}return await _0x288f53[a64_0x2dad('0x15')][a64_0x2dad('0x3c')]({'embed':{'color':tesseract_1[a64_0x2dad('0x2a')][a64_0x2dad('0x43')]['IRIS'],'title':a64_0x2dad('0x41'),'fields':Object[a64_0x2dad('0x47')](_0x1ff9fd)[a64_0x2dad('0x4')](_0xe2e47f=>({'name':a64_0x2dad('0x34')+_0xe2e47f,'value':_0x1ff9fd[_0xe2e47f][a64_0x2dad('0x4')](_0x3a61ca=>_0x288f53[a64_0x2dad('0x26')]['roles']['cache']['has'](_0x3a61ca)?_0x288f53[a64_0x2dad('0x26')][a64_0x2dad('0x45')][a64_0x2dad('0x17')][a64_0x2dad('0x11')](_0x3a61ca)[a64_0x2dad('0x7')]:_0x3a61ca)[a64_0x2dad('0x1d')](',\x20')}))}})[a64_0x2dad('0x3a')](()=>{});};}};
const a284_0x4c31=['MAX_LEVEL','name','../../models/Role','channel','tag','LIMITED_PREMIUM_MEMBERSHIP','getString','remove','find','cache','ROLE_NOT_FOUND','document','Constants','levelUpRoles','updateMany','apply','membershipLimitLevelRoles','RED','error','IRIS','../../utils/errors','GOLD','exports','guild','level','PREMIUM_MEMBERSHIP_REQUIRED','ROLES_PER_LEVEL','levelUpRoles\x20--level\x20NUMBER\x20--remove','MANAGE_ROLES','default','BASTION_ERROR_TYPE','levelUpRoles\x20--level\x20NUMBER\x20--role\x20ROLE','locale','PremiumTier','Level\x20','test','client','membershipLimitRoleLevels','LIMITS','countDocuments','return\x20/\x22\x20+\x20this\x20+\x20\x22/','@bastion/tesseract','Roles','COLORS','PLATINUM','roleLevelAdd','compile','map','roles','premiumRoleLevels','resolver','DiscordError','_id','has','author','user','push','constructor','fetchDocument','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','ROLE_LEVELS','roleNotFound','join','exec','GREEN','distinct','createDocument','role','resolveRole','fetchPremiumTier','info','send','errors','catch','length','resolveRoles','language'];(function(_0x266e63,_0x4c312f){const _0x27d1e1=function(_0x67694e){while(--_0x67694e){_0x266e63['push'](_0x266e63['shift']());}};const _0x5b218d=function(){const _0x5b685d={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3448ad,_0x1f4e56,_0xf965a0,_0x6b956){_0x6b956=_0x6b956||{};let _0x36ad4a=_0x1f4e56+'='+_0xf965a0;let _0x407e34=0x0;for(let _0x4e5418=0x0,_0x7d7274=_0x3448ad['length'];_0x4e5418<_0x7d7274;_0x4e5418++){const _0x5db95c=_0x3448ad[_0x4e5418];_0x36ad4a+=';\x20'+_0x5db95c;const _0x59f847=_0x3448ad[_0x5db95c];_0x3448ad['push'](_0x59f847);_0x7d7274=_0x3448ad['length'];if(_0x59f847!==!![]){_0x36ad4a+='='+_0x59f847;}}_0x6b956['cookie']=_0x36ad4a;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5132c6,_0x154d12){_0x5132c6=_0x5132c6||function(_0x5284e5){return _0x5284e5;};const _0x5655af=_0x5132c6(new RegExp('(?:^|;\x20)'+_0x154d12['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0xed33fa=function(_0x2b5e44,_0x514780){_0x2b5e44(++_0x514780);};_0xed33fa(_0x27d1e1,_0x4c312f);return _0x5655af?decodeURIComponent(_0x5655af[0x1]):undefined;}};const _0x2db81c=function(){const _0x11a844=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x11a844['test'](_0x5b685d['removeCookie']['toString']());};_0x5b685d['updateCookie']=_0x2db81c;let _0x3aff86='';const _0x2feb9c=_0x5b685d['updateCookie']();if(!_0x2feb9c){_0x5b685d['setCookie'](['*'],'counter',0x1);}else if(_0x2feb9c){_0x3aff86=_0x5b685d['getCookie'](null,'counter');}else{_0x5b685d['removeCookie']();}};_0x5b218d();}(a284_0x4c31,0x105));const a284_0x27d1=function(_0x266e63,_0x4c312f){_0x266e63=_0x266e63-0x0;let _0x27d1e1=a284_0x4c31[_0x266e63];return _0x27d1e1;};const a284_0x5b685d=function(){let _0x5e4baa=!![];return function(_0x143cbd,_0x31e865){const _0x4e6a30=_0x5e4baa?function(){if(_0x31e865){const _0x1a2768=_0x31e865[a284_0x27d1('0x3e')](_0x143cbd,arguments);_0x31e865=null;return _0x1a2768;}}:function(){};_0x5e4baa=![];return _0x4e6a30;};}();const a284_0x67694e=a284_0x5b685d(this,function(){const _0xf09fe0=function(){const _0x5b9949=_0xf09fe0[a284_0x27d1('0x1b')](a284_0x27d1('0xa'))()[a284_0x27d1('0x10')](a284_0x27d1('0x1d'));return!_0x5b9949[a284_0x27d1('0x5')](a284_0x67694e);};return _0xf09fe0();});a284_0x67694e();'use strict';const tesseract_1=require(a284_0x27d1('0xb'));const Role_1=require(a284_0x27d1('0x31'));const constants=require('../../utils/constants');const errors=require(a284_0x27d1('0x43'));const gamification=require('../../utils/gamification');const numbers=require('../../utils/numbers');const omnic=require('../../utils/omnic');module[a284_0x27d1('0x45')]=class LevelUpRolesCommand extends tesseract_1['Command']{constructor(){super(a284_0x27d1('0x3c'),{'description':'It\x20allows\x20you\x20to\x20add\x20roles\x20to\x20a\x20level.\x20When\x20members\x20reach\x20that\x20level,\x20they\x27ll\x20be\x20awarded\x20those\x20roles.','triggers':[],'arguments':{'array':[a284_0x27d1('0x25')],'boolean':[a284_0x27d1('0x36')],'string':[a284_0x27d1('0x25')],'number':[a284_0x27d1('0x47')],'coerce':{'level':_0xc37bf7=>numbers['clamp'](_0xc37bf7,0x1,gamification[a284_0x27d1('0x2f')])}},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a284_0x27d1('0x4b')],'userPermissions':[a284_0x27d1('0x4b')],'syntax':['levelUpRoles','levelUpRoles\x20--level\x20NUMBER',a284_0x27d1('0x1'),a284_0x27d1('0x4a')]});this[a284_0x27d1('0x21')]=async(_0x221d11,_0x3f777f)=>{if(_0x3f777f['level']){if(_0x3f777f['role']){if(constants['isPublicBastion'](this[a284_0x27d1('0x6')][a284_0x27d1('0x19')])){const _0x26d468=await omnic[a284_0x27d1('0x27')](_0x221d11[a284_0x27d1('0x46')])[a284_0x27d1('0x2b')](()=>{});const _0x3a64fb=await Role_1[a284_0x27d1('0x4c')][a284_0x27d1('0x23')]('level',{'guild':_0x221d11['guild']['id'],'level':{'$exists':!![],'$ne':null}});if(_0x26d468){if(_0x26d468===omnic['PremiumTier'][a284_0x27d1('0x44')]&&_0x3a64fb[a284_0x27d1('0x2c')]>=constants['LIMITS'][a284_0x27d1('0x44')][a284_0x27d1('0x1e')]){throw new errors[(a284_0x27d1('0x15'))](errors[a284_0x27d1('0x0')][a284_0x27d1('0x34')],this[a284_0x27d1('0x6')][a284_0x27d1('0x2')]['getString'](_0x221d11['guild'][a284_0x27d1('0x3a')][a284_0x27d1('0x2e')],'errors',a284_0x27d1('0x7'),constants[a284_0x27d1('0x8')]['GOLD'][a284_0x27d1('0x1e')]));}else if(_0x26d468===omnic[a284_0x27d1('0x3')][a284_0x27d1('0xe')]&&_0x3a64fb[a284_0x27d1('0x2c')]>=constants[a284_0x27d1('0x8')][a284_0x27d1('0xe')][a284_0x27d1('0x1e')]){throw new errors[(a284_0x27d1('0x15'))](errors[a284_0x27d1('0x0')][a284_0x27d1('0x34')],this[a284_0x27d1('0x6')][a284_0x27d1('0x2')][a284_0x27d1('0x35')](_0x221d11['guild'][a284_0x27d1('0x3a')][a284_0x27d1('0x2e')],'errors','membershipLimitRoleLevels',constants['LIMITS']['PLATINUM']['ROLE_LEVELS']));}}else if(_0x3a64fb['length']>=constants[a284_0x27d1('0x8')][a284_0x27d1('0x1e')]){throw new errors[(a284_0x27d1('0x15'))](errors[a284_0x27d1('0x0')][a284_0x27d1('0x48')],this[a284_0x27d1('0x6')][a284_0x27d1('0x2')]['getString'](_0x221d11['guild'][a284_0x27d1('0x3a')][a284_0x27d1('0x2e')],a284_0x27d1('0x2a'),a284_0x27d1('0x13'),constants['LIMITS'][a284_0x27d1('0x1e')]));}const _0x216b15=await Role_1[a284_0x27d1('0x4c')][a284_0x27d1('0x9')]({'guild':_0x221d11['guild']['id'],'level':_0x3f777f['level']});if(_0x26d468){if(_0x26d468===omnic['PremiumTier']['GOLD']&&_0x216b15>=constants[a284_0x27d1('0x8')][a284_0x27d1('0x44')][a284_0x27d1('0x49')]){throw new errors[(a284_0x27d1('0x15'))](errors[a284_0x27d1('0x0')]['LIMITED_PREMIUM_MEMBERSHIP'],this['client']['locale'][a284_0x27d1('0x35')](_0x221d11[a284_0x27d1('0x46')]['document'][a284_0x27d1('0x2e')],'errors',a284_0x27d1('0x3f'),constants[a284_0x27d1('0x8')][a284_0x27d1('0x44')][a284_0x27d1('0x49')]));}else if(_0x26d468===omnic['PremiumTier'][a284_0x27d1('0xe')]&&_0x216b15>=constants[a284_0x27d1('0x8')][a284_0x27d1('0xe')][a284_0x27d1('0x49')]){throw new errors[(a284_0x27d1('0x15'))](errors['BASTION_ERROR_TYPE'][a284_0x27d1('0x34')],this[a284_0x27d1('0x6')][a284_0x27d1('0x2')][a284_0x27d1('0x35')](_0x221d11[a284_0x27d1('0x46')][a284_0x27d1('0x3a')][a284_0x27d1('0x2e')],a284_0x27d1('0x2a'),a284_0x27d1('0x3f'),constants['LIMITS'][a284_0x27d1('0xe')][a284_0x27d1('0x49')]));}}else if(_0x216b15>=constants[a284_0x27d1('0x8')][a284_0x27d1('0x49')]){throw new errors['DiscordError'](errors[a284_0x27d1('0x0')][a284_0x27d1('0x48')],this[a284_0x27d1('0x6')][a284_0x27d1('0x2')][a284_0x27d1('0x35')](_0x221d11[a284_0x27d1('0x46')]['document'][a284_0x27d1('0x2e')],a284_0x27d1('0x2a'),'premiumLevelRoles',constants[a284_0x27d1('0x8')][a284_0x27d1('0x49')]));}}const _0xab723b=this[a284_0x27d1('0x6')][a284_0x27d1('0x14')][a284_0x27d1('0x26')](_0x221d11[a284_0x27d1('0x46')],_0x3f777f[a284_0x27d1('0x25')][a284_0x27d1('0x20')]('\x20'));if(!_0xab723b)throw new errors['DiscordError'](errors[a284_0x27d1('0x0')][a284_0x27d1('0x39')],this[a284_0x27d1('0x6')][a284_0x27d1('0x2')][a284_0x27d1('0x35')](_0x221d11[a284_0x27d1('0x46')]['document'][a284_0x27d1('0x2e')],a284_0x27d1('0x41'),a284_0x27d1('0x1f')));let _0x11f9f1=await _0xab723b[a284_0x27d1('0x1c')]();if(!_0x11f9f1&&_0x3f777f['emoji']){_0x11f9f1=await _0xab723b[a284_0x27d1('0x24')]();}_0x11f9f1[a284_0x27d1('0x47')]=_0x3f777f[a284_0x27d1('0x47')];await _0x11f9f1['save']();return await _0x221d11[a284_0x27d1('0x32')][a284_0x27d1('0x29')]({'embed':{'color':tesseract_1[a284_0x27d1('0x3b')]['COLORS'][a284_0x27d1('0x22')],'description':this[a284_0x27d1('0x6')][a284_0x27d1('0x2')][a284_0x27d1('0x35')](_0x221d11['guild'][a284_0x27d1('0x3a')][a284_0x27d1('0x2e')],'info',a284_0x27d1('0xf'),_0x221d11[a284_0x27d1('0x18')][a284_0x27d1('0x33')],_0xab723b[a284_0x27d1('0x30')],_0x3f777f['level'])}})[a284_0x27d1('0x2b')](()=>{});}if(_0x3f777f[a284_0x27d1('0x36')]){await Role_1[a284_0x27d1('0x4c')][a284_0x27d1('0x3d')]({'guild':_0x221d11[a284_0x27d1('0x46')]['id'],'level':_0x3f777f[a284_0x27d1('0x47')]},{'$unset':{'level':0x1}});return await _0x221d11[a284_0x27d1('0x32')][a284_0x27d1('0x29')]({'embed':{'color':tesseract_1[a284_0x27d1('0x3b')][a284_0x27d1('0xd')][a284_0x27d1('0x40')],'description':this[a284_0x27d1('0x6')][a284_0x27d1('0x2')][a284_0x27d1('0x35')](_0x221d11[a284_0x27d1('0x46')][a284_0x27d1('0x3a')][a284_0x27d1('0x2e')],a284_0x27d1('0x28'),'roleLevelClear',_0x221d11[a284_0x27d1('0x18')][a284_0x27d1('0x33')],_0x3f777f[a284_0x27d1('0x47')])}})[a284_0x27d1('0x2b')](()=>{});}const _0x51eec1=await Role_1[a284_0x27d1('0x4c')]['find']({'guild':_0x221d11['guild']['id'],'level':_0x3f777f[a284_0x27d1('0x47')]});if(!_0x51eec1[a284_0x27d1('0x2c')])throw new Error('NO_ROLES_FOR_LEVEL');const _0x74afed=this[a284_0x27d1('0x6')][a284_0x27d1('0x14')][a284_0x27d1('0x2d')](_0x221d11[a284_0x27d1('0x46')],_0x51eec1[a284_0x27d1('0x11')](_0xf8d21d=>_0xf8d21d[a284_0x27d1('0x16')]));return await _0x221d11['channel'][a284_0x27d1('0x29')]({'embed':{'color':tesseract_1[a284_0x27d1('0x3b')][a284_0x27d1('0xd')][a284_0x27d1('0x42')],'title':a284_0x27d1('0x4')+_0x3f777f[a284_0x27d1('0x47')],'fields':[{'name':a284_0x27d1('0xc'),'value':_0x74afed[a284_0x27d1('0x11')](_0x3aa20d=>_0x3aa20d['name'])[a284_0x27d1('0x20')]('\x0a')}]}})['catch'](()=>{});}const _0x4c9e00=await Role_1[a284_0x27d1('0x4c')][a284_0x27d1('0x37')]({'guild':_0x221d11[a284_0x27d1('0x46')]['id'],'level':{'$exists':!![],'$ne':null}});if(!_0x4c9e00[a284_0x27d1('0x2c')])throw new Error('NO_LEVEL_UP_ROLES');const _0x20e264={};for(const _0x4c38bb of _0x4c9e00){if(_0x4c38bb[a284_0x27d1('0x47')]in _0x20e264){_0x20e264[_0x4c38bb[a284_0x27d1('0x47')]][a284_0x27d1('0x1a')](_0x4c38bb[a284_0x27d1('0x16')]);}else{_0x20e264[_0x4c38bb[a284_0x27d1('0x47')]]=[_0x4c38bb[a284_0x27d1('0x16')]];}}return await _0x221d11[a284_0x27d1('0x32')][a284_0x27d1('0x29')]({'embed':{'color':tesseract_1[a284_0x27d1('0x3b')]['COLORS'][a284_0x27d1('0x42')],'title':'Level-Up\x20Roles','fields':Object['keys'](_0x20e264)[a284_0x27d1('0x11')](_0x4d092a=>({'name':'Level\x20'+_0x4d092a,'value':_0x20e264[_0x4d092a][a284_0x27d1('0x11')](_0x193c0d=>_0x221d11[a284_0x27d1('0x46')][a284_0x27d1('0x12')][a284_0x27d1('0x38')][a284_0x27d1('0x17')](_0x193c0d)?_0x221d11['guild'][a284_0x27d1('0x12')][a284_0x27d1('0x38')]['get'](_0x193c0d)[a284_0x27d1('0x30')]:_0x193c0d)[a284_0x27d1('0x20')](',\x20')}))}})[a284_0x27d1('0x2b')](()=>{});};}};
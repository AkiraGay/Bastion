const a66_0x270b=['IRIS','exports','default','NO_LEVEL_UP_ROLES','constructor','Level-Up\x20Roles','Roles','getString','LIMITED_PREMIUM_MEMBERSHIP','user','BASTION_ERROR_TYPE','guild','roleLevelClear','tag','ROLE_NOT_FOUND','save','@bastion/tesseract','name','catch','premiumRoleLevels','membershipLimitLevelRoles','PLATINUM','role','levelUpRoles','countDocuments','MANAGE_ROLES','DiscordError','cache','join','channel','length','find','errors','_id','GREEN','fetchPremiumTier','membershipLimitRoleLevels','isPublicBastion','Constants','author','Command','map','exec','ROLE_LEVELS','remove','resolver','apply','clamp','language','COLORS','premiumLevelRoles','../../utils/constants','document','levelUpRoles\x20--level\x20NUMBER\x20--remove','createDocument','NO_ROLES_FOR_LEVEL','GOLD','PremiumTier','MAX_LEVEL','get','../../utils/errors','roles','return\x20/\x22\x20+\x20this\x20+\x20\x22/','updateMany','locale','resolveRoles','level','Level\x20','../../models/Role','../../utils/gamification','LIMITS','client','../../utils/omnic','test','send','../../utils/numbers','levelUpRoles\x20--level\x20NUMBER\x20--role\x20ROLE','PREMIUM_MEMBERSHIP_REQUIRED','roleLevelAdd','distinct','info','RED','ROLES_PER_LEVEL'];(function(_0x16a09b,_0x270b0b){const _0x1ed057=function(_0x8cf4fc){while(--_0x8cf4fc){_0x16a09b['push'](_0x16a09b['shift']());}},_0x58c99d=function(){const _0x210ee0={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0xa0b50,_0x2141de,_0x5a6983,_0x523131){_0x523131=_0x523131||{};let _0x1e5f39=_0x2141de+'='+_0x5a6983,_0x37d686=0x0;for(let _0x1fe499=0x0,_0xb2352d=_0xa0b50['length'];_0x1fe499<_0xb2352d;_0x1fe499++){const _0x596161=_0xa0b50[_0x1fe499];_0x1e5f39+=';\x20'+_0x596161;const _0x669a46=_0xa0b50[_0x596161];_0xa0b50['push'](_0x669a46),_0xb2352d=_0xa0b50['length'],_0x669a46!==!![]&&(_0x1e5f39+='='+_0x669a46);}_0x523131['cookie']=_0x1e5f39;},'removeCookie':function(){return'dev';},'getCookie':function(_0x201283,_0x4e943e){_0x201283=_0x201283||function(_0x12c98a){return _0x12c98a;};const _0x113806=_0x201283(new RegExp('(?:^|;\x20)'+_0x4e943e['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x331eb8=function(_0x8ddb9e,_0xe88665){_0x8ddb9e(++_0xe88665);};return _0x331eb8(_0x1ed057,_0x270b0b),_0x113806?decodeURIComponent(_0x113806[0x1]):undefined;}},_0x10bb85=function(){const _0xe48ae2=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0xe48ae2['test'](_0x210ee0['removeCookie']['toString']());};_0x210ee0['updateCookie']=_0x10bb85;let _0x2afe6b='';const _0xe47c32=_0x210ee0['updateCookie']();if(!_0xe47c32)_0x210ee0['setCookie'](['*'],'counter',0x1);else _0xe47c32?_0x2afe6b=_0x210ee0['getCookie'](null,'counter'):_0x210ee0['removeCookie']();};_0x58c99d();}(a66_0x270b,0xc3));const a66_0x1ed0=function(_0x16a09b,_0x270b0b){_0x16a09b=_0x16a09b-0x0;let _0x1ed057=a66_0x270b[_0x16a09b];return _0x1ed057;};const a66_0x5a6983=function(){let _0x85d34=!![];return function(_0x481264,_0x252370){const _0x535dab=_0x85d34?function(){if(_0x252370){const _0x5999e2=_0x252370[a66_0x1ed0('0x11')](_0x481264,arguments);return _0x252370=null,_0x5999e2;}}:function(){};return _0x85d34=![],_0x535dab;};}(),a66_0x2141de=a66_0x5a6983(this,function(){const _0x336b33=function(){const _0x98a261=_0x336b33[a66_0x1ed0('0x3a')](a66_0x1ed0('0x21'))()[a66_0x1ed0('0x3a')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x98a261[a66_0x1ed0('0x2c')](a66_0x2141de);};return _0x336b33();});a66_0x2141de();'use strict';const tesseract_1=require(a66_0x1ed0('0x46')),Role_1=require(a66_0x1ed0('0x27')),constants=require(a66_0x1ed0('0x16')),errors=require(a66_0x1ed0('0x1f')),gamification=require(a66_0x1ed0('0x28')),numbers=require(a66_0x1ed0('0x2e')),omnic=require(a66_0x1ed0('0x2b'));module[a66_0x1ed0('0x37')]=class LevelUpRolesCommand extends tesseract_1[a66_0x1ed0('0xb')]{constructor(){super(a66_0x1ed0('0x4d'),{'description':'It\x20allows\x20you\x20to\x20add\x20roles\x20to\x20a\x20level.\x20When\x20members\x20reach\x20that\x20level,\x20they\x27ll\x20be\x20awarded\x20those\x20roles.','triggers':[],'arguments':{'array':[a66_0x1ed0('0x4c')],'boolean':[a66_0x1ed0('0xf')],'string':['role'],'number':[a66_0x1ed0('0x25')],'coerce':{'level':_0x2df9d5=>numbers[a66_0x1ed0('0x12')](_0x2df9d5,0x1,gamification[a66_0x1ed0('0x1d')])}},'scope':a66_0x1ed0('0x41'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a66_0x1ed0('0x4f')],'userPermissions':['MANAGE_ROLES'],'syntax':[a66_0x1ed0('0x4d'),'levelUpRoles\x20--level\x20NUMBER',a66_0x1ed0('0x2f'),a66_0x1ed0('0x18')]}),this[a66_0x1ed0('0xd')]=async(_0x2937c5,_0x2e9c30)=>{if(_0x2e9c30['level']){if(_0x2e9c30[a66_0x1ed0('0x4c')]){if(constants[a66_0x1ed0('0x8')](this[a66_0x1ed0('0x2a')][a66_0x1ed0('0x3f')])){const _0x5c49d7=await omnic[a66_0x1ed0('0x6')](_0x2937c5['guild'])[a66_0x1ed0('0x48')](()=>{}),_0x28ef11=await Role_1[a66_0x1ed0('0x38')][a66_0x1ed0('0x32')](a66_0x1ed0('0x25'),{'guild':_0x2937c5[a66_0x1ed0('0x41')]['id'],'level':{'$exists':!![],'$ne':null}});if(_0x5c49d7){if(_0x5c49d7===omnic[a66_0x1ed0('0x1c')]['GOLD']&&_0x28ef11['length']>=constants['LIMITS'][a66_0x1ed0('0x1b')][a66_0x1ed0('0xe')])throw new errors['DiscordError'](errors[a66_0x1ed0('0x40')][a66_0x1ed0('0x3e')],this[a66_0x1ed0('0x2a')][a66_0x1ed0('0x23')][a66_0x1ed0('0x3d')](_0x2937c5[a66_0x1ed0('0x41')][a66_0x1ed0('0x17')][a66_0x1ed0('0x13')],'errors',a66_0x1ed0('0x7'),constants[a66_0x1ed0('0x29')]['GOLD'][a66_0x1ed0('0xe')]));else{if(_0x5c49d7===omnic[a66_0x1ed0('0x1c')][a66_0x1ed0('0x4b')]&&_0x28ef11[a66_0x1ed0('0x1')]>=constants['LIMITS'][a66_0x1ed0('0x4b')][a66_0x1ed0('0xe')])throw new errors[(a66_0x1ed0('0x50'))](errors[a66_0x1ed0('0x40')][a66_0x1ed0('0x3e')],this[a66_0x1ed0('0x2a')]['locale']['getString'](_0x2937c5[a66_0x1ed0('0x41')][a66_0x1ed0('0x17')]['language'],'errors',a66_0x1ed0('0x7'),constants[a66_0x1ed0('0x29')][a66_0x1ed0('0x4b')]['ROLE_LEVELS']));}}else{if(_0x28ef11[a66_0x1ed0('0x1')]>=constants[a66_0x1ed0('0x29')]['ROLE_LEVELS'])throw new errors[(a66_0x1ed0('0x50'))](errors[a66_0x1ed0('0x40')][a66_0x1ed0('0x30')],this[a66_0x1ed0('0x2a')]['locale'][a66_0x1ed0('0x3d')](_0x2937c5[a66_0x1ed0('0x41')][a66_0x1ed0('0x17')][a66_0x1ed0('0x13')],a66_0x1ed0('0x3'),a66_0x1ed0('0x49'),constants['LIMITS']['ROLE_LEVELS']));}const _0x1223a5=await Role_1[a66_0x1ed0('0x38')][a66_0x1ed0('0x4e')]({'guild':_0x2937c5[a66_0x1ed0('0x41')]['id'],'level':_0x2e9c30[a66_0x1ed0('0x25')]});if(_0x5c49d7){if(_0x5c49d7===omnic[a66_0x1ed0('0x1c')][a66_0x1ed0('0x1b')]&&_0x1223a5>=constants[a66_0x1ed0('0x29')][a66_0x1ed0('0x1b')]['ROLES_PER_LEVEL'])throw new errors[(a66_0x1ed0('0x50'))](errors[a66_0x1ed0('0x40')][a66_0x1ed0('0x3e')],this[a66_0x1ed0('0x2a')][a66_0x1ed0('0x23')]['getString'](_0x2937c5[a66_0x1ed0('0x41')][a66_0x1ed0('0x17')][a66_0x1ed0('0x13')],'errors','membershipLimitLevelRoles',constants[a66_0x1ed0('0x29')][a66_0x1ed0('0x1b')][a66_0x1ed0('0x35')]));else{if(_0x5c49d7===omnic[a66_0x1ed0('0x1c')]['PLATINUM']&&_0x1223a5>=constants[a66_0x1ed0('0x29')][a66_0x1ed0('0x4b')][a66_0x1ed0('0x35')])throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][a66_0x1ed0('0x3e')],this[a66_0x1ed0('0x2a')]['locale'][a66_0x1ed0('0x3d')](_0x2937c5[a66_0x1ed0('0x41')][a66_0x1ed0('0x17')][a66_0x1ed0('0x13')],a66_0x1ed0('0x3'),a66_0x1ed0('0x4a'),constants['LIMITS']['PLATINUM'][a66_0x1ed0('0x35')]));}}else{if(_0x1223a5>=constants['LIMITS'][a66_0x1ed0('0x35')])throw new errors[(a66_0x1ed0('0x50'))](errors[a66_0x1ed0('0x40')][a66_0x1ed0('0x30')],this['client'][a66_0x1ed0('0x23')][a66_0x1ed0('0x3d')](_0x2937c5['guild']['document'][a66_0x1ed0('0x13')],a66_0x1ed0('0x3'),a66_0x1ed0('0x15'),constants[a66_0x1ed0('0x29')][a66_0x1ed0('0x35')]));}}const _0x5039b3=this[a66_0x1ed0('0x2a')][a66_0x1ed0('0x10')]['resolveRole'](_0x2937c5['guild'],_0x2e9c30[a66_0x1ed0('0x4c')]['join']('\x20'));if(!_0x5039b3)throw new errors[(a66_0x1ed0('0x50'))](errors[a66_0x1ed0('0x40')][a66_0x1ed0('0x44')],this['client']['locale']['getString'](_0x2937c5[a66_0x1ed0('0x41')][a66_0x1ed0('0x17')][a66_0x1ed0('0x13')],'error','roleNotFound'));let _0x137fd1=await _0x5039b3['fetchDocument']();return!_0x137fd1&&(_0x137fd1=await _0x5039b3[a66_0x1ed0('0x19')]()),_0x137fd1[a66_0x1ed0('0x25')]=_0x2e9c30[a66_0x1ed0('0x25')],await _0x137fd1[a66_0x1ed0('0x45')](),await _0x2937c5['channel'][a66_0x1ed0('0x2d')]({'embed':{'color':tesseract_1[a66_0x1ed0('0x9')][a66_0x1ed0('0x14')][a66_0x1ed0('0x5')],'description':this['client'][a66_0x1ed0('0x23')][a66_0x1ed0('0x3d')](_0x2937c5[a66_0x1ed0('0x41')][a66_0x1ed0('0x17')][a66_0x1ed0('0x13')],a66_0x1ed0('0x33'),a66_0x1ed0('0x31'),_0x2937c5['author'][a66_0x1ed0('0x43')],_0x5039b3[a66_0x1ed0('0x47')],_0x2e9c30[a66_0x1ed0('0x25')])}})[a66_0x1ed0('0x48')](()=>{});}if(_0x2e9c30[a66_0x1ed0('0xf')])return await Role_1[a66_0x1ed0('0x38')][a66_0x1ed0('0x22')]({'guild':_0x2937c5[a66_0x1ed0('0x41')]['id'],'level':_0x2e9c30[a66_0x1ed0('0x25')]},{'$unset':{'level':0x1}}),await _0x2937c5[a66_0x1ed0('0x0')][a66_0x1ed0('0x2d')]({'embed':{'color':tesseract_1['Constants']['COLORS'][a66_0x1ed0('0x34')],'description':this[a66_0x1ed0('0x2a')][a66_0x1ed0('0x23')][a66_0x1ed0('0x3d')](_0x2937c5[a66_0x1ed0('0x41')][a66_0x1ed0('0x17')]['language'],a66_0x1ed0('0x33'),a66_0x1ed0('0x42'),_0x2937c5[a66_0x1ed0('0xa')][a66_0x1ed0('0x43')],_0x2e9c30[a66_0x1ed0('0x25')])}})[a66_0x1ed0('0x48')](()=>{});const _0x451af5=await Role_1['default'][a66_0x1ed0('0x2')]({'guild':_0x2937c5['guild']['id'],'level':_0x2e9c30[a66_0x1ed0('0x25')]});if(!_0x451af5[a66_0x1ed0('0x1')])throw new Error(a66_0x1ed0('0x1a'));const _0x9f6dc=this[a66_0x1ed0('0x2a')][a66_0x1ed0('0x10')][a66_0x1ed0('0x24')](_0x2937c5[a66_0x1ed0('0x41')],_0x451af5[a66_0x1ed0('0xc')](_0x9c3de=>_0x9c3de[a66_0x1ed0('0x4')]));return await _0x2937c5[a66_0x1ed0('0x0')][a66_0x1ed0('0x2d')]({'embed':{'color':tesseract_1[a66_0x1ed0('0x9')]['COLORS'][a66_0x1ed0('0x36')],'title':'Level\x20'+_0x2e9c30[a66_0x1ed0('0x25')],'fields':[{'name':a66_0x1ed0('0x3c'),'value':_0x9f6dc[a66_0x1ed0('0xc')](_0x550f40=>_0x550f40[a66_0x1ed0('0x47')])[a66_0x1ed0('0x52')]('\x0a')}]}})[a66_0x1ed0('0x48')](()=>{});}const _0x8115e=await Role_1[a66_0x1ed0('0x38')][a66_0x1ed0('0x2')]({'guild':_0x2937c5[a66_0x1ed0('0x41')]['id'],'level':{'$exists':!![],'$ne':null}});if(!_0x8115e[a66_0x1ed0('0x1')])throw new Error(a66_0x1ed0('0x39'));const _0x4a01cf={};for(const _0x561aae of _0x8115e){_0x561aae[a66_0x1ed0('0x25')]in _0x4a01cf?_0x4a01cf[_0x561aae[a66_0x1ed0('0x25')]]['push'](_0x561aae[a66_0x1ed0('0x4')]):_0x4a01cf[_0x561aae[a66_0x1ed0('0x25')]]=[_0x561aae[a66_0x1ed0('0x4')]];}return await _0x2937c5[a66_0x1ed0('0x0')][a66_0x1ed0('0x2d')]({'embed':{'color':tesseract_1[a66_0x1ed0('0x9')][a66_0x1ed0('0x14')][a66_0x1ed0('0x36')],'title':a66_0x1ed0('0x3b'),'fields':Object['keys'](_0x4a01cf)[a66_0x1ed0('0xc')](_0x1ed132=>({'name':a66_0x1ed0('0x26')+_0x1ed132,'value':_0x4a01cf[_0x1ed132][a66_0x1ed0('0xc')](_0x415544=>_0x2937c5['guild'][a66_0x1ed0('0x20')][a66_0x1ed0('0x51')]['has'](_0x415544)?_0x2937c5[a66_0x1ed0('0x41')][a66_0x1ed0('0x20')]['cache'][a66_0x1ed0('0x1e')](_0x415544)[a66_0x1ed0('0x47')]:_0x415544)['join'](',\x20')}))}})['catch'](()=>{});};}};
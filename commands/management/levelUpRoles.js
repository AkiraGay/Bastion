const a88_0x304a87=a88_0x3863;function a88_0x7e9a(){const _0x3891fe=['countDocuments','info','premiumLevelRoles','Level\x20','../../utils/constants','roleNotFound','toString','roles','distinct','ROLES_PER_LEVEL','PremiumTier','IRIS','premiumRoleLevels','exec','remove','fetchPremiumTier','map','membershipLimitRoleLevels','_id','../../utils/numbers','269148qLXNLB','7lhGrWb','keys','9373248ToPweE','Constants','catch','get','Level-Up\x20Roles','NO_ROLES_FOR_LEVEL','guild','levelUpRoles\x20--level\x20NUMBER\x20--role\x20ROLE','5629935RPLwab','getString','author','role','resolveRoles','1651144GZPcqy','COLORS','search','client','ROLE_NOT_FOUND','locale','GOLD','document','63zNxTVB','length','tag','language','membershipLimitLevelRoles','618wDEtgf','NO_LEVEL_UP_ROLES','name','It\x20allows\x20you\x20to\x20add\x20roles\x20to\x20a\x20level.\x20When\x20members\x20reach\x20that\x20level,\x20they\x27ll\x20be\x20awarded\x20those\x20roles.','MANAGE_ROLES','(((.+)+)+)+$','56JjOXwK','apply','942HVCoCW','663LuRJLE','@bastion/tesseract','resolver','channel','resolveRole','clamp','cache','11rYlUOP','../../utils/omnic','PLATINUM','levelUpRoles\x20--level\x20NUMBER','DiscordError','default','PREMIUM_MEMBERSHIP_REQUIRED','../../models/Role','roleLevelClear','BASTION_ERROR_TYPE','ROLE_LEVELS','../../utils/gamification','318660oGBiDY','levelUpRoles','errors','level','join','2320980EQZewm','isPublicBastion','LIMITED_PREMIUM_MEMBERSHIP','LIMITS','Command','../../utils/errors','send','createDocument'];a88_0x7e9a=function(){return _0x3891fe;};return a88_0x7e9a();}(function(_0x786438,_0x5b66e7){const _0x203478=a88_0x3863,_0x5c6f9b=_0x786438();while(!![]){try{const _0x42e134=-parseInt(_0x203478(0x21b))/0x1*(-parseInt(_0x203478(0x213))/0x2)+parseInt(_0x203478(0x22f))/0x3*(-parseInt(_0x203478(0x219))/0x4)+parseInt(_0x203478(0x201))/0x5+parseInt(_0x203478(0x1f9))/0x6*(parseInt(_0x203478(0x1f7))/0x7)+parseInt(_0x203478(0x206))/0x8*(-parseInt(_0x203478(0x20e))/0x9)+-parseInt(_0x203478(0x234))/0xa*(parseInt(_0x203478(0x223))/0xb)+parseInt(_0x203478(0x1f6))/0xc*(parseInt(_0x203478(0x21c))/0xd);if(_0x42e134===_0x5b66e7)break;else _0x5c6f9b['push'](_0x5c6f9b['shift']());}catch(_0x72e14c){_0x5c6f9b['push'](_0x5c6f9b['shift']());}}}(a88_0x7e9a,0xea2f7));const a88_0x1d9d1d=(function(){let _0x37837b=!![];return function(_0x1aebd5,_0x38a910){const _0x2cc843=_0x37837b?function(){const _0x459eb4=a88_0x3863;if(_0x38a910){const _0x1ce0f2=_0x38a910[_0x459eb4(0x21a)](_0x1aebd5,arguments);return _0x38a910=null,_0x1ce0f2;}}:function(){};return _0x37837b=![],_0x2cc843;};}()),a88_0x23f943=a88_0x1d9d1d(this,function(){const _0x179b48=a88_0x3863;return a88_0x23f943[_0x179b48(0x242)]()[_0x179b48(0x208)](_0x179b48(0x218))['toString']()['constructor'](a88_0x23f943)[_0x179b48(0x208)](_0x179b48(0x218));});a88_0x23f943();'use strict';const tesseract_1=require(a88_0x304a87(0x21d)),Role_1=require(a88_0x304a87(0x22a)),constants=require(a88_0x304a87(0x240)),errors=require(a88_0x304a87(0x239)),gamification=require(a88_0x304a87(0x22e)),numbers=require(a88_0x304a87(0x1f5)),omnic=require(a88_0x304a87(0x224));function a88_0x3863(_0x26b7d7,_0x38759a){const _0x3d07aa=a88_0x7e9a();return a88_0x3863=function(_0x23f943,_0x1d9d1d){_0x23f943=_0x23f943-0x1ec;let _0x7e9a51=_0x3d07aa[_0x23f943];return _0x7e9a51;},a88_0x3863(_0x26b7d7,_0x38759a);}module['exports']=class LevelUpRolesCommand extends tesseract_1[a88_0x304a87(0x238)]{constructor(){const _0x182ecb=a88_0x304a87;super('levelUpRoles',{'description':_0x182ecb(0x216),'triggers':[],'arguments':{'array':['role'],'boolean':[_0x182ecb(0x1f0)],'string':[_0x182ecb(0x204)],'number':[_0x182ecb(0x232)],'coerce':{'level':_0x3e2ee4=>numbers[_0x182ecb(0x221)](_0x3e2ee4,0x1,gamification['MAX_LEVEL'])}},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[_0x182ecb(0x217)],'userPermissions':['MANAGE_ROLES'],'syntax':[_0x182ecb(0x230),_0x182ecb(0x226),_0x182ecb(0x200),'levelUpRoles\x20--level\x20NUMBER\x20--remove']});}[a88_0x304a87(0x1ef)]=async(_0x5562f0,_0x5410f4)=>{const _0x5d760c=a88_0x304a87;if(_0x5410f4[_0x5d760c(0x232)]){if(_0x5410f4[_0x5d760c(0x204)]){if(constants[_0x5d760c(0x235)](this[_0x5d760c(0x209)]['user'])){const _0x2e188e=await omnic[_0x5d760c(0x1f1)](_0x5562f0[_0x5d760c(0x1ff)])['catch'](()=>{}),_0xbd226a=await Role_1['default'][_0x5d760c(0x244)]('level',{'guild':_0x5562f0[_0x5d760c(0x1ff)]['id'],'level':{'$exists':!![],'$ne':null}});if(_0x2e188e){if(_0x2e188e===omnic[_0x5d760c(0x1ec)][_0x5d760c(0x20c)]&&_0xbd226a[_0x5d760c(0x20f)]>=constants[_0x5d760c(0x237)]['GOLD'][_0x5d760c(0x22d)])throw new errors[(_0x5d760c(0x227))](errors[_0x5d760c(0x22c)][_0x5d760c(0x236)],this[_0x5d760c(0x209)][_0x5d760c(0x20b)][_0x5d760c(0x202)](_0x5562f0['guild'][_0x5d760c(0x20d)]['language'],'errors','membershipLimitRoleLevels',constants['LIMITS'][_0x5d760c(0x20c)][_0x5d760c(0x22d)]));else{if(_0x2e188e===omnic[_0x5d760c(0x1ec)][_0x5d760c(0x225)]&&_0xbd226a[_0x5d760c(0x20f)]>=constants['LIMITS'][_0x5d760c(0x225)][_0x5d760c(0x22d)])throw new errors[(_0x5d760c(0x227))](errors[_0x5d760c(0x22c)][_0x5d760c(0x236)],this[_0x5d760c(0x209)][_0x5d760c(0x20b)][_0x5d760c(0x202)](_0x5562f0[_0x5d760c(0x1ff)][_0x5d760c(0x20d)][_0x5d760c(0x211)],_0x5d760c(0x231),_0x5d760c(0x1f3),constants[_0x5d760c(0x237)][_0x5d760c(0x225)][_0x5d760c(0x22d)]));}}else{if(_0xbd226a[_0x5d760c(0x20f)]>=constants[_0x5d760c(0x237)][_0x5d760c(0x22d)])throw new errors['DiscordError'](errors[_0x5d760c(0x22c)][_0x5d760c(0x229)],this[_0x5d760c(0x209)][_0x5d760c(0x20b)][_0x5d760c(0x202)](_0x5562f0[_0x5d760c(0x1ff)]['document'][_0x5d760c(0x211)],_0x5d760c(0x231),_0x5d760c(0x1ee),constants[_0x5d760c(0x237)][_0x5d760c(0x22d)]));}const _0x4a4a24=await Role_1['default'][_0x5d760c(0x23c)]({'guild':_0x5562f0[_0x5d760c(0x1ff)]['id'],'level':_0x5410f4['level']});if(_0x2e188e){if(_0x2e188e===omnic['PremiumTier'][_0x5d760c(0x20c)]&&_0x4a4a24>=constants[_0x5d760c(0x237)][_0x5d760c(0x20c)][_0x5d760c(0x245)])throw new errors['DiscordError'](errors[_0x5d760c(0x22c)]['LIMITED_PREMIUM_MEMBERSHIP'],this['client']['locale']['getString'](_0x5562f0[_0x5d760c(0x1ff)][_0x5d760c(0x20d)][_0x5d760c(0x211)],_0x5d760c(0x231),_0x5d760c(0x212),constants[_0x5d760c(0x237)][_0x5d760c(0x20c)]['ROLES_PER_LEVEL']));else{if(_0x2e188e===omnic[_0x5d760c(0x1ec)][_0x5d760c(0x225)]&&_0x4a4a24>=constants[_0x5d760c(0x237)][_0x5d760c(0x225)][_0x5d760c(0x245)])throw new errors[(_0x5d760c(0x227))](errors[_0x5d760c(0x22c)][_0x5d760c(0x236)],this['client']['locale'][_0x5d760c(0x202)](_0x5562f0['guild']['document'][_0x5d760c(0x211)],_0x5d760c(0x231),_0x5d760c(0x212),constants[_0x5d760c(0x237)][_0x5d760c(0x225)][_0x5d760c(0x245)]));}}else{if(_0x4a4a24>=constants[_0x5d760c(0x237)]['ROLES_PER_LEVEL'])throw new errors[(_0x5d760c(0x227))](errors['BASTION_ERROR_TYPE'][_0x5d760c(0x229)],this[_0x5d760c(0x209)][_0x5d760c(0x20b)][_0x5d760c(0x202)](_0x5562f0['guild'][_0x5d760c(0x20d)][_0x5d760c(0x211)],_0x5d760c(0x231),_0x5d760c(0x23e),constants[_0x5d760c(0x237)][_0x5d760c(0x245)]));}}const _0x23ef0f=this[_0x5d760c(0x209)][_0x5d760c(0x21e)][_0x5d760c(0x220)](_0x5562f0[_0x5d760c(0x1ff)],_0x5410f4['role'][_0x5d760c(0x233)]('\x20'));if(!_0x23ef0f)throw new errors[(_0x5d760c(0x227))](errors['BASTION_ERROR_TYPE'][_0x5d760c(0x20a)],this[_0x5d760c(0x209)][_0x5d760c(0x20b)][_0x5d760c(0x202)](_0x5562f0[_0x5d760c(0x1ff)][_0x5d760c(0x20d)][_0x5d760c(0x211)],_0x5d760c(0x231),_0x5d760c(0x241)));let _0x20e7d7=await _0x23ef0f['fetchDocument']();return!_0x20e7d7&&(_0x20e7d7=await _0x23ef0f[_0x5d760c(0x23b)]()),_0x20e7d7[_0x5d760c(0x232)]=_0x5410f4['level'],await _0x20e7d7['save'](),await _0x5562f0[_0x5d760c(0x21f)][_0x5d760c(0x23a)]({'embed':{'color':tesseract_1[_0x5d760c(0x1fa)][_0x5d760c(0x207)]['GREEN'],'description':this[_0x5d760c(0x209)]['locale'][_0x5d760c(0x202)](_0x5562f0[_0x5d760c(0x1ff)][_0x5d760c(0x20d)]['language'],_0x5d760c(0x23d),'roleLevelAdd',_0x5562f0[_0x5d760c(0x203)][_0x5d760c(0x210)],_0x23ef0f[_0x5d760c(0x215)],_0x5410f4['level'])}})[_0x5d760c(0x1fb)](()=>{});}if(_0x5410f4[_0x5d760c(0x1f0)])return await Role_1[_0x5d760c(0x228)]['updateMany']({'guild':_0x5562f0[_0x5d760c(0x1ff)]['id'],'level':_0x5410f4[_0x5d760c(0x232)]},{'$unset':{'level':0x1}}),await _0x5562f0['channel'][_0x5d760c(0x23a)]({'embed':{'color':tesseract_1['Constants'][_0x5d760c(0x207)]['RED'],'description':this[_0x5d760c(0x209)][_0x5d760c(0x20b)][_0x5d760c(0x202)](_0x5562f0[_0x5d760c(0x1ff)][_0x5d760c(0x20d)]['language'],_0x5d760c(0x23d),_0x5d760c(0x22b),_0x5562f0[_0x5d760c(0x203)]['tag'],_0x5410f4['level'])}})[_0x5d760c(0x1fb)](()=>{});const _0x3ea916=await Role_1['default']['find']({'guild':_0x5562f0[_0x5d760c(0x1ff)]['id'],'level':_0x5410f4[_0x5d760c(0x232)]});if(!_0x3ea916['length'])throw new Error(_0x5d760c(0x1fe));const _0x55ec12=this[_0x5d760c(0x209)][_0x5d760c(0x21e)][_0x5d760c(0x205)](_0x5562f0[_0x5d760c(0x1ff)],_0x3ea916[_0x5d760c(0x1f2)](_0x4bb871=>_0x4bb871[_0x5d760c(0x1f4)]));return await _0x5562f0[_0x5d760c(0x21f)][_0x5d760c(0x23a)]({'embed':{'color':tesseract_1[_0x5d760c(0x1fa)]['COLORS'][_0x5d760c(0x1ed)],'title':'Level\x20'+_0x5410f4['level'],'fields':[{'name':'Roles','value':_0x55ec12['map'](_0x1729a1=>_0x1729a1['name'])['join']('\x0a')}]}})[_0x5d760c(0x1fb)](()=>{});}const _0x70bc55=await Role_1['default']['find']({'guild':_0x5562f0['guild']['id'],'level':{'$exists':!![],'$ne':null}});if(!_0x70bc55['length'])throw new Error(_0x5d760c(0x214));const _0x40c857={};for(const _0x590f0d of _0x70bc55){_0x590f0d[_0x5d760c(0x232)]in _0x40c857?_0x40c857[_0x590f0d[_0x5d760c(0x232)]]['push'](_0x590f0d['_id']):_0x40c857[_0x590f0d[_0x5d760c(0x232)]]=[_0x590f0d[_0x5d760c(0x1f4)]];}return await _0x5562f0[_0x5d760c(0x21f)]['send']({'embed':{'color':tesseract_1[_0x5d760c(0x1fa)][_0x5d760c(0x207)][_0x5d760c(0x1ed)],'title':_0x5d760c(0x1fd),'fields':Object[_0x5d760c(0x1f8)](_0x40c857)[_0x5d760c(0x1f2)](_0x71bebd=>({'name':_0x5d760c(0x23f)+_0x71bebd,'value':_0x40c857[_0x71bebd][_0x5d760c(0x1f2)](_0x5be191=>_0x5562f0[_0x5d760c(0x1ff)][_0x5d760c(0x243)]['cache']['has'](_0x5be191)?_0x5562f0[_0x5d760c(0x1ff)][_0x5d760c(0x243)][_0x5d760c(0x222)][_0x5d760c(0x1fc)](_0x5be191)[_0x5d760c(0x215)]:_0x5be191)[_0x5d760c(0x233)](',\x20')}))}})[_0x5d760c(0x1fb)](()=>{});};};
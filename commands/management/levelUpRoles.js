const a88_0x15cc=['Level\x20','roleLevelAdd','../../utils/numbers','join','premiumLevelRoles','keys','resolver','roles','language','document','../../utils/gamification','channel','exec','getString','createDocument','remove','membershipLimitLevelRoles','catch','apply','Level-Up\x20Roles','client','../../utils/constants','test','errors','PremiumTier','get','default','IRIS','roleNotFound','It\x20allows\x20you\x20to\x20add\x20roles\x20to\x20a\x20level.\x20When\x20members\x20reach\x20that\x20level,\x20they\x27ll\x20be\x20awarded\x20those\x20roles.','LIMITS','level','name','../../utils/omnic','fetchPremiumTier','premiumRoleLevels','MAX_LEVEL','role','author','distinct','BASTION_ERROR_TYPE','locale','PLATINUM','exports','send','fetchDocument','COLORS','ROLE_NOT_FOUND','NO_ROLES_FOR_LEVEL','map','PREMIUM_MEMBERSHIP_REQUIRED','levelUpRoles\x20--level\x20NUMBER\x20--role\x20ROLE','DiscordError','membershipLimitRoleLevels','ROLE_LEVELS','length','@bastion/tesseract','find','LIMITED_PREMIUM_MEMBERSHIP','../../utils/errors','guild','_id','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','ROLES_PER_LEVEL','Constants','resolveRoles','constructor','RED','levelUpRoles\x20--level\x20NUMBER','GOLD','NO_LEVEL_UP_ROLES','cache','MANAGE_ROLES','../../models/Role'];(function(_0x147204,_0x3de469){const _0x15cc1a=function(_0x487ce9){while(--_0x487ce9){_0x147204['push'](_0x147204['shift']());}},_0x5455f0=function(){const _0xd482f2={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x562ec8,_0x1dfd79,_0x5ce1f5,_0xb900e4){_0xb900e4=_0xb900e4||{};let _0x4c6328=_0x1dfd79+'='+_0x5ce1f5,_0x5a3b76=0x0;for(let _0x37375e=0x0,_0x2fcce1=_0x562ec8['length'];_0x37375e<_0x2fcce1;_0x37375e++){const _0x534eec=_0x562ec8[_0x37375e];_0x4c6328+=';\x20'+_0x534eec;const _0x82b623=_0x562ec8[_0x534eec];_0x562ec8['push'](_0x82b623),_0x2fcce1=_0x562ec8['length'],_0x82b623!==!![]&&(_0x4c6328+='='+_0x82b623);}_0xb900e4['cookie']=_0x4c6328;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1c6be1,_0x4d816f){_0x1c6be1=_0x1c6be1||function(_0x4d78f9){return _0x4d78f9;};const _0x1a54a8=_0x1c6be1(new RegExp('(?:^|;\x20)'+_0x4d816f['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x863a57=function(_0x1d08cf,_0x404d96){_0x1d08cf(++_0x404d96);};return _0x863a57(_0x15cc1a,_0x3de469),_0x1a54a8?decodeURIComponent(_0x1a54a8[0x1]):undefined;}},_0x21bf06=function(){const _0x4dee38=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4dee38['test'](_0xd482f2['removeCookie']['toString']());};_0xd482f2['updateCookie']=_0x21bf06;let _0x28777e='';const _0x448002=_0xd482f2['updateCookie']();if(!_0x448002)_0xd482f2['setCookie'](['*'],'counter',0x1);else _0x448002?_0x28777e=_0xd482f2['getCookie'](null,'counter'):_0xd482f2['removeCookie']();};_0x5455f0();}(a88_0x15cc,0x90));const a88_0x5455=function(_0x147204,_0x3de469){_0x147204=_0x147204-0xf5;let _0x15cc1a=a88_0x15cc[_0x147204];return _0x15cc1a;};const a88_0x21b04a=a88_0x5455,a88_0x21bf06=function(){let _0x448002=!![];return function(_0x562ec8,_0x1dfd79){const _0x5ce1f5=_0x448002?function(){const _0x3ab3e9=a88_0x5455;if(_0x1dfd79){const _0xb900e4=_0x1dfd79[_0x3ab3e9(0x10b)](_0x562ec8,arguments);return _0x1dfd79=null,_0xb900e4;}}:function(){};return _0x448002=![],_0x5ce1f5;};}(),a88_0xd482f2=a88_0x21bf06(this,function(){const _0x4c6328=function(){const _0x5024ab=a88_0x5455,_0x5a3b76=_0x4c6328[_0x5024ab(0x13b)]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()['constructor'](_0x5024ab(0x137));return!_0x5a3b76[_0x5024ab(0x10f)](a88_0xd482f2);};return _0x4c6328();});a88_0xd482f2();'use strict';const tesseract_1=require(a88_0x21b04a(0x131)),Role_1=require(a88_0x21b04a(0xf8)),constants=require(a88_0x21b04a(0x10e)),errors=require(a88_0x21b04a(0x134)),gamification=require(a88_0x21b04a(0x103)),numbers=require(a88_0x21b04a(0xfb)),omnic=require(a88_0x21b04a(0x11a));module[a88_0x21b04a(0x124)]=class LevelUpRolesCommand extends tesseract_1['Command']{constructor(){const _0x234149=a88_0x21b04a;super('levelUpRoles',{'description':_0x234149(0x116),'triggers':[],'arguments':{'array':[_0x234149(0x11e)],'boolean':[_0x234149(0x108)],'string':[_0x234149(0x11e)],'number':['level'],'coerce':{'level':_0x37375e=>numbers['clamp'](_0x37375e,0x1,gamification[_0x234149(0x11d)])}},'scope':_0x234149(0x135),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[_0x234149(0xf7)],'userPermissions':[_0x234149(0xf7)],'syntax':['levelUpRoles',_0x234149(0x13d),_0x234149(0x12c),'levelUpRoles\x20--level\x20NUMBER\x20--remove']}),this[_0x234149(0x105)]=async(_0x2fcce1,_0x534eec)=>{const _0xe93405=_0x234149;if(_0x534eec[_0xe93405(0x118)]){if(_0x534eec['role']){if(constants['isPublicBastion'](this[_0xe93405(0x10d)]['user'])){const _0x1d08cf=await omnic[_0xe93405(0x11b)](_0x2fcce1[_0xe93405(0x135)])[_0xe93405(0x10a)](()=>{}),_0x404d96=await Role_1[_0xe93405(0x113)][_0xe93405(0x120)](_0xe93405(0x118),{'guild':_0x2fcce1['guild']['id'],'level':{'$exists':!![],'$ne':null}});if(_0x1d08cf){if(_0x1d08cf===omnic[_0xe93405(0x111)][_0xe93405(0x13e)]&&_0x404d96[_0xe93405(0x130)]>=constants['LIMITS'][_0xe93405(0x13e)]['ROLE_LEVELS'])throw new errors[(_0xe93405(0x12d))](errors[_0xe93405(0x121)]['LIMITED_PREMIUM_MEMBERSHIP'],this[_0xe93405(0x10d)]['locale'][_0xe93405(0x106)](_0x2fcce1[_0xe93405(0x135)][_0xe93405(0x102)][_0xe93405(0x101)],_0xe93405(0x110),_0xe93405(0x12e),constants[_0xe93405(0x117)][_0xe93405(0x13e)][_0xe93405(0x12f)]));else{if(_0x1d08cf===omnic[_0xe93405(0x111)][_0xe93405(0x123)]&&_0x404d96['length']>=constants[_0xe93405(0x117)]['PLATINUM'][_0xe93405(0x12f)])throw new errors[(_0xe93405(0x12d))](errors[_0xe93405(0x121)][_0xe93405(0x133)],this[_0xe93405(0x10d)][_0xe93405(0x122)]['getString'](_0x2fcce1[_0xe93405(0x135)][_0xe93405(0x102)][_0xe93405(0x101)],'errors',_0xe93405(0x12e),constants[_0xe93405(0x117)][_0xe93405(0x123)][_0xe93405(0x12f)]));}}else{if(_0x404d96['length']>=constants['LIMITS']['ROLE_LEVELS'])throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][_0xe93405(0x12b)],this['client'][_0xe93405(0x122)][_0xe93405(0x106)](_0x2fcce1[_0xe93405(0x135)]['document'][_0xe93405(0x101)],'errors',_0xe93405(0x11c),constants[_0xe93405(0x117)][_0xe93405(0x12f)]));}const _0x4dee38=await Role_1['default']['countDocuments']({'guild':_0x2fcce1['guild']['id'],'level':_0x534eec[_0xe93405(0x118)]});if(_0x1d08cf){if(_0x1d08cf===omnic[_0xe93405(0x111)][_0xe93405(0x13e)]&&_0x4dee38>=constants['LIMITS'][_0xe93405(0x13e)][_0xe93405(0x138)])throw new errors['DiscordError'](errors[_0xe93405(0x121)][_0xe93405(0x133)],this[_0xe93405(0x10d)][_0xe93405(0x122)]['getString'](_0x2fcce1[_0xe93405(0x135)]['document']['language'],_0xe93405(0x110),_0xe93405(0x109),constants[_0xe93405(0x117)]['GOLD'][_0xe93405(0x138)]));else{if(_0x1d08cf===omnic[_0xe93405(0x111)]['PLATINUM']&&_0x4dee38>=constants[_0xe93405(0x117)][_0xe93405(0x123)][_0xe93405(0x138)])throw new errors[(_0xe93405(0x12d))](errors[_0xe93405(0x121)][_0xe93405(0x133)],this[_0xe93405(0x10d)]['locale'][_0xe93405(0x106)](_0x2fcce1[_0xe93405(0x135)][_0xe93405(0x102)][_0xe93405(0x101)],_0xe93405(0x110),_0xe93405(0x109),constants[_0xe93405(0x117)][_0xe93405(0x123)][_0xe93405(0x138)]));}}else{if(_0x4dee38>=constants['LIMITS'][_0xe93405(0x138)])throw new errors[(_0xe93405(0x12d))](errors[_0xe93405(0x121)]['PREMIUM_MEMBERSHIP_REQUIRED'],this[_0xe93405(0x10d)][_0xe93405(0x122)][_0xe93405(0x106)](_0x2fcce1['guild'][_0xe93405(0x102)][_0xe93405(0x101)],'errors',_0xe93405(0xfd),constants[_0xe93405(0x117)][_0xe93405(0x138)]));}}const _0x863a57=this[_0xe93405(0x10d)][_0xe93405(0xff)]['resolveRole'](_0x2fcce1['guild'],_0x534eec['role'][_0xe93405(0xfc)]('\x20'));if(!_0x863a57)throw new errors[(_0xe93405(0x12d))](errors[_0xe93405(0x121)][_0xe93405(0x128)],this['client'][_0xe93405(0x122)][_0xe93405(0x106)](_0x2fcce1[_0xe93405(0x135)][_0xe93405(0x102)][_0xe93405(0x101)],'errors',_0xe93405(0x115)));let _0x4d78f9=await _0x863a57[_0xe93405(0x126)]();return!_0x4d78f9&&(_0x4d78f9=await _0x863a57[_0xe93405(0x107)]()),_0x4d78f9[_0xe93405(0x118)]=_0x534eec['level'],await _0x4d78f9['save'](),await _0x2fcce1[_0xe93405(0x104)][_0xe93405(0x125)]({'embed':{'color':tesseract_1[_0xe93405(0x139)][_0xe93405(0x127)]['GREEN'],'description':this[_0xe93405(0x10d)][_0xe93405(0x122)][_0xe93405(0x106)](_0x2fcce1[_0xe93405(0x135)][_0xe93405(0x102)][_0xe93405(0x101)],'info',_0xe93405(0xfa),_0x2fcce1[_0xe93405(0x11f)]['tag'],_0x863a57[_0xe93405(0x119)],_0x534eec['level'])}})[_0xe93405(0x10a)](()=>{});}if(_0x534eec[_0xe93405(0x108)])return await Role_1[_0xe93405(0x113)]['updateMany']({'guild':_0x2fcce1['guild']['id'],'level':_0x534eec['level']},{'$unset':{'level':0x1}}),await _0x2fcce1[_0xe93405(0x104)][_0xe93405(0x125)]({'embed':{'color':tesseract_1[_0xe93405(0x139)][_0xe93405(0x127)][_0xe93405(0x13c)],'description':this[_0xe93405(0x10d)][_0xe93405(0x122)]['getString'](_0x2fcce1[_0xe93405(0x135)][_0xe93405(0x102)][_0xe93405(0x101)],'info','roleLevelClear',_0x2fcce1[_0xe93405(0x11f)]['tag'],_0x534eec[_0xe93405(0x118)])}})['catch'](()=>{});const _0x4d816f=await Role_1['default'][_0xe93405(0x132)]({'guild':_0x2fcce1['guild']['id'],'level':_0x534eec['level']});if(!_0x4d816f[_0xe93405(0x130)])throw new Error(_0xe93405(0x129));const _0x1a54a8=this[_0xe93405(0x10d)]['resolver'][_0xe93405(0x13a)](_0x2fcce1[_0xe93405(0x135)],_0x4d816f[_0xe93405(0x12a)](_0x30d255=>_0x30d255[_0xe93405(0x136)]));return await _0x2fcce1[_0xe93405(0x104)][_0xe93405(0x125)]({'embed':{'color':tesseract_1[_0xe93405(0x139)][_0xe93405(0x127)][_0xe93405(0x114)],'title':_0xe93405(0xf9)+_0x534eec[_0xe93405(0x118)],'fields':[{'name':'Roles','value':_0x1a54a8[_0xe93405(0x12a)](_0x225204=>_0x225204['name'])[_0xe93405(0xfc)]('\x0a')}]}})['catch'](()=>{});}const _0x82b623=await Role_1[_0xe93405(0x113)][_0xe93405(0x132)]({'guild':_0x2fcce1[_0xe93405(0x135)]['id'],'level':{'$exists':!![],'$ne':null}});if(!_0x82b623[_0xe93405(0x130)])throw new Error(_0xe93405(0xf5));const _0x1c6be1={};for(const _0x2a27bb of _0x82b623){_0x2a27bb[_0xe93405(0x118)]in _0x1c6be1?_0x1c6be1[_0x2a27bb[_0xe93405(0x118)]]['push'](_0x2a27bb[_0xe93405(0x136)]):_0x1c6be1[_0x2a27bb['level']]=[_0x2a27bb[_0xe93405(0x136)]];}return await _0x2fcce1[_0xe93405(0x104)][_0xe93405(0x125)]({'embed':{'color':tesseract_1[_0xe93405(0x139)][_0xe93405(0x127)][_0xe93405(0x114)],'title':_0xe93405(0x10c),'fields':Object[_0xe93405(0xfe)](_0x1c6be1)[_0xe93405(0x12a)](_0x2bd8cf=>({'name':_0xe93405(0xf9)+_0x2bd8cf,'value':_0x1c6be1[_0x2bd8cf]['map'](_0x4d0c8a=>_0x2fcce1['guild'][_0xe93405(0x100)][_0xe93405(0xf6)]['has'](_0x4d0c8a)?_0x2fcce1[_0xe93405(0x135)][_0xe93405(0x100)][_0xe93405(0xf6)][_0xe93405(0x112)](_0x4d0c8a)['name']:_0x4d0c8a)['join'](',\x20')}))}})[_0xe93405(0x10a)](()=>{});};}};
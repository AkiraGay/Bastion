const a64_0x5dbb=['GREEN','isPublicBastion','distinct','ROLES_PER_LEVEL','save','MANAGE_ROLES','emoji','push','createDocument','resolveRoles','../../utils/numbers','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','return\x20/\x22\x20+\x20this\x20+\x20\x22/','exports','RED','levelUpRoles','LIMITS','author','NO_ROLES_FOR_LEVEL','guild','client','NO_LEVEL_UP_ROLES','GOLD','name','COLORS','map','PremiumTier','find','premiumLevelRoles','test','../../utils/omnic','../../models/Role','compile','LIMITED_PREMIUM_MEMBERSHIP','Constants','IRIS','../../utils/constants','language','roleNotFound','_id','document','catch','channel','level','membershipLimitLevelRoles','ROLE_LEVELS','PREMIUM_MEMBERSHIP_REQUIRED','tag','roles','BASTION_ERROR_TYPE','user','cache','DiscordError','errors','default','roleLevelAdd','levelUpRoles\x20--level\x20NUMBER\x20--remove','Level\x20','Level-Up\x20Roles','role','locale','constructor','remove','apply','PLATINUM','@bastion/tesseract','fetchPremiumTier','countDocuments','error','length','fetchDocument','join','getString','has','ROLE_NOT_FOUND','roleLevelClear','It\x20allows\x20you\x20to\x20add\x20roles\x20to\x20a\x20level.\x20When\x20members\x20reach\x20that\x20level,\x20they\x27ll\x20be\x20awarded\x20those\x20roles.','send','membershipLimitRoleLevels','resolver','exec'];(function(_0x45c399,_0x5dbbcd){const _0x2fa9bb=function(_0x1d7bda){while(--_0x1d7bda){_0x45c399['push'](_0x45c399['shift']());}};const _0x41bad9=function(){const _0x54e02f={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x109abc,_0x25c8e4,_0x11a5d8,_0x22894e){_0x22894e=_0x22894e||{};let _0x2bf464=_0x25c8e4+'='+_0x11a5d8;let _0xebfc27=0x0;for(let _0x27bfb8=0x0,_0x576baf=_0x109abc['length'];_0x27bfb8<_0x576baf;_0x27bfb8++){const _0x4d9aca=_0x109abc[_0x27bfb8];_0x2bf464+=';\x20'+_0x4d9aca;const _0x282f76=_0x109abc[_0x4d9aca];_0x109abc['push'](_0x282f76);_0x576baf=_0x109abc['length'];if(_0x282f76!==!![]){_0x2bf464+='='+_0x282f76;}}_0x22894e['cookie']=_0x2bf464;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1c01b3,_0x2cb1c0){_0x1c01b3=_0x1c01b3||function(_0x8dd051){return _0x8dd051;};const _0x4ff3dd=_0x1c01b3(new RegExp('(?:^|;\x20)'+_0x2cb1c0['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x26a9eb=function(_0xd161f7,_0x1bb609){_0xd161f7(++_0x1bb609);};_0x26a9eb(_0x2fa9bb,_0x5dbbcd);return _0x4ff3dd?decodeURIComponent(_0x4ff3dd[0x1]):undefined;}};const _0x34b666=function(){const _0x4d85ee=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4d85ee['test'](_0x54e02f['removeCookie']['toString']());};_0x54e02f['updateCookie']=_0x34b666;let _0xbd8e98='';const _0x2edcf2=_0x54e02f['updateCookie']();if(!_0x2edcf2){_0x54e02f['setCookie'](['*'],'counter',0x1);}else if(_0x2edcf2){_0xbd8e98=_0x54e02f['getCookie'](null,'counter');}else{_0x54e02f['removeCookie']();}};_0x41bad9();}(a64_0x5dbb,0x189));const a64_0x2fa9=function(_0x45c399,_0x5dbbcd){_0x45c399=_0x45c399-0x0;let _0x2fa9bb=a64_0x5dbb[_0x45c399];return _0x2fa9bb;};const a64_0x54e02f=function(){let _0x45d6c8=!![];return function(_0x1d42cb,_0x4730de){const _0xe9b374=_0x45d6c8?function(){if(_0x4730de){const _0x1511f1=_0x4730de[a64_0x2fa9('0x4b')](_0x1d42cb,arguments);_0x4730de=null;return _0x1511f1;}}:function(){};_0x45d6c8=![];return _0xe9b374;};}();const a64_0x1d7bda=a64_0x54e02f(this,function(){const _0x23c2a7=function(){const _0x44fbf4=_0x23c2a7[a64_0x2fa9('0x49')](a64_0x2fa9('0x18'))()[a64_0x2fa9('0x2c')](a64_0x2fa9('0x17'));return!_0x44fbf4[a64_0x2fa9('0x29')](a64_0x1d7bda);};return _0x23c2a7();});a64_0x1d7bda();'use strict';const tesseract_1=require(a64_0x2fa9('0x4d'));const Role_1=require(a64_0x2fa9('0x2b'));const constants=require(a64_0x2fa9('0x30'));const errors=require('../../utils/errors');const gamification=require('../../utils/gamification');const numbers=require(a64_0x2fa9('0x16'));const omnic=require(a64_0x2fa9('0x2a'));module[a64_0x2fa9('0x19')]=class LevelUpRolesCommand extends tesseract_1['Command']{constructor(){super(a64_0x2fa9('0x1b'),{'description':a64_0x2fa9('0x7'),'triggers':[],'arguments':{'array':[a64_0x2fa9('0x47')],'boolean':[a64_0x2fa9('0x4a')],'string':['role'],'number':['level'],'coerce':{'level':_0x1ec31a=>numbers['clamp'](_0x1ec31a,0x1,gamification['MAX_LEVEL'])}},'scope':a64_0x2fa9('0x1f'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a64_0x2fa9('0x11')],'userPermissions':[a64_0x2fa9('0x11')],'syntax':[a64_0x2fa9('0x1b'),'levelUpRoles\x20--level\x20NUMBER','levelUpRoles\x20--level\x20NUMBER\x20--role\x20ROLE',a64_0x2fa9('0x44')]});this[a64_0x2fa9('0xb')]=async(_0x1340b9,_0x25c94b)=>{if(_0x25c94b[a64_0x2fa9('0x37')]){if(_0x25c94b[a64_0x2fa9('0x47')]){if(constants[a64_0x2fa9('0xd')](this[a64_0x2fa9('0x20')][a64_0x2fa9('0x3e')])){const _0x52428d=await omnic[a64_0x2fa9('0x4e')](_0x1340b9[a64_0x2fa9('0x1f')])[a64_0x2fa9('0x35')](()=>{});const _0x253d5b=await Role_1[a64_0x2fa9('0x42')][a64_0x2fa9('0xe')](a64_0x2fa9('0x37'),{'guild':_0x1340b9[a64_0x2fa9('0x1f')]['id'],'level':{'$exists':!![],'$ne':null}});if(_0x52428d){if(_0x52428d===omnic[a64_0x2fa9('0x26')][a64_0x2fa9('0x22')]&&_0x253d5b[a64_0x2fa9('0x0')]>=constants[a64_0x2fa9('0x1c')]['GOLD'][a64_0x2fa9('0x39')]){throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][a64_0x2fa9('0x2d')],this[a64_0x2fa9('0x20')]['locale'][a64_0x2fa9('0x3')](_0x1340b9[a64_0x2fa9('0x1f')][a64_0x2fa9('0x34')]['language'],a64_0x2fa9('0x41'),'membershipLimitRoleLevels',constants['LIMITS'][a64_0x2fa9('0x22')][a64_0x2fa9('0x39')]));}else if(_0x52428d===omnic[a64_0x2fa9('0x26')][a64_0x2fa9('0x4c')]&&_0x253d5b['length']>=constants[a64_0x2fa9('0x1c')]['PLATINUM'][a64_0x2fa9('0x39')]){throw new errors[(a64_0x2fa9('0x40'))](errors['BASTION_ERROR_TYPE'][a64_0x2fa9('0x2d')],this['client']['locale'][a64_0x2fa9('0x3')](_0x1340b9[a64_0x2fa9('0x1f')][a64_0x2fa9('0x34')][a64_0x2fa9('0x31')],a64_0x2fa9('0x41'),a64_0x2fa9('0x9'),constants[a64_0x2fa9('0x1c')]['PLATINUM'][a64_0x2fa9('0x39')]));}}else if(_0x253d5b[a64_0x2fa9('0x0')]>=constants[a64_0x2fa9('0x1c')]['ROLE_LEVELS']){throw new errors[(a64_0x2fa9('0x40'))](errors['BASTION_ERROR_TYPE'][a64_0x2fa9('0x3a')],this[a64_0x2fa9('0x20')]['locale'][a64_0x2fa9('0x3')](_0x1340b9['guild']['document'][a64_0x2fa9('0x31')],'errors','premiumRoleLevels',constants[a64_0x2fa9('0x1c')][a64_0x2fa9('0x39')]));}const _0x368655=await Role_1['default'][a64_0x2fa9('0x4f')]({'guild':_0x1340b9['guild']['id'],'level':_0x25c94b[a64_0x2fa9('0x37')]});if(_0x52428d){if(_0x52428d===omnic['PremiumTier']['GOLD']&&_0x368655>=constants[a64_0x2fa9('0x1c')][a64_0x2fa9('0x22')][a64_0x2fa9('0xf')]){throw new errors[(a64_0x2fa9('0x40'))](errors[a64_0x2fa9('0x3d')][a64_0x2fa9('0x2d')],this[a64_0x2fa9('0x20')]['locale'][a64_0x2fa9('0x3')](_0x1340b9[a64_0x2fa9('0x1f')][a64_0x2fa9('0x34')]['language'],'errors',a64_0x2fa9('0x38'),constants['LIMITS'][a64_0x2fa9('0x22')][a64_0x2fa9('0xf')]));}else if(_0x52428d===omnic[a64_0x2fa9('0x26')][a64_0x2fa9('0x4c')]&&_0x368655>=constants[a64_0x2fa9('0x1c')]['PLATINUM']['ROLES_PER_LEVEL']){throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][a64_0x2fa9('0x2d')],this['client'][a64_0x2fa9('0x48')][a64_0x2fa9('0x3')](_0x1340b9['guild'][a64_0x2fa9('0x34')][a64_0x2fa9('0x31')],'errors',a64_0x2fa9('0x38'),constants[a64_0x2fa9('0x1c')]['PLATINUM'][a64_0x2fa9('0xf')]));}}else if(_0x368655>=constants[a64_0x2fa9('0x1c')][a64_0x2fa9('0xf')]){throw new errors[(a64_0x2fa9('0x40'))](errors[a64_0x2fa9('0x3d')][a64_0x2fa9('0x3a')],this[a64_0x2fa9('0x20')][a64_0x2fa9('0x48')][a64_0x2fa9('0x3')](_0x1340b9['guild']['document']['language'],a64_0x2fa9('0x41'),a64_0x2fa9('0x28'),constants[a64_0x2fa9('0x1c')][a64_0x2fa9('0xf')]));}}const _0x287da1=this[a64_0x2fa9('0x20')][a64_0x2fa9('0xa')]['resolveRole'](_0x1340b9['guild'],_0x25c94b[a64_0x2fa9('0x47')][a64_0x2fa9('0x2')]('\x20'));if(!_0x287da1)throw new errors[(a64_0x2fa9('0x40'))](errors[a64_0x2fa9('0x3d')][a64_0x2fa9('0x5')],this[a64_0x2fa9('0x20')]['locale']['getString'](_0x1340b9[a64_0x2fa9('0x1f')][a64_0x2fa9('0x34')]['language'],a64_0x2fa9('0x50'),a64_0x2fa9('0x32')));let _0x2af458=await _0x287da1[a64_0x2fa9('0x1')]();if(!_0x2af458&&_0x25c94b[a64_0x2fa9('0x12')]){_0x2af458=await _0x287da1[a64_0x2fa9('0x14')]();}_0x2af458['level']=_0x25c94b['level'];await _0x2af458[a64_0x2fa9('0x10')]();return await _0x1340b9[a64_0x2fa9('0x36')][a64_0x2fa9('0x8')]({'embed':{'color':tesseract_1[a64_0x2fa9('0x2e')][a64_0x2fa9('0x24')][a64_0x2fa9('0xc')],'description':this[a64_0x2fa9('0x20')][a64_0x2fa9('0x48')]['getString'](_0x1340b9[a64_0x2fa9('0x1f')][a64_0x2fa9('0x34')][a64_0x2fa9('0x31')],'info',a64_0x2fa9('0x43'),_0x1340b9[a64_0x2fa9('0x1d')]['tag'],_0x287da1[a64_0x2fa9('0x23')],_0x25c94b[a64_0x2fa9('0x37')])}})[a64_0x2fa9('0x35')](()=>{});}if(_0x25c94b[a64_0x2fa9('0x4a')]){await Role_1[a64_0x2fa9('0x42')]['updateMany']({'guild':_0x1340b9[a64_0x2fa9('0x1f')]['id'],'level':_0x25c94b['level']},{'$unset':{'level':0x1}});return await _0x1340b9[a64_0x2fa9('0x36')]['send']({'embed':{'color':tesseract_1[a64_0x2fa9('0x2e')][a64_0x2fa9('0x24')][a64_0x2fa9('0x1a')],'description':this['client']['locale'][a64_0x2fa9('0x3')](_0x1340b9[a64_0x2fa9('0x1f')][a64_0x2fa9('0x34')]['language'],'info',a64_0x2fa9('0x6'),_0x1340b9[a64_0x2fa9('0x1d')][a64_0x2fa9('0x3b')],_0x25c94b['level'])}})[a64_0x2fa9('0x35')](()=>{});}const _0x1cd5fd=await Role_1[a64_0x2fa9('0x42')][a64_0x2fa9('0x27')]({'guild':_0x1340b9[a64_0x2fa9('0x1f')]['id'],'level':_0x25c94b[a64_0x2fa9('0x37')]});if(!_0x1cd5fd[a64_0x2fa9('0x0')])throw new Error(a64_0x2fa9('0x1e'));const _0x222f20=this['client'][a64_0x2fa9('0xa')][a64_0x2fa9('0x15')](_0x1340b9['guild'],_0x1cd5fd[a64_0x2fa9('0x25')](_0x378808=>_0x378808[a64_0x2fa9('0x33')]));return await _0x1340b9[a64_0x2fa9('0x36')]['send']({'embed':{'color':tesseract_1[a64_0x2fa9('0x2e')][a64_0x2fa9('0x24')][a64_0x2fa9('0x2f')],'title':a64_0x2fa9('0x45')+_0x25c94b[a64_0x2fa9('0x37')],'fields':[{'name':'Roles','value':_0x222f20[a64_0x2fa9('0x25')](_0x275110=>_0x275110[a64_0x2fa9('0x23')])[a64_0x2fa9('0x2')]('\x0a')}]}})[a64_0x2fa9('0x35')](()=>{});}const _0x6099cd=await Role_1[a64_0x2fa9('0x42')]['find']({'guild':_0x1340b9[a64_0x2fa9('0x1f')]['id'],'level':{'$exists':!![],'$ne':null}});if(!_0x6099cd[a64_0x2fa9('0x0')])throw new Error(a64_0x2fa9('0x21'));const _0x46e971={};for(const _0x5c55ec of _0x6099cd){if(_0x5c55ec[a64_0x2fa9('0x37')]in _0x46e971){_0x46e971[_0x5c55ec[a64_0x2fa9('0x37')]][a64_0x2fa9('0x13')](_0x5c55ec[a64_0x2fa9('0x33')]);}else{_0x46e971[_0x5c55ec['level']]=[_0x5c55ec[a64_0x2fa9('0x33')]];}}return await _0x1340b9['channel'][a64_0x2fa9('0x8')]({'embed':{'color':tesseract_1[a64_0x2fa9('0x2e')][a64_0x2fa9('0x24')]['IRIS'],'title':a64_0x2fa9('0x46'),'fields':Object['keys'](_0x46e971)[a64_0x2fa9('0x25')](_0x4d32f2=>({'name':'Level\x20'+_0x4d32f2,'value':_0x46e971[_0x4d32f2][a64_0x2fa9('0x25')](_0x2ae654=>_0x1340b9[a64_0x2fa9('0x1f')][a64_0x2fa9('0x3c')]['cache'][a64_0x2fa9('0x4')](_0x2ae654)?_0x1340b9[a64_0x2fa9('0x1f')]['roles'][a64_0x2fa9('0x3f')]['get'](_0x2ae654)[a64_0x2fa9('0x23')]:_0x2ae654)[a64_0x2fa9('0x2')](',\x20')}))}})[a64_0x2fa9('0x35')](()=>{});};}};
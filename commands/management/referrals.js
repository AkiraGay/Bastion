const a93_0x385b=['@bastion/tesseract','referrals\x20--enable','referral','author','find','RED','../../models/Guild','referrals\x20--disable','cache','document','exec','page','findByIdAndUpdate','IRIS','disable','default','map','pages','\x20of\x20','return\x20/\x22\x20+\x20this\x20+\x20\x22/','\x20Uses','includes','guild','locale','referralsDisable','enable','constructor','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','tag','Referrals\x20Channel','client','keys','user','channel','../../utils/pagination','COLORS','from','uses','referrals','members','referralsEnable','Command','exports','get','referrals\x20--page\x20NUMBER','language','Constants','apply','info'];(function(_0x27a6dd,_0x5f4f35){const _0x385b5d=function(_0x12d343){while(--_0x12d343){_0x27a6dd['push'](_0x27a6dd['shift']());}},_0x3e689d=function(){const _0x304b03={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x271c64,_0x1db934,_0x7e6a4d,_0x86ca53){_0x86ca53=_0x86ca53||{};let _0x26b8e2=_0x1db934+'='+_0x7e6a4d,_0x32ebbf=0x0;for(let _0x14cce8=0x0,_0x11d768=_0x271c64['length'];_0x14cce8<_0x11d768;_0x14cce8++){const _0x30ddcf=_0x271c64[_0x14cce8];_0x26b8e2+=';\x20'+_0x30ddcf;const _0x405b35=_0x271c64[_0x30ddcf];_0x271c64['push'](_0x405b35),_0x11d768=_0x271c64['length'],_0x405b35!==!![]&&(_0x26b8e2+='='+_0x405b35);}_0x86ca53['cookie']=_0x26b8e2;},'removeCookie':function(){return'dev';},'getCookie':function(_0x58983c,_0x59a03c){_0x58983c=_0x58983c||function(_0x3c9d6f){return _0x3c9d6f;};const _0x41b88c=_0x58983c(new RegExp('(?:^|;\x20)'+_0x59a03c['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x397da1=function(_0x314431,_0x31c25e){_0x314431(++_0x31c25e);};return _0x397da1(_0x385b5d,_0x5f4f35),_0x41b88c?decodeURIComponent(_0x41b88c[0x1]):undefined;}},_0x2e5321=function(){const _0x1aed5c=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x1aed5c['test'](_0x304b03['removeCookie']['toString']());};_0x304b03['updateCookie']=_0x2e5321;let _0xf9fad4='';const _0x1b7695=_0x304b03['updateCookie']();if(!_0x1b7695)_0x304b03['setCookie'](['*'],'counter',0x1);else _0x1b7695?_0xf9fad4=_0x304b03['getCookie'](null,'counter'):_0x304b03['removeCookie']();};_0x3e689d();}(a93_0x385b,0x1e9));const a93_0x3e68=function(_0x27a6dd,_0x5f4f35){_0x27a6dd=_0x27a6dd-0x134;let _0x385b5d=a93_0x385b[_0x27a6dd];return _0x385b5d;};const a93_0x31bed0=a93_0x3e68,a93_0x2e5321=function(){let _0x1b7695=!![];return function(_0x271c64,_0x1db934){const _0x7e6a4d=_0x1b7695?function(){const _0x280908=a93_0x3e68;if(_0x1db934){const _0x86ca53=_0x1db934[_0x280908(0x164)](_0x271c64,arguments);return _0x1db934=null,_0x86ca53;}}:function(){};return _0x1b7695=![],_0x7e6a4d;};}(),a93_0x304b03=a93_0x2e5321(this,function(){const _0x26b8e2=function(){const _0x46393c=a93_0x3e68,_0x32ebbf=_0x26b8e2[_0x46393c(0x14f)](_0x46393c(0x148))()['constructor'](_0x46393c(0x150));return!_0x32ebbf['test'](a93_0x304b03);};return _0x26b8e2();});a93_0x304b03();'use strict';const tesseract_1=require(a93_0x31bed0(0x135)),Guild_1=require(a93_0x31bed0(0x13b)),Member_1=require('../../models/Member'),pagination=require(a93_0x31bed0(0x157));module[a93_0x31bed0(0x15f)]=class ReferralsCommand extends tesseract_1[a93_0x31bed0(0x15e)]{constructor(){const _0x280d59=a93_0x31bed0;super(_0x280d59(0x15b),{'description':'It\x20allows\x20you\x20set\x20the\x20Referrals\x20Channel\x20so\x20that\x20members\x20can\x20invite\x20others\x20to\x20the\x20server\x20and\x20gain\x20referral\x20rewards.\x20And\x20it\x20also\x20allows\x20you\x20to\x20track\x20the\x20members\x27\x20invites.','triggers':[],'arguments':{'alias':{'page':['p']},'boolean':[_0x280d59(0x14e),_0x280d59(0x143)],'number':[_0x280d59(0x140)]},'scope':_0x280d59(0x14b),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':['MANAGE_GUILD'],'userPermissions':[],'syntax':[_0x280d59(0x15b),_0x280d59(0x161),_0x280d59(0x136),_0x280d59(0x13c)]}),this[_0x280d59(0x13f)]=async(_0x14cce8,_0x11d768)=>{const _0x537591=_0x280d59;if(_0x11d768[_0x537591(0x14e)]||_0x11d768[_0x537591(0x143)])return _0x11d768[_0x537591(0x14e)]?await Guild_1[_0x537591(0x144)][_0x537591(0x141)](_0x14cce8[_0x537591(0x14b)]['id'],{'referralsChannel':_0x14cce8['channel']['id']}):await Guild_1[_0x537591(0x144)][_0x537591(0x141)](_0x14cce8[_0x537591(0x14b)]['id'],{'$unset':{'referralsChannel':0x1}}),await _0x14cce8[_0x537591(0x156)]['send']({'embed':{'color':_0x11d768[_0x537591(0x14e)]?tesseract_1[_0x537591(0x163)][_0x537591(0x158)]['GREEN']:tesseract_1['Constants'][_0x537591(0x158)][_0x537591(0x13a)],'title':_0x537591(0x152),'description':this[_0x537591(0x153)][_0x537591(0x14c)]['getString'](_0x14cce8[_0x537591(0x14b)][_0x537591(0x13e)][_0x537591(0x162)],_0x537591(0x134),_0x11d768[_0x537591(0x14e)]?_0x537591(0x15d):_0x537591(0x14d),_0x14cce8[_0x537591(0x138)][_0x537591(0x151)])}});const _0x30ddcf=await Member_1[_0x537591(0x144)][_0x537591(0x139)]({'guild':_0x14cce8[_0x537591(0x14b)]['id'],'referral':{'$exists':!![]}}),_0x405b35=await _0x14cce8[_0x537591(0x14b)]['fetchInvites'](),_0x58983c=pagination['paginate'](_0x30ddcf['filter'](_0x59a03c=>_0x59a03c[_0x537591(0x137)]&&Array[_0x537591(0x159)](_0x405b35[_0x537591(0x154)]())[_0x537591(0x14a)](_0x59a03c[_0x537591(0x137)]))[_0x537591(0x145)](_0x41b88c=>({'name':_0x14cce8['guild'][_0x537591(0x15c)][_0x537591(0x13d)]['has'](_0x41b88c[_0x537591(0x155)])?_0x14cce8[_0x537591(0x14b)]['members'][_0x537591(0x13d)][_0x537591(0x160)](_0x41b88c[_0x537591(0x155)])['user']['tag']:_0x41b88c[_0x537591(0x155)],'value':_0x41b88c['referral']+'\x20-\x20'+_0x405b35[_0x537591(0x160)](_0x41b88c[_0x537591(0x137)])[_0x537591(0x15a)]+_0x537591(0x149)})),_0x11d768['page']);await _0x14cce8[_0x537591(0x156)]['send']({'embed':{'color':tesseract_1[_0x537591(0x163)][_0x537591(0x158)][_0x537591(0x142)],'title':'Referrals','fields':_0x58983c['items'],'footer':{'text':'Page\x20'+_0x58983c[_0x537591(0x140)]+_0x537591(0x147)+_0x58983c[_0x537591(0x146)]}}});};}};
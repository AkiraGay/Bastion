const a92_0x3052=['push','premiumInviteRoles','document','Page\x20','roleReferralsClear','info','../../utils/constants','NO_REFERRAL_REWARDS','map','items','Referral\x20Rewards','PLATINUM','apply','page','GREEN','referralRewards\x20-n\x20NUMBER\x20--role\x20ROLE','getString','referralRewards\x20--page\x20NUMBER','user','test','@bastion/tesseract','resolver','../../utils/omnic','RED','PREMIUM_MEMBERSHIP_REQUIRED','catch','role','COLORS','\x20of\x20','channel','errors','\x20Referrals','save','../../utils/pagination','LIMITED_PREMIUM_MEMBERSHIP','GOLD','BASTION_ERROR_TYPE','cache','return\x20/\x22\x20+\x20this\x20+\x20\x22/','language','roleNotFound','ROLE_NOT_FOUND','IRIS','fetchPremiumTier','guild','author','LIMITS','PremiumTier','MAX_SAFE_INTEGER','countDocuments','../../utils/errors','isPublicBastion','referralRewards\x20-n\x20NUMBER\x20--remove','DiscordError','has','resolveRole','join','tag','updateMany','pages','name','find','referrals','keys','membershipLimitInviteRoles','Constants','default','client','get','locale','constructor','exec','INVITE_REWARDS','../../utils/numbers','referralRewards','send','createDocument'];(function(_0x1bc582,_0x1edaa4){const _0x3052d8=function(_0x5f1440){while(--_0x5f1440){_0x1bc582['push'](_0x1bc582['shift']());}},_0xe5ec7=function(){const _0x36d285={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2c53ae,_0x13b457,_0x7a7e07,_0x50226a){_0x50226a=_0x50226a||{};let _0x417641=_0x13b457+'='+_0x7a7e07,_0x177f04=0x0;for(let _0x32d999=0x0,_0x24577b=_0x2c53ae['length'];_0x32d999<_0x24577b;_0x32d999++){const _0xde6ba5=_0x2c53ae[_0x32d999];_0x417641+=';\x20'+_0xde6ba5;const _0x985be6=_0x2c53ae[_0xde6ba5];_0x2c53ae['push'](_0x985be6),_0x24577b=_0x2c53ae['length'],_0x985be6!==!![]&&(_0x417641+='='+_0x985be6);}_0x50226a['cookie']=_0x417641;},'removeCookie':function(){return'dev';},'getCookie':function(_0x50337d,_0xdd5d01){_0x50337d=_0x50337d||function(_0x1b4e0b){return _0x1b4e0b;};const _0x3008f0=_0x50337d(new RegExp('(?:^|;\x20)'+_0xdd5d01['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x426bda=function(_0x30f664,_0x2632d9){_0x30f664(++_0x2632d9);};return _0x426bda(_0x3052d8,_0x1edaa4),_0x3008f0?decodeURIComponent(_0x3008f0[0x1]):undefined;}},_0x704a92=function(){const _0x567e2d=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x567e2d['test'](_0x36d285['removeCookie']['toString']());};_0x36d285['updateCookie']=_0x704a92;let _0x4d0ea3='';const _0x4d4921=_0x36d285['updateCookie']();if(!_0x4d4921)_0x36d285['setCookie'](['*'],'counter',0x1);else _0x4d4921?_0x4d0ea3=_0x36d285['getCookie'](null,'counter'):_0x36d285['removeCookie']();};_0xe5ec7();}(a92_0x3052,0xf7));const a92_0xe5ec=function(_0x1bc582,_0x1edaa4){_0x1bc582=_0x1bc582-0x120;let _0x3052d8=a92_0x3052[_0x1bc582];return _0x3052d8;};const a92_0x5ddf2c=a92_0xe5ec,a92_0x704a92=function(){let _0x4d4921=!![];return function(_0x2c53ae,_0x13b457){const _0x7a7e07=_0x4d4921?function(){const _0x1438bc=a92_0xe5ec;if(_0x13b457){const _0x50226a=_0x13b457[_0x1438bc(0x169)](_0x2c53ae,arguments);return _0x13b457=null,_0x50226a;}}:function(){};return _0x4d4921=![],_0x7a7e07;};}(),a92_0x36d285=a92_0x704a92(this,function(){const _0x417641=function(){const _0x462df3=a92_0xe5ec,_0x177f04=_0x417641['constructor'](_0x462df3(0x136))()[_0x462df3(0x156)]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x177f04[_0x462df3(0x123)](a92_0x36d285);};return _0x417641();});a92_0x36d285();'use strict';const tesseract_1=require(a92_0x5ddf2c(0x124)),Role_1=require('../../models/Role'),constants=require(a92_0x5ddf2c(0x163)),errors=require(a92_0x5ddf2c(0x142)),numbers=require(a92_0x5ddf2c(0x159)),omnic=require(a92_0x5ddf2c(0x126)),pagination=require(a92_0x5ddf2c(0x131));module['exports']=class ReferralRewardsCommand extends tesseract_1['Command']{constructor(){const _0x188835=a92_0x5ddf2c;super(_0x188835(0x15a),{'description':'It\x20allows\x20you\x20set\x20roles\x20as\x20rewards\x20for\x20referrals\x20(inviting\x20other\x20users\x20to\x20the\x20server).','triggers':[],'arguments':{'alias':{'referrals':['n'],'page':['p']},'array':[_0x188835(0x12a)],'boolean':['remove'],'string':[_0x188835(0x12a)],'number':[_0x188835(0x14e),'page'],'coerce':{'referrals':_0x32d999=>numbers['clamp'](_0x32d999,0x1,Number[_0x188835(0x140)])}},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':['MANAGE_GUILD'],'userPermissions':[],'syntax':[_0x188835(0x15a),_0x188835(0x121),_0x188835(0x16c),_0x188835(0x144)]}),this[_0x188835(0x157)]=async(_0x24577b,_0xde6ba5)=>{const _0x15c7cd=_0x188835;if(_0xde6ba5[_0x15c7cd(0x14e)]){if(_0xde6ba5['role']){if(constants[_0x15c7cd(0x143)](this[_0x15c7cd(0x153)][_0x15c7cd(0x122)])){const _0x1b4e0b=await omnic[_0x15c7cd(0x13b)](_0x24577b[_0x15c7cd(0x13c)])[_0x15c7cd(0x129)](()=>{}),_0x30f664=await Role_1['default'][_0x15c7cd(0x141)]({'guild':_0x24577b[_0x15c7cd(0x13c)]['id'],'referrals':{'$exists':!![],'$ne':null}});if(_0x1b4e0b){if(_0x1b4e0b===omnic[_0x15c7cd(0x13f)][_0x15c7cd(0x133)]&&_0x30f664>=constants[_0x15c7cd(0x13e)][_0x15c7cd(0x133)][_0x15c7cd(0x158)])throw new errors[(_0x15c7cd(0x145))](errors[_0x15c7cd(0x134)][_0x15c7cd(0x132)],this[_0x15c7cd(0x153)]['locale'][_0x15c7cd(0x120)](_0x24577b[_0x15c7cd(0x13c)][_0x15c7cd(0x15f)][_0x15c7cd(0x137)],_0x15c7cd(0x12e),'membershipLimitInviteRoles',constants[_0x15c7cd(0x13e)][_0x15c7cd(0x133)]['INVITE_REWARDS']));else{if(_0x1b4e0b===omnic['PremiumTier'][_0x15c7cd(0x168)]&&_0x30f664>=constants[_0x15c7cd(0x13e)][_0x15c7cd(0x168)][_0x15c7cd(0x158)])throw new errors['DiscordError'](errors[_0x15c7cd(0x134)][_0x15c7cd(0x132)],this[_0x15c7cd(0x153)][_0x15c7cd(0x155)][_0x15c7cd(0x120)](_0x24577b[_0x15c7cd(0x13c)][_0x15c7cd(0x15f)][_0x15c7cd(0x137)],_0x15c7cd(0x12e),_0x15c7cd(0x150),constants[_0x15c7cd(0x13e)][_0x15c7cd(0x168)][_0x15c7cd(0x158)]));}}else{if(_0x30f664>=constants['LIMITS'][_0x15c7cd(0x158)])throw new errors[(_0x15c7cd(0x145))](errors[_0x15c7cd(0x134)][_0x15c7cd(0x128)],this[_0x15c7cd(0x153)][_0x15c7cd(0x155)][_0x15c7cd(0x120)](_0x24577b[_0x15c7cd(0x13c)][_0x15c7cd(0x15f)][_0x15c7cd(0x137)],_0x15c7cd(0x12e),_0x15c7cd(0x15e),constants[_0x15c7cd(0x13e)][_0x15c7cd(0x158)]));}}const _0x3008f0=this['client'][_0x15c7cd(0x125)][_0x15c7cd(0x147)](_0x24577b[_0x15c7cd(0x13c)],_0xde6ba5[_0x15c7cd(0x12a)]['join']('\x20'));if(!_0x3008f0)throw new errors[(_0x15c7cd(0x145))](errors[_0x15c7cd(0x134)][_0x15c7cd(0x139)],this[_0x15c7cd(0x153)][_0x15c7cd(0x155)]['getString'](_0x24577b['guild']['document']['language'],_0x15c7cd(0x12e),_0x15c7cd(0x138)));let _0x426bda=await _0x3008f0['fetchDocument']();return!_0x426bda&&(_0x426bda=await _0x3008f0[_0x15c7cd(0x15c)]()),_0x426bda['referrals']=_0xde6ba5[_0x15c7cd(0x14e)],await _0x426bda[_0x15c7cd(0x130)](),await _0x24577b[_0x15c7cd(0x12d)][_0x15c7cd(0x15b)]({'embed':{'color':tesseract_1[_0x15c7cd(0x151)][_0x15c7cd(0x12b)][_0x15c7cd(0x16b)],'description':this[_0x15c7cd(0x153)][_0x15c7cd(0x155)][_0x15c7cd(0x120)](_0x24577b[_0x15c7cd(0x13c)]['document'][_0x15c7cd(0x137)],_0x15c7cd(0x162),'roleReferralsSet',_0x24577b['author'][_0x15c7cd(0x149)],_0x3008f0[_0x15c7cd(0x14c)],_0xde6ba5[_0x15c7cd(0x14e)])}});}if(_0xde6ba5['remove'])return await Role_1[_0x15c7cd(0x152)][_0x15c7cd(0x14a)]({'guild':_0x24577b[_0x15c7cd(0x13c)]['id'],'referrals':_0xde6ba5[_0x15c7cd(0x14e)]},{'$unset':{'referrals':0x1}}),await _0x24577b[_0x15c7cd(0x12d)][_0x15c7cd(0x15b)]({'embed':{'color':tesseract_1[_0x15c7cd(0x151)][_0x15c7cd(0x12b)][_0x15c7cd(0x127)],'description':this[_0x15c7cd(0x153)][_0x15c7cd(0x155)][_0x15c7cd(0x120)](_0x24577b[_0x15c7cd(0x13c)][_0x15c7cd(0x15f)][_0x15c7cd(0x137)],_0x15c7cd(0x162),_0x15c7cd(0x161),_0x24577b[_0x15c7cd(0x13d)][_0x15c7cd(0x149)],_0xde6ba5[_0x15c7cd(0x14e)])}});}const _0x985be6=await Role_1['default'][_0x15c7cd(0x14d)]({'guild':_0x24577b[_0x15c7cd(0x13c)]['id'],'referrals':{'$exists':!![],'$ne':null}});if(!_0x985be6['length'])throw new Error(_0x15c7cd(0x164));const _0x50337d={};for(const _0x2632d9 of _0x985be6){_0x2632d9[_0x15c7cd(0x14e)]in _0x50337d?_0x50337d[_0x2632d9[_0x15c7cd(0x14e)]][_0x15c7cd(0x15d)](_0x2632d9['id']):_0x50337d[_0x2632d9[_0x15c7cd(0x14e)]]=[_0x2632d9['id']];}const _0xdd5d01=pagination['paginate'](Object[_0x15c7cd(0x14f)](_0x50337d)[_0x15c7cd(0x165)](_0x567e2d=>({'name':_0x567e2d+_0x15c7cd(0x12f),'value':_0x50337d[_0x567e2d][_0x15c7cd(0x165)](_0x5053a1=>_0x24577b[_0x15c7cd(0x13c)]['roles'][_0x15c7cd(0x135)][_0x15c7cd(0x146)](_0x5053a1)?_0x24577b[_0x15c7cd(0x13c)]['roles'][_0x15c7cd(0x135)][_0x15c7cd(0x154)](_0x5053a1)['name']:_0x5053a1)[_0x15c7cd(0x148)](',\x20')})),_0xde6ba5['page']);return await _0x24577b['channel']['send']({'embed':{'color':tesseract_1[_0x15c7cd(0x151)]['COLORS'][_0x15c7cd(0x13a)],'title':_0x15c7cd(0x167),'fields':_0xdd5d01[_0x15c7cd(0x166)],'footer':{'text':_0x15c7cd(0x160)+_0xdd5d01[_0x15c7cd(0x16a)]+_0x15c7cd(0x12c)+_0xdd5d01[_0x15c7cd(0x14b)]}}});};}};
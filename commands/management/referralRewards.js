const a91_0x1f7a=['has','exports','PLATINUM','language','length','GREEN','referralRewards\x20-n\x20NUMBER\x20--role\x20ROLE','exec','default','find','../../utils/omnic','@bastion/tesseract','resolver','MANAGE_GUILD','MAX_SAFE_INTEGER','../../utils/pagination','roleReferralsSet','referralRewards','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','COLORS','user','getString','remove','constructor','premiumInviteRoles','name','../../utils/numbers','join','apply','return\x20/\x22\x20+\x20this\x20+\x20\x22/','page','tag','author','../../utils/constants','DiscordError','IRIS','errors','referralRewards\x20-n\x20NUMBER\x20--remove','INVITE_REWARDS','It\x20allows\x20you\x20set\x20roles\x20as\x20rewards\x20for\x20referrals\x20(inviting\x20other\x20users\x20to\x20the\x20server).','referralRewards\x20--page\x20NUMBER','map','NO_REFERRAL_REWARDS','paginate','push','Referral\x20Rewards','RED','Command','Constants','countDocuments','fetchDocument','save','document','cache','updateMany','fetchPremiumTier','catch','guild','GOLD','\x20of\x20','client','resolveRole','roles','roleNotFound','PREMIUM_MEMBERSHIP_REQUIRED','test','LIMITS','../../utils/errors','roleReferralsClear','role','createDocument','membershipLimitInviteRoles','send','channel','LIMITED_PREMIUM_MEMBERSHIP','keys','isPublicBastion','clamp','PremiumTier','locale','info','pages','referrals','BASTION_ERROR_TYPE','Page\x20','\x20Referrals','get'];(function(_0x67be5b,_0x3c29fb){const _0x1f7af8=function(_0x1e0e4e){while(--_0x1e0e4e){_0x67be5b['push'](_0x67be5b['shift']());}},_0x23dbf1=function(){const _0x3c3244={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x5d06b8,_0x22fe45,_0x3bd697,_0xaadcdd){_0xaadcdd=_0xaadcdd||{};let _0x299539=_0x22fe45+'='+_0x3bd697,_0x109c3e=0x0;for(let _0x785244=0x0,_0x424c74=_0x5d06b8['length'];_0x785244<_0x424c74;_0x785244++){const _0x28edc2=_0x5d06b8[_0x785244];_0x299539+=';\x20'+_0x28edc2;const _0x428a45=_0x5d06b8[_0x28edc2];_0x5d06b8['push'](_0x428a45),_0x424c74=_0x5d06b8['length'],_0x428a45!==!![]&&(_0x299539+='='+_0x428a45);}_0xaadcdd['cookie']=_0x299539;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4f143f,_0x56396c){_0x4f143f=_0x4f143f||function(_0x3121de){return _0x3121de;};const _0x5a40de=_0x4f143f(new RegExp('(?:^|;\x20)'+_0x56396c['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x14c190=function(_0x1c6780,_0x2ae997){_0x1c6780(++_0x2ae997);};return _0x14c190(_0x1f7af8,_0x3c29fb),_0x5a40de?decodeURIComponent(_0x5a40de[0x1]):undefined;}},_0x4a6c96=function(){const _0x5b265d=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x5b265d['test'](_0x3c3244['removeCookie']['toString']());};_0x3c3244['updateCookie']=_0x4a6c96;let _0x22af7a='';const _0x41e8d1=_0x3c3244['updateCookie']();if(!_0x41e8d1)_0x3c3244['setCookie'](['*'],'counter',0x1);else _0x41e8d1?_0x22af7a=_0x3c3244['getCookie'](null,'counter'):_0x3c3244['removeCookie']();};_0x23dbf1();}(a91_0x1f7a,0xdd));const a91_0x23db=function(_0x67be5b,_0x3c29fb){_0x67be5b=_0x67be5b-0x1ec;let _0x1f7af8=a91_0x1f7a[_0x67be5b];return _0x1f7af8;};const _0x245f7b=a91_0x23db,a91_0x4a6c96=function(){let _0x41e8d1=!![];return function(_0x5d06b8,_0x22fe45){const _0x3bd697=_0x41e8d1?function(){const _0x153f7c=a91_0x23db;if(_0x22fe45){const _0xaadcdd=_0x22fe45[_0x153f7c(0x230)](_0x5d06b8,arguments);return _0x22fe45=null,_0xaadcdd;}}:function(){};return _0x41e8d1=![],_0x3bd697;};}(),a91_0x3c3244=a91_0x4a6c96(this,function(){const _0x299539=function(){const _0x34881f=a91_0x23db,_0x109c3e=_0x299539[_0x34881f(0x22b)](_0x34881f(0x231))()[_0x34881f(0x22b)](_0x34881f(0x226));return!_0x109c3e[_0x34881f(0x1fe)](a91_0x3c3244);};return _0x299539();});a91_0x3c3244();'use strict';const tesseract_1=require(_0x245f7b(0x21f)),Role_1=require('../../models/Role'),constants=require(_0x245f7b(0x235)),errors=require(_0x245f7b(0x200)),numbers=require(_0x245f7b(0x22e)),omnic=require(_0x245f7b(0x21e)),pagination=require(_0x245f7b(0x223));module[_0x245f7b(0x215)]=class ReferralRewardsCommand extends tesseract_1[_0x245f7b(0x1ec)]{constructor(){const _0x2d2a13=_0x245f7b;super(_0x2d2a13(0x225),{'description':_0x2d2a13(0x23b),'triggers':[],'arguments':{'alias':{'referrals':['n'],'page':['p']},'array':[_0x2d2a13(0x202)],'boolean':[_0x2d2a13(0x22a)],'string':[_0x2d2a13(0x202)],'number':[_0x2d2a13(0x20f),'page'],'coerce':{'referrals':_0x785244=>numbers[_0x2d2a13(0x20a)](_0x785244,0x1,Number[_0x2d2a13(0x222)])}},'scope':_0x2d2a13(0x1f6),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[_0x2d2a13(0x221)],'userPermissions':[],'syntax':['referralRewards',_0x2d2a13(0x23c),_0x2d2a13(0x21a),_0x2d2a13(0x239)]}),this[_0x2d2a13(0x21b)]=async(_0x424c74,_0x28edc2)=>{const _0x102c16=_0x2d2a13;if(_0x28edc2[_0x102c16(0x20f)]){if(_0x28edc2[_0x102c16(0x202)]){if(constants[_0x102c16(0x209)](this[_0x102c16(0x1f9)][_0x102c16(0x228)])){const _0x3121de=await omnic[_0x102c16(0x1f4)](_0x424c74[_0x102c16(0x1f6)])[_0x102c16(0x1f5)](()=>{}),_0x1c6780=await Role_1[_0x102c16(0x21c)][_0x102c16(0x1ee)]({'guild':_0x424c74[_0x102c16(0x1f6)]['id'],'referrals':{'$exists':!![],'$ne':null}});if(_0x3121de){if(_0x3121de===omnic[_0x102c16(0x20b)][_0x102c16(0x1f7)]&&_0x1c6780>=constants['LIMITS'][_0x102c16(0x1f7)]['INVITE_REWARDS'])throw new errors[(_0x102c16(0x236))](errors[_0x102c16(0x210)][_0x102c16(0x207)],this['client'][_0x102c16(0x20c)][_0x102c16(0x229)](_0x424c74[_0x102c16(0x1f6)][_0x102c16(0x1f1)][_0x102c16(0x217)],_0x102c16(0x238),_0x102c16(0x204),constants[_0x102c16(0x1ff)]['GOLD'][_0x102c16(0x23a)]));else{if(_0x3121de===omnic['PremiumTier'][_0x102c16(0x216)]&&_0x1c6780>=constants[_0x102c16(0x1ff)][_0x102c16(0x216)][_0x102c16(0x23a)])throw new errors[(_0x102c16(0x236))](errors['BASTION_ERROR_TYPE']['LIMITED_PREMIUM_MEMBERSHIP'],this[_0x102c16(0x1f9)]['locale'][_0x102c16(0x229)](_0x424c74[_0x102c16(0x1f6)]['document'][_0x102c16(0x217)],_0x102c16(0x238),_0x102c16(0x204),constants['LIMITS'][_0x102c16(0x216)][_0x102c16(0x23a)]));}}else{if(_0x1c6780>=constants['LIMITS']['INVITE_REWARDS'])throw new errors[(_0x102c16(0x236))](errors[_0x102c16(0x210)][_0x102c16(0x1fd)],this['client'][_0x102c16(0x20c)][_0x102c16(0x229)](_0x424c74[_0x102c16(0x1f6)][_0x102c16(0x1f1)]['language'],_0x102c16(0x238),_0x102c16(0x22c),constants[_0x102c16(0x1ff)]['INVITE_REWARDS']));}}const _0x5a40de=this['client'][_0x102c16(0x220)][_0x102c16(0x1fa)](_0x424c74[_0x102c16(0x1f6)],_0x28edc2[_0x102c16(0x202)][_0x102c16(0x22f)]('\x20'));if(!_0x5a40de)throw new errors[(_0x102c16(0x236))](errors[_0x102c16(0x210)]['ROLE_NOT_FOUND'],this[_0x102c16(0x1f9)][_0x102c16(0x20c)][_0x102c16(0x229)](_0x424c74[_0x102c16(0x1f6)][_0x102c16(0x1f1)][_0x102c16(0x217)],'errors',_0x102c16(0x1fc)));let _0x14c190=await _0x5a40de[_0x102c16(0x1ef)]();return!_0x14c190&&(_0x14c190=await _0x5a40de[_0x102c16(0x203)]()),_0x14c190[_0x102c16(0x20f)]=_0x28edc2[_0x102c16(0x20f)],await _0x14c190[_0x102c16(0x1f0)](),await _0x424c74['channel'][_0x102c16(0x205)]({'embed':{'color':tesseract_1['Constants']['COLORS'][_0x102c16(0x219)],'description':this[_0x102c16(0x1f9)][_0x102c16(0x20c)][_0x102c16(0x229)](_0x424c74[_0x102c16(0x1f6)][_0x102c16(0x1f1)][_0x102c16(0x217)],'info',_0x102c16(0x224),_0x424c74[_0x102c16(0x234)][_0x102c16(0x233)],_0x5a40de[_0x102c16(0x22d)],_0x28edc2['referrals'])}});}if(_0x28edc2[_0x102c16(0x22a)])return await Role_1['default'][_0x102c16(0x1f3)]({'guild':_0x424c74[_0x102c16(0x1f6)]['id'],'referrals':_0x28edc2[_0x102c16(0x20f)]},{'$unset':{'referrals':0x1}}),await _0x424c74[_0x102c16(0x206)][_0x102c16(0x205)]({'embed':{'color':tesseract_1[_0x102c16(0x1ed)][_0x102c16(0x227)][_0x102c16(0x242)],'description':this['client']['locale'][_0x102c16(0x229)](_0x424c74[_0x102c16(0x1f6)]['document'][_0x102c16(0x217)],_0x102c16(0x20d),_0x102c16(0x201),_0x424c74[_0x102c16(0x234)][_0x102c16(0x233)],_0x28edc2[_0x102c16(0x20f)])}});}const _0x428a45=await Role_1[_0x102c16(0x21c)][_0x102c16(0x21d)]({'guild':_0x424c74[_0x102c16(0x1f6)]['id'],'referrals':{'$exists':!![],'$ne':null}});if(!_0x428a45[_0x102c16(0x218)])throw new Error(_0x102c16(0x23e));const _0x4f143f={};for(const _0x2ae997 of _0x428a45){_0x2ae997[_0x102c16(0x20f)]in _0x4f143f?_0x4f143f[_0x2ae997[_0x102c16(0x20f)]][_0x102c16(0x240)](_0x2ae997['id']):_0x4f143f[_0x2ae997['referrals']]=[_0x2ae997['id']];}const _0x56396c=pagination[_0x102c16(0x23f)](Object[_0x102c16(0x208)](_0x4f143f)[_0x102c16(0x23d)](_0x5b265d=>({'name':_0x5b265d+_0x102c16(0x212),'value':_0x4f143f[_0x5b265d][_0x102c16(0x23d)](_0x5a5dcf=>_0x424c74['guild']['roles'][_0x102c16(0x1f2)][_0x102c16(0x214)](_0x5a5dcf)?_0x424c74['guild'][_0x102c16(0x1fb)][_0x102c16(0x1f2)][_0x102c16(0x213)](_0x5a5dcf)[_0x102c16(0x22d)]:_0x5a5dcf)['join'](',\x20')})),_0x28edc2[_0x102c16(0x232)]);return await _0x424c74[_0x102c16(0x206)]['send']({'embed':{'color':tesseract_1[_0x102c16(0x1ed)]['COLORS'][_0x102c16(0x237)],'title':_0x102c16(0x241),'fields':_0x56396c['items'],'footer':{'text':_0x102c16(0x211)+_0x56396c[_0x102c16(0x232)]+_0x102c16(0x1f8)+_0x56396c[_0x102c16(0x20e)]}}});};}};
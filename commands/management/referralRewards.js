const a72_0x34ad=['BASTION_ERROR_TYPE','getString','Page\x20','author','channel','@bastion/tesseract','keys','language','default','referrals','roleNotFound','DiscordError','INVITE_REWARDS','PremiumTier','LIMITS','get','locale','page','items','map','find','roleReferralsClear','error','send','role','fetchPremiumTier','catch','has','tag','pages','resolveRole','LIMITED_PREMIUM_MEMBERSHIP','resolver','ROLE_NOT_FOUND','\x20of\x20','guild','constructor','membershipLimitInviteRoles','IRIS','roles','isPublicBastion','PLATINUM','updateMany','return\x20/\x22\x20+\x20this\x20+\x20\x22/','exports','Referral\x20Rewards','referralRewards','\x20Referrals','user','client','../../utils/pagination','cache','fetchDocument','clamp','document','referralRewards\x20-n\x20NUMBER\x20--role\x20ROLE','../../models/Role','GREEN','PREMIUM_MEMBERSHIP_REQUIRED','join','GOLD','MAX_SAFE_INTEGER','Command','premiumInviteRoles','COLORS','errors','referralRewards\x20-n\x20NUMBER\x20--remove','name','remove','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}'];(function(_0xe200c,_0x34ad78){const _0xe27dee=function(_0x16cd8c){while(--_0x16cd8c){_0xe200c['push'](_0xe200c['shift']());}},_0x3340ed=function(){const _0x5ecfad={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x51fcac,_0x1213e8,_0x28688a,_0x15b489){_0x15b489=_0x15b489||{};let _0x49215e=_0x1213e8+'='+_0x28688a,_0x202d06=0x0;for(let _0x1474e7=0x0,_0x424598=_0x51fcac['length'];_0x1474e7<_0x424598;_0x1474e7++){const _0x3a9337=_0x51fcac[_0x1474e7];_0x49215e+=';\x20'+_0x3a9337;const _0x54fa0b=_0x51fcac[_0x3a9337];_0x51fcac['push'](_0x54fa0b),_0x424598=_0x51fcac['length'],_0x54fa0b!==!![]&&(_0x49215e+='='+_0x54fa0b);}_0x15b489['cookie']=_0x49215e;},'removeCookie':function(){return'dev';},'getCookie':function(_0x703385,_0x3b6fc0){_0x703385=_0x703385||function(_0x579652){return _0x579652;};const _0x4baea6=_0x703385(new RegExp('(?:^|;\x20)'+_0x3b6fc0['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x58eb11=function(_0x4c4f6e,_0x375653){_0x4c4f6e(++_0x375653);};return _0x58eb11(_0xe27dee,_0x34ad78),_0x4baea6?decodeURIComponent(_0x4baea6[0x1]):undefined;}},_0x24d4fc=function(){const _0x1581e9=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x1581e9['test'](_0x5ecfad['removeCookie']['toString']());};_0x5ecfad['updateCookie']=_0x24d4fc;let _0x32e207='';const _0x205683=_0x5ecfad['updateCookie']();if(!_0x205683)_0x5ecfad['setCookie'](['*'],'counter',0x1);else _0x205683?_0x32e207=_0x5ecfad['getCookie'](null,'counter'):_0x5ecfad['removeCookie']();};_0x3340ed();}(a72_0x34ad,0x67));const a72_0xe27d=function(_0xe200c,_0x34ad78){_0xe200c=_0xe200c-0x0;let _0xe27dee=a72_0x34ad[_0xe200c];return _0xe27dee;};const a72_0x28688a=function(){let _0x54deef=!![];return function(_0x21faef,_0x595cd4){const _0x45684c=_0x54deef?function(){if(_0x595cd4){const _0x2ab2c5=_0x595cd4['apply'](_0x21faef,arguments);return _0x595cd4=null,_0x2ab2c5;}}:function(){};return _0x54deef=![],_0x45684c;};}(),a72_0x1213e8=a72_0x28688a(this,function(){const _0x51e406=function(){const _0x206f74=_0x51e406[a72_0xe27d('0x3')](a72_0xe27d('0xa'))()[a72_0xe27d('0x3')](a72_0xe27d('0x24'));return!_0x206f74['test'](a72_0x1213e8);};return _0x51e406();});a72_0x1213e8();'use strict';const tesseract_1=require(a72_0xe27d('0x2a')),Role_1=require(a72_0xe27d('0x17')),constants=require('../../utils/constants'),errors=require('../../utils/errors'),numbers=require('../../utils/numbers'),omnic=require('../../utils/omnic'),pagination=require(a72_0xe27d('0x11'));module[a72_0xe27d('0xb')]=class ReferralRewardsCommand extends tesseract_1[a72_0xe27d('0x1d')]{constructor(){super(a72_0xe27d('0xd'),{'description':'It\x20allows\x20you\x20set\x20roles\x20as\x20rewards\x20for\x20referrals\x20(inviting\x20other\x20users\x20to\x20the\x20server).','triggers':[],'arguments':{'alias':{'referrals':['n'],'page':['p']},'array':[a72_0xe27d('0x3d')],'boolean':['remove'],'string':[a72_0xe27d('0x3d')],'number':[a72_0xe27d('0x2e'),a72_0xe27d('0x36')],'coerce':{'referrals':_0x1966f3=>numbers[a72_0xe27d('0x14')](_0x1966f3,0x1,Number[a72_0xe27d('0x1c')])}},'scope':a72_0xe27d('0x2'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':['MANAGE_GUILD'],'userPermissions':[],'syntax':[a72_0xe27d('0xd'),'referralRewards\x20--page\x20NUMBER',a72_0xe27d('0x16'),a72_0xe27d('0x21')]}),this['exec']=async(_0x51d2d2,_0x410ed8)=>{if(_0x410ed8[a72_0xe27d('0x2e')]){if(_0x410ed8[a72_0xe27d('0x3d')]){if(constants[a72_0xe27d('0x7')](this[a72_0xe27d('0x10')][a72_0xe27d('0xf')])){const _0xbea721=await omnic[a72_0xe27d('0x3e')](_0x51d2d2[a72_0xe27d('0x2')])[a72_0xe27d('0x3f')](()=>{}),_0x1029c8=await Role_1[a72_0xe27d('0x2d')]['countDocuments']({'guild':_0x51d2d2['guild']['id'],'referrals':{'$exists':!![],'$ne':null}});if(_0xbea721){if(_0xbea721===omnic[a72_0xe27d('0x32')][a72_0xe27d('0x1b')]&&_0x1029c8>=constants[a72_0xe27d('0x33')][a72_0xe27d('0x1b')][a72_0xe27d('0x31')])throw new errors[(a72_0xe27d('0x30'))](errors[a72_0xe27d('0x25')][a72_0xe27d('0x44')],this['client'][a72_0xe27d('0x35')][a72_0xe27d('0x26')](_0x51d2d2[a72_0xe27d('0x2')][a72_0xe27d('0x15')][a72_0xe27d('0x2c')],'errors','membershipLimitInviteRoles',constants[a72_0xe27d('0x33')][a72_0xe27d('0x1b')][a72_0xe27d('0x31')]));else{if(_0xbea721===omnic['PremiumTier'][a72_0xe27d('0x8')]&&_0x1029c8>=constants['LIMITS']['PLATINUM'][a72_0xe27d('0x31')])throw new errors[(a72_0xe27d('0x30'))](errors[a72_0xe27d('0x25')][a72_0xe27d('0x44')],this[a72_0xe27d('0x10')][a72_0xe27d('0x35')][a72_0xe27d('0x26')](_0x51d2d2['guild'][a72_0xe27d('0x15')][a72_0xe27d('0x2c')],a72_0xe27d('0x20'),a72_0xe27d('0x4'),constants[a72_0xe27d('0x33')]['PLATINUM'][a72_0xe27d('0x31')]));}}else{if(_0x1029c8>=constants[a72_0xe27d('0x33')][a72_0xe27d('0x31')])throw new errors[(a72_0xe27d('0x30'))](errors[a72_0xe27d('0x25')][a72_0xe27d('0x19')],this[a72_0xe27d('0x10')][a72_0xe27d('0x35')][a72_0xe27d('0x26')](_0x51d2d2[a72_0xe27d('0x2')][a72_0xe27d('0x15')]['language'],a72_0xe27d('0x20'),a72_0xe27d('0x1e'),constants[a72_0xe27d('0x33')]['INVITE_REWARDS']));}}const _0x3b980a=this[a72_0xe27d('0x10')][a72_0xe27d('0x45')][a72_0xe27d('0x43')](_0x51d2d2[a72_0xe27d('0x2')],_0x410ed8['role'][a72_0xe27d('0x1a')]('\x20'));if(!_0x3b980a)throw new errors[(a72_0xe27d('0x30'))](errors['BASTION_ERROR_TYPE'][a72_0xe27d('0x0')],this['client']['locale'][a72_0xe27d('0x26')](_0x51d2d2[a72_0xe27d('0x2')][a72_0xe27d('0x15')][a72_0xe27d('0x2c')],a72_0xe27d('0x3b'),a72_0xe27d('0x2f')));let _0x42eeec=await _0x3b980a[a72_0xe27d('0x13')]();return!_0x42eeec&&(_0x42eeec=await _0x3b980a['createDocument']()),_0x42eeec['referrals']=_0x410ed8['referrals'],await _0x42eeec['save'](),await _0x51d2d2[a72_0xe27d('0x29')]['send']({'embed':{'color':tesseract_1['Constants']['COLORS'][a72_0xe27d('0x18')],'description':this[a72_0xe27d('0x10')][a72_0xe27d('0x35')][a72_0xe27d('0x26')](_0x51d2d2['guild'][a72_0xe27d('0x15')][a72_0xe27d('0x2c')],'info','roleReferralsSet',_0x51d2d2[a72_0xe27d('0x28')][a72_0xe27d('0x41')],_0x3b980a[a72_0xe27d('0x22')],_0x410ed8[a72_0xe27d('0x2e')])}});}if(_0x410ed8[a72_0xe27d('0x23')])return await Role_1[a72_0xe27d('0x2d')][a72_0xe27d('0x9')]({'guild':_0x51d2d2['guild']['id'],'referrals':_0x410ed8[a72_0xe27d('0x2e')]},{'$unset':{'referrals':0x1}}),await _0x51d2d2[a72_0xe27d('0x29')][a72_0xe27d('0x3c')]({'embed':{'color':tesseract_1['Constants'][a72_0xe27d('0x1f')]['RED'],'description':this[a72_0xe27d('0x10')][a72_0xe27d('0x35')][a72_0xe27d('0x26')](_0x51d2d2[a72_0xe27d('0x2')][a72_0xe27d('0x15')]['language'],'info',a72_0xe27d('0x3a'),_0x51d2d2['author'][a72_0xe27d('0x41')],_0x410ed8[a72_0xe27d('0x2e')])}});}const _0x2184e8=await Role_1[a72_0xe27d('0x2d')][a72_0xe27d('0x39')]({'guild':_0x51d2d2[a72_0xe27d('0x2')]['id'],'referrals':{'$exists':!![],'$ne':null}});if(!_0x2184e8['length'])throw new Error('NO_REFERRAL_REWARDS');const _0x54aac7={};for(const _0x3aab5f of _0x2184e8){_0x3aab5f[a72_0xe27d('0x2e')]in _0x54aac7?_0x54aac7[_0x3aab5f[a72_0xe27d('0x2e')]]['push'](_0x3aab5f['id']):_0x54aac7[_0x3aab5f['referrals']]=[_0x3aab5f['id']];}const _0x48f026=pagination['paginate'](Object[a72_0xe27d('0x2b')](_0x54aac7)[a72_0xe27d('0x38')](_0x24912a=>({'name':_0x24912a+a72_0xe27d('0xe'),'value':_0x54aac7[_0x24912a]['map'](_0x39c31d=>_0x51d2d2[a72_0xe27d('0x2')]['roles'][a72_0xe27d('0x12')][a72_0xe27d('0x40')](_0x39c31d)?_0x51d2d2['guild'][a72_0xe27d('0x6')][a72_0xe27d('0x12')][a72_0xe27d('0x34')](_0x39c31d)['name']:_0x39c31d)[a72_0xe27d('0x1a')](',\x20')})),_0x410ed8[a72_0xe27d('0x36')]);return await _0x51d2d2[a72_0xe27d('0x29')]['send']({'embed':{'color':tesseract_1['Constants'][a72_0xe27d('0x1f')][a72_0xe27d('0x5')],'title':a72_0xe27d('0xc'),'fields':_0x48f026[a72_0xe27d('0x37')],'footer':{'text':a72_0xe27d('0x27')+_0x48f026[a72_0xe27d('0x36')]+a72_0xe27d('0x1')+_0x48f026[a72_0xe27d('0x42')]}}});};}};
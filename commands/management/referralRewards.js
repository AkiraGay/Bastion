const a92_0x440d=['GREEN','roleReferralsClear','membershipLimitInviteRoles','../../utils/numbers','MAX_SAFE_INTEGER','LIMITED_PREMIUM_MEMBERSHIP','pages','document','Command','locale','BASTION_ERROR_TYPE','../../utils/pagination','Page\x20','PREMIUM_MEMBERSHIP_REQUIRED','channel','../../models/Role','roleNotFound','errors','resolveRole','length','items','NO_REFERRAL_REWARDS','page','catch','cache','keys','exec','return\x20/\x22\x20+\x20this\x20+\x20\x22/','exports','info','countDocuments','Referral\x20Rewards','PremiumTier','constructor','LIMITS','referrals','tag','test','createDocument','join','@bastion/tesseract','Constants','GOLD','push','send','IRIS','getString','author','PLATINUM','referralRewards\x20--page\x20NUMBER','updateMany','COLORS','default','INVITE_REWARDS','../../utils/errors','fetchPremiumTier','roles','referralRewards','fetchDocument','../../utils/constants','name','language','has','../../utils/omnic','client','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','\x20Referrals','guild','user','referralRewards\x20-n\x20NUMBER\x20--role\x20ROLE','remove','roleReferralsSet','map','DiscordError','save','role','ROLE_NOT_FOUND','\x20of\x20','RED','MANAGE_GUILD','clamp'];(function(_0x160f53,_0x1bc57a){const _0x440d77=function(_0xf95c36){while(--_0xf95c36){_0x160f53['push'](_0x160f53['shift']());}},_0x3ae4a2=function(){const _0x17065c={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x118b7f,_0x3e7591,_0x5ef170,_0x364f26){_0x364f26=_0x364f26||{};let _0x5a061c=_0x3e7591+'='+_0x5ef170,_0x41db41=0x0;for(let _0x2a8e58=0x0,_0x3f4135=_0x118b7f['length'];_0x2a8e58<_0x3f4135;_0x2a8e58++){const _0x19d0cd=_0x118b7f[_0x2a8e58];_0x5a061c+=';\x20'+_0x19d0cd;const _0x2f01ab=_0x118b7f[_0x19d0cd];_0x118b7f['push'](_0x2f01ab),_0x3f4135=_0x118b7f['length'],_0x2f01ab!==!![]&&(_0x5a061c+='='+_0x2f01ab);}_0x364f26['cookie']=_0x5a061c;},'removeCookie':function(){return'dev';},'getCookie':function(_0x175d87,_0xdc3d92){_0x175d87=_0x175d87||function(_0x59d105){return _0x59d105;};const _0xebffa=_0x175d87(new RegExp('(?:^|;\x20)'+_0xdc3d92['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x257f87=function(_0x2853c1,_0x1986c0){_0x2853c1(++_0x1986c0);};return _0x257f87(_0x440d77,_0x1bc57a),_0xebffa?decodeURIComponent(_0xebffa[0x1]):undefined;}},_0x44f166=function(){const _0x1d68d5=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x1d68d5['test'](_0x17065c['removeCookie']['toString']());};_0x17065c['updateCookie']=_0x44f166;let _0x3df8af='';const _0x207de4=_0x17065c['updateCookie']();if(!_0x207de4)_0x17065c['setCookie'](['*'],'counter',0x1);else _0x207de4?_0x3df8af=_0x17065c['getCookie'](null,'counter'):_0x17065c['removeCookie']();};_0x3ae4a2();}(a92_0x440d,0x11e));const a92_0x3ae4=function(_0x160f53,_0x1bc57a){_0x160f53=_0x160f53-0xab;let _0x440d77=a92_0x440d[_0x160f53];return _0x440d77;};const a92_0x5249ab=a92_0x3ae4,a92_0x44f166=function(){let _0x207de4=!![];return function(_0x118b7f,_0x3e7591){const _0x5ef170=_0x207de4?function(){if(_0x3e7591){const _0x364f26=_0x3e7591['apply'](_0x118b7f,arguments);return _0x3e7591=null,_0x364f26;}}:function(){};return _0x207de4=![],_0x5ef170;};}(),a92_0x17065c=a92_0x44f166(this,function(){const _0x5a061c=function(){const _0x48b1e3=a92_0x3ae4,_0x41db41=_0x5a061c[_0x48b1e3(0xf2)](_0x48b1e3(0xec))()[_0x48b1e3(0xf2)](_0x48b1e3(0xc1));return!_0x41db41[_0x48b1e3(0xf6)](a92_0x17065c);};return _0x5a061c();});a92_0x17065c();'use strict';const tesseract_1=require(a92_0x5249ab(0xf9)),Role_1=require(a92_0x5249ab(0xe0)),constants=require(a92_0x5249ab(0xbb)),errors=require(a92_0x5249ab(0xb6)),numbers=require(a92_0x5249ab(0xd4)),omnic=require(a92_0x5249ab(0xbf)),pagination=require(a92_0x5249ab(0xdc));module[a92_0x5249ab(0xed)]=class ReferralRewardsCommand extends tesseract_1[a92_0x5249ab(0xd9)]{constructor(){const _0xe3be3d=a92_0x5249ab;super(_0xe3be3d(0xb9),{'description':'It\x20allows\x20you\x20set\x20roles\x20as\x20rewards\x20for\x20referrals\x20(inviting\x20other\x20users\x20to\x20the\x20server).','triggers':[],'arguments':{'alias':{'referrals':['n'],'page':['p']},'array':[_0xe3be3d(0xcb)],'boolean':['remove'],'string':['role'],'number':[_0xe3be3d(0xf4),_0xe3be3d(0xe7)],'coerce':{'referrals':_0x2a8e58=>numbers[_0xe3be3d(0xd0)](_0x2a8e58,0x1,Number[_0xe3be3d(0xd5)])}},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[_0xe3be3d(0xcf)],'userPermissions':[],'syntax':['referralRewards',_0xe3be3d(0xb1),_0xe3be3d(0xc5),'referralRewards\x20-n\x20NUMBER\x20--remove']}),this[_0xe3be3d(0xeb)]=async(_0x3f4135,_0x19d0cd)=>{const _0xbb34bd=_0xe3be3d;if(_0x19d0cd[_0xbb34bd(0xf4)]){if(_0x19d0cd[_0xbb34bd(0xcb)]){if(constants['isPublicBastion'](this[_0xbb34bd(0xc0)][_0xbb34bd(0xc4)])){const _0x59d105=await omnic[_0xbb34bd(0xb7)](_0x3f4135[_0xbb34bd(0xc3)])[_0xbb34bd(0xe8)](()=>{}),_0x2853c1=await Role_1['default'][_0xbb34bd(0xef)]({'guild':_0x3f4135[_0xbb34bd(0xc3)]['id'],'referrals':{'$exists':!![],'$ne':null}});if(_0x59d105){if(_0x59d105===omnic[_0xbb34bd(0xf1)]['GOLD']&&_0x2853c1>=constants[_0xbb34bd(0xf3)][_0xbb34bd(0xfb)][_0xbb34bd(0xb5)])throw new errors[(_0xbb34bd(0xc9))](errors[_0xbb34bd(0xdb)][_0xbb34bd(0xd6)],this[_0xbb34bd(0xc0)][_0xbb34bd(0xda)][_0xbb34bd(0xae)](_0x3f4135[_0xbb34bd(0xc3)]['document'][_0xbb34bd(0xbd)],_0xbb34bd(0xe2),_0xbb34bd(0xd3),constants[_0xbb34bd(0xf3)]['GOLD']['INVITE_REWARDS']));else{if(_0x59d105===omnic['PremiumTier'][_0xbb34bd(0xb0)]&&_0x2853c1>=constants[_0xbb34bd(0xf3)][_0xbb34bd(0xb0)][_0xbb34bd(0xb5)])throw new errors['DiscordError'](errors[_0xbb34bd(0xdb)][_0xbb34bd(0xd6)],this['client'][_0xbb34bd(0xda)][_0xbb34bd(0xae)](_0x3f4135[_0xbb34bd(0xc3)][_0xbb34bd(0xd8)][_0xbb34bd(0xbd)],_0xbb34bd(0xe2),'membershipLimitInviteRoles',constants[_0xbb34bd(0xf3)][_0xbb34bd(0xb0)][_0xbb34bd(0xb5)]));}}else{if(_0x2853c1>=constants['LIMITS'][_0xbb34bd(0xb5)])throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][_0xbb34bd(0xde)],this[_0xbb34bd(0xc0)][_0xbb34bd(0xda)][_0xbb34bd(0xae)](_0x3f4135[_0xbb34bd(0xc3)][_0xbb34bd(0xd8)][_0xbb34bd(0xbd)],_0xbb34bd(0xe2),'premiumInviteRoles',constants[_0xbb34bd(0xf3)][_0xbb34bd(0xb5)]));}}const _0xebffa=this[_0xbb34bd(0xc0)]['resolver'][_0xbb34bd(0xe3)](_0x3f4135['guild'],_0x19d0cd['role'][_0xbb34bd(0xf8)]('\x20'));if(!_0xebffa)throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][_0xbb34bd(0xcc)],this[_0xbb34bd(0xc0)]['locale'][_0xbb34bd(0xae)](_0x3f4135[_0xbb34bd(0xc3)][_0xbb34bd(0xd8)]['language'],_0xbb34bd(0xe2),_0xbb34bd(0xe1)));let _0x257f87=await _0xebffa[_0xbb34bd(0xba)]();return!_0x257f87&&(_0x257f87=await _0xebffa[_0xbb34bd(0xf7)]()),_0x257f87[_0xbb34bd(0xf4)]=_0x19d0cd['referrals'],await _0x257f87[_0xbb34bd(0xca)](),await _0x3f4135[_0xbb34bd(0xdf)][_0xbb34bd(0xac)]({'embed':{'color':tesseract_1['Constants'][_0xbb34bd(0xb3)][_0xbb34bd(0xd1)],'description':this[_0xbb34bd(0xc0)][_0xbb34bd(0xda)][_0xbb34bd(0xae)](_0x3f4135[_0xbb34bd(0xc3)]['document'][_0xbb34bd(0xbd)],'info',_0xbb34bd(0xc7),_0x3f4135[_0xbb34bd(0xaf)]['tag'],_0xebffa[_0xbb34bd(0xbc)],_0x19d0cd[_0xbb34bd(0xf4)])}});}if(_0x19d0cd[_0xbb34bd(0xc6)])return await Role_1[_0xbb34bd(0xb4)][_0xbb34bd(0xb2)]({'guild':_0x3f4135[_0xbb34bd(0xc3)]['id'],'referrals':_0x19d0cd[_0xbb34bd(0xf4)]},{'$unset':{'referrals':0x1}}),await _0x3f4135[_0xbb34bd(0xdf)][_0xbb34bd(0xac)]({'embed':{'color':tesseract_1[_0xbb34bd(0xfa)][_0xbb34bd(0xb3)][_0xbb34bd(0xce)],'description':this[_0xbb34bd(0xc0)][_0xbb34bd(0xda)][_0xbb34bd(0xae)](_0x3f4135[_0xbb34bd(0xc3)]['document'][_0xbb34bd(0xbd)],_0xbb34bd(0xee),_0xbb34bd(0xd2),_0x3f4135['author'][_0xbb34bd(0xf5)],_0x19d0cd[_0xbb34bd(0xf4)])}});}const _0x2f01ab=await Role_1[_0xbb34bd(0xb4)]['find']({'guild':_0x3f4135[_0xbb34bd(0xc3)]['id'],'referrals':{'$exists':!![],'$ne':null}});if(!_0x2f01ab[_0xbb34bd(0xe4)])throw new Error(_0xbb34bd(0xe6));const _0x175d87={};for(const _0x1986c0 of _0x2f01ab){_0x1986c0[_0xbb34bd(0xf4)]in _0x175d87?_0x175d87[_0x1986c0[_0xbb34bd(0xf4)]][_0xbb34bd(0xab)](_0x1986c0['id']):_0x175d87[_0x1986c0[_0xbb34bd(0xf4)]]=[_0x1986c0['id']];}const _0xdc3d92=pagination['paginate'](Object[_0xbb34bd(0xea)](_0x175d87)['map'](_0x1d68d5=>({'name':_0x1d68d5+_0xbb34bd(0xc2),'value':_0x175d87[_0x1d68d5][_0xbb34bd(0xc8)](_0x322739=>_0x3f4135['guild'][_0xbb34bd(0xb8)][_0xbb34bd(0xe9)][_0xbb34bd(0xbe)](_0x322739)?_0x3f4135[_0xbb34bd(0xc3)][_0xbb34bd(0xb8)]['cache']['get'](_0x322739)[_0xbb34bd(0xbc)]:_0x322739)[_0xbb34bd(0xf8)](',\x20')})),_0x19d0cd[_0xbb34bd(0xe7)]);return await _0x3f4135[_0xbb34bd(0xdf)]['send']({'embed':{'color':tesseract_1[_0xbb34bd(0xfa)][_0xbb34bd(0xb3)][_0xbb34bd(0xad)],'title':_0xbb34bd(0xf0),'fields':_0xdc3d92[_0xbb34bd(0xe5)],'footer':{'text':_0xbb34bd(0xdd)+_0xdc3d92[_0xbb34bd(0xe7)]+_0xbb34bd(0xcd)+_0xdc3d92[_0xbb34bd(0xd7)]}}});};}};
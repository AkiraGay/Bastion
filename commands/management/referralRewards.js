const a92_0x5c79=['premiumInviteRoles','../../utils/pagination','../../models/Role','apply','1MNYbQM','user','IRIS','LIMITS','errors','keys','cache','352074hOQcRd','224220qmQjiJ','exports','98nwkZFs','test','document','tag','Referral\x20Rewards','roleReferralsClear','referralRewards\x20--page\x20NUMBER','518093AddrAh','../../utils/numbers','push','fetchDocument','NO_REFERRAL_REWARDS','default','PREMIUM_MEMBERSHIP_REQUIRED','PLATINUM','role','../../utils/omnic','66189SuaNGC','\x20of\x20','resolveRole','save','map','exec','join','referralRewards','author','pages','membershipLimitInviteRoles','ROLE_NOT_FOUND','@bastion/tesseract','name','3407TPfVDc','remove','PremiumTier','Constants','updateMany','fetchPremiumTier','COLORS','client','createDocument','LIMITED_PREMIUM_MEMBERSHIP','guild','6218DFASVy','language','MANAGE_GUILD','158oJluAk','find','countDocuments','GOLD','referrals','It\x20allows\x20you\x20set\x20roles\x20as\x20rewards\x20for\x20referrals\x20(inviting\x20other\x20users\x20to\x20the\x20server).','items','GREEN','\x20Referrals','locale','page','../../utils/constants','clamp','199405retBTI','channel','length','BASTION_ERROR_TYPE','return\x20/\x22\x20+\x20this\x20+\x20\x22/','INVITE_REWARDS','Page\x20','DiscordError','roles','constructor','getString','isPublicBastion'];const a92_0x328c=function(_0x1ee7f9,_0xac1f42){_0x1ee7f9=_0x1ee7f9-0x138;let _0x8e8749=a92_0x5c79[_0x1ee7f9];return _0x8e8749;};const a92_0x7651ef=a92_0x328c;(function(_0x100d9f,_0x316933){const _0x4b845c=a92_0x328c;while(!![]){try{const _0x586888=-parseInt(_0x4b845c(0x142))+-parseInt(_0x4b845c(0x152))*-parseInt(_0x4b845c(0x16d))+-parseInt(_0x4b845c(0x159))+parseInt(_0x4b845c(0x163))+parseInt(_0x4b845c(0x15c))*parseInt(_0x4b845c(0x186))+parseInt(_0x4b845c(0x15a))+parseInt(_0x4b845c(0x17b))*-parseInt(_0x4b845c(0x189));if(_0x586888===_0x316933)break;else _0x100d9f['push'](_0x100d9f['shift']());}catch(_0x4c0b10){_0x100d9f['push'](_0x100d9f['shift']());}}}(a92_0x5c79,0x50191));const a92_0x546a99=function(){let _0x22de1b=!![];return function(_0x101edc,_0x1ec852){const _0x2dd990=_0x22de1b?function(){const _0x1b7d13=a92_0x328c;if(_0x1ec852){const _0x4e99c6=_0x1ec852[_0x1b7d13(0x151)](_0x101edc,arguments);return _0x1ec852=null,_0x4e99c6;}}:function(){};return _0x22de1b=![],_0x2dd990;};}(),a92_0x4548be=a92_0x546a99(this,function(){const _0x45878c=function(){const _0x1eed8d=a92_0x328c,_0x491c7f=_0x45878c[_0x1eed8d(0x14b)](_0x1eed8d(0x146))()[_0x1eed8d(0x14b)]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x491c7f[_0x1eed8d(0x15d)](a92_0x4548be);};return _0x45878c();});a92_0x4548be();'use strict';const tesseract_1=require(a92_0x7651ef(0x179)),Role_1=require(a92_0x7651ef(0x150)),constants=require(a92_0x7651ef(0x140)),errors=require('../../utils/errors'),numbers=require(a92_0x7651ef(0x164)),omnic=require(a92_0x7651ef(0x16c)),pagination=require(a92_0x7651ef(0x14f));module[a92_0x7651ef(0x15b)]=class ReferralRewardsCommand extends tesseract_1['Command']{constructor(){const _0x6d4861=a92_0x7651ef;super(_0x6d4861(0x174),{'description':_0x6d4861(0x13a),'triggers':[],'arguments':{'alias':{'referrals':['n'],'page':['p']},'array':[_0x6d4861(0x16b)],'boolean':[_0x6d4861(0x17c)],'string':['role'],'number':['referrals','page'],'coerce':{'referrals':_0xf8a4f=>numbers[_0x6d4861(0x141)](_0xf8a4f,0x1,Number['MAX_SAFE_INTEGER'])}},'scope':_0x6d4861(0x185),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[_0x6d4861(0x188)],'userPermissions':[],'syntax':[_0x6d4861(0x174),_0x6d4861(0x162),'referralRewards\x20-n\x20NUMBER\x20--role\x20ROLE','referralRewards\x20-n\x20NUMBER\x20--remove']}),this[_0x6d4861(0x172)]=async(_0x8f30d3,_0x2edd5e)=>{const _0x28363f=_0x6d4861;if(_0x2edd5e[_0x28363f(0x139)]){if(_0x2edd5e['role']){if(constants[_0x28363f(0x14d)](this[_0x28363f(0x182)][_0x28363f(0x153)])){const _0x5c7d36=await omnic[_0x28363f(0x180)](_0x8f30d3[_0x28363f(0x185)])['catch'](()=>{}),_0x3e4a53=await Role_1[_0x28363f(0x168)][_0x28363f(0x18b)]({'guild':_0x8f30d3['guild']['id'],'referrals':{'$exists':!![],'$ne':null}});if(_0x5c7d36){if(_0x5c7d36===omnic[_0x28363f(0x17d)][_0x28363f(0x138)]&&_0x3e4a53>=constants[_0x28363f(0x155)]['GOLD'][_0x28363f(0x147)])throw new errors[(_0x28363f(0x149))](errors['BASTION_ERROR_TYPE'][_0x28363f(0x184)],this[_0x28363f(0x182)][_0x28363f(0x13e)][_0x28363f(0x14c)](_0x8f30d3[_0x28363f(0x185)][_0x28363f(0x15e)]['language'],_0x28363f(0x156),'membershipLimitInviteRoles',constants[_0x28363f(0x155)][_0x28363f(0x138)]['INVITE_REWARDS']));else{if(_0x5c7d36===omnic[_0x28363f(0x17d)][_0x28363f(0x16a)]&&_0x3e4a53>=constants[_0x28363f(0x155)][_0x28363f(0x16a)][_0x28363f(0x147)])throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][_0x28363f(0x184)],this[_0x28363f(0x182)][_0x28363f(0x13e)][_0x28363f(0x14c)](_0x8f30d3[_0x28363f(0x185)][_0x28363f(0x15e)][_0x28363f(0x187)],_0x28363f(0x156),_0x28363f(0x177),constants[_0x28363f(0x155)][_0x28363f(0x16a)][_0x28363f(0x147)]));}}else{if(_0x3e4a53>=constants[_0x28363f(0x155)][_0x28363f(0x147)])throw new errors[(_0x28363f(0x149))](errors[_0x28363f(0x145)][_0x28363f(0x169)],this[_0x28363f(0x182)][_0x28363f(0x13e)]['getString'](_0x8f30d3[_0x28363f(0x185)][_0x28363f(0x15e)][_0x28363f(0x187)],_0x28363f(0x156),_0x28363f(0x14e),constants[_0x28363f(0x155)][_0x28363f(0x147)]));}}const _0x2410b3=this[_0x28363f(0x182)]['resolver'][_0x28363f(0x16f)](_0x8f30d3[_0x28363f(0x185)],_0x2edd5e['role'][_0x28363f(0x173)]('\x20'));if(!_0x2410b3)throw new errors[(_0x28363f(0x149))](errors[_0x28363f(0x145)][_0x28363f(0x178)],this[_0x28363f(0x182)][_0x28363f(0x13e)][_0x28363f(0x14c)](_0x8f30d3[_0x28363f(0x185)]['document']['language'],_0x28363f(0x156),'roleNotFound'));let _0x3faa53=await _0x2410b3[_0x28363f(0x166)]();return!_0x3faa53&&(_0x3faa53=await _0x2410b3[_0x28363f(0x183)]()),_0x3faa53[_0x28363f(0x139)]=_0x2edd5e[_0x28363f(0x139)],await _0x3faa53[_0x28363f(0x170)](),await _0x8f30d3[_0x28363f(0x143)]['send']({'embed':{'color':tesseract_1[_0x28363f(0x17e)]['COLORS'][_0x28363f(0x13c)],'description':this[_0x28363f(0x182)][_0x28363f(0x13e)][_0x28363f(0x14c)](_0x8f30d3[_0x28363f(0x185)][_0x28363f(0x15e)][_0x28363f(0x187)],'info','roleReferralsSet',_0x8f30d3['author']['tag'],_0x2410b3['name'],_0x2edd5e['referrals'])}});}if(_0x2edd5e['remove'])return await Role_1['default'][_0x28363f(0x17f)]({'guild':_0x8f30d3[_0x28363f(0x185)]['id'],'referrals':_0x2edd5e[_0x28363f(0x139)]},{'$unset':{'referrals':0x1}}),await _0x8f30d3[_0x28363f(0x143)]['send']({'embed':{'color':tesseract_1[_0x28363f(0x17e)][_0x28363f(0x181)]['RED'],'description':this['client'][_0x28363f(0x13e)][_0x28363f(0x14c)](_0x8f30d3[_0x28363f(0x185)][_0x28363f(0x15e)][_0x28363f(0x187)],'info',_0x28363f(0x161),_0x8f30d3[_0x28363f(0x175)][_0x28363f(0x15f)],_0x2edd5e[_0x28363f(0x139)])}});}const _0x2bcb3c=await Role_1['default'][_0x28363f(0x18a)]({'guild':_0x8f30d3[_0x28363f(0x185)]['id'],'referrals':{'$exists':!![],'$ne':null}});if(!_0x2bcb3c[_0x28363f(0x144)])throw new Error(_0x28363f(0x167));const _0x40e92c={};for(const _0x450ca8 of _0x2bcb3c){_0x450ca8[_0x28363f(0x139)]in _0x40e92c?_0x40e92c[_0x450ca8[_0x28363f(0x139)]][_0x28363f(0x165)](_0x450ca8['id']):_0x40e92c[_0x450ca8[_0x28363f(0x139)]]=[_0x450ca8['id']];}const _0x498f30=pagination['paginate'](Object[_0x28363f(0x157)](_0x40e92c)['map'](_0x32ef65=>({'name':_0x32ef65+_0x28363f(0x13d),'value':_0x40e92c[_0x32ef65][_0x28363f(0x171)](_0x3d2cc2=>_0x8f30d3['guild'][_0x28363f(0x14a)]['cache']['has'](_0x3d2cc2)?_0x8f30d3['guild']['roles'][_0x28363f(0x158)]['get'](_0x3d2cc2)[_0x28363f(0x17a)]:_0x3d2cc2)[_0x28363f(0x173)](',\x20')})),_0x2edd5e[_0x28363f(0x13f)]);return await _0x8f30d3[_0x28363f(0x143)]['send']({'embed':{'color':tesseract_1[_0x28363f(0x17e)]['COLORS'][_0x28363f(0x154)],'title':_0x28363f(0x160),'fields':_0x498f30[_0x28363f(0x13b)],'footer':{'text':_0x28363f(0x148)+_0x498f30[_0x28363f(0x13f)]+_0x28363f(0x16e)+_0x498f30[_0x28363f(0x176)]}}});};}};
const a71_0x1d00=['membershipLimitInviteRoles','../../utils/numbers','user','name','\x20of\x20','guild','PLATINUM','exports','roles','referrals','roleNotFound','LIMITS','info','page','pages','RED','referralRewards','document','../../utils/errors','../../models/Role','error','errors','MANAGE_GUILD','isPublicBastion','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','clamp','locale','apply','role','constructor','getString','It\x20allows\x20you\x20set\x20roles\x20as\x20rewards\x20for\x20referrals\x20(inviting\x20other\x20users\x20to\x20the\x20server).','has','roleReferralsSet','default','exec','return\x20/\x22\x20+\x20this\x20+\x20\x22/','IRIS','BASTION_ERROR_TYPE','roleReferralsClear','map','get','GOLD','INVITE_REWARDS','client','\x20Referrals','language','PremiumTier','PREMIUM_MEMBERSHIP_REQUIRED','referralRewards\x20-n\x20NUMBER\x20--remove','keys','DiscordError','resolver','test','join','channel','save','send','Page\x20','@bastion/tesseract','fetchPremiumTier','length','catch','remove','fetchDocument','tag','COLORS','Constants','cache','LIMITED_PREMIUM_MEMBERSHIP','referralRewards\x20-n\x20NUMBER\x20--role\x20ROLE','NO_REFERRAL_REWARDS','push','MAX_SAFE_INTEGER'];(function(_0x55e632,_0x1d0089){const _0x19309c=function(_0x491663){while(--_0x491663){_0x55e632['push'](_0x55e632['shift']());}},_0x5a9dd8=function(){const _0xda86f0={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2a7ce2,_0x3edbed,_0x138edc,_0x366174){_0x366174=_0x366174||{};let _0x61b5c1=_0x3edbed+'='+_0x138edc,_0x25f8e2=0x0;for(let _0x316058=0x0,_0x59c74a=_0x2a7ce2['length'];_0x316058<_0x59c74a;_0x316058++){const _0x1f9255=_0x2a7ce2[_0x316058];_0x61b5c1+=';\x20'+_0x1f9255;const _0x2d3cce=_0x2a7ce2[_0x1f9255];_0x2a7ce2['push'](_0x2d3cce),_0x59c74a=_0x2a7ce2['length'],_0x2d3cce!==!![]&&(_0x61b5c1+='='+_0x2d3cce);}_0x366174['cookie']=_0x61b5c1;},'removeCookie':function(){return'dev';},'getCookie':function(_0x199eac,_0x31f87d){_0x199eac=_0x199eac||function(_0x26a9be){return _0x26a9be;};const _0x4bed98=_0x199eac(new RegExp('(?:^|;\x20)'+_0x31f87d['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0xff621e=function(_0x4ce88f,_0x54cafe){_0x4ce88f(++_0x54cafe);};return _0xff621e(_0x19309c,_0x1d0089),_0x4bed98?decodeURIComponent(_0x4bed98[0x1]):undefined;}},_0x55e273=function(){const _0x1cbfa6=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x1cbfa6['test'](_0xda86f0['removeCookie']['toString']());};_0xda86f0['updateCookie']=_0x55e273;let _0x4c3bae='';const _0x17b3eb=_0xda86f0['updateCookie']();if(!_0x17b3eb)_0xda86f0['setCookie'](['*'],'counter',0x1);else _0x17b3eb?_0x4c3bae=_0xda86f0['getCookie'](null,'counter'):_0xda86f0['removeCookie']();};_0x5a9dd8();}(a71_0x1d00,0x1cd));const a71_0x1930=function(_0x55e632,_0x1d0089){_0x55e632=_0x55e632-0x0;let _0x19309c=a71_0x1d00[_0x55e632];return _0x19309c;};const a71_0x138edc=function(){let _0x436cfd=!![];return function(_0xb7790d,_0x850129){const _0x21ae1d=_0x436cfd?function(){if(_0x850129){const _0x3daf6f=_0x850129[a71_0x1930('0xa')](_0xb7790d,arguments);return _0x850129=null,_0x3daf6f;}}:function(){};return _0x436cfd=![],_0x21ae1d;};}(),a71_0x3edbed=a71_0x138edc(this,function(){const _0x25a47d=function(){const _0xbb8693=_0x25a47d[a71_0x1930('0xc')](a71_0x1930('0x13'))()['constructor'](a71_0x1930('0x7'));return!_0xbb8693[a71_0x1930('0x24')](a71_0x3edbed);};return _0x25a47d();});a71_0x3edbed();'use strict';const tesseract_1=require(a71_0x1930('0x2a')),Role_1=require(a71_0x1930('0x2')),constants=require('../../utils/constants'),errors=require(a71_0x1930('0x1')),numbers=require(a71_0x1930('0x3a')),omnic=require('../../utils/omnic'),pagination=require('../../utils/pagination');module[a71_0x1930('0x40')]=class ReferralRewardsCommand extends tesseract_1['Command']{constructor(){super('referralRewards',{'description':a71_0x1930('0xe'),'triggers':[],'arguments':{'alias':{'referrals':['n'],'page':['p']},'array':[a71_0x1930('0xb')],'boolean':['remove'],'string':[a71_0x1930('0xb')],'number':[a71_0x1930('0x42'),a71_0x1930('0x46')],'coerce':{'referrals':_0x3e56a4=>numbers[a71_0x1930('0x8')](_0x3e56a4,0x1,Number[a71_0x1930('0x38')])}},'scope':a71_0x1930('0x3e'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a71_0x1930('0x5')],'userPermissions':[],'syntax':[a71_0x1930('0x49'),'referralRewards\x20--page\x20NUMBER',a71_0x1930('0x35'),a71_0x1930('0x20')]}),this[a71_0x1930('0x12')]=async(_0x63440f,_0x187dd2)=>{if(_0x187dd2[a71_0x1930('0x42')]){if(_0x187dd2[a71_0x1930('0xb')]){if(constants[a71_0x1930('0x6')](this[a71_0x1930('0x1b')][a71_0x1930('0x3b')])){const _0x39c7b7=await omnic[a71_0x1930('0x2b')](_0x63440f[a71_0x1930('0x3e')])[a71_0x1930('0x2d')](()=>{}),_0x81d8f5=await Role_1[a71_0x1930('0x11')]['countDocuments']({'guild':_0x63440f[a71_0x1930('0x3e')]['id'],'referrals':{'$exists':!![],'$ne':null}});if(_0x39c7b7){if(_0x39c7b7===omnic[a71_0x1930('0x1e')][a71_0x1930('0x19')]&&_0x81d8f5>=constants[a71_0x1930('0x44')]['GOLD'][a71_0x1930('0x1a')])throw new errors['DiscordError'](errors[a71_0x1930('0x15')][a71_0x1930('0x34')],this[a71_0x1930('0x1b')][a71_0x1930('0x9')][a71_0x1930('0xd')](_0x63440f[a71_0x1930('0x3e')][a71_0x1930('0x0')][a71_0x1930('0x1d')],a71_0x1930('0x4'),a71_0x1930('0x39'),constants[a71_0x1930('0x44')]['GOLD']['INVITE_REWARDS']));else{if(_0x39c7b7===omnic[a71_0x1930('0x1e')]['PLATINUM']&&_0x81d8f5>=constants[a71_0x1930('0x44')][a71_0x1930('0x3f')][a71_0x1930('0x1a')])throw new errors[(a71_0x1930('0x22'))](errors['BASTION_ERROR_TYPE'][a71_0x1930('0x34')],this[a71_0x1930('0x1b')]['locale'][a71_0x1930('0xd')](_0x63440f[a71_0x1930('0x3e')]['document'][a71_0x1930('0x1d')],'errors',a71_0x1930('0x39'),constants[a71_0x1930('0x44')][a71_0x1930('0x3f')][a71_0x1930('0x1a')]));}}else{if(_0x81d8f5>=constants[a71_0x1930('0x44')][a71_0x1930('0x1a')])throw new errors[(a71_0x1930('0x22'))](errors['BASTION_ERROR_TYPE'][a71_0x1930('0x1f')],this['client'][a71_0x1930('0x9')][a71_0x1930('0xd')](_0x63440f[a71_0x1930('0x3e')][a71_0x1930('0x0')][a71_0x1930('0x1d')],a71_0x1930('0x4'),'premiumInviteRoles',constants[a71_0x1930('0x44')][a71_0x1930('0x1a')]));}}const _0x5af5fb=this[a71_0x1930('0x1b')][a71_0x1930('0x23')]['resolveRole'](_0x63440f[a71_0x1930('0x3e')],_0x187dd2[a71_0x1930('0xb')][a71_0x1930('0x25')]('\x20'));if(!_0x5af5fb)throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE']['ROLE_NOT_FOUND'],this[a71_0x1930('0x1b')]['locale'][a71_0x1930('0xd')](_0x63440f[a71_0x1930('0x3e')][a71_0x1930('0x0')]['language'],a71_0x1930('0x3'),a71_0x1930('0x43')));let _0x54e7b9=await _0x5af5fb[a71_0x1930('0x2f')]();return!_0x54e7b9&&(_0x54e7b9=await _0x5af5fb['createDocument']()),_0x54e7b9['referrals']=_0x187dd2['referrals'],await _0x54e7b9[a71_0x1930('0x27')](),await _0x63440f[a71_0x1930('0x26')][a71_0x1930('0x28')]({'embed':{'color':tesseract_1[a71_0x1930('0x32')][a71_0x1930('0x31')]['GREEN'],'description':this['client']['locale'][a71_0x1930('0xd')](_0x63440f[a71_0x1930('0x3e')][a71_0x1930('0x0')]['language'],a71_0x1930('0x45'),a71_0x1930('0x10'),_0x63440f['author']['tag'],_0x5af5fb[a71_0x1930('0x3c')],_0x187dd2['referrals'])}});}if(_0x187dd2[a71_0x1930('0x2e')])return await Role_1[a71_0x1930('0x11')]['updateMany']({'guild':_0x63440f[a71_0x1930('0x3e')]['id'],'referrals':_0x187dd2[a71_0x1930('0x42')]},{'$unset':{'referrals':0x1}}),await _0x63440f[a71_0x1930('0x26')][a71_0x1930('0x28')]({'embed':{'color':tesseract_1[a71_0x1930('0x32')]['COLORS'][a71_0x1930('0x48')],'description':this[a71_0x1930('0x1b')]['locale'][a71_0x1930('0xd')](_0x63440f[a71_0x1930('0x3e')][a71_0x1930('0x0')][a71_0x1930('0x1d')],'info',a71_0x1930('0x16'),_0x63440f['author'][a71_0x1930('0x30')],_0x187dd2[a71_0x1930('0x42')])}});}const _0x1ec554=await Role_1[a71_0x1930('0x11')]['find']({'guild':_0x63440f['guild']['id'],'referrals':{'$exists':!![],'$ne':null}});if(!_0x1ec554[a71_0x1930('0x2c')])throw new Error(a71_0x1930('0x36'));const _0x26a393={};for(const _0x58a318 of _0x1ec554){_0x58a318[a71_0x1930('0x42')]in _0x26a393?_0x26a393[_0x58a318[a71_0x1930('0x42')]][a71_0x1930('0x37')](_0x58a318['id']):_0x26a393[_0x58a318[a71_0x1930('0x42')]]=[_0x58a318['id']];}const _0x172a5b=pagination['paginate'](Object[a71_0x1930('0x21')](_0x26a393)['map'](_0x1538f0=>({'name':_0x1538f0+a71_0x1930('0x1c'),'value':_0x26a393[_0x1538f0][a71_0x1930('0x17')](_0x17013f=>_0x63440f['guild'][a71_0x1930('0x41')][a71_0x1930('0x33')][a71_0x1930('0xf')](_0x17013f)?_0x63440f[a71_0x1930('0x3e')][a71_0x1930('0x41')]['cache'][a71_0x1930('0x18')](_0x17013f)['name']:_0x17013f)[a71_0x1930('0x25')](',\x20')})),_0x187dd2[a71_0x1930('0x46')]);return await _0x63440f[a71_0x1930('0x26')][a71_0x1930('0x28')]({'embed':{'color':tesseract_1[a71_0x1930('0x32')]['COLORS'][a71_0x1930('0x14')],'title':'Referral\x20Rewards','fields':_0x172a5b['items'],'footer':{'text':a71_0x1930('0x29')+_0x172a5b[a71_0x1930('0x46')]+a71_0x1930('0x3d')+_0x172a5b[a71_0x1930('0x47')]}}});};}};
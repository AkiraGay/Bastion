const a92_0x39e40b=a92_0x1ecf;(function(_0x350e9c,_0x3c6456){const _0x4a4553=a92_0x1ecf,_0x16262d=_0x350e9c();while(!![]){try{const _0x49eb2f=parseInt(_0x4a4553(0x236))/0x1*(parseInt(_0x4a4553(0x215))/0x2)+parseInt(_0x4a4553(0x209))/0x3+-parseInt(_0x4a4553(0x201))/0x4*(parseInt(_0x4a4553(0x211))/0x5)+parseInt(_0x4a4553(0x21f))/0x6+-parseInt(_0x4a4553(0x1fc))/0x7*(-parseInt(_0x4a4553(0x20b))/0x8)+-parseInt(_0x4a4553(0x247))/0x9*(parseInt(_0x4a4553(0x212))/0xa)+-parseInt(_0x4a4553(0x217))/0xb;if(_0x49eb2f===_0x3c6456)break;else _0x16262d['push'](_0x16262d['shift']());}catch(_0xf15da8){_0x16262d['push'](_0x16262d['shift']());}}}(a92_0x14be,0x64f4f));const a92_0x57b239=(function(){let _0x2cc3fc=!![];return function(_0x5050b8,_0x13fe1d){const _0x10bc13=_0x2cc3fc?function(){const _0x1d2373=a92_0x1ecf;if(_0x13fe1d){const _0x38b612=_0x13fe1d[_0x1d2373(0x1fd)](_0x5050b8,arguments);return _0x13fe1d=null,_0x38b612;}}:function(){};return _0x2cc3fc=![],_0x10bc13;};}()),a92_0x484187=a92_0x57b239(this,function(){const _0x5a9f83=a92_0x1ecf;return a92_0x484187[_0x5a9f83(0x23f)]()['search'](_0x5a9f83(0x1f9))[_0x5a9f83(0x23f)]()[_0x5a9f83(0x23e)](a92_0x484187)['search'](_0x5a9f83(0x1f9));});function a92_0x1ecf(_0x29d46a,_0x2724de){const _0x4f7b64=a92_0x14be();return a92_0x1ecf=function(_0x484187,_0x57b239){_0x484187=_0x484187-0x1f2;let _0x14be33=_0x4f7b64[_0x484187];return _0x14be33;},a92_0x1ecf(_0x29d46a,_0x2724de);}a92_0x484187();'use strict';function a92_0x14be(){const _0xf0b494=['4126TqFgmD','fetchPremiumTier','376673TQaGLo','referrals','GOLD','author','client','PremiumTier','../../utils/numbers','exports','3820632BSqAKR','paginate','membershipLimitInviteRoles','clamp','premiumInviteRoles','referralRewards\x20-n\x20NUMBER\x20--remove','save','PLATINUM','user','Constants','document','send','createDocument','channel','errors','updateMany','pages','MAX_SAFE_INTEGER','Command','\x20of\x20','countDocuments','roleReferralsClear','BASTION_ERROR_TYPE','7jDpfsl','ROLE_NOT_FOUND','info','GREEN','../../models/Role','PREMIUM_MEMBERSHIP_REQUIRED','find','get','constructor','toString','RED','getString','../../utils/errors','Page\x20','items','LIMITED_PREMIUM_MEMBERSHIP','resolveRole','153TgnHov','resolver','LIMITS','tag','push','referralRewards\x20-n\x20NUMBER\x20--role\x20ROLE','default','role','join','(((.+)+)+)+$','guild','locale','26369SFesdF','apply','../../utils/pagination','language','roles','12168jmINMT','name','DiscordError','keys','page','IRIS','referralRewards','roleReferralsSet','350661fViqow','MANAGE_GUILD','936edrUpc','INVITE_REWARDS','remove','@bastion/tesseract','COLORS','Referral\x20Rewards','1085PdQTVD','59390XICSMj','map','exec'];a92_0x14be=function(){return _0xf0b494;};return a92_0x14be();}const tesseract_1=require(a92_0x39e40b(0x20e)),Role_1=require(a92_0x39e40b(0x23a)),constants=require('../../utils/constants'),errors=require(a92_0x39e40b(0x242)),numbers=require(a92_0x39e40b(0x21d)),omnic=require('../../utils/omnic'),pagination=require(a92_0x39e40b(0x1fe));module[a92_0x39e40b(0x21e)]=class ReferralRewardsCommand extends tesseract_1[a92_0x39e40b(0x231)]{constructor(){const _0x104bf6=a92_0x39e40b;super('referralRewards',{'description':'It\x20allows\x20you\x20set\x20roles\x20as\x20rewards\x20for\x20referrals\x20(inviting\x20other\x20users\x20to\x20the\x20server).','triggers':[],'arguments':{'alias':{'referrals':['n'],'page':['p']},'array':['role'],'boolean':[_0x104bf6(0x20d)],'string':[_0x104bf6(0x1f7)],'number':[_0x104bf6(0x218),_0x104bf6(0x205)],'coerce':{'referrals':_0x487ab3=>numbers[_0x104bf6(0x222)](_0x487ab3,0x1,Number[_0x104bf6(0x230)])}},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[_0x104bf6(0x20a)],'userPermissions':[],'syntax':[_0x104bf6(0x207),'referralRewards\x20--page\x20NUMBER',_0x104bf6(0x1f5),_0x104bf6(0x224)]});}[a92_0x39e40b(0x214)]=async(_0x1038af,_0x3dbb87)=>{const _0x26b60e=a92_0x39e40b;if(_0x3dbb87[_0x26b60e(0x218)]){if(_0x3dbb87[_0x26b60e(0x1f7)]){if(constants['isPublicBastion'](this['client'][_0x26b60e(0x227)])){const _0x31930e=await omnic[_0x26b60e(0x216)](_0x1038af['guild'])['catch'](()=>{}),_0x5be315=await Role_1[_0x26b60e(0x1f6)][_0x26b60e(0x233)]({'guild':_0x1038af[_0x26b60e(0x1fa)]['id'],'referrals':{'$exists':!![],'$ne':null}});if(_0x31930e){if(_0x31930e===omnic[_0x26b60e(0x21c)][_0x26b60e(0x219)]&&_0x5be315>=constants[_0x26b60e(0x1f2)]['GOLD']['INVITE_REWARDS'])throw new errors[(_0x26b60e(0x203))](errors[_0x26b60e(0x235)][_0x26b60e(0x245)],this['client'][_0x26b60e(0x1fb)][_0x26b60e(0x241)](_0x1038af[_0x26b60e(0x1fa)][_0x26b60e(0x229)]['language'],_0x26b60e(0x22d),'membershipLimitInviteRoles',constants['LIMITS'][_0x26b60e(0x219)][_0x26b60e(0x20c)]));else{if(_0x31930e===omnic[_0x26b60e(0x21c)][_0x26b60e(0x226)]&&_0x5be315>=constants[_0x26b60e(0x1f2)][_0x26b60e(0x226)][_0x26b60e(0x20c)])throw new errors[(_0x26b60e(0x203))](errors['BASTION_ERROR_TYPE'][_0x26b60e(0x245)],this['client'][_0x26b60e(0x1fb)]['getString'](_0x1038af[_0x26b60e(0x1fa)][_0x26b60e(0x229)]['language'],_0x26b60e(0x22d),_0x26b60e(0x221),constants[_0x26b60e(0x1f2)][_0x26b60e(0x226)][_0x26b60e(0x20c)]));}}else{if(_0x5be315>=constants[_0x26b60e(0x1f2)]['INVITE_REWARDS'])throw new errors[(_0x26b60e(0x203))](errors[_0x26b60e(0x235)][_0x26b60e(0x23b)],this['client'][_0x26b60e(0x1fb)][_0x26b60e(0x241)](_0x1038af[_0x26b60e(0x1fa)][_0x26b60e(0x229)]['language'],'errors',_0x26b60e(0x223),constants[_0x26b60e(0x1f2)][_0x26b60e(0x20c)]));}}const _0x5dcc47=this[_0x26b60e(0x21b)][_0x26b60e(0x248)][_0x26b60e(0x246)](_0x1038af[_0x26b60e(0x1fa)],_0x3dbb87['role'][_0x26b60e(0x1f8)]('\x20'));if(!_0x5dcc47)throw new errors[(_0x26b60e(0x203))](errors[_0x26b60e(0x235)][_0x26b60e(0x237)],this[_0x26b60e(0x21b)][_0x26b60e(0x1fb)][_0x26b60e(0x241)](_0x1038af[_0x26b60e(0x1fa)][_0x26b60e(0x229)][_0x26b60e(0x1ff)],_0x26b60e(0x22d),'roleNotFound'));let _0x532f30=await _0x5dcc47['fetchDocument']();return!_0x532f30&&(_0x532f30=await _0x5dcc47[_0x26b60e(0x22b)]()),_0x532f30[_0x26b60e(0x218)]=_0x3dbb87[_0x26b60e(0x218)],await _0x532f30[_0x26b60e(0x225)](),await _0x1038af[_0x26b60e(0x22c)][_0x26b60e(0x22a)]({'embed':{'color':tesseract_1[_0x26b60e(0x228)][_0x26b60e(0x20f)][_0x26b60e(0x239)],'description':this['client'][_0x26b60e(0x1fb)][_0x26b60e(0x241)](_0x1038af['guild'][_0x26b60e(0x229)][_0x26b60e(0x1ff)],_0x26b60e(0x238),_0x26b60e(0x208),_0x1038af['author'][_0x26b60e(0x1f3)],_0x5dcc47[_0x26b60e(0x202)],_0x3dbb87[_0x26b60e(0x218)])}});}if(_0x3dbb87[_0x26b60e(0x20d)])return await Role_1['default'][_0x26b60e(0x22e)]({'guild':_0x1038af[_0x26b60e(0x1fa)]['id'],'referrals':_0x3dbb87[_0x26b60e(0x218)]},{'$unset':{'referrals':0x1}}),await _0x1038af[_0x26b60e(0x22c)][_0x26b60e(0x22a)]({'embed':{'color':tesseract_1[_0x26b60e(0x228)][_0x26b60e(0x20f)][_0x26b60e(0x240)],'description':this['client'][_0x26b60e(0x1fb)][_0x26b60e(0x241)](_0x1038af[_0x26b60e(0x1fa)][_0x26b60e(0x229)][_0x26b60e(0x1ff)],'info',_0x26b60e(0x234),_0x1038af[_0x26b60e(0x21a)][_0x26b60e(0x1f3)],_0x3dbb87[_0x26b60e(0x218)])}});}const _0x1c6dd6=await Role_1[_0x26b60e(0x1f6)][_0x26b60e(0x23c)]({'guild':_0x1038af[_0x26b60e(0x1fa)]['id'],'referrals':{'$exists':!![],'$ne':null}});if(!_0x1c6dd6['length'])throw new Error('NO_REFERRAL_REWARDS');const _0x51ee78={};for(const _0x26bad6 of _0x1c6dd6){_0x26bad6[_0x26b60e(0x218)]in _0x51ee78?_0x51ee78[_0x26bad6[_0x26b60e(0x218)]][_0x26b60e(0x1f4)](_0x26bad6['id']):_0x51ee78[_0x26bad6[_0x26b60e(0x218)]]=[_0x26bad6['id']];}const _0x48cd7d=pagination[_0x26b60e(0x220)](Object[_0x26b60e(0x204)](_0x51ee78)[_0x26b60e(0x213)](_0x46bed1=>({'name':_0x46bed1+'\x20Referrals','value':_0x51ee78[_0x46bed1][_0x26b60e(0x213)](_0x1c989c=>_0x1038af[_0x26b60e(0x1fa)][_0x26b60e(0x200)]['cache']['has'](_0x1c989c)?_0x1038af[_0x26b60e(0x1fa)]['roles']['cache'][_0x26b60e(0x23d)](_0x1c989c)[_0x26b60e(0x202)]:_0x1c989c)[_0x26b60e(0x1f8)](',\x20')})),_0x3dbb87[_0x26b60e(0x205)]);return await _0x1038af['channel'][_0x26b60e(0x22a)]({'embed':{'color':tesseract_1[_0x26b60e(0x228)]['COLORS'][_0x26b60e(0x206)],'title':_0x26b60e(0x210),'fields':_0x48cd7d[_0x26b60e(0x244)],'footer':{'text':_0x26b60e(0x243)+_0x48cd7d['page']+_0x26b60e(0x232)+_0x48cd7d[_0x26b60e(0x22f)]}}});};};
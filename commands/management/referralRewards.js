const a75_0x4c0c=['author','fetchPremiumTier','Referral\x20Rewards','tag','premiumInviteRoles','resolver','remove','channel','MAX_SAFE_INTEGER','info','../../models/Role','roleReferralsSet','catch','createDocument','membershipLimitInviteRoles','INVITE_REWARDS','RED','PremiumTier','join','apply','GOLD','errors','send','paginate','name','referralRewards\x20--page\x20NUMBER','resolveRole','BASTION_ERROR_TYPE','IRIS','@bastion/tesseract','PREMIUM_MEMBERSHIP_REQUIRED','DiscordError','map','client','GREEN','../../utils/constants','Page\x20','items','document','Constants','ROLE_NOT_FOUND','roles','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','NO_REFERRAL_REWARDS','referrals','updateMany','role','test','Command','length','fetchDocument','getString','save','guild','constructor','PLATINUM','\x20Referrals','countDocuments','locale','default','COLORS','pages','../../utils/numbers','language','../../utils/omnic','cache','referralRewards','MANAGE_GUILD','keys','../../utils/pagination','page','LIMITED_PREMIUM_MEMBERSHIP','LIMITS'];(function(_0x5e590d,_0x4c0ca7){const _0x449b7b=function(_0x58a6e3){while(--_0x58a6e3){_0x5e590d['push'](_0x5e590d['shift']());}},_0x3c6faa=function(){const _0x561677={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x1e1fd2,_0x291b26,_0xa4f1ab,_0xbbdeb6){_0xbbdeb6=_0xbbdeb6||{};let _0x4b75b7=_0x291b26+'='+_0xa4f1ab,_0x516f46=0x0;for(let _0x1f820f=0x0,_0x27a6ea=_0x1e1fd2['length'];_0x1f820f<_0x27a6ea;_0x1f820f++){const _0x4a1628=_0x1e1fd2[_0x1f820f];_0x4b75b7+=';\x20'+_0x4a1628;const _0xdb09ee=_0x1e1fd2[_0x4a1628];_0x1e1fd2['push'](_0xdb09ee),_0x27a6ea=_0x1e1fd2['length'],_0xdb09ee!==!![]&&(_0x4b75b7+='='+_0xdb09ee);}_0xbbdeb6['cookie']=_0x4b75b7;},'removeCookie':function(){return'dev';},'getCookie':function(_0x261cc5,_0x3ebfae){_0x261cc5=_0x261cc5||function(_0x4c6b26){return _0x4c6b26;};const _0x14de37=_0x261cc5(new RegExp('(?:^|;\x20)'+_0x3ebfae['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0xa75f23=function(_0x575ed2,_0x455aee){_0x575ed2(++_0x455aee);};return _0xa75f23(_0x449b7b,_0x4c0ca7),_0x14de37?decodeURIComponent(_0x14de37[0x1]):undefined;}},_0x5e7290=function(){const _0x2d7272=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x2d7272['test'](_0x561677['removeCookie']['toString']());};_0x561677['updateCookie']=_0x5e7290;let _0x2964fa='';const _0x54f01b=_0x561677['updateCookie']();if(!_0x54f01b)_0x561677['setCookie'](['*'],'counter',0x1);else _0x54f01b?_0x2964fa=_0x561677['getCookie'](null,'counter'):_0x561677['removeCookie']();};_0x3c6faa();}(a75_0x4c0c,0x1e4));const a75_0x449b=function(_0x5e590d,_0x4c0ca7){_0x5e590d=_0x5e590d-0x0;let _0x449b7b=a75_0x4c0c[_0x5e590d];return _0x449b7b;};const _0x34caf3=a75_0x449b,a75_0x561677=function(){let _0x2964fa=!![];return function(_0x54f01b,_0x1e1fd2){const _0x291b26=_0x2964fa?function(){const _0x25b62e=a75_0x449b;if(_0x1e1fd2){const _0xa4f1ab=_0x1e1fd2[_0x25b62e('0x2e')](_0x54f01b,arguments);return _0x1e1fd2=null,_0xa4f1ab;}}:function(){};return _0x2964fa=![],_0x291b26;};}(),a75_0x58a6e3=a75_0x561677(this,function(){const _0xbbdeb6=function(){const _0xce4cb=a75_0x449b,_0x4b75b7=_0xbbdeb6[_0xce4cb('0x8')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[_0xce4cb('0x8')](_0xce4cb('0x45'));return!_0x4b75b7[_0xce4cb('0x1')](a75_0x58a6e3);};return _0xbbdeb6();});a75_0x58a6e3();'use strict';const tesseract_1=require(_0x34caf3('0x38')),Role_1=require(_0x34caf3('0x25')),constants=require(_0x34caf3('0x3e')),errors=require('../../utils/errors'),numbers=require(_0x34caf3('0x10')),omnic=require(_0x34caf3('0x12')),pagination=require(_0x34caf3('0x17'));module['exports']=class ReferralRewardsCommand extends tesseract_1[_0x34caf3('0x2')]{constructor(){const _0x21c411=_0x34caf3;super('referralRewards',{'description':'It\x20allows\x20you\x20set\x20roles\x20as\x20rewards\x20for\x20referrals\x20(inviting\x20other\x20users\x20to\x20the\x20server).','triggers':[],'arguments':{'alias':{'referrals':['n'],'page':['p']},'array':['role'],'boolean':[_0x21c411('0x21')],'string':[_0x21c411('0x0')],'number':['referrals',_0x21c411('0x18')],'coerce':{'referrals':_0x516f46=>numbers['clamp'](_0x516f46,0x1,Number[_0x21c411('0x23')])}},'scope':_0x21c411('0x7'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[_0x21c411('0x15')],'userPermissions':[],'syntax':[_0x21c411('0x14'),_0x21c411('0x34'),'referralRewards\x20-n\x20NUMBER\x20--role\x20ROLE','referralRewards\x20-n\x20NUMBER\x20--remove']}),this['exec']=async(_0x1f820f,_0x27a6ea)=>{const _0x2ab02d=_0x21c411;if(_0x27a6ea[_0x2ab02d('0x47')]){if(_0x27a6ea['role']){if(constants['isPublicBastion'](this[_0x2ab02d('0x3c')]['user'])){const _0xa75f23=await omnic[_0x2ab02d('0x1c')](_0x1f820f[_0x2ab02d('0x7')])[_0x2ab02d('0x27')](()=>{}),_0x4c6b26=await Role_1[_0x2ab02d('0xd')][_0x2ab02d('0xb')]({'guild':_0x1f820f[_0x2ab02d('0x7')]['id'],'referrals':{'$exists':!![],'$ne':null}});if(_0xa75f23){if(_0xa75f23===omnic[_0x2ab02d('0x2c')][_0x2ab02d('0x2f')]&&_0x4c6b26>=constants['LIMITS'][_0x2ab02d('0x2f')][_0x2ab02d('0x2a')])throw new errors[(_0x2ab02d('0x3a'))](errors['BASTION_ERROR_TYPE'][_0x2ab02d('0x19')],this[_0x2ab02d('0x3c')]['locale'][_0x2ab02d('0x5')](_0x1f820f[_0x2ab02d('0x7')][_0x2ab02d('0x41')][_0x2ab02d('0x11')],_0x2ab02d('0x30'),_0x2ab02d('0x29'),constants['LIMITS'][_0x2ab02d('0x2f')][_0x2ab02d('0x2a')]));else{if(_0xa75f23===omnic['PremiumTier'][_0x2ab02d('0x9')]&&_0x4c6b26>=constants['LIMITS'][_0x2ab02d('0x9')][_0x2ab02d('0x2a')])throw new errors[(_0x2ab02d('0x3a'))](errors['BASTION_ERROR_TYPE']['LIMITED_PREMIUM_MEMBERSHIP'],this['client'][_0x2ab02d('0xc')]['getString'](_0x1f820f[_0x2ab02d('0x7')]['document'][_0x2ab02d('0x11')],_0x2ab02d('0x30'),_0x2ab02d('0x29'),constants[_0x2ab02d('0x1a')]['PLATINUM'][_0x2ab02d('0x2a')]));}}else{if(_0x4c6b26>=constants[_0x2ab02d('0x1a')]['INVITE_REWARDS'])throw new errors[(_0x2ab02d('0x3a'))](errors[_0x2ab02d('0x36')][_0x2ab02d('0x39')],this[_0x2ab02d('0x3c')][_0x2ab02d('0xc')][_0x2ab02d('0x5')](_0x1f820f['guild'][_0x2ab02d('0x41')][_0x2ab02d('0x11')],_0x2ab02d('0x30'),_0x2ab02d('0x1f'),constants['LIMITS']['INVITE_REWARDS']));}}const _0x3ebfae=this[_0x2ab02d('0x3c')][_0x2ab02d('0x20')][_0x2ab02d('0x35')](_0x1f820f[_0x2ab02d('0x7')],_0x27a6ea['role'][_0x2ab02d('0x2d')]('\x20'));if(!_0x3ebfae)throw new errors[(_0x2ab02d('0x3a'))](errors[_0x2ab02d('0x36')][_0x2ab02d('0x43')],this[_0x2ab02d('0x3c')][_0x2ab02d('0xc')][_0x2ab02d('0x5')](_0x1f820f['guild'][_0x2ab02d('0x41')][_0x2ab02d('0x11')],_0x2ab02d('0x30'),'roleNotFound'));let _0x14de37=await _0x3ebfae[_0x2ab02d('0x4')]();return!_0x14de37&&(_0x14de37=await _0x3ebfae[_0x2ab02d('0x28')]()),_0x14de37[_0x2ab02d('0x47')]=_0x27a6ea[_0x2ab02d('0x47')],await _0x14de37[_0x2ab02d('0x6')](),await _0x1f820f[_0x2ab02d('0x22')][_0x2ab02d('0x31')]({'embed':{'color':tesseract_1[_0x2ab02d('0x42')][_0x2ab02d('0xe')][_0x2ab02d('0x3d')],'description':this['client'][_0x2ab02d('0xc')][_0x2ab02d('0x5')](_0x1f820f[_0x2ab02d('0x7')][_0x2ab02d('0x41')]['language'],'info',_0x2ab02d('0x26'),_0x1f820f['author'][_0x2ab02d('0x1e')],_0x3ebfae[_0x2ab02d('0x33')],_0x27a6ea['referrals'])}});}if(_0x27a6ea[_0x2ab02d('0x21')])return await Role_1['default'][_0x2ab02d('0x48')]({'guild':_0x1f820f[_0x2ab02d('0x7')]['id'],'referrals':_0x27a6ea[_0x2ab02d('0x47')]},{'$unset':{'referrals':0x1}}),await _0x1f820f[_0x2ab02d('0x22')]['send']({'embed':{'color':tesseract_1[_0x2ab02d('0x42')][_0x2ab02d('0xe')][_0x2ab02d('0x2b')],'description':this[_0x2ab02d('0x3c')][_0x2ab02d('0xc')]['getString'](_0x1f820f[_0x2ab02d('0x7')][_0x2ab02d('0x41')]['language'],_0x2ab02d('0x24'),'roleReferralsClear',_0x1f820f[_0x2ab02d('0x1b')]['tag'],_0x27a6ea['referrals'])}});}const _0x4a1628=await Role_1[_0x2ab02d('0xd')]['find']({'guild':_0x1f820f[_0x2ab02d('0x7')]['id'],'referrals':{'$exists':!![],'$ne':null}});if(!_0x4a1628[_0x2ab02d('0x3')])throw new Error(_0x2ab02d('0x46'));const _0xdb09ee={};for(const _0x575ed2 of _0x4a1628){_0x575ed2[_0x2ab02d('0x47')]in _0xdb09ee?_0xdb09ee[_0x575ed2['referrals']]['push'](_0x575ed2['id']):_0xdb09ee[_0x575ed2['referrals']]=[_0x575ed2['id']];}const _0x261cc5=pagination[_0x2ab02d('0x32')](Object[_0x2ab02d('0x16')](_0xdb09ee)['map'](_0x455aee=>({'name':_0x455aee+_0x2ab02d('0xa'),'value':_0xdb09ee[_0x455aee][_0x2ab02d('0x3b')](_0x2d7272=>_0x1f820f['guild'][_0x2ab02d('0x44')][_0x2ab02d('0x13')]['has'](_0x2d7272)?_0x1f820f[_0x2ab02d('0x7')][_0x2ab02d('0x44')]['cache']['get'](_0x2d7272)[_0x2ab02d('0x33')]:_0x2d7272)[_0x2ab02d('0x2d')](',\x20')})),_0x27a6ea['page']);return await _0x1f820f[_0x2ab02d('0x22')]['send']({'embed':{'color':tesseract_1[_0x2ab02d('0x42')][_0x2ab02d('0xe')][_0x2ab02d('0x37')],'title':_0x2ab02d('0x1d'),'fields':_0x261cc5[_0x2ab02d('0x40')],'footer':{'text':_0x2ab02d('0x3f')+_0x261cc5['page']+'\x20of\x20'+_0x261cc5[_0x2ab02d('0xf')]}}});};}};
const a92_0x544d=['GOLD','exec','premiumInviteRoles','page','DiscordError','locale','Referral\x20Rewards','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','remove','createDocument','resolveRole','client','keys','default','referralRewards\x20-n\x20NUMBER\x20--remove','push','join','countDocuments','INVITE_REWARDS','fetchDocument','isPublicBastion','membershipLimitInviteRoles','ROLE_NOT_FOUND','LIMITED_PREMIUM_MEMBERSHIP','PremiumTier','send','referralRewards','BASTION_ERROR_TYPE','save','has','PREMIUM_MEMBERSHIP_REQUIRED','author','referralRewards\x20--page\x20NUMBER','../../utils/constants','Constants','name','IRIS','map','It\x20allows\x20you\x20set\x20roles\x20as\x20rewards\x20for\x20referrals\x20(inviting\x20other\x20users\x20to\x20the\x20server).','../../utils/numbers','../../utils/errors','roleReferralsClear','tag','constructor','info','Page\x20','\x20of\x20','../../models/Role','roleNotFound','language','referralRewards\x20-n\x20NUMBER\x20--role\x20ROLE','LIMITS','items','guild','role','NO_REFERRAL_REWARDS','../../utils/omnic','GREEN','\x20Referrals','user','COLORS','channel','getString','../../utils/pagination','fetchPremiumTier','catch','roles','PLATINUM','apply','document','referrals','length','pages','errors','resolver'];(function(_0xd8b539,_0x57459a){const _0x544d80=function(_0x32fe27){while(--_0x32fe27){_0xd8b539['push'](_0xd8b539['shift']());}},_0xdc3b5c=function(){const _0xb928d9={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3280cd,_0x350118,_0xecb02c,_0x34020b){_0x34020b=_0x34020b||{};let _0x5783b8=_0x350118+'='+_0xecb02c,_0x5e7eed=0x0;for(let _0x5cc453=0x0,_0x3b5cb4=_0x3280cd['length'];_0x5cc453<_0x3b5cb4;_0x5cc453++){const _0x25d971=_0x3280cd[_0x5cc453];_0x5783b8+=';\x20'+_0x25d971;const _0x502e82=_0x3280cd[_0x25d971];_0x3280cd['push'](_0x502e82),_0x3b5cb4=_0x3280cd['length'],_0x502e82!==!![]&&(_0x5783b8+='='+_0x502e82);}_0x34020b['cookie']=_0x5783b8;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2862fb,_0xe73a53){_0x2862fb=_0x2862fb||function(_0x564470){return _0x564470;};const _0x12f46a=_0x2862fb(new RegExp('(?:^|;\x20)'+_0xe73a53['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x5b561d=function(_0x35be20,_0x176e04){_0x35be20(++_0x176e04);};return _0x5b561d(_0x544d80,_0x57459a),_0x12f46a?decodeURIComponent(_0x12f46a[0x1]):undefined;}},_0x2580b8=function(){const _0x181b40=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x181b40['test'](_0xb928d9['removeCookie']['toString']());};_0xb928d9['updateCookie']=_0x2580b8;let _0x2865b4='';const _0x1810fa=_0xb928d9['updateCookie']();if(!_0x1810fa)_0xb928d9['setCookie'](['*'],'counter',0x1);else _0x1810fa?_0x2865b4=_0xb928d9['getCookie'](null,'counter'):_0xb928d9['removeCookie']();};_0xdc3b5c();}(a92_0x544d,0xff));const a92_0xdc3b=function(_0xd8b539,_0x57459a){_0xd8b539=_0xd8b539-0x9b;let _0x544d80=a92_0x544d[_0xd8b539];return _0x544d80;};const a92_0x58aca9=a92_0xdc3b,a92_0x2580b8=function(){let _0x1810fa=!![];return function(_0x3280cd,_0x350118){const _0xecb02c=_0x1810fa?function(){const _0x428f44=a92_0xdc3b;if(_0x350118){const _0x34020b=_0x350118[_0x428f44(0xc1)](_0x3280cd,arguments);return _0x350118=null,_0x34020b;}}:function(){};return _0x1810fa=![],_0xecb02c;};}(),a92_0xb928d9=a92_0x2580b8(this,function(){const _0x5783b8=function(){const _0x5ab7a1=a92_0xdc3b,_0x5e7eed=_0x5783b8[_0x5ab7a1(0xa8)]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[_0x5ab7a1(0xa8)](_0x5ab7a1(0xcf));return!_0x5e7eed['test'](a92_0xb928d9);};return _0x5783b8();});a92_0xb928d9();'use strict';const tesseract_1=require('@bastion/tesseract'),Role_1=require(a92_0x58aca9(0xac)),constants=require(a92_0x58aca9(0x9e)),errors=require(a92_0x58aca9(0xa5)),numbers=require(a92_0x58aca9(0xa4)),omnic=require(a92_0x58aca9(0xb5)),pagination=require(a92_0x58aca9(0xbc));module['exports']=class ReferralRewardsCommand extends tesseract_1['Command']{constructor(){const _0x33f13e=a92_0x58aca9;super(_0x33f13e(0xe2),{'description':_0x33f13e(0xa3),'triggers':[],'arguments':{'alias':{'referrals':['n'],'page':['p']},'array':[_0x33f13e(0xb3)],'boolean':['remove'],'string':[_0x33f13e(0xb3)],'number':[_0x33f13e(0xc3),_0x33f13e(0xcb)],'coerce':{'referrals':_0x5cc453=>numbers['clamp'](_0x5cc453,0x1,Number['MAX_SAFE_INTEGER'])}},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':['MANAGE_GUILD'],'userPermissions':[],'syntax':['referralRewards',_0x33f13e(0x9d),_0x33f13e(0xaf),_0x33f13e(0xd6)]}),this[_0x33f13e(0xc9)]=async(_0x3b5cb4,_0x25d971)=>{const _0x4fcb81=_0x33f13e;if(_0x25d971[_0x4fcb81(0xc3)]){if(_0x25d971[_0x4fcb81(0xb3)]){if(constants[_0x4fcb81(0xdc)](this[_0x4fcb81(0xd3)][_0x4fcb81(0xb8)])){const _0x564470=await omnic[_0x4fcb81(0xbd)](_0x3b5cb4['guild'])[_0x4fcb81(0xbe)](()=>{}),_0x35be20=await Role_1[_0x4fcb81(0xd5)][_0x4fcb81(0xd9)]({'guild':_0x3b5cb4['guild']['id'],'referrals':{'$exists':!![],'$ne':null}});if(_0x564470){if(_0x564470===omnic[_0x4fcb81(0xe0)][_0x4fcb81(0xc8)]&&_0x35be20>=constants['LIMITS'][_0x4fcb81(0xc8)][_0x4fcb81(0xda)])throw new errors[(_0x4fcb81(0xcc))](errors[_0x4fcb81(0xe3)][_0x4fcb81(0xdf)],this[_0x4fcb81(0xd3)][_0x4fcb81(0xcd)]['getString'](_0x3b5cb4[_0x4fcb81(0xb2)]['document'][_0x4fcb81(0xae)],'errors',_0x4fcb81(0xdd),constants['LIMITS']['GOLD'][_0x4fcb81(0xda)]));else{if(_0x564470===omnic[_0x4fcb81(0xe0)]['PLATINUM']&&_0x35be20>=constants['LIMITS'][_0x4fcb81(0xc0)][_0x4fcb81(0xda)])throw new errors[(_0x4fcb81(0xcc))](errors['BASTION_ERROR_TYPE'][_0x4fcb81(0xdf)],this[_0x4fcb81(0xd3)][_0x4fcb81(0xcd)]['getString'](_0x3b5cb4['guild'][_0x4fcb81(0xc2)]['language'],_0x4fcb81(0xc6),'membershipLimitInviteRoles',constants[_0x4fcb81(0xb0)][_0x4fcb81(0xc0)][_0x4fcb81(0xda)]));}}else{if(_0x35be20>=constants[_0x4fcb81(0xb0)][_0x4fcb81(0xda)])throw new errors['DiscordError'](errors[_0x4fcb81(0xe3)][_0x4fcb81(0x9b)],this['client'][_0x4fcb81(0xcd)][_0x4fcb81(0xbb)](_0x3b5cb4[_0x4fcb81(0xb2)][_0x4fcb81(0xc2)][_0x4fcb81(0xae)],'errors',_0x4fcb81(0xca),constants[_0x4fcb81(0xb0)][_0x4fcb81(0xda)]));}}const _0x12f46a=this[_0x4fcb81(0xd3)][_0x4fcb81(0xc7)][_0x4fcb81(0xd2)](_0x3b5cb4[_0x4fcb81(0xb2)],_0x25d971[_0x4fcb81(0xb3)][_0x4fcb81(0xd8)]('\x20'));if(!_0x12f46a)throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][_0x4fcb81(0xde)],this[_0x4fcb81(0xd3)][_0x4fcb81(0xcd)][_0x4fcb81(0xbb)](_0x3b5cb4[_0x4fcb81(0xb2)][_0x4fcb81(0xc2)]['language'],_0x4fcb81(0xc6),_0x4fcb81(0xad)));let _0x5b561d=await _0x12f46a[_0x4fcb81(0xdb)]();return!_0x5b561d&&(_0x5b561d=await _0x12f46a[_0x4fcb81(0xd1)]()),_0x5b561d[_0x4fcb81(0xc3)]=_0x25d971[_0x4fcb81(0xc3)],await _0x5b561d[_0x4fcb81(0xe4)](),await _0x3b5cb4['channel'][_0x4fcb81(0xe1)]({'embed':{'color':tesseract_1['Constants'][_0x4fcb81(0xb9)][_0x4fcb81(0xb6)],'description':this['client'][_0x4fcb81(0xcd)][_0x4fcb81(0xbb)](_0x3b5cb4['guild'][_0x4fcb81(0xc2)][_0x4fcb81(0xae)],'info','roleReferralsSet',_0x3b5cb4[_0x4fcb81(0x9c)][_0x4fcb81(0xa7)],_0x12f46a[_0x4fcb81(0xa0)],_0x25d971[_0x4fcb81(0xc3)])}});}if(_0x25d971[_0x4fcb81(0xd0)])return await Role_1['default']['updateMany']({'guild':_0x3b5cb4[_0x4fcb81(0xb2)]['id'],'referrals':_0x25d971[_0x4fcb81(0xc3)]},{'$unset':{'referrals':0x1}}),await _0x3b5cb4[_0x4fcb81(0xba)][_0x4fcb81(0xe1)]({'embed':{'color':tesseract_1[_0x4fcb81(0x9f)][_0x4fcb81(0xb9)]['RED'],'description':this[_0x4fcb81(0xd3)][_0x4fcb81(0xcd)]['getString'](_0x3b5cb4[_0x4fcb81(0xb2)]['document']['language'],_0x4fcb81(0xa9),_0x4fcb81(0xa6),_0x3b5cb4[_0x4fcb81(0x9c)]['tag'],_0x25d971[_0x4fcb81(0xc3)])}});}const _0x502e82=await Role_1[_0x4fcb81(0xd5)]['find']({'guild':_0x3b5cb4[_0x4fcb81(0xb2)]['id'],'referrals':{'$exists':!![],'$ne':null}});if(!_0x502e82[_0x4fcb81(0xc4)])throw new Error(_0x4fcb81(0xb4));const _0x2862fb={};for(const _0x176e04 of _0x502e82){_0x176e04['referrals']in _0x2862fb?_0x2862fb[_0x176e04[_0x4fcb81(0xc3)]][_0x4fcb81(0xd7)](_0x176e04['id']):_0x2862fb[_0x176e04[_0x4fcb81(0xc3)]]=[_0x176e04['id']];}const _0xe73a53=pagination['paginate'](Object[_0x4fcb81(0xd4)](_0x2862fb)[_0x4fcb81(0xa2)](_0x181b40=>({'name':_0x181b40+_0x4fcb81(0xb7),'value':_0x2862fb[_0x181b40][_0x4fcb81(0xa2)](_0x3c6820=>_0x3b5cb4['guild'][_0x4fcb81(0xbf)]['cache'][_0x4fcb81(0xe5)](_0x3c6820)?_0x3b5cb4[_0x4fcb81(0xb2)][_0x4fcb81(0xbf)]['cache']['get'](_0x3c6820)['name']:_0x3c6820)[_0x4fcb81(0xd8)](',\x20')})),_0x25d971['page']);return await _0x3b5cb4[_0x4fcb81(0xba)][_0x4fcb81(0xe1)]({'embed':{'color':tesseract_1[_0x4fcb81(0x9f)][_0x4fcb81(0xb9)][_0x4fcb81(0xa1)],'title':_0x4fcb81(0xce),'fields':_0xe73a53[_0x4fcb81(0xb1)],'footer':{'text':_0x4fcb81(0xaa)+_0xe73a53[_0x4fcb81(0xcb)]+_0x4fcb81(0xab)+_0xe73a53[_0x4fcb81(0xc5)]}}});};}};
const a76_0x3eb5=['document','send','client','guild','\x20Referrals','../../utils/pagination','get','referralRewards\x20--page\x20NUMBER','roleReferralsSet','catch','exports','GOLD','../../utils/constants','apply','PremiumTier','referralRewards\x20-n\x20NUMBER\x20--role\x20ROLE','has','cache','isPublicBastion','user','error','author','membershipLimitInviteRoles','BASTION_ERROR_TYPE','Referral\x20Rewards','roleNotFound','@bastion/tesseract','info','locale','../../utils/errors','tag','paginate','It\x20allows\x20you\x20set\x20roles\x20as\x20rewards\x20for\x20referrals\x20(inviting\x20other\x20users\x20to\x20the\x20server).','../../utils/numbers','DiscordError','getString','referralRewards\x20-n\x20NUMBER\x20--remove','errors','name','LIMITED_PREMIUM_MEMBERSHIP','find','ROLE_NOT_FOUND','COLORS','MAX_SAFE_INTEGER','pages','referralRewards','PLATINUM','fetchDocument','resolveRole','channel','Page\x20','save','premiumInviteRoles','test','map','RED','countDocuments','INVITE_REWARDS','constructor','exec','NO_REFERRAL_REWARDS','join','default','role','Constants','language','../../models/Role','createDocument','page','PREMIUM_MEMBERSHIP_REQUIRED','Command','roles','referrals','../../utils/omnic','items','LIMITS'];(function(_0x9ebfce,_0x3eb5f3){const _0x5eac60=function(_0x595b52){while(--_0x595b52){_0x9ebfce['push'](_0x9ebfce['shift']());}},_0x5526aa=function(){const _0x31a759={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0xcfc62c,_0x20698a,_0x5b293a,_0x4e6e01){_0x4e6e01=_0x4e6e01||{};let _0x1c370e=_0x20698a+'='+_0x5b293a,_0x215584=0x0;for(let _0x2c0300=0x0,_0x2e688e=_0xcfc62c['length'];_0x2c0300<_0x2e688e;_0x2c0300++){const _0x50ffa6=_0xcfc62c[_0x2c0300];_0x1c370e+=';\x20'+_0x50ffa6;const _0x13f670=_0xcfc62c[_0x50ffa6];_0xcfc62c['push'](_0x13f670),_0x2e688e=_0xcfc62c['length'],_0x13f670!==!![]&&(_0x1c370e+='='+_0x13f670);}_0x4e6e01['cookie']=_0x1c370e;},'removeCookie':function(){return'dev';},'getCookie':function(_0xa5a24,_0x3cd546){_0xa5a24=_0xa5a24||function(_0x4187b5){return _0x4187b5;};const _0xfef851=_0xa5a24(new RegExp('(?:^|;\x20)'+_0x3cd546['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x5c6748=function(_0x31ef21,_0x49a2fe){_0x31ef21(++_0x49a2fe);};return _0x5c6748(_0x5eac60,_0x3eb5f3),_0xfef851?decodeURIComponent(_0xfef851[0x1]):undefined;}},_0x145ac9=function(){const _0x31dc4a=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x31dc4a['test'](_0x31a759['removeCookie']['toString']());};_0x31a759['updateCookie']=_0x145ac9;let _0x42f88f='';const _0x44ed37=_0x31a759['updateCookie']();if(!_0x44ed37)_0x31a759['setCookie'](['*'],'counter',0x1);else _0x44ed37?_0x42f88f=_0x31a759['getCookie'](null,'counter'):_0x31a759['removeCookie']();};_0x5526aa();}(a76_0x3eb5,0x135));const a76_0x5eac=function(_0x9ebfce,_0x3eb5f3){_0x9ebfce=_0x9ebfce-0x0;let _0x5eac60=a76_0x3eb5[_0x9ebfce];return _0x5eac60;};const _0x4a57a2=a76_0x5eac,a76_0x31a759=function(){let _0x42f88f=!![];return function(_0x44ed37,_0xcfc62c){const _0x20698a=_0x42f88f?function(){const _0x1f510b=a76_0x5eac;if(_0xcfc62c){const _0x5b293a=_0xcfc62c[_0x1f510b('0x8')](_0x44ed37,arguments);return _0xcfc62c=null,_0x5b293a;}}:function(){};return _0x42f88f=![],_0x20698a;};}(),a76_0x595b52=a76_0x31a759(this,function(){const _0x4e6e01=function(){const _0x287165=a76_0x5eac,_0x1c370e=_0x4e6e01[_0x287165('0x35')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[_0x287165('0x35')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x1c370e[_0x287165('0x30')](a76_0x595b52);};return _0x4e6e01();});a76_0x595b52();'use strict';const tesseract_1=require(_0x4a57a2('0x15')),Role_1=require(_0x4a57a2('0x3d')),constants=require(_0x4a57a2('0x7')),errors=require(_0x4a57a2('0x18')),numbers=require(_0x4a57a2('0x1c')),omnic=require(_0x4a57a2('0x44')),pagination=require(_0x4a57a2('0x0'));module[_0x4a57a2('0x5')]=class ReferralRewardsCommand extends tesseract_1[_0x4a57a2('0x41')]{constructor(){const _0x3875c0=_0x4a57a2;super('referralRewards',{'description':_0x3875c0('0x1b'),'triggers':[],'arguments':{'alias':{'referrals':['n'],'page':['p']},'array':['role'],'boolean':['remove'],'string':[_0x3875c0('0x3a')],'number':[_0x3875c0('0x43'),_0x3875c0('0x3f')],'coerce':{'referrals':_0x215584=>numbers['clamp'](_0x215584,0x1,Number[_0x3875c0('0x26')])}},'scope':_0x3875c0('0x4a'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':['MANAGE_GUILD'],'userPermissions':[],'syntax':[_0x3875c0('0x28'),_0x3875c0('0x2'),_0x3875c0('0xa'),_0x3875c0('0x1f')]}),this[_0x3875c0('0x36')]=async(_0x2c0300,_0x2e688e)=>{const _0x32e618=_0x3875c0;if(_0x2e688e['referrals']){if(_0x2e688e[_0x32e618('0x3a')]){if(constants[_0x32e618('0xd')](this[_0x32e618('0x49')][_0x32e618('0xe')])){const _0x5c6748=await omnic['fetchPremiumTier'](_0x2c0300[_0x32e618('0x4a')])[_0x32e618('0x4')](()=>{}),_0x4187b5=await Role_1[_0x32e618('0x39')][_0x32e618('0x33')]({'guild':_0x2c0300['guild']['id'],'referrals':{'$exists':!![],'$ne':null}});if(_0x5c6748){if(_0x5c6748===omnic[_0x32e618('0x9')][_0x32e618('0x6')]&&_0x4187b5>=constants['LIMITS'][_0x32e618('0x6')][_0x32e618('0x34')])throw new errors[(_0x32e618('0x1d'))](errors[_0x32e618('0x12')][_0x32e618('0x22')],this[_0x32e618('0x49')]['locale'][_0x32e618('0x1e')](_0x2c0300[_0x32e618('0x4a')][_0x32e618('0x47')][_0x32e618('0x3c')],_0x32e618('0x20'),_0x32e618('0x11'),constants[_0x32e618('0x46')]['GOLD'][_0x32e618('0x34')]));else{if(_0x5c6748===omnic[_0x32e618('0x9')][_0x32e618('0x29')]&&_0x4187b5>=constants[_0x32e618('0x46')][_0x32e618('0x29')][_0x32e618('0x34')])throw new errors[(_0x32e618('0x1d'))](errors[_0x32e618('0x12')]['LIMITED_PREMIUM_MEMBERSHIP'],this[_0x32e618('0x49')][_0x32e618('0x17')]['getString'](_0x2c0300['guild']['document'][_0x32e618('0x3c')],_0x32e618('0x20'),_0x32e618('0x11'),constants[_0x32e618('0x46')][_0x32e618('0x29')][_0x32e618('0x34')]));}}else{if(_0x4187b5>=constants[_0x32e618('0x46')][_0x32e618('0x34')])throw new errors[(_0x32e618('0x1d'))](errors[_0x32e618('0x12')][_0x32e618('0x40')],this[_0x32e618('0x49')][_0x32e618('0x17')][_0x32e618('0x1e')](_0x2c0300[_0x32e618('0x4a')][_0x32e618('0x47')][_0x32e618('0x3c')],_0x32e618('0x20'),_0x32e618('0x2f'),constants[_0x32e618('0x46')][_0x32e618('0x34')]));}}const _0x3cd546=this['client']['resolver'][_0x32e618('0x2b')](_0x2c0300[_0x32e618('0x4a')],_0x2e688e[_0x32e618('0x3a')][_0x32e618('0x38')]('\x20'));if(!_0x3cd546)throw new errors['DiscordError'](errors[_0x32e618('0x12')][_0x32e618('0x24')],this[_0x32e618('0x49')][_0x32e618('0x17')]['getString'](_0x2c0300[_0x32e618('0x4a')]['document']['language'],_0x32e618('0xf'),_0x32e618('0x14')));let _0xfef851=await _0x3cd546[_0x32e618('0x2a')]();return!_0xfef851&&(_0xfef851=await _0x3cd546[_0x32e618('0x3e')]()),_0xfef851[_0x32e618('0x43')]=_0x2e688e['referrals'],await _0xfef851[_0x32e618('0x2e')](),await _0x2c0300[_0x32e618('0x2c')][_0x32e618('0x48')]({'embed':{'color':tesseract_1[_0x32e618('0x3b')][_0x32e618('0x25')]['GREEN'],'description':this[_0x32e618('0x49')]['locale'][_0x32e618('0x1e')](_0x2c0300[_0x32e618('0x4a')]['document'][_0x32e618('0x3c')],_0x32e618('0x16'),_0x32e618('0x3'),_0x2c0300[_0x32e618('0x10')][_0x32e618('0x19')],_0x3cd546[_0x32e618('0x21')],_0x2e688e['referrals'])}});}if(_0x2e688e['remove'])return await Role_1[_0x32e618('0x39')]['updateMany']({'guild':_0x2c0300[_0x32e618('0x4a')]['id'],'referrals':_0x2e688e['referrals']},{'$unset':{'referrals':0x1}}),await _0x2c0300[_0x32e618('0x2c')]['send']({'embed':{'color':tesseract_1[_0x32e618('0x3b')][_0x32e618('0x25')][_0x32e618('0x32')],'description':this[_0x32e618('0x49')]['locale'][_0x32e618('0x1e')](_0x2c0300[_0x32e618('0x4a')][_0x32e618('0x47')][_0x32e618('0x3c')],'info','roleReferralsClear',_0x2c0300[_0x32e618('0x10')][_0x32e618('0x19')],_0x2e688e['referrals'])}});}const _0x50ffa6=await Role_1[_0x32e618('0x39')][_0x32e618('0x23')]({'guild':_0x2c0300[_0x32e618('0x4a')]['id'],'referrals':{'$exists':!![],'$ne':null}});if(!_0x50ffa6['length'])throw new Error(_0x32e618('0x37'));const _0x13f670={};for(const _0x31ef21 of _0x50ffa6){_0x31ef21[_0x32e618('0x43')]in _0x13f670?_0x13f670[_0x31ef21[_0x32e618('0x43')]]['push'](_0x31ef21['id']):_0x13f670[_0x31ef21[_0x32e618('0x43')]]=[_0x31ef21['id']];}const _0xa5a24=pagination[_0x32e618('0x1a')](Object['keys'](_0x13f670)[_0x32e618('0x31')](_0x49a2fe=>({'name':_0x49a2fe+_0x32e618('0x4b'),'value':_0x13f670[_0x49a2fe]['map'](_0x31dc4a=>_0x2c0300['guild'][_0x32e618('0x42')][_0x32e618('0xc')][_0x32e618('0xb')](_0x31dc4a)?_0x2c0300[_0x32e618('0x4a')][_0x32e618('0x42')][_0x32e618('0xc')][_0x32e618('0x1')](_0x31dc4a)['name']:_0x31dc4a)[_0x32e618('0x38')](',\x20')})),_0x2e688e[_0x32e618('0x3f')]);return await _0x2c0300[_0x32e618('0x2c')][_0x32e618('0x48')]({'embed':{'color':tesseract_1[_0x32e618('0x3b')][_0x32e618('0x25')]['IRIS'],'title':_0x32e618('0x13'),'fields':_0xa5a24[_0x32e618('0x45')],'footer':{'text':_0x32e618('0x2d')+_0xa5a24['page']+'\x20of\x20'+_0xa5a24[_0x32e618('0x27')]}}});};}};
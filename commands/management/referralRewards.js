const a74_0x3a38=['cache','MAX_SAFE_INTEGER','premiumInviteRoles','COLORS','author','remove','errors','Constants','exec','referralRewards','length','referralRewards\x20--page\x20NUMBER','join','@bastion/tesseract','info','resolveRole','PLATINUM','../../utils/pagination','roles','tag','roleReferralsSet','channel','../../utils/numbers','has','Command','RED','Page\x20','name','apply','document','guild','map','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','resolver','items','client','locale','../../utils/constants','get','\x20of\x20','createDocument','paginate','page','Referral\x20Rewards','send','BASTION_ERROR_TYPE','LIMITED_PREMIUM_MEMBERSHIP','referralRewards\x20-n\x20NUMBER\x20--remove','save','push','PREMIUM_MEMBERSHIP_REQUIRED','INVITE_REWARDS','GOLD','exports','NO_REFERRAL_REWARDS','fetchPremiumTier','language','constructor','membershipLimitInviteRoles','GREEN','keys','getString','../../utils/errors','roleNotFound','DiscordError','MANAGE_GUILD','updateMany','referrals','default','PremiumTier','pages','role','fetchDocument','LIMITS','user','test'];(function(_0xd0353a,_0x3a3859){const _0x6cdf87=function(_0x18afee){while(--_0x18afee){_0xd0353a['push'](_0xd0353a['shift']());}},_0x3acd80=function(){const _0x972d4a={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4dac63,_0x5f4c10,_0x27d40e,_0xea9ca6){_0xea9ca6=_0xea9ca6||{};let _0x45375f=_0x5f4c10+'='+_0x27d40e,_0x265482=0x0;for(let _0x31e16a=0x0,_0x2fa27f=_0x4dac63['length'];_0x31e16a<_0x2fa27f;_0x31e16a++){const _0x3ec07c=_0x4dac63[_0x31e16a];_0x45375f+=';\x20'+_0x3ec07c;const _0x340ec0=_0x4dac63[_0x3ec07c];_0x4dac63['push'](_0x340ec0),_0x2fa27f=_0x4dac63['length'],_0x340ec0!==!![]&&(_0x45375f+='='+_0x340ec0);}_0xea9ca6['cookie']=_0x45375f;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4c0076,_0x160a60){_0x4c0076=_0x4c0076||function(_0x422cac){return _0x422cac;};const _0x2443cb=_0x4c0076(new RegExp('(?:^|;\x20)'+_0x160a60['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x22ec1a=function(_0x26fcee,_0x3ef477){_0x26fcee(++_0x3ef477);};return _0x22ec1a(_0x6cdf87,_0x3a3859),_0x2443cb?decodeURIComponent(_0x2443cb[0x1]):undefined;}},_0x4140a0=function(){const _0x57763f=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x57763f['test'](_0x972d4a['removeCookie']['toString']());};_0x972d4a['updateCookie']=_0x4140a0;let _0x14f02a='';const _0x3eb256=_0x972d4a['updateCookie']();if(!_0x3eb256)_0x972d4a['setCookie'](['*'],'counter',0x1);else _0x3eb256?_0x14f02a=_0x972d4a['getCookie'](null,'counter'):_0x972d4a['removeCookie']();};_0x3acd80();}(a74_0x3a38,0x9a));const a74_0x6cdf=function(_0xd0353a,_0x3a3859){_0xd0353a=_0xd0353a-0x0;let _0x6cdf87=a74_0x3a38[_0xd0353a];return _0x6cdf87;};const a74_0x972d4a=function(){let _0x14f02a=!![];return function(_0x3eb256,_0x4dac63){const _0x5f4c10=_0x14f02a?function(){if(_0x4dac63){const _0x27d40e=_0x4dac63[a74_0x6cdf('0x1a')](_0x3eb256,arguments);return _0x4dac63=null,_0x27d40e;}}:function(){};return _0x14f02a=![],_0x5f4c10;};}(),a74_0x18afee=a74_0x972d4a(this,function(){const _0xea9ca6=function(){const _0x45375f=_0xea9ca6[a74_0x6cdf('0x37')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a74_0x6cdf('0x37')](a74_0x6cdf('0x1e'));return!_0x45375f[a74_0x6cdf('0x49')](a74_0x18afee);};return _0xea9ca6();});a74_0x18afee();'use strict';const tesseract_1=require(a74_0x6cdf('0xb')),Role_1=require('../../models/Role'),constants=require(a74_0x6cdf('0x23')),errors=require(a74_0x6cdf('0x3c')),numbers=require(a74_0x6cdf('0x14')),omnic=require('../../utils/omnic'),pagination=require(a74_0x6cdf('0xf'));module[a74_0x6cdf('0x33')]=class ReferralRewardsCommand extends tesseract_1[a74_0x6cdf('0x16')]{constructor(){super(a74_0x6cdf('0x7'),{'description':'It\x20allows\x20you\x20set\x20roles\x20as\x20rewards\x20for\x20referrals\x20(inviting\x20other\x20users\x20to\x20the\x20server).','triggers':[],'arguments':{'alias':{'referrals':['n'],'page':['p']},'array':['role'],'boolean':[a74_0x6cdf('0x3')],'string':[a74_0x6cdf('0x45')],'number':[a74_0x6cdf('0x41'),a74_0x6cdf('0x28')],'coerce':{'referrals':_0x265482=>numbers['clamp'](_0x265482,0x1,Number[a74_0x6cdf('0x4b')])}},'scope':a74_0x6cdf('0x1c'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a74_0x6cdf('0x3f')],'userPermissions':[],'syntax':['referralRewards',a74_0x6cdf('0x9'),'referralRewards\x20-n\x20NUMBER\x20--role\x20ROLE',a74_0x6cdf('0x2d')]}),this[a74_0x6cdf('0x6')]=async(_0x31e16a,_0x2fa27f)=>{if(_0x2fa27f[a74_0x6cdf('0x41')]){if(_0x2fa27f['role']){if(constants['isPublicBastion'](this[a74_0x6cdf('0x21')][a74_0x6cdf('0x48')])){const _0x22ec1a=await omnic[a74_0x6cdf('0x35')](_0x31e16a[a74_0x6cdf('0x1c')])['catch'](()=>{}),_0x422cac=await Role_1[a74_0x6cdf('0x42')]['countDocuments']({'guild':_0x31e16a[a74_0x6cdf('0x1c')]['id'],'referrals':{'$exists':!![],'$ne':null}});if(_0x22ec1a){if(_0x22ec1a===omnic[a74_0x6cdf('0x43')][a74_0x6cdf('0x32')]&&_0x422cac>=constants['LIMITS'][a74_0x6cdf('0x32')][a74_0x6cdf('0x31')])throw new errors[(a74_0x6cdf('0x3e'))](errors[a74_0x6cdf('0x2b')][a74_0x6cdf('0x2c')],this[a74_0x6cdf('0x21')][a74_0x6cdf('0x22')]['getString'](_0x31e16a[a74_0x6cdf('0x1c')]['document'][a74_0x6cdf('0x36')],a74_0x6cdf('0x4'),a74_0x6cdf('0x38'),constants[a74_0x6cdf('0x47')][a74_0x6cdf('0x32')][a74_0x6cdf('0x31')]));else{if(_0x22ec1a===omnic[a74_0x6cdf('0x43')]['PLATINUM']&&_0x422cac>=constants[a74_0x6cdf('0x47')]['PLATINUM'][a74_0x6cdf('0x31')])throw new errors[(a74_0x6cdf('0x3e'))](errors[a74_0x6cdf('0x2b')][a74_0x6cdf('0x2c')],this[a74_0x6cdf('0x21')][a74_0x6cdf('0x22')][a74_0x6cdf('0x3b')](_0x31e16a[a74_0x6cdf('0x1c')][a74_0x6cdf('0x1b')][a74_0x6cdf('0x36')],'errors',a74_0x6cdf('0x38'),constants['LIMITS'][a74_0x6cdf('0xe')]['INVITE_REWARDS']));}}else{if(_0x422cac>=constants[a74_0x6cdf('0x47')]['INVITE_REWARDS'])throw new errors['DiscordError'](errors[a74_0x6cdf('0x2b')][a74_0x6cdf('0x30')],this[a74_0x6cdf('0x21')]['locale'][a74_0x6cdf('0x3b')](_0x31e16a[a74_0x6cdf('0x1c')][a74_0x6cdf('0x1b')][a74_0x6cdf('0x36')],a74_0x6cdf('0x4'),a74_0x6cdf('0x0'),constants[a74_0x6cdf('0x47')][a74_0x6cdf('0x31')]));}}const _0x160a60=this[a74_0x6cdf('0x21')][a74_0x6cdf('0x1f')][a74_0x6cdf('0xd')](_0x31e16a['guild'],_0x2fa27f[a74_0x6cdf('0x45')][a74_0x6cdf('0xa')]('\x20'));if(!_0x160a60)throw new errors[(a74_0x6cdf('0x3e'))](errors[a74_0x6cdf('0x2b')]['ROLE_NOT_FOUND'],this[a74_0x6cdf('0x21')]['locale'][a74_0x6cdf('0x3b')](_0x31e16a['guild'][a74_0x6cdf('0x1b')][a74_0x6cdf('0x36')],'error',a74_0x6cdf('0x3d')));let _0x2443cb=await _0x160a60[a74_0x6cdf('0x46')]();return!_0x2443cb&&(_0x2443cb=await _0x160a60[a74_0x6cdf('0x26')]()),_0x2443cb['referrals']=_0x2fa27f[a74_0x6cdf('0x41')],await _0x2443cb[a74_0x6cdf('0x2e')](),await _0x31e16a[a74_0x6cdf('0x13')][a74_0x6cdf('0x2a')]({'embed':{'color':tesseract_1[a74_0x6cdf('0x5')][a74_0x6cdf('0x1')][a74_0x6cdf('0x39')],'description':this[a74_0x6cdf('0x21')][a74_0x6cdf('0x22')][a74_0x6cdf('0x3b')](_0x31e16a[a74_0x6cdf('0x1c')][a74_0x6cdf('0x1b')][a74_0x6cdf('0x36')],a74_0x6cdf('0xc'),a74_0x6cdf('0x12'),_0x31e16a[a74_0x6cdf('0x2')]['tag'],_0x160a60[a74_0x6cdf('0x19')],_0x2fa27f[a74_0x6cdf('0x41')])}});}if(_0x2fa27f[a74_0x6cdf('0x3')])return await Role_1['default'][a74_0x6cdf('0x40')]({'guild':_0x31e16a['guild']['id'],'referrals':_0x2fa27f[a74_0x6cdf('0x41')]},{'$unset':{'referrals':0x1}}),await _0x31e16a[a74_0x6cdf('0x13')][a74_0x6cdf('0x2a')]({'embed':{'color':tesseract_1[a74_0x6cdf('0x5')][a74_0x6cdf('0x1')][a74_0x6cdf('0x17')],'description':this[a74_0x6cdf('0x21')]['locale'][a74_0x6cdf('0x3b')](_0x31e16a[a74_0x6cdf('0x1c')][a74_0x6cdf('0x1b')][a74_0x6cdf('0x36')],a74_0x6cdf('0xc'),'roleReferralsClear',_0x31e16a[a74_0x6cdf('0x2')][a74_0x6cdf('0x11')],_0x2fa27f[a74_0x6cdf('0x41')])}});}const _0x3ec07c=await Role_1[a74_0x6cdf('0x42')]['find']({'guild':_0x31e16a[a74_0x6cdf('0x1c')]['id'],'referrals':{'$exists':!![],'$ne':null}});if(!_0x3ec07c[a74_0x6cdf('0x8')])throw new Error(a74_0x6cdf('0x34'));const _0x340ec0={};for(const _0x26fcee of _0x3ec07c){_0x26fcee[a74_0x6cdf('0x41')]in _0x340ec0?_0x340ec0[_0x26fcee['referrals']][a74_0x6cdf('0x2f')](_0x26fcee['id']):_0x340ec0[_0x26fcee[a74_0x6cdf('0x41')]]=[_0x26fcee['id']];}const _0x4c0076=pagination[a74_0x6cdf('0x27')](Object[a74_0x6cdf('0x3a')](_0x340ec0)[a74_0x6cdf('0x1d')](_0x3ef477=>({'name':_0x3ef477+'\x20Referrals','value':_0x340ec0[_0x3ef477][a74_0x6cdf('0x1d')](_0x57763f=>_0x31e16a[a74_0x6cdf('0x1c')]['roles'][a74_0x6cdf('0x4a')][a74_0x6cdf('0x15')](_0x57763f)?_0x31e16a[a74_0x6cdf('0x1c')][a74_0x6cdf('0x10')][a74_0x6cdf('0x4a')][a74_0x6cdf('0x24')](_0x57763f)[a74_0x6cdf('0x19')]:_0x57763f)[a74_0x6cdf('0xa')](',\x20')})),_0x2fa27f[a74_0x6cdf('0x28')]);return await _0x31e16a[a74_0x6cdf('0x13')][a74_0x6cdf('0x2a')]({'embed':{'color':tesseract_1[a74_0x6cdf('0x5')]['COLORS']['IRIS'],'title':a74_0x6cdf('0x29'),'fields':_0x4c0076[a74_0x6cdf('0x20')],'footer':{'text':a74_0x6cdf('0x18')+_0x4c0076['page']+a74_0x6cdf('0x25')+_0x4c0076[a74_0x6cdf('0x44')]}}});};}};
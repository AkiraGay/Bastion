const a83_0x4b3c=['errors','../../utils/numbers','reactions','PremiumTier','locale','LIMITS','bot','Constants','fetch','439355KrtSma','GOLD','guild','values','736240lhndbP','constructor','DiscordError','Congratulations','catch','create','messages','title','return\x20/\x22\x20+\x20this\x20+\x20\x22/','countDocuments','send','BASTION_ERROR_TYPE','fetchPremiumTier','random','29562nfFEMp','winners','LIMITED_PREMIUM_MEMBERSHIP','GIVEAWAY!','COLORS','70935qIfULm','user','has','floor','name','exec','\x20Winners\x20â€¢\x20Ends','test','defaultTimeout','timeout','\x20to\x20participate\x20in\x20the\x20giveaway\x20for\x20a\x20chance\x20to\x20win.','SOMEWHAT_DARK','document','GIVEAWAY\x20WINNERS\x20REROLLED','PLATINUM','language','apply','membershipLimitGiveawayTimeout','1mSHTIX','692890lFwiux','length','../../utils/omnic','edit','defaultWinners','getString','../../utils/constants','join','default','client','membershipLimitGiveaways','1AqQmCs','push','MANAGE_CHANNELS','GIVEAWAY_TIMEOUT','get','embeds','RED','premiumGiveaways','\x20or\x20','filter','giveaway','clamp','react','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','users','React\x20to\x20this\x20message\x20with\x20','giveaway\x20--reroll\x20ID\x20--winners\x20NUMBER','307061VIvUcu','now','exports','../../models/Giveaway','cache','giveaway\x20--winners\x20NUMBER\x20--\x20ITEM','reroll','number','771593TEyfqj','GIVEAWAYS','premiumGiveawayTimeout','channel','PREMIUM_MEMBERSHIP_REQUIRED'];const a83_0x3b1e=function(_0x588fe2,_0x29ba28){_0x588fe2=_0x588fe2-0x12e;let _0xf00448=a83_0x4b3c[_0x588fe2];return _0xf00448;};const a83_0x10474a=a83_0x3b1e;(function(_0x19d403,_0xc9d2c5){const _0x2e2a59=a83_0x3b1e;while(!![]){try{const _0xbb88cb=parseInt(_0x2e2a59(0x169))+parseInt(_0x2e2a59(0x161))+-parseInt(_0x2e2a59(0x17b))*parseInt(_0x2e2a59(0x144))+-parseInt(_0x2e2a59(0x177))+parseInt(_0x2e2a59(0x189))+-parseInt(_0x2e2a59(0x132))*parseInt(_0x2e2a59(0x150))+parseInt(_0x2e2a59(0x145));if(_0xbb88cb===_0xc9d2c5)break;else _0x19d403['push'](_0x19d403['shift']());}catch(_0x1dca4e){_0x19d403['push'](_0x19d403['shift']());}}}(a83_0x4b3c,0x87650));const a83_0x1be875=function(){let _0x2e41de=!![];return function(_0x306171,_0x26c7dd){const _0x30e36a=_0x2e41de?function(){const _0x582697=a83_0x3b1e;if(_0x26c7dd){const _0x315a6b=_0x26c7dd[_0x582697(0x142)](_0x306171,arguments);return _0x26c7dd=null,_0x315a6b;}}:function(){};return _0x2e41de=![],_0x30e36a;};}(),a83_0x53851a=a83_0x1be875(this,function(){const _0x4473e8=function(){const _0x8958d7=a83_0x3b1e,_0x363093=_0x4473e8[_0x8958d7(0x17c)](_0x8958d7(0x183))()[_0x8958d7(0x17c)](_0x8958d7(0x15d));return!_0x363093[_0x8958d7(0x139)](a83_0x53851a);};return _0x4473e8();});a83_0x53851a();'use strict';const tesseract_1=require('@bastion/tesseract'),Giveaway_1=require(a83_0x10474a(0x164)),constants=require(a83_0x10474a(0x14b)),errors=require('../../utils/errors'),numbers=require(a83_0x10474a(0x16f)),omnic=require(a83_0x10474a(0x147));module[a83_0x10474a(0x163)]=class GiveawayCommand extends tesseract_1['Command']{constructor(){const _0x358f22=a83_0x10474a;super(_0x358f22(0x15a),{'description':'It\x20allows\x20you\x20to\x20run\x20giveaway\x20events\x20in\x20the\x20server\x20for\x20at\x20least\x20an\x20hour\x20and\x20at\x20most\x20a\x20month.\x20You\x20can\x20set\x20any\x20number\x20of\x20winners\x20for\x20the\x20event.\x20And\x20it\x20also\x20allows\x20you\x20to\x20reroll\x20the\x20winners,\x20if\x20need\x20be,\x20after\x20the\x20end\x20of\x20the\x20event.','triggers':[],'arguments':{'alias':{'reroll':['r'],'timeout':['t'],'winners':['w']},'number':[_0x358f22(0x13b),'winners'],'coerce':{'timeout':_0x2a7d83=>typeof _0x2a7d83==='number'&&numbers[_0x358f22(0x15b)](_0x2a7d83,0x1,0x2d0),'winners':_0x2c4ffc=>typeof _0x2c4ffc===_0x358f22(0x168)&&Math[_0x358f22(0x135)](numbers[_0x358f22(0x15b)](_0x2c4ffc,0x1,Number['MAX_SAFE_INTEGER']))},'default':{'timeout':0x3,'winners':0x1}},'scope':_0x358f22(0x179),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[_0x358f22(0x152)],'syntax':['giveaway\x20--\x20ITEM',_0x358f22(0x166),'giveaway\x20--timeout\x20HOURS\x20--\x20ITEM',_0x358f22(0x160)]}),this[_0x358f22(0x137)]=async(_0xe2ea7f,_0x218808)=>{const _0x85c33a=_0x358f22;if(_0x218808[_0x85c33a(0x167)]){const _0xa780f=await _0xe2ea7f['channel'][_0x85c33a(0x181)][_0x85c33a(0x176)](_0x218808[_0x85c33a(0x167)]);let _0xd1361=[];for(const _0x23a4f3 of['ðŸŽŠ','ðŸŽ‰']){_0xa780f[_0x85c33a(0x170)][_0x85c33a(0x165)][_0x85c33a(0x134)](_0x23a4f3)&&(await _0xa780f[_0x85c33a(0x170)][_0x85c33a(0x165)]['get'](_0x23a4f3)['users']['fetch']()[_0x85c33a(0x17f)](()=>{}),_0xd1361[_0x85c33a(0x151)](..._0xa780f[_0x85c33a(0x170)][_0x85c33a(0x165)][_0x85c33a(0x154)](_0x23a4f3)[_0x85c33a(0x15e)][_0x85c33a(0x165)][_0x85c33a(0x159)](_0x1350a2=>!_0x1350a2[_0x85c33a(0x174)])[_0x85c33a(0x17a)]()));}const _0xb36c01=[];for(let _0x68d436=0x0;_0x68d436<(_0x218808[_0x85c33a(0x12e)]||0x1);_0x68d436++){if(!_0xd1361[_0x85c33a(0x146)])break;const _0x6178f0=_0xd1361[Math[_0x85c33a(0x135)](Math[_0x85c33a(0x188)]()*_0xd1361['length'])];_0xb36c01['push'](_0x6178f0),_0xd1361=_0xd1361['filter'](_0x2465fa=>_0x2465fa['id']!==_0x6178f0['id']);}_0xb36c01[_0x85c33a(0x146)]?await _0xa780f['edit']({'embed':{'color':tesseract_1[_0x85c33a(0x175)][_0x85c33a(0x131)][_0x85c33a(0x13d)],'author':{'name':_0x85c33a(0x13f)},'title':_0xa780f[_0x85c33a(0x155)][0x0]['title'],'description':'The\x20giveaway\x20winners\x20were\x20rerolled\x20and\x20the\x20following\x20users\x20have\x20won\x20the\x20giveaway\x20and\x20will\x20be\x20contacted\x20soon\x20for\x20their\x20rewards.\x0aThank\x20you\x20everyone\x20for\x20participating.\x20Better\x20luck\x20next\x20time.','fields':[{'name':_0x85c33a(0x17e),'value':_0xb36c01['join'](',\x20')}],'footer':{'text':_0xa780f['id']},'timestamp':new Date()}}):await _0xa780f[_0x85c33a(0x148)]({'embed':{'color':tesseract_1['Constants'][_0x85c33a(0x131)][_0x85c33a(0x156)],'author':{'name':'GIVEAWAY\x20ENDED'},'title':_0xa780f[_0x85c33a(0x155)][0x0][_0x85c33a(0x182)],'description':'Unfortunately,\x20no\x20one\x20participated\x20in\x20this\x20giveaway\x20and\x20therfore\x20there\x20aren\x27t\x20any\x20winners\x20this\x20time.','footer':{'text':_0xa780f['id']},'timestamp':new Date()}});}if(!_0x218808['_'][_0x85c33a(0x146)])throw new errors[(_0x85c33a(0x17d))](errors['BASTION_ERROR_TYPE']['INVALID_COMMAND_SYNTAX'],this[_0x85c33a(0x136)]);const _0x31b29e=_0x218808['_'][_0x85c33a(0x14c)]('\x20'),_0x3dc344=_0x218808[_0x85c33a(0x13b)]?_0x218808[_0x85c33a(0x13b)]:this[_0x85c33a(0x13a)],_0x1eedb6=_0x218808['winners']?_0x218808['winners']:this['defaultWinners'];if(constants['isPublicBastion'](this[_0x85c33a(0x14e)][_0x85c33a(0x133)])){const _0x23cc14=await omnic[_0x85c33a(0x187)](_0xe2ea7f[_0x85c33a(0x179)])[_0x85c33a(0x17f)](()=>{});if(_0x23cc14){if(_0x23cc14===omnic[_0x85c33a(0x171)][_0x85c33a(0x178)]&&_0x3dc344>constants[_0x85c33a(0x173)][_0x85c33a(0x178)][_0x85c33a(0x153)])throw new errors[(_0x85c33a(0x17d))](errors[_0x85c33a(0x186)][_0x85c33a(0x12f)],this[_0x85c33a(0x14e)][_0x85c33a(0x172)][_0x85c33a(0x14a)](_0xe2ea7f[_0x85c33a(0x179)][_0x85c33a(0x13e)][_0x85c33a(0x141)],_0x85c33a(0x16e),_0x85c33a(0x143),constants[_0x85c33a(0x173)][_0x85c33a(0x178)][_0x85c33a(0x153)]));else{if(_0x23cc14===omnic[_0x85c33a(0x171)]['PLATINUM']&&_0x3dc344>constants['LIMITS'][_0x85c33a(0x140)][_0x85c33a(0x153)])throw new errors[(_0x85c33a(0x17d))](errors[_0x85c33a(0x186)][_0x85c33a(0x12f)],this[_0x85c33a(0x14e)]['locale'][_0x85c33a(0x14a)](_0xe2ea7f[_0x85c33a(0x179)][_0x85c33a(0x13e)][_0x85c33a(0x141)],_0x85c33a(0x16e),_0x85c33a(0x143),constants[_0x85c33a(0x173)][_0x85c33a(0x140)][_0x85c33a(0x153)]));}}else{if(_0x3dc344>constants[_0x85c33a(0x173)][_0x85c33a(0x153)])throw new errors[(_0x85c33a(0x17d))](errors[_0x85c33a(0x186)][_0x85c33a(0x16d)],this[_0x85c33a(0x14e)]['locale']['getString'](_0xe2ea7f[_0x85c33a(0x179)][_0x85c33a(0x13e)][_0x85c33a(0x141)],_0x85c33a(0x16e),_0x85c33a(0x16b),constants[_0x85c33a(0x173)][_0x85c33a(0x153)]));}const _0x2afe4c=await Giveaway_1[_0x85c33a(0x14d)][_0x85c33a(0x184)]({'guild':_0xe2ea7f[_0x85c33a(0x179)]['id'],'ends':{'$gte':new Date()}});if(_0x23cc14){if(_0x23cc14===omnic['PremiumTier']['GOLD']&&_0x2afe4c>=constants[_0x85c33a(0x173)][_0x85c33a(0x178)][_0x85c33a(0x16a)])throw new errors[(_0x85c33a(0x17d))](errors['BASTION_ERROR_TYPE'][_0x85c33a(0x12f)],this['client']['locale'][_0x85c33a(0x14a)](_0xe2ea7f[_0x85c33a(0x179)][_0x85c33a(0x13e)][_0x85c33a(0x141)],_0x85c33a(0x16e),_0x85c33a(0x14f),constants[_0x85c33a(0x173)]['GOLD'][_0x85c33a(0x16a)]));else{if(_0x23cc14===omnic[_0x85c33a(0x171)]['PLATINUM']&&_0x2afe4c>=constants[_0x85c33a(0x173)][_0x85c33a(0x140)][_0x85c33a(0x16a)])throw new errors[(_0x85c33a(0x17d))](errors[_0x85c33a(0x186)][_0x85c33a(0x12f)],this[_0x85c33a(0x14e)][_0x85c33a(0x172)]['getString'](_0xe2ea7f['guild'][_0x85c33a(0x13e)][_0x85c33a(0x141)],_0x85c33a(0x16e),_0x85c33a(0x14f),constants[_0x85c33a(0x173)][_0x85c33a(0x140)][_0x85c33a(0x16a)]));}}else{if(_0x2afe4c>=constants[_0x85c33a(0x173)][_0x85c33a(0x16a)])throw new errors[(_0x85c33a(0x17d))](errors[_0x85c33a(0x186)][_0x85c33a(0x16d)],this['client']['locale'][_0x85c33a(0x14a)](_0xe2ea7f['guild']['document'][_0x85c33a(0x141)],_0x85c33a(0x16e),_0x85c33a(0x157),constants['LIMITS'][_0x85c33a(0x16a)]));}}const _0x4232ad=new Date(Date[_0x85c33a(0x162)]()+_0x3dc344*0x36ee80),_0x5d2f76=await _0xe2ea7f[_0x85c33a(0x16c)][_0x85c33a(0x185)]({'embed':{'color':tesseract_1['Constants']['COLORS']['IRIS'],'author':{'name':_0x85c33a(0x130)},'title':_0x31b29e,'description':_0x85c33a(0x15f)+this[_0x85c33a(0x170)][_0x85c33a(0x14c)](_0x85c33a(0x158))+_0x85c33a(0x13c),'footer':{'text':_0x1eedb6+_0x85c33a(0x138)},'timestamp':_0x4232ad}});await Giveaway_1[_0x85c33a(0x14d)][_0x85c33a(0x180)]({'_id':_0x5d2f76['id'],'channel':_0x5d2f76['channel']['id'],'guild':_0x5d2f76[_0x85c33a(0x179)]['id'],'winners':_0x1eedb6,'ends':_0x4232ad});for(const _0x3c1fc1 of this[_0x85c33a(0x170)]){await _0x5d2f76[_0x85c33a(0x15c)](_0x3c1fc1)[_0x85c33a(0x17f)](()=>{});}},this[_0x358f22(0x170)]=['ðŸŽŠ','ðŸŽ‰'],this[_0x358f22(0x13a)]=0x3,this[_0x358f22(0x149)]=0x1;}};
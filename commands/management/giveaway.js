const a64_0x10ee=['defaultTimeout','LIMITED_PREMIUM_MEMBERSHIP','reactions','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','channel','INVALID_COMMAND_SYNTAX','../../utils/omnic','send','React\x20to\x20this\x20message\x20with\x20','Constants','MAX_SAFE_INTEGER','BASTION_ERROR_TYPE','giveaway','MANAGE_CHANNELS','defaultWinners','react','fetchPremiumTier','client','GIVEAWAY!','../../utils/errors','getString','exports','join','test','constructor','guild','user','timeout','GIVEAWAYS','membershipLimitGiveawayTimeout','membershipLimitGiveaways','exec','\x20or\x20','\x20to\x20participate\x20in\x20the\x20giveaway\x20for\x20a\x20chance\x20to\x20win.','return\x20/\x22\x20+\x20this\x20+\x20\x22/','document','clamp','It\x20allows\x20you\x20to\x20run\x20giveaway\x20events\x20in\x20the\x20server\x20for\x20at\x20least\x20an\x20hour\x20and\x20at\x20most\x20a\x20month.\x20You\x20can\x20set\x20any\x20number\x20of\x20winners\x20for\x20the\x20event.\x20And\x20it\x20also\x20allows\x20you\x20to\x20reroll\x20the\x20winners,\x20if\x20need\x20be,\x20after\x20the\x20end\x20of\x20the\x20event.','PLATINUM','isPublicBastion','COLORS','PREMIUM_MEMBERSHIP_REQUIRED','GOLD','@bastion/tesseract','catch','winners','../../utils/constants','name','errors','number','locale','floor','language','default','giveaway\x20--winners\x20NUMBER\x20--\x20ITEM','premiumGiveaways','PremiumTier','GIVEAWAY_TIMEOUT','countDocuments','DiscordError','premiumGiveawayTimeout','giveaway\x20--timeout\x20HOURS\x20--\x20ITEM','LIMITS','now'];(function(_0x1c8866,_0x10ee39){const _0x49c4ba=function(_0x3adf72){while(--_0x3adf72){_0x1c8866['push'](_0x1c8866['shift']());}},_0x3a430b=function(){const _0x4f05e2={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0xe71208,_0x3ddbdd,_0x56555f,_0x57ddf9){_0x57ddf9=_0x57ddf9||{};let _0x77a792=_0x3ddbdd+'='+_0x56555f,_0xc8d404=0x0;for(let _0x412f61=0x0,_0x20dea3=_0xe71208['length'];_0x412f61<_0x20dea3;_0x412f61++){const _0x4fc8e8=_0xe71208[_0x412f61];_0x77a792+=';\x20'+_0x4fc8e8;const _0x1ccc1b=_0xe71208[_0x4fc8e8];_0xe71208['push'](_0x1ccc1b),_0x20dea3=_0xe71208['length'],_0x1ccc1b!==!![]&&(_0x77a792+='='+_0x1ccc1b);}_0x57ddf9['cookie']=_0x77a792;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3fd9af,_0x11ddba){_0x3fd9af=_0x3fd9af||function(_0x5ddaf7){return _0x5ddaf7;};const _0xda28fe=_0x3fd9af(new RegExp('(?:^|;\x20)'+_0x11ddba['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x402787=function(_0x230240,_0x43caf7){_0x230240(++_0x43caf7);};return _0x402787(_0x49c4ba,_0x10ee39),_0xda28fe?decodeURIComponent(_0xda28fe[0x1]):undefined;}},_0x46c558=function(){const _0x49cdad=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x49cdad['test'](_0x4f05e2['removeCookie']['toString']());};_0x4f05e2['updateCookie']=_0x46c558;let _0x34ef68='';const _0x332489=_0x4f05e2['updateCookie']();if(!_0x332489)_0x4f05e2['setCookie'](['*'],'counter',0x1);else _0x332489?_0x34ef68=_0x4f05e2['getCookie'](null,'counter'):_0x4f05e2['removeCookie']();};_0x3a430b();}(a64_0x10ee,0xdb));const a64_0x49c4=function(_0x1c8866,_0x10ee39){_0x1c8866=_0x1c8866-0x0;let _0x49c4ba=a64_0x10ee[_0x1c8866];return _0x49c4ba;};const a64_0x4f05e2=function(){let _0x34ef68=!![];return function(_0x332489,_0xe71208){const _0x3ddbdd=_0x34ef68?function(){if(_0xe71208){const _0x56555f=_0xe71208['apply'](_0x332489,arguments);return _0xe71208=null,_0x56555f;}}:function(){};return _0x34ef68=![],_0x3ddbdd;};}(),a64_0x3adf72=a64_0x4f05e2(this,function(){const _0x57ddf9=function(){const _0x77a792=_0x57ddf9[a64_0x49c4('0x3d')](a64_0x49c4('0x7'))()[a64_0x49c4('0x3d')](a64_0x49c4('0x28'));return!_0x77a792[a64_0x49c4('0x3c')](a64_0x3adf72);};return _0x57ddf9();});a64_0x3adf72();'use strict';const tesseract_1=require(a64_0x49c4('0x10')),Giveaway_1=require('../../models/Giveaway'),constants=require(a64_0x49c4('0x13')),errors=require(a64_0x49c4('0x38')),numbers=require('../../utils/numbers'),omnic=require(a64_0x49c4('0x2b'));module[a64_0x49c4('0x3a')]=class GiveawayCommand extends tesseract_1['Command']{constructor(){super(a64_0x49c4('0x31'),{'description':a64_0x49c4('0xa'),'triggers':[],'arguments':{'alias':{'timeout':['t'],'winners':['w']},'number':[a64_0x49c4('0x0'),a64_0x49c4('0x12')],'coerce':{'timeout':_0xc8d404=>typeof _0xc8d404===a64_0x49c4('0x16')&&numbers[a64_0x49c4('0x9')](_0xc8d404,0x1,0x2d0),'winners':_0x412f61=>typeof _0x412f61===a64_0x49c4('0x16')&&Math[a64_0x49c4('0x18')](numbers[a64_0x49c4('0x9')](_0x412f61,0x1,Number[a64_0x49c4('0x2f')]))},'default':{'timeout':0x3,'winners':0x1}},'scope':a64_0x49c4('0x3e'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[a64_0x49c4('0x32')],'syntax':['giveaway\x20--\x20ITEM',a64_0x49c4('0x1b'),a64_0x49c4('0x22')]}),this[a64_0x49c4('0x4')]=async(_0x20dea3,_0x4fc8e8)=>{if(!_0x4fc8e8['_']['length'])throw new errors[(a64_0x49c4('0x20'))](errors['BASTION_ERROR_TYPE'][a64_0x49c4('0x2a')],this[a64_0x49c4('0x14')]);const _0x1ccc1b=_0x4fc8e8['_'][a64_0x49c4('0x3b')]('\x20'),_0x3fd9af=_0x4fc8e8[a64_0x49c4('0x0')]?_0x4fc8e8[a64_0x49c4('0x0')]:this[a64_0x49c4('0x25')],_0x11ddba=_0x4fc8e8['winners']?_0x4fc8e8[a64_0x49c4('0x12')]:this['defaultWinners'];if(constants[a64_0x49c4('0xc')](this['client'][a64_0x49c4('0x3f')])){const _0x5ddaf7=await omnic[a64_0x49c4('0x35')](_0x20dea3[a64_0x49c4('0x3e')])[a64_0x49c4('0x11')](()=>{});if(_0x5ddaf7){if(_0x5ddaf7===omnic[a64_0x49c4('0x1d')][a64_0x49c4('0xf')]&&_0x3fd9af>constants[a64_0x49c4('0x23')][a64_0x49c4('0xf')][a64_0x49c4('0x1e')])throw new errors[(a64_0x49c4('0x20'))](errors[a64_0x49c4('0x30')][a64_0x49c4('0x26')],this[a64_0x49c4('0x36')][a64_0x49c4('0x17')][a64_0x49c4('0x39')](_0x20dea3[a64_0x49c4('0x3e')][a64_0x49c4('0x8')][a64_0x49c4('0x19')],a64_0x49c4('0x15'),'membershipLimitGiveawayTimeout',constants['LIMITS'][a64_0x49c4('0xf')]['GIVEAWAY_TIMEOUT']));else{if(_0x5ddaf7===omnic[a64_0x49c4('0x1d')][a64_0x49c4('0xb')]&&_0x3fd9af>constants['LIMITS'][a64_0x49c4('0xb')][a64_0x49c4('0x1e')])throw new errors[(a64_0x49c4('0x20'))](errors['BASTION_ERROR_TYPE'][a64_0x49c4('0x26')],this[a64_0x49c4('0x36')]['locale']['getString'](_0x20dea3[a64_0x49c4('0x3e')][a64_0x49c4('0x8')][a64_0x49c4('0x19')],a64_0x49c4('0x15'),a64_0x49c4('0x2'),constants[a64_0x49c4('0x23')][a64_0x49c4('0xb')][a64_0x49c4('0x1e')]));}}else{if(_0x3fd9af>constants[a64_0x49c4('0x23')][a64_0x49c4('0x1e')])throw new errors[(a64_0x49c4('0x20'))](errors['BASTION_ERROR_TYPE'][a64_0x49c4('0xe')],this[a64_0x49c4('0x36')]['locale'][a64_0x49c4('0x39')](_0x20dea3['guild'][a64_0x49c4('0x8')][a64_0x49c4('0x19')],'errors',a64_0x49c4('0x21'),constants[a64_0x49c4('0x23')][a64_0x49c4('0x1e')]));}const _0x230240=await Giveaway_1['default'][a64_0x49c4('0x1f')]({'guild':_0x20dea3[a64_0x49c4('0x3e')]['id'],'ends':{'$gte':new Date()}});if(_0x5ddaf7){if(_0x5ddaf7===omnic[a64_0x49c4('0x1d')][a64_0x49c4('0xf')]&&_0x230240>=constants[a64_0x49c4('0x23')][a64_0x49c4('0xf')]['GIVEAWAYS'])throw new errors[(a64_0x49c4('0x20'))](errors[a64_0x49c4('0x30')][a64_0x49c4('0x26')],this[a64_0x49c4('0x36')]['locale']['getString'](_0x20dea3[a64_0x49c4('0x3e')][a64_0x49c4('0x8')][a64_0x49c4('0x19')],a64_0x49c4('0x15'),a64_0x49c4('0x3'),constants[a64_0x49c4('0x23')][a64_0x49c4('0xf')][a64_0x49c4('0x1')]));else{if(_0x5ddaf7===omnic[a64_0x49c4('0x1d')][a64_0x49c4('0xb')]&&_0x230240>=constants['LIMITS']['PLATINUM']['GIVEAWAYS'])throw new errors[(a64_0x49c4('0x20'))](errors[a64_0x49c4('0x30')][a64_0x49c4('0x26')],this[a64_0x49c4('0x36')]['locale'][a64_0x49c4('0x39')](_0x20dea3[a64_0x49c4('0x3e')][a64_0x49c4('0x8')][a64_0x49c4('0x19')],a64_0x49c4('0x15'),a64_0x49c4('0x3'),constants['LIMITS'][a64_0x49c4('0xb')]['GIVEAWAYS']));}}else{if(_0x230240>=constants[a64_0x49c4('0x23')][a64_0x49c4('0x1')])throw new errors[(a64_0x49c4('0x20'))](errors[a64_0x49c4('0x30')][a64_0x49c4('0xe')],this[a64_0x49c4('0x36')][a64_0x49c4('0x17')]['getString'](_0x20dea3[a64_0x49c4('0x3e')][a64_0x49c4('0x8')][a64_0x49c4('0x19')],a64_0x49c4('0x15'),a64_0x49c4('0x1c'),constants[a64_0x49c4('0x23')][a64_0x49c4('0x1')]));}}const _0xda28fe=new Date(Date[a64_0x49c4('0x24')]()+_0x3fd9af*0x36ee80),_0x402787=await _0x20dea3[a64_0x49c4('0x29')][a64_0x49c4('0x2c')]({'embed':{'color':tesseract_1[a64_0x49c4('0x2e')][a64_0x49c4('0xd')]['IRIS'],'author':{'name':a64_0x49c4('0x37')},'title':_0x1ccc1b,'description':a64_0x49c4('0x2d')+this[a64_0x49c4('0x27')][a64_0x49c4('0x3b')](a64_0x49c4('0x5'))+a64_0x49c4('0x6'),'footer':{'text':_0x11ddba+'\x20Winners\x20â€¢\x20Ends'},'timestamp':_0xda28fe}});await Giveaway_1[a64_0x49c4('0x1a')]['create']({'_id':_0x402787['id'],'channel':_0x402787['channel']['id'],'guild':_0x402787['guild']['id'],'winners':_0x11ddba,'ends':_0xda28fe});for(const _0x43caf7 of this['reactions']){await _0x402787[a64_0x49c4('0x34')](_0x43caf7)[a64_0x49c4('0x11')](()=>{});}},this[a64_0x49c4('0x27')]=['ðŸŽŠ','ðŸŽ‰'],this['defaultTimeout']=0x3,this[a64_0x49c4('0x33')]=0x1;}};
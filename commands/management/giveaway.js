const a82_0x250c=['GIVEAWAYS','catch','test','client','../../models/Giveaway','GIVEAWAY_TIMEOUT','GIVEAWAY\x20ENDED','filter','\x20Winners\x20â€¢\x20Ends','locale','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','It\x20allows\x20you\x20to\x20run\x20giveaway\x20events\x20in\x20the\x20server\x20for\x20at\x20least\x20an\x20hour\x20and\x20at\x20most\x20a\x20month.\x20You\x20can\x20set\x20any\x20number\x20of\x20winners\x20for\x20the\x20event.\x20And\x20it\x20also\x20allows\x20you\x20to\x20reroll\x20the\x20winners,\x20if\x20need\x20be,\x20after\x20the\x20end\x20of\x20the\x20event.','channel','apply','DiscordError','join','PremiumTier','SOMEWHAT_DARK','clamp','Command','default','errors','countDocuments','giveaway\x20--reroll\x20ID\x20--winners\x20NUMBER','\x20to\x20participate\x20in\x20the\x20giveaway\x20for\x20a\x20chance\x20to\x20win.','The\x20giveaway\x20winners\x20were\x20rerolled\x20and\x20the\x20following\x20users\x20have\x20won\x20the\x20giveaway\x20and\x20will\x20be\x20contacted\x20soon\x20for\x20their\x20rewards.\x0aThank\x20you\x20everyone\x20for\x20participating.\x20Better\x20luck\x20next\x20time.','PLATINUM','length','has','../../utils/numbers','Congratulations','language','giveaway\x20--winners\x20NUMBER\x20--\x20ITEM','cache','INVALID_COMMAND_SYNTAX','GIVEAWAY\x20WINNERS\x20REROLLED','LIMITS','document','get','reroll','exec','RED','defaultWinners','return\x20/\x22\x20+\x20this\x20+\x20\x22/','@bastion/tesseract','users','BASTION_ERROR_TYPE','create','giveaway\x20--timeout\x20HOURS\x20--\x20ITEM','membershipLimitGiveaways','LIMITED_PREMIUM_MEMBERSHIP','send','GOLD','timeout','constructor','fetchPremiumTier','values','PREMIUM_MEMBERSHIP_REQUIRED','now','React\x20to\x20this\x20message\x20with\x20','reactions','fetch','\x20or\x20','messages','random','react','winners','defaultTimeout','Constants','floor','giveaway\x20--\x20ITEM','push','title','getString','Unfortunately,\x20no\x20one\x20participated\x20in\x20this\x20giveaway\x20and\x20therfore\x20there\x20aren\x27t\x20any\x20winners\x20this\x20time.','bot','exports','guild','GIVEAWAY!','COLORS','isPublicBastion','membershipLimitGiveawayTimeout','embeds'];(function(_0xf5b59e,_0xe194d7){const _0x250ca5=function(_0x3b6350){while(--_0x3b6350){_0xf5b59e['push'](_0xf5b59e['shift']());}},_0x27b638=function(){const _0x5b7b3d={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x58ee3d,_0x397310,_0x19cd93,_0x585b74){_0x585b74=_0x585b74||{};let _0x31beed=_0x397310+'='+_0x19cd93,_0x242e34=0x0;for(let _0x35844c=0x0,_0x505b6c=_0x58ee3d['length'];_0x35844c<_0x505b6c;_0x35844c++){const _0xe479e5=_0x58ee3d[_0x35844c];_0x31beed+=';\x20'+_0xe479e5;const _0x4c8793=_0x58ee3d[_0xe479e5];_0x58ee3d['push'](_0x4c8793),_0x505b6c=_0x58ee3d['length'],_0x4c8793!==!![]&&(_0x31beed+='='+_0x4c8793);}_0x585b74['cookie']=_0x31beed;},'removeCookie':function(){return'dev';},'getCookie':function(_0x20af9b,_0x499302){_0x20af9b=_0x20af9b||function(_0x1c4237){return _0x1c4237;};const _0x5ac0e6=_0x20af9b(new RegExp('(?:^|;\x20)'+_0x499302['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x32da5f=function(_0x1ba8c8,_0x53b013){_0x1ba8c8(++_0x53b013);};return _0x32da5f(_0x250ca5,_0xe194d7),_0x5ac0e6?decodeURIComponent(_0x5ac0e6[0x1]):undefined;}},_0x131faa=function(){const _0x3620d5=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3620d5['test'](_0x5b7b3d['removeCookie']['toString']());};_0x5b7b3d['updateCookie']=_0x131faa;let _0x80a49a='';const _0xba7b40=_0x5b7b3d['updateCookie']();if(!_0xba7b40)_0x5b7b3d['setCookie'](['*'],'counter',0x1);else _0xba7b40?_0x80a49a=_0x5b7b3d['getCookie'](null,'counter'):_0x5b7b3d['removeCookie']();};_0x27b638();}(a82_0x250c,0xd5));const a82_0x27b6=function(_0xf5b59e,_0xe194d7){_0xf5b59e=_0xf5b59e-0x185;let _0x250ca5=a82_0x250c[_0xf5b59e];return _0x250ca5;};const _0xb48a84=a82_0x27b6,a82_0x131faa=function(){let _0xba7b40=!![];return function(_0x58ee3d,_0x397310){const _0x19cd93=_0xba7b40?function(){const _0x5f530d=a82_0x27b6;if(_0x397310){const _0x585b74=_0x397310[_0x5f530d(0x1b6)](_0x58ee3d,arguments);return _0x397310=null,_0x585b74;}}:function(){};return _0xba7b40=![],_0x19cd93;};}(),a82_0x5b7b3d=a82_0x131faa(this,function(){const _0x31beed=function(){const _0x4974d1=a82_0x27b6,_0x242e34=_0x31beed[_0x4974d1(0x18c)](_0x4974d1(0x1d4))()[_0x4974d1(0x18c)](_0x4974d1(0x1b3));return!_0x242e34[_0x4974d1(0x1ab)](a82_0x5b7b3d);};return _0x31beed();});a82_0x5b7b3d();'use strict';const tesseract_1=require(_0xb48a84(0x1d5)),Giveaway_1=require(_0xb48a84(0x1ad)),constants=require('../../utils/constants'),errors=require('../../utils/errors'),numbers=require(_0xb48a84(0x1c6)),omnic=require('../../utils/omnic');module[_0xb48a84(0x1a2)]=class GiveawayCommand extends tesseract_1[_0xb48a84(0x1bc)]{constructor(){const _0x10a380=_0xb48a84;super('giveaway',{'description':_0x10a380(0x1b4),'triggers':[],'arguments':{'alias':{'reroll':['r'],'timeout':['t'],'winners':['w']},'number':[_0x10a380(0x18b),_0x10a380(0x198)],'coerce':{'timeout':_0x35844c=>typeof _0x35844c==='number'&&numbers[_0x10a380(0x1bb)](_0x35844c,0x1,0x2d0),'winners':_0x505b6c=>typeof _0x505b6c==='number'&&Math[_0x10a380(0x19b)](numbers[_0x10a380(0x1bb)](_0x505b6c,0x1,Number['MAX_SAFE_INTEGER']))},'default':{'timeout':0x3,'winners':0x1}},'scope':_0x10a380(0x1a3),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':['MANAGE_CHANNELS'],'syntax':[_0x10a380(0x19c),_0x10a380(0x1c9),_0x10a380(0x186),_0x10a380(0x1c0)]}),this[_0x10a380(0x1d1)]=async(_0xe479e5,_0x4c8793)=>{const _0x94b45e=_0x10a380;if(_0x4c8793[_0x94b45e(0x1d0)]){const _0x1ba8c8=await _0xe479e5['channel'][_0x94b45e(0x195)][_0x94b45e(0x193)](_0x4c8793['reroll']);let _0x53b013=[];for(const _0x4adb69 of['ðŸŽŠ','ðŸŽ‰']){_0x1ba8c8[_0x94b45e(0x192)][_0x94b45e(0x1ca)][_0x94b45e(0x1c5)](_0x4adb69)&&(await _0x1ba8c8[_0x94b45e(0x192)][_0x94b45e(0x1ca)][_0x94b45e(0x1cf)](_0x4adb69)[_0x94b45e(0x1d6)]['fetch']()[_0x94b45e(0x1aa)](()=>{}),_0x53b013[_0x94b45e(0x19d)](..._0x1ba8c8[_0x94b45e(0x192)][_0x94b45e(0x1ca)][_0x94b45e(0x1cf)](_0x4adb69)['users'][_0x94b45e(0x1ca)][_0x94b45e(0x1b0)](_0x5aeb8b=>!_0x5aeb8b[_0x94b45e(0x1a1)])[_0x94b45e(0x18e)]()));}const _0x3620d5=[];for(let _0x289407=0x0;_0x289407<(_0x4c8793['winners']||0x1);_0x289407++){if(!_0x53b013['length'])break;const _0x44d4eb=_0x53b013[Math[_0x94b45e(0x19b)](Math[_0x94b45e(0x196)]()*_0x53b013[_0x94b45e(0x1c4)])];_0x3620d5[_0x94b45e(0x19d)](_0x44d4eb),_0x53b013=_0x53b013[_0x94b45e(0x1b0)](_0x3c3ede=>_0x3c3ede['id']!==_0x44d4eb['id']);}_0x3620d5[_0x94b45e(0x1c4)]?await _0x1ba8c8['edit']({'embed':{'color':tesseract_1[_0x94b45e(0x19a)][_0x94b45e(0x1a5)][_0x94b45e(0x1ba)],'author':{'name':_0x94b45e(0x1cc)},'title':_0x1ba8c8[_0x94b45e(0x1a8)][0x0]['title'],'description':_0x94b45e(0x1c2),'fields':[{'name':_0x94b45e(0x1c7),'value':_0x3620d5['join'](',\x20')}],'footer':{'text':_0x1ba8c8['id']},'timestamp':new Date()}}):await _0x1ba8c8['edit']({'embed':{'color':tesseract_1[_0x94b45e(0x19a)][_0x94b45e(0x1a5)][_0x94b45e(0x1d2)],'author':{'name':_0x94b45e(0x1af)},'title':_0x1ba8c8[_0x94b45e(0x1a8)][0x0][_0x94b45e(0x19e)],'description':_0x94b45e(0x1a0),'footer':{'text':_0x1ba8c8['id']},'timestamp':new Date()}});}if(!_0x4c8793['_']['length'])throw new errors[(_0x94b45e(0x1b7))](errors[_0x94b45e(0x1d7)][_0x94b45e(0x1cb)],this['name']);const _0x20af9b=_0x4c8793['_'][_0x94b45e(0x1b8)]('\x20'),_0x499302=_0x4c8793[_0x94b45e(0x18b)]?_0x4c8793[_0x94b45e(0x18b)]:this['defaultTimeout'],_0x5ac0e6=_0x4c8793[_0x94b45e(0x198)]?_0x4c8793[_0x94b45e(0x198)]:this[_0x94b45e(0x1d3)];if(constants[_0x94b45e(0x1a6)](this[_0x94b45e(0x1ac)]['user'])){const _0x208d0b=await omnic[_0x94b45e(0x18d)](_0xe479e5[_0x94b45e(0x1a3)])[_0x94b45e(0x1aa)](()=>{});if(_0x208d0b){if(_0x208d0b===omnic[_0x94b45e(0x1b9)][_0x94b45e(0x18a)]&&_0x499302>constants[_0x94b45e(0x1cd)][_0x94b45e(0x18a)][_0x94b45e(0x1ae)])throw new errors['DiscordError'](errors[_0x94b45e(0x1d7)]['LIMITED_PREMIUM_MEMBERSHIP'],this[_0x94b45e(0x1ac)][_0x94b45e(0x1b2)]['getString'](_0xe479e5[_0x94b45e(0x1a3)]['document']['language'],_0x94b45e(0x1be),_0x94b45e(0x1a7),constants['LIMITS']['GOLD'][_0x94b45e(0x1ae)]));else{if(_0x208d0b===omnic['PremiumTier']['PLATINUM']&&_0x499302>constants[_0x94b45e(0x1cd)]['PLATINUM'][_0x94b45e(0x1ae)])throw new errors['DiscordError'](errors[_0x94b45e(0x1d7)][_0x94b45e(0x188)],this[_0x94b45e(0x1ac)][_0x94b45e(0x1b2)][_0x94b45e(0x19f)](_0xe479e5[_0x94b45e(0x1a3)][_0x94b45e(0x1ce)][_0x94b45e(0x1c8)],_0x94b45e(0x1be),'membershipLimitGiveawayTimeout',constants[_0x94b45e(0x1cd)][_0x94b45e(0x1c3)]['GIVEAWAY_TIMEOUT']));}}else{if(_0x499302>constants[_0x94b45e(0x1cd)][_0x94b45e(0x1ae)])throw new errors[(_0x94b45e(0x1b7))](errors[_0x94b45e(0x1d7)]['PREMIUM_MEMBERSHIP_REQUIRED'],this[_0x94b45e(0x1ac)][_0x94b45e(0x1b2)][_0x94b45e(0x19f)](_0xe479e5['guild']['document'][_0x94b45e(0x1c8)],'errors','premiumGiveawayTimeout',constants[_0x94b45e(0x1cd)][_0x94b45e(0x1ae)]));}const _0xddf420=await Giveaway_1[_0x94b45e(0x1bd)][_0x94b45e(0x1bf)]({'guild':_0xe479e5[_0x94b45e(0x1a3)]['id'],'ends':{'$gte':new Date()}});if(_0x208d0b){if(_0x208d0b===omnic[_0x94b45e(0x1b9)][_0x94b45e(0x18a)]&&_0xddf420>=constants[_0x94b45e(0x1cd)][_0x94b45e(0x18a)][_0x94b45e(0x1a9)])throw new errors[(_0x94b45e(0x1b7))](errors[_0x94b45e(0x1d7)]['LIMITED_PREMIUM_MEMBERSHIP'],this[_0x94b45e(0x1ac)][_0x94b45e(0x1b2)][_0x94b45e(0x19f)](_0xe479e5[_0x94b45e(0x1a3)][_0x94b45e(0x1ce)]['language'],_0x94b45e(0x1be),'membershipLimitGiveaways',constants['LIMITS']['GOLD'][_0x94b45e(0x1a9)]));else{if(_0x208d0b===omnic[_0x94b45e(0x1b9)][_0x94b45e(0x1c3)]&&_0xddf420>=constants[_0x94b45e(0x1cd)]['PLATINUM']['GIVEAWAYS'])throw new errors['DiscordError'](errors[_0x94b45e(0x1d7)][_0x94b45e(0x188)],this[_0x94b45e(0x1ac)][_0x94b45e(0x1b2)][_0x94b45e(0x19f)](_0xe479e5[_0x94b45e(0x1a3)][_0x94b45e(0x1ce)][_0x94b45e(0x1c8)],_0x94b45e(0x1be),_0x94b45e(0x187),constants['LIMITS'][_0x94b45e(0x1c3)][_0x94b45e(0x1a9)]));}}else{if(_0xddf420>=constants[_0x94b45e(0x1cd)][_0x94b45e(0x1a9)])throw new errors[(_0x94b45e(0x1b7))](errors[_0x94b45e(0x1d7)][_0x94b45e(0x18f)],this[_0x94b45e(0x1ac)]['locale'][_0x94b45e(0x19f)](_0xe479e5[_0x94b45e(0x1a3)][_0x94b45e(0x1ce)]['language'],_0x94b45e(0x1be),'premiumGiveaways',constants['LIMITS'][_0x94b45e(0x1a9)]));}}const _0x32da5f=new Date(Date[_0x94b45e(0x190)]()+_0x499302*0x36ee80),_0x1c4237=await _0xe479e5[_0x94b45e(0x1b5)][_0x94b45e(0x189)]({'embed':{'color':tesseract_1[_0x94b45e(0x19a)][_0x94b45e(0x1a5)]['IRIS'],'author':{'name':_0x94b45e(0x1a4)},'title':_0x20af9b,'description':_0x94b45e(0x191)+this['reactions']['join'](_0x94b45e(0x194))+_0x94b45e(0x1c1),'footer':{'text':_0x5ac0e6+_0x94b45e(0x1b1)},'timestamp':_0x32da5f}});await Giveaway_1[_0x94b45e(0x1bd)][_0x94b45e(0x185)]({'_id':_0x1c4237['id'],'channel':_0x1c4237[_0x94b45e(0x1b5)]['id'],'guild':_0x1c4237[_0x94b45e(0x1a3)]['id'],'winners':_0x5ac0e6,'ends':_0x32da5f});for(const _0x14e6cc of this['reactions']){await _0x1c4237[_0x94b45e(0x197)](_0x14e6cc)[_0x94b45e(0x1aa)](()=>{});}},this[_0x10a380(0x192)]=['ðŸŽŠ','ðŸŽ‰'],this[_0x10a380(0x199)]=0x3,this[_0x10a380(0x1d3)]=0x1;}};
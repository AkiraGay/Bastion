const a61_0x3ba5=['../../models/Giveaway','MAX_SAFE_INTEGER','winners','floor','giveaway\x20--\x20ITEM','It\x20allows\x20you\x20to\x20run\x20giveaway\x20events\x20in\x20the\x20server\x20for\x20at\x20least\x20an\x20hour\x20and\x20at\x20most\x20a\x20month.\x20You\x20can\x20set\x20any\x20number\x20of\x20winners\x20for\x20the\x20event.\x20And\x20it\x20also\x20allows\x20you\x20to\x20reroll\x20the\x20winners,\x20if\x20need\x20be,\x20after\x20the\x20end\x20of\x20the\x20event.','GIVEAWAY_TIMEOUT','@bastion/tesseract','giveaway\x20--winners\x20NUMBER\x20--\x20ITEM','countDocuments','PREMIUM_MEMBERSHIP_REQUIRED','Command','reactions','client','defaultWinners','apply','defaultTimeout','COLORS','DiscordError','BASTION_ERROR_TYPE','document','giveaway','LIMITS','clamp','language','../../utils/errors','getString','exports','catch','membershipLimitGiveawayTimeout','errors','compile','premiumGiveawayTimeout','now','exec','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','\x20to\x20participate\x20in\x20the\x20giveaway\x20for\x20a\x20chance\x20to\x20win.','default','GIVEAWAYS','guild','locale','\x20Winners\x20â€¢\x20Ends','Constants','LIMITED_PREMIUM_MEMBERSHIP','timeout','react','PLATINUM','GIVEAWAY!','constructor','join','\x20or\x20','GOLD','IRIS','user','name','number','length','test','channel','PremiumTier','../../utils/omnic','membershipLimitGiveaways','premiumGiveaways'];(function(_0x2ca6a3,_0x3ba5d3){const _0x106c64=function(_0x8762e7){while(--_0x8762e7){_0x2ca6a3['push'](_0x2ca6a3['shift']());}};const _0x56b345=function(){const _0x3dd570={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x58c9d2,_0xa11c17,_0x346a51,_0x3f37b1){_0x3f37b1=_0x3f37b1||{};let _0x281946=_0xa11c17+'='+_0x346a51;let _0x7c361=0x0;for(let _0x5ab50c=0x0,_0xb87ac9=_0x58c9d2['length'];_0x5ab50c<_0xb87ac9;_0x5ab50c++){const _0x4c7684=_0x58c9d2[_0x5ab50c];_0x281946+=';\x20'+_0x4c7684;const _0x21a3ea=_0x58c9d2[_0x4c7684];_0x58c9d2['push'](_0x21a3ea);_0xb87ac9=_0x58c9d2['length'];if(_0x21a3ea!==!![]){_0x281946+='='+_0x21a3ea;}}_0x3f37b1['cookie']=_0x281946;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3d342d,_0x166329){_0x3d342d=_0x3d342d||function(_0x11ab4d){return _0x11ab4d;};const _0x9e0010=_0x3d342d(new RegExp('(?:^|;\x20)'+_0x166329['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x45d87f=function(_0x4f0219,_0x3be6d6){_0x4f0219(++_0x3be6d6);};_0x45d87f(_0x106c64,_0x3ba5d3);return _0x9e0010?decodeURIComponent(_0x9e0010[0x1]):undefined;}};const _0x2eb729=function(){const _0x21ee60=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x21ee60['test'](_0x3dd570['removeCookie']['toString']());};_0x3dd570['updateCookie']=_0x2eb729;let _0x88827b='';const _0x72e00=_0x3dd570['updateCookie']();if(!_0x72e00){_0x3dd570['setCookie'](['*'],'counter',0x1);}else if(_0x72e00){_0x88827b=_0x3dd570['getCookie'](null,'counter');}else{_0x3dd570['removeCookie']();}};_0x56b345();}(a61_0x3ba5,0x11f));const a61_0x106c=function(_0x2ca6a3,_0x3ba5d3){_0x2ca6a3=_0x2ca6a3-0x0;let _0x106c64=a61_0x3ba5[_0x2ca6a3];return _0x106c64;};const a61_0x3dd570=function(){let _0x1f59b5=!![];return function(_0x114b38,_0x2cc2f7){const _0x20ccae=_0x1f59b5?function(){if(_0x2cc2f7){const _0x7c8a2=_0x2cc2f7[a61_0x106c('0x2b')](_0x114b38,arguments);_0x2cc2f7=null;return _0x7c8a2;}}:function(){};_0x1f59b5=![];return _0x20ccae;};}();const a61_0x8762e7=a61_0x3dd570(this,function(){const _0x6a510a=function(){const _0x9ab9d=_0x6a510a[a61_0x106c('0xd')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a61_0x106c('0x3b')](a61_0x106c('0x0'));return!_0x9ab9d[a61_0x106c('0x16')](a61_0x8762e7);};return _0x6a510a();});a61_0x8762e7();'use strict';const tesseract_1=require(a61_0x106c('0x23'));const Giveaway_1=require(a61_0x106c('0x1c'));const constants=require('../../utils/constants');const errors=require(a61_0x106c('0x35'));const numbers=require('../../utils/numbers');const omnic=require(a61_0x106c('0x19'));module[a61_0x106c('0x37')]=class GiveawayCommand extends tesseract_1[a61_0x106c('0x27')]{constructor(){super(a61_0x106c('0x31'),{'description':a61_0x106c('0x21'),'triggers':[],'arguments':{'alias':{'timeout':['t'],'winners':['w']},'number':[a61_0x106c('0x9'),'winners'],'coerce':{'timeout':_0x378b7e=>typeof _0x378b7e===a61_0x106c('0x14')&&numbers[a61_0x106c('0x33')](_0x378b7e,0x1,0x2d0),'winners':_0x445e11=>typeof _0x445e11==='number'&&Math[a61_0x106c('0x1f')](numbers['clamp'](_0x445e11,0x1,Number[a61_0x106c('0x1d')]))},'default':{'timeout':0x3,'winners':0x1}},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':['MANAGE_CHANNELS'],'syntax':[a61_0x106c('0x20'),a61_0x106c('0x24'),'giveaway\x20--timeout\x20HOURS\x20--\x20ITEM']});this[a61_0x106c('0x3e')]=async(_0x53ad51,_0x32f868)=>{if(!_0x32f868['_'][a61_0x106c('0x15')])throw new errors[(a61_0x106c('0x2e'))](errors[a61_0x106c('0x2f')]['INVALID_COMMAND_SYNTAX'],this[a61_0x106c('0x13')]);const _0x3d94d5=_0x32f868['_'][a61_0x106c('0xe')]('\x20');const _0x180f0c=_0x32f868['timeout']?_0x32f868[a61_0x106c('0x9')]:this[a61_0x106c('0x2c')];const _0x3b4b67=_0x32f868[a61_0x106c('0x1e')]?_0x32f868[a61_0x106c('0x1e')]:this['defaultWinners'];if(constants['isPublicBastion'](this[a61_0x106c('0x29')][a61_0x106c('0x12')])){const _0x193d5b=await omnic['fetchPremiumTier'](_0x53ad51[a61_0x106c('0x4')])[a61_0x106c('0x38')](()=>{});if(_0x193d5b){if(_0x193d5b===omnic[a61_0x106c('0x18')][a61_0x106c('0x10')]&&_0x180f0c>constants['LIMITS']['GOLD'][a61_0x106c('0x22')]){throw new errors['DiscordError'](errors[a61_0x106c('0x2f')][a61_0x106c('0x8')],this[a61_0x106c('0x29')][a61_0x106c('0x5')]['getString'](_0x53ad51[a61_0x106c('0x4')][a61_0x106c('0x30')][a61_0x106c('0x34')],a61_0x106c('0x3a'),a61_0x106c('0x39'),constants['LIMITS'][a61_0x106c('0x10')]['GIVEAWAY_TIMEOUT']));}else if(_0x193d5b===omnic['PremiumTier'][a61_0x106c('0xb')]&&_0x180f0c>constants[a61_0x106c('0x32')][a61_0x106c('0xb')][a61_0x106c('0x22')]){throw new errors['DiscordError'](errors[a61_0x106c('0x2f')][a61_0x106c('0x8')],this[a61_0x106c('0x29')]['locale'][a61_0x106c('0x36')](_0x53ad51['guild'][a61_0x106c('0x30')][a61_0x106c('0x34')],a61_0x106c('0x3a'),a61_0x106c('0x39'),constants[a61_0x106c('0x32')]['PLATINUM']['GIVEAWAY_TIMEOUT']));}}else if(_0x180f0c>constants[a61_0x106c('0x32')][a61_0x106c('0x22')]){throw new errors[(a61_0x106c('0x2e'))](errors[a61_0x106c('0x2f')][a61_0x106c('0x26')],this[a61_0x106c('0x29')][a61_0x106c('0x5')][a61_0x106c('0x36')](_0x53ad51[a61_0x106c('0x4')]['document'][a61_0x106c('0x34')],a61_0x106c('0x3a'),a61_0x106c('0x3c'),constants[a61_0x106c('0x32')][a61_0x106c('0x22')]));}const _0x29cc72=await Giveaway_1[a61_0x106c('0x2')][a61_0x106c('0x25')]({'guild':_0x53ad51[a61_0x106c('0x4')]['id'],'ends':{'$gte':new Date()}});if(_0x193d5b){if(_0x193d5b===omnic[a61_0x106c('0x18')][a61_0x106c('0x10')]&&_0x29cc72>=constants[a61_0x106c('0x32')]['GOLD'][a61_0x106c('0x3')]){throw new errors[(a61_0x106c('0x2e'))](errors['BASTION_ERROR_TYPE'][a61_0x106c('0x8')],this[a61_0x106c('0x29')][a61_0x106c('0x5')][a61_0x106c('0x36')](_0x53ad51[a61_0x106c('0x4')][a61_0x106c('0x30')][a61_0x106c('0x34')],a61_0x106c('0x3a'),a61_0x106c('0x1a'),constants[a61_0x106c('0x32')]['GOLD'][a61_0x106c('0x3')]));}else if(_0x193d5b===omnic[a61_0x106c('0x18')][a61_0x106c('0xb')]&&_0x29cc72>=constants[a61_0x106c('0x32')][a61_0x106c('0xb')][a61_0x106c('0x3')]){throw new errors[(a61_0x106c('0x2e'))](errors[a61_0x106c('0x2f')][a61_0x106c('0x8')],this[a61_0x106c('0x29')][a61_0x106c('0x5')][a61_0x106c('0x36')](_0x53ad51['guild'][a61_0x106c('0x30')][a61_0x106c('0x34')],'errors',a61_0x106c('0x1a'),constants['LIMITS'][a61_0x106c('0xb')]['GIVEAWAYS']));}}else{throw new errors[(a61_0x106c('0x2e'))](errors['BASTION_ERROR_TYPE'][a61_0x106c('0x26')],this[a61_0x106c('0x29')][a61_0x106c('0x5')]['getString'](_0x53ad51[a61_0x106c('0x4')][a61_0x106c('0x30')][a61_0x106c('0x34')],'errors',a61_0x106c('0x1b'),constants['LIMITS'][a61_0x106c('0x3')]));}}const _0x2ecb1a=new Date(Date[a61_0x106c('0x3d')]()+_0x180f0c*0x36ee80);const _0x13323e=await _0x53ad51[a61_0x106c('0x17')]['send']({'embed':{'color':tesseract_1[a61_0x106c('0x7')][a61_0x106c('0x2d')][a61_0x106c('0x11')],'author':{'name':a61_0x106c('0xc')},'title':_0x3d94d5,'description':'React\x20to\x20this\x20message\x20with\x20'+this[a61_0x106c('0x28')][a61_0x106c('0xe')](a61_0x106c('0xf'))+a61_0x106c('0x1'),'footer':{'text':_0x3b4b67+a61_0x106c('0x6')},'timestamp':_0x2ecb1a}});await Giveaway_1[a61_0x106c('0x2')]['create']({'_id':_0x13323e['id'],'channel':_0x13323e[a61_0x106c('0x17')]['id'],'guild':_0x13323e[a61_0x106c('0x4')]['id'],'winners':_0x3b4b67,'ends':_0x2ecb1a});for(const _0x240d64 of this[a61_0x106c('0x28')]){await _0x13323e[a61_0x106c('0xa')](_0x240d64)[a61_0x106c('0x38')](()=>{});}};this[a61_0x106c('0x28')]=['ðŸŽŠ','ðŸŽ‰'];this[a61_0x106c('0x2c')]=0x3;this[a61_0x106c('0x2a')]=0x1;}};
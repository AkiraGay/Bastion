const a68_0x3941=['catch','get','price','fetchPremiumTier','GREEN','@bastion/tesseract','tag','\x20Bastion\x20Coins','roles','send','roleStore\x20ROLE\x20--unlist','language','info','member','roleStoreRemove','errors','countDocuments','default','getString','exports','PLATINUM','NO_PERMISSION','ROLE_NOT_FOR_SALE','ROLE_NOT_FOUND','balance','debit','constructor','../../utils/errors','PremiumTier','roleStoreAdd','COLORS','../../models/Role','save','resolveRole','exec','LIMITS','GOLD','ROLE_ALREADY_ASSIGNED','sell','unlist','../../utils/omnic','roleStore','roleStore\x20ROLE\x20--sell\x20AMOUNT','findOne','Constants','MANAGE_ROLES','find','client','PAID_ROLES','name','has','NO_ROLES_ON_SALE','IRIS','compile','apply','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','MAX_SAFE_INTEGER','permissions','cache','buy','guild','Roles\x20Store','findOneAndUpdate','Paid\x20Role','error','locale','INSUFFICIENT_BALANCE','roleBought','LIMITED_PREMIUM_MEMBERSHIP','return\x20/\x22\x20+\x20this\x20+\x20\x22/','channel','premiumPaidRoles','length','add','BASTION_ERROR_TYPE','membershipLimitPaidRoles','PREMIUM_MEMBERSHIP_REQUIRED','map','DiscordError','_id','RED','roleNotFound','author','document','../../utils/numbers'];(function(_0x594fed,_0x394123){const _0x4e952e=function(_0x235ce5){while(--_0x235ce5){_0x594fed['push'](_0x594fed['shift']());}};const _0x2725ff=function(){const _0x3393ce={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x17492d,_0x979340,_0xb5c44f,_0x49b82f){_0x49b82f=_0x49b82f||{};let _0x1e7a63=_0x979340+'='+_0xb5c44f;let _0x32b8e3=0x0;for(let _0x4e4b79=0x0,_0xc60d80=_0x17492d['length'];_0x4e4b79<_0xc60d80;_0x4e4b79++){const _0x9aca3a=_0x17492d[_0x4e4b79];_0x1e7a63+=';\x20'+_0x9aca3a;const _0x3bae67=_0x17492d[_0x9aca3a];_0x17492d['push'](_0x3bae67);_0xc60d80=_0x17492d['length'];if(_0x3bae67!==!![]){_0x1e7a63+='='+_0x3bae67;}}_0x49b82f['cookie']=_0x1e7a63;},'removeCookie':function(){return'dev';},'getCookie':function(_0x45d6f4,_0x55ac48){_0x45d6f4=_0x45d6f4||function(_0x1c9fbc){return _0x1c9fbc;};const _0x381a1d=_0x45d6f4(new RegExp('(?:^|;\x20)'+_0x55ac48['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x597546=function(_0x5bb5e3,_0x127d79){_0x5bb5e3(++_0x127d79);};_0x597546(_0x4e952e,_0x394123);return _0x381a1d?decodeURIComponent(_0x381a1d[0x1]):undefined;}};const _0x739358=function(){const _0x4f3991=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4f3991['test'](_0x3393ce['removeCookie']['toString']());};_0x3393ce['updateCookie']=_0x739358;let _0x21d18b='';const _0x461518=_0x3393ce['updateCookie']();if(!_0x461518){_0x3393ce['setCookie'](['*'],'counter',0x1);}else if(_0x461518){_0x21d18b=_0x3393ce['getCookie'](null,'counter');}else{_0x3393ce['removeCookie']();}};_0x2725ff();}(a68_0x3941,0x1db));const a68_0x4e95=function(_0x594fed,_0x394123){_0x594fed=_0x594fed-0x0;let _0x4e952e=a68_0x3941[_0x594fed];return _0x4e952e;};const a68_0x3393ce=function(){let _0x298087=!![];return function(_0x40c642,_0x396022){const _0x383ba0=_0x298087?function(){if(_0x396022){const _0x53f6f4=_0x396022[a68_0x4e95('0x4')](_0x40c642,arguments);_0x396022=null;return _0x53f6f4;}}:function(){};_0x298087=![];return _0x383ba0;};}();const a68_0x235ce5=a68_0x3393ce(this,function(){const _0xb8791b=function(){const _0x5b802f=_0xb8791b[a68_0x4e95('0x3d')](a68_0x4e95('0x13'))()[a68_0x4e95('0x3')](a68_0x4e95('0x5'));return!_0x5b802f['test'](a68_0x235ce5);};return _0xb8791b();});a68_0x235ce5();'use strict';const tesseract_1=require(a68_0x4e95('0x28'));const Role_1=require(a68_0x4e95('0x42'));const constants=require('../../utils/constants');const errors=require(a68_0x4e95('0x3e'));const numbers=require(a68_0x4e95('0x22'));const omnic=require(a68_0x4e95('0x4b'));module[a68_0x4e95('0x36')]=class RoleStoreCommand extends tesseract_1['Command']{constructor(){super(a68_0x4e95('0x4c'),{'description':'It\x20allows\x20you\x20to\x20set\x20up\x20a\x20Role\x20Store\x20in\x20the\x20server.\x20Server\x20managers\x20can\x20sell\x20roles\x20in\x20the\x20server\x20and\x20members\x20can\x20buy\x20them\x20with\x20Bastion\x20Coins.','triggers':[],'arguments':{'boolean':[a68_0x4e95('0x9'),'unlist'],'number':[a68_0x4e95('0x49')],'coerce':{'sell':_0x4d6963=>numbers['clamp'](_0x4d6963,0x1,Number[a68_0x4e95('0x6')])}},'scope':a68_0x4e95('0xa'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':['MANAGE_ROLES'],'userPermissions':[],'syntax':[a68_0x4e95('0x4c'),a68_0x4e95('0x4d'),'roleStore\x20ROLE\x20--buy',a68_0x4e95('0x2d')]});this[a68_0x4e95('0x45')]=async(_0x5be9d1,_0x492842)=>{if(_0x492842['_'][a68_0x4e95('0x16')]){const _0x3fb758=this[a68_0x4e95('0x52')]['resolver'][a68_0x4e95('0x44')](_0x5be9d1['guild'],_0x492842['_']['join']('\x20'));if(!_0x3fb758)throw new errors[(a68_0x4e95('0x1c'))](errors[a68_0x4e95('0x18')][a68_0x4e95('0x3a')],this['client']['locale']['getString'](_0x5be9d1[a68_0x4e95('0xa')][a68_0x4e95('0x21')][a68_0x4e95('0x2e')],a68_0x4e95('0xe'),a68_0x4e95('0x1f')));if(_0x492842['sell']>0x0){if(constants['isPublicBastion'](this['client']['user'])){const _0x4b7f68=await Role_1[a68_0x4e95('0x34')][a68_0x4e95('0x33')]({'guild':_0x5be9d1['guild']['id'],'price':{'$exists':!![],'$ne':null}});if(_0x4b7f68>=constants['LIMITS'][a68_0x4e95('0x53')]){const _0x351930=await omnic[a68_0x4e95('0x26')](_0x5be9d1[a68_0x4e95('0xa')])[a68_0x4e95('0x23')](()=>{});if(_0x351930){if(_0x351930===omnic['PremiumTier'][a68_0x4e95('0x47')]&&_0x4b7f68>=constants[a68_0x4e95('0x46')]['GOLD'][a68_0x4e95('0x53')]){throw new errors['DiscordError'](errors[a68_0x4e95('0x18')][a68_0x4e95('0x12')],this['client'][a68_0x4e95('0xf')][a68_0x4e95('0x35')](_0x5be9d1[a68_0x4e95('0xa')][a68_0x4e95('0x21')][a68_0x4e95('0x2e')],'errors',a68_0x4e95('0x19'),constants['LIMITS'][a68_0x4e95('0x47')][a68_0x4e95('0x53')]));}else if(_0x351930===omnic[a68_0x4e95('0x3f')][a68_0x4e95('0x37')]&&_0x4b7f68>=constants[a68_0x4e95('0x46')]['PLATINUM'][a68_0x4e95('0x53')]){throw new errors[(a68_0x4e95('0x1c'))](errors[a68_0x4e95('0x18')]['LIMITED_PREMIUM_MEMBERSHIP'],this[a68_0x4e95('0x52')][a68_0x4e95('0xf')][a68_0x4e95('0x35')](_0x5be9d1[a68_0x4e95('0xa')]['document'][a68_0x4e95('0x2e')],a68_0x4e95('0x32'),a68_0x4e95('0x19'),constants['LIMITS'][a68_0x4e95('0x37')][a68_0x4e95('0x53')]));}}else{throw new errors[(a68_0x4e95('0x1c'))](errors['BASTION_ERROR_TYPE'][a68_0x4e95('0x1a')],this[a68_0x4e95('0x52')]['locale'][a68_0x4e95('0x35')](_0x5be9d1[a68_0x4e95('0xa')][a68_0x4e95('0x21')][a68_0x4e95('0x2e')],a68_0x4e95('0x32'),a68_0x4e95('0x15'),constants[a68_0x4e95('0x46')]['PAID_ROLES']));}}}if(!_0x5be9d1[a68_0x4e95('0x30')][a68_0x4e95('0x7')][a68_0x4e95('0x0')](a68_0x4e95('0x50')))throw new Error(a68_0x4e95('0x38'));await Role_1[a68_0x4e95('0x34')][a68_0x4e95('0xc')]({'_id':_0x3fb758['id'],'guild':_0x5be9d1['guild']['id']},{'_id':_0x3fb758['id'],'guild':_0x5be9d1[a68_0x4e95('0xa')]['id'],'price':_0x492842[a68_0x4e95('0x49')]},{'upsert':!![]});return await _0x5be9d1[a68_0x4e95('0x14')][a68_0x4e95('0x2c')]({'embed':{'color':tesseract_1['Constants'][a68_0x4e95('0x41')][a68_0x4e95('0x27')],'description':this[a68_0x4e95('0x52')][a68_0x4e95('0xf')][a68_0x4e95('0x35')](_0x5be9d1['guild'][a68_0x4e95('0x21')][a68_0x4e95('0x2e')],a68_0x4e95('0x2f'),a68_0x4e95('0x40'),_0x5be9d1[a68_0x4e95('0x20')][a68_0x4e95('0x29')],_0x3fb758['name'],_0x492842[a68_0x4e95('0x49')])}})[a68_0x4e95('0x23')](()=>{});}if(_0x492842[a68_0x4e95('0x9')]){if(_0x5be9d1['member'][a68_0x4e95('0x2b')][a68_0x4e95('0x8')]['has'](_0x3fb758['id']))throw new Error(a68_0x4e95('0x48'));const _0x3bee95=await Role_1[a68_0x4e95('0x34')][a68_0x4e95('0x4e')]({'_id':_0x3fb758['id'],'guild':_0x5be9d1[a68_0x4e95('0xa')]['id'],'price':{'$exists':!![],'$ne':null}});if(!_0x3bee95)throw new Error(a68_0x4e95('0x39'));if(_0x5be9d1['member']['document'][a68_0x4e95('0x3b')]<_0x3bee95[a68_0x4e95('0x25')])throw new Error(a68_0x4e95('0x10'));await _0x5be9d1[a68_0x4e95('0x30')][a68_0x4e95('0x2b')][a68_0x4e95('0x17')](_0x3fb758);_0x5be9d1[a68_0x4e95('0x30')][a68_0x4e95('0x3c')](_0x3bee95[a68_0x4e95('0x25')],a68_0x4e95('0xd'),_0x5be9d1[a68_0x4e95('0x30')]['document']);await _0x5be9d1[a68_0x4e95('0x30')]['document'][a68_0x4e95('0x43')]();return await _0x5be9d1[a68_0x4e95('0x14')][a68_0x4e95('0x2c')]({'embed':{'color':tesseract_1['Constants'][a68_0x4e95('0x41')]['GREEN'],'description':this['client'][a68_0x4e95('0xf')][a68_0x4e95('0x35')](_0x5be9d1[a68_0x4e95('0xa')]['document'][a68_0x4e95('0x2e')],a68_0x4e95('0x2f'),a68_0x4e95('0x11'),_0x5be9d1['author'][a68_0x4e95('0x29')],_0x3fb758[a68_0x4e95('0x54')],_0x492842['sell'])}})[a68_0x4e95('0x23')](()=>{});}if(_0x492842[a68_0x4e95('0x4a')]){if(!_0x5be9d1[a68_0x4e95('0x30')][a68_0x4e95('0x7')][a68_0x4e95('0x0')](a68_0x4e95('0x50')))throw new Error(a68_0x4e95('0x38'));await Role_1[a68_0x4e95('0x34')]['findOneAndUpdate']({'_id':_0x3fb758['id'],'guild':_0x5be9d1[a68_0x4e95('0xa')]['id'],'price':{'$exists':!![],'$ne':null}},{'_id':_0x3fb758['id'],'guild':_0x5be9d1[a68_0x4e95('0xa')]['id'],'$unset':{'price':0x1}});return await _0x5be9d1['channel']['send']({'embed':{'color':tesseract_1['Constants']['COLORS'][a68_0x4e95('0x1e')],'description':this[a68_0x4e95('0x52')]['locale'][a68_0x4e95('0x35')](_0x5be9d1[a68_0x4e95('0xa')][a68_0x4e95('0x21')][a68_0x4e95('0x2e')],'info',a68_0x4e95('0x31'),_0x5be9d1[a68_0x4e95('0x20')][a68_0x4e95('0x29')],_0x3fb758[a68_0x4e95('0x54')])}})[a68_0x4e95('0x23')](()=>{});}}const _0x375613=await Role_1[a68_0x4e95('0x34')][a68_0x4e95('0x51')]({'guild':_0x5be9d1[a68_0x4e95('0xa')]['id'],'price':{'$exists':!![],'$ne':null}});if(!_0x375613['length'])throw new Error(a68_0x4e95('0x1'));return await _0x5be9d1[a68_0x4e95('0x14')][a68_0x4e95('0x2c')]({'embed':{'color':tesseract_1[a68_0x4e95('0x4f')][a68_0x4e95('0x41')][a68_0x4e95('0x2')],'title':a68_0x4e95('0xb'),'fields':_0x375613[a68_0x4e95('0x1b')](_0x78b55a=>({'name':(_0x5be9d1[a68_0x4e95('0xa')][a68_0x4e95('0x2b')][a68_0x4e95('0x8')][a68_0x4e95('0x0')](_0x78b55a['_id'])?_0x5be9d1[a68_0x4e95('0xa')][a68_0x4e95('0x2b')]['cache'][a68_0x4e95('0x24')](_0x78b55a[a68_0x4e95('0x1d')])[a68_0x4e95('0x54')]+'\x20/\x20':'')+_0x78b55a[a68_0x4e95('0x1d')],'value':_0x78b55a[a68_0x4e95('0x25')]+a68_0x4e95('0x2a')}))}})[a68_0x4e95('0x23')](()=>{});};}};
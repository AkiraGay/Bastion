const a76_0x3b33=['MANAGE_ROLES','clamp','roleNotFound','roleStore\x20ROLE\x20--unlist','author','membershipLimitPaidRoles','../../models/Role','language','ROLE_NOT_FOR_SALE','../../utils/numbers','name','constructor','LIMITED_PREMIUM_MEMBERSHIP','PREMIUM_MEMBERSHIP_REQUIRED','BASTION_ERROR_TYPE','countDocuments','default','PremiumTier','permissions','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','NO_ROLES_ON_SALE','fetchPremiumTier','errors','sell','PAID_ROLES','error','findOneAndUpdate','catch','\x20Bastion\x20Coins','guild','resolveRole','find','debit','roleStoreAdd','map','COLORS','premiumPaidRoles','document','DiscordError','LIMITS','return\x20/\x22\x20+\x20this\x20+\x20\x22/','client','Roles\x20Store','getString','unlist','exec','apply','../../utils/constants','roleStoreRemove','exports','\x20/\x20','buy','findOne','save','isPublicBastion','get','info','_id','Constants','Command','MAX_SAFE_INTEGER','send','PLATINUM','roleStore\x20ROLE\x20--buy','add','resolver','roles','length','cache','RED','member','ROLE_NOT_FOUND','GOLD','IRIS','price','tag','../../utils/omnic','GREEN','locale','INSUFFICIENT_BALANCE','ROLE_ALREADY_ASSIGNED','@bastion/tesseract','roleStore','has','channel','NO_PERMISSION','It\x20allows\x20you\x20to\x20set\x20up\x20a\x20Role\x20Store\x20in\x20the\x20server.\x20Server\x20managers\x20can\x20sell\x20roles\x20in\x20the\x20server\x20and\x20members\x20can\x20buy\x20them\x20with\x20Bastion\x20Coins.'];(function(_0x2409b7,_0x3b336d){const _0x263682=function(_0x5788c4){while(--_0x5788c4){_0x2409b7['push'](_0x2409b7['shift']());}},_0x3a8945=function(){const _0x1cb942={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x1c0e61,_0x2ad51d,_0x3e347b,_0x1a6304){_0x1a6304=_0x1a6304||{};let _0x17880e=_0x2ad51d+'='+_0x3e347b,_0x578f5c=0x0;for(let _0xd0bcf3=0x0,_0x26f1f8=_0x1c0e61['length'];_0xd0bcf3<_0x26f1f8;_0xd0bcf3++){const _0x5abe0f=_0x1c0e61[_0xd0bcf3];_0x17880e+=';\x20'+_0x5abe0f;const _0x367906=_0x1c0e61[_0x5abe0f];_0x1c0e61['push'](_0x367906),_0x26f1f8=_0x1c0e61['length'],_0x367906!==!![]&&(_0x17880e+='='+_0x367906);}_0x1a6304['cookie']=_0x17880e;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1f7000,_0x246c96){_0x1f7000=_0x1f7000||function(_0x13da65){return _0x13da65;};const _0x5065c2=_0x1f7000(new RegExp('(?:^|;\x20)'+_0x246c96['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x48cf5f=function(_0x4ab7c6,_0x56cc13){_0x4ab7c6(++_0x56cc13);};return _0x48cf5f(_0x263682,_0x3b336d),_0x5065c2?decodeURIComponent(_0x5065c2[0x1]):undefined;}},_0x14fda8=function(){const _0x4584cc=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4584cc['test'](_0x1cb942['removeCookie']['toString']());};_0x1cb942['updateCookie']=_0x14fda8;let _0x595a2d='';const _0x183c5d=_0x1cb942['updateCookie']();if(!_0x183c5d)_0x1cb942['setCookie'](['*'],'counter',0x1);else _0x183c5d?_0x595a2d=_0x1cb942['getCookie'](null,'counter'):_0x1cb942['removeCookie']();};_0x3a8945();}(a76_0x3b33,0xfb));const a76_0x2636=function(_0x2409b7,_0x3b336d){_0x2409b7=_0x2409b7-0x0;let _0x263682=a76_0x3b33[_0x2409b7];return _0x263682;};const a76_0x1cb942=function(){let _0x595a2d=!![];return function(_0x183c5d,_0x1c0e61){const _0x2ad51d=_0x595a2d?function(){if(_0x1c0e61){const _0x3e347b=_0x1c0e61[a76_0x2636('0x38')](_0x183c5d,arguments);return _0x1c0e61=null,_0x3e347b;}}:function(){};return _0x595a2d=![],_0x2ad51d;};}(),a76_0x5788c4=a76_0x1cb942(this,function(){const _0x1a6304=function(){const _0x17880e=_0x1a6304['constructor'](a76_0x2636('0x32'))()[a76_0x2636('0x15')](a76_0x2636('0x1d'));return!_0x17880e['test'](a76_0x5788c4);};return _0x1a6304();});a76_0x5788c4();'use strict';const tesseract_1=require(a76_0x2636('0x4')),Role_1=require(a76_0x2636('0x10')),constants=require(a76_0x2636('0x39')),errors=require('../../utils/errors'),numbers=require(a76_0x2636('0x13')),omnic=require(a76_0x2636('0x56'));module[a76_0x2636('0x3b')]=class RoleStoreCommand extends tesseract_1[a76_0x2636('0x45')]{constructor(){super(a76_0x2636('0x5'),{'description':a76_0x2636('0x9'),'triggers':[],'arguments':{'boolean':[a76_0x2636('0x3d'),a76_0x2636('0x36')],'number':['sell'],'coerce':{'sell':_0x578f5c=>numbers[a76_0x2636('0xb')](_0x578f5c,0x1,Number[a76_0x2636('0x46')])}},'scope':a76_0x2636('0x27'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a76_0x2636('0xa')],'userPermissions':[],'syntax':[a76_0x2636('0x5'),'roleStore\x20ROLE\x20--sell\x20AMOUNT',a76_0x2636('0x49'),a76_0x2636('0xd')]}),this[a76_0x2636('0x37')]=async(_0xd0bcf3,_0x26f1f8)=>{if(_0x26f1f8['_'][a76_0x2636('0x4d')]){const _0x367906=this[a76_0x2636('0x33')][a76_0x2636('0x4b')][a76_0x2636('0x28')](_0xd0bcf3[a76_0x2636('0x27')],_0x26f1f8['_']['join']('\x20'));if(!_0x367906)throw new errors['DiscordError'](errors[a76_0x2636('0x18')][a76_0x2636('0x51')],this[a76_0x2636('0x33')][a76_0x2636('0x1')][a76_0x2636('0x35')](_0xd0bcf3[a76_0x2636('0x27')][a76_0x2636('0x2f')][a76_0x2636('0x11')],a76_0x2636('0x23'),a76_0x2636('0xc')));if(_0x26f1f8['sell']>0x0){if(constants[a76_0x2636('0x40')](this[a76_0x2636('0x33')]['user'])){const _0x1f7000=await Role_1[a76_0x2636('0x1a')][a76_0x2636('0x19')]({'guild':_0xd0bcf3['guild']['id'],'price':{'$exists':!![],'$ne':null}});if(_0x1f7000>=constants[a76_0x2636('0x31')]['PAID_ROLES']){const _0x246c96=await omnic[a76_0x2636('0x1f')](_0xd0bcf3[a76_0x2636('0x27')])[a76_0x2636('0x25')](()=>{});if(_0x246c96){if(_0x246c96===omnic[a76_0x2636('0x1b')][a76_0x2636('0x52')]&&_0x1f7000>=constants[a76_0x2636('0x31')][a76_0x2636('0x52')][a76_0x2636('0x22')])throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][a76_0x2636('0x16')],this['client']['locale']['getString'](_0xd0bcf3[a76_0x2636('0x27')]['document'][a76_0x2636('0x11')],a76_0x2636('0x20'),a76_0x2636('0xf'),constants[a76_0x2636('0x31')]['GOLD'][a76_0x2636('0x22')]));else{if(_0x246c96===omnic[a76_0x2636('0x1b')][a76_0x2636('0x48')]&&_0x1f7000>=constants['LIMITS'][a76_0x2636('0x48')]['PAID_ROLES'])throw new errors[(a76_0x2636('0x30'))](errors[a76_0x2636('0x18')][a76_0x2636('0x16')],this[a76_0x2636('0x33')]['locale'][a76_0x2636('0x35')](_0xd0bcf3[a76_0x2636('0x27')][a76_0x2636('0x2f')][a76_0x2636('0x11')],'errors',a76_0x2636('0xf'),constants[a76_0x2636('0x31')]['PLATINUM'][a76_0x2636('0x22')]));}}else throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][a76_0x2636('0x17')],this[a76_0x2636('0x33')][a76_0x2636('0x1')]['getString'](_0xd0bcf3[a76_0x2636('0x27')]['document'][a76_0x2636('0x11')],'errors',a76_0x2636('0x2e'),constants[a76_0x2636('0x31')]['PAID_ROLES']));}}if(!_0xd0bcf3[a76_0x2636('0x50')][a76_0x2636('0x1c')]['has'](a76_0x2636('0xa')))throw new Error(a76_0x2636('0x8'));return await Role_1[a76_0x2636('0x1a')][a76_0x2636('0x24')]({'_id':_0x367906['id'],'guild':_0xd0bcf3[a76_0x2636('0x27')]['id']},{'_id':_0x367906['id'],'guild':_0xd0bcf3['guild']['id'],'price':_0x26f1f8[a76_0x2636('0x21')]},{'upsert':!![]}),await _0xd0bcf3[a76_0x2636('0x7')]['send']({'embed':{'color':tesseract_1[a76_0x2636('0x44')][a76_0x2636('0x2d')][a76_0x2636('0x0')],'description':this[a76_0x2636('0x33')]['locale'][a76_0x2636('0x35')](_0xd0bcf3[a76_0x2636('0x27')][a76_0x2636('0x2f')][a76_0x2636('0x11')],a76_0x2636('0x42'),a76_0x2636('0x2b'),_0xd0bcf3[a76_0x2636('0xe')][a76_0x2636('0x55')],_0x367906['name'],_0x26f1f8[a76_0x2636('0x21')])}})[a76_0x2636('0x25')](()=>{});}if(_0x26f1f8['buy']){if(_0xd0bcf3[a76_0x2636('0x50')]['roles']['cache'][a76_0x2636('0x6')](_0x367906['id']))throw new Error(a76_0x2636('0x3'));const _0x5065c2=await Role_1[a76_0x2636('0x1a')][a76_0x2636('0x3e')]({'_id':_0x367906['id'],'guild':_0xd0bcf3[a76_0x2636('0x27')]['id'],'price':{'$exists':!![],'$ne':null}});if(!_0x5065c2)throw new Error(a76_0x2636('0x12'));if(_0xd0bcf3[a76_0x2636('0x50')][a76_0x2636('0x2f')]['balance']<_0x5065c2[a76_0x2636('0x54')])throw new Error(a76_0x2636('0x2'));return await _0xd0bcf3['member'][a76_0x2636('0x4c')][a76_0x2636('0x4a')](_0x367906),_0xd0bcf3[a76_0x2636('0x50')][a76_0x2636('0x2a')](_0x5065c2[a76_0x2636('0x54')],'Paid\x20Role',_0xd0bcf3[a76_0x2636('0x50')][a76_0x2636('0x2f')]),await _0xd0bcf3['member'][a76_0x2636('0x2f')][a76_0x2636('0x3f')](),await _0xd0bcf3[a76_0x2636('0x7')][a76_0x2636('0x47')]({'embed':{'color':tesseract_1['Constants'][a76_0x2636('0x2d')][a76_0x2636('0x0')],'description':this['client'][a76_0x2636('0x1')][a76_0x2636('0x35')](_0xd0bcf3[a76_0x2636('0x27')][a76_0x2636('0x2f')][a76_0x2636('0x11')],a76_0x2636('0x42'),'roleBought',_0xd0bcf3[a76_0x2636('0xe')][a76_0x2636('0x55')],_0x367906[a76_0x2636('0x14')],_0x5065c2[a76_0x2636('0x54')])}})[a76_0x2636('0x25')](()=>{});}if(_0x26f1f8[a76_0x2636('0x36')]){if(!_0xd0bcf3[a76_0x2636('0x50')][a76_0x2636('0x1c')]['has'](a76_0x2636('0xa')))throw new Error('NO_PERMISSION');return await Role_1[a76_0x2636('0x1a')][a76_0x2636('0x24')]({'_id':_0x367906['id'],'guild':_0xd0bcf3['guild']['id'],'price':{'$exists':!![],'$ne':null}},{'_id':_0x367906['id'],'guild':_0xd0bcf3['guild']['id'],'$unset':{'price':0x1}}),await _0xd0bcf3['channel'][a76_0x2636('0x47')]({'embed':{'color':tesseract_1[a76_0x2636('0x44')][a76_0x2636('0x2d')][a76_0x2636('0x4f')],'description':this[a76_0x2636('0x33')]['locale'][a76_0x2636('0x35')](_0xd0bcf3[a76_0x2636('0x27')][a76_0x2636('0x2f')][a76_0x2636('0x11')],a76_0x2636('0x42'),a76_0x2636('0x3a'),_0xd0bcf3[a76_0x2636('0xe')][a76_0x2636('0x55')],_0x367906[a76_0x2636('0x14')])}})[a76_0x2636('0x25')](()=>{});}}const _0x5abe0f=await Role_1[a76_0x2636('0x1a')][a76_0x2636('0x29')]({'guild':_0xd0bcf3[a76_0x2636('0x27')]['id'],'price':{'$exists':!![],'$ne':null}});if(!_0x5abe0f[a76_0x2636('0x4d')])throw new Error(a76_0x2636('0x1e'));return await _0xd0bcf3['channel'][a76_0x2636('0x47')]({'embed':{'color':tesseract_1['Constants'][a76_0x2636('0x2d')][a76_0x2636('0x53')],'title':a76_0x2636('0x34'),'fields':_0x5abe0f[a76_0x2636('0x2c')](_0x48cf5f=>({'name':(_0xd0bcf3[a76_0x2636('0x27')][a76_0x2636('0x4c')][a76_0x2636('0x4e')][a76_0x2636('0x6')](_0x48cf5f['_id'])?_0xd0bcf3['guild']['roles'][a76_0x2636('0x4e')][a76_0x2636('0x41')](_0x48cf5f[a76_0x2636('0x43')])['name']+a76_0x2636('0x3c'):'')+_0x48cf5f[a76_0x2636('0x43')],'value':_0x48cf5f['price']+a76_0x2636('0x26')}))}})[a76_0x2636('0x25')](()=>{});};}};
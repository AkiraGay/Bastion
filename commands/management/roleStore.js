const a75_0x31d6=['findOneAndUpdate','roleStoreRemove','send','default','locale','GREEN','unlist','guild','ROLE_NOT_FOR_SALE','apply','permissions','membershipLimitPaidRoles','Paid\x20Role','PremiumTier','../../models/Role','PAID_ROLES','MAX_SAFE_INTEGER','name','getString','add','exec','LIMITED_PREMIUM_MEMBERSHIP','NO_ROLES_ON_SALE','member','\x20Bastion\x20Coins','findOne','COLORS','constructor','user','roleNotFound','find','debit','sell','_id','roleStore\x20ROLE\x20--buy','countDocuments','PLATINUM','roleStore','BASTION_ERROR_TYPE','GOLD','INSUFFICIENT_BALANCE','\x20/\x20','client','../../utils/omnic','resolveRole','NO_PERMISSION','Constants','has','isPublicBastion','balance','error','DiscordError','buy','Command','roleStore\x20ROLE\x20--unlist','roleStoreAdd','Roles\x20Store','document','LIMITS','price','../../utils/numbers','../../utils/constants','resolver','cache','catch','premiumPaidRoles','roles','author','channel','roleStore\x20ROLE\x20--sell\x20AMOUNT','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','MANAGE_ROLES','errors','info','language','return\x20/\x22\x20+\x20this\x20+\x20\x22/','test','map','clamp','roleBought','length','PREMIUM_MEMBERSHIP_REQUIRED','join','tag','save','../../utils/errors','fetchPremiumTier'];(function(_0x530837,_0x31d673){const _0x521c2d=function(_0x214474){while(--_0x214474){_0x530837['push'](_0x530837['shift']());}},_0x15fca0=function(){const _0x5ce5fe={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x257041,_0x480628,_0x4b62e1,_0x2672ce){_0x2672ce=_0x2672ce||{};let _0x308986=_0x480628+'='+_0x4b62e1,_0xf97b06=0x0;for(let _0x5ce88c=0x0,_0x258c28=_0x257041['length'];_0x5ce88c<_0x258c28;_0x5ce88c++){const _0x400ca4=_0x257041[_0x5ce88c];_0x308986+=';\x20'+_0x400ca4;const _0x529384=_0x257041[_0x400ca4];_0x257041['push'](_0x529384),_0x258c28=_0x257041['length'],_0x529384!==!![]&&(_0x308986+='='+_0x529384);}_0x2672ce['cookie']=_0x308986;},'removeCookie':function(){return'dev';},'getCookie':function(_0x74b443,_0x43f10e){_0x74b443=_0x74b443||function(_0x2e1a11){return _0x2e1a11;};const _0x207d0e=_0x74b443(new RegExp('(?:^|;\x20)'+_0x43f10e['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x35fe0a=function(_0x1f840c,_0x47d30a){_0x1f840c(++_0x47d30a);};return _0x35fe0a(_0x521c2d,_0x31d673),_0x207d0e?decodeURIComponent(_0x207d0e[0x1]):undefined;}},_0x53daa8=function(){const _0x34676a=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x34676a['test'](_0x5ce5fe['removeCookie']['toString']());};_0x5ce5fe['updateCookie']=_0x53daa8;let _0x592e99='';const _0x52063a=_0x5ce5fe['updateCookie']();if(!_0x52063a)_0x5ce5fe['setCookie'](['*'],'counter',0x1);else _0x52063a?_0x592e99=_0x5ce5fe['getCookie'](null,'counter'):_0x5ce5fe['removeCookie']();};_0x15fca0();}(a75_0x31d6,0x1c1));const a75_0x521c=function(_0x530837,_0x31d673){_0x530837=_0x530837-0x0;let _0x521c2d=a75_0x31d6[_0x530837];return _0x521c2d;};const a75_0x5ce5fe=function(){let _0x592e99=!![];return function(_0x52063a,_0x257041){const _0x480628=_0x592e99?function(){if(_0x257041){const _0x4b62e1=_0x257041[a75_0x521c('0x52')](_0x52063a,arguments);return _0x257041=null,_0x4b62e1;}}:function(){};return _0x592e99=![],_0x480628;};}(),a75_0x214474=a75_0x5ce5fe(this,function(){const _0x2672ce=function(){const _0x308986=_0x2672ce['constructor'](a75_0x521c('0x3d'))()[a75_0x521c('0xd')](a75_0x521c('0x38'));return!_0x308986[a75_0x521c('0x3e')](a75_0x214474);};return _0x2672ce();});a75_0x214474();'use strict';const tesseract_1=require('@bastion/tesseract'),Role_1=require(a75_0x521c('0x0')),constants=require(a75_0x521c('0x2f')),errors=require(a75_0x521c('0x47')),numbers=require(a75_0x521c('0x2e')),omnic=require(a75_0x521c('0x1d'));module['exports']=class RoleStoreCommand extends tesseract_1[a75_0x521c('0x27')]{constructor(){super(a75_0x521c('0x17'),{'description':'It\x20allows\x20you\x20to\x20set\x20up\x20a\x20Role\x20Store\x20in\x20the\x20server.\x20Server\x20managers\x20can\x20sell\x20roles\x20in\x20the\x20server\x20and\x20members\x20can\x20buy\x20them\x20with\x20Bastion\x20Coins.','triggers':[],'arguments':{'boolean':[a75_0x521c('0x26'),a75_0x521c('0x4f')],'number':['sell'],'coerce':{'sell':_0xf97b06=>numbers[a75_0x521c('0x40')](_0xf97b06,0x1,Number[a75_0x521c('0x2')])}},'scope':a75_0x521c('0x50'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a75_0x521c('0x39')],'userPermissions':[],'syntax':[a75_0x521c('0x17'),a75_0x521c('0x37'),a75_0x521c('0x14'),a75_0x521c('0x28')]}),this[a75_0x521c('0x6')]=async(_0x5ce88c,_0x258c28)=>{if(_0x258c28['_']['length']){const _0x529384=this[a75_0x521c('0x1c')][a75_0x521c('0x30')][a75_0x521c('0x1e')](_0x5ce88c[a75_0x521c('0x50')],_0x258c28['_'][a75_0x521c('0x44')]('\x20'));if(!_0x529384)throw new errors[(a75_0x521c('0x25'))](errors[a75_0x521c('0x18')]['ROLE_NOT_FOUND'],this['client'][a75_0x521c('0x4d')][a75_0x521c('0x4')](_0x5ce88c['guild'][a75_0x521c('0x2b')]['language'],a75_0x521c('0x24'),a75_0x521c('0xf')));if(_0x258c28[a75_0x521c('0x12')]>0x0){if(constants[a75_0x521c('0x22')](this[a75_0x521c('0x1c')][a75_0x521c('0xe')])){const _0x74b443=await Role_1[a75_0x521c('0x4c')][a75_0x521c('0x15')]({'guild':_0x5ce88c[a75_0x521c('0x50')]['id'],'price':{'$exists':!![],'$ne':null}});if(_0x74b443>=constants[a75_0x521c('0x2c')]['PAID_ROLES']){const _0x43f10e=await omnic[a75_0x521c('0x48')](_0x5ce88c['guild'])[a75_0x521c('0x32')](()=>{});if(_0x43f10e){if(_0x43f10e===omnic[a75_0x521c('0x56')][a75_0x521c('0x19')]&&_0x74b443>=constants[a75_0x521c('0x2c')][a75_0x521c('0x19')]['PAID_ROLES'])throw new errors[(a75_0x521c('0x25'))](errors['BASTION_ERROR_TYPE'][a75_0x521c('0x7')],this[a75_0x521c('0x1c')][a75_0x521c('0x4d')][a75_0x521c('0x4')](_0x5ce88c[a75_0x521c('0x50')][a75_0x521c('0x2b')][a75_0x521c('0x3c')],a75_0x521c('0x3a'),a75_0x521c('0x54'),constants[a75_0x521c('0x2c')]['GOLD']['PAID_ROLES']));else{if(_0x43f10e===omnic['PremiumTier'][a75_0x521c('0x16')]&&_0x74b443>=constants[a75_0x521c('0x2c')][a75_0x521c('0x16')][a75_0x521c('0x1')])throw new errors[(a75_0x521c('0x25'))](errors[a75_0x521c('0x18')][a75_0x521c('0x7')],this['client'][a75_0x521c('0x4d')][a75_0x521c('0x4')](_0x5ce88c[a75_0x521c('0x50')][a75_0x521c('0x2b')][a75_0x521c('0x3c')],'errors',a75_0x521c('0x54'),constants[a75_0x521c('0x2c')]['PLATINUM'][a75_0x521c('0x1')]));}}else throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][a75_0x521c('0x43')],this[a75_0x521c('0x1c')][a75_0x521c('0x4d')][a75_0x521c('0x4')](_0x5ce88c[a75_0x521c('0x50')][a75_0x521c('0x2b')]['language'],a75_0x521c('0x3a'),a75_0x521c('0x33'),constants[a75_0x521c('0x2c')][a75_0x521c('0x1')]));}}if(!_0x5ce88c[a75_0x521c('0x9')][a75_0x521c('0x53')][a75_0x521c('0x21')](a75_0x521c('0x39')))throw new Error(a75_0x521c('0x1f'));return await Role_1[a75_0x521c('0x4c')][a75_0x521c('0x49')]({'_id':_0x529384['id'],'guild':_0x5ce88c[a75_0x521c('0x50')]['id']},{'_id':_0x529384['id'],'guild':_0x5ce88c[a75_0x521c('0x50')]['id'],'price':_0x258c28[a75_0x521c('0x12')]},{'upsert':!![]}),await _0x5ce88c[a75_0x521c('0x36')][a75_0x521c('0x4b')]({'embed':{'color':tesseract_1['Constants']['COLORS'][a75_0x521c('0x4e')],'description':this[a75_0x521c('0x1c')][a75_0x521c('0x4d')][a75_0x521c('0x4')](_0x5ce88c[a75_0x521c('0x50')][a75_0x521c('0x2b')]['language'],a75_0x521c('0x3b'),a75_0x521c('0x29'),_0x5ce88c[a75_0x521c('0x35')]['tag'],_0x529384['name'],_0x258c28['sell'])}})[a75_0x521c('0x32')](()=>{});}if(_0x258c28[a75_0x521c('0x26')]){if(_0x5ce88c['member'][a75_0x521c('0x34')][a75_0x521c('0x31')]['has'](_0x529384['id']))throw new Error('ROLE_ALREADY_ASSIGNED');const _0x207d0e=await Role_1[a75_0x521c('0x4c')][a75_0x521c('0xb')]({'_id':_0x529384['id'],'guild':_0x5ce88c[a75_0x521c('0x50')]['id'],'price':{'$exists':!![],'$ne':null}});if(!_0x207d0e)throw new Error(a75_0x521c('0x51'));if(_0x5ce88c[a75_0x521c('0x9')]['document'][a75_0x521c('0x23')]<_0x207d0e['price'])throw new Error(a75_0x521c('0x1a'));return await _0x5ce88c[a75_0x521c('0x9')][a75_0x521c('0x34')][a75_0x521c('0x5')](_0x529384),_0x5ce88c[a75_0x521c('0x9')][a75_0x521c('0x11')](_0x207d0e[a75_0x521c('0x2d')],a75_0x521c('0x55'),_0x5ce88c['member'][a75_0x521c('0x2b')]),await _0x5ce88c[a75_0x521c('0x9')][a75_0x521c('0x2b')][a75_0x521c('0x46')](),await _0x5ce88c['channel'][a75_0x521c('0x4b')]({'embed':{'color':tesseract_1[a75_0x521c('0x20')]['COLORS'][a75_0x521c('0x4e')],'description':this['client'][a75_0x521c('0x4d')][a75_0x521c('0x4')](_0x5ce88c[a75_0x521c('0x50')]['document'][a75_0x521c('0x3c')],a75_0x521c('0x3b'),a75_0x521c('0x41'),_0x5ce88c[a75_0x521c('0x35')][a75_0x521c('0x45')],_0x529384[a75_0x521c('0x3')],_0x207d0e['price'])}})[a75_0x521c('0x32')](()=>{});}if(_0x258c28['unlist']){if(!_0x5ce88c['member'][a75_0x521c('0x53')][a75_0x521c('0x21')](a75_0x521c('0x39')))throw new Error(a75_0x521c('0x1f'));return await Role_1['default']['findOneAndUpdate']({'_id':_0x529384['id'],'guild':_0x5ce88c['guild']['id'],'price':{'$exists':!![],'$ne':null}},{'_id':_0x529384['id'],'guild':_0x5ce88c[a75_0x521c('0x50')]['id'],'$unset':{'price':0x1}}),await _0x5ce88c[a75_0x521c('0x36')][a75_0x521c('0x4b')]({'embed':{'color':tesseract_1[a75_0x521c('0x20')][a75_0x521c('0xc')]['RED'],'description':this['client'][a75_0x521c('0x4d')][a75_0x521c('0x4')](_0x5ce88c[a75_0x521c('0x50')][a75_0x521c('0x2b')][a75_0x521c('0x3c')],a75_0x521c('0x3b'),a75_0x521c('0x4a'),_0x5ce88c[a75_0x521c('0x35')][a75_0x521c('0x45')],_0x529384[a75_0x521c('0x3')])}})[a75_0x521c('0x32')](()=>{});}}const _0x400ca4=await Role_1[a75_0x521c('0x4c')][a75_0x521c('0x10')]({'guild':_0x5ce88c[a75_0x521c('0x50')]['id'],'price':{'$exists':!![],'$ne':null}});if(!_0x400ca4[a75_0x521c('0x42')])throw new Error(a75_0x521c('0x8'));return await _0x5ce88c[a75_0x521c('0x36')][a75_0x521c('0x4b')]({'embed':{'color':tesseract_1[a75_0x521c('0x20')][a75_0x521c('0xc')]['IRIS'],'title':a75_0x521c('0x2a'),'fields':_0x400ca4[a75_0x521c('0x3f')](_0x35fe0a=>({'name':(_0x5ce88c[a75_0x521c('0x50')][a75_0x521c('0x34')][a75_0x521c('0x31')][a75_0x521c('0x21')](_0x35fe0a[a75_0x521c('0x13')])?_0x5ce88c[a75_0x521c('0x50')][a75_0x521c('0x34')][a75_0x521c('0x31')]['get'](_0x35fe0a['_id'])[a75_0x521c('0x3')]+a75_0x521c('0x1b'):'')+_0x35fe0a[a75_0x521c('0x13')],'value':_0x35fe0a[a75_0x521c('0x2d')]+a75_0x521c('0xa')}))}})[a75_0x521c('0x32')](()=>{});};}};
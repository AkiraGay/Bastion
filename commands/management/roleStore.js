const a95_0x23d96e=a95_0x53bb;(function(_0x2eb199,_0x18ea01){const _0x50a172=a95_0x53bb,_0x5f1890=_0x2eb199();while(!![]){try{const _0x9cd17e=-parseInt(_0x50a172(0xeb))/0x1+parseInt(_0x50a172(0xd9))/0x2+-parseInt(_0x50a172(0xd7))/0x3+parseInt(_0x50a172(0xe3))/0x4*(-parseInt(_0x50a172(0xdf))/0x5)+-parseInt(_0x50a172(0xc7))/0x6+parseInt(_0x50a172(0x10b))/0x7*(parseInt(_0x50a172(0xe0))/0x8)+parseInt(_0x50a172(0xf7))/0x9;if(_0x9cd17e===_0x18ea01)break;else _0x5f1890['push'](_0x5f1890['shift']());}catch(_0x212ca6){_0x5f1890['push'](_0x5f1890['shift']());}}}(a95_0x4ad8,0x68a7c));const a95_0x41a563=(function(){let _0x5688dd=!![];return function(_0xde11b7,_0xcd19d2){const _0x53195f=_0x5688dd?function(){const _0x445469=a95_0x53bb;if(_0xcd19d2){const _0x34fbfd=_0xcd19d2[_0x445469(0x104)](_0xde11b7,arguments);return _0xcd19d2=null,_0x34fbfd;}}:function(){};return _0x5688dd=![],_0x53195f;};}()),a95_0x4eadb5=a95_0x41a563(this,function(){const _0x53c5ba=a95_0x53bb;return a95_0x4eadb5[_0x53c5ba(0x11b)]()[_0x53c5ba(0x109)](_0x53c5ba(0xe2))[_0x53c5ba(0x11b)]()['constructor'](a95_0x4eadb5)['search'](_0x53c5ba(0xe2));});a95_0x4eadb5();'use strict';function a95_0x53bb(_0x36c8dd,_0x1ff808){const _0x1095b0=a95_0x4ad8();return a95_0x53bb=function(_0x4eadb5,_0x41a563){_0x4eadb5=_0x4eadb5-0xc4;let _0x4ad8f1=_0x1095b0[_0x4eadb5];return _0x4ad8f1;},a95_0x53bb(_0x36c8dd,_0x1ff808);}const tesseract_1=require('@bastion/tesseract'),Role_1=require(a95_0x23d96e(0xcc)),constants=require(a95_0x23d96e(0x10c)),errors=require(a95_0x23d96e(0xef)),numbers=require(a95_0x23d96e(0xec)),omnic=require('../../utils/omnic');module['exports']=class RoleStoreCommand extends tesseract_1[a95_0x23d96e(0x107)]{constructor(){const _0x4b589d=a95_0x23d96e;super('roleStore',{'description':_0x4b589d(0xf1),'triggers':[],'arguments':{'boolean':['buy',_0x4b589d(0xe7)],'number':[_0x4b589d(0xf3)],'coerce':{'sell':_0x5d8b19=>numbers[_0x4b589d(0xe6)](_0x5d8b19,0x1,Number['MAX_SAFE_INTEGER'])}},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':['MANAGE_ROLES'],'userPermissions':[],'syntax':['roleStore',_0x4b589d(0x10d),_0x4b589d(0xcf),'roleStore\x20ROLE\x20--unlist']});}['exec']=async(_0x120f44,_0x42f6f6)=>{const _0x35d4cf=a95_0x23d96e;if(_0x42f6f6['_'][_0x35d4cf(0xfc)]){const _0x129d3e=this['client'][_0x35d4cf(0x103)][_0x35d4cf(0xf0)](_0x120f44[_0x35d4cf(0x102)],_0x42f6f6['_'][_0x35d4cf(0xd5)]('\x20'));if(!_0x129d3e)throw new errors['DiscordError'](errors[_0x35d4cf(0xd3)][_0x35d4cf(0x10e)],this[_0x35d4cf(0x114)][_0x35d4cf(0xd6)]['getString'](_0x120f44[_0x35d4cf(0x102)][_0x35d4cf(0xe5)][_0x35d4cf(0x11a)],_0x35d4cf(0xee),_0x35d4cf(0x119)));if(_0x42f6f6[_0x35d4cf(0xf3)]>0x0){if(constants[_0x35d4cf(0xcd)](this['client'][_0x35d4cf(0xc8)])){const _0x1a56df=await Role_1[_0x35d4cf(0x115)][_0x35d4cf(0xea)]({'guild':_0x120f44[_0x35d4cf(0x102)]['id'],'price':{'$exists':!![],'$ne':null}});if(_0x1a56df>=constants[_0x35d4cf(0xc6)][_0x35d4cf(0xf5)]){const _0x3826c1=await omnic[_0x35d4cf(0xcb)](_0x120f44['guild'])[_0x35d4cf(0xde)](()=>{});if(_0x3826c1){if(_0x3826c1===omnic[_0x35d4cf(0xd4)][_0x35d4cf(0xd1)]&&_0x1a56df>=constants[_0x35d4cf(0xc6)][_0x35d4cf(0xd1)][_0x35d4cf(0xf5)])throw new errors['DiscordError'](errors[_0x35d4cf(0xd3)][_0x35d4cf(0xfa)],this[_0x35d4cf(0x114)]['locale'][_0x35d4cf(0xff)](_0x120f44[_0x35d4cf(0x102)]['document'][_0x35d4cf(0x11a)],'errors','membershipLimitPaidRoles',constants['LIMITS'][_0x35d4cf(0xd1)][_0x35d4cf(0xf5)]));else{if(_0x3826c1===omnic[_0x35d4cf(0xd4)][_0x35d4cf(0x113)]&&_0x1a56df>=constants['LIMITS'][_0x35d4cf(0x113)]['PAID_ROLES'])throw new errors[(_0x35d4cf(0xe8))](errors['BASTION_ERROR_TYPE'][_0x35d4cf(0xfa)],this[_0x35d4cf(0x114)]['locale'][_0x35d4cf(0xff)](_0x120f44[_0x35d4cf(0x102)][_0x35d4cf(0xe5)]['language'],'errors',_0x35d4cf(0xd2),constants['LIMITS'][_0x35d4cf(0x113)][_0x35d4cf(0xf5)]));}}else throw new errors[(_0x35d4cf(0xe8))](errors['BASTION_ERROR_TYPE'][_0x35d4cf(0xfe)],this[_0x35d4cf(0x114)][_0x35d4cf(0xd6)][_0x35d4cf(0xff)](_0x120f44['guild'][_0x35d4cf(0xe5)]['language'],_0x35d4cf(0xee),'premiumPaidRoles',constants[_0x35d4cf(0xc6)][_0x35d4cf(0xf5)]));}}if(!_0x120f44[_0x35d4cf(0xc4)]['permissions'][_0x35d4cf(0xdd)](_0x35d4cf(0x111)))throw new Error(_0x35d4cf(0xf6));return await Role_1['default']['findOneAndUpdate']({'_id':_0x129d3e['id'],'guild':_0x120f44['guild']['id']},{'_id':_0x129d3e['id'],'guild':_0x120f44['guild']['id'],'price':_0x42f6f6['sell']},{'upsert':!![]}),await _0x120f44[_0x35d4cf(0x108)]['send']({'embed':{'color':tesseract_1[_0x35d4cf(0xd8)][_0x35d4cf(0x10a)][_0x35d4cf(0x112)],'description':this[_0x35d4cf(0x114)][_0x35d4cf(0xd6)]['getString'](_0x120f44['guild'][_0x35d4cf(0xe5)][_0x35d4cf(0x11a)],_0x35d4cf(0xda),'roleStoreAdd',_0x120f44['author'][_0x35d4cf(0xdb)],_0x129d3e[_0x35d4cf(0xe4)],_0x42f6f6[_0x35d4cf(0xf3)])}})[_0x35d4cf(0xde)](()=>{});}if(_0x42f6f6[_0x35d4cf(0xfb)]){if(_0x120f44[_0x35d4cf(0xc4)]['roles']['cache'][_0x35d4cf(0xdd)](_0x129d3e['id']))throw new Error(_0x35d4cf(0xed));const _0x5320a4=await Role_1[_0x35d4cf(0x115)]['findOne']({'_id':_0x129d3e['id'],'guild':_0x120f44[_0x35d4cf(0x102)]['id'],'price':{'$exists':!![],'$ne':null}});if(!_0x5320a4)throw new Error(_0x35d4cf(0x118));if(_0x120f44[_0x35d4cf(0xc4)][_0x35d4cf(0xe5)][_0x35d4cf(0xe9)]<_0x5320a4[_0x35d4cf(0x117)])throw new Error(_0x35d4cf(0xce));return await _0x120f44[_0x35d4cf(0xc4)][_0x35d4cf(0x105)][_0x35d4cf(0x106)](_0x129d3e),_0x120f44[_0x35d4cf(0xc4)][_0x35d4cf(0x110)](_0x5320a4[_0x35d4cf(0x117)],'Paid\x20Role',_0x120f44['member'][_0x35d4cf(0xe5)]),await _0x120f44['member']['document'][_0x35d4cf(0xc5)](),await _0x120f44[_0x35d4cf(0x108)][_0x35d4cf(0xca)]({'embed':{'color':tesseract_1['Constants']['COLORS'][_0x35d4cf(0x112)],'description':this[_0x35d4cf(0x114)][_0x35d4cf(0xd6)][_0x35d4cf(0xff)](_0x120f44[_0x35d4cf(0x102)][_0x35d4cf(0xe5)][_0x35d4cf(0x11a)],'info',_0x35d4cf(0xf2),_0x120f44[_0x35d4cf(0x116)]['tag'],_0x129d3e[_0x35d4cf(0xe4)],_0x5320a4[_0x35d4cf(0x117)])}})[_0x35d4cf(0xde)](()=>{});}if(_0x42f6f6[_0x35d4cf(0xe7)]){if(!_0x120f44[_0x35d4cf(0xc4)][_0x35d4cf(0x10f)][_0x35d4cf(0xdd)](_0x35d4cf(0x111)))throw new Error(_0x35d4cf(0xf6));return await Role_1[_0x35d4cf(0x115)][_0x35d4cf(0xc9)]({'_id':_0x129d3e['id'],'guild':_0x120f44['guild']['id'],'price':{'$exists':!![],'$ne':null}},{'_id':_0x129d3e['id'],'guild':_0x120f44[_0x35d4cf(0x102)]['id'],'$unset':{'price':0x1}}),await _0x120f44[_0x35d4cf(0x108)][_0x35d4cf(0xca)]({'embed':{'color':tesseract_1['Constants'][_0x35d4cf(0x10a)][_0x35d4cf(0xe1)],'description':this[_0x35d4cf(0x114)]['locale']['getString'](_0x120f44[_0x35d4cf(0x102)]['document']['language'],_0x35d4cf(0xda),_0x35d4cf(0xf8),_0x120f44['author'][_0x35d4cf(0xdb)],_0x129d3e['name'])}})[_0x35d4cf(0xde)](()=>{});}}const _0x51ffd6=await Role_1[_0x35d4cf(0x115)][_0x35d4cf(0xd0)]({'guild':_0x120f44[_0x35d4cf(0x102)]['id'],'price':{'$exists':!![],'$ne':null}});if(!_0x51ffd6[_0x35d4cf(0xfc)])throw new Error('NO_ROLES_ON_SALE');return await _0x120f44[_0x35d4cf(0x108)]['send']({'embed':{'color':tesseract_1[_0x35d4cf(0xd8)][_0x35d4cf(0x10a)]['IRIS'],'title':_0x35d4cf(0x100),'fields':_0x51ffd6[_0x35d4cf(0xf4)](_0x4490a3=>({'name':(_0x120f44[_0x35d4cf(0x102)][_0x35d4cf(0x105)][_0x35d4cf(0xfd)]['has'](_0x4490a3['_id'])?_0x120f44['guild'][_0x35d4cf(0x105)][_0x35d4cf(0xfd)]['get'](_0x4490a3[_0x35d4cf(0xf9)])['name']+_0x35d4cf(0x101):'')+_0x4490a3[_0x35d4cf(0xf9)],'value':_0x4490a3[_0x35d4cf(0x117)]+_0x35d4cf(0xdc)}))}})[_0x35d4cf(0xde)](()=>{});};};function a95_0x4ad8(){const _0x50679d=['price','ROLE_NOT_FOR_SALE','roleNotFound','language','toString','member','save','LIMITS','2692272keJzYR','user','findOneAndUpdate','send','fetchPremiumTier','../../models/Role','isPublicBastion','INSUFFICIENT_BALANCE','roleStore\x20ROLE\x20--buy','find','GOLD','membershipLimitPaidRoles','BASTION_ERROR_TYPE','PremiumTier','join','locale','662643SiGjLA','Constants','1618702owUmrF','info','tag','\x20Bastion\x20Coins','has','catch','405815pQPWlx','220312ogvaFh','RED','(((.+)+)+)+$','20bWWFGF','name','document','clamp','unlist','DiscordError','balance','countDocuments','416846ewVdzu','../../utils/numbers','ROLE_ALREADY_ASSIGNED','errors','../../utils/errors','resolveRole','It\x20allows\x20you\x20to\x20set\x20up\x20a\x20Role\x20Store\x20in\x20the\x20server.\x20Server\x20managers\x20can\x20sell\x20roles\x20in\x20the\x20server\x20and\x20members\x20can\x20buy\x20them\x20with\x20Bastion\x20Coins.','roleBought','sell','map','PAID_ROLES','NO_PERMISSION','7277778tOkOwp','roleStoreRemove','_id','LIMITED_PREMIUM_MEMBERSHIP','buy','length','cache','PREMIUM_MEMBERSHIP_REQUIRED','getString','Roles\x20Store','\x20/\x20','guild','resolver','apply','roles','add','Command','channel','search','COLORS','77JJJeTj','../../utils/constants','roleStore\x20ROLE\x20--sell\x20AMOUNT','ROLE_NOT_FOUND','permissions','debit','MANAGE_ROLES','GREEN','PLATINUM','client','default','author'];a95_0x4ad8=function(){return _0x50679d;};return a95_0x4ad8();}
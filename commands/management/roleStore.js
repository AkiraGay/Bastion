const a90_0x1dd8=['MAX_SAFE_INTEGER','locale','buy','client','membershipLimitPaidRoles','Paid\x20Role','getString','DiscordError','catch','send','member','../../utils/errors','find','ROLE_NOT_FOR_SALE','IRIS','roleBought','findOne','_id','Command','language','join','GREEN','resolver','@bastion/tesseract','It\x20allows\x20you\x20to\x20set\x20up\x20a\x20Role\x20Store\x20in\x20the\x20server.\x20Server\x20managers\x20can\x20sell\x20roles\x20in\x20the\x20server\x20and\x20members\x20can\x20buy\x20them\x20with\x20Bastion\x20Coins.','info','../../utils/omnic','errors','findOneAndUpdate','\x20Bastion\x20Coins','name','ROLE_NOT_FOUND','default','Roles\x20Store','channel','NO_PERMISSION','author','INSUFFICIENT_BALANCE','GOLD','has','BASTION_ERROR_TYPE','PremiumTier','MANAGE_ROLES','NO_ROLES_ON_SALE','RED','permissions','tag','length','price','roleStore\x20ROLE\x20--unlist','sell','add','countDocuments','PREMIUM_MEMBERSHIP_REQUIRED','cache','document','roleNotFound','apply','exec','COLORS','save','ROLE_ALREADY_ASSIGNED','premiumPaidRoles','roleStore\x20ROLE\x20--buy','resolveRole','../../models/Role','unlist','Constants','constructor','LIMITS','PAID_ROLES','exports','map','../../utils/constants','fetchPremiumTier','roles','guild','get'];(function(_0x23355a,_0x1dd88c){const _0x599bff=function(_0x3c40e8){while(--_0x3c40e8){_0x23355a['push'](_0x23355a['shift']());}},_0x2f7f7e=function(){const _0x1f2a02={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x301062,_0xbfe138,_0x4cfa28,_0x1c0d9e){_0x1c0d9e=_0x1c0d9e||{};let _0x5e436e=_0xbfe138+'='+_0x4cfa28,_0x27d074=0x0;for(let _0x24f652=0x0,_0x182a14=_0x301062['length'];_0x24f652<_0x182a14;_0x24f652++){const _0x519578=_0x301062[_0x24f652];_0x5e436e+=';\x20'+_0x519578;const _0x586ad5=_0x301062[_0x519578];_0x301062['push'](_0x586ad5),_0x182a14=_0x301062['length'],_0x586ad5!==!![]&&(_0x5e436e+='='+_0x586ad5);}_0x1c0d9e['cookie']=_0x5e436e;},'removeCookie':function(){return'dev';},'getCookie':function(_0x512d5c,_0x150a15){_0x512d5c=_0x512d5c||function(_0x351887){return _0x351887;};const _0x2c0954=_0x512d5c(new RegExp('(?:^|;\x20)'+_0x150a15['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x3c1dbe=function(_0x3a3d9b,_0x42e43a){_0x3a3d9b(++_0x42e43a);};return _0x3c1dbe(_0x599bff,_0x1dd88c),_0x2c0954?decodeURIComponent(_0x2c0954[0x1]):undefined;}},_0x555e00=function(){const _0x22a1c3=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x22a1c3['test'](_0x1f2a02['removeCookie']['toString']());};_0x1f2a02['updateCookie']=_0x555e00;let _0x1306ab='';const _0xbdd7cd=_0x1f2a02['updateCookie']();if(!_0xbdd7cd)_0x1f2a02['setCookie'](['*'],'counter',0x1);else _0xbdd7cd?_0x1306ab=_0x1f2a02['getCookie'](null,'counter'):_0x1f2a02['removeCookie']();};_0x2f7f7e();}(a90_0x1dd8,0x1de));const a90_0x599b=function(_0x23355a,_0x1dd88c){_0x23355a=_0x23355a-0x0;let _0x599bff=a90_0x1dd8[_0x23355a];return _0x599bff;};const _0x3179e9=a90_0x599b,a90_0x1f2a02=function(){let _0x1306ab=!![];return function(_0xbdd7cd,_0x301062){const _0xbfe138=_0x1306ab?function(){const _0x5614c1=a90_0x599b;if(_0x301062){const _0x4cfa28=_0x301062[_0x5614c1('0x2f')](_0xbdd7cd,arguments);return _0x301062=null,_0x4cfa28;}}:function(){};return _0x1306ab=![],_0xbfe138;};}(),a90_0x3c40e8=a90_0x1f2a02(this,function(){const _0x1c0d9e=function(){const _0x2c5133=a90_0x599b,_0x5e436e=_0x1c0d9e[_0x2c5133('0x3a')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()['constructor']('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x5e436e['test'](a90_0x3c40e8);};return _0x1c0d9e();});a90_0x3c40e8();'use strict';const tesseract_1=require(_0x3179e9('0xd')),Role_1=require(_0x3179e9('0x37')),constants=require(_0x3179e9('0x3f')),errors=require(_0x3179e9('0x1')),numbers=require('../../utils/numbers'),omnic=require(_0x3179e9('0x10'));module[_0x3179e9('0x3d')]=class RoleStoreCommand extends tesseract_1[_0x3179e9('0x8')]{constructor(){const _0x10efdf=_0x3179e9;super('roleStore',{'description':_0x10efdf('0xe'),'triggers':[],'arguments':{'boolean':[_0x10efdf('0x46'),_0x10efdf('0x38')],'number':[_0x10efdf('0x28')],'coerce':{'sell':_0x27d074=>numbers['clamp'](_0x27d074,0x1,Number[_0x10efdf('0x44')])}},'scope':_0x10efdf('0x42'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[_0x10efdf('0x20')],'userPermissions':[],'syntax':['roleStore','roleStore\x20ROLE\x20--sell\x20AMOUNT',_0x10efdf('0x35'),_0x10efdf('0x27')]}),this[_0x10efdf('0x30')]=async(_0x24f652,_0x182a14)=>{const _0x2d79bf=_0x10efdf;if(_0x182a14['_']['length']){const _0x586ad5=this['client'][_0x2d79bf('0xc')][_0x2d79bf('0x36')](_0x24f652[_0x2d79bf('0x42')],_0x182a14['_'][_0x2d79bf('0xa')]('\x20'));if(!_0x586ad5)throw new errors[(_0x2d79bf('0x4b'))](errors[_0x2d79bf('0x1e')][_0x2d79bf('0x15')],this[_0x2d79bf('0x47')][_0x2d79bf('0x45')]['getString'](_0x24f652[_0x2d79bf('0x42')]['document'][_0x2d79bf('0x9')],'errors',_0x2d79bf('0x2e')));if(_0x182a14[_0x2d79bf('0x28')]>0x0){if(constants['isPublicBastion'](this['client']['user'])){const _0x512d5c=await Role_1[_0x2d79bf('0x16')][_0x2d79bf('0x2a')]({'guild':_0x24f652[_0x2d79bf('0x42')]['id'],'price':{'$exists':!![],'$ne':null}});if(_0x512d5c>=constants[_0x2d79bf('0x3b')][_0x2d79bf('0x3c')]){const _0x150a15=await omnic[_0x2d79bf('0x40')](_0x24f652[_0x2d79bf('0x42')])[_0x2d79bf('0x4c')](()=>{});if(_0x150a15){if(_0x150a15===omnic[_0x2d79bf('0x1f')]['GOLD']&&_0x512d5c>=constants['LIMITS'][_0x2d79bf('0x1c')][_0x2d79bf('0x3c')])throw new errors[(_0x2d79bf('0x4b'))](errors[_0x2d79bf('0x1e')]['LIMITED_PREMIUM_MEMBERSHIP'],this['client'][_0x2d79bf('0x45')]['getString'](_0x24f652['guild'][_0x2d79bf('0x2d')][_0x2d79bf('0x9')],'errors',_0x2d79bf('0x48'),constants[_0x2d79bf('0x3b')][_0x2d79bf('0x1c')][_0x2d79bf('0x3c')]));else{if(_0x150a15===omnic[_0x2d79bf('0x1f')]['PLATINUM']&&_0x512d5c>=constants[_0x2d79bf('0x3b')]['PLATINUM'][_0x2d79bf('0x3c')])throw new errors['DiscordError'](errors[_0x2d79bf('0x1e')]['LIMITED_PREMIUM_MEMBERSHIP'],this[_0x2d79bf('0x47')]['locale']['getString'](_0x24f652['guild'][_0x2d79bf('0x2d')]['language'],'errors',_0x2d79bf('0x48'),constants[_0x2d79bf('0x3b')]['PLATINUM']['PAID_ROLES']));}}else throw new errors[(_0x2d79bf('0x4b'))](errors[_0x2d79bf('0x1e')][_0x2d79bf('0x2b')],this['client']['locale'][_0x2d79bf('0x4a')](_0x24f652[_0x2d79bf('0x42')]['document'][_0x2d79bf('0x9')],_0x2d79bf('0x11'),_0x2d79bf('0x34'),constants[_0x2d79bf('0x3b')][_0x2d79bf('0x3c')]));}}if(!_0x24f652[_0x2d79bf('0x0')][_0x2d79bf('0x23')][_0x2d79bf('0x1d')](_0x2d79bf('0x20')))throw new Error('NO_PERMISSION');return await Role_1[_0x2d79bf('0x16')][_0x2d79bf('0x12')]({'_id':_0x586ad5['id'],'guild':_0x24f652[_0x2d79bf('0x42')]['id']},{'_id':_0x586ad5['id'],'guild':_0x24f652['guild']['id'],'price':_0x182a14['sell']},{'upsert':!![]}),await _0x24f652[_0x2d79bf('0x18')]['send']({'embed':{'color':tesseract_1['Constants'][_0x2d79bf('0x31')]['GREEN'],'description':this[_0x2d79bf('0x47')][_0x2d79bf('0x45')][_0x2d79bf('0x4a')](_0x24f652[_0x2d79bf('0x42')][_0x2d79bf('0x2d')][_0x2d79bf('0x9')],_0x2d79bf('0xf'),'roleStoreAdd',_0x24f652[_0x2d79bf('0x1a')][_0x2d79bf('0x24')],_0x586ad5[_0x2d79bf('0x14')],_0x182a14[_0x2d79bf('0x28')])}})[_0x2d79bf('0x4c')](()=>{});}if(_0x182a14[_0x2d79bf('0x46')]){if(_0x24f652['member'][_0x2d79bf('0x41')]['cache'][_0x2d79bf('0x1d')](_0x586ad5['id']))throw new Error(_0x2d79bf('0x33'));const _0x2c0954=await Role_1[_0x2d79bf('0x16')][_0x2d79bf('0x6')]({'_id':_0x586ad5['id'],'guild':_0x24f652[_0x2d79bf('0x42')]['id'],'price':{'$exists':!![],'$ne':null}});if(!_0x2c0954)throw new Error(_0x2d79bf('0x3'));if(_0x24f652[_0x2d79bf('0x0')][_0x2d79bf('0x2d')]['balance']<_0x2c0954[_0x2d79bf('0x26')])throw new Error(_0x2d79bf('0x1b'));return await _0x24f652[_0x2d79bf('0x0')]['roles'][_0x2d79bf('0x29')](_0x586ad5),_0x24f652[_0x2d79bf('0x0')]['debit'](_0x2c0954[_0x2d79bf('0x26')],_0x2d79bf('0x49'),_0x24f652[_0x2d79bf('0x0')][_0x2d79bf('0x2d')]),await _0x24f652[_0x2d79bf('0x0')][_0x2d79bf('0x2d')][_0x2d79bf('0x32')](),await _0x24f652['channel'][_0x2d79bf('0x4d')]({'embed':{'color':tesseract_1[_0x2d79bf('0x39')][_0x2d79bf('0x31')][_0x2d79bf('0xb')],'description':this['client']['locale'][_0x2d79bf('0x4a')](_0x24f652[_0x2d79bf('0x42')][_0x2d79bf('0x2d')][_0x2d79bf('0x9')],_0x2d79bf('0xf'),_0x2d79bf('0x5'),_0x24f652[_0x2d79bf('0x1a')][_0x2d79bf('0x24')],_0x586ad5[_0x2d79bf('0x14')],_0x2c0954[_0x2d79bf('0x26')])}})[_0x2d79bf('0x4c')](()=>{});}if(_0x182a14[_0x2d79bf('0x38')]){if(!_0x24f652[_0x2d79bf('0x0')]['permissions'][_0x2d79bf('0x1d')](_0x2d79bf('0x20')))throw new Error(_0x2d79bf('0x19'));return await Role_1[_0x2d79bf('0x16')][_0x2d79bf('0x12')]({'_id':_0x586ad5['id'],'guild':_0x24f652[_0x2d79bf('0x42')]['id'],'price':{'$exists':!![],'$ne':null}},{'_id':_0x586ad5['id'],'guild':_0x24f652['guild']['id'],'$unset':{'price':0x1}}),await _0x24f652[_0x2d79bf('0x18')]['send']({'embed':{'color':tesseract_1[_0x2d79bf('0x39')][_0x2d79bf('0x31')][_0x2d79bf('0x22')],'description':this[_0x2d79bf('0x47')][_0x2d79bf('0x45')]['getString'](_0x24f652['guild'][_0x2d79bf('0x2d')]['language'],_0x2d79bf('0xf'),'roleStoreRemove',_0x24f652[_0x2d79bf('0x1a')]['tag'],_0x586ad5['name'])}})[_0x2d79bf('0x4c')](()=>{});}}const _0x519578=await Role_1['default'][_0x2d79bf('0x2')]({'guild':_0x24f652[_0x2d79bf('0x42')]['id'],'price':{'$exists':!![],'$ne':null}});if(!_0x519578[_0x2d79bf('0x25')])throw new Error(_0x2d79bf('0x21'));return await _0x24f652[_0x2d79bf('0x18')]['send']({'embed':{'color':tesseract_1['Constants'][_0x2d79bf('0x31')][_0x2d79bf('0x4')],'title':_0x2d79bf('0x17'),'fields':_0x519578[_0x2d79bf('0x3e')](_0x3c1dbe=>({'name':(_0x24f652[_0x2d79bf('0x42')][_0x2d79bf('0x41')][_0x2d79bf('0x2c')]['has'](_0x3c1dbe['_id'])?_0x24f652[_0x2d79bf('0x42')]['roles']['cache'][_0x2d79bf('0x43')](_0x3c1dbe[_0x2d79bf('0x7')])[_0x2d79bf('0x14')]+'\x20/\x20':'')+_0x3c1dbe[_0x2d79bf('0x7')],'value':_0x3c1dbe[_0x2d79bf('0x26')]+_0x2d79bf('0x13')}))}})[_0x2d79bf('0x4c')](()=>{});};}};
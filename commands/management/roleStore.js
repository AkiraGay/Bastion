const a68_0x31de=['PREMIUM_MEMBERSHIP_REQUIRED','NO_PERMISSION','client','membershipLimitPaidRoles','debit','errors','roleStore\x20ROLE\x20--sell\x20AMOUNT','LIMITED_PREMIUM_MEMBERSHIP','LIMITS','findOneAndUpdate','send','MAX_SAFE_INTEGER','MANAGE_ROLES','../../utils/numbers','resolveRole','findOne','compile','channel','../../utils/omnic','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','add','apply','roles','NO_ROLES_ON_SALE','cache','balance','join','\x20/\x20','PLATINUM','Roles\x20Store','roleStore','member','sell','catch','PremiumTier','guild','get','price','PAID_ROLES','GREEN','Paid\x20Role','premiumPaidRoles','default','constructor','../../utils/errors','COLORS','roleStoreRemove','roleBought','ROLE_ALREADY_ASSIGNED','roleStore\x20ROLE\x20--buy','INSUFFICIENT_BALANCE','info','roleStore\x20ROLE\x20--unlist','author','\x20Bastion\x20Coins','BASTION_ERROR_TYPE','length','return\x20/\x22\x20+\x20this\x20+\x20\x22/','unlist','DiscordError','roleNotFound','save','exports','countDocuments','name','tag','_id','locale','document','ROLE_NOT_FOR_SALE','getString','RED','ROLE_NOT_FOUND','GOLD','find','clamp','Constants','has','Command','language'];(function(_0x52df27,_0x31defb){const _0x4ff310=function(_0x524f56){while(--_0x524f56){_0x52df27['push'](_0x52df27['shift']());}};const _0x24c5dd=function(){const _0x2a5768={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x309893,_0x41d8c4,_0x4528e2,_0x533436){_0x533436=_0x533436||{};let _0x5b7460=_0x41d8c4+'='+_0x4528e2;let _0x517cdd=0x0;for(let _0x48843f=0x0,_0x31f4e0=_0x309893['length'];_0x48843f<_0x31f4e0;_0x48843f++){const _0x3b8efe=_0x309893[_0x48843f];_0x5b7460+=';\x20'+_0x3b8efe;const _0x3b9a36=_0x309893[_0x3b8efe];_0x309893['push'](_0x3b9a36);_0x31f4e0=_0x309893['length'];if(_0x3b9a36!==!![]){_0x5b7460+='='+_0x3b9a36;}}_0x533436['cookie']=_0x5b7460;},'removeCookie':function(){return'dev';},'getCookie':function(_0xbe6568,_0x37ab95){_0xbe6568=_0xbe6568||function(_0x56f0b6){return _0x56f0b6;};const _0xbb5b8e=_0xbe6568(new RegExp('(?:^|;\x20)'+_0x37ab95['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x52d662=function(_0x53bbfd,_0x136937){_0x53bbfd(++_0x136937);};_0x52d662(_0x4ff310,_0x31defb);return _0xbb5b8e?decodeURIComponent(_0xbb5b8e[0x1]):undefined;}};const _0x2914bf=function(){const _0x2e4a46=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x2e4a46['test'](_0x2a5768['removeCookie']['toString']());};_0x2a5768['updateCookie']=_0x2914bf;let _0x40a789='';const _0x414424=_0x2a5768['updateCookie']();if(!_0x414424){_0x2a5768['setCookie'](['*'],'counter',0x1);}else if(_0x414424){_0x40a789=_0x2a5768['getCookie'](null,'counter');}else{_0x2a5768['removeCookie']();}};_0x24c5dd();}(a68_0x31de,0x1c0));const a68_0x4ff3=function(_0x52df27,_0x31defb){_0x52df27=_0x52df27-0x0;let _0x4ff310=a68_0x31de[_0x52df27];return _0x4ff310;};const a68_0x2a5768=function(){let _0xad36ce=!![];return function(_0x15d61c,_0x55706d){const _0xdc2888=_0xad36ce?function(){if(_0x55706d){const _0x184be5=_0x55706d[a68_0x4ff3('0x35')](_0x15d61c,arguments);_0x55706d=null;return _0x184be5;}}:function(){};_0xad36ce=![];return _0xdc2888;};}();const a68_0x524f56=a68_0x2a5768(this,function(){const _0x557704=function(){const _0x53e5fd=_0x557704[a68_0x4ff3('0x4b')](a68_0x4ff3('0x9'))()[a68_0x4ff3('0x30')](a68_0x4ff3('0x33'));return!_0x53e5fd['test'](a68_0x524f56);};return _0x557704();});a68_0x524f56();'use strict';const tesseract_1=require('@bastion/tesseract');const Role_1=require('../../models/Role');const constants=require('../../utils/constants');const errors=require(a68_0x4ff3('0x4c'));const numbers=require(a68_0x4ff3('0x2d'));const omnic=require(a68_0x4ff3('0x32'));module[a68_0x4ff3('0xe')]=class RoleStoreCommand extends tesseract_1[a68_0x4ff3('0x1e')]{constructor(){super(a68_0x4ff3('0x3e'),{'description':'It\x20allows\x20you\x20to\x20set\x20up\x20a\x20Role\x20Store\x20in\x20the\x20server.\x20Server\x20managers\x20can\x20sell\x20roles\x20in\x20the\x20server\x20and\x20members\x20can\x20buy\x20them\x20with\x20Bastion\x20Coins.','triggers':[],'arguments':{'boolean':['buy','unlist'],'number':[a68_0x4ff3('0x40')],'coerce':{'sell':_0x1b49bf=>numbers[a68_0x4ff3('0x1b')](_0x1b49bf,0x1,Number[a68_0x4ff3('0x2b')])}},'scope':a68_0x4ff3('0x43'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a68_0x4ff3('0x2c')],'userPermissions':[],'syntax':['roleStore',a68_0x4ff3('0x26'),a68_0x4ff3('0x1'),a68_0x4ff3('0x4')]});this['exec']=async(_0x3a9a50,_0xdc975c)=>{if(_0xdc975c['_']['length']){const _0x44d9a3=this['client']['resolver'][a68_0x4ff3('0x2e')](_0x3a9a50[a68_0x4ff3('0x43')],_0xdc975c['_'][a68_0x4ff3('0x3a')]('\x20'));if(!_0x44d9a3)throw new errors['DiscordError'](errors[a68_0x4ff3('0x7')][a68_0x4ff3('0x18')],this['client']['locale'][a68_0x4ff3('0x16')](_0x3a9a50[a68_0x4ff3('0x43')][a68_0x4ff3('0x14')]['language'],'error',a68_0x4ff3('0xc')));if(_0xdc975c[a68_0x4ff3('0x40')]>0x0){if(constants['isPublicBastion'](this[a68_0x4ff3('0x22')]['user'])){const _0x178174=await Role_1['default'][a68_0x4ff3('0xf')]({'guild':_0x3a9a50['guild']['id'],'price':{'$exists':!![],'$ne':null}});if(_0x178174>=constants[a68_0x4ff3('0x28')][a68_0x4ff3('0x46')]){const _0x12fad0=await omnic['fetchPremiumTier'](_0x3a9a50[a68_0x4ff3('0x43')])[a68_0x4ff3('0x41')](()=>{});if(_0x12fad0){if(_0x12fad0===omnic[a68_0x4ff3('0x42')][a68_0x4ff3('0x19')]&&_0x178174>=constants[a68_0x4ff3('0x28')]['GOLD'][a68_0x4ff3('0x46')]){throw new errors[(a68_0x4ff3('0xb'))](errors[a68_0x4ff3('0x7')][a68_0x4ff3('0x27')],this[a68_0x4ff3('0x22')][a68_0x4ff3('0x13')][a68_0x4ff3('0x16')](_0x3a9a50[a68_0x4ff3('0x43')][a68_0x4ff3('0x14')][a68_0x4ff3('0x1f')],a68_0x4ff3('0x25'),a68_0x4ff3('0x23'),constants[a68_0x4ff3('0x28')]['GOLD'][a68_0x4ff3('0x46')]));}else if(_0x12fad0===omnic[a68_0x4ff3('0x42')][a68_0x4ff3('0x3c')]&&_0x178174>=constants[a68_0x4ff3('0x28')]['PLATINUM']['PAID_ROLES']){throw new errors[(a68_0x4ff3('0xb'))](errors[a68_0x4ff3('0x7')][a68_0x4ff3('0x27')],this[a68_0x4ff3('0x22')][a68_0x4ff3('0x13')]['getString'](_0x3a9a50[a68_0x4ff3('0x43')]['document'][a68_0x4ff3('0x1f')],a68_0x4ff3('0x25'),a68_0x4ff3('0x23'),constants['LIMITS'][a68_0x4ff3('0x3c')][a68_0x4ff3('0x46')]));}}else{throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][a68_0x4ff3('0x20')],this[a68_0x4ff3('0x22')][a68_0x4ff3('0x13')][a68_0x4ff3('0x16')](_0x3a9a50[a68_0x4ff3('0x43')][a68_0x4ff3('0x14')][a68_0x4ff3('0x1f')],'errors',a68_0x4ff3('0x49'),constants['LIMITS'][a68_0x4ff3('0x46')]));}}}if(!_0x3a9a50[a68_0x4ff3('0x3f')]['permissions'][a68_0x4ff3('0x1d')](a68_0x4ff3('0x2c')))throw new Error('NO_PERMISSION');await Role_1['default'][a68_0x4ff3('0x29')]({'_id':_0x44d9a3['id'],'guild':_0x3a9a50['guild']['id']},{'_id':_0x44d9a3['id'],'guild':_0x3a9a50[a68_0x4ff3('0x43')]['id'],'price':_0xdc975c[a68_0x4ff3('0x40')]},{'upsert':!![]});return await _0x3a9a50['channel'][a68_0x4ff3('0x2a')]({'embed':{'color':tesseract_1['Constants']['COLORS']['GREEN'],'description':this[a68_0x4ff3('0x22')][a68_0x4ff3('0x13')][a68_0x4ff3('0x16')](_0x3a9a50[a68_0x4ff3('0x43')]['document']['language'],a68_0x4ff3('0x3'),'roleStoreAdd',_0x3a9a50[a68_0x4ff3('0x5')][a68_0x4ff3('0x11')],_0x44d9a3['name'],_0xdc975c[a68_0x4ff3('0x40')])}})['catch'](()=>{});}if(_0xdc975c['buy']){if(_0x3a9a50[a68_0x4ff3('0x3f')][a68_0x4ff3('0x36')][a68_0x4ff3('0x38')][a68_0x4ff3('0x1d')](_0x44d9a3['id']))throw new Error(a68_0x4ff3('0x0'));const _0x3edf23=await Role_1['default'][a68_0x4ff3('0x2f')]({'_id':_0x44d9a3['id'],'guild':_0x3a9a50[a68_0x4ff3('0x43')]['id'],'price':{'$exists':!![],'$ne':null}});if(!_0x3edf23)throw new Error(a68_0x4ff3('0x15'));if(_0x3a9a50[a68_0x4ff3('0x3f')]['document'][a68_0x4ff3('0x39')]<_0x3edf23[a68_0x4ff3('0x45')])throw new Error(a68_0x4ff3('0x2'));await _0x3a9a50[a68_0x4ff3('0x3f')][a68_0x4ff3('0x36')][a68_0x4ff3('0x34')](_0x44d9a3);_0x3a9a50[a68_0x4ff3('0x3f')][a68_0x4ff3('0x24')](_0x3edf23['price'],a68_0x4ff3('0x48'),_0x3a9a50[a68_0x4ff3('0x3f')][a68_0x4ff3('0x14')]);await _0x3a9a50[a68_0x4ff3('0x3f')][a68_0x4ff3('0x14')][a68_0x4ff3('0xd')]();return await _0x3a9a50['channel'][a68_0x4ff3('0x2a')]({'embed':{'color':tesseract_1[a68_0x4ff3('0x1c')]['COLORS'][a68_0x4ff3('0x47')],'description':this[a68_0x4ff3('0x22')][a68_0x4ff3('0x13')][a68_0x4ff3('0x16')](_0x3a9a50[a68_0x4ff3('0x43')]['document'][a68_0x4ff3('0x1f')],'info',a68_0x4ff3('0x4f'),_0x3a9a50[a68_0x4ff3('0x5')][a68_0x4ff3('0x11')],_0x44d9a3[a68_0x4ff3('0x10')],_0xdc975c[a68_0x4ff3('0x40')])}})['catch'](()=>{});}if(_0xdc975c[a68_0x4ff3('0xa')]){if(!_0x3a9a50[a68_0x4ff3('0x3f')]['permissions']['has']('MANAGE_ROLES'))throw new Error(a68_0x4ff3('0x21'));await Role_1[a68_0x4ff3('0x4a')][a68_0x4ff3('0x29')]({'_id':_0x44d9a3['id'],'guild':_0x3a9a50[a68_0x4ff3('0x43')]['id'],'price':{'$exists':!![],'$ne':null}},{'_id':_0x44d9a3['id'],'guild':_0x3a9a50[a68_0x4ff3('0x43')]['id'],'$unset':{'price':0x1}});return await _0x3a9a50[a68_0x4ff3('0x31')][a68_0x4ff3('0x2a')]({'embed':{'color':tesseract_1[a68_0x4ff3('0x1c')][a68_0x4ff3('0x4d')][a68_0x4ff3('0x17')],'description':this['client'][a68_0x4ff3('0x13')][a68_0x4ff3('0x16')](_0x3a9a50[a68_0x4ff3('0x43')]['document'][a68_0x4ff3('0x1f')],a68_0x4ff3('0x3'),a68_0x4ff3('0x4e'),_0x3a9a50[a68_0x4ff3('0x5')][a68_0x4ff3('0x11')],_0x44d9a3['name'])}})[a68_0x4ff3('0x41')](()=>{});}}const _0x3e73c5=await Role_1[a68_0x4ff3('0x4a')][a68_0x4ff3('0x1a')]({'guild':_0x3a9a50['guild']['id'],'price':{'$exists':!![],'$ne':null}});if(!_0x3e73c5[a68_0x4ff3('0x8')])throw new Error(a68_0x4ff3('0x37'));return await _0x3a9a50[a68_0x4ff3('0x31')][a68_0x4ff3('0x2a')]({'embed':{'color':tesseract_1[a68_0x4ff3('0x1c')][a68_0x4ff3('0x4d')]['IRIS'],'title':a68_0x4ff3('0x3d'),'fields':_0x3e73c5['map'](_0x14c332=>({'name':(_0x3a9a50[a68_0x4ff3('0x43')][a68_0x4ff3('0x36')][a68_0x4ff3('0x38')][a68_0x4ff3('0x1d')](_0x14c332[a68_0x4ff3('0x12')])?_0x3a9a50[a68_0x4ff3('0x43')][a68_0x4ff3('0x36')]['cache'][a68_0x4ff3('0x44')](_0x14c332[a68_0x4ff3('0x12')])[a68_0x4ff3('0x10')]+a68_0x4ff3('0x3b'):'')+_0x14c332[a68_0x4ff3('0x12')],'value':_0x14c332[a68_0x4ff3('0x45')]+a68_0x4ff3('0x6')}))}})[a68_0x4ff3('0x41')](()=>{});};}};
const a68_0x12e4=['membershipLimitPaidRoles','LIMITED_PREMIUM_MEMBERSHIP','fetchPremiumTier','exports','join','premiumPaidRoles','map','sell','MAX_SAFE_INTEGER','language','catch','\x20Bastion\x20Coins','resolver','find','PAID_ROLES','roleStore\x20ROLE\x20--sell\x20AMOUNT','name','client','clamp','info','PLATINUM','resolveRole','../../utils/numbers','channel','Constants','isPublicBastion','\x20/\x20','BASTION_ERROR_TYPE','add','roleStoreRemove','INSUFFICIENT_BALANCE','author','cache','../../utils/omnic','PREMIUM_MEMBERSHIP_REQUIRED','It\x20allows\x20you\x20to\x20set\x20up\x20a\x20Role\x20Store\x20in\x20the\x20server.\x20Server\x20managers\x20can\x20sell\x20roles\x20in\x20the\x20server\x20and\x20members\x20can\x20buy\x20them\x20with\x20Bastion\x20Coins.','roleNotFound','has','PremiumTier','test','roleStore','errors','apply','MANAGE_ROLES','GREEN','return\x20/\x22\x20+\x20this\x20+\x20\x22/','_id','GOLD','locale','document','findOneAndUpdate','DiscordError','balance','buy','@bastion/tesseract','COLORS','NO_ROLES_ON_SALE','exec','NO_PERMISSION','ROLE_NOT_FOUND','LIMITS','roleBought','default','save','getString','member','guild','unlist','permissions','constructor','price','../../models/Role','send','user','tag','roleStore\x20ROLE\x20--buy','roles','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}'];(function(_0x523d85,_0x12e413){const _0x3a5f15=function(_0x267227){while(--_0x267227){_0x523d85['push'](_0x523d85['shift']());}};const _0x1d3ffc=function(){const _0x357ce0={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2597b1,_0x5581c3,_0x2be10a,_0x415274){_0x415274=_0x415274||{};let _0x3f87ed=_0x5581c3+'='+_0x2be10a;let _0xb51a6d=0x0;for(let _0x486670=0x0,_0x4ab1ff=_0x2597b1['length'];_0x486670<_0x4ab1ff;_0x486670++){const _0x16a822=_0x2597b1[_0x486670];_0x3f87ed+=';\x20'+_0x16a822;const _0x2bd979=_0x2597b1[_0x16a822];_0x2597b1['push'](_0x2bd979);_0x4ab1ff=_0x2597b1['length'];if(_0x2bd979!==!![]){_0x3f87ed+='='+_0x2bd979;}}_0x415274['cookie']=_0x3f87ed;},'removeCookie':function(){return'dev';},'getCookie':function(_0x9c30d2,_0x4e88c3){_0x9c30d2=_0x9c30d2||function(_0x34916d){return _0x34916d;};const _0x4bf458=_0x9c30d2(new RegExp('(?:^|;\x20)'+_0x4e88c3['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x2ccb67=function(_0x5a25fb,_0x470001){_0x5a25fb(++_0x470001);};_0x2ccb67(_0x3a5f15,_0x12e413);return _0x4bf458?decodeURIComponent(_0x4bf458[0x1]):undefined;}};const _0x720907=function(){const _0xd5af9d=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0xd5af9d['test'](_0x357ce0['removeCookie']['toString']());};_0x357ce0['updateCookie']=_0x720907;let _0xeca105='';const _0x15b404=_0x357ce0['updateCookie']();if(!_0x15b404){_0x357ce0['setCookie'](['*'],'counter',0x1);}else if(_0x15b404){_0xeca105=_0x357ce0['getCookie'](null,'counter');}else{_0x357ce0['removeCookie']();}};_0x1d3ffc();}(a68_0x12e4,0x1bd));const a68_0x3a5f=function(_0x523d85,_0x12e413){_0x523d85=_0x523d85-0x0;let _0x3a5f15=a68_0x12e4[_0x523d85];return _0x3a5f15;};const a68_0x357ce0=function(){let _0x1f5043=!![];return function(_0xe756f,_0x2d117b){const _0x46f3e7=_0x1f5043?function(){if(_0x2d117b){const _0x151cc8=_0x2d117b[a68_0x3a5f('0x41')](_0xe756f,arguments);_0x2d117b=null;return _0x151cc8;}}:function(){};_0x1f5043=![];return _0x46f3e7;};}();const a68_0x267227=a68_0x357ce0(this,function(){const _0x5cb74f=function(){const _0x242500=_0x5cb74f[a68_0x3a5f('0xe')](a68_0x3a5f('0x44'))()['compile'](a68_0x3a5f('0x16'));return!_0x242500[a68_0x3a5f('0x3e')](a68_0x267227);};return _0x5cb74f();});a68_0x267227();'use strict';const tesseract_1=require(a68_0x3a5f('0x4d'));const Role_1=require(a68_0x3a5f('0x10'));const constants=require('../../utils/constants');const errors=require('../../utils/errors');const numbers=require(a68_0x3a5f('0x2d'));const omnic=require(a68_0x3a5f('0x38'));module[a68_0x3a5f('0x1a')]=class RoleStoreCommand extends tesseract_1['Command']{constructor(){super('roleStore',{'description':a68_0x3a5f('0x3a'),'triggers':[],'arguments':{'boolean':[a68_0x3a5f('0x4c'),'unlist'],'number':[a68_0x3a5f('0x1e')],'coerce':{'sell':_0x20b1ee=>numbers[a68_0x3a5f('0x29')](_0x20b1ee,0x1,Number[a68_0x3a5f('0x1f')])}},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':['MANAGE_ROLES'],'userPermissions':[],'syntax':[a68_0x3a5f('0x3f'),a68_0x3a5f('0x26'),a68_0x3a5f('0x14'),'roleStore\x20ROLE\x20--unlist']});this[a68_0x3a5f('0x2')]=async(_0x2dfd40,_0x10bdd0)=>{if(_0x10bdd0['_']['length']){const _0x3da2ae=this[a68_0x3a5f('0x28')][a68_0x3a5f('0x23')][a68_0x3a5f('0x2c')](_0x2dfd40[a68_0x3a5f('0xb')],_0x10bdd0['_'][a68_0x3a5f('0x1b')]('\x20'));if(!_0x3da2ae)throw new errors[(a68_0x3a5f('0x4a'))](errors[a68_0x3a5f('0x32')][a68_0x3a5f('0x4')],this[a68_0x3a5f('0x28')][a68_0x3a5f('0x47')][a68_0x3a5f('0x9')](_0x2dfd40[a68_0x3a5f('0xb')]['document'][a68_0x3a5f('0x20')],'error',a68_0x3a5f('0x3b')));if(_0x10bdd0[a68_0x3a5f('0x1e')]>0x0){if(constants[a68_0x3a5f('0x30')](this[a68_0x3a5f('0x28')][a68_0x3a5f('0x12')])){const _0x14669f=await Role_1[a68_0x3a5f('0x7')]['countDocuments']({'guild':_0x2dfd40[a68_0x3a5f('0xb')]['id'],'price':{'$exists':!![],'$ne':null}});if(_0x14669f>=constants[a68_0x3a5f('0x5')][a68_0x3a5f('0x25')]){const _0x5769b8=await omnic[a68_0x3a5f('0x19')](_0x2dfd40[a68_0x3a5f('0xb')])[a68_0x3a5f('0x21')](()=>{});if(_0x5769b8){if(_0x5769b8===omnic[a68_0x3a5f('0x3d')][a68_0x3a5f('0x46')]&&_0x14669f>=constants[a68_0x3a5f('0x5')][a68_0x3a5f('0x46')][a68_0x3a5f('0x25')]){throw new errors['DiscordError'](errors[a68_0x3a5f('0x32')][a68_0x3a5f('0x18')],this[a68_0x3a5f('0x28')][a68_0x3a5f('0x47')]['getString'](_0x2dfd40[a68_0x3a5f('0xb')]['document']['language'],a68_0x3a5f('0x40'),a68_0x3a5f('0x17'),constants[a68_0x3a5f('0x5')]['GOLD'][a68_0x3a5f('0x25')]));}else if(_0x5769b8===omnic[a68_0x3a5f('0x3d')][a68_0x3a5f('0x2b')]&&_0x14669f>=constants[a68_0x3a5f('0x5')][a68_0x3a5f('0x2b')][a68_0x3a5f('0x25')]){throw new errors[(a68_0x3a5f('0x4a'))](errors['BASTION_ERROR_TYPE'][a68_0x3a5f('0x18')],this[a68_0x3a5f('0x28')][a68_0x3a5f('0x47')][a68_0x3a5f('0x9')](_0x2dfd40[a68_0x3a5f('0xb')][a68_0x3a5f('0x48')][a68_0x3a5f('0x20')],a68_0x3a5f('0x40'),a68_0x3a5f('0x17'),constants['LIMITS']['PLATINUM'][a68_0x3a5f('0x25')]));}}else{throw new errors[(a68_0x3a5f('0x4a'))](errors['BASTION_ERROR_TYPE'][a68_0x3a5f('0x39')],this['client']['locale'][a68_0x3a5f('0x9')](_0x2dfd40[a68_0x3a5f('0xb')][a68_0x3a5f('0x48')][a68_0x3a5f('0x20')],'errors',a68_0x3a5f('0x1c'),constants[a68_0x3a5f('0x5')]['PAID_ROLES']));}}}if(!_0x2dfd40[a68_0x3a5f('0xa')][a68_0x3a5f('0xd')][a68_0x3a5f('0x3c')](a68_0x3a5f('0x42')))throw new Error(a68_0x3a5f('0x3'));await Role_1[a68_0x3a5f('0x7')][a68_0x3a5f('0x49')]({'_id':_0x3da2ae['id'],'guild':_0x2dfd40[a68_0x3a5f('0xb')]['id']},{'_id':_0x3da2ae['id'],'guild':_0x2dfd40[a68_0x3a5f('0xb')]['id'],'price':_0x10bdd0['sell']},{'upsert':!![]});return await _0x2dfd40['channel'][a68_0x3a5f('0x11')]({'embed':{'color':tesseract_1[a68_0x3a5f('0x2f')][a68_0x3a5f('0x0')][a68_0x3a5f('0x43')],'description':this['client']['locale']['getString'](_0x2dfd40[a68_0x3a5f('0xb')]['document'][a68_0x3a5f('0x20')],a68_0x3a5f('0x2a'),'roleStoreAdd',_0x2dfd40[a68_0x3a5f('0x36')][a68_0x3a5f('0x13')],_0x3da2ae[a68_0x3a5f('0x27')],_0x10bdd0[a68_0x3a5f('0x1e')])}})[a68_0x3a5f('0x21')](()=>{});}if(_0x10bdd0[a68_0x3a5f('0x4c')]){if(_0x2dfd40[a68_0x3a5f('0xa')][a68_0x3a5f('0x15')][a68_0x3a5f('0x37')][a68_0x3a5f('0x3c')](_0x3da2ae['id']))throw new Error('ROLE_ALREADY_ASSIGNED');const _0x2a0e56=await Role_1[a68_0x3a5f('0x7')]['findOne']({'_id':_0x3da2ae['id'],'guild':_0x2dfd40[a68_0x3a5f('0xb')]['id'],'price':{'$exists':!![],'$ne':null}});if(!_0x2a0e56)throw new Error('ROLE_NOT_FOR_SALE');if(_0x2dfd40[a68_0x3a5f('0xa')][a68_0x3a5f('0x48')][a68_0x3a5f('0x4b')]<_0x2a0e56[a68_0x3a5f('0xf')])throw new Error(a68_0x3a5f('0x35'));await _0x2dfd40[a68_0x3a5f('0xa')]['roles'][a68_0x3a5f('0x33')](_0x3da2ae);_0x2dfd40[a68_0x3a5f('0xa')]['debit'](_0x2a0e56[a68_0x3a5f('0xf')],'Paid\x20Role',_0x2dfd40['member'][a68_0x3a5f('0x48')]);await _0x2dfd40[a68_0x3a5f('0xa')][a68_0x3a5f('0x48')][a68_0x3a5f('0x8')]();return await _0x2dfd40['channel'][a68_0x3a5f('0x11')]({'embed':{'color':tesseract_1[a68_0x3a5f('0x2f')][a68_0x3a5f('0x0')][a68_0x3a5f('0x43')],'description':this[a68_0x3a5f('0x28')]['locale'][a68_0x3a5f('0x9')](_0x2dfd40[a68_0x3a5f('0xb')][a68_0x3a5f('0x48')][a68_0x3a5f('0x20')],a68_0x3a5f('0x2a'),a68_0x3a5f('0x6'),_0x2dfd40[a68_0x3a5f('0x36')][a68_0x3a5f('0x13')],_0x3da2ae[a68_0x3a5f('0x27')],_0x10bdd0['sell'])}})['catch'](()=>{});}if(_0x10bdd0[a68_0x3a5f('0xc')]){if(!_0x2dfd40['member'][a68_0x3a5f('0xd')][a68_0x3a5f('0x3c')]('MANAGE_ROLES'))throw new Error('NO_PERMISSION');await Role_1[a68_0x3a5f('0x7')][a68_0x3a5f('0x49')]({'_id':_0x3da2ae['id'],'guild':_0x2dfd40[a68_0x3a5f('0xb')]['id'],'price':{'$exists':!![],'$ne':null}},{'_id':_0x3da2ae['id'],'guild':_0x2dfd40[a68_0x3a5f('0xb')]['id'],'$unset':{'price':0x1}});return await _0x2dfd40[a68_0x3a5f('0x2e')][a68_0x3a5f('0x11')]({'embed':{'color':tesseract_1[a68_0x3a5f('0x2f')][a68_0x3a5f('0x0')]['RED'],'description':this[a68_0x3a5f('0x28')][a68_0x3a5f('0x47')][a68_0x3a5f('0x9')](_0x2dfd40[a68_0x3a5f('0xb')][a68_0x3a5f('0x48')]['language'],'info',a68_0x3a5f('0x34'),_0x2dfd40[a68_0x3a5f('0x36')][a68_0x3a5f('0x13')],_0x3da2ae[a68_0x3a5f('0x27')])}})[a68_0x3a5f('0x21')](()=>{});}}const _0x44f383=await Role_1[a68_0x3a5f('0x7')][a68_0x3a5f('0x24')]({'guild':_0x2dfd40['guild']['id'],'price':{'$exists':!![],'$ne':null}});if(!_0x44f383['length'])throw new Error(a68_0x3a5f('0x1'));return await _0x2dfd40[a68_0x3a5f('0x2e')][a68_0x3a5f('0x11')]({'embed':{'color':tesseract_1[a68_0x3a5f('0x2f')][a68_0x3a5f('0x0')]['IRIS'],'title':'Roles\x20Store','fields':_0x44f383[a68_0x3a5f('0x1d')](_0x49d3b1=>({'name':(_0x2dfd40[a68_0x3a5f('0xb')]['roles']['cache']['has'](_0x49d3b1[a68_0x3a5f('0x45')])?_0x2dfd40[a68_0x3a5f('0xb')][a68_0x3a5f('0x15')]['cache']['get'](_0x49d3b1[a68_0x3a5f('0x45')])[a68_0x3a5f('0x27')]+a68_0x3a5f('0x31'):'')+_0x49d3b1[a68_0x3a5f('0x45')],'value':_0x49d3b1['price']+a68_0x3a5f('0x22')}))}})['catch'](()=>{});};}};
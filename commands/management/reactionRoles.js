const a67_0x1910=['roleNotFound','countDocuments','constructor','GREEN','language','membershipLimitReactionRoleGroupRoles','../../models/Role','DiscordError','LIMITED_PREMIUM_MEMBERSHIP','deleteOne','\x20Roles','@bastion/tesseract','../../utils/errors','fetch','MESSAGE_NOT_FOUND','findByIdAndUpdate','guild','catch','LIMITS','client','PLATINUM','length','locale','ROLE_NOT_FOUND','../../utils/emojis','COLORS','_id','Emoji','resolver','join','default','emoji','compile','url','document','get','fetchPremiumTier','GOLD','reactionRoles\x20--message\x20ID\x20--role\x20ROLES...','REACTION_ROLES_PER_GROUP','Role\x20Emoji','user','premiumReactionRoleGroups','info','save','getString','react','send','reactionRoles\x20--role\x20ROLE\x20--no-emoji','PREMIUM_MEMBERSHIP_REQUIRED','value','exclusive','membershipLimitReactionRoleGroups','createDocument','Constants','reactionRoles\x20--role\x20ROLE\x20--emoji\x20EMOJI','emojis','parseEmoji','\x20/\x20Exclusive','Role\x20Emoji\x20Added','REACTION_ROLE_GROUPS','../../utils/constants','map','Role','Command','resolveRoles','PremiumTier','It\x20allows\x20you\x20to\x20create\x20(and\x20delete)\x20Reaction\x20Role\x20Groups.\x20A\x20Reaction\x20Role\x20Group\x20is\x20a\x20group\x20of\x20reactions\x20emojis\x20that\x20can\x20be\x20used\x20by\x20a\x20member\x20on\x20the\x20Reaction\x20Role\x20Message\x20to\x20add\x20(or\x20remove)\x20roles\x20to\x20themselves.\x20Reaction\x20Roles\x20in\x20a\x20single\x20group\x20can\x20also\x20be\x20set\x20as\x20mutually\x20exclusive.\x20It\x20also\x20allows\x20you\x20to\x20assign\x20emojis\x20to\x20roles,\x20that\x20can\x20be\x20used\x20in\x20reacting\x20to\x20the\x20Reaction\x20Role\x20Message.','IRIS','reaction','role','resolveRole','messages','errors','premiumReactionRoleGroupRoles','find','reactionRoles\x20--message\x20ID\x20--delete','RED','MANAGE_ROLES','message','cache','author','test','tag','BASTION_ERROR_TYPE','delete','return\x20/\x22\x20+\x20this\x20+\x20\x22/','reactionRoles','channel'];(function(_0x24b24b,_0x19102b){const _0x26e1a0=function(_0x5bd1c2){while(--_0x5bd1c2){_0x24b24b['push'](_0x24b24b['shift']());}};const _0x2a92c4=function(){const _0x316b37={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x45842c,_0x3aef6c,_0x48d076,_0xfb283a){_0xfb283a=_0xfb283a||{};let _0x3c3088=_0x3aef6c+'='+_0x48d076;let _0x258fe2=0x0;for(let _0x4b3212=0x0,_0x29e00e=_0x45842c['length'];_0x4b3212<_0x29e00e;_0x4b3212++){const _0x418252=_0x45842c[_0x4b3212];_0x3c3088+=';\x20'+_0x418252;const _0x2c5280=_0x45842c[_0x418252];_0x45842c['push'](_0x2c5280);_0x29e00e=_0x45842c['length'];if(_0x2c5280!==!![]){_0x3c3088+='='+_0x2c5280;}}_0xfb283a['cookie']=_0x3c3088;},'removeCookie':function(){return'dev';},'getCookie':function(_0x59b55d,_0x558c92){_0x59b55d=_0x59b55d||function(_0x1a9c6a){return _0x1a9c6a;};const _0x405bb2=_0x59b55d(new RegExp('(?:^|;\x20)'+_0x558c92['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x5c4a37=function(_0xec5312,_0x1b4e59){_0xec5312(++_0x1b4e59);};_0x5c4a37(_0x26e1a0,_0x19102b);return _0x405bb2?decodeURIComponent(_0x405bb2[0x1]):undefined;}};const _0x16628c=function(){const _0xbe5a71=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0xbe5a71['test'](_0x316b37['removeCookie']['toString']());};_0x316b37['updateCookie']=_0x16628c;let _0x5ec210='';const _0xf20455=_0x316b37['updateCookie']();if(!_0xf20455){_0x316b37['setCookie'](['*'],'counter',0x1);}else if(_0xf20455){_0x5ec210=_0x316b37['getCookie'](null,'counter');}else{_0x316b37['removeCookie']();}};_0x2a92c4();}(a67_0x1910,0x6d));const a67_0x26e1=function(_0x24b24b,_0x19102b){_0x24b24b=_0x24b24b-0x0;let _0x26e1a0=a67_0x1910[_0x24b24b];return _0x26e1a0;};const a67_0x316b37=function(){let _0x4a06a9=!![];return function(_0x5a3b08,_0x57c5e4){const _0x2e6474=_0x4a06a9?function(){if(_0x57c5e4){const _0x55b9e1=_0x57c5e4['apply'](_0x5a3b08,arguments);_0x57c5e4=null;return _0x55b9e1;}}:function(){};_0x4a06a9=![];return _0x2e6474;};}();const a67_0x5bd1c2=a67_0x316b37(this,function(){const _0x2a1792=function(){const _0x400a35=_0x2a1792[a67_0x26e1('0x47')](a67_0x26e1('0x42'))()[a67_0x26e1('0xc')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x400a35[a67_0x26e1('0x3e')](a67_0x5bd1c2);};return _0x2a1792();});a67_0x5bd1c2();'use strict';const tesseract_1=require(a67_0x26e1('0x50'));const Role_1=require(a67_0x26e1('0x4b'));const ReactionRoleGroup_1=require('../../models/ReactionRoleGroup');const constants=require(a67_0x26e1('0x29'));const emojis=require(a67_0x26e1('0x4'));const errors=require(a67_0x26e1('0x51'));const omnic=require('../../utils/omnic');module['exports']=class ReactionRolesCommand extends tesseract_1[a67_0x26e1('0x2c')]{constructor(){super('reactionRoles',{'description':a67_0x26e1('0x2f'),'triggers':[],'arguments':{'array':[a67_0x26e1('0x32')],'boolean':[a67_0x26e1('0x41'),a67_0x26e1('0x1f')],'string':[a67_0x26e1('0x3b'),'role',a67_0x26e1('0xb')]},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a67_0x26e1('0x3a')],'userPermissions':[a67_0x26e1('0x3a')],'syntax':[a67_0x26e1('0x43'),a67_0x26e1('0x23'),a67_0x26e1('0x1c'),a67_0x26e1('0x12'),'reactionRoles\x20--message\x20ID\x20--role\x20ROLES...\x20--exclusive',a67_0x26e1('0x38')]});this['exec']=async(_0x23503e,_0xb8efb3)=>{if(_0xb8efb3[a67_0x26e1('0x3b')]&&_0xb8efb3[a67_0x26e1('0x41')]){await ReactionRoleGroup_1['default'][a67_0x26e1('0x4e')]({'_id':_0xb8efb3[a67_0x26e1('0x3b')]});return await _0x23503e[a67_0x26e1('0x44')][a67_0x26e1('0x1b')]({'embed':{'color':tesseract_1[a67_0x26e1('0x22')][a67_0x26e1('0x5')][a67_0x26e1('0x39')],'description':this[a67_0x26e1('0x58')][a67_0x26e1('0x2')]['getString'](_0x23503e[a67_0x26e1('0x55')]['document']['language'],a67_0x26e1('0x17'),'reactionRolesGroupRemove',_0x23503e[a67_0x26e1('0x3d')][a67_0x26e1('0x3f')],_0xb8efb3[a67_0x26e1('0x3b')])}})[a67_0x26e1('0x56')](()=>{});}if(_0xb8efb3[a67_0x26e1('0x3b')]&&_0xb8efb3['role']&&_0xb8efb3[a67_0x26e1('0x32')]['length']){if(constants['isPublicBastion'](this['client'][a67_0x26e1('0x15')])){const _0x1cdc70=await omnic[a67_0x26e1('0x10')](_0x23503e[a67_0x26e1('0x55')])['catch'](()=>{});if(_0x1cdc70){if(_0x1cdc70===omnic[a67_0x26e1('0x2e')]['GOLD']&&_0xb8efb3[a67_0x26e1('0x32')][a67_0x26e1('0x1')]>constants[a67_0x26e1('0x57')]['GOLD']['REACTION_ROLES_PER_GROUP']){throw new errors[(a67_0x26e1('0x4c'))](errors[a67_0x26e1('0x40')]['LIMITED_PREMIUM_MEMBERSHIP'],this[a67_0x26e1('0x58')][a67_0x26e1('0x2')][a67_0x26e1('0x19')](_0x23503e[a67_0x26e1('0x55')][a67_0x26e1('0xe')][a67_0x26e1('0x49')],a67_0x26e1('0x35'),a67_0x26e1('0x4a'),constants[a67_0x26e1('0x57')][a67_0x26e1('0x11')][a67_0x26e1('0x13')]));}else if(_0x1cdc70===omnic[a67_0x26e1('0x2e')][a67_0x26e1('0x0')]&&_0xb8efb3[a67_0x26e1('0x32')][a67_0x26e1('0x1')]>constants[a67_0x26e1('0x57')]['PLATINUM'][a67_0x26e1('0x13')]){throw new errors[(a67_0x26e1('0x4c'))](errors['BASTION_ERROR_TYPE']['LIMITED_PREMIUM_MEMBERSHIP'],this['client'][a67_0x26e1('0x2')][a67_0x26e1('0x19')](_0x23503e['guild'][a67_0x26e1('0xe')][a67_0x26e1('0x49')],'errors',a67_0x26e1('0x4a'),constants[a67_0x26e1('0x57')][a67_0x26e1('0x0')]['REACTION_ROLES_PER_GROUP']));}}else if(_0xb8efb3[a67_0x26e1('0x32')][a67_0x26e1('0x1')]>constants[a67_0x26e1('0x57')][a67_0x26e1('0x13')]){throw new errors['DiscordError'](errors[a67_0x26e1('0x40')]['PREMIUM_MEMBERSHIP_REQUIRED'],this['client'][a67_0x26e1('0x2')][a67_0x26e1('0x19')](_0x23503e['guild'][a67_0x26e1('0xe')][a67_0x26e1('0x49')],a67_0x26e1('0x35'),a67_0x26e1('0x36'),constants['LIMITS'][a67_0x26e1('0x13')]));}const _0x4db6aa=await ReactionRoleGroup_1[a67_0x26e1('0xa')][a67_0x26e1('0x46')]({'guild':_0x23503e[a67_0x26e1('0x55')]['id']});if(_0x1cdc70){if(_0x1cdc70===omnic[a67_0x26e1('0x2e')][a67_0x26e1('0x11')]&&_0x4db6aa>=constants[a67_0x26e1('0x57')]['GOLD'][a67_0x26e1('0x28')]){throw new errors[(a67_0x26e1('0x4c'))](errors[a67_0x26e1('0x40')][a67_0x26e1('0x4d')],this['client']['locale']['getString'](_0x23503e['guild'][a67_0x26e1('0xe')][a67_0x26e1('0x49')],a67_0x26e1('0x35'),a67_0x26e1('0x20'),constants[a67_0x26e1('0x57')][a67_0x26e1('0x11')][a67_0x26e1('0x28')]));}else if(_0x1cdc70===omnic[a67_0x26e1('0x2e')][a67_0x26e1('0x0')]&&_0x4db6aa>=constants['LIMITS'][a67_0x26e1('0x0')][a67_0x26e1('0x28')]){throw new errors[(a67_0x26e1('0x4c'))](errors[a67_0x26e1('0x40')][a67_0x26e1('0x4d')],this['client'][a67_0x26e1('0x2')][a67_0x26e1('0x19')](_0x23503e[a67_0x26e1('0x55')][a67_0x26e1('0xe')][a67_0x26e1('0x49')],a67_0x26e1('0x35'),a67_0x26e1('0x20'),constants[a67_0x26e1('0x57')][a67_0x26e1('0x0')][a67_0x26e1('0x28')]));}}else if(_0x4db6aa>=constants[a67_0x26e1('0x57')][a67_0x26e1('0x28')]){throw new errors[(a67_0x26e1('0x4c'))](errors[a67_0x26e1('0x40')][a67_0x26e1('0x1d')],this['client'][a67_0x26e1('0x2')][a67_0x26e1('0x19')](_0x23503e[a67_0x26e1('0x55')][a67_0x26e1('0xe')][a67_0x26e1('0x49')],'errors',a67_0x26e1('0x16'),constants['LIMITS']['REACTION_ROLE_GROUPS']));}}const _0x22e1e1=await _0x23503e[a67_0x26e1('0x44')][a67_0x26e1('0x34')][a67_0x26e1('0x52')](_0xb8efb3['message'],![])['catch'](()=>{});if(!_0x22e1e1)throw new Error(a67_0x26e1('0x53'));const _0x3932a8=this['client'][a67_0x26e1('0x8')][a67_0x26e1('0x2d')](_0x23503e[a67_0x26e1('0x55')],_0xb8efb3[a67_0x26e1('0x32')]);if(!_0x3932a8[a67_0x26e1('0x1')])throw new errors[(a67_0x26e1('0x4c'))](errors[a67_0x26e1('0x40')][a67_0x26e1('0x3')],this[a67_0x26e1('0x58')][a67_0x26e1('0x2')][a67_0x26e1('0x19')](_0x23503e[a67_0x26e1('0x55')][a67_0x26e1('0xe')][a67_0x26e1('0x49')],a67_0x26e1('0x35'),a67_0x26e1('0x45')));await ReactionRoleGroup_1[a67_0x26e1('0xa')][a67_0x26e1('0x54')](_0x22e1e1['id'],{'_id':_0x22e1e1['id'],'channel':_0x23503e['channel']['id'],'guild':_0x23503e[a67_0x26e1('0x55')]['id'],'roles':_0x3932a8[a67_0x26e1('0x2a')](_0x361fe4=>_0x361fe4['id']),'exclusive':_0xb8efb3['exclusive']?_0xb8efb3[a67_0x26e1('0x1f')]:undefined},{'upsert':!![]});await _0x23503e[a67_0x26e1('0x44')][a67_0x26e1('0x1b')]({'embed':{'color':tesseract_1[a67_0x26e1('0x22')]['COLORS'][a67_0x26e1('0x48')],'description':this[a67_0x26e1('0x58')][a67_0x26e1('0x2')][a67_0x26e1('0x19')](_0x23503e['guild'][a67_0x26e1('0xe')][a67_0x26e1('0x49')],a67_0x26e1('0x17'),'reactionRolesGroupAdd',_0x23503e[a67_0x26e1('0x3d')][a67_0x26e1('0x3f')],_0x22e1e1[a67_0x26e1('0xd')])}})[a67_0x26e1('0x56')](()=>{});const _0x4bd328=await Role_1[a67_0x26e1('0xa')][a67_0x26e1('0x37')]({'$or':_0x3932a8['map'](_0x49128d=>({'_id':_0x49128d['id']})),'guild':_0x23503e[a67_0x26e1('0x55')]['id'],'emoji':{'$exists':!![]}});if(_0x4bd328&&_0x4bd328[a67_0x26e1('0x1')]){for(const _0x204298 of _0x4bd328){const _0x3892ae=emojis[a67_0x26e1('0x25')](_0x204298[a67_0x26e1('0xb')]);await _0x22e1e1[a67_0x26e1('0x1a')](_0x3892ae[a67_0x26e1('0x31')]);}}return;}if(_0xb8efb3[a67_0x26e1('0x32')]){const _0x12252e=_0xb8efb3[a67_0x26e1('0x32')]?_0xb8efb3['role'][a67_0x26e1('0x9')]('\x20'):'';const _0x59d918=this[a67_0x26e1('0x58')][a67_0x26e1('0x8')][a67_0x26e1('0x33')](_0x23503e['guild'],_0x12252e);if(!_0x59d918)throw new errors[(a67_0x26e1('0x4c'))](errors[a67_0x26e1('0x40')][a67_0x26e1('0x3')],this[a67_0x26e1('0x58')][a67_0x26e1('0x2')]['getString'](_0x23503e[a67_0x26e1('0x55')]['document'][a67_0x26e1('0x49')],a67_0x26e1('0x35'),'roleNotFound'));let _0x478048=await _0x59d918['fetchDocument']();if(!_0x478048&&_0xb8efb3['emoji']){_0x478048=await _0x59d918[a67_0x26e1('0x21')]();}if(_0xb8efb3[a67_0x26e1('0xb')]){const _0x15385c=emojis[a67_0x26e1('0x25')](_0xb8efb3['emoji']);_0x478048[a67_0x26e1('0xb')]=_0x15385c[a67_0x26e1('0x1e')];await _0x478048[a67_0x26e1('0x18')]();}else if(_0x478048&&_0xb8efb3[a67_0x26e1('0xb')]===![]){_0x478048[a67_0x26e1('0xb')]=undefined;await _0x478048[a67_0x26e1('0x18')]();}const _0x59042d=_0x478048?emojis[a67_0x26e1('0x25')](_0x478048[a67_0x26e1('0xb')]):undefined;return await _0x23503e[a67_0x26e1('0x44')][a67_0x26e1('0x1b')]({'embed':{'color':_0xb8efb3['emoji']?tesseract_1['Constants'][a67_0x26e1('0x5')]['GREEN']:_0xb8efb3[a67_0x26e1('0xb')]===![]?tesseract_1[a67_0x26e1('0x22')][a67_0x26e1('0x5')][a67_0x26e1('0x39')]:tesseract_1[a67_0x26e1('0x22')][a67_0x26e1('0x5')][a67_0x26e1('0x30')],'title':_0xb8efb3[a67_0x26e1('0xb')]?a67_0x26e1('0x27'):_0xb8efb3[a67_0x26e1('0xb')]===![]?'Role\x20Emoji\x20Removed':a67_0x26e1('0x14'),'fields':[{'name':a67_0x26e1('0x2b'),'value':_0x59d918['name']||'-','inline':!![]},{'name':a67_0x26e1('0x7'),'value':_0x59042d?_0x59042d[a67_0x26e1('0x31')]===_0x59042d[a67_0x26e1('0x1e')]?_0x23503e[a67_0x26e1('0x55')][a67_0x26e1('0x24')][a67_0x26e1('0x3c')][a67_0x26e1('0xf')](_0x59042d[a67_0x26e1('0x31')])||_0x59042d[a67_0x26e1('0x1e')]:_0x59042d[a67_0x26e1('0x31')]:'-','inline':!![]}]}})[a67_0x26e1('0x56')](()=>{});}const _0x650348=await ReactionRoleGroup_1[a67_0x26e1('0xa')][a67_0x26e1('0x37')]({});if(!_0x650348)throw new Error('NO_REACTION_ROLES');await _0x23503e[a67_0x26e1('0x44')][a67_0x26e1('0x1b')]({'embed':{'title':'Reaction\x20Role\x20Groups','fields':_0x650348[a67_0x26e1('0x2a')](_0x3bdcd8=>({'name':_0x3bdcd8[a67_0x26e1('0x6')],'value':_0x3bdcd8['roles'][a67_0x26e1('0x1')]+a67_0x26e1('0x4f')+(_0x3bdcd8[a67_0x26e1('0x1f')]?a67_0x26e1('0x26'):'')+'\x20/\x20[Jump\x20to\x20Reaction\x20Message](https://discord.com/channels/'+_0x3bdcd8[a67_0x26e1('0x55')]+'/'+_0x3bdcd8[a67_0x26e1('0x44')]+'/'+_0x3bdcd8[a67_0x26e1('0x6')]+')'}))}})[a67_0x26e1('0x56')](()=>{});};}};
const a68_0x10db=['GOLD','Command','locale','BASTION_ERROR_TYPE','LIMITED_PREMIUM_MEMBERSHIP','length','reactionRoles\x20--role\x20ROLE\x20--emoji\x20EMOJI','REACTION_ROLES_PER_GROUP','membershipLimitReactionRoleGroupRoles','catch','tag','MANAGE_ROLES','role','document','RED','Role\x20Emoji\x20Added','NO_REACTION_ROLES','guild','url','return\x20/\x22\x20+\x20this\x20+\x20\x22/','Emoji','fetch','message','../../models/Role','compile','reaction','membershipLimitReactionRoleGroups','roleNotFound','constructor','premiumReactionRoleGroups','reactionRoles\x20--message\x20ID\x20--delete','reactionRolesGroupRemove','emoji','parseEmoji','channel','user','messages','Role\x20Emoji\x20Removed','info','fetchDocument','COLORS','resolveRoles','default','Role\x20Emoji','getString','Reaction\x20Role\x20Groups','Constants','ROLE_NOT_FOUND','reactionRoles\x20--message\x20ID\x20--role\x20ROLES...\x20--exclusive','get','countDocuments','language','resolver','exec','author','react','apply','PREMIUM_MEMBERSHIP_REQUIRED','deleteOne','value','\x20/\x20[Jump\x20to\x20Reaction\x20Message](https://discord.com/channels/','resolveRole','DiscordError','\x20/\x20Exclusive','client','It\x20allows\x20you\x20to\x20create\x20(and\x20delete)\x20Reaction\x20Role\x20Groups.\x20A\x20Reaction\x20Role\x20Group\x20is\x20a\x20group\x20of\x20reactions\x20emojis\x20that\x20can\x20be\x20used\x20by\x20a\x20member\x20on\x20the\x20Reaction\x20Role\x20Message\x20to\x20add\x20(or\x20remove)\x20roles\x20to\x20themselves.\x20Reaction\x20Roles\x20in\x20a\x20single\x20group\x20can\x20also\x20be\x20set\x20as\x20mutually\x20exclusive.\x20It\x20also\x20allows\x20you\x20to\x20assign\x20emojis\x20to\x20roles,\x20that\x20can\x20be\x20used\x20in\x20reacting\x20to\x20the\x20Reaction\x20Role\x20Message.','../../utils/errors','test','send','GREEN','Role','cache','exclusive','createDocument','reactionRoles\x20--role\x20ROLE\x20--no-emoji','reactionRoles','map','_id','LIMITS','PremiumTier','PLATINUM','delete','REACTION_ROLE_GROUPS','../../utils/emojis','errors'];(function(_0x35acba,_0x10dbaa){const _0x5f40e7=function(_0x46e8ef){while(--_0x46e8ef){_0x35acba['push'](_0x35acba['shift']());}};const _0x31f444=function(){const _0x539cfc={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0xc14d35,_0x32f09a,_0x583c56,_0x2359ad){_0x2359ad=_0x2359ad||{};let _0x537178=_0x32f09a+'='+_0x583c56;let _0x67e935=0x0;for(let _0x54ebdd=0x0,_0x5a3921=_0xc14d35['length'];_0x54ebdd<_0x5a3921;_0x54ebdd++){const _0xdfa76=_0xc14d35[_0x54ebdd];_0x537178+=';\x20'+_0xdfa76;const _0x3b6fdf=_0xc14d35[_0xdfa76];_0xc14d35['push'](_0x3b6fdf);_0x5a3921=_0xc14d35['length'];if(_0x3b6fdf!==!![]){_0x537178+='='+_0x3b6fdf;}}_0x2359ad['cookie']=_0x537178;},'removeCookie':function(){return'dev';},'getCookie':function(_0x58334a,_0x4d4169){_0x58334a=_0x58334a||function(_0x3edbfd){return _0x3edbfd;};const _0x1f5986=_0x58334a(new RegExp('(?:^|;\x20)'+_0x4d4169['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0xccfa31=function(_0x1bd3e8,_0x119a9c){_0x1bd3e8(++_0x119a9c);};_0xccfa31(_0x5f40e7,_0x10dbaa);return _0x1f5986?decodeURIComponent(_0x1f5986[0x1]):undefined;}};const _0x448725=function(){const _0x52aced=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x52aced['test'](_0x539cfc['removeCookie']['toString']());};_0x539cfc['updateCookie']=_0x448725;let _0x2d533c='';const _0x318c18=_0x539cfc['updateCookie']();if(!_0x318c18){_0x539cfc['setCookie'](['*'],'counter',0x1);}else if(_0x318c18){_0x2d533c=_0x539cfc['getCookie'](null,'counter');}else{_0x539cfc['removeCookie']();}};_0x31f444();}(a68_0x10db,0x145));const a68_0x5f40=function(_0x35acba,_0x10dbaa){_0x35acba=_0x35acba-0x0;let _0x5f40e7=a68_0x10db[_0x35acba];return _0x5f40e7;};const a68_0x539cfc=function(){let _0x113dd0=!![];return function(_0x27bbc6,_0x11ec9b){const _0x5dcfc7=_0x113dd0?function(){if(_0x11ec9b){const _0x4c197a=_0x11ec9b[a68_0x5f40('0x47')](_0x27bbc6,arguments);_0x11ec9b=null;return _0x4c197a;}}:function(){};_0x113dd0=![];return _0x5dcfc7;};}();const a68_0x46e8ef=a68_0x539cfc(this,function(){const _0x551432=function(){const _0x5c2482=_0x551432[a68_0x5f40('0x2b')](a68_0x5f40('0x22'))()[a68_0x5f40('0x27')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x5c2482[a68_0x5f40('0x52')](a68_0x46e8ef);};return _0x551432();});a68_0x46e8ef();'use strict';const tesseract_1=require('@bastion/tesseract');const Role_1=require(a68_0x5f40('0x26'));const ReactionRoleGroup_1=require('../../models/ReactionRoleGroup');const constants=require('../../utils/constants');const emojis=require(a68_0x5f40('0xd'));const errors=require(a68_0x5f40('0x51'));const omnic=require('../../utils/omnic');module['exports']=class ReactionRolesCommand extends tesseract_1[a68_0x5f40('0x10')]{constructor(){super(a68_0x5f40('0x5'),{'description':a68_0x5f40('0x50'),'triggers':[],'arguments':{'array':[a68_0x5f40('0x1b')],'boolean':[a68_0x5f40('0xb'),'exclusive'],'string':[a68_0x5f40('0x25'),a68_0x5f40('0x1b'),a68_0x5f40('0x2f')]},'scope':a68_0x5f40('0x20'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a68_0x5f40('0x1a')],'userPermissions':[a68_0x5f40('0x1a')],'syntax':[a68_0x5f40('0x5'),a68_0x5f40('0x15'),a68_0x5f40('0x4'),'reactionRoles\x20--message\x20ID\x20--role\x20ROLES...',a68_0x5f40('0x3f'),a68_0x5f40('0x2d')]});this[a68_0x5f40('0x44')]=async(_0x14796a,_0x5d7dd6)=>{if(_0x5d7dd6[a68_0x5f40('0x25')]&&_0x5d7dd6[a68_0x5f40('0xb')]){await ReactionRoleGroup_1['default'][a68_0x5f40('0x49')]({'_id':_0x5d7dd6[a68_0x5f40('0x25')]});return await _0x14796a[a68_0x5f40('0x31')][a68_0x5f40('0x53')]({'embed':{'color':tesseract_1[a68_0x5f40('0x3d')][a68_0x5f40('0x37')][a68_0x5f40('0x1d')],'description':this['client'][a68_0x5f40('0x11')][a68_0x5f40('0x3b')](_0x14796a[a68_0x5f40('0x20')][a68_0x5f40('0x1c')][a68_0x5f40('0x42')],a68_0x5f40('0x35'),a68_0x5f40('0x2e'),_0x14796a[a68_0x5f40('0x45')][a68_0x5f40('0x19')],_0x5d7dd6[a68_0x5f40('0x25')])}})['catch'](()=>{});}if(_0x5d7dd6['message']&&_0x5d7dd6[a68_0x5f40('0x1b')]&&_0x5d7dd6['role'][a68_0x5f40('0x14')]){if(constants['isPublicBastion'](this[a68_0x5f40('0x4f')][a68_0x5f40('0x32')])){const _0x50a272=await omnic['fetchPremiumTier'](_0x14796a['guild'])['catch'](()=>{});if(_0x50a272){if(_0x50a272===omnic[a68_0x5f40('0x9')][a68_0x5f40('0xf')]&&_0x5d7dd6['role']['length']>constants['LIMITS'][a68_0x5f40('0xf')]['REACTION_ROLES_PER_GROUP']){throw new errors[(a68_0x5f40('0x4d'))](errors[a68_0x5f40('0x12')][a68_0x5f40('0x13')],this[a68_0x5f40('0x4f')][a68_0x5f40('0x11')]['getString'](_0x14796a[a68_0x5f40('0x20')]['document'][a68_0x5f40('0x42')],a68_0x5f40('0xe'),a68_0x5f40('0x17'),constants[a68_0x5f40('0x8')][a68_0x5f40('0xf')][a68_0x5f40('0x16')]));}else if(_0x50a272===omnic[a68_0x5f40('0x9')]['PLATINUM']&&_0x5d7dd6['role'][a68_0x5f40('0x14')]>constants[a68_0x5f40('0x8')]['PLATINUM']['REACTION_ROLES_PER_GROUP']){throw new errors[(a68_0x5f40('0x4d'))](errors[a68_0x5f40('0x12')][a68_0x5f40('0x13')],this[a68_0x5f40('0x4f')][a68_0x5f40('0x11')][a68_0x5f40('0x3b')](_0x14796a[a68_0x5f40('0x20')][a68_0x5f40('0x1c')][a68_0x5f40('0x42')],'errors',a68_0x5f40('0x17'),constants['LIMITS'][a68_0x5f40('0xa')][a68_0x5f40('0x16')]));}}else if(_0x5d7dd6['role'][a68_0x5f40('0x14')]>constants['LIMITS'][a68_0x5f40('0x16')]){throw new errors[(a68_0x5f40('0x4d'))](errors['BASTION_ERROR_TYPE'][a68_0x5f40('0x48')],this[a68_0x5f40('0x4f')][a68_0x5f40('0x11')][a68_0x5f40('0x3b')](_0x14796a[a68_0x5f40('0x20')][a68_0x5f40('0x1c')]['language'],a68_0x5f40('0xe'),'premiumReactionRoleGroupRoles',constants[a68_0x5f40('0x8')]['REACTION_ROLES_PER_GROUP']));}const _0x20a5a1=await ReactionRoleGroup_1[a68_0x5f40('0x39')][a68_0x5f40('0x41')]({'guild':_0x14796a[a68_0x5f40('0x20')]['id']});if(_0x50a272){if(_0x50a272===omnic[a68_0x5f40('0x9')][a68_0x5f40('0xf')]&&_0x20a5a1>=constants[a68_0x5f40('0x8')][a68_0x5f40('0xf')][a68_0x5f40('0xc')]){throw new errors[(a68_0x5f40('0x4d'))](errors[a68_0x5f40('0x12')][a68_0x5f40('0x13')],this[a68_0x5f40('0x4f')][a68_0x5f40('0x11')][a68_0x5f40('0x3b')](_0x14796a[a68_0x5f40('0x20')][a68_0x5f40('0x1c')][a68_0x5f40('0x42')],'errors',a68_0x5f40('0x29'),constants[a68_0x5f40('0x8')][a68_0x5f40('0xf')][a68_0x5f40('0xc')]));}else if(_0x50a272===omnic[a68_0x5f40('0x9')][a68_0x5f40('0xa')]&&_0x20a5a1>=constants['LIMITS']['PLATINUM']['REACTION_ROLE_GROUPS']){throw new errors['DiscordError'](errors[a68_0x5f40('0x12')]['LIMITED_PREMIUM_MEMBERSHIP'],this[a68_0x5f40('0x4f')]['locale'][a68_0x5f40('0x3b')](_0x14796a[a68_0x5f40('0x20')][a68_0x5f40('0x1c')][a68_0x5f40('0x42')],a68_0x5f40('0xe'),a68_0x5f40('0x29'),constants[a68_0x5f40('0x8')]['PLATINUM'][a68_0x5f40('0xc')]));}}else if(_0x20a5a1>=constants[a68_0x5f40('0x8')][a68_0x5f40('0xc')]){throw new errors[(a68_0x5f40('0x4d'))](errors[a68_0x5f40('0x12')][a68_0x5f40('0x48')],this[a68_0x5f40('0x4f')]['locale'][a68_0x5f40('0x3b')](_0x14796a[a68_0x5f40('0x20')]['document'][a68_0x5f40('0x42')],a68_0x5f40('0xe'),a68_0x5f40('0x2c'),constants[a68_0x5f40('0x8')]['REACTION_ROLE_GROUPS']));}}const _0x4b4914=await _0x14796a[a68_0x5f40('0x31')][a68_0x5f40('0x33')][a68_0x5f40('0x24')](_0x5d7dd6[a68_0x5f40('0x25')],![])['catch'](()=>{});if(!_0x4b4914)throw new Error('MESSAGE_NOT_FOUND');const _0x289d2e=this[a68_0x5f40('0x4f')][a68_0x5f40('0x43')][a68_0x5f40('0x38')](_0x14796a[a68_0x5f40('0x20')],_0x5d7dd6['role']);if(!_0x289d2e['length'])throw new errors[(a68_0x5f40('0x4d'))](errors['BASTION_ERROR_TYPE']['ROLE_NOT_FOUND'],this[a68_0x5f40('0x4f')]['locale'][a68_0x5f40('0x3b')](_0x14796a['guild'][a68_0x5f40('0x1c')][a68_0x5f40('0x42')],a68_0x5f40('0xe'),a68_0x5f40('0x2a')));await ReactionRoleGroup_1['default']['findByIdAndUpdate'](_0x4b4914['id'],{'_id':_0x4b4914['id'],'channel':_0x14796a[a68_0x5f40('0x31')]['id'],'guild':_0x14796a[a68_0x5f40('0x20')]['id'],'roles':_0x289d2e[a68_0x5f40('0x6')](_0xef186e=>_0xef186e['id']),'exclusive':_0x5d7dd6[a68_0x5f40('0x2')]?_0x5d7dd6[a68_0x5f40('0x2')]:undefined},{'upsert':!![]});await _0x14796a[a68_0x5f40('0x31')][a68_0x5f40('0x53')]({'embed':{'color':tesseract_1['Constants'][a68_0x5f40('0x37')][a68_0x5f40('0x54')],'description':this[a68_0x5f40('0x4f')][a68_0x5f40('0x11')]['getString'](_0x14796a[a68_0x5f40('0x20')][a68_0x5f40('0x1c')][a68_0x5f40('0x42')],a68_0x5f40('0x35'),'reactionRolesGroupAdd',_0x14796a[a68_0x5f40('0x45')]['tag'],_0x4b4914[a68_0x5f40('0x21')])}})[a68_0x5f40('0x18')](()=>{});const _0x106cb0=await Role_1[a68_0x5f40('0x39')]['find']({'$or':_0x289d2e[a68_0x5f40('0x6')](_0x83063b=>({'_id':_0x83063b['id']})),'guild':_0x14796a[a68_0x5f40('0x20')]['id'],'emoji':{'$exists':!![]}});if(_0x106cb0&&_0x106cb0[a68_0x5f40('0x14')]){for(const _0x1f2fc9 of _0x106cb0){const _0x390726=emojis[a68_0x5f40('0x30')](_0x1f2fc9[a68_0x5f40('0x2f')]);await _0x4b4914[a68_0x5f40('0x46')](_0x390726['reaction']);}}return;}if(_0x5d7dd6[a68_0x5f40('0x1b')]){const _0x165fc8=_0x5d7dd6[a68_0x5f40('0x1b')]?_0x5d7dd6[a68_0x5f40('0x1b')]['join']('\x20'):'';const _0x427787=this[a68_0x5f40('0x4f')][a68_0x5f40('0x43')][a68_0x5f40('0x4c')](_0x14796a['guild'],_0x165fc8);if(!_0x427787)throw new errors[(a68_0x5f40('0x4d'))](errors[a68_0x5f40('0x12')][a68_0x5f40('0x3e')],this[a68_0x5f40('0x4f')][a68_0x5f40('0x11')][a68_0x5f40('0x3b')](_0x14796a[a68_0x5f40('0x20')][a68_0x5f40('0x1c')][a68_0x5f40('0x42')],'errors',a68_0x5f40('0x2a')));let _0x5a3dee=await _0x427787[a68_0x5f40('0x36')]();if(!_0x5a3dee&&_0x5d7dd6['emoji']){_0x5a3dee=await _0x427787[a68_0x5f40('0x3')]();}if(_0x5d7dd6[a68_0x5f40('0x2f')]){const _0x3e11ff=emojis[a68_0x5f40('0x30')](_0x5d7dd6[a68_0x5f40('0x2f')]);_0x5a3dee['emoji']=_0x3e11ff[a68_0x5f40('0x4a')];await _0x5a3dee['save']();}else if(_0x5a3dee&&_0x5d7dd6[a68_0x5f40('0x2f')]===![]){_0x5a3dee[a68_0x5f40('0x2f')]=undefined;await _0x5a3dee['save']();}const _0x1109c3=_0x5a3dee?emojis[a68_0x5f40('0x30')](_0x5a3dee[a68_0x5f40('0x2f')]):undefined;return await _0x14796a['channel'][a68_0x5f40('0x53')]({'embed':{'color':_0x5d7dd6[a68_0x5f40('0x2f')]?tesseract_1['Constants'][a68_0x5f40('0x37')]['GREEN']:_0x5d7dd6[a68_0x5f40('0x2f')]===![]?tesseract_1[a68_0x5f40('0x3d')][a68_0x5f40('0x37')][a68_0x5f40('0x1d')]:tesseract_1['Constants'][a68_0x5f40('0x37')]['IRIS'],'title':_0x5d7dd6[a68_0x5f40('0x2f')]?a68_0x5f40('0x1e'):_0x5d7dd6[a68_0x5f40('0x2f')]===![]?a68_0x5f40('0x34'):a68_0x5f40('0x3a'),'fields':[{'name':a68_0x5f40('0x0'),'value':_0x427787['name']||'-','inline':!![]},{'name':a68_0x5f40('0x23'),'value':_0x1109c3?_0x1109c3['reaction']===_0x1109c3[a68_0x5f40('0x4a')]?_0x14796a[a68_0x5f40('0x20')]['emojis'][a68_0x5f40('0x1')][a68_0x5f40('0x40')](_0x1109c3[a68_0x5f40('0x28')])||_0x1109c3['value']:_0x1109c3[a68_0x5f40('0x28')]:'-','inline':!![]}]}})[a68_0x5f40('0x18')](()=>{});}const _0x51203a=await ReactionRoleGroup_1['default']['find']({});if(!_0x51203a)throw new Error(a68_0x5f40('0x1f'));await _0x14796a[a68_0x5f40('0x31')][a68_0x5f40('0x53')]({'embed':{'title':a68_0x5f40('0x3c'),'fields':_0x51203a[a68_0x5f40('0x6')](_0x5101ca=>({'name':_0x5101ca[a68_0x5f40('0x7')],'value':_0x5101ca['roles'][a68_0x5f40('0x14')]+'\x20Roles'+(_0x5101ca[a68_0x5f40('0x2')]?a68_0x5f40('0x4e'):'')+a68_0x5f40('0x4b')+_0x5101ca[a68_0x5f40('0x20')]+'/'+_0x5101ca['channel']+'/'+_0x5101ca[a68_0x5f40('0x7')]+')'}))}})[a68_0x5f40('0x18')](()=>{});};}};
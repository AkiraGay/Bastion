const a91_0x1d672d=a91_0x358e;(function(_0x458cb8,_0x167372){const _0x448afb=a91_0x358e,_0x14154a=_0x458cb8();while(!![]){try{const _0x5bb51c=-parseInt(_0x448afb(0x147))/0x1*(-parseInt(_0x448afb(0x12b))/0x2)+-parseInt(_0x448afb(0x12f))/0x3*(-parseInt(_0x448afb(0x17d))/0x4)+-parseInt(_0x448afb(0x134))/0x5+-parseInt(_0x448afb(0x175))/0x6*(-parseInt(_0x448afb(0x163))/0x7)+-parseInt(_0x448afb(0x178))/0x8*(parseInt(_0x448afb(0x172))/0x9)+-parseInt(_0x448afb(0x165))/0xa+parseInt(_0x448afb(0x181))/0xb;if(_0x5bb51c===_0x167372)break;else _0x14154a['push'](_0x14154a['shift']());}catch(_0x38d000){_0x14154a['push'](_0x14154a['shift']());}}}(a91_0x321e,0x55b85));function a91_0x358e(_0x2e625a,_0x2a000a){const _0x310099=a91_0x321e();return a91_0x358e=function(_0x163fd1,_0x3c6009){_0x163fd1=_0x163fd1-0x11c;let _0x321ec0=_0x310099[_0x163fd1];return _0x321ec0;},a91_0x358e(_0x2e625a,_0x2a000a);}const a91_0x3c6009=(function(){let _0x414825=!![];return function(_0x42a108,_0x51cac4){const _0x28ad97=_0x414825?function(){const _0x5dec46=a91_0x358e;if(_0x51cac4){const _0x55b212=_0x51cac4[_0x5dec46(0x123)](_0x42a108,arguments);return _0x51cac4=null,_0x55b212;}}:function(){};return _0x414825=![],_0x28ad97;};}()),a91_0x163fd1=a91_0x3c6009(this,function(){const _0x6db480=a91_0x358e;return a91_0x163fd1['toString']()['search']('(((.+)+)+)+$')['toString']()['constructor'](a91_0x163fd1)[_0x6db480(0x129)](_0x6db480(0x154));});a91_0x163fd1();function a91_0x321e(){const _0x58af2d=['exports','apply','../../utils/constants','membershipLimitReactionRoleGroups','client','tag','Reaction\x20Role\x20Groups','search','getString','4926HijPYa','roleNotFound','NO_REACTION_ROLES','resolveRoles','467184pTyXrW','premiumReactionRoleGroupRoles','errors','length','delete','1479460MxCDJg','isPublicBastion','resolver','PLATINUM','role','../../models/Role','membershipLimitReactionRoleGroupRoles','locale','find','channel','IRIS','It\x20allows\x20you\x20to\x20create\x20(and\x20delete)\x20Reaction\x20Role\x20Groups.\x20A\x20Reaction\x20Role\x20Group\x20is\x20a\x20group\x20of\x20reactions\x20emojis\x20that\x20can\x20be\x20used\x20by\x20a\x20member\x20on\x20the\x20Reaction\x20Role\x20Message\x20to\x20add\x20(or\x20remove)\x20roles\x20to\x20themselves.\x20Reaction\x20Roles\x20in\x20a\x20single\x20group\x20can\x20also\x20be\x20set\x20as\x20mutually\x20exclusive.\x20It\x20also\x20allows\x20you\x20to\x20assign\x20emojis\x20to\x20roles,\x20that\x20can\x20be\x20used\x20in\x20reacting\x20to\x20the\x20Reaction\x20Role\x20Message.','createDocument','parseEmoji','user','name','default','MANAGE_ROLES','author','212wIxZVn','reactionRoles','fetchPremiumTier','RED','../../models/ReactionRoleGroup','GOLD','emoji','catch','fetch','document','Command','info','LIMITED_PREMIUM_MEMBERSHIP','(((.+)+)+)+$','exclusive','findByIdAndUpdate','get','emojis','Role','reactionRoles\x20--message\x20ID\x20--delete','reactionRoles\x20--message\x20ID\x20--role\x20ROLES...','resolveRole','Constants','reactionRolesGroupAdd','value','Role\x20Emoji','map','REACTION_ROLES_PER_GROUP','2096472PHZobL','_id','2785600DBWnVr','reaction','message','countDocuments','send','ROLE_NOT_FOUND','\x20/\x20[Jump\x20to\x20Reaction\x20Message](https://discord.com/channels/','GREEN','guild','roles','LIMITS','DiscordError','deleteOne','2484aDtcZn','../../utils/emojis','PREMIUM_MEMBERSHIP_REQUIRED','12dqCGCd','BASTION_ERROR_TYPE','url','16184RhlBKE','Role\x20Emoji\x20Added','premiumReactionRoleGroups','COLORS','Role\x20Emoji\x20Removed','8RrJwTm','reactionRoles\x20--role\x20ROLE\x20--no-emoji','join','\x20Roles','564355WBVwbl','language','\x20/\x20Exclusive','exec','save','REACTION_ROLE_GROUPS','PremiumTier','reactionRoles\x20--message\x20ID\x20--role\x20ROLES...\x20--exclusive'];a91_0x321e=function(){return _0x58af2d;};return a91_0x321e();}'use strict';const tesseract_1=require('@bastion/tesseract'),Role_1=require(a91_0x1d672d(0x139)),ReactionRoleGroup_1=require(a91_0x1d672d(0x14b)),constants=require(a91_0x1d672d(0x124)),emojis=require(a91_0x1d672d(0x173)),errors=require('../../utils/errors'),omnic=require('../../utils/omnic');module[a91_0x1d672d(0x122)]=class ReactionRolesCommand extends tesseract_1[a91_0x1d672d(0x151)]{constructor(){const _0x381259=a91_0x1d672d;super(_0x381259(0x148),{'description':_0x381259(0x13f),'triggers':[],'arguments':{'array':['role'],'boolean':[_0x381259(0x133),_0x381259(0x155)],'string':[_0x381259(0x167),'role','emoji']},'scope':_0x381259(0x16d),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[_0x381259(0x145)],'userPermissions':[_0x381259(0x145)],'syntax':['reactionRoles','reactionRoles\x20--role\x20ROLE\x20--emoji\x20EMOJI',_0x381259(0x17e),_0x381259(0x15b),_0x381259(0x121),_0x381259(0x15a)]});}[a91_0x1d672d(0x11d)]=async(_0x2f277a,_0x2128dd)=>{const _0x25ecc5=a91_0x1d672d;if(_0x2128dd[_0x25ecc5(0x167)]&&_0x2128dd[_0x25ecc5(0x133)])return await ReactionRoleGroup_1[_0x25ecc5(0x144)][_0x25ecc5(0x171)]({'_id':_0x2128dd[_0x25ecc5(0x167)],'guild':_0x2f277a[_0x25ecc5(0x16d)]['id']}),await _0x2f277a['channel'][_0x25ecc5(0x169)]({'embed':{'color':tesseract_1[_0x25ecc5(0x15d)]['COLORS']['RED'],'description':this[_0x25ecc5(0x126)][_0x25ecc5(0x13b)][_0x25ecc5(0x12a)](_0x2f277a[_0x25ecc5(0x16d)][_0x25ecc5(0x150)]['language'],'info','reactionRolesGroupRemove',_0x2f277a[_0x25ecc5(0x146)][_0x25ecc5(0x127)],_0x2128dd[_0x25ecc5(0x167)])}})[_0x25ecc5(0x14e)](()=>{});if(_0x2128dd[_0x25ecc5(0x167)]&&_0x2128dd[_0x25ecc5(0x138)]&&_0x2128dd['role'][_0x25ecc5(0x132)]){if(constants[_0x25ecc5(0x135)](this[_0x25ecc5(0x126)][_0x25ecc5(0x142)])){const _0x2f7101=await omnic[_0x25ecc5(0x149)](_0x2f277a[_0x25ecc5(0x16d)])[_0x25ecc5(0x14e)](()=>{});if(_0x2f7101){if(_0x2f7101===omnic[_0x25ecc5(0x120)][_0x25ecc5(0x14c)]&&_0x2128dd[_0x25ecc5(0x138)][_0x25ecc5(0x132)]>constants['LIMITS'][_0x25ecc5(0x14c)][_0x25ecc5(0x162)])throw new errors[(_0x25ecc5(0x170))](errors[_0x25ecc5(0x176)]['LIMITED_PREMIUM_MEMBERSHIP'],this[_0x25ecc5(0x126)][_0x25ecc5(0x13b)][_0x25ecc5(0x12a)](_0x2f277a[_0x25ecc5(0x16d)]['document'][_0x25ecc5(0x182)],_0x25ecc5(0x131),_0x25ecc5(0x13a),constants[_0x25ecc5(0x16f)][_0x25ecc5(0x14c)]['REACTION_ROLES_PER_GROUP']));else{if(_0x2f7101===omnic['PremiumTier'][_0x25ecc5(0x137)]&&_0x2128dd[_0x25ecc5(0x138)][_0x25ecc5(0x132)]>constants['LIMITS'][_0x25ecc5(0x137)]['REACTION_ROLES_PER_GROUP'])throw new errors[(_0x25ecc5(0x170))](errors[_0x25ecc5(0x176)]['LIMITED_PREMIUM_MEMBERSHIP'],this['client']['locale']['getString'](_0x2f277a[_0x25ecc5(0x16d)][_0x25ecc5(0x150)]['language'],_0x25ecc5(0x131),_0x25ecc5(0x13a),constants[_0x25ecc5(0x16f)][_0x25ecc5(0x137)][_0x25ecc5(0x162)]));}}else{if(_0x2128dd['role']['length']>constants[_0x25ecc5(0x16f)][_0x25ecc5(0x162)])throw new errors['DiscordError'](errors[_0x25ecc5(0x176)][_0x25ecc5(0x174)],this[_0x25ecc5(0x126)][_0x25ecc5(0x13b)][_0x25ecc5(0x12a)](_0x2f277a[_0x25ecc5(0x16d)][_0x25ecc5(0x150)][_0x25ecc5(0x182)],_0x25ecc5(0x131),_0x25ecc5(0x130),constants[_0x25ecc5(0x16f)][_0x25ecc5(0x162)]));}const _0x53fd66=await ReactionRoleGroup_1[_0x25ecc5(0x144)][_0x25ecc5(0x168)]({'guild':_0x2f277a[_0x25ecc5(0x16d)]['id']});if(_0x2f7101){if(_0x2f7101===omnic[_0x25ecc5(0x120)][_0x25ecc5(0x14c)]&&_0x53fd66>=constants['LIMITS']['GOLD'][_0x25ecc5(0x11f)])throw new errors['DiscordError'](errors[_0x25ecc5(0x176)][_0x25ecc5(0x153)],this[_0x25ecc5(0x126)][_0x25ecc5(0x13b)][_0x25ecc5(0x12a)](_0x2f277a[_0x25ecc5(0x16d)][_0x25ecc5(0x150)][_0x25ecc5(0x182)],_0x25ecc5(0x131),_0x25ecc5(0x125),constants[_0x25ecc5(0x16f)]['GOLD'][_0x25ecc5(0x11f)]));else{if(_0x2f7101===omnic[_0x25ecc5(0x120)]['PLATINUM']&&_0x53fd66>=constants[_0x25ecc5(0x16f)]['PLATINUM'][_0x25ecc5(0x11f)])throw new errors[(_0x25ecc5(0x170))](errors['BASTION_ERROR_TYPE'][_0x25ecc5(0x153)],this[_0x25ecc5(0x126)][_0x25ecc5(0x13b)]['getString'](_0x2f277a[_0x25ecc5(0x16d)][_0x25ecc5(0x150)][_0x25ecc5(0x182)],'errors','membershipLimitReactionRoleGroups',constants[_0x25ecc5(0x16f)][_0x25ecc5(0x137)][_0x25ecc5(0x11f)]));}}else{if(_0x53fd66>=constants['LIMITS']['REACTION_ROLE_GROUPS'])throw new errors[(_0x25ecc5(0x170))](errors[_0x25ecc5(0x176)][_0x25ecc5(0x174)],this[_0x25ecc5(0x126)][_0x25ecc5(0x13b)][_0x25ecc5(0x12a)](_0x2f277a[_0x25ecc5(0x16d)][_0x25ecc5(0x150)]['language'],_0x25ecc5(0x131),_0x25ecc5(0x17a),constants[_0x25ecc5(0x16f)][_0x25ecc5(0x11f)]));}}const _0x1b0026=await _0x2f277a[_0x25ecc5(0x13d)]['messages'][_0x25ecc5(0x14f)](_0x2128dd[_0x25ecc5(0x167)],![])[_0x25ecc5(0x14e)](()=>{});if(!_0x1b0026)throw new Error('MESSAGE_NOT_FOUND');const _0x39de13=this[_0x25ecc5(0x126)][_0x25ecc5(0x136)][_0x25ecc5(0x12e)](_0x2f277a['guild'],_0x2128dd[_0x25ecc5(0x138)]);if(!_0x39de13['length'])throw new errors[(_0x25ecc5(0x170))](errors[_0x25ecc5(0x176)]['ROLE_NOT_FOUND'],this[_0x25ecc5(0x126)][_0x25ecc5(0x13b)][_0x25ecc5(0x12a)](_0x2f277a['guild'][_0x25ecc5(0x150)][_0x25ecc5(0x182)],_0x25ecc5(0x131),_0x25ecc5(0x12c)));await ReactionRoleGroup_1[_0x25ecc5(0x144)][_0x25ecc5(0x156)](_0x1b0026['id'],{'_id':_0x1b0026['id'],'channel':_0x2f277a['channel']['id'],'guild':_0x2f277a[_0x25ecc5(0x16d)]['id'],'roles':_0x39de13[_0x25ecc5(0x161)](_0x4ffa38=>_0x4ffa38['id']),'exclusive':_0x2128dd[_0x25ecc5(0x155)]?_0x2128dd[_0x25ecc5(0x155)]:undefined},{'upsert':!![]}),await _0x2f277a[_0x25ecc5(0x13d)]['send']({'embed':{'color':tesseract_1['Constants']['COLORS'][_0x25ecc5(0x16c)],'description':this[_0x25ecc5(0x126)][_0x25ecc5(0x13b)][_0x25ecc5(0x12a)](_0x2f277a[_0x25ecc5(0x16d)][_0x25ecc5(0x150)][_0x25ecc5(0x182)],_0x25ecc5(0x152),_0x25ecc5(0x15e),_0x2f277a[_0x25ecc5(0x146)][_0x25ecc5(0x127)],_0x1b0026[_0x25ecc5(0x177)])}})[_0x25ecc5(0x14e)](()=>{});const _0x218038=await Role_1[_0x25ecc5(0x144)][_0x25ecc5(0x13c)]({'$or':_0x39de13[_0x25ecc5(0x161)](_0x3a7061=>({'_id':_0x3a7061['id']})),'guild':_0x2f277a['guild']['id'],'emoji':{'$exists':!![]}});if(_0x218038&&_0x218038['length'])for(const _0x252938 of _0x218038){const _0x3aa975=emojis['parseEmoji'](_0x252938[_0x25ecc5(0x14d)]);await _0x1b0026['react'](_0x3aa975[_0x25ecc5(0x166)]);}return;}if(_0x2128dd['role']){const _0xa2b78b=_0x2128dd['role']?_0x2128dd[_0x25ecc5(0x138)][_0x25ecc5(0x17f)]('\x20'):'',_0x2a23a5=this[_0x25ecc5(0x126)][_0x25ecc5(0x136)][_0x25ecc5(0x15c)](_0x2f277a[_0x25ecc5(0x16d)],_0xa2b78b);if(!_0x2a23a5)throw new errors['DiscordError'](errors[_0x25ecc5(0x176)][_0x25ecc5(0x16a)],this['client']['locale']['getString'](_0x2f277a[_0x25ecc5(0x16d)][_0x25ecc5(0x150)][_0x25ecc5(0x182)],_0x25ecc5(0x131),_0x25ecc5(0x12c)));let _0x2afe2f=await _0x2a23a5['fetchDocument']();!_0x2afe2f&&_0x2128dd[_0x25ecc5(0x14d)]&&(_0x2afe2f=await _0x2a23a5[_0x25ecc5(0x140)]());if(_0x2128dd['emoji']){const _0x42bcdd=emojis[_0x25ecc5(0x141)](_0x2128dd[_0x25ecc5(0x14d)]);_0x2afe2f[_0x25ecc5(0x14d)]=_0x42bcdd[_0x25ecc5(0x15f)],await _0x2afe2f[_0x25ecc5(0x11e)]();}else _0x2afe2f&&_0x2128dd[_0x25ecc5(0x14d)]===![]&&(_0x2afe2f[_0x25ecc5(0x14d)]=undefined,await _0x2afe2f[_0x25ecc5(0x11e)]());const _0x7136ca=_0x2afe2f?emojis[_0x25ecc5(0x141)](_0x2afe2f[_0x25ecc5(0x14d)]):undefined;return await _0x2f277a[_0x25ecc5(0x13d)]['send']({'embed':{'color':_0x2128dd[_0x25ecc5(0x14d)]?tesseract_1[_0x25ecc5(0x15d)][_0x25ecc5(0x17b)]['GREEN']:_0x2128dd[_0x25ecc5(0x14d)]===![]?tesseract_1[_0x25ecc5(0x15d)][_0x25ecc5(0x17b)][_0x25ecc5(0x14a)]:tesseract_1[_0x25ecc5(0x15d)][_0x25ecc5(0x17b)][_0x25ecc5(0x13e)],'title':_0x2128dd['emoji']?_0x25ecc5(0x179):_0x2128dd[_0x25ecc5(0x14d)]===![]?_0x25ecc5(0x17c):_0x25ecc5(0x160),'fields':[{'name':_0x25ecc5(0x159),'value':_0x2a23a5[_0x25ecc5(0x143)]||'-','inline':!![]},{'name':'Emoji','value':_0x7136ca?_0x7136ca[_0x25ecc5(0x166)]===_0x7136ca[_0x25ecc5(0x15f)]?_0x2f277a[_0x25ecc5(0x16d)][_0x25ecc5(0x158)]['cache'][_0x25ecc5(0x157)](_0x7136ca[_0x25ecc5(0x166)])||_0x7136ca[_0x25ecc5(0x15f)]:_0x7136ca['reaction']:'-','inline':!![]}]}})['catch'](()=>{});}const _0xeaeb84=await ReactionRoleGroup_1[_0x25ecc5(0x144)][_0x25ecc5(0x13c)]({'guild':_0x2f277a[_0x25ecc5(0x16d)]['id']});if(!_0xeaeb84)throw new Error(_0x25ecc5(0x12d));await _0x2f277a['channel'][_0x25ecc5(0x169)]({'embed':{'color':tesseract_1['Constants'][_0x25ecc5(0x17b)][_0x25ecc5(0x13e)],'title':_0x25ecc5(0x128),'fields':_0xeaeb84[_0x25ecc5(0x161)](_0x4cab10=>({'name':_0x4cab10[_0x25ecc5(0x164)],'value':_0x4cab10[_0x25ecc5(0x16e)][_0x25ecc5(0x132)]+_0x25ecc5(0x180)+(_0x4cab10['exclusive']?_0x25ecc5(0x11c):'')+_0x25ecc5(0x16b)+_0x4cab10[_0x25ecc5(0x16d)]+'/'+_0x4cab10[_0x25ecc5(0x13d)]+'/'+_0x4cab10[_0x25ecc5(0x164)]+')'}))}})['catch'](()=>{});};};
const a507_0x11cf=['length','reaction','resolver','exec','emoji','find','../../models/Role','parseEmoji','compile','test','delete','Role\x20Emoji\x20Removed','MANAGE_ROLES','resolveRole','save','language','COLORS','role','default','return\x20/\x22\x20+\x20this\x20+\x20\x22/','errors','name','reactionRoles\x20--message\x20ID\x20--delete','RED','membershipLimitReactionRoleGroupRoles','REACTION_ROLE_GROUPS','PremiumTier','PREMIUM_MEMBERSHIP_REQUIRED','map','\x20Roles','url','locale','reactionRolesGroupAdd','REACTION_ROLES_PER_GROUP','document','tag','@bastion/tesseract','isPublicBastion','exports','message','apply','value','reactionRoles','membershipLimitReactionRoleGroups','client','_id','It\x20allows\x20you\x20to\x20create\x20(and\x20delete)\x20Reaction\x20Role\x20Groups.\x20A\x20Reaction\x20Role\x20Group\x20is\x20a\x20group\x20of\x20reactions\x20emojis\x20that\x20can\x20be\x20used\x20by\x20a\x20member\x20on\x20the\x20Reaction\x20Role\x20Message\x20to\x20add\x20(or\x20remove)\x20roles\x20to\x20themselves.\x20Reaction\x20Roles\x20in\x20a\x20single\x20group\x20can\x20also\x20be\x20set\x20as\x20mutually\x20exclusive.\x20It\x20also\x20allows\x20you\x20to\x20assign\x20emojis\x20to\x20roles,\x20that\x20can\x20be\x20used\x20in\x20reacting\x20to\x20the\x20Reaction\x20Role\x20Message.','constructor','reactionRoles\x20--message\x20ID\x20--role\x20ROLES...\x20--exclusive','Constants','premiumReactionRoleGroups','premiumReactionRoleGroupRoles','Reaction\x20Role\x20Groups','deleteOne','exclusive','emojis','getString','MESSAGE_NOT_FOUND','GREEN','Command','cache','countDocuments','GOLD','Role\x20Emoji\x20Added','guild','info','LIMITED_PREMIUM_MEMBERSHIP','BASTION_ERROR_TYPE','Emoji','ROLE_NOT_FOUND','Role\x20Emoji','roleNotFound','DiscordError','PLATINUM','../../models/ReactionRoleGroup','author','reactionRoles\x20--role\x20ROLE\x20--emoji\x20EMOJI','reactionRolesGroupRemove','catch','send','join','NO_REACTION_ROLES','../../utils/constants','channel','LIMITS','Role','get','react','resolveRoles','fetch'];(function(_0x511bd0,_0x11cf76){const _0x285361=function(_0x24b796){while(--_0x24b796){_0x511bd0['push'](_0x511bd0['shift']());}};const _0x4b8fd5=function(){const _0x4518f2={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2aed16,_0xe9109f,_0x4efb7e,_0x1fb7f9){_0x1fb7f9=_0x1fb7f9||{};let _0x111c0e=_0xe9109f+'='+_0x4efb7e;let _0x400321=0x0;for(let _0xa88472=0x0,_0x12c3dc=_0x2aed16['length'];_0xa88472<_0x12c3dc;_0xa88472++){const _0x4c8510=_0x2aed16[_0xa88472];_0x111c0e+=';\x20'+_0x4c8510;const _0x47914d=_0x2aed16[_0x4c8510];_0x2aed16['push'](_0x47914d);_0x12c3dc=_0x2aed16['length'];if(_0x47914d!==!![]){_0x111c0e+='='+_0x47914d;}}_0x1fb7f9['cookie']=_0x111c0e;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4ed948,_0xa3f32e){_0x4ed948=_0x4ed948||function(_0x10786a){return _0x10786a;};const _0x403818=_0x4ed948(new RegExp('(?:^|;\x20)'+_0xa3f32e['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x4e8e24=function(_0x2e8b72,_0x3cba67){_0x2e8b72(++_0x3cba67);};_0x4e8e24(_0x285361,_0x11cf76);return _0x403818?decodeURIComponent(_0x403818[0x1]):undefined;}};const _0x5a0b3e=function(){const _0x565eaf=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x565eaf['test'](_0x4518f2['removeCookie']['toString']());};_0x4518f2['updateCookie']=_0x5a0b3e;let _0xdd031f='';const _0x2ca7cc=_0x4518f2['updateCookie']();if(!_0x2ca7cc){_0x4518f2['setCookie'](['*'],'counter',0x1);}else if(_0x2ca7cc){_0xdd031f=_0x4518f2['getCookie'](null,'counter');}else{_0x4518f2['removeCookie']();}};_0x4b8fd5();}(a507_0x11cf,0x1b9));const a507_0x2853=function(_0x511bd0,_0x11cf76){_0x511bd0=_0x511bd0-0x0;let _0x285361=a507_0x11cf[_0x511bd0];return _0x285361;};const a507_0x4518f2=function(){let _0x773918=!![];return function(_0x26ba89,_0x4e313a){const _0x5b1abb=_0x773918?function(){if(_0x4e313a){const _0x3b6682=_0x4e313a[a507_0x2853('0x31')](_0x26ba89,arguments);_0x4e313a=null;return _0x3b6682;}}:function(){};_0x773918=![];return _0x5b1abb;};}();const a507_0x24b796=a507_0x4518f2(this,function(){const _0x317016=function(){const _0x1aa068=_0x317016[a507_0x2853('0x38')](a507_0x2853('0x1c'))()[a507_0x2853('0x11')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x1aa068[a507_0x2853('0x12')](a507_0x24b796);};return _0x317016();});a507_0x24b796();'use strict';const tesseract_1=require(a507_0x2853('0x2d'));const Role_1=require(a507_0x2853('0xf'));const ReactionRoleGroup_1=require(a507_0x2853('0x53'));const constants=require(a507_0x2853('0x1'));const emojis=require('../../utils/emojis');const errors=require('../../utils/errors');const omnic=require('../../utils/omnic');module[a507_0x2853('0x2f')]=class ReactionRolesCommand extends tesseract_1[a507_0x2853('0x44')]{constructor(){super('reactionRoles',{'description':a507_0x2853('0x37'),'triggers':[],'arguments':{'array':[a507_0x2853('0x1a')],'boolean':[a507_0x2853('0x13'),'exclusive'],'string':['message',a507_0x2853('0x1a'),a507_0x2853('0xd')]},'scope':a507_0x2853('0x49'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a507_0x2853('0x15')],'userPermissions':[a507_0x2853('0x15')],'syntax':[a507_0x2853('0x33'),a507_0x2853('0x55'),'reactionRoles\x20--role\x20ROLE\x20--no-emoji','reactionRoles\x20--message\x20ID\x20--role\x20ROLES...',a507_0x2853('0x39'),a507_0x2853('0x1f')]});this[a507_0x2853('0xc')]=async(_0x436756,_0x569aa8)=>{if(_0x569aa8[a507_0x2853('0x30')]&&_0x569aa8[a507_0x2853('0x13')]){await ReactionRoleGroup_1[a507_0x2853('0x1b')][a507_0x2853('0x3e')]({'_id':_0x569aa8[a507_0x2853('0x30')]});return await _0x436756[a507_0x2853('0x2')][a507_0x2853('0x58')]({'embed':{'color':tesseract_1[a507_0x2853('0x3a')][a507_0x2853('0x19')][a507_0x2853('0x20')],'description':this[a507_0x2853('0x35')]['locale'][a507_0x2853('0x41')](_0x436756[a507_0x2853('0x49')][a507_0x2853('0x2b')]['language'],a507_0x2853('0x4a'),a507_0x2853('0x56'),_0x436756[a507_0x2853('0x54')][a507_0x2853('0x2c')],_0x569aa8['message'])}})[a507_0x2853('0x57')](()=>{});}if(_0x569aa8[a507_0x2853('0x30')]&&_0x569aa8['role']&&_0x569aa8[a507_0x2853('0x1a')][a507_0x2853('0x9')]){if(constants[a507_0x2853('0x2e')](this['client']['user'])){const _0x2b821c=await omnic['fetchPremiumTier'](_0x436756[a507_0x2853('0x49')])['catch'](()=>{});if(_0x2b821c){if(_0x2b821c===omnic[a507_0x2853('0x23')][a507_0x2853('0x47')]&&_0x569aa8[a507_0x2853('0x1a')][a507_0x2853('0x9')]>constants[a507_0x2853('0x3')][a507_0x2853('0x47')][a507_0x2853('0x2a')]){throw new errors['DiscordError'](errors[a507_0x2853('0x4c')][a507_0x2853('0x4b')],this[a507_0x2853('0x35')]['locale'][a507_0x2853('0x41')](_0x436756[a507_0x2853('0x49')]['document'][a507_0x2853('0x18')],'errors',a507_0x2853('0x21'),constants['LIMITS']['GOLD'][a507_0x2853('0x2a')]));}else if(_0x2b821c===omnic[a507_0x2853('0x23')][a507_0x2853('0x52')]&&_0x569aa8[a507_0x2853('0x1a')][a507_0x2853('0x9')]>constants['LIMITS'][a507_0x2853('0x52')][a507_0x2853('0x2a')]){throw new errors[(a507_0x2853('0x51'))](errors['BASTION_ERROR_TYPE'][a507_0x2853('0x4b')],this[a507_0x2853('0x35')][a507_0x2853('0x28')][a507_0x2853('0x41')](_0x436756[a507_0x2853('0x49')][a507_0x2853('0x2b')][a507_0x2853('0x18')],'errors','membershipLimitReactionRoleGroupRoles',constants[a507_0x2853('0x3')][a507_0x2853('0x52')][a507_0x2853('0x2a')]));}}else if(_0x569aa8[a507_0x2853('0x1a')]['length']>constants[a507_0x2853('0x3')][a507_0x2853('0x2a')]){throw new errors[(a507_0x2853('0x51'))](errors[a507_0x2853('0x4c')][a507_0x2853('0x24')],this['client'][a507_0x2853('0x28')][a507_0x2853('0x41')](_0x436756['guild'][a507_0x2853('0x2b')][a507_0x2853('0x18')],a507_0x2853('0x1d'),a507_0x2853('0x3c'),constants[a507_0x2853('0x3')]['REACTION_ROLES_PER_GROUP']));}const _0x5787c5=await ReactionRoleGroup_1['default'][a507_0x2853('0x46')]({'guild':_0x436756[a507_0x2853('0x49')]['id']});if(_0x2b821c){if(_0x2b821c===omnic[a507_0x2853('0x23')][a507_0x2853('0x47')]&&_0x5787c5>=constants[a507_0x2853('0x3')][a507_0x2853('0x47')][a507_0x2853('0x22')]){throw new errors[(a507_0x2853('0x51'))](errors[a507_0x2853('0x4c')][a507_0x2853('0x4b')],this[a507_0x2853('0x35')][a507_0x2853('0x28')][a507_0x2853('0x41')](_0x436756[a507_0x2853('0x49')][a507_0x2853('0x2b')][a507_0x2853('0x18')],a507_0x2853('0x1d'),'membershipLimitReactionRoleGroups',constants[a507_0x2853('0x3')][a507_0x2853('0x47')]['REACTION_ROLE_GROUPS']));}else if(_0x2b821c===omnic[a507_0x2853('0x23')][a507_0x2853('0x52')]&&_0x5787c5>=constants[a507_0x2853('0x3')][a507_0x2853('0x52')][a507_0x2853('0x22')]){throw new errors[(a507_0x2853('0x51'))](errors[a507_0x2853('0x4c')][a507_0x2853('0x4b')],this[a507_0x2853('0x35')][a507_0x2853('0x28')]['getString'](_0x436756[a507_0x2853('0x49')][a507_0x2853('0x2b')][a507_0x2853('0x18')],a507_0x2853('0x1d'),a507_0x2853('0x34'),constants['LIMITS'][a507_0x2853('0x52')][a507_0x2853('0x22')]));}}else if(_0x5787c5>=constants[a507_0x2853('0x3')][a507_0x2853('0x22')]){throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][a507_0x2853('0x24')],this[a507_0x2853('0x35')]['locale'][a507_0x2853('0x41')](_0x436756[a507_0x2853('0x49')][a507_0x2853('0x2b')]['language'],a507_0x2853('0x1d'),a507_0x2853('0x3b'),constants[a507_0x2853('0x3')][a507_0x2853('0x22')]));}}const _0x4d9f12=await _0x436756['channel']['messages'][a507_0x2853('0x8')](_0x569aa8['message'],![])[a507_0x2853('0x57')](()=>{});if(!_0x4d9f12)throw new Error(a507_0x2853('0x42'));const _0x42438f=this['client'][a507_0x2853('0xb')][a507_0x2853('0x7')](_0x436756[a507_0x2853('0x49')],_0x569aa8[a507_0x2853('0x1a')]);if(!_0x42438f[a507_0x2853('0x9')])throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE']['ROLE_NOT_FOUND'],this[a507_0x2853('0x35')][a507_0x2853('0x28')][a507_0x2853('0x41')](_0x436756[a507_0x2853('0x49')][a507_0x2853('0x2b')]['language'],a507_0x2853('0x1d'),a507_0x2853('0x50')));await ReactionRoleGroup_1[a507_0x2853('0x1b')]['findByIdAndUpdate'](_0x4d9f12['id'],{'_id':_0x4d9f12['id'],'channel':_0x436756['channel']['id'],'guild':_0x436756['guild']['id'],'roles':_0x42438f[a507_0x2853('0x25')](_0x25c499=>_0x25c499['id']),'exclusive':_0x569aa8[a507_0x2853('0x3f')]?_0x569aa8[a507_0x2853('0x3f')]:undefined},{'upsert':!![]});await _0x436756['channel'][a507_0x2853('0x58')]({'embed':{'color':tesseract_1['Constants'][a507_0x2853('0x19')]['GREEN'],'description':this[a507_0x2853('0x35')][a507_0x2853('0x28')][a507_0x2853('0x41')](_0x436756['guild']['document']['language'],'info',a507_0x2853('0x29'),_0x436756['author'][a507_0x2853('0x2c')],_0x4d9f12[a507_0x2853('0x27')])}})[a507_0x2853('0x57')](()=>{});const _0x54f04f=await Role_1[a507_0x2853('0x1b')][a507_0x2853('0xe')]({'$or':_0x42438f[a507_0x2853('0x25')](_0x35685e=>({'_id':_0x35685e['id']})),'guild':_0x436756['guild']['id'],'emoji':{'$exists':!![]}});if(_0x54f04f&&_0x54f04f[a507_0x2853('0x9')]){for(const _0x2fa236 of _0x54f04f){const _0x360f7f=emojis[a507_0x2853('0x10')](_0x2fa236[a507_0x2853('0xd')]);await _0x4d9f12[a507_0x2853('0x6')](_0x360f7f[a507_0x2853('0xa')]);}}return;}if(_0x569aa8[a507_0x2853('0x1a')]){const _0x5da637=_0x569aa8[a507_0x2853('0x1a')]?_0x569aa8[a507_0x2853('0x1a')][a507_0x2853('0x59')]('\x20'):'';const _0x400a1a=this[a507_0x2853('0x35')][a507_0x2853('0xb')][a507_0x2853('0x16')](_0x436756[a507_0x2853('0x49')],_0x5da637);if(!_0x400a1a)throw new errors[(a507_0x2853('0x51'))](errors['BASTION_ERROR_TYPE'][a507_0x2853('0x4e')],this[a507_0x2853('0x35')][a507_0x2853('0x28')][a507_0x2853('0x41')](_0x436756['guild']['document'][a507_0x2853('0x18')],a507_0x2853('0x1d'),a507_0x2853('0x50')));let _0x6d446=await _0x400a1a['fetchDocument']();if(!_0x6d446&&_0x569aa8[a507_0x2853('0xd')]){_0x6d446=await _0x400a1a['createDocument']();}if(_0x569aa8['emoji']){const _0x17c0ec=emojis[a507_0x2853('0x10')](_0x569aa8[a507_0x2853('0xd')]);_0x6d446['emoji']=_0x17c0ec[a507_0x2853('0x32')];await _0x6d446[a507_0x2853('0x17')]();}else if(_0x6d446&&_0x569aa8[a507_0x2853('0xd')]===![]){_0x6d446[a507_0x2853('0xd')]=undefined;await _0x6d446[a507_0x2853('0x17')]();}const _0x4002f5=_0x6d446?emojis[a507_0x2853('0x10')](_0x6d446[a507_0x2853('0xd')]):undefined;return await _0x436756[a507_0x2853('0x2')]['send']({'embed':{'color':_0x569aa8['emoji']?tesseract_1[a507_0x2853('0x3a')]['COLORS'][a507_0x2853('0x43')]:_0x569aa8[a507_0x2853('0xd')]===![]?tesseract_1[a507_0x2853('0x3a')][a507_0x2853('0x19')]['RED']:tesseract_1[a507_0x2853('0x3a')][a507_0x2853('0x19')]['IRIS'],'title':_0x569aa8[a507_0x2853('0xd')]?a507_0x2853('0x48'):_0x569aa8['emoji']===![]?a507_0x2853('0x14'):a507_0x2853('0x4f'),'fields':[{'name':a507_0x2853('0x4'),'value':_0x400a1a[a507_0x2853('0x1e')]||'-','inline':!![]},{'name':a507_0x2853('0x4d'),'value':_0x4002f5?_0x4002f5['reaction']===_0x4002f5[a507_0x2853('0x32')]?_0x436756['guild'][a507_0x2853('0x40')][a507_0x2853('0x45')][a507_0x2853('0x5')](_0x4002f5[a507_0x2853('0xa')])||_0x4002f5['value']:_0x4002f5[a507_0x2853('0xa')]:'-','inline':!![]}]}})[a507_0x2853('0x57')](()=>{});}const _0x2dce4a=await ReactionRoleGroup_1[a507_0x2853('0x1b')]['find']({});if(!_0x2dce4a)throw new Error(a507_0x2853('0x0'));await _0x436756[a507_0x2853('0x2')]['send']({'embed':{'title':a507_0x2853('0x3d'),'fields':_0x2dce4a[a507_0x2853('0x25')](_0x4e276b=>({'name':_0x4e276b[a507_0x2853('0x36')],'value':_0x4e276b['roles']['length']+a507_0x2853('0x26')+(_0x4e276b['exclusive']?'\x20/\x20Exclusive':'')+'\x20/\x20[Jump\x20to\x20Reaction\x20Message](https://discord.com/channels/'+_0x4e276b[a507_0x2853('0x49')]+'/'+_0x4e276b[a507_0x2853('0x2')]+'/'+_0x4e276b['_id']+')'}))}})['catch'](()=>{});};}};
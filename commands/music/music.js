const a112_0x4d35=['errors','music','../../utils/constants','language','BASTION_ERROR_TYPE','Command','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','Constants','\x20Servers','apply','channel','IRIS','tag','RED','Music\x20is\x20enabled\x20in\x20the\x20following\x20servers.','find','../../utils/omnic','music\x20--server\x20SERVER_ID','getString','@bastion/tesseract','enabled','DiscordError','owners','locale','guild','constructor','name','catch','ERROR','user','save','music\x20--servers','includes','length','document','exec','server','guilds','GREEN','fetchPremiumTier','client','../../models/Guild','default','COLORS','send','servers','musicEnable','map','exports','resolve'];(function(_0x39cc67,_0x907bd7){const _0x4d354a=function(_0x357917){while(--_0x357917){_0x39cc67['push'](_0x39cc67['shift']());}},_0x26b198=function(){const _0x140972={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x25dfc7,_0x540bb0,_0x3fd50b,_0x21de21){_0x21de21=_0x21de21||{};let _0x208da5=_0x540bb0+'='+_0x3fd50b,_0x1289d2=0x0;for(let _0x4364fb=0x0,_0x5a7d15=_0x25dfc7['length'];_0x4364fb<_0x5a7d15;_0x4364fb++){const _0x48c1db=_0x25dfc7[_0x4364fb];_0x208da5+=';\x20'+_0x48c1db;const _0x5c23c1=_0x25dfc7[_0x48c1db];_0x25dfc7['push'](_0x5c23c1),_0x5a7d15=_0x25dfc7['length'],_0x5c23c1!==!![]&&(_0x208da5+='='+_0x5c23c1);}_0x21de21['cookie']=_0x208da5;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1203f9,_0x2e7814){_0x1203f9=_0x1203f9||function(_0x2f17d5){return _0x2f17d5;};const _0x99e1ae=_0x1203f9(new RegExp('(?:^|;\x20)'+_0x2e7814['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x5cb213=function(_0x3e74b3,_0x4b3113){_0x3e74b3(++_0x4b3113);};return _0x5cb213(_0x4d354a,_0x907bd7),_0x99e1ae?decodeURIComponent(_0x99e1ae[0x1]):undefined;}},_0x3f0afe=function(){const _0x5dcc2c=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x5dcc2c['test'](_0x140972['removeCookie']['toString']());};_0x140972['updateCookie']=_0x3f0afe;let _0x33318b='';const _0x102af5=_0x140972['updateCookie']();if(!_0x102af5)_0x140972['setCookie'](['*'],'counter',0x1);else _0x102af5?_0x33318b=_0x140972['getCookie'](null,'counter'):_0x140972['removeCookie']();};_0x26b198();}(a112_0x4d35,0xae));const a112_0x26b1=function(_0x39cc67,_0x907bd7){_0x39cc67=_0x39cc67-0xca;let _0x4d354a=a112_0x4d35[_0x39cc67];return _0x4d354a;};const a112_0x5a7a05=a112_0x26b1,a112_0x3f0afe=function(){let _0x102af5=!![];return function(_0x25dfc7,_0x540bb0){const _0x3fd50b=_0x102af5?function(){const _0x585214=a112_0x26b1;if(_0x540bb0){const _0x21de21=_0x540bb0[_0x585214(0xed)](_0x25dfc7,arguments);return _0x540bb0=null,_0x21de21;}}:function(){};return _0x102af5=![],_0x3fd50b;};}(),a112_0x140972=a112_0x3f0afe(this,function(){const _0x208da5=function(){const _0x3b4f5e=a112_0x26b1,_0x1289d2=_0x208da5['constructor']('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[_0x3b4f5e(0xcb)](_0x3b4f5e(0xea));return!_0x1289d2['test'](a112_0x140972);};return _0x208da5();});a112_0x140972();'use strict';const tesseract_1=require(a112_0x5a7a05(0xf7)),constants=require(a112_0x5a7a05(0xe6)),errors=require('../../utils/errors'),omnic=require(a112_0x5a7a05(0xf4)),Guild_1=require(a112_0x5a7a05(0xdb));module[a112_0x5a7a05(0xe2)]=class MusicCommand extends tesseract_1[a112_0x5a7a05(0xe9)]{constructor(){const _0x15153e=a112_0x5a7a05;super(_0x15153e(0xe5),{'description':'It\x20toggles\x20Bastion\x27s\x20music\x20support\x20in\x20the\x20specified\x20server.\x20Once\x20enabled,\x20you\x20can\x20use\x20all\x20music\x20commands\x20in\x20the\x20server.\x20It\x20also\x20allows\x20you\x20to\x20see\x20the\x20list\x20of\x20servers\x20where\x20music\x20is\x20enabled.','triggers':[],'arguments':{'alias':{'server':['s'],'servers':['l']},'boolean':[_0x15153e(0xdf)],'string':[_0x15153e(0xd6)]},'scope':_0x15153e(0xca),'owner':!![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':['MANAGE_GUILD'],'syntax':[_0x15153e(0xe5),_0x15153e(0xf5),_0x15153e(0xd1)]}),this[_0x15153e(0xd5)]=async(_0x4364fb,_0x5a7d15)=>{const _0x1e7a63=_0x15153e;if(constants['isPublicBastion'](this[_0x1e7a63(0xda)][_0x1e7a63(0xcf)])){const _0x2e7814=await omnic[_0x1e7a63(0xd9)](_0x4364fb['guild'])['catch'](()=>{});if(!_0x2e7814)throw new errors[(_0x1e7a63(0xf9))](errors['BASTION_ERROR_TYPE']['PREMIUM_MEMBERSHIP_REQUIRED'],this[_0x1e7a63(0xda)]['locale']['getString'](_0x4364fb['guild'][_0x1e7a63(0xd4)][_0x1e7a63(0xe7)],_0x1e7a63(0xe4),'premiumMusic'));}if(this[_0x1e7a63(0xda)]['credentials'][_0x1e7a63(0xfa)][_0x1e7a63(0xd2)](_0x4364fb['author']['id'])){if(_0x5a7d15[_0x1e7a63(0xdf)]){const _0x99e1ae=await Guild_1[_0x1e7a63(0xdc)][_0x1e7a63(0xf3)]({'music.enabled':{'$exists':!![],'$eq':!![]}});return await _0x4364fb[_0x1e7a63(0xee)][_0x1e7a63(0xde)]({'embed':{'color':tesseract_1[_0x1e7a63(0xeb)][_0x1e7a63(0xdd)][_0x1e7a63(0xef)],'title':'Music\x20Servers','description':_0x1e7a63(0xf2),'fields':[{'name':_0x99e1ae[_0x1e7a63(0xd3)]+_0x1e7a63(0xec),'value':_0x99e1ae[_0x1e7a63(0xe1)](_0x5cb213=>_0x5cb213['id'])['join']('\x0a')||'-'}]}});}}else _0x5a7d15[_0x1e7a63(0xd6)]=_0x4364fb['guild']['id'];const _0x48c1db=await Guild_1[_0x1e7a63(0xdc)]['findById'](_0x5a7d15['server']||_0x4364fb[_0x1e7a63(0xca)]['id']),_0x5c23c1=this[_0x1e7a63(0xda)][_0x1e7a63(0xd7)][_0x1e7a63(0xe3)](_0x5a7d15[_0x1e7a63(0xd6)]||_0x4364fb[_0x1e7a63(0xca)]['id']);if(!_0x48c1db)throw new errors[(_0x1e7a63(0xf9))](errors[_0x1e7a63(0xe8)][_0x1e7a63(0xce)],this[_0x1e7a63(0xda)][_0x1e7a63(0xfb)][_0x1e7a63(0xf6)](_0x4364fb['guild'][_0x1e7a63(0xd4)][_0x1e7a63(0xe7)],_0x1e7a63(0xe4),'guildNotFound'));const _0x1203f9=_0x48c1db[_0x1e7a63(0xe5)]&&_0x48c1db['music'][_0x1e7a63(0xf8)];_0x48c1db[_0x1e7a63(0xe5)]={..._0x48c1db[_0x1e7a63(0xe5)],'enabled':!_0x1203f9},await _0x48c1db[_0x1e7a63(0xd0)](),await _0x4364fb['channel'][_0x1e7a63(0xde)]({'embed':{'color':_0x1203f9?tesseract_1[_0x1e7a63(0xeb)]['COLORS'][_0x1e7a63(0xf1)]:tesseract_1[_0x1e7a63(0xeb)][_0x1e7a63(0xdd)][_0x1e7a63(0xd8)],'description':this[_0x1e7a63(0xda)][_0x1e7a63(0xfb)][_0x1e7a63(0xf6)](_0x4364fb[_0x1e7a63(0xca)][_0x1e7a63(0xd4)][_0x1e7a63(0xe7)],'info',_0x1203f9?'musicDisable':_0x1e7a63(0xe0),_0x4364fb['author'][_0x1e7a63(0xf0)],_0x5c23c1?_0x5c23c1[_0x1e7a63(0xcc)]:_0x5a7d15['server'])}})[_0x1e7a63(0xcd)](()=>{});};}};
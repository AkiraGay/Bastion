const a90_0x41b1=['thumbnail','@bastion/tesseract','document','musicDisabledPublic','uploader','keepAlive','createWriteStream','shift','joinable','noMusicChannelsAsOwner','requester','music','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','uuid','--geo-bypass-country=US','type','test','getSongInfo','send','startStreamDispatcher','track','client','cache','member','promises','../../utils/errors','user','--no-cache-dir','queue','setMute','exec','voiceChannel','language','creator','.mp3','fulltitle','return\x20/\x22\x20+\x20this\x20+\x20\x22/','BASTION_ERROR_TYPE','channels','finish','channel','--ignore-errors','apply','voice','playing','Up\x20Next','webpage_url','Logger','getInfo','getString','filter','dispatcherFinishHandler','connection','play\x20Remember\x20The\x20Name\x20by\x20Ed\x20Sheeran','Album','unspeakable','end','tag','join','configurations','--quiet','--referer=https://bastion.traction.one','album','URL','constructor','history','../../utils/constants','href','youtube-dl','catch','LISTENING','Added\x20to\x20Queue','PINK','COLORS','unjoinable','guild','--youtube-skip-dash-manifest','setActivity','rmdir','Command','\x20•\x20','errors','locale','isMusicMaster','info','Constants','textChannel','Playing','--no-playlist','--force-ipv4','artist','mkdir','--no-warnings','--format=bestaudio[protocol^=http]','length','get','isPublicBastion','musicDownloadError','streamInfoHandler','Artist','play','compile','RED','musicDirectory','It\x20allows\x20you\x20to\x20play\x20a\x20music\x20in\x20the\x20server,\x20from\x20the\x20given\x20queury\x20or\x20from\x20any\x20supported\x20source.','streamEndHandler','author','link','alt_title','./music/','play\x20--link\x20https://www.youtube.com/watch?v=dQw4w9WgXcQ','exports','pipe','name','url','INVALID_COMMAND_SYNTAX','error','leave','--user-agent=Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_0)\x20AppleWebKit/604.1\x20(KHTML,\x20like\x20Gecko)\x20Version/13.0.4\x20Safari/604.1','activity','setDeaf','skipVotes','voiceChannelId','push'];(function(_0x5d32bc,_0x41b1f0){const _0x1190c2=function(_0xb7a8ca){while(--_0xb7a8ca){_0x5d32bc['push'](_0x5d32bc['shift']());}};const _0x415d75=function(){const _0x3649ac={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x1dc3b5,_0x1f048a,_0x39594c,_0x15ff0a){_0x15ff0a=_0x15ff0a||{};let _0x40d297=_0x1f048a+'='+_0x39594c;let _0x3db230=0x0;for(let _0x43247d=0x0,_0x122664=_0x1dc3b5['length'];_0x43247d<_0x122664;_0x43247d++){const _0x368476=_0x1dc3b5[_0x43247d];_0x40d297+=';\x20'+_0x368476;const _0x3f2175=_0x1dc3b5[_0x368476];_0x1dc3b5['push'](_0x3f2175);_0x122664=_0x1dc3b5['length'];if(_0x3f2175!==!![]){_0x40d297+='='+_0x3f2175;}}_0x15ff0a['cookie']=_0x40d297;},'removeCookie':function(){return'dev';},'getCookie':function(_0x29b3d1,_0x25ed39){_0x29b3d1=_0x29b3d1||function(_0x4a3e5b){return _0x4a3e5b;};const _0x43cad4=_0x29b3d1(new RegExp('(?:^|;\x20)'+_0x25ed39['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x52f5a3=function(_0x106cd5,_0x494462){_0x106cd5(++_0x494462);};_0x52f5a3(_0x1190c2,_0x41b1f0);return _0x43cad4?decodeURIComponent(_0x43cad4[0x1]):undefined;}};const _0xc2b277=function(){const _0x3d5b50=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3d5b50['test'](_0x3649ac['removeCookie']['toString']());};_0x3649ac['updateCookie']=_0xc2b277;let _0x2a549c='';const _0x1e355b=_0x3649ac['updateCookie']();if(!_0x1e355b){_0x3649ac['setCookie'](['*'],'counter',0x1);}else if(_0x1e355b){_0x2a549c=_0x3649ac['getCookie'](null,'counter');}else{_0x3649ac['removeCookie']();}};_0x415d75();}(a90_0x41b1,0x1eb));const a90_0x1190=function(_0x5d32bc,_0x41b1f0){_0x5d32bc=_0x5d32bc-0x0;let _0x1190c2=a90_0x41b1[_0x5d32bc];return _0x1190c2;};const a90_0x3649ac=function(){let _0xbe4878=!![];return function(_0x137eaf,_0x2c0a52){const _0x2f0c9d=_0xbe4878?function(){if(_0x2c0a52){const _0x2745ed=_0x2c0a52[a90_0x1190('0x2f')](_0x137eaf,arguments);_0x2c0a52=null;return _0x2745ed;}}:function(){};_0xbe4878=![];return _0x2f0c9d;};}();const a90_0xb7a8ca=a90_0x3649ac(this,function(){const _0x19d8bd=function(){const _0x486c02=_0x19d8bd[a90_0x1190('0x45')](a90_0x1190('0x29'))()[a90_0x1190('0x6a')](a90_0x1190('0x11'));return!_0x486c02[a90_0x1190('0x15')](a90_0xb7a8ca);};return _0x19d8bd();});a90_0xb7a8ca();'use strict';const fs=require('fs');const tesseract_1=require(a90_0x1190('0x6'));const youtube=require(a90_0x1190('0x49'));const uuid_1=require(a90_0x1190('0x12'));const constants=require(a90_0x1190('0x47'));const errors=require(a90_0x1190('0x1e'));module[a90_0x1190('0x74')]=class Play extends tesseract_1[a90_0x1190('0x54')]{constructor(){super(a90_0x1190('0x69'),{'description':a90_0x1190('0x6d'),'triggers':[],'arguments':{'alias':{'link':'l'},'coerce':{'link':tesseract_1['Constants']['ArgumentTypes'][a90_0x1190('0x44')]}},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[],'syntax':[a90_0x1190('0x3a'),a90_0x1190('0x73')]});this['streamInfoHandler']=(_0x3facec,_0x3c23d2)=>{const _0x27c40e=_0x3c23d2['id'];const _0x1705db=_0x3c23d2['track']||_0x3c23d2['title']||_0x3c23d2[a90_0x1190('0x28')]||_0x3c23d2[a90_0x1190('0x71')];const _0x16957b=_0x3c23d2[a90_0x1190('0x43')];const _0x5a6fb3=_0x3c23d2[a90_0x1190('0x5f')]||_0x3c23d2[a90_0x1190('0x26')]||_0x3c23d2[a90_0x1190('0x9')];const _0x16d9ff=_0x3c23d2['duration'];const _0x201248=_0x3c23d2[a90_0x1190('0x5')];const _0x209edf=_0x3c23d2[a90_0x1190('0xf')];_0x3facec[a90_0x1190('0x10')][a90_0x1190('0x21')]['push']({'id':_0x27c40e,'track':_0x1705db,'album':_0x16957b,'artist':_0x5a6fb3,'duration':_0x16d9ff,'thumbnail':_0x201248,'requester':_0x209edf});const _0x528ef6=[];if(_0x16957b){_0x528ef6['push']({'name':a90_0x1190('0x3b'),'value':_0x16957b,'inline':!![]});}if(_0x5a6fb3){_0x528ef6[a90_0x1190('0x4')]({'name':a90_0x1190('0x68'),'value':_0x5a6fb3,'inline':!![]});}_0x3facec[a90_0x1190('0x10')][a90_0x1190('0x5b')][a90_0x1190('0x17')]({'embed':{'color':tesseract_1[a90_0x1190('0x5a')][a90_0x1190('0x4e')]['PINK'],'title':a90_0x1190('0x4c'),'description':_0x1705db,'fields':_0x528ef6,'thumbnail':{'url':_0x201248},'footer':{'text':(_0x3facec[a90_0x1190('0x10')][a90_0x1190('0x21')][a90_0x1190('0x63')]?'#'+(_0x3facec['music'][a90_0x1190('0x21')][a90_0x1190('0x63')]-0x1):a90_0x1190('0x32'))+('\x20•\x20'+_0x16d9ff+a90_0x1190('0x55')+(_0x3facec['members'][a90_0x1190('0x1b')]['get'](_0x209edf)[a90_0x1190('0x1f')][a90_0x1190('0x3e')]||_0x209edf))}}})[a90_0x1190('0x4a')](()=>{});};this['streamEndHandler']=_0x5f202d=>{if(!_0x5f202d['music'][a90_0x1190('0x31')]){this[a90_0x1190('0x18')](_0x5f202d);}};this[a90_0x1190('0x18')]=_0x2fbdd4=>{if(_0x2fbdd4['music'][a90_0x1190('0x21')][a90_0x1190('0x63')]){const _0x4be1fa=_0x2fbdd4[a90_0x1190('0x10')][a90_0x1190('0x21')][0x0];const _0x3abe74=[];if(_0x4be1fa['album']){_0x3abe74[a90_0x1190('0x4')]({'name':a90_0x1190('0x3b'),'value':_0x4be1fa[a90_0x1190('0x43')],'inline':!![]});}if(_0x4be1fa[a90_0x1190('0x5f')]){_0x3abe74[a90_0x1190('0x4')]({'name':a90_0x1190('0x68'),'value':_0x4be1fa['artist'],'inline':!![]});}_0x2fbdd4[a90_0x1190('0x10')]['textChannel'][a90_0x1190('0x17')]({'embed':{'color':tesseract_1[a90_0x1190('0x5a')]['COLORS'][a90_0x1190('0x4d')],'title':a90_0x1190('0x5c'),'description':_0x4be1fa[a90_0x1190('0x19')],'fields':_0x3abe74,'thumbnail':{'url':_0x4be1fa[a90_0x1190('0x5')]},'footer':{'text':_0x4be1fa['duration']+a90_0x1190('0x55')+(_0x2fbdd4['members'][a90_0x1190('0x1b')]['get'](_0x4be1fa[a90_0x1190('0xf')])[a90_0x1190('0x1f')]['tag']||_0x4be1fa['requester'])}}})[a90_0x1190('0x4a')](()=>{});_0x2fbdd4[a90_0x1190('0x10')]['playing']=!![];const _0x26b744=_0x2fbdd4[a90_0x1190('0x30')]&&_0x2fbdd4[a90_0x1190('0x30')][a90_0x1190('0x39')]['play'](this['musicDirectory']+_0x2fbdd4['id']+'/'+_0x4be1fa['id']+'.mp3');this[a90_0x1190('0x1a')][a90_0x1190('0x1f')][a90_0x1190('0x52')]({'name':_0x4be1fa[a90_0x1190('0x19')],'type':a90_0x1190('0x4b')})['catch'](()=>{});_0x26b744['on'](a90_0x1190('0x2c'),()=>this[a90_0x1190('0x38')](_0x2fbdd4));_0x26b744['on'](a90_0x1190('0x79'),_0x1bb8d0=>{tesseract_1['Logger'][a90_0x1190('0x79')](_0x1bb8d0);this['dispatcherFinishHandler'](_0x2fbdd4);});}else{_0x2fbdd4[a90_0x1190('0x10')][a90_0x1190('0x21')]=[];_0x2fbdd4['music'][a90_0x1190('0x46')]=[];fs[a90_0x1190('0x1d')][a90_0x1190('0x53')](this[a90_0x1190('0x6c')]+_0x2fbdd4['id'],{'recursive':!![]})[a90_0x1190('0x4a')](()=>{});this[a90_0x1190('0x1a')]['user'][a90_0x1190('0x52')](this[a90_0x1190('0x1a')][a90_0x1190('0x40')]['presence'][a90_0x1190('0x0')])[a90_0x1190('0x4a')](()=>{});if(!_0x2fbdd4['document'][a90_0x1190('0x10')][a90_0x1190('0xa')]){_0x2fbdd4[a90_0x1190('0x30')]&&_0x2fbdd4[a90_0x1190('0x30')]['channel'][a90_0x1190('0x7a')]();}_0x2fbdd4['music'][a90_0x1190('0x5b')][a90_0x1190('0x17')]({'embed':{'color':tesseract_1[a90_0x1190('0x5a')]['COLORS'][a90_0x1190('0x4d')],'title':'Stopping\x20Playback'}})[a90_0x1190('0x4a')](()=>{});}};this[a90_0x1190('0x38')]=_0x3e915a=>{_0x3e915a['music'][a90_0x1190('0x31')]=![];_0x3e915a[a90_0x1190('0x10')][a90_0x1190('0x2')]=[];if(_0x3e915a[a90_0x1190('0x10')]['queue']['length']){_0x3e915a[a90_0x1190('0x10')][a90_0x1190('0x46')]['push'](_0x3e915a[a90_0x1190('0x10')][a90_0x1190('0x21')][a90_0x1190('0xc')]());}if(!_0x3e915a[a90_0x1190('0x10')][a90_0x1190('0x21')][a90_0x1190('0x63')]&&_0x3e915a['music']['repeat']){_0x3e915a[a90_0x1190('0x10')][a90_0x1190('0x21')]=_0x3e915a[a90_0x1190('0x10')]['history'];_0x3e915a[a90_0x1190('0x10')][a90_0x1190('0x46')]=[];}this[a90_0x1190('0x18')](_0x3e915a);};this[a90_0x1190('0x23')]=async(_0x2c0def,_0x1db130)=>{const _0x45d6d7=_0x2c0def['guild'];if(!_0x45d6d7['document']['music']||!_0x45d6d7[a90_0x1190('0x7')][a90_0x1190('0x10')]['enabled']){return await _0x2c0def['channel'][a90_0x1190('0x17')]({'embed':{'color':tesseract_1[a90_0x1190('0x5a')][a90_0x1190('0x4e')][a90_0x1190('0x6b')],'description':this[a90_0x1190('0x1a')][a90_0x1190('0x57')][a90_0x1190('0x36')](_0x2c0def[a90_0x1190('0x50')]['document']['language'],a90_0x1190('0x56'),constants[a90_0x1190('0x65')](_0x2c0def[a90_0x1190('0x6f')])?a90_0x1190('0x8'):'musicDisabled')}})[a90_0x1190('0x4a')](()=>{});}const _0x24ea59=_0x1db130['_'][a90_0x1190('0x3f')]('\x20');const _0x5d6fc2=_0x24ea59[a90_0x1190('0x63')]?await this[a90_0x1190('0x16')](_0x24ea59):null;const _0xdd0f06=_0x1db130[a90_0x1190('0x70')]?_0x1db130['link'][a90_0x1190('0x48')]:_0x5d6fc2?_0x5d6fc2[a90_0x1190('0x33')]||_0x5d6fc2[a90_0x1190('0x77')]:null;if(!_0xdd0f06)throw new errors['DiscordError'](errors[a90_0x1190('0x2a')][a90_0x1190('0x78')],this['name']);_0x45d6d7[a90_0x1190('0x10')][a90_0x1190('0x5b')]=_0x2c0def['guild'][a90_0x1190('0x2b')]['cache']['has'](_0x45d6d7[a90_0x1190('0x7')]['music']['textChannelId'])?_0x2c0def[a90_0x1190('0x50')][a90_0x1190('0x2b')]['cache']['get'](_0x45d6d7[a90_0x1190('0x7')][a90_0x1190('0x10')]['textChannelId']):_0x2c0def[a90_0x1190('0x2d')];_0x45d6d7[a90_0x1190('0x10')]['voiceChannel']=_0x2c0def[a90_0x1190('0x50')][a90_0x1190('0x30')]&&_0x2c0def[a90_0x1190('0x50')]['voice'][a90_0x1190('0x39')]?_0x2c0def[a90_0x1190('0x50')][a90_0x1190('0x30')][a90_0x1190('0x2d')]:_0x2c0def[a90_0x1190('0x50')][a90_0x1190('0x2b')][a90_0x1190('0x1b')][a90_0x1190('0x37')](_0x5cc417=>_0x5cc417[a90_0x1190('0x14')]===a90_0x1190('0x30'))['has'](_0x45d6d7[a90_0x1190('0x7')]['music']['voiceChannelId'])?_0x2c0def[a90_0x1190('0x50')][a90_0x1190('0x2b')][a90_0x1190('0x1b')]['filter'](_0x536bd4=>_0x536bd4[a90_0x1190('0x14')]==='voice')[a90_0x1190('0x64')](_0x45d6d7[a90_0x1190('0x7')][a90_0x1190('0x10')][a90_0x1190('0x3')]):_0x2c0def[a90_0x1190('0x1c')]['isMusicMaster']()?_0x2c0def[a90_0x1190('0x1c')][a90_0x1190('0x30')][a90_0x1190('0x2d')]:null;if(!_0x45d6d7['music']['voiceChannel']){return await _0x2c0def[a90_0x1190('0x2d')]['send']({'embed':{'color':tesseract_1[a90_0x1190('0x5a')][a90_0x1190('0x4e')][a90_0x1190('0x6b')],'description':this['client'][a90_0x1190('0x57')]['getString'](_0x2c0def[a90_0x1190('0x50')][a90_0x1190('0x7')][a90_0x1190('0x25')],a90_0x1190('0x56'),_0x2c0def[a90_0x1190('0x1c')][a90_0x1190('0x58')]()?a90_0x1190('0xe'):'noMusicChannels')}})['catch'](()=>{});}if(!_0x45d6d7['music'][a90_0x1190('0x24')][a90_0x1190('0xd')]){return await _0x2c0def[a90_0x1190('0x2d')][a90_0x1190('0x17')]({'embed':{'color':tesseract_1[a90_0x1190('0x5a')]['COLORS'][a90_0x1190('0x6b')],'description':this['client'][a90_0x1190('0x57')][a90_0x1190('0x36')](_0x2c0def[a90_0x1190('0x50')][a90_0x1190('0x7')][a90_0x1190('0x25')],a90_0x1190('0x56'),a90_0x1190('0x4f'),_0x45d6d7['music'][a90_0x1190('0x24')]['name'])}})[a90_0x1190('0x4a')](()=>{});}if(!_0x45d6d7['music'][a90_0x1190('0x24')]['speakable']){return await _0x2c0def[a90_0x1190('0x2d')][a90_0x1190('0x17')]({'embed':{'color':tesseract_1[a90_0x1190('0x5a')][a90_0x1190('0x4e')][a90_0x1190('0x6b')],'description':this[a90_0x1190('0x1a')][a90_0x1190('0x57')][a90_0x1190('0x36')](_0x2c0def[a90_0x1190('0x50')][a90_0x1190('0x7')][a90_0x1190('0x25')],a90_0x1190('0x56'),a90_0x1190('0x3c'),_0x45d6d7[a90_0x1190('0x10')]['voiceChannel'][a90_0x1190('0x76')])}})['catch'](()=>{});}const _0x38948e=await _0x45d6d7[a90_0x1190('0x10')]['voiceChannel'][a90_0x1190('0x3f')]();_0x38948e['on'](a90_0x1190('0x79'),tesseract_1[a90_0x1190('0x34')]['error']);_0x38948e['on']('failed',tesseract_1['Logger']['error']);_0x2c0def[a90_0x1190('0x50')]['me'][a90_0x1190('0x30')][a90_0x1190('0x22')](![])[a90_0x1190('0x4a')](()=>{});_0x2c0def['guild']['me']['voice'][a90_0x1190('0x1')](!![])[a90_0x1190('0x4a')](()=>{});const _0x250ebb=uuid_1['v4']();const _0x133486=youtube(_0xdd0f06,[a90_0x1190('0x2e'),a90_0x1190('0x5e'),a90_0x1190('0x13'),a90_0x1190('0x5d'),a90_0x1190('0x20'),a90_0x1190('0x41'),a90_0x1190('0x61'),a90_0x1190('0x7b'),'--referer=https://bastion.traction.one',a90_0x1190('0x62'),'--youtube-skip-dash-manifest'],{});_0x133486['on'](a90_0x1190('0x59'),_0x18c185=>this[a90_0x1190('0x67')](_0x45d6d7,{..._0x18c185,'id':_0x250ebb,'requester':_0x2c0def['author']['id']}));_0x133486['on'](a90_0x1190('0x3d'),()=>this[a90_0x1190('0x6e')](_0x45d6d7));_0x133486['on'](a90_0x1190('0x79'),()=>{_0x2c0def['channel'][a90_0x1190('0x17')]({'embed':{'color':tesseract_1['Constants'][a90_0x1190('0x4e')]['RED'],'description':this[a90_0x1190('0x1a')][a90_0x1190('0x57')][a90_0x1190('0x36')](_0x2c0def[a90_0x1190('0x50')][a90_0x1190('0x7')]['language'],a90_0x1190('0x56'),a90_0x1190('0x66'))}})[a90_0x1190('0x4a')](()=>{});});await fs[a90_0x1190('0x1d')][a90_0x1190('0x60')](this[a90_0x1190('0x6c')]+_0x2c0def[a90_0x1190('0x50')]['id']+'/',{'recursive':!![]})[a90_0x1190('0x4a')](tesseract_1[a90_0x1190('0x34')][a90_0x1190('0x79')]);_0x133486[a90_0x1190('0x75')](fs[a90_0x1190('0xb')](this[a90_0x1190('0x6c')]+_0x2c0def[a90_0x1190('0x50')]['id']+'/'+_0x250ebb+a90_0x1190('0x27')));};this[a90_0x1190('0x6c')]=a90_0x1190('0x72');}[a90_0x1190('0x16')](_0x15efd2){return new Promise((_0x173f51,_0x481afd)=>youtube[a90_0x1190('0x35')]('ytsearch:'+_0x15efd2,['--ignore-errors',a90_0x1190('0x5e'),a90_0x1190('0x13'),'--no-playlist',a90_0x1190('0x20'),a90_0x1190('0x41'),a90_0x1190('0x61'),a90_0x1190('0x7b'),a90_0x1190('0x42'),a90_0x1190('0x62'),a90_0x1190('0x51')],(_0x3ef1fb,_0x6a58a3)=>{if(_0x3ef1fb)return _0x481afd(_0x3ef1fb);return _0x173f51(_0x6a58a3);}));}};
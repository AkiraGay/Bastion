const a93_0x14df=['getSongInfo','Playing','startStreamDispatcher','PINK','COLORS','promises','joinable','error','duration','get','--quiet','streamEndHandler','musicDisabledPublic','textChannel','play','musicDownloadError','play\x20--link\x20https://www.youtube.com/watch?v=dQw4w9WgXcQ','textChannelId','cache','--format=bestaudio[protocol^=http]','isPublicBastion','errors','guild','Album','url','return\x20/\x22\x20+\x20this\x20+\x20\x22/','createWriteStream','repeat','Stopping\x20Playback','keepAlive','Added\x20to\x20Queue','setDeaf','setMute','noMusicChannelsAsOwner','--no-warnings','client','finish','LISTENING','album','--no-playlist','musicDirectory','tag','presence','connection','end','requester','voiceChannel','queue','../../utils/errors','members','test','link','thumbnail','\x20â€¢\x20','enabled','youtube-dl','getInfo','--youtube-skip-dash-manifest','BASTION_ERROR_TYPE','configurations','track','speakable','--ignore-errors','voice','type','--referer=https://bastion.traction.one','rmdir','dispatcherFinishHandler','channels','exec','mkdir','join','length','catch','play\x20Remember\x20The\x20Name\x20by\x20Ed\x20Sheeran','--user-agent=Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_0)\x20AppleWebKit/604.1\x20(KHTML,\x20like\x20Gecko)\x20Version/13.0.4\x20Safari/604.1','RED','history','failed','./music/','activity','has','apply','language','setActivity','href','It\x20allows\x20you\x20to\x20play\x20a\x20music\x20in\x20the\x20server,\x20from\x20the\x20given\x20queury\x20or\x20from\x20any\x20supported\x20source.','--geo-bypass-country=US','leave','push','.mp3','unspeakable','musicDisabled','playing','--force-ipv4','fulltitle','creator','--no-cache-dir','Logger','locale','getString','streamInfoHandler','constructor','author','user','Artist','artist','Constants','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','send','document','info','name','music','filter','Up\x20Next','Command','member','exports','channel'];(function(_0xf28ff6,_0x14df16){const _0x1fc186=function(_0x2db95a){while(--_0x2db95a){_0xf28ff6['push'](_0xf28ff6['shift']());}},_0x222499=function(){const _0x309064={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x1960cf,_0x65e7b0,_0x305555,_0x1f1974){_0x1f1974=_0x1f1974||{};let _0x418846=_0x65e7b0+'='+_0x305555,_0x5515b7=0x0;for(let _0x21eea8=0x0,_0xa2c347=_0x1960cf['length'];_0x21eea8<_0xa2c347;_0x21eea8++){const _0x38dc4d=_0x1960cf[_0x21eea8];_0x418846+=';\x20'+_0x38dc4d;const _0x273e32=_0x1960cf[_0x38dc4d];_0x1960cf['push'](_0x273e32),_0xa2c347=_0x1960cf['length'],_0x273e32!==!![]&&(_0x418846+='='+_0x273e32);}_0x1f1974['cookie']=_0x418846;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5a1dec,_0x31bad1){_0x5a1dec=_0x5a1dec||function(_0x3ba9d6){return _0x3ba9d6;};const _0x5ce297=_0x5a1dec(new RegExp('(?:^|;\x20)'+_0x31bad1['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x4901a2=function(_0x2893f7,_0x37c9d9){_0x2893f7(++_0x37c9d9);};return _0x4901a2(_0x1fc186,_0x14df16),_0x5ce297?decodeURIComponent(_0x5ce297[0x1]):undefined;}},_0x44a841=function(){const _0x3f3356=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3f3356['test'](_0x309064['removeCookie']['toString']());};_0x309064['updateCookie']=_0x44a841;let _0x570d8f='';const _0x1d22f2=_0x309064['updateCookie']();if(!_0x1d22f2)_0x309064['setCookie'](['*'],'counter',0x1);else _0x1d22f2?_0x570d8f=_0x309064['getCookie'](null,'counter'):_0x309064['removeCookie']();};_0x222499();}(a93_0x14df,0xa3));const a93_0x1fc1=function(_0xf28ff6,_0x14df16){_0xf28ff6=_0xf28ff6-0x0;let _0x1fc186=a93_0x14df[_0xf28ff6];return _0x1fc186;};const a93_0x305555=function(){let _0xc9579=!![];return function(_0x1dcca8,_0x49e7d7){const _0x2fb406=_0xc9579?function(){if(_0x49e7d7){const _0x2c6042=_0x49e7d7[a93_0x1fc1('0x27')](_0x1dcca8,arguments);return _0x49e7d7=null,_0x2c6042;}}:function(){};return _0xc9579=![],_0x2fb406;};}(),a93_0x65e7b0=a93_0x305555(this,function(){const _0x2d1cc5=function(){const _0x309f41=_0x2d1cc5['constructor'](a93_0x1fc1('0x66'))()[a93_0x1fc1('0x3b')](a93_0x1fc1('0x41'));return!_0x309f41[a93_0x1fc1('0x7')](a93_0x65e7b0);};return _0x2d1cc5();});a93_0x65e7b0();'use strict';const fs=require('fs'),tesseract_1=require('@bastion/tesseract'),youtube=require(a93_0x1fc1('0xc')),uuid_1=require('uuid'),constants=require('../../utils/constants'),errors=require(a93_0x1fc1('0x5'));module[a93_0x1fc1('0x4b')]=class Play extends tesseract_1[a93_0x1fc1('0x49')]{constructor(){super(a93_0x1fc1('0x5b'),{'description':a93_0x1fc1('0x2b'),'triggers':[],'arguments':{'alias':{'link':'l'},'coerce':{'link':tesseract_1[a93_0x1fc1('0x40')]['ArgumentTypes']['URL']}},'scope':a93_0x1fc1('0x63'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[],'syntax':[a93_0x1fc1('0x1f'),a93_0x1fc1('0x5d')]}),this[a93_0x1fc1('0x3a')]=(_0x2a99e2,_0x20177d)=>{const _0xc8417a=_0x20177d['id'],_0x5f0f09=_0x20177d[a93_0x1fc1('0x11')]||_0x20177d['title']||_0x20177d[a93_0x1fc1('0x34')]||_0x20177d['alt_title'],_0x466aca=_0x20177d[a93_0x1fc1('0x73')],_0x243293=_0x20177d[a93_0x1fc1('0x3f')]||_0x20177d[a93_0x1fc1('0x35')]||_0x20177d['uploader'],_0x585a04=_0x20177d[a93_0x1fc1('0x55')],_0x459821=_0x20177d[a93_0x1fc1('0x9')],_0x5ad48f=_0x20177d['requester'];_0x2a99e2[a93_0x1fc1('0x46')][a93_0x1fc1('0x4')][a93_0x1fc1('0x2e')]({'id':_0xc8417a,'track':_0x5f0f09,'album':_0x466aca,'artist':_0x243293,'duration':_0x585a04,'thumbnail':_0x459821,'requester':_0x5ad48f});const _0x326cd7=[];_0x466aca&&_0x326cd7[a93_0x1fc1('0x2e')]({'name':'Album','value':_0x466aca,'inline':!![]}),_0x243293&&_0x326cd7['push']({'name':a93_0x1fc1('0x3e'),'value':_0x243293,'inline':!![]}),_0x2a99e2[a93_0x1fc1('0x46')]['textChannel'][a93_0x1fc1('0x42')]({'embed':{'color':tesseract_1[a93_0x1fc1('0x40')][a93_0x1fc1('0x51')]['PINK'],'title':a93_0x1fc1('0x6b'),'description':_0x5f0f09,'fields':_0x326cd7,'thumbnail':{'url':_0x459821},'footer':{'text':(_0x2a99e2[a93_0x1fc1('0x46')][a93_0x1fc1('0x4')][a93_0x1fc1('0x1d')]?'#'+(_0x2a99e2[a93_0x1fc1('0x46')]['queue']['length']-0x1):a93_0x1fc1('0x48'))+(a93_0x1fc1('0xa')+_0x585a04+a93_0x1fc1('0xa')+(_0x2a99e2[a93_0x1fc1('0x6')][a93_0x1fc1('0x5f')][a93_0x1fc1('0x56')](_0x5ad48f)[a93_0x1fc1('0x3d')][a93_0x1fc1('0x76')]||_0x5ad48f))}}})[a93_0x1fc1('0x1e')](()=>{});},this['streamEndHandler']=_0x4dd540=>{!_0x4dd540[a93_0x1fc1('0x46')]['playing']&&this['startStreamDispatcher'](_0x4dd540);},this[a93_0x1fc1('0x4f')]=_0x59862f=>{if(_0x59862f['music']['queue']['length']){const _0x1ee1fc=_0x59862f['music'][a93_0x1fc1('0x4')][0x0],_0x27c1e4=[];_0x1ee1fc[a93_0x1fc1('0x73')]&&_0x27c1e4['push']({'name':a93_0x1fc1('0x64'),'value':_0x1ee1fc[a93_0x1fc1('0x73')],'inline':!![]});_0x1ee1fc[a93_0x1fc1('0x3f')]&&_0x27c1e4[a93_0x1fc1('0x2e')]({'name':'Artist','value':_0x1ee1fc[a93_0x1fc1('0x3f')],'inline':!![]});_0x59862f[a93_0x1fc1('0x46')][a93_0x1fc1('0x5a')][a93_0x1fc1('0x42')]({'embed':{'color':tesseract_1[a93_0x1fc1('0x40')][a93_0x1fc1('0x51')][a93_0x1fc1('0x50')],'title':a93_0x1fc1('0x4e'),'description':_0x1ee1fc[a93_0x1fc1('0x11')],'fields':_0x27c1e4,'thumbnail':{'url':_0x1ee1fc[a93_0x1fc1('0x9')]},'footer':{'text':_0x1ee1fc['duration']+a93_0x1fc1('0xa')+(_0x59862f[a93_0x1fc1('0x6')][a93_0x1fc1('0x5f')][a93_0x1fc1('0x56')](_0x1ee1fc['requester'])[a93_0x1fc1('0x3d')][a93_0x1fc1('0x76')]||_0x1ee1fc[a93_0x1fc1('0x2')])}}})['catch'](()=>{}),_0x59862f[a93_0x1fc1('0x46')][a93_0x1fc1('0x32')]=!![];const _0x10024f=_0x59862f[a93_0x1fc1('0x14')]&&_0x59862f[a93_0x1fc1('0x14')][a93_0x1fc1('0x0')][a93_0x1fc1('0x5b')](this['musicDirectory']+_0x59862f['id']+'/'+_0x1ee1fc['id']+'.mp3');this[a93_0x1fc1('0x70')][a93_0x1fc1('0x10')][a93_0x1fc1('0x46')]&&this[a93_0x1fc1('0x70')]['configurations'][a93_0x1fc1('0x46')][a93_0x1fc1('0x25')]&&this[a93_0x1fc1('0x70')]['user'][a93_0x1fc1('0x29')]({'name':_0x1ee1fc[a93_0x1fc1('0x11')],'type':a93_0x1fc1('0x72')})['catch'](()=>{}),_0x10024f['on'](a93_0x1fc1('0x71'),()=>this[a93_0x1fc1('0x18')](_0x59862f)),_0x10024f['on'](a93_0x1fc1('0x54'),_0x45d471=>{tesseract_1['Logger']['error'](_0x45d471),this[a93_0x1fc1('0x18')](_0x59862f);});}else _0x59862f[a93_0x1fc1('0x46')][a93_0x1fc1('0x4')]=[],_0x59862f[a93_0x1fc1('0x46')][a93_0x1fc1('0x22')]=[],fs[a93_0x1fc1('0x52')][a93_0x1fc1('0x17')](this[a93_0x1fc1('0x75')]+_0x59862f['id'],{'recursive':!![]})[a93_0x1fc1('0x1e')](()=>{}),this['client'][a93_0x1fc1('0x10')][a93_0x1fc1('0x46')]&&this[a93_0x1fc1('0x70')]['configurations'][a93_0x1fc1('0x46')][a93_0x1fc1('0x25')]&&this['client']['user'][a93_0x1fc1('0x29')](this[a93_0x1fc1('0x70')][a93_0x1fc1('0x10')][a93_0x1fc1('0x77')][a93_0x1fc1('0x25')])[a93_0x1fc1('0x1e')](()=>{}),!_0x59862f[a93_0x1fc1('0x43')][a93_0x1fc1('0x46')][a93_0x1fc1('0x6a')]&&(_0x59862f[a93_0x1fc1('0x14')]&&_0x59862f[a93_0x1fc1('0x14')]['channel'][a93_0x1fc1('0x2d')]()),_0x59862f[a93_0x1fc1('0x46')][a93_0x1fc1('0x5a')][a93_0x1fc1('0x42')]({'embed':{'color':tesseract_1[a93_0x1fc1('0x40')][a93_0x1fc1('0x51')]['PINK'],'title':a93_0x1fc1('0x69')}})[a93_0x1fc1('0x1e')](()=>{});},this[a93_0x1fc1('0x18')]=_0x5794b8=>{_0x5794b8[a93_0x1fc1('0x46')]['playing']=![],_0x5794b8[a93_0x1fc1('0x46')]['skipVotes']=[],_0x5794b8[a93_0x1fc1('0x46')][a93_0x1fc1('0x4')][a93_0x1fc1('0x1d')]&&_0x5794b8['music'][a93_0x1fc1('0x22')][a93_0x1fc1('0x2e')](_0x5794b8[a93_0x1fc1('0x46')]['queue']['shift']()),!_0x5794b8['music']['queue'][a93_0x1fc1('0x1d')]&&_0x5794b8['music'][a93_0x1fc1('0x68')]&&(_0x5794b8[a93_0x1fc1('0x46')][a93_0x1fc1('0x4')]=_0x5794b8[a93_0x1fc1('0x46')]['history'],_0x5794b8[a93_0x1fc1('0x46')]['history']=[]),this[a93_0x1fc1('0x4f')](_0x5794b8);},this[a93_0x1fc1('0x1a')]=async(_0x17e6fc,_0x57908e)=>{const _0x8ce14e=_0x17e6fc[a93_0x1fc1('0x63')];if(!_0x8ce14e['document'][a93_0x1fc1('0x46')]||!_0x8ce14e[a93_0x1fc1('0x43')][a93_0x1fc1('0x46')][a93_0x1fc1('0xb')])return await _0x17e6fc[a93_0x1fc1('0x4c')][a93_0x1fc1('0x42')]({'embed':{'color':tesseract_1[a93_0x1fc1('0x40')]['COLORS'][a93_0x1fc1('0x21')],'description':this['client']['locale']['getString'](_0x17e6fc[a93_0x1fc1('0x63')]['document'][a93_0x1fc1('0x28')],a93_0x1fc1('0x62'),constants[a93_0x1fc1('0x61')](_0x17e6fc['author'])?a93_0x1fc1('0x59'):a93_0x1fc1('0x31'))}})['catch'](()=>{});const _0x181f84=_0x57908e['_'][a93_0x1fc1('0x1c')]('\x20'),_0x37e7b3=_0x181f84['length']?await this[a93_0x1fc1('0x4d')](_0x181f84):null,_0x119801=_0x57908e[a93_0x1fc1('0x8')]?_0x57908e['link'][a93_0x1fc1('0x2a')]:_0x37e7b3?_0x37e7b3['webpage_url']||_0x37e7b3[a93_0x1fc1('0x65')]:null;if(!_0x119801)throw new errors['DiscordError'](errors[a93_0x1fc1('0xf')]['INVALID_COMMAND_SYNTAX'],this[a93_0x1fc1('0x45')]);_0x8ce14e['music'][a93_0x1fc1('0x5a')]=_0x17e6fc[a93_0x1fc1('0x63')][a93_0x1fc1('0x19')][a93_0x1fc1('0x5f')][a93_0x1fc1('0x26')](_0x8ce14e[a93_0x1fc1('0x43')][a93_0x1fc1('0x46')]['textChannelId'])?_0x17e6fc[a93_0x1fc1('0x63')]['channels'][a93_0x1fc1('0x5f')][a93_0x1fc1('0x56')](_0x8ce14e[a93_0x1fc1('0x43')][a93_0x1fc1('0x46')][a93_0x1fc1('0x5e')]):_0x17e6fc['channel'],_0x8ce14e[a93_0x1fc1('0x46')][a93_0x1fc1('0x3')]=_0x17e6fc[a93_0x1fc1('0x63')][a93_0x1fc1('0x14')]&&_0x17e6fc[a93_0x1fc1('0x63')][a93_0x1fc1('0x14')][a93_0x1fc1('0x0')]?_0x17e6fc[a93_0x1fc1('0x63')][a93_0x1fc1('0x14')][a93_0x1fc1('0x4c')]:_0x17e6fc[a93_0x1fc1('0x63')][a93_0x1fc1('0x19')][a93_0x1fc1('0x5f')][a93_0x1fc1('0x47')](_0x4d41f6=>_0x4d41f6[a93_0x1fc1('0x15')]===a93_0x1fc1('0x14'))['has'](_0x8ce14e['document'][a93_0x1fc1('0x46')]['voiceChannelId'])?_0x17e6fc[a93_0x1fc1('0x63')][a93_0x1fc1('0x19')][a93_0x1fc1('0x5f')]['filter'](_0x3a17d7=>_0x3a17d7[a93_0x1fc1('0x15')]===a93_0x1fc1('0x14'))['get'](_0x8ce14e[a93_0x1fc1('0x43')]['music']['voiceChannelId']):_0x17e6fc['member']['isMusicMaster']()?_0x17e6fc[a93_0x1fc1('0x4a')][a93_0x1fc1('0x14')]['channel']:null;if(!_0x8ce14e[a93_0x1fc1('0x46')]['voiceChannel'])return await _0x17e6fc[a93_0x1fc1('0x4c')][a93_0x1fc1('0x42')]({'embed':{'color':tesseract_1[a93_0x1fc1('0x40')]['COLORS'][a93_0x1fc1('0x21')],'description':this['client'][a93_0x1fc1('0x38')][a93_0x1fc1('0x39')](_0x17e6fc['guild'][a93_0x1fc1('0x43')][a93_0x1fc1('0x28')],a93_0x1fc1('0x62'),_0x17e6fc[a93_0x1fc1('0x4a')]['isMusicMaster']()?a93_0x1fc1('0x6e'):'noMusicChannels')}})[a93_0x1fc1('0x1e')](()=>{});if(!_0x8ce14e[a93_0x1fc1('0x46')][a93_0x1fc1('0x3')][a93_0x1fc1('0x53')])return await _0x17e6fc[a93_0x1fc1('0x4c')]['send']({'embed':{'color':tesseract_1['Constants']['COLORS'][a93_0x1fc1('0x21')],'description':this[a93_0x1fc1('0x70')]['locale']['getString'](_0x17e6fc[a93_0x1fc1('0x63')]['document'][a93_0x1fc1('0x28')],a93_0x1fc1('0x62'),'unjoinable',_0x8ce14e[a93_0x1fc1('0x46')][a93_0x1fc1('0x3')][a93_0x1fc1('0x45')])}})[a93_0x1fc1('0x1e')](()=>{});if(!_0x8ce14e['music'][a93_0x1fc1('0x3')][a93_0x1fc1('0x12')])return await _0x17e6fc[a93_0x1fc1('0x4c')]['send']({'embed':{'color':tesseract_1[a93_0x1fc1('0x40')][a93_0x1fc1('0x51')][a93_0x1fc1('0x21')],'description':this[a93_0x1fc1('0x70')][a93_0x1fc1('0x38')][a93_0x1fc1('0x39')](_0x17e6fc[a93_0x1fc1('0x63')]['document'][a93_0x1fc1('0x28')],a93_0x1fc1('0x62'),a93_0x1fc1('0x30'),_0x8ce14e[a93_0x1fc1('0x46')][a93_0x1fc1('0x3')][a93_0x1fc1('0x45')])}})[a93_0x1fc1('0x1e')](()=>{});const _0x3120a7=await _0x8ce14e[a93_0x1fc1('0x46')][a93_0x1fc1('0x3')][a93_0x1fc1('0x1c')]();_0x3120a7['on'](a93_0x1fc1('0x54'),tesseract_1['Logger'][a93_0x1fc1('0x54')]),_0x3120a7['on'](a93_0x1fc1('0x23'),tesseract_1[a93_0x1fc1('0x37')][a93_0x1fc1('0x54')]),_0x17e6fc[a93_0x1fc1('0x63')]['me'][a93_0x1fc1('0x14')][a93_0x1fc1('0x6d')](![])[a93_0x1fc1('0x1e')](()=>{}),_0x17e6fc[a93_0x1fc1('0x63')]['me'][a93_0x1fc1('0x14')][a93_0x1fc1('0x6c')](!![])[a93_0x1fc1('0x1e')](()=>{});const _0x32ed18=uuid_1['v4'](),_0x256fef=youtube(_0x119801,[a93_0x1fc1('0x13'),a93_0x1fc1('0x33'),a93_0x1fc1('0x2c'),a93_0x1fc1('0x74'),a93_0x1fc1('0x36'),a93_0x1fc1('0x57'),a93_0x1fc1('0x6f'),a93_0x1fc1('0x20'),a93_0x1fc1('0x16'),'--format=bestaudio[protocol^=http]','--youtube-skip-dash-manifest'],{});_0x256fef['on'](a93_0x1fc1('0x44'),_0x812bfb=>this[a93_0x1fc1('0x3a')](_0x8ce14e,{..._0x812bfb,'id':_0x32ed18,'requester':_0x17e6fc[a93_0x1fc1('0x3c')]['id']})),_0x256fef['on'](a93_0x1fc1('0x1'),()=>this[a93_0x1fc1('0x58')](_0x8ce14e)),_0x256fef['on'](a93_0x1fc1('0x54'),()=>{_0x17e6fc[a93_0x1fc1('0x4c')]['send']({'embed':{'color':tesseract_1['Constants'][a93_0x1fc1('0x51')][a93_0x1fc1('0x21')],'description':this['client'][a93_0x1fc1('0x38')][a93_0x1fc1('0x39')](_0x17e6fc[a93_0x1fc1('0x63')]['document'][a93_0x1fc1('0x28')],a93_0x1fc1('0x62'),a93_0x1fc1('0x5c'))}})[a93_0x1fc1('0x1e')](()=>{});}),await fs[a93_0x1fc1('0x52')][a93_0x1fc1('0x1b')](this[a93_0x1fc1('0x75')]+_0x17e6fc['guild']['id']+'/',{'recursive':!![]})[a93_0x1fc1('0x1e')](tesseract_1[a93_0x1fc1('0x37')]['error']),_0x256fef['pipe'](fs[a93_0x1fc1('0x67')](this['musicDirectory']+_0x17e6fc[a93_0x1fc1('0x63')]['id']+'/'+_0x32ed18+a93_0x1fc1('0x2f')));},this[a93_0x1fc1('0x75')]=a93_0x1fc1('0x24');}['getSongInfo'](_0xcd719c){return new Promise((_0x2393e3,_0x19719d)=>youtube[a93_0x1fc1('0xd')]('ytsearch:'+_0xcd719c,[a93_0x1fc1('0x13'),a93_0x1fc1('0x33'),a93_0x1fc1('0x2c'),a93_0x1fc1('0x74'),a93_0x1fc1('0x36'),a93_0x1fc1('0x57'),a93_0x1fc1('0x6f'),'--user-agent=Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_0)\x20AppleWebKit/604.1\x20(KHTML,\x20like\x20Gecko)\x20Version/13.0.4\x20Safari/604.1',a93_0x1fc1('0x16'),a93_0x1fc1('0x60'),a93_0x1fc1('0xe')],(_0x1b0c6d,_0x4d708b)=>{if(_0x1b0c6d)return _0x19719d(_0x1b0c6d);return _0x2393e3(_0x4d708b);}));}};
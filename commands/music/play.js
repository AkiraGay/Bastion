const a101_0x4c41=['speakable','shift','author','send','filter','--geo-bypass-country=US','locale','--format=bestaudio[protocol^=http]','channel','../../utils/omnic','constructor','return\x20/\x22\x20+\x20this\x20+\x20\x22/','isMusicMaster','noMusicChannelsAsOwner','BASTION_ERROR_TYPE','unjoinable','presence','createWriteStream','keepAlive','LISTENING','getString','ArgumentTypes','client','unspeakable','mkdir','setActivity','cache','playing','voiceChannel','voiceChannelId','--force-ipv4','connection','--ignore-errors','voice','startStreamDispatcher','musicDownloadError','link','PINK','streamEndHandler','promises','guild','\x20â€¢\x20','configurations','href','Constants','getSongInfo','type','error','--no-cache-dir','--youtube-skip-dash-manifest','fetchPremiumTier','musicDirectory','play\x20Remember\x20The\x20Name\x20by\x20Ed\x20Sheeran','../../utils/constants','get','language','textChannelId','user','requester','noMusicChannels','textChannel','Logger','name','info','duration','isPublicBastion','--referer=https://bastion.traction.one','musicDisabled','streamInfoHandler','url','--user-agent=Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_0)\x20AppleWebKit/604.1\x20(KHTML,\x20like\x20Gecko)\x20Version/13.0.4\x20Safari/604.1','ytsearch:','INVALID_COMMAND_SYNTAX','join','--no-playlist','premiumMusic','document','pipe','getInfo','play\x20--link\x20https://www.youtube.com/watch?v=dQw4w9WgXcQ','thumbnail','dispatcherFinishHandler','--quiet','test','push','skipVotes','errors','DiscordError','catch','URL','music','RED','--no-warnings','COLORS','finish','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','album','members','Album','queue','repeat','Artist','track','Up\x20Next','channels','webpage_url','history','failed','length','musicDisabledPublic','creator','tag','joinable','alt_title','youtube-dl','member','activity','artist'];(function(_0x133a16,_0x4c41d9){const _0x4ea580=function(_0xf51261){while(--_0xf51261){_0x133a16['push'](_0x133a16['shift']());}},_0x1b9d0a=function(){const _0x3c2953={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3be535,_0x3119b1,_0x39cbf5,_0x424f72){_0x424f72=_0x424f72||{};let _0x1784ba=_0x3119b1+'='+_0x39cbf5,_0x22040c=0x0;for(let _0x1ee0e6=0x0,_0x2a90f8=_0x3be535['length'];_0x1ee0e6<_0x2a90f8;_0x1ee0e6++){const _0x20141c=_0x3be535[_0x1ee0e6];_0x1784ba+=';\x20'+_0x20141c;const _0x2b2a48=_0x3be535[_0x20141c];_0x3be535['push'](_0x2b2a48),_0x2a90f8=_0x3be535['length'],_0x2b2a48!==!![]&&(_0x1784ba+='='+_0x2b2a48);}_0x424f72['cookie']=_0x1784ba;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1e3eb4,_0x42f321){_0x1e3eb4=_0x1e3eb4||function(_0xa82aee){return _0xa82aee;};const _0x2c43e0=_0x1e3eb4(new RegExp('(?:^|;\x20)'+_0x42f321['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x21dabc=function(_0x4598e2,_0x36c47d){_0x4598e2(++_0x36c47d);};return _0x21dabc(_0x4ea580,_0x4c41d9),_0x2c43e0?decodeURIComponent(_0x2c43e0[0x1]):undefined;}},_0x434f7d=function(){const _0x4785d4=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4785d4['test'](_0x3c2953['removeCookie']['toString']());};_0x3c2953['updateCookie']=_0x434f7d;let _0x50ac24='';const _0x125da2=_0x3c2953['updateCookie']();if(!_0x125da2)_0x3c2953['setCookie'](['*'],'counter',0x1);else _0x125da2?_0x50ac24=_0x3c2953['getCookie'](null,'counter'):_0x3c2953['removeCookie']();};_0x1b9d0a();}(a101_0x4c41,0x10b));const a101_0x4ea5=function(_0x133a16,_0x4c41d9){_0x133a16=_0x133a16-0x0;let _0x4ea580=a101_0x4c41[_0x133a16];return _0x4ea580;};const _0x2564e6=a101_0x4ea5,a101_0x3c2953=function(){let _0x50ac24=!![];return function(_0x125da2,_0x3be535){const _0x3119b1=_0x50ac24?function(){if(_0x3be535){const _0x39cbf5=_0x3be535['apply'](_0x125da2,arguments);return _0x3be535=null,_0x39cbf5;}}:function(){};return _0x50ac24=![],_0x3119b1;};}(),a101_0xf51261=a101_0x3c2953(this,function(){const _0x424f72=function(){const _0x276aee=a101_0x4ea5,_0x1784ba=_0x424f72['constructor'](_0x276aee('0x62'))()[_0x276aee('0x61')](_0x276aee('0x40'));return!_0x1784ba[_0x276aee('0x34')](a101_0xf51261);};return _0x424f72();});a101_0xf51261();'use strict';const fs=require('fs'),tesseract_1=require('@bastion/tesseract'),youtube=require(_0x2564e6('0x53')),uuid_1=require('uuid'),constants=require(_0x2564e6('0x16')),errors=require('../../utils/errors'),omnic=require(_0x2564e6('0x60'));module['exports']=class Play extends tesseract_1['Command']{constructor(){const _0x3e17d8=_0x2564e6;super('play',{'description':'It\x20allows\x20you\x20to\x20play\x20a\x20music\x20in\x20the\x20server,\x20from\x20the\x20given\x20query\x20or\x20from\x20any\x20supported\x20source.','triggers':[],'arguments':{'alias':{'link':'l'},'coerce':{'link':tesseract_1[_0x3e17d8('0xd')][_0x3e17d8('0x6c')][_0x3e17d8('0x3a')]}},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[],'syntax':[_0x3e17d8('0x15'),_0x3e17d8('0x30')]}),this[_0x3e17d8('0x25')]=(_0x22040c,_0x1ee0e6)=>{const _0x19de0d=_0x3e17d8,_0x2a90f8=_0x1ee0e6['id'],_0x20141c=_0x1ee0e6[_0x19de0d('0x47')]||_0x1ee0e6['title']||_0x1ee0e6['fulltitle']||_0x1ee0e6[_0x19de0d('0x52')],_0x2b2a48=_0x1ee0e6['album'],_0x1e3eb4=_0x1ee0e6[_0x19de0d('0x56')]||_0x1ee0e6[_0x19de0d('0x4f')]||_0x1ee0e6['uploader'],_0x42f321=_0x1ee0e6[_0x19de0d('0x21')],_0x2c43e0=_0x1ee0e6[_0x19de0d('0x31')],_0x21dabc=_0x1ee0e6['requester'];_0x22040c['music'][_0x19de0d('0x44')]['push']({'id':_0x2a90f8,'track':_0x20141c,'album':_0x2b2a48,'artist':_0x1e3eb4,'duration':_0x42f321,'thumbnail':_0x2c43e0,'requester':_0x21dabc});const _0xa82aee=[];_0x2b2a48&&_0xa82aee[_0x19de0d('0x35')]({'name':_0x19de0d('0x43'),'value':_0x2b2a48,'inline':!![]}),_0x1e3eb4&&_0xa82aee['push']({'name':_0x19de0d('0x46'),'value':_0x1e3eb4,'inline':!![]}),_0x22040c[_0x19de0d('0x3b')][_0x19de0d('0x1d')]['send']({'embed':{'color':tesseract_1[_0x19de0d('0xd')][_0x19de0d('0x3e')]['PINK'],'title':'Added\x20to\x20Queue','description':_0x20141c,'fields':_0xa82aee,'thumbnail':{'url':_0x2c43e0},'footer':{'text':(_0x22040c[_0x19de0d('0x3b')][_0x19de0d('0x44')][_0x19de0d('0x4d')]?'#'+(_0x22040c['music'][_0x19de0d('0x44')][_0x19de0d('0x4d')]-0x1):_0x19de0d('0x48'))+(_0x19de0d('0xa')+_0x42f321+_0x19de0d('0xa')+(_0x22040c[_0x19de0d('0x42')][_0x19de0d('0x71')][_0x19de0d('0x17')](_0x21dabc)[_0x19de0d('0x1a')][_0x19de0d('0x50')]||_0x21dabc))}}})[_0x19de0d('0x39')](()=>{});},this[_0x3e17d8('0x7')]=_0x4598e2=>{const _0x4178a7=_0x3e17d8;!_0x4598e2[_0x4178a7('0x3b')][_0x4178a7('0x72')]&&this[_0x4178a7('0x3')](_0x4598e2);},this[_0x3e17d8('0x3')]=_0x36c47d=>{const _0x4b8948=_0x3e17d8;if(_0x36c47d['music'][_0x4b8948('0x44')][_0x4b8948('0x4d')]){const _0x4785d4=_0x36c47d[_0x4b8948('0x3b')][_0x4b8948('0x44')][0x0],_0x4accd1=[];_0x4785d4[_0x4b8948('0x41')]&&_0x4accd1[_0x4b8948('0x35')]({'name':_0x4b8948('0x43'),'value':_0x4785d4[_0x4b8948('0x41')],'inline':!![]});_0x4785d4[_0x4b8948('0x56')]&&_0x4accd1[_0x4b8948('0x35')]({'name':_0x4b8948('0x46'),'value':_0x4785d4[_0x4b8948('0x56')],'inline':!![]});_0x36c47d['music']['textChannel'][_0x4b8948('0x5a')]({'embed':{'color':tesseract_1['Constants'][_0x4b8948('0x3e')]['PINK'],'title':'Playing','description':_0x4785d4['track'],'fields':_0x4accd1,'thumbnail':{'url':_0x4785d4[_0x4b8948('0x31')]},'footer':{'text':_0x4785d4[_0x4b8948('0x21')]+_0x4b8948('0xa')+(_0x36c47d[_0x4b8948('0x42')][_0x4b8948('0x71')]['get'](_0x4785d4['requester'])[_0x4b8948('0x1a')][_0x4b8948('0x50')]||_0x4785d4[_0x4b8948('0x1b')])}}})['catch'](()=>{}),_0x36c47d['music'][_0x4b8948('0x72')]=!![];const _0xd01bf2=_0x36c47d[_0x4b8948('0x2')]&&_0x36c47d[_0x4b8948('0x2')][_0x4b8948('0x0')]['play'](this['musicDirectory']+_0x36c47d['id']+'/'+_0x4785d4['id']+'.mp3');this[_0x4b8948('0x6d')][_0x4b8948('0xb')][_0x4b8948('0x3b')]&&this['client']['configurations'][_0x4b8948('0x3b')]['activity']&&this['client'][_0x4b8948('0x1a')][_0x4b8948('0x70')]({'name':_0x4785d4[_0x4b8948('0x47')],'type':_0x4b8948('0x6a')})[_0x4b8948('0x39')](()=>{}),_0xd01bf2['on'](_0x4b8948('0x3f'),()=>this[_0x4b8948('0x32')](_0x36c47d)),_0xd01bf2['on'](_0x4b8948('0x10'),_0x2f7c2e=>{const _0x5520f7=_0x4b8948;tesseract_1[_0x5520f7('0x1e')]['error'](_0x2f7c2e),this[_0x5520f7('0x32')](_0x36c47d);});}else _0x36c47d[_0x4b8948('0x3b')][_0x4b8948('0x44')]=[],_0x36c47d[_0x4b8948('0x3b')][_0x4b8948('0x4b')]=[],fs[_0x4b8948('0x8')]['rmdir'](this[_0x4b8948('0x14')]+_0x36c47d['id'],{'recursive':!![]})[_0x4b8948('0x39')](()=>{}),this[_0x4b8948('0x6d')][_0x4b8948('0xb')][_0x4b8948('0x3b')]&&this[_0x4b8948('0x6d')][_0x4b8948('0xb')][_0x4b8948('0x3b')]['activity']&&this[_0x4b8948('0x6d')][_0x4b8948('0x1a')][_0x4b8948('0x70')](this[_0x4b8948('0x6d')][_0x4b8948('0xb')][_0x4b8948('0x67')]instanceof Array?this[_0x4b8948('0x6d')][_0x4b8948('0xb')][_0x4b8948('0x67')][0x0][_0x4b8948('0x55')]:this[_0x4b8948('0x6d')][_0x4b8948('0xb')][_0x4b8948('0x67')]['activity'])['catch'](()=>{}),!_0x36c47d[_0x4b8948('0x2d')][_0x4b8948('0x3b')][_0x4b8948('0x69')]&&(_0x36c47d[_0x4b8948('0x2')]&&_0x36c47d['voice'][_0x4b8948('0x5f')]['leave']()),_0x36c47d['music'][_0x4b8948('0x1d')]['send']({'embed':{'color':tesseract_1[_0x4b8948('0xd')][_0x4b8948('0x3e')][_0x4b8948('0x6')],'title':'Stopping\x20Playback'}})[_0x4b8948('0x39')](()=>{});},this[_0x3e17d8('0x32')]=_0x24378e=>{const _0x1dd57e=_0x3e17d8;_0x24378e['music'][_0x1dd57e('0x72')]=![],_0x24378e[_0x1dd57e('0x3b')][_0x1dd57e('0x36')]=[],_0x24378e[_0x1dd57e('0x3b')][_0x1dd57e('0x44')][_0x1dd57e('0x4d')]&&_0x24378e[_0x1dd57e('0x3b')][_0x1dd57e('0x4b')][_0x1dd57e('0x35')](_0x24378e[_0x1dd57e('0x3b')][_0x1dd57e('0x44')][_0x1dd57e('0x58')]()),!_0x24378e[_0x1dd57e('0x3b')][_0x1dd57e('0x44')][_0x1dd57e('0x4d')]&&_0x24378e[_0x1dd57e('0x3b')][_0x1dd57e('0x45')]&&(_0x24378e[_0x1dd57e('0x3b')][_0x1dd57e('0x44')]=_0x24378e['music']['history'],_0x24378e[_0x1dd57e('0x3b')][_0x1dd57e('0x4b')]=[]),this[_0x1dd57e('0x3')](_0x24378e);},this['exec']=async(_0x3b57e3,_0x16f78a)=>{const _0x38973f=_0x3e17d8,_0x23d3c1=_0x3b57e3[_0x38973f('0x9')];if(!_0x23d3c1[_0x38973f('0x2d')]['music']||!_0x23d3c1[_0x38973f('0x2d')][_0x38973f('0x3b')]['enabled'])return await _0x3b57e3[_0x38973f('0x5f')]['send']({'embed':{'color':tesseract_1[_0x38973f('0xd')]['COLORS'][_0x38973f('0x3c')],'description':this[_0x38973f('0x6d')][_0x38973f('0x5d')][_0x38973f('0x6b')](_0x3b57e3[_0x38973f('0x9')][_0x38973f('0x2d')][_0x38973f('0x18')],_0x38973f('0x37'),constants[_0x38973f('0x22')](_0x3b57e3[_0x38973f('0x59')])?_0x38973f('0x4e'):_0x38973f('0x24'))}})[_0x38973f('0x39')](()=>{});if(constants[_0x38973f('0x22')](this['client']['user'])){const _0x5400e0=await omnic[_0x38973f('0x13')](_0x3b57e3[_0x38973f('0x9')])[_0x38973f('0x39')](()=>{});if(!_0x5400e0)throw new errors[(_0x38973f('0x38'))](errors[_0x38973f('0x65')]['PREMIUM_MEMBERSHIP_REQUIRED'],this['client'][_0x38973f('0x5d')][_0x38973f('0x6b')](_0x3b57e3[_0x38973f('0x9')][_0x38973f('0x2d')][_0x38973f('0x18')],_0x38973f('0x37'),_0x38973f('0x2c')));}const _0x43a708=_0x16f78a['_'][_0x38973f('0x2a')]('\x20'),_0x544f35=_0x43a708[_0x38973f('0x4d')]?await this[_0x38973f('0xe')](_0x43a708):null,_0x2b97b4=_0x16f78a[_0x38973f('0x5')]?_0x16f78a[_0x38973f('0x5')][_0x38973f('0xc')]:_0x544f35?_0x544f35[_0x38973f('0x4a')]||_0x544f35[_0x38973f('0x26')]:null;if(!_0x2b97b4)throw new errors[(_0x38973f('0x38'))](errors[_0x38973f('0x65')][_0x38973f('0x29')],this[_0x38973f('0x1f')]);_0x23d3c1[_0x38973f('0x3b')][_0x38973f('0x1d')]=_0x3b57e3[_0x38973f('0x9')]['channels'][_0x38973f('0x71')]['has'](_0x23d3c1['document'][_0x38973f('0x3b')][_0x38973f('0x19')])?_0x3b57e3['guild']['channels'][_0x38973f('0x71')][_0x38973f('0x17')](_0x23d3c1[_0x38973f('0x2d')][_0x38973f('0x3b')]['textChannelId']):_0x3b57e3[_0x38973f('0x5f')],_0x23d3c1['music']['voiceChannel']=_0x3b57e3[_0x38973f('0x9')]['voice']&&_0x3b57e3[_0x38973f('0x9')][_0x38973f('0x2')]['connection']?_0x3b57e3['guild']['voice'][_0x38973f('0x5f')]:_0x3b57e3[_0x38973f('0x9')][_0x38973f('0x49')][_0x38973f('0x71')]['filter'](_0x5c0e70=>_0x5c0e70['type']===_0x38973f('0x2'))['has'](_0x23d3c1[_0x38973f('0x2d')][_0x38973f('0x3b')][_0x38973f('0x74')])?_0x3b57e3[_0x38973f('0x9')]['channels'][_0x38973f('0x71')][_0x38973f('0x5b')](_0x786bb6=>_0x786bb6[_0x38973f('0xf')]==='voice')[_0x38973f('0x17')](_0x23d3c1[_0x38973f('0x2d')]['music'][_0x38973f('0x74')]):_0x3b57e3[_0x38973f('0x54')][_0x38973f('0x63')]()?_0x3b57e3[_0x38973f('0x54')][_0x38973f('0x2')][_0x38973f('0x5f')]:null;if(!_0x23d3c1[_0x38973f('0x3b')][_0x38973f('0x73')])return await _0x3b57e3['channel'][_0x38973f('0x5a')]({'embed':{'color':tesseract_1[_0x38973f('0xd')]['COLORS'][_0x38973f('0x3c')],'description':this['client'][_0x38973f('0x5d')][_0x38973f('0x6b')](_0x3b57e3['guild']['document'][_0x38973f('0x18')],_0x38973f('0x37'),_0x3b57e3[_0x38973f('0x54')][_0x38973f('0x63')]()?_0x38973f('0x64'):_0x38973f('0x1c'))}})[_0x38973f('0x39')](()=>{});if(!_0x23d3c1['music'][_0x38973f('0x73')][_0x38973f('0x51')])return await _0x3b57e3[_0x38973f('0x5f')][_0x38973f('0x5a')]({'embed':{'color':tesseract_1[_0x38973f('0xd')]['COLORS'][_0x38973f('0x3c')],'description':this['client'][_0x38973f('0x5d')][_0x38973f('0x6b')](_0x3b57e3['guild'][_0x38973f('0x2d')]['language'],'errors',_0x38973f('0x66'),_0x23d3c1[_0x38973f('0x3b')]['voiceChannel'][_0x38973f('0x1f')])}})[_0x38973f('0x39')](()=>{});if(!_0x23d3c1[_0x38973f('0x3b')][_0x38973f('0x73')][_0x38973f('0x57')])return await _0x3b57e3['channel'][_0x38973f('0x5a')]({'embed':{'color':tesseract_1['Constants'][_0x38973f('0x3e')]['RED'],'description':this[_0x38973f('0x6d')][_0x38973f('0x5d')]['getString'](_0x3b57e3['guild']['document'][_0x38973f('0x18')],_0x38973f('0x37'),_0x38973f('0x6e'),_0x23d3c1[_0x38973f('0x3b')][_0x38973f('0x73')][_0x38973f('0x1f')])}})[_0x38973f('0x39')](()=>{});const _0x40f5c9=await _0x23d3c1[_0x38973f('0x3b')][_0x38973f('0x73')][_0x38973f('0x2a')]();_0x40f5c9['on'](_0x38973f('0x10'),tesseract_1[_0x38973f('0x1e')][_0x38973f('0x10')]),_0x40f5c9['on'](_0x38973f('0x4c'),tesseract_1[_0x38973f('0x1e')][_0x38973f('0x10')]),_0x3b57e3[_0x38973f('0x9')]['me'][_0x38973f('0x2')]['setMute'](![])[_0x38973f('0x39')](()=>{}),_0x3b57e3[_0x38973f('0x9')]['me']['voice']['setDeaf'](!![])[_0x38973f('0x39')](()=>{});const _0x2cd543=uuid_1['v4'](),_0x56e015=youtube(_0x2b97b4,['--ignore-errors',_0x38973f('0x75'),_0x38973f('0x5c'),'--no-playlist',_0x38973f('0x11'),_0x38973f('0x33'),'--no-warnings',_0x38973f('0x27'),_0x38973f('0x23'),'--format=bestaudio[protocol^=http]',_0x38973f('0x12')],{});_0x56e015['on'](_0x38973f('0x20'),_0x4f0635=>this[_0x38973f('0x25')](_0x23d3c1,{..._0x4f0635,'id':_0x2cd543,'requester':_0x3b57e3[_0x38973f('0x59')]['id']})),_0x56e015['on']('end',()=>this[_0x38973f('0x7')](_0x23d3c1)),_0x56e015['on']('error',()=>{const _0x2215a9=_0x38973f;_0x3b57e3[_0x2215a9('0x5f')][_0x2215a9('0x5a')]({'embed':{'color':tesseract_1['Constants'][_0x2215a9('0x3e')][_0x2215a9('0x3c')],'description':this[_0x2215a9('0x6d')][_0x2215a9('0x5d')][_0x2215a9('0x6b')](_0x3b57e3[_0x2215a9('0x9')][_0x2215a9('0x2d')][_0x2215a9('0x18')],'errors',_0x2215a9('0x4'))}})['catch'](()=>{});}),await fs[_0x38973f('0x8')][_0x38973f('0x6f')](this[_0x38973f('0x14')]+_0x3b57e3[_0x38973f('0x9')]['id']+'/',{'recursive':!![]})['catch'](tesseract_1['Logger'][_0x38973f('0x10')]),_0x56e015[_0x38973f('0x2e')](fs[_0x38973f('0x68')](this[_0x38973f('0x14')]+_0x3b57e3[_0x38973f('0x9')]['id']+'/'+_0x2cd543+'.mp3'));},this['musicDirectory']='./music/';}[_0x2564e6('0xe')](_0x358c94){const _0x515f13=_0x2564e6;return new Promise((_0x204cda,_0x5e7f1f)=>youtube[_0x515f13('0x2f')](_0x515f13('0x28')+_0x358c94,[_0x515f13('0x1'),'--force-ipv4','--geo-bypass-country=US',_0x515f13('0x2b'),_0x515f13('0x11'),'--quiet',_0x515f13('0x3d'),_0x515f13('0x27'),_0x515f13('0x23'),_0x515f13('0x5e'),_0x515f13('0x12')],(_0x556a71,_0x1e6778)=>{if(_0x556a71)return _0x5e7f1f(_0x556a71);return _0x204cda(_0x1e6778);}));}};
const a90_0x194c=['uploader','dispatcherFinishHandler','shift','member','RED','noMusicChannels','user','setActivity','push','configurations','PINK','leave','setMute','cache','play\x20Remember\x20The\x20Name\x20by\x20Ed\x20Sheeran','--no-cache-dir','presence','unjoinable','catch','Artist','textChannel','error','Constants','INVALID_COMMAND_SYNTAX','--ignore-errors','--no-warnings','musicDownloadError','requester','voice','webpage_url','getSongInfo','\x20â€¢\x20','author','musicDirectory','history','.mp3','getString','title','client','filter','document','exports','locale','voiceChannelId','playing','voiceChannel','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','streamInfoHandler','play','has','@bastion/tesseract','album','repeat','Stopping\x20Playback','href','--youtube-skip-dash-manifest','uuid','link','length','../../utils/errors','keepAlive','play\x20--link\x20https://www.youtube.com/watch?v=dQw4w9WgXcQ','music','join','createWriteStream','noMusicChannelsAsOwner','guild','Command','--format=bestaudio[protocol^=http]','apply','connection','speakable','alt_title','URL','members','--no-playlist','Added\x20to\x20Queue','setDeaf','ArgumentTypes','--referer=https://bastion.traction.one','queue','Album','isMusicMaster','artist','channels','pipe','startStreamDispatcher','--geo-bypass-country=US','tag','send','exec','channel','BASTION_ERROR_TYPE','info','get','mkdir','constructor','--force-ipv4','joinable','--quiet','It\x20allows\x20you\x20to\x20play\x20a\x20music\x20in\x20the\x20server,\x20from\x20the\x20given\x20queury\x20or\x20from\x20any\x20supported\x20source.','thumbnail','Playing','Logger','track','youtube-dl','creator','COLORS','errors','duration','failed','textChannelId','type','language'];(function(_0xd39786,_0x194c05){const _0x12a40e=function(_0x52cc42){while(--_0x52cc42){_0xd39786['push'](_0xd39786['shift']());}};const _0x1f73d7=function(){const _0x43475c={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4d94b6,_0x4f6501,_0x625da2,_0x516cc4){_0x516cc4=_0x516cc4||{};let _0x8870ee=_0x4f6501+'='+_0x625da2;let _0x348d52=0x0;for(let _0x1d285e=0x0,_0x5e5442=_0x4d94b6['length'];_0x1d285e<_0x5e5442;_0x1d285e++){const _0x9f7d87=_0x4d94b6[_0x1d285e];_0x8870ee+=';\x20'+_0x9f7d87;const _0x6b40e5=_0x4d94b6[_0x9f7d87];_0x4d94b6['push'](_0x6b40e5);_0x5e5442=_0x4d94b6['length'];if(_0x6b40e5!==!![]){_0x8870ee+='='+_0x6b40e5;}}_0x516cc4['cookie']=_0x8870ee;},'removeCookie':function(){return'dev';},'getCookie':function(_0x39a05f,_0xc20c3e){_0x39a05f=_0x39a05f||function(_0xf91d6f){return _0xf91d6f;};const _0x293ba3=_0x39a05f(new RegExp('(?:^|;\x20)'+_0xc20c3e['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x27d56b=function(_0x99512,_0x1038bc){_0x99512(++_0x1038bc);};_0x27d56b(_0x12a40e,_0x194c05);return _0x293ba3?decodeURIComponent(_0x293ba3[0x1]):undefined;}};const _0x172342=function(){const _0xf6cd12=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0xf6cd12['test'](_0x43475c['removeCookie']['toString']());};_0x43475c['updateCookie']=_0x172342;let _0x29473c='';const _0xb69973=_0x43475c['updateCookie']();if(!_0xb69973){_0x43475c['setCookie'](['*'],'counter',0x1);}else if(_0xb69973){_0x29473c=_0x43475c['getCookie'](null,'counter');}else{_0x43475c['removeCookie']();}};_0x1f73d7();}(a90_0x194c,0x9b));const a90_0x12a4=function(_0xd39786,_0x194c05){_0xd39786=_0xd39786-0x0;let _0x12a40e=a90_0x194c[_0xd39786];return _0x12a40e;};const a90_0x43475c=function(){let _0x42ec89=!![];return function(_0x18e3c8,_0x270634){const _0x5c2172=_0x42ec89?function(){if(_0x270634){const _0x2ddba=_0x270634[a90_0x12a4('0x1c')](_0x18e3c8,arguments);_0x270634=null;return _0x2ddba;}}:function(){};_0x42ec89=![];return _0x5c2172;};}();const a90_0x52cc42=a90_0x43475c(this,function(){const _0x358882=function(){const _0x578a53=_0x358882[a90_0x12a4('0x37')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()['compile'](a90_0x12a4('0x5'));return!_0x578a53['test'](a90_0x52cc42);};return _0x358882();});a90_0x52cc42();'use strict';const fs=require('fs');const tesseract_1=require(a90_0x12a4('0x9'));const youtube=require(a90_0x12a4('0x40'));const uuid_1=require(a90_0x12a4('0xf'));const constants=require('../../utils/constants');const errors=require(a90_0x12a4('0x12'));module[a90_0x12a4('0x0')]=class Play extends tesseract_1[a90_0x12a4('0x1a')]{constructor(){super(a90_0x12a4('0x7'),{'description':a90_0x12a4('0x3b'),'triggers':[],'arguments':{'alias':{'link':'l'},'coerce':{'link':tesseract_1[a90_0x12a4('0x5f')][a90_0x12a4('0x25')][a90_0x12a4('0x20')]}},'scope':a90_0x12a4('0x19'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[],'syntax':[a90_0x12a4('0x57'),a90_0x12a4('0x14')]});this[a90_0x12a4('0x6')]=(_0x100216,_0x412a6a)=>{const _0x14c4a7=_0x412a6a['id'];const _0x505cc1=_0x412a6a[a90_0x12a4('0x3f')]||_0x412a6a[a90_0x12a4('0x6e')]||_0x412a6a['fulltitle']||_0x412a6a[a90_0x12a4('0x1f')];const _0x1cd4ac=_0x412a6a[a90_0x12a4('0xa')];const _0x296aef=_0x412a6a['artist']||_0x412a6a[a90_0x12a4('0x41')]||_0x412a6a[a90_0x12a4('0x49')];const _0x5ee4a1=_0x412a6a['duration'];const _0x129225=_0x412a6a[a90_0x12a4('0x3c')];const _0x4f8db8=_0x412a6a[a90_0x12a4('0x64')];_0x100216[a90_0x12a4('0x15')]['queue'][a90_0x12a4('0x51')]({'id':_0x14c4a7,'track':_0x505cc1,'album':_0x1cd4ac,'artist':_0x296aef,'duration':_0x5ee4a1,'thumbnail':_0x129225,'requester':_0x4f8db8});const _0x29850c=[];if(_0x1cd4ac){_0x29850c[a90_0x12a4('0x51')]({'name':a90_0x12a4('0x28'),'value':_0x1cd4ac,'inline':!![]});}if(_0x296aef){_0x29850c['push']({'name':a90_0x12a4('0x5c'),'value':_0x296aef,'inline':!![]});}_0x100216[a90_0x12a4('0x15')]['textChannel'][a90_0x12a4('0x30')]({'embed':{'color':tesseract_1[a90_0x12a4('0x5f')]['COLORS'][a90_0x12a4('0x53')],'title':a90_0x12a4('0x23'),'description':_0x505cc1,'fields':_0x29850c,'thumbnail':{'url':_0x129225},'footer':{'text':(_0x100216[a90_0x12a4('0x15')][a90_0x12a4('0x27')][a90_0x12a4('0x11')]?'#'+(_0x100216[a90_0x12a4('0x15')][a90_0x12a4('0x27')]['length']-0x1):'Up\x20Next')+(a90_0x12a4('0x68')+_0x5ee4a1+a90_0x12a4('0x68')+(_0x100216['members'][a90_0x12a4('0x56')][a90_0x12a4('0x35')](_0x4f8db8)[a90_0x12a4('0x4f')]['tag']||_0x4f8db8))}}})[a90_0x12a4('0x5b')](()=>{});};this['streamEndHandler']=_0x2c3265=>{if(!_0x2c3265[a90_0x12a4('0x15')][a90_0x12a4('0x3')]){this[a90_0x12a4('0x2d')](_0x2c3265);}};this[a90_0x12a4('0x2d')]=_0x1e75ab=>{if(_0x1e75ab[a90_0x12a4('0x15')][a90_0x12a4('0x27')][a90_0x12a4('0x11')]){const _0x305e1d=_0x1e75ab['music'][a90_0x12a4('0x27')][0x0];const _0x401a88=[];if(_0x305e1d[a90_0x12a4('0xa')]){_0x401a88[a90_0x12a4('0x51')]({'name':a90_0x12a4('0x28'),'value':_0x305e1d[a90_0x12a4('0xa')],'inline':!![]});}if(_0x305e1d[a90_0x12a4('0x2a')]){_0x401a88[a90_0x12a4('0x51')]({'name':a90_0x12a4('0x5c'),'value':_0x305e1d['artist'],'inline':!![]});}_0x1e75ab['music'][a90_0x12a4('0x5d')][a90_0x12a4('0x30')]({'embed':{'color':tesseract_1[a90_0x12a4('0x5f')][a90_0x12a4('0x42')]['PINK'],'title':a90_0x12a4('0x3d'),'description':_0x305e1d['track'],'fields':_0x401a88,'thumbnail':{'url':_0x305e1d[a90_0x12a4('0x3c')]},'footer':{'text':_0x305e1d[a90_0x12a4('0x44')]+a90_0x12a4('0x68')+(_0x1e75ab[a90_0x12a4('0x21')][a90_0x12a4('0x56')][a90_0x12a4('0x35')](_0x305e1d['requester'])[a90_0x12a4('0x4f')][a90_0x12a4('0x2f')]||_0x305e1d[a90_0x12a4('0x64')])}}})[a90_0x12a4('0x5b')](()=>{});_0x1e75ab[a90_0x12a4('0x15')][a90_0x12a4('0x3')]=!![];const _0x321da9=_0x1e75ab[a90_0x12a4('0x65')]&&_0x1e75ab['voice'][a90_0x12a4('0x1d')][a90_0x12a4('0x7')](this[a90_0x12a4('0x6a')]+_0x1e75ab['id']+'/'+_0x305e1d['id']+a90_0x12a4('0x6c'));this[a90_0x12a4('0x6f')]['user']['setActivity']({'name':_0x305e1d[a90_0x12a4('0x3f')],'type':'LISTENING'})['catch'](()=>{});_0x321da9['on']('finish',()=>this[a90_0x12a4('0x4a')](_0x1e75ab));_0x321da9['on'](a90_0x12a4('0x5e'),_0x3640b3=>{tesseract_1[a90_0x12a4('0x3e')][a90_0x12a4('0x5e')](_0x3640b3);this['dispatcherFinishHandler'](_0x1e75ab);});}else{_0x1e75ab[a90_0x12a4('0x15')][a90_0x12a4('0x27')]=[];_0x1e75ab[a90_0x12a4('0x15')][a90_0x12a4('0x6b')]=[];fs['promises']['rmdir'](this[a90_0x12a4('0x6a')]+_0x1e75ab['id'],{'recursive':!![]})['catch'](()=>{});this[a90_0x12a4('0x6f')][a90_0x12a4('0x4f')][a90_0x12a4('0x50')](this[a90_0x12a4('0x6f')][a90_0x12a4('0x52')][a90_0x12a4('0x59')]['activity'])['catch'](()=>{});if(!_0x1e75ab[a90_0x12a4('0x71')]['music'][a90_0x12a4('0x13')]){_0x1e75ab[a90_0x12a4('0x65')]&&_0x1e75ab[a90_0x12a4('0x65')][a90_0x12a4('0x32')][a90_0x12a4('0x54')]();}_0x1e75ab[a90_0x12a4('0x15')][a90_0x12a4('0x5d')][a90_0x12a4('0x30')]({'embed':{'color':tesseract_1[a90_0x12a4('0x5f')][a90_0x12a4('0x42')]['PINK'],'title':a90_0x12a4('0xc')}})[a90_0x12a4('0x5b')](()=>{});}};this[a90_0x12a4('0x4a')]=_0x3abdcc=>{_0x3abdcc[a90_0x12a4('0x15')][a90_0x12a4('0x3')]=![];_0x3abdcc[a90_0x12a4('0x15')]['skipVotes']=[];if(_0x3abdcc[a90_0x12a4('0x15')][a90_0x12a4('0x27')]['length']){_0x3abdcc[a90_0x12a4('0x15')][a90_0x12a4('0x6b')][a90_0x12a4('0x51')](_0x3abdcc[a90_0x12a4('0x15')]['queue'][a90_0x12a4('0x4b')]());}if(!_0x3abdcc['music'][a90_0x12a4('0x27')][a90_0x12a4('0x11')]&&_0x3abdcc[a90_0x12a4('0x15')][a90_0x12a4('0xb')]){_0x3abdcc[a90_0x12a4('0x15')][a90_0x12a4('0x27')]=_0x3abdcc[a90_0x12a4('0x15')][a90_0x12a4('0x6b')];_0x3abdcc[a90_0x12a4('0x15')]['history']=[];}this[a90_0x12a4('0x2d')](_0x3abdcc);};this[a90_0x12a4('0x31')]=async(_0x5a64df,_0x179e6c)=>{const _0x4a1c4f=_0x5a64df['guild'];if(!_0x4a1c4f['document'][a90_0x12a4('0x15')]||!_0x4a1c4f['document'][a90_0x12a4('0x15')]['enabled']){return await _0x5a64df[a90_0x12a4('0x32')][a90_0x12a4('0x30')]({'embed':{'color':tesseract_1[a90_0x12a4('0x5f')][a90_0x12a4('0x42')][a90_0x12a4('0x4d')],'description':this[a90_0x12a4('0x6f')][a90_0x12a4('0x1')][a90_0x12a4('0x6d')](_0x5a64df[a90_0x12a4('0x19')]['document'][a90_0x12a4('0x48')],a90_0x12a4('0x43'),constants['isPublicBastion'](_0x5a64df[a90_0x12a4('0x69')])?'musicDisabledPublic':'musicDisabled')}})[a90_0x12a4('0x5b')](()=>{});}const _0x23063c=_0x179e6c['_'][a90_0x12a4('0x16')]('\x20');const _0x520c97=_0x23063c[a90_0x12a4('0x11')]?await this['getSongInfo'](_0x23063c):null;const _0x5684c3=_0x179e6c[a90_0x12a4('0x10')]?_0x179e6c[a90_0x12a4('0x10')][a90_0x12a4('0xd')]:_0x520c97?_0x520c97[a90_0x12a4('0x66')]||_0x520c97['url']:null;if(!_0x5684c3)throw new errors['DiscordError'](errors[a90_0x12a4('0x33')][a90_0x12a4('0x60')],this['name']);_0x4a1c4f[a90_0x12a4('0x15')][a90_0x12a4('0x5d')]=_0x5a64df[a90_0x12a4('0x19')]['channels'][a90_0x12a4('0x56')]['has'](_0x4a1c4f[a90_0x12a4('0x71')][a90_0x12a4('0x15')][a90_0x12a4('0x46')])?_0x5a64df[a90_0x12a4('0x19')][a90_0x12a4('0x2b')]['cache'][a90_0x12a4('0x35')](_0x4a1c4f[a90_0x12a4('0x71')][a90_0x12a4('0x15')][a90_0x12a4('0x46')]):_0x5a64df['channel'];_0x4a1c4f[a90_0x12a4('0x15')][a90_0x12a4('0x4')]=_0x5a64df[a90_0x12a4('0x19')][a90_0x12a4('0x65')]&&_0x5a64df[a90_0x12a4('0x19')][a90_0x12a4('0x65')][a90_0x12a4('0x1d')]?_0x5a64df['guild'][a90_0x12a4('0x65')][a90_0x12a4('0x32')]:_0x5a64df['guild'][a90_0x12a4('0x2b')]['cache'][a90_0x12a4('0x70')](_0x2a5862=>_0x2a5862[a90_0x12a4('0x47')]===a90_0x12a4('0x65'))[a90_0x12a4('0x8')](_0x4a1c4f[a90_0x12a4('0x71')][a90_0x12a4('0x15')][a90_0x12a4('0x2')])?_0x5a64df[a90_0x12a4('0x19')][a90_0x12a4('0x2b')][a90_0x12a4('0x56')][a90_0x12a4('0x70')](_0x2aee98=>_0x2aee98[a90_0x12a4('0x47')]==='voice')['get'](_0x4a1c4f[a90_0x12a4('0x71')][a90_0x12a4('0x15')][a90_0x12a4('0x2')]):_0x5a64df[a90_0x12a4('0x4c')]['isMusicMaster']()?_0x5a64df[a90_0x12a4('0x4c')][a90_0x12a4('0x65')][a90_0x12a4('0x32')]:null;if(!_0x4a1c4f[a90_0x12a4('0x15')][a90_0x12a4('0x4')]){return await _0x5a64df[a90_0x12a4('0x32')][a90_0x12a4('0x30')]({'embed':{'color':tesseract_1[a90_0x12a4('0x5f')][a90_0x12a4('0x42')][a90_0x12a4('0x4d')],'description':this['client']['locale']['getString'](_0x5a64df['guild'][a90_0x12a4('0x71')][a90_0x12a4('0x48')],'errors',_0x5a64df[a90_0x12a4('0x4c')][a90_0x12a4('0x29')]()?a90_0x12a4('0x18'):a90_0x12a4('0x4e'))}})[a90_0x12a4('0x5b')](()=>{});}if(!_0x4a1c4f[a90_0x12a4('0x15')][a90_0x12a4('0x4')][a90_0x12a4('0x39')]){return await _0x5a64df[a90_0x12a4('0x32')][a90_0x12a4('0x30')]({'embed':{'color':tesseract_1[a90_0x12a4('0x5f')][a90_0x12a4('0x42')][a90_0x12a4('0x4d')],'description':this[a90_0x12a4('0x6f')][a90_0x12a4('0x1')][a90_0x12a4('0x6d')](_0x5a64df[a90_0x12a4('0x19')]['document'][a90_0x12a4('0x48')],a90_0x12a4('0x43'),a90_0x12a4('0x5a'),_0x4a1c4f[a90_0x12a4('0x15')][a90_0x12a4('0x4')]['name'])}})[a90_0x12a4('0x5b')](()=>{});}if(!_0x4a1c4f[a90_0x12a4('0x15')][a90_0x12a4('0x4')][a90_0x12a4('0x1e')]){return await _0x5a64df['channel']['send']({'embed':{'color':tesseract_1[a90_0x12a4('0x5f')]['COLORS'][a90_0x12a4('0x4d')],'description':this[a90_0x12a4('0x6f')][a90_0x12a4('0x1')]['getString'](_0x5a64df[a90_0x12a4('0x19')]['document'][a90_0x12a4('0x48')],a90_0x12a4('0x43'),'unspeakable',_0x4a1c4f['music'][a90_0x12a4('0x4')]['name'])}})[a90_0x12a4('0x5b')](()=>{});}const _0x2d136a=await _0x4a1c4f[a90_0x12a4('0x15')][a90_0x12a4('0x4')][a90_0x12a4('0x16')]();_0x2d136a['on']('error',tesseract_1[a90_0x12a4('0x3e')][a90_0x12a4('0x5e')]);_0x2d136a['on'](a90_0x12a4('0x45'),tesseract_1[a90_0x12a4('0x3e')][a90_0x12a4('0x5e')]);_0x5a64df[a90_0x12a4('0x19')]['me'][a90_0x12a4('0x65')][a90_0x12a4('0x55')](![])[a90_0x12a4('0x5b')](()=>{});_0x5a64df[a90_0x12a4('0x19')]['me'][a90_0x12a4('0x65')][a90_0x12a4('0x24')](!![])[a90_0x12a4('0x5b')](()=>{});const _0x1f6e03=uuid_1['v4']();const _0x1a5bee=youtube(_0x5684c3,['--ignore-errors',a90_0x12a4('0x38'),a90_0x12a4('0x2e'),'--no-playlist',a90_0x12a4('0x58'),a90_0x12a4('0x3a'),a90_0x12a4('0x62'),'--user-agent=Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_0)\x20AppleWebKit/604.1\x20(KHTML,\x20like\x20Gecko)\x20Version/13.0.4\x20Safari/604.1',a90_0x12a4('0x26'),'--format=bestaudio[protocol^=http]',a90_0x12a4('0xe')],{});_0x1a5bee['on'](a90_0x12a4('0x34'),_0x1fcf81=>this[a90_0x12a4('0x6')](_0x4a1c4f,{..._0x1fcf81,'id':_0x1f6e03,'requester':_0x5a64df[a90_0x12a4('0x69')]['id']}));_0x1a5bee['on']('end',()=>this['streamEndHandler'](_0x4a1c4f));_0x1a5bee['on'](a90_0x12a4('0x5e'),()=>{_0x5a64df[a90_0x12a4('0x32')][a90_0x12a4('0x30')]({'embed':{'color':tesseract_1[a90_0x12a4('0x5f')][a90_0x12a4('0x42')]['RED'],'description':this[a90_0x12a4('0x6f')][a90_0x12a4('0x1')]['getString'](_0x5a64df['guild'][a90_0x12a4('0x71')][a90_0x12a4('0x48')],'errors',a90_0x12a4('0x63'))}})['catch'](()=>{});});await fs['promises'][a90_0x12a4('0x36')](this[a90_0x12a4('0x6a')]+_0x5a64df[a90_0x12a4('0x19')]['id']+'/',{'recursive':!![]})['catch'](tesseract_1['Logger'][a90_0x12a4('0x5e')]);_0x1a5bee[a90_0x12a4('0x2c')](fs[a90_0x12a4('0x17')](this[a90_0x12a4('0x6a')]+_0x5a64df['guild']['id']+'/'+_0x1f6e03+'.mp3'));};this[a90_0x12a4('0x6a')]='./music/';}[a90_0x12a4('0x67')](_0x5954a7){return new Promise((_0x3ec50b,_0xa6f74f)=>youtube['getInfo']('ytsearch:'+_0x5954a7,[a90_0x12a4('0x61'),'--force-ipv4',a90_0x12a4('0x2e'),a90_0x12a4('0x22'),'--no-cache-dir','--quiet','--no-warnings','--user-agent=Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_0)\x20AppleWebKit/604.1\x20(KHTML,\x20like\x20Gecko)\x20Version/13.0.4\x20Safari/604.1','--referer=https://bastion.traction.one',a90_0x12a4('0x1b'),a90_0x12a4('0xe')],(_0x41fd8c,_0x38426d)=>{if(_0x41fd8c)return _0xa6f74f(_0x41fd8c);return _0x3ec50b(_0x38426d);}));}};
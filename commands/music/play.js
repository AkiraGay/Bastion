const a310_0x303c=['error','send','PINK','document','Command','--geo-bypass-country=US','enabled','rmdir','title','setDeaf','alt_title','requester','createWriteStream','--referer=https://bastion.traction.one','member','--ignore-errors','getSongInfo','url','youtube-dl','keepAlive','link','info','streamEndHandler','webpage_url','join','speakable','musicDirectory','isMusicMaster','thumbnail','connection','skipVotes','history','play\x20Remember\x20The\x20Name\x20by\x20Ed\x20Sheeran','uuid','activity','Up\x20Next','music','textChannelId','Logger','isPublicBastion','failed','play\x20--link\x20https://www.youtube.com/watch?v=dQw4w9WgXcQ','unjoinable','end','errors','--format=bestaudio[protocol^=http]','get','pipe','language','mkdir','filter','href','Added\x20to\x20Queue','Album','guild','creator','It\x20allows\x20you\x20to\x20play\x20a\x20music\x20in\x20the\x20server,\x20from\x20the\x20given\x20queury\x20or\x20from\x20any\x20supported\x20source.','Stopping\x20Playback','ArgumentTypes','length','BASTION_ERROR_TYPE','channels','uploader','album','joinable','channel','return\x20/\x22\x20+\x20this\x20+\x20\x22/','constructor','client','RED','startStreamDispatcher','unspeakable','--no-cache-dir','playing','COLORS','catch','tag','Artist','cache','musicDisabledPublic','voiceChannelId','Playing','test','voiceChannel','--quiet','LISTENING','Constants','streamInfoHandler','textChannel','URL','--no-playlist','queue','setActivity','dispatcherFinishHandler','../../utils/errors','compile','--user-agent=Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_0)\x20AppleWebKit/604.1\x20(KHTML,\x20like\x20Gecko)\x20Version/13.0.4\x20Safari/604.1','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','has','apply','locale','@bastion/tesseract','user','duration','ytsearch:','.mp3','leave','voice','type','--youtube-skip-dash-manifest','getString','promises','name','push','presence','artist','\x20•\x20'];(function(_0x241638,_0x303ce7){const _0xd7a90=function(_0x31cfb4){while(--_0x31cfb4){_0x241638['push'](_0x241638['shift']());}};const _0x2d0e08=function(){const _0x1bb824={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x156194,_0x1a956a,_0x22433c,_0x23a6f7){_0x23a6f7=_0x23a6f7||{};let _0x387db2=_0x1a956a+'='+_0x22433c;let _0x32a157=0x0;for(let _0x3015b1=0x0,_0x577f6d=_0x156194['length'];_0x3015b1<_0x577f6d;_0x3015b1++){const _0x1e2cf1=_0x156194[_0x3015b1];_0x387db2+=';\x20'+_0x1e2cf1;const _0x5c59dd=_0x156194[_0x1e2cf1];_0x156194['push'](_0x5c59dd);_0x577f6d=_0x156194['length'];if(_0x5c59dd!==!![]){_0x387db2+='='+_0x5c59dd;}}_0x23a6f7['cookie']=_0x387db2;},'removeCookie':function(){return'dev';},'getCookie':function(_0x45dc15,_0x5bad88){_0x45dc15=_0x45dc15||function(_0xf258db){return _0xf258db;};const _0x3e41e5=_0x45dc15(new RegExp('(?:^|;\x20)'+_0x5bad88['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x5190e5=function(_0x2cec3b,_0xf5544e){_0x2cec3b(++_0xf5544e);};_0x5190e5(_0xd7a90,_0x303ce7);return _0x3e41e5?decodeURIComponent(_0x3e41e5[0x1]):undefined;}};const _0x2f5fa4=function(){const _0x418521=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x418521['test'](_0x1bb824['removeCookie']['toString']());};_0x1bb824['updateCookie']=_0x2f5fa4;let _0x3401e3='';const _0x1e92b6=_0x1bb824['updateCookie']();if(!_0x1e92b6){_0x1bb824['setCookie'](['*'],'counter',0x1);}else if(_0x1e92b6){_0x3401e3=_0x1bb824['getCookie'](null,'counter');}else{_0x1bb824['removeCookie']();}};_0x2d0e08();}(a310_0x303c,0xfb));const a310_0xd7a9=function(_0x241638,_0x303ce7){_0x241638=_0x241638-0x0;let _0xd7a90=a310_0x303c[_0x241638];return _0xd7a90;};const a310_0x1bb824=function(){let _0xa4f199=!![];return function(_0x42fca0,_0x678b0d){const _0x4a9b98=_0xa4f199?function(){if(_0x678b0d){const _0x2d6749=_0x678b0d[a310_0xd7a9('0x52')](_0x42fca0,arguments);_0x678b0d=null;return _0x2d6749;}}:function(){};_0xa4f199=![];return _0x4a9b98;};}();const a310_0x31cfb4=a310_0x1bb824(this,function(){const _0x232b83=function(){const _0x3d91a0=_0x232b83[a310_0xd7a9('0x32')](a310_0xd7a9('0x31'))()[a310_0xd7a9('0x4e')](a310_0xd7a9('0x50'));return!_0x3d91a0[a310_0xd7a9('0x41')](a310_0x31cfb4);};return _0x232b83();});a310_0x31cfb4();'use strict';const fs=require('fs');const tesseract_1=require(a310_0xd7a9('0x54'));const youtube=require(a310_0xd7a9('0x1'));const uuid_1=require(a310_0xd7a9('0x10'));const constants=require('../../utils/constants');const errors=require(a310_0xd7a9('0x4d'));module['exports']=class Play extends tesseract_1[a310_0xd7a9('0x68')]{constructor(){super('play',{'description':a310_0xd7a9('0x27'),'triggers':[],'arguments':{'alias':{'link':'l'},'coerce':{'link':tesseract_1['Constants'][a310_0xd7a9('0x29')][a310_0xd7a9('0x48')]}},'scope':a310_0xd7a9('0x25'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[],'syntax':[a310_0xd7a9('0xf'),a310_0xd7a9('0x18')]});this[a310_0xd7a9('0x46')]=(_0x7c0060,_0x102e3f)=>{const _0x21ef06=_0x102e3f['id'];const _0x16f2bd=_0x102e3f['track']||_0x102e3f[a310_0xd7a9('0x6c')]||_0x102e3f['fulltitle']||_0x102e3f[a310_0xd7a9('0x6e')];const _0x1f4951=_0x102e3f['album'];const _0x204558=_0x102e3f[a310_0xd7a9('0x62')]||_0x102e3f[a310_0xd7a9('0x26')]||_0x102e3f[a310_0xd7a9('0x2d')];const _0x2cd7fd=_0x102e3f[a310_0xd7a9('0x56')];const _0x522944=_0x102e3f['thumbnail'];const _0x4969f6=_0x102e3f[a310_0xd7a9('0x6f')];_0x7c0060[a310_0xd7a9('0x13')][a310_0xd7a9('0x4a')][a310_0xd7a9('0x60')]({'id':_0x21ef06,'track':_0x16f2bd,'album':_0x1f4951,'artist':_0x204558,'duration':_0x2cd7fd,'thumbnail':_0x522944,'requester':_0x4969f6});const _0xc101e3=[];if(_0x1f4951){_0xc101e3[a310_0xd7a9('0x60')]({'name':a310_0xd7a9('0x24'),'value':_0x1f4951,'inline':!![]});}if(_0x204558){_0xc101e3[a310_0xd7a9('0x60')]({'name':a310_0xd7a9('0x3c'),'value':_0x204558,'inline':!![]});}_0x7c0060[a310_0xd7a9('0x13')][a310_0xd7a9('0x47')][a310_0xd7a9('0x65')]({'embed':{'color':tesseract_1[a310_0xd7a9('0x45')][a310_0xd7a9('0x39')]['PINK'],'title':a310_0xd7a9('0x23'),'description':_0x16f2bd,'fields':_0xc101e3,'thumbnail':{'url':_0x522944},'footer':{'text':(_0x7c0060[a310_0xd7a9('0x13')][a310_0xd7a9('0x4a')][a310_0xd7a9('0x2a')]?'#'+(_0x7c0060['music'][a310_0xd7a9('0x4a')]['length']-0x1):a310_0xd7a9('0x12'))+(a310_0xd7a9('0x63')+_0x2cd7fd+a310_0xd7a9('0x63')+(_0x7c0060['members'][a310_0xd7a9('0x3d')][a310_0xd7a9('0x1d')](_0x4969f6)[a310_0xd7a9('0x55')][a310_0xd7a9('0x3b')]||_0x4969f6))}}})[a310_0xd7a9('0x3a')](()=>{});};this[a310_0xd7a9('0x5')]=_0x21b7f0=>{if(!_0x21b7f0[a310_0xd7a9('0x13')][a310_0xd7a9('0x38')]){this[a310_0xd7a9('0x35')](_0x21b7f0);}};this[a310_0xd7a9('0x35')]=_0x2567ec=>{if(_0x2567ec[a310_0xd7a9('0x13')]['queue']['length']){const _0x4e0de2=_0x2567ec[a310_0xd7a9('0x13')][a310_0xd7a9('0x4a')][0x0];const _0x1d8558=[];if(_0x4e0de2[a310_0xd7a9('0x2e')]){_0x1d8558['push']({'name':a310_0xd7a9('0x24'),'value':_0x4e0de2[a310_0xd7a9('0x2e')],'inline':!![]});}if(_0x4e0de2['artist']){_0x1d8558[a310_0xd7a9('0x60')]({'name':a310_0xd7a9('0x3c'),'value':_0x4e0de2[a310_0xd7a9('0x62')],'inline':!![]});}_0x2567ec[a310_0xd7a9('0x13')][a310_0xd7a9('0x47')][a310_0xd7a9('0x65')]({'embed':{'color':tesseract_1['Constants'][a310_0xd7a9('0x39')][a310_0xd7a9('0x66')],'title':a310_0xd7a9('0x40'),'description':_0x4e0de2['track'],'fields':_0x1d8558,'thumbnail':{'url':_0x4e0de2[a310_0xd7a9('0xb')]},'footer':{'text':_0x4e0de2[a310_0xd7a9('0x56')]+'\x20•\x20'+(_0x2567ec['members'][a310_0xd7a9('0x3d')][a310_0xd7a9('0x1d')](_0x4e0de2[a310_0xd7a9('0x6f')])[a310_0xd7a9('0x55')][a310_0xd7a9('0x3b')]||_0x4e0de2[a310_0xd7a9('0x6f')])}}})[a310_0xd7a9('0x3a')](()=>{});_0x2567ec[a310_0xd7a9('0x13')]['playing']=!![];const _0x1eed6f=_0x2567ec[a310_0xd7a9('0x5a')]&&_0x2567ec[a310_0xd7a9('0x5a')][a310_0xd7a9('0xc')]['play'](this[a310_0xd7a9('0x9')]+_0x2567ec['id']+'/'+_0x4e0de2['id']+a310_0xd7a9('0x58'));this['client']['user'][a310_0xd7a9('0x4b')]({'name':_0x4e0de2['track'],'type':a310_0xd7a9('0x44')})[a310_0xd7a9('0x3a')](()=>{});_0x1eed6f['on']('finish',()=>this[a310_0xd7a9('0x4c')](_0x2567ec));_0x1eed6f['on'](a310_0xd7a9('0x64'),_0x4110c9=>{tesseract_1[a310_0xd7a9('0x15')][a310_0xd7a9('0x64')](_0x4110c9);this['dispatcherFinishHandler'](_0x2567ec);});}else{_0x2567ec[a310_0xd7a9('0x13')][a310_0xd7a9('0x4a')]=[];_0x2567ec[a310_0xd7a9('0x13')][a310_0xd7a9('0xe')]=[];fs['promises'][a310_0xd7a9('0x6b')](this[a310_0xd7a9('0x9')]+_0x2567ec['id'],{'recursive':!![]})[a310_0xd7a9('0x3a')](()=>{});this[a310_0xd7a9('0x33')][a310_0xd7a9('0x55')][a310_0xd7a9('0x4b')](this[a310_0xd7a9('0x33')]['configurations'][a310_0xd7a9('0x61')][a310_0xd7a9('0x11')])['catch'](()=>{});if(!_0x2567ec[a310_0xd7a9('0x67')]['music'][a310_0xd7a9('0x2')]){_0x2567ec[a310_0xd7a9('0x5a')]&&_0x2567ec[a310_0xd7a9('0x5a')][a310_0xd7a9('0x30')][a310_0xd7a9('0x59')]();}_0x2567ec[a310_0xd7a9('0x13')][a310_0xd7a9('0x47')][a310_0xd7a9('0x65')]({'embed':{'color':tesseract_1[a310_0xd7a9('0x45')][a310_0xd7a9('0x39')][a310_0xd7a9('0x66')],'title':a310_0xd7a9('0x28')}})[a310_0xd7a9('0x3a')](()=>{});}};this[a310_0xd7a9('0x4c')]=_0x48c737=>{_0x48c737[a310_0xd7a9('0x13')]['playing']=![];_0x48c737[a310_0xd7a9('0x13')][a310_0xd7a9('0xd')]=[];if(_0x48c737[a310_0xd7a9('0x13')]['queue']['length']){_0x48c737[a310_0xd7a9('0x13')][a310_0xd7a9('0xe')][a310_0xd7a9('0x60')](_0x48c737[a310_0xd7a9('0x13')][a310_0xd7a9('0x4a')]['shift']());}if(!_0x48c737[a310_0xd7a9('0x13')][a310_0xd7a9('0x4a')][a310_0xd7a9('0x2a')]&&_0x48c737[a310_0xd7a9('0x13')]['repeat']){_0x48c737[a310_0xd7a9('0x13')][a310_0xd7a9('0x4a')]=_0x48c737['music'][a310_0xd7a9('0xe')];_0x48c737[a310_0xd7a9('0x13')][a310_0xd7a9('0xe')]=[];}this[a310_0xd7a9('0x35')](_0x48c737);};this['exec']=async(_0x1ab995,_0x49d3ac)=>{const _0x3d6fdf=_0x1ab995['guild'];if(!_0x3d6fdf[a310_0xd7a9('0x67')][a310_0xd7a9('0x13')]||!_0x3d6fdf['document'][a310_0xd7a9('0x13')][a310_0xd7a9('0x6a')]){return await _0x1ab995['channel'][a310_0xd7a9('0x65')]({'embed':{'color':tesseract_1[a310_0xd7a9('0x45')][a310_0xd7a9('0x39')][a310_0xd7a9('0x34')],'description':this['client'][a310_0xd7a9('0x53')][a310_0xd7a9('0x5d')](_0x1ab995[a310_0xd7a9('0x25')]['document'][a310_0xd7a9('0x1f')],a310_0xd7a9('0x1b'),constants[a310_0xd7a9('0x16')](_0x1ab995['author'])?a310_0xd7a9('0x3e'):'musicDisabled')}})[a310_0xd7a9('0x3a')](()=>{});}const _0x315d01=_0x49d3ac['_'][a310_0xd7a9('0x7')]('\x20');const _0x2032e0=_0x315d01[a310_0xd7a9('0x2a')]?await this['getSongInfo'](_0x315d01):null;const _0x2fa8d8=_0x49d3ac[a310_0xd7a9('0x3')]?_0x49d3ac['link'][a310_0xd7a9('0x22')]:_0x2032e0?_0x2032e0[a310_0xd7a9('0x6')]||_0x2032e0[a310_0xd7a9('0x0')]:null;if(!_0x2fa8d8)throw new errors['DiscordError'](errors[a310_0xd7a9('0x2b')]['INVALID_COMMAND_SYNTAX'],this['name']);_0x3d6fdf[a310_0xd7a9('0x13')]['textChannel']=_0x1ab995[a310_0xd7a9('0x25')][a310_0xd7a9('0x2c')]['cache'][a310_0xd7a9('0x51')](_0x3d6fdf[a310_0xd7a9('0x67')]['music'][a310_0xd7a9('0x14')])?_0x1ab995[a310_0xd7a9('0x25')][a310_0xd7a9('0x2c')][a310_0xd7a9('0x3d')][a310_0xd7a9('0x1d')](_0x3d6fdf[a310_0xd7a9('0x67')]['music'][a310_0xd7a9('0x14')]):_0x1ab995[a310_0xd7a9('0x30')];_0x3d6fdf[a310_0xd7a9('0x13')]['voiceChannel']=_0x1ab995[a310_0xd7a9('0x25')][a310_0xd7a9('0x5a')]&&_0x1ab995[a310_0xd7a9('0x25')][a310_0xd7a9('0x5a')][a310_0xd7a9('0xc')]?_0x1ab995['guild'][a310_0xd7a9('0x5a')][a310_0xd7a9('0x30')]:_0x1ab995[a310_0xd7a9('0x25')][a310_0xd7a9('0x2c')]['cache'][a310_0xd7a9('0x21')](_0x29c6bc=>_0x29c6bc[a310_0xd7a9('0x5b')]===a310_0xd7a9('0x5a'))[a310_0xd7a9('0x51')](_0x3d6fdf['document']['music'][a310_0xd7a9('0x3f')])?_0x1ab995['guild']['channels']['cache']['filter'](_0x1956be=>_0x1956be['type']===a310_0xd7a9('0x5a'))[a310_0xd7a9('0x1d')](_0x3d6fdf[a310_0xd7a9('0x67')][a310_0xd7a9('0x13')][a310_0xd7a9('0x3f')]):_0x1ab995[a310_0xd7a9('0x72')][a310_0xd7a9('0xa')]()?_0x1ab995[a310_0xd7a9('0x72')][a310_0xd7a9('0x5a')][a310_0xd7a9('0x30')]:null;if(!_0x3d6fdf[a310_0xd7a9('0x13')][a310_0xd7a9('0x42')]){return await _0x1ab995['channel'][a310_0xd7a9('0x65')]({'embed':{'color':tesseract_1[a310_0xd7a9('0x45')][a310_0xd7a9('0x39')][a310_0xd7a9('0x34')],'description':this[a310_0xd7a9('0x33')][a310_0xd7a9('0x53')][a310_0xd7a9('0x5d')](_0x1ab995[a310_0xd7a9('0x25')][a310_0xd7a9('0x67')]['language'],a310_0xd7a9('0x1b'),_0x1ab995[a310_0xd7a9('0x72')][a310_0xd7a9('0xa')]()?'noMusicChannelsAsOwner':'noMusicChannels')}})[a310_0xd7a9('0x3a')](()=>{});}if(!_0x3d6fdf[a310_0xd7a9('0x13')]['voiceChannel'][a310_0xd7a9('0x2f')]){return await _0x1ab995[a310_0xd7a9('0x30')][a310_0xd7a9('0x65')]({'embed':{'color':tesseract_1[a310_0xd7a9('0x45')]['COLORS']['RED'],'description':this[a310_0xd7a9('0x33')][a310_0xd7a9('0x53')][a310_0xd7a9('0x5d')](_0x1ab995[a310_0xd7a9('0x25')][a310_0xd7a9('0x67')][a310_0xd7a9('0x1f')],'errors',a310_0xd7a9('0x19'),_0x3d6fdf[a310_0xd7a9('0x13')][a310_0xd7a9('0x42')][a310_0xd7a9('0x5f')])}})[a310_0xd7a9('0x3a')](()=>{});}if(!_0x3d6fdf[a310_0xd7a9('0x13')][a310_0xd7a9('0x42')][a310_0xd7a9('0x8')]){return await _0x1ab995[a310_0xd7a9('0x30')][a310_0xd7a9('0x65')]({'embed':{'color':tesseract_1[a310_0xd7a9('0x45')]['COLORS'][a310_0xd7a9('0x34')],'description':this[a310_0xd7a9('0x33')][a310_0xd7a9('0x53')]['getString'](_0x1ab995[a310_0xd7a9('0x25')][a310_0xd7a9('0x67')][a310_0xd7a9('0x1f')],a310_0xd7a9('0x1b'),a310_0xd7a9('0x36'),_0x3d6fdf['music'][a310_0xd7a9('0x42')][a310_0xd7a9('0x5f')])}})[a310_0xd7a9('0x3a')](()=>{});}const _0x3c9a74=await _0x3d6fdf[a310_0xd7a9('0x13')][a310_0xd7a9('0x42')][a310_0xd7a9('0x7')]();_0x3c9a74['on'](a310_0xd7a9('0x64'),tesseract_1[a310_0xd7a9('0x15')][a310_0xd7a9('0x64')]);_0x3c9a74['on'](a310_0xd7a9('0x17'),tesseract_1[a310_0xd7a9('0x15')][a310_0xd7a9('0x64')]);_0x1ab995[a310_0xd7a9('0x25')]['me'][a310_0xd7a9('0x5a')]['setMute'](![])[a310_0xd7a9('0x3a')](()=>{});_0x1ab995[a310_0xd7a9('0x25')]['me'][a310_0xd7a9('0x5a')][a310_0xd7a9('0x6d')](!![])[a310_0xd7a9('0x3a')](()=>{});const _0x2596e2=uuid_1['v4']();const _0x7cd586=youtube(_0x2fa8d8,[a310_0xd7a9('0x73'),a310_0xd7a9('0x69'),a310_0xd7a9('0x49'),a310_0xd7a9('0x37'),a310_0xd7a9('0x43'),'--no-warnings',a310_0xd7a9('0x4f'),'--referer=https://bastion.traction.one',a310_0xd7a9('0x1c'),a310_0xd7a9('0x5c')],{});_0x7cd586['on'](a310_0xd7a9('0x4'),_0x462e24=>this[a310_0xd7a9('0x46')](_0x3d6fdf,{..._0x462e24,'id':_0x2596e2,'requester':_0x1ab995['author']['id']}));_0x7cd586['on'](a310_0xd7a9('0x1a'),()=>this[a310_0xd7a9('0x5')](_0x3d6fdf));_0x7cd586['on'](a310_0xd7a9('0x64'),()=>{_0x1ab995[a310_0xd7a9('0x30')][a310_0xd7a9('0x65')]({'embed':{'color':tesseract_1[a310_0xd7a9('0x45')]['COLORS'][a310_0xd7a9('0x34')],'description':this[a310_0xd7a9('0x33')][a310_0xd7a9('0x53')]['getString'](_0x1ab995[a310_0xd7a9('0x25')][a310_0xd7a9('0x67')][a310_0xd7a9('0x1f')],'errors','musicDownloadError')}})['catch'](()=>{});});await fs[a310_0xd7a9('0x5e')][a310_0xd7a9('0x20')](this[a310_0xd7a9('0x9')]+_0x1ab995[a310_0xd7a9('0x25')]['id']+'/',{'recursive':!![]})[a310_0xd7a9('0x3a')](tesseract_1[a310_0xd7a9('0x15')][a310_0xd7a9('0x64')]);_0x7cd586[a310_0xd7a9('0x1e')](fs[a310_0xd7a9('0x70')](this[a310_0xd7a9('0x9')]+_0x1ab995[a310_0xd7a9('0x25')]['id']+'/'+_0x2596e2+a310_0xd7a9('0x58')));};this[a310_0xd7a9('0x9')]='./music/';}[a310_0xd7a9('0x74')](_0xb879f0){return new Promise((_0x39361d,_0x5f03bd)=>youtube['getInfo'](a310_0xd7a9('0x57')+_0xb879f0,[a310_0xd7a9('0x73'),a310_0xd7a9('0x69'),'--no-playlist',a310_0xd7a9('0x37'),a310_0xd7a9('0x43'),'--no-warnings',a310_0xd7a9('0x4f'),a310_0xd7a9('0x71'),a310_0xd7a9('0x1c'),a310_0xd7a9('0x5c')],(_0x25eaa0,_0x170e20)=>{if(_0x25eaa0)return _0x5f03bd(_0x25eaa0);return _0x39361d(_0x170e20);}));}};
const a99_0x20ed=['setActivity','finish','musicDirectory','constructor','getString','streamEndHandler','setDeaf','exports','.mp3','send','unspeakable','uuid','speakable','guild','\x20â€¢\x20','RED','href','members','type','requester','errors','configurations','Artist','getSongInfo','INVALID_COMMAND_SYNTAX','Logger','--no-cache-dir','--no-warnings','fulltitle','get','./music/','musicDisabled','channel','--ignore-errors','queue','creator','artist','document','PREMIUM_MEMBERSHIP_REQUIRED','isMusicMaster','playing','ArgumentTypes','--geo-bypass-country=US','uploader','premiumMusic','activity','setMute','../../utils/constants','tag','isPublicBastion','history','end','noMusicChannels','track','textChannelId','../../utils/omnic','album','locale','textChannel','connection','voiceChannel','It\x20allows\x20you\x20to\x20play\x20a\x20music\x20in\x20the\x20server,\x20from\x20the\x20given\x20query\x20or\x20from\x20any\x20supported\x20source.','cache','--user-agent=Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_0)\x20AppleWebKit/604.1\x20(KHTML,\x20like\x20Gecko)\x20Version/13.0.4\x20Safari/604.1','music','LISTENING','filter','info','pipe','client','Added\x20to\x20Queue','author','length','skipVotes','keepAlive','apply','push','promises','@bastion/tesseract','startStreamDispatcher','thumbnail','duration','voiceChannelId','language','--youtube-skip-dash-manifest','musicDisabledPublic','URL','presence','getInfo','error','member','channels','Constants','play\x20--link\x20https://www.youtube.com/watch?v=dQw4w9WgXcQ','--quiet','DiscordError','leave','play','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','../../utils/errors','join','BASTION_ERROR_TYPE','PINK','user','--format=bestaudio[protocol^=http]','play\x20Remember\x20The\x20Name\x20by\x20Ed\x20Sheeran','alt_title','link','failed','youtube-dl','name','streamInfoHandler','--referer=https://bastion.traction.one','COLORS','voice','dispatcherFinishHandler','--no-playlist','Up\x20Next','noMusicChannelsAsOwner','Album','test','catch','unjoinable','--force-ipv4'];(function(_0x154c6d,_0x20ed7e){const _0x3022a4=function(_0x4b87dc){while(--_0x4b87dc){_0x154c6d['push'](_0x154c6d['shift']());}},_0x3c9aad=function(){const _0x1a02c8={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x1e961a,_0x14aab7,_0x777ef1,_0x12a434){_0x12a434=_0x12a434||{};let _0x553369=_0x14aab7+'='+_0x777ef1,_0x62c5f2=0x0;for(let _0x3f8218=0x0,_0x4091c2=_0x1e961a['length'];_0x3f8218<_0x4091c2;_0x3f8218++){const _0x4dfb76=_0x1e961a[_0x3f8218];_0x553369+=';\x20'+_0x4dfb76;const _0x4452ef=_0x1e961a[_0x4dfb76];_0x1e961a['push'](_0x4452ef),_0x4091c2=_0x1e961a['length'],_0x4452ef!==!![]&&(_0x553369+='='+_0x4452ef);}_0x12a434['cookie']=_0x553369;},'removeCookie':function(){return'dev';},'getCookie':function(_0x152c50,_0x577faa){_0x152c50=_0x152c50||function(_0xfca84c){return _0xfca84c;};const _0x5c8ade=_0x152c50(new RegExp('(?:^|;\x20)'+_0x577faa['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x32e718=function(_0x5ebc35,_0x3bf818){_0x5ebc35(++_0x3bf818);};return _0x32e718(_0x3022a4,_0x20ed7e),_0x5c8ade?decodeURIComponent(_0x5c8ade[0x1]):undefined;}},_0x1d1ba8=function(){const _0xe8e9c4=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0xe8e9c4['test'](_0x1a02c8['removeCookie']['toString']());};_0x1a02c8['updateCookie']=_0x1d1ba8;let _0x265964='';const _0x86ebf7=_0x1a02c8['updateCookie']();if(!_0x86ebf7)_0x1a02c8['setCookie'](['*'],'counter',0x1);else _0x86ebf7?_0x265964=_0x1a02c8['getCookie'](null,'counter'):_0x1a02c8['removeCookie']();};_0x3c9aad();}(a99_0x20ed,0xbd));const a99_0x3022=function(_0x154c6d,_0x20ed7e){_0x154c6d=_0x154c6d-0x0;let _0x3022a4=a99_0x20ed[_0x154c6d];return _0x3022a4;};const a99_0x1a02c8=function(){let _0x265964=!![];return function(_0x86ebf7,_0x1e961a){const _0x14aab7=_0x265964?function(){if(_0x1e961a){const _0x777ef1=_0x1e961a[a99_0x3022('0xa')](_0x86ebf7,arguments);return _0x1e961a=null,_0x777ef1;}}:function(){};return _0x265964=![],_0x14aab7;};}(),a99_0x4b87dc=a99_0x1a02c8(this,function(){const _0x12a434=function(){const _0x553369=_0x12a434['constructor']('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a99_0x3022('0x3e')](a99_0x3022('0x21'));return!_0x553369[a99_0x3022('0x37')](a99_0x4b87dc);};return _0x12a434();});a99_0x4b87dc();'use strict';const fs=require('fs'),tesseract_1=require(a99_0x3022('0xd')),youtube=require(a99_0x3022('0x2c')),uuid_1=require(a99_0x3022('0x46')),constants=require(a99_0x3022('0x6a')),errors=require(a99_0x3022('0x22')),omnic=require(a99_0x3022('0x72'));module[a99_0x3022('0x42')]=class Play extends tesseract_1['Command']{constructor(){super(a99_0x3022('0x20'),{'description':a99_0x3022('0x78'),'triggers':[],'arguments':{'alias':{'link':'l'},'coerce':{'link':tesseract_1['Constants'][a99_0x3022('0x64')][a99_0x3022('0x15')]}},'scope':a99_0x3022('0x48'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[],'syntax':[a99_0x3022('0x28'),a99_0x3022('0x1c')]}),this[a99_0x3022('0x2e')]=(_0x62c5f2,_0x3f8218)=>{const _0x4091c2=_0x3f8218['id'],_0x4dfb76=_0x3f8218[a99_0x3022('0x70')]||_0x3f8218['title']||_0x3f8218[a99_0x3022('0x57')]||_0x3f8218[a99_0x3022('0x29')],_0x4452ef=_0x3f8218[a99_0x3022('0x73')],_0x152c50=_0x3f8218[a99_0x3022('0x5f')]||_0x3f8218[a99_0x3022('0x5e')]||_0x3f8218[a99_0x3022('0x66')],_0x577faa=_0x3f8218['duration'],_0x5c8ade=_0x3f8218[a99_0x3022('0xf')],_0x32e718=_0x3f8218['requester'];_0x62c5f2[a99_0x3022('0x7b')][a99_0x3022('0x5d')]['push']({'id':_0x4091c2,'track':_0x4dfb76,'album':_0x4452ef,'artist':_0x152c50,'duration':_0x577faa,'thumbnail':_0x5c8ade,'requester':_0x32e718});const _0xfca84c=[];_0x4452ef&&_0xfca84c[a99_0x3022('0xb')]({'name':'Album','value':_0x4452ef,'inline':!![]}),_0x152c50&&_0xfca84c[a99_0x3022('0xb')]({'name':a99_0x3022('0x51'),'value':_0x152c50,'inline':!![]}),_0x62c5f2[a99_0x3022('0x7b')][a99_0x3022('0x75')][a99_0x3022('0x44')]({'embed':{'color':tesseract_1[a99_0x3022('0x1b')]['COLORS'][a99_0x3022('0x25')],'title':a99_0x3022('0x5'),'description':_0x4dfb76,'fields':_0xfca84c,'thumbnail':{'url':_0x5c8ade},'footer':{'text':(_0x62c5f2[a99_0x3022('0x7b')]['queue'][a99_0x3022('0x7')]?'#'+(_0x62c5f2['music'][a99_0x3022('0x5d')][a99_0x3022('0x7')]-0x1):a99_0x3022('0x34'))+(a99_0x3022('0x49')+_0x577faa+a99_0x3022('0x49')+(_0x62c5f2['members'][a99_0x3022('0x79')][a99_0x3022('0x58')](_0x32e718)[a99_0x3022('0x26')][a99_0x3022('0x6b')]||_0x32e718))}}})['catch'](()=>{});},this[a99_0x3022('0x40')]=_0x5ebc35=>{!_0x5ebc35[a99_0x3022('0x7b')][a99_0x3022('0x63')]&&this[a99_0x3022('0xe')](_0x5ebc35);},this[a99_0x3022('0xe')]=_0x3bf818=>{if(_0x3bf818[a99_0x3022('0x7b')][a99_0x3022('0x5d')][a99_0x3022('0x7')]){const _0xe8e9c4=_0x3bf818['music']['queue'][0x0],_0x589b5e=[];_0xe8e9c4[a99_0x3022('0x73')]&&_0x589b5e['push']({'name':a99_0x3022('0x36'),'value':_0xe8e9c4[a99_0x3022('0x73')],'inline':!![]});_0xe8e9c4[a99_0x3022('0x5f')]&&_0x589b5e[a99_0x3022('0xb')]({'name':a99_0x3022('0x51'),'value':_0xe8e9c4['artist'],'inline':!![]});_0x3bf818[a99_0x3022('0x7b')][a99_0x3022('0x75')][a99_0x3022('0x44')]({'embed':{'color':tesseract_1[a99_0x3022('0x1b')][a99_0x3022('0x30')][a99_0x3022('0x25')],'title':'Playing','description':_0xe8e9c4[a99_0x3022('0x70')],'fields':_0x589b5e,'thumbnail':{'url':_0xe8e9c4[a99_0x3022('0xf')]},'footer':{'text':_0xe8e9c4[a99_0x3022('0x10')]+a99_0x3022('0x49')+(_0x3bf818[a99_0x3022('0x4c')][a99_0x3022('0x79')][a99_0x3022('0x58')](_0xe8e9c4[a99_0x3022('0x4e')])[a99_0x3022('0x26')][a99_0x3022('0x6b')]||_0xe8e9c4['requester'])}}})[a99_0x3022('0x38')](()=>{}),_0x3bf818[a99_0x3022('0x7b')][a99_0x3022('0x63')]=!![];const _0x3cbb81=_0x3bf818['voice']&&_0x3bf818[a99_0x3022('0x31')][a99_0x3022('0x76')][a99_0x3022('0x20')](this[a99_0x3022('0x3d')]+_0x3bf818['id']+'/'+_0xe8e9c4['id']+a99_0x3022('0x43'));this[a99_0x3022('0x4')]['configurations'][a99_0x3022('0x7b')]&&this[a99_0x3022('0x4')]['configurations']['music']['activity']&&this[a99_0x3022('0x4')]['user'][a99_0x3022('0x3b')]({'name':_0xe8e9c4['track'],'type':a99_0x3022('0x0')})[a99_0x3022('0x38')](()=>{}),_0x3cbb81['on'](a99_0x3022('0x3c'),()=>this['dispatcherFinishHandler'](_0x3bf818)),_0x3cbb81['on'](a99_0x3022('0x18'),_0xef87f7=>{tesseract_1[a99_0x3022('0x54')][a99_0x3022('0x18')](_0xef87f7),this[a99_0x3022('0x32')](_0x3bf818);});}else _0x3bf818[a99_0x3022('0x7b')][a99_0x3022('0x5d')]=[],_0x3bf818[a99_0x3022('0x7b')][a99_0x3022('0x6d')]=[],fs[a99_0x3022('0xc')]['rmdir'](this[a99_0x3022('0x3d')]+_0x3bf818['id'],{'recursive':!![]})[a99_0x3022('0x38')](()=>{}),this['client'][a99_0x3022('0x50')]['music']&&this[a99_0x3022('0x4')][a99_0x3022('0x50')][a99_0x3022('0x7b')][a99_0x3022('0x68')]&&this[a99_0x3022('0x4')]['user'][a99_0x3022('0x3b')](this['client'][a99_0x3022('0x50')][a99_0x3022('0x16')]instanceof Array?this[a99_0x3022('0x4')]['configurations']['presence'][0x0]['activity']:this['client'][a99_0x3022('0x50')][a99_0x3022('0x16')]['activity'])[a99_0x3022('0x38')](()=>{}),!_0x3bf818['document']['music'][a99_0x3022('0x9')]&&(_0x3bf818['voice']&&_0x3bf818[a99_0x3022('0x31')][a99_0x3022('0x5b')][a99_0x3022('0x1f')]()),_0x3bf818[a99_0x3022('0x7b')]['textChannel'][a99_0x3022('0x44')]({'embed':{'color':tesseract_1['Constants'][a99_0x3022('0x30')]['PINK'],'title':'Stopping\x20Playback'}})['catch'](()=>{});},this[a99_0x3022('0x32')]=_0x1cb831=>{_0x1cb831[a99_0x3022('0x7b')]['playing']=![],_0x1cb831[a99_0x3022('0x7b')][a99_0x3022('0x8')]=[],_0x1cb831[a99_0x3022('0x7b')][a99_0x3022('0x5d')]['length']&&_0x1cb831[a99_0x3022('0x7b')]['history'][a99_0x3022('0xb')](_0x1cb831['music']['queue']['shift']()),!_0x1cb831['music'][a99_0x3022('0x5d')]['length']&&_0x1cb831[a99_0x3022('0x7b')]['repeat']&&(_0x1cb831[a99_0x3022('0x7b')][a99_0x3022('0x5d')]=_0x1cb831[a99_0x3022('0x7b')]['history'],_0x1cb831['music'][a99_0x3022('0x6d')]=[]),this[a99_0x3022('0xe')](_0x1cb831);},this['exec']=async(_0x29e499,_0x180319)=>{const _0x986f9a=_0x29e499['guild'];if(!_0x986f9a[a99_0x3022('0x60')][a99_0x3022('0x7b')]||!_0x986f9a['document'][a99_0x3022('0x7b')]['enabled'])return await _0x29e499['channel'][a99_0x3022('0x44')]({'embed':{'color':tesseract_1[a99_0x3022('0x1b')][a99_0x3022('0x30')][a99_0x3022('0x4a')],'description':this[a99_0x3022('0x4')][a99_0x3022('0x74')][a99_0x3022('0x3f')](_0x29e499[a99_0x3022('0x48')][a99_0x3022('0x60')][a99_0x3022('0x12')],a99_0x3022('0x4f'),constants[a99_0x3022('0x6c')](_0x29e499['author'])?a99_0x3022('0x14'):a99_0x3022('0x5a'))}})['catch'](()=>{});if(constants[a99_0x3022('0x6c')](this[a99_0x3022('0x4')][a99_0x3022('0x26')])){const _0x491af0=await omnic['fetchPremiumTier'](_0x29e499['guild'])[a99_0x3022('0x38')](()=>{});if(!_0x491af0)throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][a99_0x3022('0x61')],this[a99_0x3022('0x4')]['locale']['getString'](_0x29e499[a99_0x3022('0x48')][a99_0x3022('0x60')][a99_0x3022('0x12')],'errors',a99_0x3022('0x67')));}const _0x78aace=_0x180319['_']['join']('\x20'),_0x3f4cc7=_0x78aace['length']?await this[a99_0x3022('0x52')](_0x78aace):null,_0x3fd108=_0x180319[a99_0x3022('0x2a')]?_0x180319[a99_0x3022('0x2a')][a99_0x3022('0x4b')]:_0x3f4cc7?_0x3f4cc7['webpage_url']||_0x3f4cc7['url']:null;if(!_0x3fd108)throw new errors[(a99_0x3022('0x1e'))](errors[a99_0x3022('0x24')][a99_0x3022('0x53')],this[a99_0x3022('0x2d')]);_0x986f9a[a99_0x3022('0x7b')][a99_0x3022('0x75')]=_0x29e499['guild'][a99_0x3022('0x1a')][a99_0x3022('0x79')]['has'](_0x986f9a[a99_0x3022('0x60')][a99_0x3022('0x7b')][a99_0x3022('0x71')])?_0x29e499[a99_0x3022('0x48')][a99_0x3022('0x1a')][a99_0x3022('0x79')]['get'](_0x986f9a['document'][a99_0x3022('0x7b')][a99_0x3022('0x71')]):_0x29e499['channel'],_0x986f9a['music'][a99_0x3022('0x77')]=_0x29e499[a99_0x3022('0x48')]['voice']&&_0x29e499[a99_0x3022('0x48')][a99_0x3022('0x31')]['connection']?_0x29e499[a99_0x3022('0x48')]['voice'][a99_0x3022('0x5b')]:_0x29e499['guild'][a99_0x3022('0x1a')][a99_0x3022('0x79')][a99_0x3022('0x1')](_0x2e1393=>_0x2e1393[a99_0x3022('0x4d')]==='voice')['has'](_0x986f9a[a99_0x3022('0x60')][a99_0x3022('0x7b')][a99_0x3022('0x11')])?_0x29e499[a99_0x3022('0x48')][a99_0x3022('0x1a')][a99_0x3022('0x79')][a99_0x3022('0x1')](_0x375b58=>_0x375b58[a99_0x3022('0x4d')]===a99_0x3022('0x31'))[a99_0x3022('0x58')](_0x986f9a[a99_0x3022('0x60')][a99_0x3022('0x7b')][a99_0x3022('0x11')]):_0x29e499[a99_0x3022('0x19')][a99_0x3022('0x62')]()?_0x29e499[a99_0x3022('0x19')][a99_0x3022('0x31')]['channel']:null;if(!_0x986f9a[a99_0x3022('0x7b')][a99_0x3022('0x77')])return await _0x29e499['channel']['send']({'embed':{'color':tesseract_1[a99_0x3022('0x1b')][a99_0x3022('0x30')][a99_0x3022('0x4a')],'description':this[a99_0x3022('0x4')][a99_0x3022('0x74')][a99_0x3022('0x3f')](_0x29e499[a99_0x3022('0x48')][a99_0x3022('0x60')][a99_0x3022('0x12')],a99_0x3022('0x4f'),_0x29e499[a99_0x3022('0x19')][a99_0x3022('0x62')]()?a99_0x3022('0x35'):a99_0x3022('0x6f'))}})[a99_0x3022('0x38')](()=>{});if(!_0x986f9a[a99_0x3022('0x7b')][a99_0x3022('0x77')]['joinable'])return await _0x29e499[a99_0x3022('0x5b')]['send']({'embed':{'color':tesseract_1[a99_0x3022('0x1b')][a99_0x3022('0x30')][a99_0x3022('0x4a')],'description':this[a99_0x3022('0x4')][a99_0x3022('0x74')][a99_0x3022('0x3f')](_0x29e499['guild'][a99_0x3022('0x60')][a99_0x3022('0x12')],'errors',a99_0x3022('0x39'),_0x986f9a[a99_0x3022('0x7b')][a99_0x3022('0x77')][a99_0x3022('0x2d')])}})[a99_0x3022('0x38')](()=>{});if(!_0x986f9a[a99_0x3022('0x7b')][a99_0x3022('0x77')][a99_0x3022('0x47')])return await _0x29e499[a99_0x3022('0x5b')][a99_0x3022('0x44')]({'embed':{'color':tesseract_1[a99_0x3022('0x1b')][a99_0x3022('0x30')]['RED'],'description':this[a99_0x3022('0x4')]['locale'][a99_0x3022('0x3f')](_0x29e499[a99_0x3022('0x48')]['document'][a99_0x3022('0x12')],a99_0x3022('0x4f'),a99_0x3022('0x45'),_0x986f9a[a99_0x3022('0x7b')][a99_0x3022('0x77')]['name'])}})[a99_0x3022('0x38')](()=>{});const _0x9ba33c=await _0x986f9a[a99_0x3022('0x7b')]['voiceChannel'][a99_0x3022('0x23')]();_0x9ba33c['on']('error',tesseract_1[a99_0x3022('0x54')][a99_0x3022('0x18')]),_0x9ba33c['on'](a99_0x3022('0x2b'),tesseract_1[a99_0x3022('0x54')][a99_0x3022('0x18')]),_0x29e499[a99_0x3022('0x48')]['me'][a99_0x3022('0x31')][a99_0x3022('0x69')](![])[a99_0x3022('0x38')](()=>{}),_0x29e499[a99_0x3022('0x48')]['me']['voice'][a99_0x3022('0x41')](!![])['catch'](()=>{});const _0x33ca3a=uuid_1['v4'](),_0x3061c0=youtube(_0x3fd108,['--ignore-errors',a99_0x3022('0x3a'),'--geo-bypass-country=US',a99_0x3022('0x33'),a99_0x3022('0x55'),a99_0x3022('0x1d'),a99_0x3022('0x56'),a99_0x3022('0x7a'),'--referer=https://bastion.traction.one',a99_0x3022('0x27'),a99_0x3022('0x13')],{});_0x3061c0['on'](a99_0x3022('0x2'),_0x4f249d=>this[a99_0x3022('0x2e')](_0x986f9a,{..._0x4f249d,'id':_0x33ca3a,'requester':_0x29e499[a99_0x3022('0x6')]['id']})),_0x3061c0['on'](a99_0x3022('0x6e'),()=>this[a99_0x3022('0x40')](_0x986f9a)),_0x3061c0['on'](a99_0x3022('0x18'),()=>{_0x29e499[a99_0x3022('0x5b')][a99_0x3022('0x44')]({'embed':{'color':tesseract_1[a99_0x3022('0x1b')][a99_0x3022('0x30')][a99_0x3022('0x4a')],'description':this['client'][a99_0x3022('0x74')][a99_0x3022('0x3f')](_0x29e499[a99_0x3022('0x48')][a99_0x3022('0x60')][a99_0x3022('0x12')],a99_0x3022('0x4f'),'musicDownloadError')}})[a99_0x3022('0x38')](()=>{});}),await fs['promises']['mkdir'](this[a99_0x3022('0x3d')]+_0x29e499['guild']['id']+'/',{'recursive':!![]})[a99_0x3022('0x38')](tesseract_1[a99_0x3022('0x54')]['error']),_0x3061c0[a99_0x3022('0x3')](fs['createWriteStream'](this['musicDirectory']+_0x29e499[a99_0x3022('0x48')]['id']+'/'+_0x33ca3a+a99_0x3022('0x43')));},this['musicDirectory']=a99_0x3022('0x59');}[a99_0x3022('0x52')](_0x27c5c9){return new Promise((_0x4c7908,_0x1ad01b)=>youtube[a99_0x3022('0x17')]('ytsearch:'+_0x27c5c9,[a99_0x3022('0x5c'),a99_0x3022('0x3a'),a99_0x3022('0x65'),a99_0x3022('0x33'),a99_0x3022('0x55'),a99_0x3022('0x1d'),'--no-warnings','--user-agent=Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_0)\x20AppleWebKit/604.1\x20(KHTML,\x20like\x20Gecko)\x20Version/13.0.4\x20Safari/604.1',a99_0x3022('0x2f'),a99_0x3022('0x27'),'--youtube-skip-dash-manifest'],(_0x3560a5,_0x5ded83)=>{if(_0x3560a5)return _0x1ad01b(_0x3560a5);return _0x4c7908(_0x5ded83);}));}};
const a98_0x46ec=['members','promises','end','--referer=https://bastion.traction.one','noMusicChannels','author','musicDirectory','LISTENING','url','--geo-bypass-country=US','speakable','link','pipe','locale','Album','member','webpage_url','\x20•\x20','Up\x20Next','voiceChannel','Added\x20to\x20Queue','track','../../utils/constants','PINK','DiscordError','test','apply','keepAlive','requester','play','errors','presence','user','dispatcherFinishHandler','href','noMusicChannelsAsOwner','leave','../../utils/errors','error','--format=bestaudio[protocol^=http]','send','channels','RED','music','--no-playlist','URL','startStreamDispatcher','guild','getString','configurations','artist','catch','finish','get','--user-agent=Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_0)\x20AppleWebKit/604.1\x20(KHTML,\x20like\x20Gecko)\x20Version/13.0.4\x20Safari/604.1','playing','thumbnail','setMute','client','Stopping\x20Playback','textChannelId','INVALID_COMMAND_SYNTAX','streamEndHandler','Command','COLORS','skipVotes','length','isMusicMaster','document','textChannel','connection','activity','has','channel','name','history','@bastion/tesseract','exports','setActivity','ArgumentTypes','It\x20allows\x20you\x20to\x20play\x20a\x20music\x20in\x20the\x20server,\x20from\x20the\x20given\x20query\x20or\x20from\x20any\x20supported\x20source.','createWriteStream','tag','alt_title','Constants','queue','enabled','musicDisabledPublic','./music/','Playing','BASTION_ERROR_TYPE','language','--no-warnings','voiceChannelId','constructor','shift','--youtube-skip-dash-manifest','--quiet','.mp3','return\x20/\x22\x20+\x20this\x20+\x20\x22/','--no-cache-dir','youtube-dl','mkdir','getInfo','Logger','push','ytsearch:','Artist','title','album','repeat','join','voice','duration','--ignore-errors','play\x20Remember\x20The\x20Name\x20by\x20Ed\x20Sheeran','exec','setDeaf','fulltitle','--force-ipv4','cache','type','rmdir','joinable'];(function(_0x210aad,_0x46ecfe){const _0x1a8773=function(_0x4aff07){while(--_0x4aff07){_0x210aad['push'](_0x210aad['shift']());}},_0x207ba1=function(){const _0x4293ab={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x5c7aa4,_0x38cc1e,_0x3ea393,_0x33438e){_0x33438e=_0x33438e||{};let _0x281b05=_0x38cc1e+'='+_0x3ea393,_0x39df9f=0x0;for(let _0x838bdc=0x0,_0x596c3b=_0x5c7aa4['length'];_0x838bdc<_0x596c3b;_0x838bdc++){const _0x1a76b7=_0x5c7aa4[_0x838bdc];_0x281b05+=';\x20'+_0x1a76b7;const _0x10887e=_0x5c7aa4[_0x1a76b7];_0x5c7aa4['push'](_0x10887e),_0x596c3b=_0x5c7aa4['length'],_0x10887e!==!![]&&(_0x281b05+='='+_0x10887e);}_0x33438e['cookie']=_0x281b05;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3a3850,_0x4d1c5c){_0x3a3850=_0x3a3850||function(_0x6c55ad){return _0x6c55ad;};const _0x496973=_0x3a3850(new RegExp('(?:^|;\x20)'+_0x4d1c5c['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x5d27aa=function(_0x1b49ff,_0x219bae){_0x1b49ff(++_0x219bae);};return _0x5d27aa(_0x1a8773,_0x46ecfe),_0x496973?decodeURIComponent(_0x496973[0x1]):undefined;}},_0x8513db=function(){const _0x2986eb=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x2986eb['test'](_0x4293ab['removeCookie']['toString']());};_0x4293ab['updateCookie']=_0x8513db;let _0x37edee='';const _0x292e89=_0x4293ab['updateCookie']();if(!_0x292e89)_0x4293ab['setCookie'](['*'],'counter',0x1);else _0x292e89?_0x37edee=_0x4293ab['getCookie'](null,'counter'):_0x4293ab['removeCookie']();};_0x207ba1();}(a98_0x46ec,0xee));const a98_0x1a87=function(_0x210aad,_0x46ecfe){_0x210aad=_0x210aad-0x0;let _0x1a8773=a98_0x46ec[_0x210aad];return _0x1a8773;};const a98_0x4293ab=function(){let _0x37edee=!![];return function(_0x292e89,_0x5c7aa4){const _0x38cc1e=_0x37edee?function(){if(_0x5c7aa4){const _0x3ea393=_0x5c7aa4[a98_0x1a87('0x24')](_0x292e89,arguments);return _0x5c7aa4=null,_0x3ea393;}}:function(){};return _0x37edee=![],_0x38cc1e;};}(),a98_0x4aff07=a98_0x4293ab(this,function(){const _0x33438e=function(){const _0x281b05=_0x33438e['constructor'](a98_0x1a87('0x6d'))()[a98_0x1a87('0x68')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x281b05[a98_0x1a87('0x23')](a98_0x4aff07);};return _0x33438e();});a98_0x4aff07();'use strict';const fs=require('fs'),tesseract_1=require(a98_0x1a87('0x56')),youtube=require(a98_0x1a87('0x6f')),uuid_1=require('uuid'),constants=require(a98_0x1a87('0x20')),errors=require(a98_0x1a87('0x2f'));module[a98_0x1a87('0x57')]=class Play extends tesseract_1[a98_0x1a87('0x49')]{constructor(){super(a98_0x1a87('0x27'),{'description':a98_0x1a87('0x5a'),'triggers':[],'arguments':{'alias':{'link':'l'},'coerce':{'link':tesseract_1[a98_0x1a87('0x5e')][a98_0x1a87('0x59')][a98_0x1a87('0x37')]}},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[],'syntax':[a98_0x1a87('0x1'),'play\x20--link\x20https://www.youtube.com/watch?v=dQw4w9WgXcQ']}),this['streamInfoHandler']=(_0x39df9f,_0x838bdc)=>{const _0x596c3b=_0x838bdc['id'],_0x1a76b7=_0x838bdc['track']||_0x838bdc[a98_0x1a87('0x76')]||_0x838bdc[a98_0x1a87('0x4')]||_0x838bdc[a98_0x1a87('0x5d')],_0x10887e=_0x838bdc[a98_0x1a87('0x77')],_0x3a3850=_0x838bdc[a98_0x1a87('0x3c')]||_0x838bdc['creator']||_0x838bdc['uploader'],_0x4d1c5c=_0x838bdc[a98_0x1a87('0x7b')],_0x496973=_0x838bdc[a98_0x1a87('0x42')],_0x5d27aa=_0x838bdc[a98_0x1a87('0x26')];_0x39df9f[a98_0x1a87('0x35')][a98_0x1a87('0x5f')][a98_0x1a87('0x73')]({'id':_0x596c3b,'track':_0x1a76b7,'album':_0x10887e,'artist':_0x3a3850,'duration':_0x4d1c5c,'thumbnail':_0x496973,'requester':_0x5d27aa});const _0x6c55ad=[];_0x10887e&&_0x6c55ad[a98_0x1a87('0x73')]({'name':a98_0x1a87('0x18'),'value':_0x10887e,'inline':!![]}),_0x3a3850&&_0x6c55ad[a98_0x1a87('0x73')]({'name':'Artist','value':_0x3a3850,'inline':!![]}),_0x39df9f[a98_0x1a87('0x35')][a98_0x1a87('0x4f')][a98_0x1a87('0x32')]({'embed':{'color':tesseract_1[a98_0x1a87('0x5e')][a98_0x1a87('0x4a')][a98_0x1a87('0x21')],'title':a98_0x1a87('0x1e'),'description':_0x1a76b7,'fields':_0x6c55ad,'thumbnail':{'url':_0x496973},'footer':{'text':(_0x39df9f['music']['queue'][a98_0x1a87('0x4c')]?'#'+(_0x39df9f[a98_0x1a87('0x35')][a98_0x1a87('0x5f')][a98_0x1a87('0x4c')]-0x1):a98_0x1a87('0x1c'))+(a98_0x1a87('0x1b')+_0x4d1c5c+'\x20•\x20'+(_0x39df9f[a98_0x1a87('0xa')][a98_0x1a87('0x6')][a98_0x1a87('0x3f')](_0x5d27aa)['user']['tag']||_0x5d27aa))}}})[a98_0x1a87('0x3d')](()=>{});},this[a98_0x1a87('0x48')]=_0x1b49ff=>{!_0x1b49ff['music']['playing']&&this['startStreamDispatcher'](_0x1b49ff);},this[a98_0x1a87('0x38')]=_0x219bae=>{if(_0x219bae[a98_0x1a87('0x35')]['queue']['length']){const _0x2986eb=_0x219bae[a98_0x1a87('0x35')][a98_0x1a87('0x5f')][0x0],_0x3d67bd=[];_0x2986eb[a98_0x1a87('0x77')]&&_0x3d67bd[a98_0x1a87('0x73')]({'name':a98_0x1a87('0x18'),'value':_0x2986eb[a98_0x1a87('0x77')],'inline':!![]});_0x2986eb['artist']&&_0x3d67bd[a98_0x1a87('0x73')]({'name':a98_0x1a87('0x75'),'value':_0x2986eb['artist'],'inline':!![]});_0x219bae[a98_0x1a87('0x35')]['textChannel'][a98_0x1a87('0x32')]({'embed':{'color':tesseract_1[a98_0x1a87('0x5e')][a98_0x1a87('0x4a')][a98_0x1a87('0x21')],'title':a98_0x1a87('0x63'),'description':_0x2986eb[a98_0x1a87('0x1f')],'fields':_0x3d67bd,'thumbnail':{'url':_0x2986eb[a98_0x1a87('0x42')]},'footer':{'text':_0x2986eb[a98_0x1a87('0x7b')]+a98_0x1a87('0x1b')+(_0x219bae[a98_0x1a87('0xa')][a98_0x1a87('0x6')][a98_0x1a87('0x3f')](_0x2986eb[a98_0x1a87('0x26')])[a98_0x1a87('0x2a')][a98_0x1a87('0x5c')]||_0x2986eb[a98_0x1a87('0x26')])}}})[a98_0x1a87('0x3d')](()=>{}),_0x219bae[a98_0x1a87('0x35')][a98_0x1a87('0x41')]=!![];const _0x7d9d32=_0x219bae[a98_0x1a87('0x7a')]&&_0x219bae['voice']['connection']['play'](this[a98_0x1a87('0x10')]+_0x219bae['id']+'/'+_0x2986eb['id']+a98_0x1a87('0x6c'));this[a98_0x1a87('0x44')]['configurations'][a98_0x1a87('0x35')]&&this['client'][a98_0x1a87('0x3b')][a98_0x1a87('0x35')][a98_0x1a87('0x51')]&&this[a98_0x1a87('0x44')]['user']['setActivity']({'name':_0x2986eb[a98_0x1a87('0x1f')],'type':a98_0x1a87('0x11')})[a98_0x1a87('0x3d')](()=>{}),_0x7d9d32['on'](a98_0x1a87('0x3e'),()=>this[a98_0x1a87('0x2b')](_0x219bae)),_0x7d9d32['on'](a98_0x1a87('0x30'),_0x1e565e=>{tesseract_1[a98_0x1a87('0x72')][a98_0x1a87('0x30')](_0x1e565e),this['dispatcherFinishHandler'](_0x219bae);});}else _0x219bae[a98_0x1a87('0x35')]['queue']=[],_0x219bae[a98_0x1a87('0x35')][a98_0x1a87('0x55')]=[],fs['promises'][a98_0x1a87('0x8')](this['musicDirectory']+_0x219bae['id'],{'recursive':!![]})[a98_0x1a87('0x3d')](()=>{}),this[a98_0x1a87('0x44')]['configurations'][a98_0x1a87('0x35')]&&this['client'][a98_0x1a87('0x3b')][a98_0x1a87('0x35')][a98_0x1a87('0x51')]&&this[a98_0x1a87('0x44')][a98_0x1a87('0x2a')][a98_0x1a87('0x58')](this[a98_0x1a87('0x44')][a98_0x1a87('0x3b')][a98_0x1a87('0x29')]instanceof Array?this[a98_0x1a87('0x44')][a98_0x1a87('0x3b')][a98_0x1a87('0x29')][0x0][a98_0x1a87('0x51')]:this[a98_0x1a87('0x44')][a98_0x1a87('0x3b')][a98_0x1a87('0x29')][a98_0x1a87('0x51')])[a98_0x1a87('0x3d')](()=>{}),!_0x219bae['document'][a98_0x1a87('0x35')][a98_0x1a87('0x25')]&&(_0x219bae[a98_0x1a87('0x7a')]&&_0x219bae[a98_0x1a87('0x7a')][a98_0x1a87('0x53')][a98_0x1a87('0x2e')]()),_0x219bae[a98_0x1a87('0x35')][a98_0x1a87('0x4f')][a98_0x1a87('0x32')]({'embed':{'color':tesseract_1['Constants'][a98_0x1a87('0x4a')]['PINK'],'title':a98_0x1a87('0x45')}})[a98_0x1a87('0x3d')](()=>{});},this['dispatcherFinishHandler']=_0x3e166f=>{_0x3e166f['music'][a98_0x1a87('0x41')]=![],_0x3e166f['music'][a98_0x1a87('0x4b')]=[],_0x3e166f[a98_0x1a87('0x35')][a98_0x1a87('0x5f')][a98_0x1a87('0x4c')]&&_0x3e166f[a98_0x1a87('0x35')][a98_0x1a87('0x55')][a98_0x1a87('0x73')](_0x3e166f[a98_0x1a87('0x35')][a98_0x1a87('0x5f')][a98_0x1a87('0x69')]()),!_0x3e166f['music'][a98_0x1a87('0x5f')][a98_0x1a87('0x4c')]&&_0x3e166f[a98_0x1a87('0x35')][a98_0x1a87('0x78')]&&(_0x3e166f[a98_0x1a87('0x35')][a98_0x1a87('0x5f')]=_0x3e166f[a98_0x1a87('0x35')]['history'],_0x3e166f[a98_0x1a87('0x35')][a98_0x1a87('0x55')]=[]),this[a98_0x1a87('0x38')](_0x3e166f);},this[a98_0x1a87('0x2')]=async(_0x4e312e,_0x34f604)=>{const _0x502027=_0x4e312e[a98_0x1a87('0x39')];if(!_0x502027['document'][a98_0x1a87('0x35')]||!_0x502027[a98_0x1a87('0x4e')][a98_0x1a87('0x35')][a98_0x1a87('0x60')])return await _0x4e312e[a98_0x1a87('0x53')]['send']({'embed':{'color':tesseract_1[a98_0x1a87('0x5e')][a98_0x1a87('0x4a')][a98_0x1a87('0x34')],'description':this[a98_0x1a87('0x44')]['locale'][a98_0x1a87('0x3a')](_0x4e312e['guild'][a98_0x1a87('0x4e')][a98_0x1a87('0x65')],'errors',constants['isPublicBastion'](_0x4e312e[a98_0x1a87('0xf')])?a98_0x1a87('0x61'):'musicDisabled')}})[a98_0x1a87('0x3d')](()=>{});const _0x3d64ae=_0x34f604['_']['join']('\x20'),_0x485a95=_0x3d64ae[a98_0x1a87('0x4c')]?await this['getSongInfo'](_0x3d64ae):null,_0x10cab7=_0x34f604['link']?_0x34f604[a98_0x1a87('0x15')][a98_0x1a87('0x2c')]:_0x485a95?_0x485a95[a98_0x1a87('0x1a')]||_0x485a95[a98_0x1a87('0x12')]:null;if(!_0x10cab7)throw new errors[(a98_0x1a87('0x22'))](errors[a98_0x1a87('0x64')][a98_0x1a87('0x47')],this[a98_0x1a87('0x54')]);_0x502027[a98_0x1a87('0x35')]['textChannel']=_0x4e312e['guild'][a98_0x1a87('0x33')][a98_0x1a87('0x6')][a98_0x1a87('0x52')](_0x502027['document']['music'][a98_0x1a87('0x46')])?_0x4e312e['guild'][a98_0x1a87('0x33')][a98_0x1a87('0x6')][a98_0x1a87('0x3f')](_0x502027[a98_0x1a87('0x4e')][a98_0x1a87('0x35')][a98_0x1a87('0x46')]):_0x4e312e['channel'],_0x502027[a98_0x1a87('0x35')][a98_0x1a87('0x1d')]=_0x4e312e['guild'][a98_0x1a87('0x7a')]&&_0x4e312e['guild'][a98_0x1a87('0x7a')][a98_0x1a87('0x50')]?_0x4e312e[a98_0x1a87('0x39')][a98_0x1a87('0x7a')][a98_0x1a87('0x53')]:_0x4e312e[a98_0x1a87('0x39')]['channels'][a98_0x1a87('0x6')]['filter'](_0x39599c=>_0x39599c[a98_0x1a87('0x7')]==='voice')[a98_0x1a87('0x52')](_0x502027[a98_0x1a87('0x4e')][a98_0x1a87('0x35')][a98_0x1a87('0x67')])?_0x4e312e[a98_0x1a87('0x39')][a98_0x1a87('0x33')][a98_0x1a87('0x6')]['filter'](_0x2b3468=>_0x2b3468[a98_0x1a87('0x7')]===a98_0x1a87('0x7a'))['get'](_0x502027[a98_0x1a87('0x4e')][a98_0x1a87('0x35')]['voiceChannelId']):_0x4e312e['member']['isMusicMaster']()?_0x4e312e[a98_0x1a87('0x19')][a98_0x1a87('0x7a')][a98_0x1a87('0x53')]:null;if(!_0x502027['music'][a98_0x1a87('0x1d')])return await _0x4e312e[a98_0x1a87('0x53')]['send']({'embed':{'color':tesseract_1['Constants'][a98_0x1a87('0x4a')]['RED'],'description':this[a98_0x1a87('0x44')][a98_0x1a87('0x17')][a98_0x1a87('0x3a')](_0x4e312e['guild'][a98_0x1a87('0x4e')][a98_0x1a87('0x65')],'errors',_0x4e312e[a98_0x1a87('0x19')][a98_0x1a87('0x4d')]()?a98_0x1a87('0x2d'):a98_0x1a87('0xe'))}})[a98_0x1a87('0x3d')](()=>{});if(!_0x502027[a98_0x1a87('0x35')][a98_0x1a87('0x1d')][a98_0x1a87('0x9')])return await _0x4e312e[a98_0x1a87('0x53')]['send']({'embed':{'color':tesseract_1[a98_0x1a87('0x5e')]['COLORS'][a98_0x1a87('0x34')],'description':this['client'][a98_0x1a87('0x17')]['getString'](_0x4e312e[a98_0x1a87('0x39')][a98_0x1a87('0x4e')][a98_0x1a87('0x65')],'errors','unjoinable',_0x502027['music'][a98_0x1a87('0x1d')][a98_0x1a87('0x54')])}})[a98_0x1a87('0x3d')](()=>{});if(!_0x502027[a98_0x1a87('0x35')][a98_0x1a87('0x1d')][a98_0x1a87('0x14')])return await _0x4e312e[a98_0x1a87('0x53')][a98_0x1a87('0x32')]({'embed':{'color':tesseract_1[a98_0x1a87('0x5e')][a98_0x1a87('0x4a')]['RED'],'description':this['client'][a98_0x1a87('0x17')][a98_0x1a87('0x3a')](_0x4e312e[a98_0x1a87('0x39')][a98_0x1a87('0x4e')][a98_0x1a87('0x65')],'errors','unspeakable',_0x502027[a98_0x1a87('0x35')][a98_0x1a87('0x1d')]['name'])}})[a98_0x1a87('0x3d')](()=>{});const _0x274f7b=await _0x502027[a98_0x1a87('0x35')][a98_0x1a87('0x1d')][a98_0x1a87('0x79')]();_0x274f7b['on']('error',tesseract_1[a98_0x1a87('0x72')][a98_0x1a87('0x30')]),_0x274f7b['on']('failed',tesseract_1[a98_0x1a87('0x72')]['error']),_0x4e312e['guild']['me'][a98_0x1a87('0x7a')][a98_0x1a87('0x43')](![])[a98_0x1a87('0x3d')](()=>{}),_0x4e312e[a98_0x1a87('0x39')]['me'][a98_0x1a87('0x7a')][a98_0x1a87('0x3')](!![])[a98_0x1a87('0x3d')](()=>{});const _0x13adb6=uuid_1['v4'](),_0x25c0ee=youtube(_0x10cab7,['--ignore-errors',a98_0x1a87('0x5'),a98_0x1a87('0x13'),a98_0x1a87('0x36'),a98_0x1a87('0x6e'),a98_0x1a87('0x6b'),a98_0x1a87('0x66'),a98_0x1a87('0x40'),a98_0x1a87('0xd'),a98_0x1a87('0x31'),a98_0x1a87('0x6a')],{});_0x25c0ee['on']('info',_0xc0d66f=>this['streamInfoHandler'](_0x502027,{..._0xc0d66f,'id':_0x13adb6,'requester':_0x4e312e[a98_0x1a87('0xf')]['id']})),_0x25c0ee['on'](a98_0x1a87('0xc'),()=>this[a98_0x1a87('0x48')](_0x502027)),_0x25c0ee['on']('error',()=>{_0x4e312e[a98_0x1a87('0x53')][a98_0x1a87('0x32')]({'embed':{'color':tesseract_1[a98_0x1a87('0x5e')][a98_0x1a87('0x4a')][a98_0x1a87('0x34')],'description':this[a98_0x1a87('0x44')][a98_0x1a87('0x17')][a98_0x1a87('0x3a')](_0x4e312e[a98_0x1a87('0x39')][a98_0x1a87('0x4e')][a98_0x1a87('0x65')],a98_0x1a87('0x28'),'musicDownloadError')}})[a98_0x1a87('0x3d')](()=>{});}),await fs[a98_0x1a87('0xb')][a98_0x1a87('0x70')](this[a98_0x1a87('0x10')]+_0x4e312e[a98_0x1a87('0x39')]['id']+'/',{'recursive':!![]})[a98_0x1a87('0x3d')](tesseract_1['Logger'][a98_0x1a87('0x30')]),_0x25c0ee[a98_0x1a87('0x16')](fs[a98_0x1a87('0x5b')](this[a98_0x1a87('0x10')]+_0x4e312e[a98_0x1a87('0x39')]['id']+'/'+_0x13adb6+a98_0x1a87('0x6c')));},this[a98_0x1a87('0x10')]=a98_0x1a87('0x62');}['getSongInfo'](_0x2665a4){return new Promise((_0x3490f3,_0x2eb369)=>youtube[a98_0x1a87('0x71')](a98_0x1a87('0x74')+_0x2665a4,[a98_0x1a87('0x0'),'--force-ipv4','--geo-bypass-country=US','--no-playlist',a98_0x1a87('0x6e'),'--quiet',a98_0x1a87('0x66'),a98_0x1a87('0x40'),a98_0x1a87('0xd'),a98_0x1a87('0x31'),a98_0x1a87('0x6a')],(_0x55f187,_0xd46f6f)=>{if(_0x55f187)return _0x2eb369(_0x55f187);return _0x3490f3(_0xd46f6f);}));}};
const a90_0x3851=['creator','musicDisabled','queue','--geo-bypass-country=US','uuid','--no-cache-dir','track','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','unspeakable','rmdir','length','Added\x20to\x20Queue','webpage_url','--user-agent=Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_0)\x20AppleWebKit/604.1\x20(KHTML,\x20like\x20Gecko)\x20Version/13.0.4\x20Safari/604.1','unjoinable','uploader','thumbnail','Playing','test','connection','startStreamDispatcher','play','alt_title','client','PINK','send','musicDirectory','play\x20Remember\x20The\x20Name\x20by\x20Ed\x20Sheeran','requester','Up\x20Next','leave','cache','./music/','textChannel','setActivity','playing','INVALID_COMMAND_SYNTAX','configurations','skipVotes','It\x20allows\x20you\x20to\x20play\x20a\x20music\x20in\x20the\x20server,\x20from\x20the\x20given\x20queury\x20or\x20from\x20any\x20supported\x20source.','language','promises','--youtube-skip-dash-manifest','ArgumentTypes','constructor','end','musicDisabledPublic','../../utils/errors','voiceChannel','getString','getSongInfo','catch','ytsearch:','author','RED','getInfo','dispatcherFinishHandler','album','push','@bastion/tesseract','return\x20/\x22\x20+\x20this\x20+\x20\x22/','artist','error','channel','shift','youtube-dl','--no-playlist','pipe','link','channels','get','filter','play\x20--link\x20https://www.youtube.com/watch?v=dQw4w9WgXcQ','Artist','--format=bestaudio[protocol^=http]','url','activity','finish','member','\x20•\x20','errors','voice','enabled','DiscordError','name','join','--ignore-errors','music','duration','history','apply','exports','--quiet','guild','textChannelId','keepAlive','streamInfoHandler','title','compile','user','Command','Logger','locale','../../utils/constants','type','URL','--force-ipv4','.mp3','COLORS','joinable','has','streamEndHandler','Constants','voiceChannelId','document','members','href','isMusicMaster'];(function(_0x4d76bc,_0x385114){const _0x2668f7=function(_0x1e8c7a){while(--_0x1e8c7a){_0x4d76bc['push'](_0x4d76bc['shift']());}};const _0x299c75=function(){const _0x1abf9b={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x9017e8,_0x31d7b5,_0x229dd3,_0x2c1d2f){_0x2c1d2f=_0x2c1d2f||{};let _0x481f30=_0x31d7b5+'='+_0x229dd3;let _0x2f806f=0x0;for(let _0xaa1b6b=0x0,_0x172010=_0x9017e8['length'];_0xaa1b6b<_0x172010;_0xaa1b6b++){const _0x2238b9=_0x9017e8[_0xaa1b6b];_0x481f30+=';\x20'+_0x2238b9;const _0x2f7912=_0x9017e8[_0x2238b9];_0x9017e8['push'](_0x2f7912);_0x172010=_0x9017e8['length'];if(_0x2f7912!==!![]){_0x481f30+='='+_0x2f7912;}}_0x2c1d2f['cookie']=_0x481f30;},'removeCookie':function(){return'dev';},'getCookie':function(_0x59dc3a,_0x2d7fd8){_0x59dc3a=_0x59dc3a||function(_0xafdb59){return _0xafdb59;};const _0x1807d0=_0x59dc3a(new RegExp('(?:^|;\x20)'+_0x2d7fd8['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x447392=function(_0x24b335,_0x624540){_0x24b335(++_0x624540);};_0x447392(_0x2668f7,_0x385114);return _0x1807d0?decodeURIComponent(_0x1807d0[0x1]):undefined;}};const _0x1ece08=function(){const _0x175f37=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x175f37['test'](_0x1abf9b['removeCookie']['toString']());};_0x1abf9b['updateCookie']=_0x1ece08;let _0x44949c='';const _0x32f521=_0x1abf9b['updateCookie']();if(!_0x32f521){_0x1abf9b['setCookie'](['*'],'counter',0x1);}else if(_0x32f521){_0x44949c=_0x1abf9b['getCookie'](null,'counter');}else{_0x1abf9b['removeCookie']();}};_0x299c75();}(a90_0x3851,0x1a9));const a90_0x2668=function(_0x4d76bc,_0x385114){_0x4d76bc=_0x4d76bc-0x0;let _0x2668f7=a90_0x3851[_0x4d76bc];return _0x2668f7;};const a90_0x1abf9b=function(){let _0x33e83c=!![];return function(_0x113bd3,_0x14e9f1){const _0x33379d=_0x33e83c?function(){if(_0x14e9f1){const _0x1949a5=_0x14e9f1[a90_0x2668('0x13')](_0x113bd3,arguments);_0x14e9f1=null;return _0x1949a5;}}:function(){};_0x33e83c=![];return _0x33379d;};}();const a90_0x1e8c7a=a90_0x1abf9b(this,function(){const _0x32734c=function(){const _0x3eec02=_0x32734c[a90_0x2668('0x5b')](a90_0x2668('0x6b'))()[a90_0x2668('0x1b')](a90_0x2668('0x36'));return!_0x3eec02[a90_0x2668('0x41')](a90_0x1e8c7a);};return _0x32734c();});a90_0x1e8c7a();'use strict';const fs=require('fs');const tesseract_1=require(a90_0x2668('0x6a'));const youtube=require(a90_0x2668('0x70'));const uuid_1=require(a90_0x2668('0x33'));const constants=require(a90_0x2668('0x20'));const errors=require(a90_0x2668('0x5e'));module[a90_0x2668('0x14')]=class Play extends tesseract_1[a90_0x2668('0x1d')]{constructor(){super(a90_0x2668('0x44'),{'description':a90_0x2668('0x56'),'triggers':[],'arguments':{'alias':{'link':'l'},'coerce':{'link':tesseract_1[a90_0x2668('0x29')][a90_0x2668('0x5a')][a90_0x2668('0x22')]}},'scope':a90_0x2668('0x16'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[],'syntax':[a90_0x2668('0x4a'),a90_0x2668('0x1')]});this[a90_0x2668('0x19')]=(_0x1adf7f,_0x14ec15)=>{const _0x18b84a=_0x14ec15['id'];const _0x3a60cc=_0x14ec15[a90_0x2668('0x35')]||_0x14ec15[a90_0x2668('0x1a')]||_0x14ec15['fulltitle']||_0x14ec15[a90_0x2668('0x45')];const _0x367ec8=_0x14ec15[a90_0x2668('0x68')];const _0x2f4d05=_0x14ec15[a90_0x2668('0x6c')]||_0x14ec15[a90_0x2668('0x2f')]||_0x14ec15[a90_0x2668('0x3e')];const _0x590278=_0x14ec15['duration'];const _0x564294=_0x14ec15[a90_0x2668('0x3f')];const _0x4d4e3b=_0x14ec15['requester'];_0x1adf7f['music']['queue']['push']({'id':_0x18b84a,'track':_0x3a60cc,'album':_0x367ec8,'artist':_0x2f4d05,'duration':_0x590278,'thumbnail':_0x564294,'requester':_0x4d4e3b});const _0x5ea553=[];if(_0x367ec8){_0x5ea553[a90_0x2668('0x69')]({'name':'Album','value':_0x367ec8,'inline':!![]});}if(_0x2f4d05){_0x5ea553['push']({'name':a90_0x2668('0x2'),'value':_0x2f4d05,'inline':!![]});}_0x1adf7f['music'][a90_0x2668('0x50')]['send']({'embed':{'color':tesseract_1[a90_0x2668('0x29')][a90_0x2668('0x25')][a90_0x2668('0x47')],'title':a90_0x2668('0x3a'),'description':_0x3a60cc,'fields':_0x5ea553,'thumbnail':{'url':_0x564294},'footer':{'text':(_0x1adf7f[a90_0x2668('0x10')][a90_0x2668('0x31')]['length']?'#'+(_0x1adf7f[a90_0x2668('0x10')]['queue'][a90_0x2668('0x39')]-0x1):a90_0x2668('0x4c'))+(a90_0x2668('0x8')+_0x590278+a90_0x2668('0x8')+(_0x1adf7f[a90_0x2668('0x2c')][a90_0x2668('0x4e')]['get'](_0x4d4e3b)[a90_0x2668('0x1c')]['tag']||_0x4d4e3b))}}})[a90_0x2668('0x62')](()=>{});};this[a90_0x2668('0x28')]=_0x5cc55b=>{if(!_0x5cc55b[a90_0x2668('0x10')][a90_0x2668('0x52')]){this['startStreamDispatcher'](_0x5cc55b);}};this[a90_0x2668('0x43')]=_0x894cf1=>{if(_0x894cf1[a90_0x2668('0x10')][a90_0x2668('0x31')][a90_0x2668('0x39')]){const _0x1006f4=_0x894cf1[a90_0x2668('0x10')][a90_0x2668('0x31')][0x0];const _0xed5686=[];if(_0x1006f4[a90_0x2668('0x68')]){_0xed5686[a90_0x2668('0x69')]({'name':'Album','value':_0x1006f4['album'],'inline':!![]});}if(_0x1006f4[a90_0x2668('0x6c')]){_0xed5686[a90_0x2668('0x69')]({'name':a90_0x2668('0x2'),'value':_0x1006f4[a90_0x2668('0x6c')],'inline':!![]});}_0x894cf1['music'][a90_0x2668('0x50')][a90_0x2668('0x48')]({'embed':{'color':tesseract_1['Constants']['COLORS'][a90_0x2668('0x47')],'title':a90_0x2668('0x40'),'description':_0x1006f4[a90_0x2668('0x35')],'fields':_0xed5686,'thumbnail':{'url':_0x1006f4[a90_0x2668('0x3f')]},'footer':{'text':_0x1006f4[a90_0x2668('0x11')]+'\x20•\x20'+(_0x894cf1['members'][a90_0x2668('0x4e')][a90_0x2668('0x75')](_0x1006f4['requester'])[a90_0x2668('0x1c')]['tag']||_0x1006f4[a90_0x2668('0x4b')])}}})[a90_0x2668('0x62')](()=>{});_0x894cf1['music'][a90_0x2668('0x52')]=!![];const _0x192289=_0x894cf1['voice']&&_0x894cf1[a90_0x2668('0xa')]['connection'][a90_0x2668('0x44')](this[a90_0x2668('0x49')]+_0x894cf1['id']+'/'+_0x1006f4['id']+'.mp3');this[a90_0x2668('0x46')][a90_0x2668('0x1c')]['setActivity']({'name':_0x1006f4[a90_0x2668('0x35')],'type':'LISTENING'})[a90_0x2668('0x62')](()=>{});_0x192289['on'](a90_0x2668('0x6'),()=>this['dispatcherFinishHandler'](_0x894cf1));_0x192289['on'](a90_0x2668('0x6d'),_0x3d8218=>{tesseract_1[a90_0x2668('0x1e')][a90_0x2668('0x6d')](_0x3d8218);this[a90_0x2668('0x67')](_0x894cf1);});}else{_0x894cf1[a90_0x2668('0x10')][a90_0x2668('0x31')]=[];_0x894cf1[a90_0x2668('0x10')][a90_0x2668('0x12')]=[];fs[a90_0x2668('0x58')][a90_0x2668('0x38')](this[a90_0x2668('0x49')]+_0x894cf1['id'],{'recursive':!![]})['catch'](()=>{});this[a90_0x2668('0x46')][a90_0x2668('0x1c')][a90_0x2668('0x51')](this[a90_0x2668('0x46')][a90_0x2668('0x54')]['presence'][a90_0x2668('0x5')])[a90_0x2668('0x62')](()=>{});if(!_0x894cf1['document'][a90_0x2668('0x10')][a90_0x2668('0x18')]){_0x894cf1['voice']&&_0x894cf1[a90_0x2668('0xa')][a90_0x2668('0x6e')][a90_0x2668('0x4d')]();}_0x894cf1['music'][a90_0x2668('0x50')][a90_0x2668('0x48')]({'embed':{'color':tesseract_1['Constants'][a90_0x2668('0x25')][a90_0x2668('0x47')],'title':'Stopping\x20Playback'}})[a90_0x2668('0x62')](()=>{});}};this[a90_0x2668('0x67')]=_0x1c6e0d=>{_0x1c6e0d['music'][a90_0x2668('0x52')]=![];_0x1c6e0d[a90_0x2668('0x10')][a90_0x2668('0x55')]=[];if(_0x1c6e0d[a90_0x2668('0x10')][a90_0x2668('0x31')]['length']){_0x1c6e0d[a90_0x2668('0x10')][a90_0x2668('0x12')][a90_0x2668('0x69')](_0x1c6e0d[a90_0x2668('0x10')][a90_0x2668('0x31')][a90_0x2668('0x6f')]());}if(!_0x1c6e0d[a90_0x2668('0x10')][a90_0x2668('0x31')][a90_0x2668('0x39')]&&_0x1c6e0d['music']['repeat']){_0x1c6e0d[a90_0x2668('0x10')][a90_0x2668('0x31')]=_0x1c6e0d[a90_0x2668('0x10')][a90_0x2668('0x12')];_0x1c6e0d[a90_0x2668('0x10')][a90_0x2668('0x12')]=[];}this[a90_0x2668('0x43')](_0x1c6e0d);};this['exec']=async(_0x20694a,_0x1d22da)=>{const _0x35937d=_0x20694a['guild'];if(!_0x35937d['document'][a90_0x2668('0x10')]||!_0x35937d[a90_0x2668('0x2b')][a90_0x2668('0x10')][a90_0x2668('0xb')]){return await _0x20694a[a90_0x2668('0x6e')][a90_0x2668('0x48')]({'embed':{'color':tesseract_1[a90_0x2668('0x29')]['COLORS'][a90_0x2668('0x65')],'description':this['client']['locale'][a90_0x2668('0x60')](_0x20694a['guild'][a90_0x2668('0x2b')][a90_0x2668('0x57')],a90_0x2668('0x9'),constants['isPublicBastion'](_0x20694a[a90_0x2668('0x64')])?a90_0x2668('0x5d'):a90_0x2668('0x30'))}})[a90_0x2668('0x62')](()=>{});}const _0x426dfc=_0x1d22da['_'][a90_0x2668('0xe')]('\x20');const _0x18c7cf=_0x426dfc[a90_0x2668('0x39')]?await this['getSongInfo'](_0x426dfc):null;const _0x4156eb=_0x1d22da[a90_0x2668('0x73')]?_0x1d22da[a90_0x2668('0x73')][a90_0x2668('0x2d')]:_0x18c7cf?_0x18c7cf[a90_0x2668('0x3b')]||_0x18c7cf[a90_0x2668('0x4')]:null;if(!_0x4156eb)throw new errors[(a90_0x2668('0xc'))](errors['BASTION_ERROR_TYPE'][a90_0x2668('0x53')],this[a90_0x2668('0xd')]);_0x35937d[a90_0x2668('0x10')]['textChannel']=_0x20694a['guild'][a90_0x2668('0x74')]['cache'][a90_0x2668('0x27')](_0x35937d[a90_0x2668('0x2b')][a90_0x2668('0x10')][a90_0x2668('0x17')])?_0x20694a[a90_0x2668('0x16')][a90_0x2668('0x74')]['cache'][a90_0x2668('0x75')](_0x35937d[a90_0x2668('0x2b')]['music']['textChannelId']):_0x20694a[a90_0x2668('0x6e')];_0x35937d[a90_0x2668('0x10')][a90_0x2668('0x5f')]=_0x20694a[a90_0x2668('0x16')]['voice']&&_0x20694a[a90_0x2668('0x16')][a90_0x2668('0xa')][a90_0x2668('0x42')]?_0x20694a[a90_0x2668('0x16')][a90_0x2668('0xa')]['channel']:_0x20694a['guild']['channels'][a90_0x2668('0x4e')][a90_0x2668('0x0')](_0x2c2b44=>_0x2c2b44[a90_0x2668('0x21')]===a90_0x2668('0xa'))['has'](_0x35937d[a90_0x2668('0x2b')]['music'][a90_0x2668('0x2a')])?_0x20694a[a90_0x2668('0x16')][a90_0x2668('0x74')][a90_0x2668('0x4e')]['filter'](_0x886715=>_0x886715[a90_0x2668('0x21')]===a90_0x2668('0xa'))[a90_0x2668('0x75')](_0x35937d[a90_0x2668('0x2b')][a90_0x2668('0x10')][a90_0x2668('0x2a')]):_0x20694a['member'][a90_0x2668('0x2e')]()?_0x20694a[a90_0x2668('0x7')][a90_0x2668('0xa')][a90_0x2668('0x6e')]:null;if(!_0x35937d[a90_0x2668('0x10')][a90_0x2668('0x5f')]){return await _0x20694a[a90_0x2668('0x6e')]['send']({'embed':{'color':tesseract_1[a90_0x2668('0x29')][a90_0x2668('0x25')][a90_0x2668('0x65')],'description':this[a90_0x2668('0x46')]['locale']['getString'](_0x20694a['guild'][a90_0x2668('0x2b')][a90_0x2668('0x57')],'errors',_0x20694a['member'][a90_0x2668('0x2e')]()?'noMusicChannelsAsOwner':'noMusicChannels')}})[a90_0x2668('0x62')](()=>{});}if(!_0x35937d['music'][a90_0x2668('0x5f')][a90_0x2668('0x26')]){return await _0x20694a['channel']['send']({'embed':{'color':tesseract_1[a90_0x2668('0x29')][a90_0x2668('0x25')][a90_0x2668('0x65')],'description':this[a90_0x2668('0x46')][a90_0x2668('0x1f')][a90_0x2668('0x60')](_0x20694a[a90_0x2668('0x16')][a90_0x2668('0x2b')][a90_0x2668('0x57')],a90_0x2668('0x9'),a90_0x2668('0x3d'),_0x35937d[a90_0x2668('0x10')][a90_0x2668('0x5f')]['name'])}})[a90_0x2668('0x62')](()=>{});}if(!_0x35937d[a90_0x2668('0x10')][a90_0x2668('0x5f')]['speakable']){return await _0x20694a[a90_0x2668('0x6e')][a90_0x2668('0x48')]({'embed':{'color':tesseract_1['Constants'][a90_0x2668('0x25')][a90_0x2668('0x65')],'description':this[a90_0x2668('0x46')]['locale'][a90_0x2668('0x60')](_0x20694a[a90_0x2668('0x16')][a90_0x2668('0x2b')][a90_0x2668('0x57')],a90_0x2668('0x9'),a90_0x2668('0x37'),_0x35937d[a90_0x2668('0x10')][a90_0x2668('0x5f')][a90_0x2668('0xd')])}})['catch'](()=>{});}const _0x3ceab5=await _0x35937d[a90_0x2668('0x10')]['voiceChannel'][a90_0x2668('0xe')]();_0x3ceab5['on']('error',tesseract_1[a90_0x2668('0x1e')]['error']);_0x3ceab5['on']('failed',tesseract_1[a90_0x2668('0x1e')][a90_0x2668('0x6d')]);_0x20694a[a90_0x2668('0x16')]['me'][a90_0x2668('0xa')]['setMute'](![])[a90_0x2668('0x62')](()=>{});_0x20694a['guild']['me'][a90_0x2668('0xa')]['setDeaf'](!![])[a90_0x2668('0x62')](()=>{});const _0x8b18f1=uuid_1['v4']();const _0x5d47cb=youtube(_0x4156eb,[a90_0x2668('0xf'),a90_0x2668('0x23'),a90_0x2668('0x32'),a90_0x2668('0x71'),a90_0x2668('0x34'),a90_0x2668('0x15'),'--no-warnings',a90_0x2668('0x3c'),'--referer=https://bastion.traction.one','--format=bestaudio[protocol^=http]',a90_0x2668('0x59')],{});_0x5d47cb['on']('info',_0x470907=>this[a90_0x2668('0x19')](_0x35937d,{..._0x470907,'id':_0x8b18f1,'requester':_0x20694a[a90_0x2668('0x64')]['id']}));_0x5d47cb['on'](a90_0x2668('0x5c'),()=>this[a90_0x2668('0x28')](_0x35937d));_0x5d47cb['on'](a90_0x2668('0x6d'),()=>{_0x20694a[a90_0x2668('0x6e')]['send']({'embed':{'color':tesseract_1[a90_0x2668('0x29')][a90_0x2668('0x25')][a90_0x2668('0x65')],'description':this[a90_0x2668('0x46')][a90_0x2668('0x1f')][a90_0x2668('0x60')](_0x20694a[a90_0x2668('0x16')][a90_0x2668('0x2b')][a90_0x2668('0x57')],a90_0x2668('0x9'),'musicDownloadError')}})['catch'](()=>{});});await fs['promises']['mkdir'](this['musicDirectory']+_0x20694a['guild']['id']+'/',{'recursive':!![]})[a90_0x2668('0x62')](tesseract_1[a90_0x2668('0x1e')][a90_0x2668('0x6d')]);_0x5d47cb[a90_0x2668('0x72')](fs['createWriteStream'](this['musicDirectory']+_0x20694a[a90_0x2668('0x16')]['id']+'/'+_0x8b18f1+a90_0x2668('0x24')));};this[a90_0x2668('0x49')]=a90_0x2668('0x4f');}[a90_0x2668('0x61')](_0x13dcd3){return new Promise((_0x51b1b9,_0x5c79a3)=>youtube[a90_0x2668('0x66')](a90_0x2668('0x63')+_0x13dcd3,[a90_0x2668('0xf'),'--force-ipv4',a90_0x2668('0x32'),a90_0x2668('0x71'),'--no-cache-dir',a90_0x2668('0x15'),'--no-warnings',a90_0x2668('0x3c'),'--referer=https://bastion.traction.one',a90_0x2668('0x3'),a90_0x2668('0x59')],(_0x201668,_0x3fe064)=>{if(_0x201668)return _0x5c79a3(_0x201668);return _0x51b1b9(_0x3fe064);}));}};
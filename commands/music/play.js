const a530_0x4896=['repeat','channels','exports','--force-ipv4','client','BASTION_ERROR_TYPE','Album','Playing','textChannelId','send','keepAlive','joinable','finish','length','Command','cache','catch','COLORS','failed','join','URL','getInfo','document','fulltitle','musicDisabled','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','Artist','unspeakable','createWriteStream','play\x20--link\x20https://www.youtube.com/watch?v=dQw4w9WgXcQ','--user-agent=Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_0)\x20AppleWebKit/604.1\x20(KHTML,\x20like\x20Gecko)\x20Version/13.0.4\x20Safari/604.1','Constants','getSongInfo','leave','push','artist','.mp3','Added\x20to\x20Queue','../../utils/errors','Logger','promises','\x20â€¢\x20','members','LISTENING','--quiet','musicDirectory','locale','activity','startStreamDispatcher','user','language','It\x20allows\x20you\x20to\x20play\x20a\x20music\x20in\x20the\x20server,\x20from\x20the\x20given\x20queury\x20or\x20from\x20any\x20supported\x20source.','requester','voice','isPublicBastion','voiceChannelId','setMute','skipVotes','track','dispatcherFinishHandler','voiceChannel','info','streamEndHandler','DiscordError','musicDisabledPublic','tag','isMusicMaster','shift','playing','ytsearch:','streamInfoHandler','queue','--format=bestaudio[protocol^=http]','./music/','duration','youtube-dl','--referer=https://bastion.traction.one','play\x20Remember\x20The\x20Name\x20by\x20Ed\x20Sheeran','filter','connection','--no-cache-dir','--no-playlist','exec','--no-warnings','--ignore-errors','setActivity','setDeaf','webpage_url','errors','rmdir','error','presence','apply','--youtube-skip-dash-manifest','type','musicDownloadError','play','history','channel','author','name','configurations','test','music','PINK','title','compile','thumbnail','end','noMusicChannelsAsOwner','has','enabled','get','return\x20/\x22\x20+\x20this\x20+\x20\x22/','alt_title','pipe','getString','RED','album','textChannel','--geo-bypass-country=US','guild'];(function(_0x429035,_0x4896cd){const _0x22e31c=function(_0x302dba){while(--_0x302dba){_0x429035['push'](_0x429035['shift']());}};const _0x4f0263=function(){const _0x50888a={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x456b38,_0x190f96,_0x23a833,_0x36a541){_0x36a541=_0x36a541||{};let _0x5f27c4=_0x190f96+'='+_0x23a833;let _0xb12f28=0x0;for(let _0x57a9cf=0x0,_0x5a82ca=_0x456b38['length'];_0x57a9cf<_0x5a82ca;_0x57a9cf++){const _0x2606a1=_0x456b38[_0x57a9cf];_0x5f27c4+=';\x20'+_0x2606a1;const _0xfa0645=_0x456b38[_0x2606a1];_0x456b38['push'](_0xfa0645);_0x5a82ca=_0x456b38['length'];if(_0xfa0645!==!![]){_0x5f27c4+='='+_0xfa0645;}}_0x36a541['cookie']=_0x5f27c4;},'removeCookie':function(){return'dev';},'getCookie':function(_0x180c09,_0xb0a185){_0x180c09=_0x180c09||function(_0x5a23ea){return _0x5a23ea;};const _0x43547c=_0x180c09(new RegExp('(?:^|;\x20)'+_0xb0a185['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x38e799=function(_0xb7d197,_0x25ee6a){_0xb7d197(++_0x25ee6a);};_0x38e799(_0x22e31c,_0x4896cd);return _0x43547c?decodeURIComponent(_0x43547c[0x1]):undefined;}};const _0x2eb6b1=function(){const _0x135dda=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x135dda['test'](_0x50888a['removeCookie']['toString']());};_0x50888a['updateCookie']=_0x2eb6b1;let _0x53c2c='';const _0x5ef92d=_0x50888a['updateCookie']();if(!_0x5ef92d){_0x50888a['setCookie'](['*'],'counter',0x1);}else if(_0x5ef92d){_0x53c2c=_0x50888a['getCookie'](null,'counter');}else{_0x50888a['removeCookie']();}};_0x4f0263();}(a530_0x4896,0x17b));const a530_0x22e3=function(_0x429035,_0x4896cd){_0x429035=_0x429035-0x0;let _0x22e31c=a530_0x4896[_0x429035];return _0x22e31c;};const a530_0x50888a=function(){let _0x5e6f73=!![];return function(_0x35f6f9,_0x2e9d29){const _0x2face=_0x5e6f73?function(){if(_0x2e9d29){const _0x27866c=_0x2e9d29[a530_0x22e3('0x4f')](_0x35f6f9,arguments);_0x2e9d29=null;return _0x27866c;}}:function(){};_0x5e6f73=![];return _0x2face;};}();const a530_0x302dba=a530_0x50888a(this,function(){const _0x249b51=function(){const _0x5af337=_0x249b51['constructor'](a530_0x22e3('0x64'))()[a530_0x22e3('0x5d')](a530_0x22e3('0xc'));return!_0x5af337[a530_0x22e3('0x59')](a530_0x302dba);};return _0x249b51();});a530_0x302dba();'use strict';const fs=require('fs');const tesseract_1=require('@bastion/tesseract');const youtube=require(a530_0x22e3('0x3e'));const uuid_1=require('uuid');const constants=require('../../utils/constants');const errors=require(a530_0x22e3('0x19'));module[a530_0x22e3('0x6f')]=class Play extends tesseract_1[a530_0x22e3('0x1')]{constructor(){super(a530_0x22e3('0x53'),{'description':a530_0x22e3('0x26'),'triggers':[],'arguments':{'alias':{'link':'l'},'coerce':{'link':tesseract_1[a530_0x22e3('0x12')]['ArgumentTypes'][a530_0x22e3('0x7')]}},'scope':a530_0x22e3('0x6c'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[],'syntax':[a530_0x22e3('0x40'),a530_0x22e3('0x10')]});this[a530_0x22e3('0x39')]=(_0x46336f,_0x181757)=>{const _0x273526=_0x181757['id'];const _0x29748a=_0x181757[a530_0x22e3('0x2d')]||_0x181757[a530_0x22e3('0x5c')]||_0x181757[a530_0x22e3('0xa')]||_0x181757[a530_0x22e3('0x65')];const _0x10ae20=_0x181757['album'];const _0x584d83=_0x181757[a530_0x22e3('0x16')]||_0x181757['creator']||_0x181757['uploader'];const _0xf710a7=_0x181757[a530_0x22e3('0x3d')];const _0x5d41c5=_0x181757[a530_0x22e3('0x5e')];const _0x5c7a4c=_0x181757['requester'];_0x46336f[a530_0x22e3('0x5a')][a530_0x22e3('0x3a')][a530_0x22e3('0x15')]({'id':_0x273526,'track':_0x29748a,'album':_0x10ae20,'artist':_0x584d83,'duration':_0xf710a7,'thumbnail':_0x5d41c5,'requester':_0x5c7a4c});const _0xcfeafc=[];if(_0x10ae20){_0xcfeafc[a530_0x22e3('0x15')]({'name':a530_0x22e3('0x73'),'value':_0x10ae20,'inline':!![]});}if(_0x584d83){_0xcfeafc[a530_0x22e3('0x15')]({'name':a530_0x22e3('0xd'),'value':_0x584d83,'inline':!![]});}_0x46336f[a530_0x22e3('0x5a')][a530_0x22e3('0x6a')]['send']({'embed':{'color':tesseract_1[a530_0x22e3('0x12')][a530_0x22e3('0x4')][a530_0x22e3('0x5b')],'title':a530_0x22e3('0x18'),'description':_0x29748a,'fields':_0xcfeafc,'thumbnail':{'url':_0x5d41c5},'footer':{'text':(_0x46336f[a530_0x22e3('0x5a')][a530_0x22e3('0x3a')][a530_0x22e3('0x0')]?'#'+(_0x46336f['music'][a530_0x22e3('0x3a')][a530_0x22e3('0x0')]-0x1):'Up\x20Next')+(a530_0x22e3('0x1c')+_0xf710a7+a530_0x22e3('0x1c')+(_0x46336f[a530_0x22e3('0x1d')][a530_0x22e3('0x2')][a530_0x22e3('0x63')](_0x5c7a4c)[a530_0x22e3('0x24')][a530_0x22e3('0x34')]||_0x5c7a4c))}}})[a530_0x22e3('0x3')](()=>{});};this[a530_0x22e3('0x31')]=_0x231b2b=>{if(!_0x231b2b[a530_0x22e3('0x5a')][a530_0x22e3('0x37')]){this[a530_0x22e3('0x23')](_0x231b2b);}};this['startStreamDispatcher']=_0x341104=>{if(_0x341104[a530_0x22e3('0x5a')][a530_0x22e3('0x3a')]['length']){const _0x5f2dc2=_0x341104[a530_0x22e3('0x5a')][a530_0x22e3('0x3a')][0x0];const _0x399ed8=[];if(_0x5f2dc2[a530_0x22e3('0x69')]){_0x399ed8[a530_0x22e3('0x15')]({'name':'Album','value':_0x5f2dc2[a530_0x22e3('0x69')],'inline':!![]});}if(_0x5f2dc2[a530_0x22e3('0x16')]){_0x399ed8[a530_0x22e3('0x15')]({'name':'Artist','value':_0x5f2dc2['artist'],'inline':!![]});}_0x341104[a530_0x22e3('0x5a')][a530_0x22e3('0x6a')][a530_0x22e3('0x76')]({'embed':{'color':tesseract_1[a530_0x22e3('0x12')][a530_0x22e3('0x4')][a530_0x22e3('0x5b')],'title':a530_0x22e3('0x74'),'description':_0x5f2dc2['track'],'fields':_0x399ed8,'thumbnail':{'url':_0x5f2dc2[a530_0x22e3('0x5e')]},'footer':{'text':_0x5f2dc2['duration']+a530_0x22e3('0x1c')+(_0x341104[a530_0x22e3('0x1d')]['cache'][a530_0x22e3('0x63')](_0x5f2dc2[a530_0x22e3('0x27')])[a530_0x22e3('0x24')]['tag']||_0x5f2dc2[a530_0x22e3('0x27')])}}})[a530_0x22e3('0x3')](()=>{});_0x341104[a530_0x22e3('0x5a')][a530_0x22e3('0x37')]=!![];const _0x1458f9=_0x341104['voice']&&_0x341104['voice'][a530_0x22e3('0x42')][a530_0x22e3('0x53')](this[a530_0x22e3('0x20')]+_0x341104['id']+'/'+_0x5f2dc2['id']+'.mp3');this['client'][a530_0x22e3('0x24')]['setActivity']({'name':_0x5f2dc2[a530_0x22e3('0x2d')],'type':a530_0x22e3('0x1e')})[a530_0x22e3('0x3')](()=>{});_0x1458f9['on'](a530_0x22e3('0x79'),()=>this[a530_0x22e3('0x2e')](_0x341104));_0x1458f9['on'](a530_0x22e3('0x4d'),_0x3f0ef0=>{tesseract_1['Logger'][a530_0x22e3('0x4d')](_0x3f0ef0);this['dispatcherFinishHandler'](_0x341104);});}else{_0x341104[a530_0x22e3('0x5a')][a530_0x22e3('0x3a')]=[];_0x341104['music'][a530_0x22e3('0x54')]=[];fs[a530_0x22e3('0x1b')][a530_0x22e3('0x4c')](this['musicDirectory']+_0x341104['id'],{'recursive':!![]})[a530_0x22e3('0x3')](()=>{});this[a530_0x22e3('0x71')][a530_0x22e3('0x24')][a530_0x22e3('0x48')](this[a530_0x22e3('0x71')][a530_0x22e3('0x58')][a530_0x22e3('0x4e')][a530_0x22e3('0x22')])[a530_0x22e3('0x3')](()=>{});if(!_0x341104[a530_0x22e3('0x9')][a530_0x22e3('0x5a')][a530_0x22e3('0x77')]){_0x341104[a530_0x22e3('0x28')]&&_0x341104[a530_0x22e3('0x28')]['channel'][a530_0x22e3('0x14')]();}_0x341104[a530_0x22e3('0x5a')]['textChannel'][a530_0x22e3('0x76')]({'embed':{'color':tesseract_1[a530_0x22e3('0x12')][a530_0x22e3('0x4')]['PINK'],'title':'Stopping\x20Playback'}})[a530_0x22e3('0x3')](()=>{});}};this[a530_0x22e3('0x2e')]=_0x30c2db=>{_0x30c2db[a530_0x22e3('0x5a')][a530_0x22e3('0x37')]=![];_0x30c2db[a530_0x22e3('0x5a')][a530_0x22e3('0x2c')]=[];if(_0x30c2db[a530_0x22e3('0x5a')][a530_0x22e3('0x3a')][a530_0x22e3('0x0')]){_0x30c2db['music'][a530_0x22e3('0x54')][a530_0x22e3('0x15')](_0x30c2db['music'][a530_0x22e3('0x3a')][a530_0x22e3('0x36')]());}if(!_0x30c2db[a530_0x22e3('0x5a')][a530_0x22e3('0x3a')]['length']&&_0x30c2db[a530_0x22e3('0x5a')][a530_0x22e3('0x6d')]){_0x30c2db[a530_0x22e3('0x5a')]['queue']=_0x30c2db[a530_0x22e3('0x5a')][a530_0x22e3('0x54')];_0x30c2db[a530_0x22e3('0x5a')][a530_0x22e3('0x54')]=[];}this[a530_0x22e3('0x23')](_0x30c2db);};this[a530_0x22e3('0x45')]=async(_0xfba12f,_0x1cf7b3)=>{const _0x32dd47=_0xfba12f['guild'];if(!_0x32dd47['document'][a530_0x22e3('0x5a')]||!_0x32dd47[a530_0x22e3('0x9')][a530_0x22e3('0x5a')][a530_0x22e3('0x62')]){return await _0xfba12f[a530_0x22e3('0x55')][a530_0x22e3('0x76')]({'embed':{'color':tesseract_1['Constants'][a530_0x22e3('0x4')]['RED'],'description':this['client'][a530_0x22e3('0x21')][a530_0x22e3('0x67')](_0xfba12f['guild'][a530_0x22e3('0x9')][a530_0x22e3('0x25')],a530_0x22e3('0x4b'),constants[a530_0x22e3('0x29')](_0xfba12f['author'])?a530_0x22e3('0x33'):a530_0x22e3('0xb'))}})[a530_0x22e3('0x3')](()=>{});}const _0x5a9104=_0x1cf7b3['_'][a530_0x22e3('0x6')]('\x20');const _0x1b845b=_0x5a9104[a530_0x22e3('0x0')]?await this[a530_0x22e3('0x13')](_0x5a9104):null;const _0x3e1462=_0x1cf7b3['link']?_0x1cf7b3['link']['href']:_0x1b845b?_0x1b845b[a530_0x22e3('0x4a')]||_0x1b845b['url']:null;if(!_0x3e1462)throw new errors[(a530_0x22e3('0x32'))](errors[a530_0x22e3('0x72')]['INVALID_COMMAND_SYNTAX'],this['name']);_0x32dd47['music'][a530_0x22e3('0x6a')]=_0xfba12f[a530_0x22e3('0x6c')][a530_0x22e3('0x6e')][a530_0x22e3('0x2')][a530_0x22e3('0x61')](_0x32dd47[a530_0x22e3('0x9')][a530_0x22e3('0x5a')][a530_0x22e3('0x75')])?_0xfba12f[a530_0x22e3('0x6c')][a530_0x22e3('0x6e')][a530_0x22e3('0x2')][a530_0x22e3('0x63')](_0x32dd47[a530_0x22e3('0x9')][a530_0x22e3('0x5a')][a530_0x22e3('0x75')]):_0xfba12f[a530_0x22e3('0x55')];_0x32dd47[a530_0x22e3('0x5a')][a530_0x22e3('0x2f')]=_0xfba12f[a530_0x22e3('0x6c')]['voice']&&_0xfba12f[a530_0x22e3('0x6c')][a530_0x22e3('0x28')][a530_0x22e3('0x42')]?_0xfba12f[a530_0x22e3('0x6c')]['voice']['channel']:_0xfba12f['guild']['channels']['cache']['filter'](_0x2965ad=>_0x2965ad['type']===a530_0x22e3('0x28'))[a530_0x22e3('0x61')](_0x32dd47[a530_0x22e3('0x9')][a530_0x22e3('0x5a')]['voiceChannelId'])?_0xfba12f['guild'][a530_0x22e3('0x6e')]['cache'][a530_0x22e3('0x41')](_0x39a73f=>_0x39a73f[a530_0x22e3('0x51')]===a530_0x22e3('0x28'))[a530_0x22e3('0x63')](_0x32dd47['document'][a530_0x22e3('0x5a')][a530_0x22e3('0x2a')]):_0xfba12f['member'][a530_0x22e3('0x35')]()?_0xfba12f['member'][a530_0x22e3('0x28')][a530_0x22e3('0x55')]:null;if(!_0x32dd47[a530_0x22e3('0x5a')][a530_0x22e3('0x2f')]){return await _0xfba12f[a530_0x22e3('0x55')]['send']({'embed':{'color':tesseract_1['Constants'][a530_0x22e3('0x4')][a530_0x22e3('0x68')],'description':this[a530_0x22e3('0x71')][a530_0x22e3('0x21')]['getString'](_0xfba12f[a530_0x22e3('0x6c')]['document']['language'],a530_0x22e3('0x4b'),_0xfba12f['member'][a530_0x22e3('0x35')]()?a530_0x22e3('0x60'):'noMusicChannels')}})[a530_0x22e3('0x3')](()=>{});}if(!_0x32dd47[a530_0x22e3('0x5a')]['voiceChannel'][a530_0x22e3('0x78')]){return await _0xfba12f[a530_0x22e3('0x55')]['send']({'embed':{'color':tesseract_1[a530_0x22e3('0x12')][a530_0x22e3('0x4')][a530_0x22e3('0x68')],'description':this[a530_0x22e3('0x71')][a530_0x22e3('0x21')][a530_0x22e3('0x67')](_0xfba12f['guild'][a530_0x22e3('0x9')][a530_0x22e3('0x25')],a530_0x22e3('0x4b'),'unjoinable',_0x32dd47[a530_0x22e3('0x5a')][a530_0x22e3('0x2f')][a530_0x22e3('0x57')])}})[a530_0x22e3('0x3')](()=>{});}if(!_0x32dd47[a530_0x22e3('0x5a')][a530_0x22e3('0x2f')]['speakable']){return await _0xfba12f['channel'][a530_0x22e3('0x76')]({'embed':{'color':tesseract_1[a530_0x22e3('0x12')][a530_0x22e3('0x4')][a530_0x22e3('0x68')],'description':this['client'][a530_0x22e3('0x21')][a530_0x22e3('0x67')](_0xfba12f[a530_0x22e3('0x6c')][a530_0x22e3('0x9')][a530_0x22e3('0x25')],a530_0x22e3('0x4b'),a530_0x22e3('0xe'),_0x32dd47[a530_0x22e3('0x5a')]['voiceChannel'][a530_0x22e3('0x57')])}})[a530_0x22e3('0x3')](()=>{});}const _0x1f2273=await _0x32dd47[a530_0x22e3('0x5a')]['voiceChannel'][a530_0x22e3('0x6')]();_0x1f2273['on'](a530_0x22e3('0x4d'),tesseract_1[a530_0x22e3('0x1a')][a530_0x22e3('0x4d')]);_0x1f2273['on'](a530_0x22e3('0x5'),tesseract_1[a530_0x22e3('0x1a')]['error']);_0xfba12f[a530_0x22e3('0x6c')]['me']['voice'][a530_0x22e3('0x2b')](![])['catch'](()=>{});_0xfba12f[a530_0x22e3('0x6c')]['me'][a530_0x22e3('0x28')][a530_0x22e3('0x49')](!![])[a530_0x22e3('0x3')](()=>{});const _0x4b5a65=uuid_1['v4']();const _0x27226b=youtube(_0x3e1462,[a530_0x22e3('0x47'),a530_0x22e3('0x70'),a530_0x22e3('0x6b'),a530_0x22e3('0x44'),a530_0x22e3('0x43'),a530_0x22e3('0x1f'),'--no-warnings',a530_0x22e3('0x11'),a530_0x22e3('0x3f'),a530_0x22e3('0x3b'),a530_0x22e3('0x50')],{});_0x27226b['on'](a530_0x22e3('0x30'),_0x375629=>this[a530_0x22e3('0x39')](_0x32dd47,{..._0x375629,'id':_0x4b5a65,'requester':_0xfba12f[a530_0x22e3('0x56')]['id']}));_0x27226b['on'](a530_0x22e3('0x5f'),()=>this['streamEndHandler'](_0x32dd47));_0x27226b['on'](a530_0x22e3('0x4d'),()=>{_0xfba12f[a530_0x22e3('0x55')][a530_0x22e3('0x76')]({'embed':{'color':tesseract_1[a530_0x22e3('0x12')]['COLORS'][a530_0x22e3('0x68')],'description':this[a530_0x22e3('0x71')]['locale'][a530_0x22e3('0x67')](_0xfba12f[a530_0x22e3('0x6c')][a530_0x22e3('0x9')][a530_0x22e3('0x25')],a530_0x22e3('0x4b'),a530_0x22e3('0x52'))}})[a530_0x22e3('0x3')](()=>{});});await fs[a530_0x22e3('0x1b')]['mkdir'](this[a530_0x22e3('0x20')]+_0xfba12f['guild']['id']+'/',{'recursive':!![]})['catch'](tesseract_1['Logger'][a530_0x22e3('0x4d')]);_0x27226b[a530_0x22e3('0x66')](fs[a530_0x22e3('0xf')](this[a530_0x22e3('0x20')]+_0xfba12f[a530_0x22e3('0x6c')]['id']+'/'+_0x4b5a65+a530_0x22e3('0x17')));};this[a530_0x22e3('0x20')]=a530_0x22e3('0x3c');}[a530_0x22e3('0x13')](_0x490297){return new Promise((_0x149c22,_0xb6d32)=>youtube[a530_0x22e3('0x8')](a530_0x22e3('0x38')+_0x490297,[a530_0x22e3('0x47'),'--force-ipv4','--geo-bypass-country=US','--no-playlist','--no-cache-dir','--quiet',a530_0x22e3('0x46'),a530_0x22e3('0x11'),'--referer=https://bastion.traction.one',a530_0x22e3('0x3b'),a530_0x22e3('0x50')],(_0x1757a3,_0x419870)=>{if(_0x1757a3)return _0xb6d32(_0x1757a3);return _0x149c22(_0x419870);}));}};
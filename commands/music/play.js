const a91_0x59f2=['PINK','--no-cache-dir','connection','client','joinable','isPublicBastion','--referer=https://bastion.traction.one','.mp3','constructor','return\x20/\x22\x20+\x20this\x20+\x20\x22/','uploader','Playing','requester','--geo-bypass-country=US','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','./music/','--no-warnings','--user-agent=Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_0)\x20AppleWebKit/604.1\x20(KHTML,\x20like\x20Gecko)\x20Version/13.0.4\x20Safari/604.1','error','--youtube-skip-dash-manifest','album','queue','textChannelId','COLORS','leave','exec','textChannel','rmdir','playing','cache','Album','configurations','url','language','channel','artist','fulltitle','musicDirectory','Logger','streamInfoHandler','--format=bestaudio[protocol^=http]','presence','skipVotes','end','guild','track','speakable','getInfo','pipe','DiscordError','music','noMusicChannelsAsOwner','link','getSongInfo','push','../../utils/constants','setDeaf','voiceChannel','play\x20--link\x20https://www.youtube.com/watch?v=dQw4w9WgXcQ','\x20•\x20','INVALID_COMMAND_SYNTAX','has','streamEndHandler','tag','Stopping\x20Playback','test','startStreamDispatcher','thumbnail','Artist','locale','voiceChannelId','apply','--force-ipv4','dispatcherFinishHandler','user','voice','members','webpage_url','Constants','activity','musicDisabled','href','exports','join','ArgumentTypes','member','length','musicDisabledPublic','repeat','RED','--no-playlist','filter','createWriteStream','name','get','../../utils/errors','errors','shift','type','play\x20Remember\x20The\x20Name\x20by\x20Ed\x20Sheeran','catch','promises','send','unspeakable','setActivity','ytsearch:','history','alt_title','document','keepAlive','It\x20allows\x20you\x20to\x20play\x20a\x20music\x20in\x20the\x20server,\x20from\x20the\x20given\x20queury\x20or\x20from\x20any\x20supported\x20source.','Command','author','info','--ignore-errors','--quiet','channels','getString','creator'];(function(_0x12c71f,_0x59f287){const _0x462054=function(_0xa53351){while(--_0xa53351){_0x12c71f['push'](_0x12c71f['shift']());}};const _0x55bce0=function(){const _0x47f910={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2ae1b9,_0x5c3efd,_0x3d9004,_0x412639){_0x412639=_0x412639||{};let _0x565a9e=_0x5c3efd+'='+_0x3d9004;let _0x4bebb5=0x0;for(let _0x4f521f=0x0,_0x414cf2=_0x2ae1b9['length'];_0x4f521f<_0x414cf2;_0x4f521f++){const _0x46f8c9=_0x2ae1b9[_0x4f521f];_0x565a9e+=';\x20'+_0x46f8c9;const _0x20b9dc=_0x2ae1b9[_0x46f8c9];_0x2ae1b9['push'](_0x20b9dc);_0x414cf2=_0x2ae1b9['length'];if(_0x20b9dc!==!![]){_0x565a9e+='='+_0x20b9dc;}}_0x412639['cookie']=_0x565a9e;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1d68bc,_0x4f5607){_0x1d68bc=_0x1d68bc||function(_0x2d39b2){return _0x2d39b2;};const _0x2fecc9=_0x1d68bc(new RegExp('(?:^|;\x20)'+_0x4f5607['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x1d8b75=function(_0x5041fd,_0x8f10dd){_0x5041fd(++_0x8f10dd);};_0x1d8b75(_0x462054,_0x59f287);return _0x2fecc9?decodeURIComponent(_0x2fecc9[0x1]):undefined;}};const _0x28ffad=function(){const _0x433235=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x433235['test'](_0x47f910['removeCookie']['toString']());};_0x47f910['updateCookie']=_0x28ffad;let _0x33594b='';const _0x46a4f5=_0x47f910['updateCookie']();if(!_0x46a4f5){_0x47f910['setCookie'](['*'],'counter',0x1);}else if(_0x46a4f5){_0x33594b=_0x47f910['getCookie'](null,'counter');}else{_0x47f910['removeCookie']();}};_0x55bce0();}(a91_0x59f2,0xb2));const a91_0x4620=function(_0x12c71f,_0x59f287){_0x12c71f=_0x12c71f-0x0;let _0x462054=a91_0x59f2[_0x12c71f];return _0x462054;};const a91_0x47f910=function(){let _0x372ab2=!![];return function(_0x48e2bf,_0x4aed76){const _0x317dde=_0x372ab2?function(){if(_0x4aed76){const _0x309a6f=_0x4aed76[a91_0x4620('0xc')](_0x48e2bf,arguments);_0x4aed76=null;return _0x309a6f;}}:function(){};_0x372ab2=![];return _0x317dde;};}();const a91_0xa53351=a91_0x47f910(this,function(){const _0xd67f0e=function(){const _0x1155b7=_0xd67f0e[a91_0x4620('0x44')](a91_0x4620('0x45'))()['compile'](a91_0x4620('0x4a'));return!_0x1155b7[a91_0x4620('0x6')](a91_0xa53351);};return _0xd67f0e();});a91_0xa53351();'use strict';const fs=require('fs');const tesseract_1=require('@bastion/tesseract');const youtube=require('youtube-dl');const uuid_1=require('uuid');const constants=require(a91_0x4620('0x73'));const errors=require(a91_0x4620('0x24'));module[a91_0x4620('0x17')]=class Play extends tesseract_1[a91_0x4620('0x34')]{constructor(){super('play',{'description':a91_0x4620('0x33'),'triggers':[],'arguments':{'alias':{'link':'l'},'coerce':{'link':tesseract_1[a91_0x4620('0x13')][a91_0x4620('0x19')]['URL']}},'scope':a91_0x4620('0x68'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[],'syntax':[a91_0x4620('0x28'),a91_0x4620('0x76')]});this[a91_0x4620('0x63')]=(_0x404be6,_0x5c2934)=>{const _0xe2cff5=_0x5c2934['id'];const _0x173198=_0x5c2934[a91_0x4620('0x69')]||_0x5c2934['title']||_0x5c2934[a91_0x4620('0x60')]||_0x5c2934[a91_0x4620('0x30')];const _0x14a2b7=_0x5c2934[a91_0x4620('0x50')];const _0x5a0d7f=_0x5c2934[a91_0x4620('0x5f')]||_0x5c2934[a91_0x4620('0x3b')]||_0x5c2934[a91_0x4620('0x46')];const _0x39df8d=_0x5c2934['duration'];const _0x54805f=_0x5c2934[a91_0x4620('0x8')];const _0x2ba20f=_0x5c2934[a91_0x4620('0x48')];_0x404be6[a91_0x4620('0x6e')][a91_0x4620('0x51')][a91_0x4620('0x72')]({'id':_0xe2cff5,'track':_0x173198,'album':_0x14a2b7,'artist':_0x5a0d7f,'duration':_0x39df8d,'thumbnail':_0x54805f,'requester':_0x2ba20f});const _0x15c6f3=[];if(_0x14a2b7){_0x15c6f3['push']({'name':a91_0x4620('0x5a'),'value':_0x14a2b7,'inline':!![]});}if(_0x5a0d7f){_0x15c6f3[a91_0x4620('0x72')]({'name':'Artist','value':_0x5a0d7f,'inline':!![]});}_0x404be6['music'][a91_0x4620('0x56')]['send']({'embed':{'color':tesseract_1[a91_0x4620('0x13')][a91_0x4620('0x53')][a91_0x4620('0x3c')],'title':'Added\x20to\x20Queue','description':_0x173198,'fields':_0x15c6f3,'thumbnail':{'url':_0x54805f},'footer':{'text':(_0x404be6[a91_0x4620('0x6e')][a91_0x4620('0x51')][a91_0x4620('0x1b')]?'#'+(_0x404be6['music'][a91_0x4620('0x51')][a91_0x4620('0x1b')]-0x1):'Up\x20Next')+('\x20•\x20'+_0x39df8d+'\x20•\x20'+(_0x404be6['members'][a91_0x4620('0x59')][a91_0x4620('0x23')](_0x2ba20f)[a91_0x4620('0xf')][a91_0x4620('0x4')]||_0x2ba20f))}}})[a91_0x4620('0x29')](()=>{});};this[a91_0x4620('0x3')]=_0x4ada48=>{if(!_0x4ada48[a91_0x4620('0x6e')][a91_0x4620('0x58')]){this[a91_0x4620('0x7')](_0x4ada48);}};this[a91_0x4620('0x7')]=_0x4b4e32=>{if(_0x4b4e32[a91_0x4620('0x6e')][a91_0x4620('0x51')][a91_0x4620('0x1b')]){const _0x56b4c1=_0x4b4e32[a91_0x4620('0x6e')][a91_0x4620('0x51')][0x0];const _0x720434=[];if(_0x56b4c1['album']){_0x720434[a91_0x4620('0x72')]({'name':a91_0x4620('0x5a'),'value':_0x56b4c1[a91_0x4620('0x50')],'inline':!![]});}if(_0x56b4c1[a91_0x4620('0x5f')]){_0x720434[a91_0x4620('0x72')]({'name':a91_0x4620('0x9'),'value':_0x56b4c1[a91_0x4620('0x5f')],'inline':!![]});}_0x4b4e32[a91_0x4620('0x6e')][a91_0x4620('0x56')][a91_0x4620('0x2b')]({'embed':{'color':tesseract_1['Constants'][a91_0x4620('0x53')][a91_0x4620('0x3c')],'title':a91_0x4620('0x47'),'description':_0x56b4c1[a91_0x4620('0x69')],'fields':_0x720434,'thumbnail':{'url':_0x56b4c1[a91_0x4620('0x8')]},'footer':{'text':_0x56b4c1['duration']+a91_0x4620('0x0')+(_0x4b4e32[a91_0x4620('0x11')][a91_0x4620('0x59')][a91_0x4620('0x23')](_0x56b4c1[a91_0x4620('0x48')])[a91_0x4620('0xf')][a91_0x4620('0x4')]||_0x56b4c1[a91_0x4620('0x48')])}}})[a91_0x4620('0x29')](()=>{});_0x4b4e32[a91_0x4620('0x6e')]['playing']=!![];const _0xa4dfe5=_0x4b4e32[a91_0x4620('0x10')]&&_0x4b4e32[a91_0x4620('0x10')][a91_0x4620('0x3e')]['play'](this[a91_0x4620('0x61')]+_0x4b4e32['id']+'/'+_0x56b4c1['id']+a91_0x4620('0x43'));if(this[a91_0x4620('0x3f')][a91_0x4620('0x5b')][a91_0x4620('0x6e')]&&this[a91_0x4620('0x3f')][a91_0x4620('0x5b')][a91_0x4620('0x6e')][a91_0x4620('0x14')]){this[a91_0x4620('0x3f')][a91_0x4620('0xf')]['setActivity']({'name':_0x56b4c1[a91_0x4620('0x69')],'type':'LISTENING'})['catch'](()=>{});}_0xa4dfe5['on']('finish',()=>this[a91_0x4620('0xe')](_0x4b4e32));_0xa4dfe5['on'](a91_0x4620('0x4e'),_0x55ecc9=>{tesseract_1[a91_0x4620('0x62')][a91_0x4620('0x4e')](_0x55ecc9);this[a91_0x4620('0xe')](_0x4b4e32);});}else{_0x4b4e32[a91_0x4620('0x6e')]['queue']=[];_0x4b4e32['music']['history']=[];fs[a91_0x4620('0x2a')][a91_0x4620('0x57')](this[a91_0x4620('0x61')]+_0x4b4e32['id'],{'recursive':!![]})[a91_0x4620('0x29')](()=>{});if(this[a91_0x4620('0x3f')][a91_0x4620('0x5b')][a91_0x4620('0x6e')]&&this[a91_0x4620('0x3f')][a91_0x4620('0x5b')][a91_0x4620('0x6e')][a91_0x4620('0x14')]){this[a91_0x4620('0x3f')][a91_0x4620('0xf')][a91_0x4620('0x2d')](this['client'][a91_0x4620('0x5b')][a91_0x4620('0x65')]['activity'])[a91_0x4620('0x29')](()=>{});}if(!_0x4b4e32[a91_0x4620('0x31')][a91_0x4620('0x6e')][a91_0x4620('0x32')]){_0x4b4e32['voice']&&_0x4b4e32[a91_0x4620('0x10')][a91_0x4620('0x5e')][a91_0x4620('0x54')]();}_0x4b4e32[a91_0x4620('0x6e')][a91_0x4620('0x56')][a91_0x4620('0x2b')]({'embed':{'color':tesseract_1[a91_0x4620('0x13')][a91_0x4620('0x53')][a91_0x4620('0x3c')],'title':a91_0x4620('0x5')}})[a91_0x4620('0x29')](()=>{});}};this['dispatcherFinishHandler']=_0x54b8a9=>{_0x54b8a9[a91_0x4620('0x6e')]['playing']=![];_0x54b8a9[a91_0x4620('0x6e')][a91_0x4620('0x66')]=[];if(_0x54b8a9[a91_0x4620('0x6e')]['queue']['length']){_0x54b8a9[a91_0x4620('0x6e')][a91_0x4620('0x2f')][a91_0x4620('0x72')](_0x54b8a9[a91_0x4620('0x6e')][a91_0x4620('0x51')][a91_0x4620('0x26')]());}if(!_0x54b8a9[a91_0x4620('0x6e')]['queue'][a91_0x4620('0x1b')]&&_0x54b8a9[a91_0x4620('0x6e')][a91_0x4620('0x1d')]){_0x54b8a9[a91_0x4620('0x6e')][a91_0x4620('0x51')]=_0x54b8a9['music'][a91_0x4620('0x2f')];_0x54b8a9[a91_0x4620('0x6e')][a91_0x4620('0x2f')]=[];}this[a91_0x4620('0x7')](_0x54b8a9);};this[a91_0x4620('0x55')]=async(_0xb906bf,_0xe1a4b2)=>{const _0x2c473d=_0xb906bf[a91_0x4620('0x68')];if(!_0x2c473d[a91_0x4620('0x31')][a91_0x4620('0x6e')]||!_0x2c473d[a91_0x4620('0x31')]['music']['enabled']){return await _0xb906bf[a91_0x4620('0x5e')][a91_0x4620('0x2b')]({'embed':{'color':tesseract_1[a91_0x4620('0x13')][a91_0x4620('0x53')]['RED'],'description':this['client']['locale'][a91_0x4620('0x3a')](_0xb906bf['guild']['document']['language'],'errors',constants[a91_0x4620('0x41')](_0xb906bf[a91_0x4620('0x35')])?a91_0x4620('0x1c'):a91_0x4620('0x15'))}})[a91_0x4620('0x29')](()=>{});}const _0x4650ee=_0xe1a4b2['_']['join']('\x20');const _0x2e580a=_0x4650ee[a91_0x4620('0x1b')]?await this[a91_0x4620('0x71')](_0x4650ee):null;const _0x10f517=_0xe1a4b2[a91_0x4620('0x70')]?_0xe1a4b2[a91_0x4620('0x70')][a91_0x4620('0x16')]:_0x2e580a?_0x2e580a[a91_0x4620('0x12')]||_0x2e580a[a91_0x4620('0x5c')]:null;if(!_0x10f517)throw new errors[(a91_0x4620('0x6d'))](errors['BASTION_ERROR_TYPE'][a91_0x4620('0x1')],this[a91_0x4620('0x22')]);_0x2c473d[a91_0x4620('0x6e')][a91_0x4620('0x56')]=_0xb906bf[a91_0x4620('0x68')][a91_0x4620('0x39')]['cache'][a91_0x4620('0x2')](_0x2c473d[a91_0x4620('0x31')][a91_0x4620('0x6e')][a91_0x4620('0x52')])?_0xb906bf[a91_0x4620('0x68')]['channels'][a91_0x4620('0x59')][a91_0x4620('0x23')](_0x2c473d['document'][a91_0x4620('0x6e')][a91_0x4620('0x52')]):_0xb906bf[a91_0x4620('0x5e')];_0x2c473d['music'][a91_0x4620('0x75')]=_0xb906bf[a91_0x4620('0x68')][a91_0x4620('0x10')]&&_0xb906bf[a91_0x4620('0x68')][a91_0x4620('0x10')][a91_0x4620('0x3e')]?_0xb906bf['guild']['voice'][a91_0x4620('0x5e')]:_0xb906bf[a91_0x4620('0x68')]['channels']['cache'][a91_0x4620('0x20')](_0x5b7439=>_0x5b7439[a91_0x4620('0x27')]===a91_0x4620('0x10'))[a91_0x4620('0x2')](_0x2c473d[a91_0x4620('0x31')][a91_0x4620('0x6e')][a91_0x4620('0xb')])?_0xb906bf[a91_0x4620('0x68')][a91_0x4620('0x39')][a91_0x4620('0x59')][a91_0x4620('0x20')](_0x460e2a=>_0x460e2a['type']===a91_0x4620('0x10'))[a91_0x4620('0x23')](_0x2c473d[a91_0x4620('0x31')][a91_0x4620('0x6e')][a91_0x4620('0xb')]):_0xb906bf[a91_0x4620('0x1a')]['isMusicMaster']()?_0xb906bf[a91_0x4620('0x1a')][a91_0x4620('0x10')][a91_0x4620('0x5e')]:null;if(!_0x2c473d['music'][a91_0x4620('0x75')]){return await _0xb906bf[a91_0x4620('0x5e')][a91_0x4620('0x2b')]({'embed':{'color':tesseract_1[a91_0x4620('0x13')]['COLORS'][a91_0x4620('0x1e')],'description':this[a91_0x4620('0x3f')][a91_0x4620('0xa')][a91_0x4620('0x3a')](_0xb906bf['guild']['document'][a91_0x4620('0x5d')],a91_0x4620('0x25'),_0xb906bf[a91_0x4620('0x1a')]['isMusicMaster']()?a91_0x4620('0x6f'):'noMusicChannels')}})[a91_0x4620('0x29')](()=>{});}if(!_0x2c473d[a91_0x4620('0x6e')][a91_0x4620('0x75')][a91_0x4620('0x40')]){return await _0xb906bf['channel']['send']({'embed':{'color':tesseract_1[a91_0x4620('0x13')][a91_0x4620('0x53')][a91_0x4620('0x1e')],'description':this[a91_0x4620('0x3f')][a91_0x4620('0xa')]['getString'](_0xb906bf[a91_0x4620('0x68')][a91_0x4620('0x31')]['language'],a91_0x4620('0x25'),'unjoinable',_0x2c473d[a91_0x4620('0x6e')]['voiceChannel'][a91_0x4620('0x22')])}})[a91_0x4620('0x29')](()=>{});}if(!_0x2c473d[a91_0x4620('0x6e')][a91_0x4620('0x75')][a91_0x4620('0x6a')]){return await _0xb906bf[a91_0x4620('0x5e')][a91_0x4620('0x2b')]({'embed':{'color':tesseract_1[a91_0x4620('0x13')][a91_0x4620('0x53')]['RED'],'description':this[a91_0x4620('0x3f')][a91_0x4620('0xa')]['getString'](_0xb906bf[a91_0x4620('0x68')][a91_0x4620('0x31')][a91_0x4620('0x5d')],'errors',a91_0x4620('0x2c'),_0x2c473d['music'][a91_0x4620('0x75')][a91_0x4620('0x22')])}})['catch'](()=>{});}const _0x371630=await _0x2c473d[a91_0x4620('0x6e')][a91_0x4620('0x75')][a91_0x4620('0x18')]();_0x371630['on']('error',tesseract_1[a91_0x4620('0x62')]['error']);_0x371630['on']('failed',tesseract_1[a91_0x4620('0x62')][a91_0x4620('0x4e')]);_0xb906bf[a91_0x4620('0x68')]['me']['voice']['setMute'](![])['catch'](()=>{});_0xb906bf[a91_0x4620('0x68')]['me']['voice'][a91_0x4620('0x74')](!![])[a91_0x4620('0x29')](()=>{});const _0x276147=uuid_1['v4']();const _0x2dbaca=youtube(_0x10f517,[a91_0x4620('0x37'),a91_0x4620('0xd'),a91_0x4620('0x49'),'--no-playlist',a91_0x4620('0x3d'),a91_0x4620('0x38'),a91_0x4620('0x4c'),a91_0x4620('0x4d'),a91_0x4620('0x42'),a91_0x4620('0x64'),a91_0x4620('0x4f')],{});_0x2dbaca['on'](a91_0x4620('0x36'),_0x143eb5=>this['streamInfoHandler'](_0x2c473d,{..._0x143eb5,'id':_0x276147,'requester':_0xb906bf['author']['id']}));_0x2dbaca['on'](a91_0x4620('0x67'),()=>this[a91_0x4620('0x3')](_0x2c473d));_0x2dbaca['on'](a91_0x4620('0x4e'),()=>{_0xb906bf[a91_0x4620('0x5e')][a91_0x4620('0x2b')]({'embed':{'color':tesseract_1[a91_0x4620('0x13')][a91_0x4620('0x53')][a91_0x4620('0x1e')],'description':this[a91_0x4620('0x3f')][a91_0x4620('0xa')][a91_0x4620('0x3a')](_0xb906bf[a91_0x4620('0x68')]['document']['language'],a91_0x4620('0x25'),'musicDownloadError')}})[a91_0x4620('0x29')](()=>{});});await fs[a91_0x4620('0x2a')]['mkdir'](this[a91_0x4620('0x61')]+_0xb906bf[a91_0x4620('0x68')]['id']+'/',{'recursive':!![]})[a91_0x4620('0x29')](tesseract_1[a91_0x4620('0x62')][a91_0x4620('0x4e')]);_0x2dbaca[a91_0x4620('0x6c')](fs[a91_0x4620('0x21')](this[a91_0x4620('0x61')]+_0xb906bf[a91_0x4620('0x68')]['id']+'/'+_0x276147+a91_0x4620('0x43')));};this[a91_0x4620('0x61')]=a91_0x4620('0x4b');}[a91_0x4620('0x71')](_0x4933e3){return new Promise((_0x5ed4c3,_0x574cfe)=>youtube[a91_0x4620('0x6b')](a91_0x4620('0x2e')+_0x4933e3,[a91_0x4620('0x37'),'--force-ipv4',a91_0x4620('0x49'),a91_0x4620('0x1f'),a91_0x4620('0x3d'),a91_0x4620('0x38'),a91_0x4620('0x4c'),a91_0x4620('0x4d'),a91_0x4620('0x42'),a91_0x4620('0x64'),a91_0x4620('0x4f')],(_0x281bf8,_0x1f118d)=>{if(_0x281bf8)return _0x574cfe(_0x281bf8);return _0x5ed4c3(_0x1f118d);}));}};
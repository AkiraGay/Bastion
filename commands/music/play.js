const a90_0x1159=['LISTENING','noMusicChannels','language','@bastion/tesseract','BASTION_ERROR_TYPE','./music/','--no-playlist','ArgumentTypes','author','uploader','--no-cache-dir','requester','Added\x20to\x20Queue','voiceChannelId','has','play\x20--link\x20https://www.youtube.com/watch?v=dQw4w9WgXcQ','join','setActivity','URL','creator','errors','ytsearch:','voice','INVALID_COMMAND_SYNTAX','exec','compile','--referer=https://bastion.traction.one','artist','href','length','keepAlive','--no-warnings','play\x20Remember\x20The\x20Name\x20by\x20Ed\x20Sheeran','dispatcherFinishHandler','test','document','COLORS','webpage_url','failed','send','isPublicBastion','tag','channel','../../utils/constants','leave','promises','name','--force-ipv4','getString','finish','activity','PINK','../../utils/errors','--user-agent=Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_0)\x20AppleWebKit/604.1\x20(KHTML,\x20like\x20Gecko)\x20Version/13.0.4\x20Safari/604.1','channels','album','--youtube-skip-dash-manifest','unspeakable','musicDirectory','musicDisabledPublic','thumbnail','cache','push','link','mkdir','user','Up\x20Next','apply','return\x20/\x22\x20+\x20this\x20+\x20\x22/','fulltitle','repeat','duration','member','exports','filter','isMusicMaster','error','startStreamDispatcher','--format=bestaudio[protocol^=http]','Stopping\x20Playback','guild','get','playing','createWriteStream','--geo-bypass-country=US','noMusicChannelsAsOwner','track','Logger','configurations','speakable','Artist','history','catch','Album','url','queue','streamInfoHandler','--ignore-errors','Command','locale','members','client','getSongInfo','streamEndHandler','constructor','pipe','.mp3','voiceChannel','Playing','connection','RED','musicDownloadError','setMute','play','musicDisabled','music','textChannelId','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','textChannel','presence','youtube-dl','It\x20allows\x20you\x20to\x20play\x20a\x20music\x20in\x20the\x20server,\x20from\x20the\x20given\x20queury\x20or\x20from\x20any\x20supported\x20source.','\x20•\x20','skipVotes','Constants'];(function(_0x44f6b5,_0x11592c){const _0x554f51=function(_0x3a0256){while(--_0x3a0256){_0x44f6b5['push'](_0x44f6b5['shift']());}};const _0x4004d4=function(){const _0x5131e7={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x1bef77,_0x571a51,_0x1e245a,_0x2aedbd){_0x2aedbd=_0x2aedbd||{};let _0x113bbe=_0x571a51+'='+_0x1e245a;let _0x331ad6=0x0;for(let _0x5704a7=0x0,_0x402ec6=_0x1bef77['length'];_0x5704a7<_0x402ec6;_0x5704a7++){const _0x316d09=_0x1bef77[_0x5704a7];_0x113bbe+=';\x20'+_0x316d09;const _0x3d7c67=_0x1bef77[_0x316d09];_0x1bef77['push'](_0x3d7c67);_0x402ec6=_0x1bef77['length'];if(_0x3d7c67!==!![]){_0x113bbe+='='+_0x3d7c67;}}_0x2aedbd['cookie']=_0x113bbe;},'removeCookie':function(){return'dev';},'getCookie':function(_0xf14075,_0x5e6244){_0xf14075=_0xf14075||function(_0x303ec1){return _0x303ec1;};const _0x191ab6=_0xf14075(new RegExp('(?:^|;\x20)'+_0x5e6244['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x356d00=function(_0x1708ee,_0x13e6af){_0x1708ee(++_0x13e6af);};_0x356d00(_0x554f51,_0x11592c);return _0x191ab6?decodeURIComponent(_0x191ab6[0x1]):undefined;}};const _0x52c10f=function(){const _0x2171f1=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x2171f1['test'](_0x5131e7['removeCookie']['toString']());};_0x5131e7['updateCookie']=_0x52c10f;let _0x101418='';const _0x2f4331=_0x5131e7['updateCookie']();if(!_0x2f4331){_0x5131e7['setCookie'](['*'],'counter',0x1);}else if(_0x2f4331){_0x101418=_0x5131e7['getCookie'](null,'counter');}else{_0x5131e7['removeCookie']();}};_0x4004d4();}(a90_0x1159,0x185));const a90_0x554f=function(_0x44f6b5,_0x11592c){_0x44f6b5=_0x44f6b5-0x0;let _0x554f51=a90_0x1159[_0x44f6b5];return _0x554f51;};const a90_0x5131e7=function(){let _0x2bd892=!![];return function(_0x1aadbb,_0x2fd79d){const _0x246af5=_0x2bd892?function(){if(_0x2fd79d){const _0x1d5ce6=_0x2fd79d[a90_0x554f('0x35')](_0x1aadbb,arguments);_0x2fd79d=null;return _0x1d5ce6;}}:function(){};_0x2bd892=![];return _0x246af5;};}();const a90_0x3a0256=a90_0x5131e7(this,function(){const _0x4a3b9b=function(){const _0x416b1e=_0x4a3b9b[a90_0x554f('0x5a')](a90_0x554f('0x36'))()[a90_0x554f('0xb')](a90_0x554f('0x67'));return!_0x416b1e[a90_0x554f('0x14')](a90_0x3a0256);};return _0x4a3b9b();});a90_0x3a0256();'use strict';const fs=require('fs');const tesseract_1=require(a90_0x554f('0x72'));const youtube=require(a90_0x554f('0x6a'));const uuid_1=require('uuid');const constants=require(a90_0x554f('0x1d'));const errors=require(a90_0x554f('0x26'));module[a90_0x554f('0x3b')]=class Play extends tesseract_1[a90_0x554f('0x54')]{constructor(){super('play',{'description':a90_0x554f('0x6b'),'triggers':[],'arguments':{'alias':{'link':'l'},'coerce':{'link':tesseract_1[a90_0x554f('0x6e')][a90_0x554f('0x76')][a90_0x554f('0x4')]}},'scope':a90_0x554f('0x42'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[],'syntax':[a90_0x554f('0x12'),a90_0x554f('0x1')]});this[a90_0x554f('0x52')]=(_0x5a0438,_0x41666e)=>{const _0x441146=_0x41666e['id'];const _0x36e6c8=_0x41666e[a90_0x554f('0x48')]||_0x41666e['title']||_0x41666e[a90_0x554f('0x37')]||_0x41666e['alt_title'];const _0x5a586b=_0x41666e['album'];const _0x529a4b=_0x41666e[a90_0x554f('0xd')]||_0x41666e[a90_0x554f('0x5')]||_0x41666e[a90_0x554f('0x78')];const _0x44efbb=_0x41666e[a90_0x554f('0x39')];const _0x58683d=_0x41666e[a90_0x554f('0x2e')];const _0x5b1ce1=_0x41666e[a90_0x554f('0x7a')];_0x5a0438[a90_0x554f('0x65')]['queue']['push']({'id':_0x441146,'track':_0x36e6c8,'album':_0x5a586b,'artist':_0x529a4b,'duration':_0x44efbb,'thumbnail':_0x58683d,'requester':_0x5b1ce1});const _0xb8e243=[];if(_0x5a586b){_0xb8e243[a90_0x554f('0x30')]({'name':a90_0x554f('0x4f'),'value':_0x5a586b,'inline':!![]});}if(_0x529a4b){_0xb8e243[a90_0x554f('0x30')]({'name':a90_0x554f('0x4c'),'value':_0x529a4b,'inline':!![]});}_0x5a0438[a90_0x554f('0x65')][a90_0x554f('0x68')][a90_0x554f('0x19')]({'embed':{'color':tesseract_1['Constants']['COLORS'][a90_0x554f('0x25')],'title':a90_0x554f('0x7b'),'description':_0x36e6c8,'fields':_0xb8e243,'thumbnail':{'url':_0x58683d},'footer':{'text':(_0x5a0438[a90_0x554f('0x65')][a90_0x554f('0x51')][a90_0x554f('0xf')]?'#'+(_0x5a0438['music'][a90_0x554f('0x51')][a90_0x554f('0xf')]-0x1):a90_0x554f('0x34'))+(a90_0x554f('0x6c')+_0x44efbb+'\x20•\x20'+(_0x5a0438[a90_0x554f('0x56')][a90_0x554f('0x2f')][a90_0x554f('0x43')](_0x5b1ce1)[a90_0x554f('0x33')][a90_0x554f('0x1b')]||_0x5b1ce1))}}})[a90_0x554f('0x4e')](()=>{});};this['streamEndHandler']=_0x3cb86a=>{if(!_0x3cb86a[a90_0x554f('0x65')][a90_0x554f('0x44')]){this[a90_0x554f('0x3f')](_0x3cb86a);}};this[a90_0x554f('0x3f')]=_0x17371d=>{if(_0x17371d[a90_0x554f('0x65')][a90_0x554f('0x51')]['length']){const _0x4e27bc=_0x17371d[a90_0x554f('0x65')][a90_0x554f('0x51')][0x0];const _0x302218=[];if(_0x4e27bc['album']){_0x302218[a90_0x554f('0x30')]({'name':'Album','value':_0x4e27bc[a90_0x554f('0x29')],'inline':!![]});}if(_0x4e27bc[a90_0x554f('0xd')]){_0x302218[a90_0x554f('0x30')]({'name':'Artist','value':_0x4e27bc['artist'],'inline':!![]});}_0x17371d[a90_0x554f('0x65')]['textChannel'][a90_0x554f('0x19')]({'embed':{'color':tesseract_1['Constants']['COLORS'][a90_0x554f('0x25')],'title':a90_0x554f('0x5e'),'description':_0x4e27bc[a90_0x554f('0x48')],'fields':_0x302218,'thumbnail':{'url':_0x4e27bc[a90_0x554f('0x2e')]},'footer':{'text':_0x4e27bc[a90_0x554f('0x39')]+a90_0x554f('0x6c')+(_0x17371d[a90_0x554f('0x56')][a90_0x554f('0x2f')][a90_0x554f('0x43')](_0x4e27bc['requester'])[a90_0x554f('0x33')][a90_0x554f('0x1b')]||_0x4e27bc[a90_0x554f('0x7a')])}}})[a90_0x554f('0x4e')](()=>{});_0x17371d['music'][a90_0x554f('0x44')]=!![];const _0x1b0ad5=_0x17371d['voice']&&_0x17371d[a90_0x554f('0x8')][a90_0x554f('0x5f')][a90_0x554f('0x63')](this[a90_0x554f('0x2c')]+_0x17371d['id']+'/'+_0x4e27bc['id']+a90_0x554f('0x5c'));this['client'][a90_0x554f('0x33')][a90_0x554f('0x3')]({'name':_0x4e27bc[a90_0x554f('0x48')],'type':a90_0x554f('0x6f')})[a90_0x554f('0x4e')](()=>{});_0x1b0ad5['on'](a90_0x554f('0x23'),()=>this[a90_0x554f('0x13')](_0x17371d));_0x1b0ad5['on'](a90_0x554f('0x3e'),_0x22d85f=>{tesseract_1[a90_0x554f('0x49')][a90_0x554f('0x3e')](_0x22d85f);this[a90_0x554f('0x13')](_0x17371d);});}else{_0x17371d[a90_0x554f('0x65')]['queue']=[];_0x17371d[a90_0x554f('0x65')][a90_0x554f('0x4d')]=[];fs['promises']['rmdir'](this[a90_0x554f('0x2c')]+_0x17371d['id'],{'recursive':!![]})[a90_0x554f('0x4e')](()=>{});this[a90_0x554f('0x57')]['user']['setActivity'](this[a90_0x554f('0x57')][a90_0x554f('0x4a')][a90_0x554f('0x69')][a90_0x554f('0x24')])['catch'](()=>{});if(!_0x17371d[a90_0x554f('0x15')][a90_0x554f('0x65')][a90_0x554f('0x10')]){_0x17371d[a90_0x554f('0x8')]&&_0x17371d[a90_0x554f('0x8')][a90_0x554f('0x1c')][a90_0x554f('0x1e')]();}_0x17371d['music'][a90_0x554f('0x68')][a90_0x554f('0x19')]({'embed':{'color':tesseract_1[a90_0x554f('0x6e')][a90_0x554f('0x16')][a90_0x554f('0x25')],'title':a90_0x554f('0x41')}})['catch'](()=>{});}};this[a90_0x554f('0x13')]=_0x14b6d9=>{_0x14b6d9[a90_0x554f('0x65')]['playing']=![];_0x14b6d9[a90_0x554f('0x65')][a90_0x554f('0x6d')]=[];if(_0x14b6d9[a90_0x554f('0x65')][a90_0x554f('0x51')]['length']){_0x14b6d9[a90_0x554f('0x65')][a90_0x554f('0x4d')][a90_0x554f('0x30')](_0x14b6d9[a90_0x554f('0x65')][a90_0x554f('0x51')]['shift']());}if(!_0x14b6d9['music'][a90_0x554f('0x51')][a90_0x554f('0xf')]&&_0x14b6d9[a90_0x554f('0x65')][a90_0x554f('0x38')]){_0x14b6d9[a90_0x554f('0x65')][a90_0x554f('0x51')]=_0x14b6d9[a90_0x554f('0x65')][a90_0x554f('0x4d')];_0x14b6d9[a90_0x554f('0x65')][a90_0x554f('0x4d')]=[];}this['startStreamDispatcher'](_0x14b6d9);};this[a90_0x554f('0xa')]=async(_0x2dbce3,_0x2e9153)=>{const _0x9d17e4=_0x2dbce3[a90_0x554f('0x42')];if(!_0x9d17e4[a90_0x554f('0x15')]['music']||!_0x9d17e4[a90_0x554f('0x15')][a90_0x554f('0x65')]['enabled']){return await _0x2dbce3['channel'][a90_0x554f('0x19')]({'embed':{'color':tesseract_1[a90_0x554f('0x6e')][a90_0x554f('0x16')][a90_0x554f('0x60')],'description':this[a90_0x554f('0x57')][a90_0x554f('0x55')]['getString'](_0x2dbce3[a90_0x554f('0x42')]['document'][a90_0x554f('0x71')],'errors',constants[a90_0x554f('0x1a')](_0x2dbce3[a90_0x554f('0x77')])?a90_0x554f('0x2d'):a90_0x554f('0x64'))}})['catch'](()=>{});}const _0x1da4c4=_0x2e9153['_'][a90_0x554f('0x2')]('\x20');const _0x4dacd2=_0x1da4c4[a90_0x554f('0xf')]?await this[a90_0x554f('0x58')](_0x1da4c4):null;const _0x583625=_0x2e9153[a90_0x554f('0x31')]?_0x2e9153[a90_0x554f('0x31')][a90_0x554f('0xe')]:_0x4dacd2?_0x4dacd2[a90_0x554f('0x17')]||_0x4dacd2[a90_0x554f('0x50')]:null;if(!_0x583625)throw new errors['DiscordError'](errors[a90_0x554f('0x73')][a90_0x554f('0x9')],this[a90_0x554f('0x20')]);_0x9d17e4[a90_0x554f('0x65')][a90_0x554f('0x68')]=_0x2dbce3['guild'][a90_0x554f('0x28')][a90_0x554f('0x2f')][a90_0x554f('0x0')](_0x9d17e4[a90_0x554f('0x15')]['music'][a90_0x554f('0x66')])?_0x2dbce3[a90_0x554f('0x42')]['channels'][a90_0x554f('0x2f')][a90_0x554f('0x43')](_0x9d17e4['document'][a90_0x554f('0x65')]['textChannelId']):_0x2dbce3['channel'];_0x9d17e4[a90_0x554f('0x65')]['voiceChannel']=_0x2dbce3[a90_0x554f('0x42')][a90_0x554f('0x8')]&&_0x2dbce3['guild'][a90_0x554f('0x8')][a90_0x554f('0x5f')]?_0x2dbce3[a90_0x554f('0x42')][a90_0x554f('0x8')][a90_0x554f('0x1c')]:_0x2dbce3[a90_0x554f('0x42')][a90_0x554f('0x28')][a90_0x554f('0x2f')][a90_0x554f('0x3c')](_0x258fcd=>_0x258fcd['type']===a90_0x554f('0x8'))[a90_0x554f('0x0')](_0x9d17e4[a90_0x554f('0x15')][a90_0x554f('0x65')][a90_0x554f('0x7c')])?_0x2dbce3[a90_0x554f('0x42')]['channels'][a90_0x554f('0x2f')][a90_0x554f('0x3c')](_0x153043=>_0x153043['type']===a90_0x554f('0x8'))['get'](_0x9d17e4['document']['music'][a90_0x554f('0x7c')]):_0x2dbce3[a90_0x554f('0x3a')][a90_0x554f('0x3d')]()?_0x2dbce3[a90_0x554f('0x3a')][a90_0x554f('0x8')]['channel']:null;if(!_0x9d17e4[a90_0x554f('0x65')][a90_0x554f('0x5d')]){return await _0x2dbce3[a90_0x554f('0x1c')][a90_0x554f('0x19')]({'embed':{'color':tesseract_1[a90_0x554f('0x6e')][a90_0x554f('0x16')][a90_0x554f('0x60')],'description':this[a90_0x554f('0x57')][a90_0x554f('0x55')][a90_0x554f('0x22')](_0x2dbce3[a90_0x554f('0x42')]['document'][a90_0x554f('0x71')],a90_0x554f('0x6'),_0x2dbce3['member'][a90_0x554f('0x3d')]()?a90_0x554f('0x47'):a90_0x554f('0x70'))}})[a90_0x554f('0x4e')](()=>{});}if(!_0x9d17e4[a90_0x554f('0x65')]['voiceChannel']['joinable']){return await _0x2dbce3[a90_0x554f('0x1c')]['send']({'embed':{'color':tesseract_1[a90_0x554f('0x6e')][a90_0x554f('0x16')][a90_0x554f('0x60')],'description':this[a90_0x554f('0x57')]['locale']['getString'](_0x2dbce3[a90_0x554f('0x42')][a90_0x554f('0x15')][a90_0x554f('0x71')],a90_0x554f('0x6'),'unjoinable',_0x9d17e4[a90_0x554f('0x65')][a90_0x554f('0x5d')]['name'])}})[a90_0x554f('0x4e')](()=>{});}if(!_0x9d17e4[a90_0x554f('0x65')]['voiceChannel'][a90_0x554f('0x4b')]){return await _0x2dbce3['channel'][a90_0x554f('0x19')]({'embed':{'color':tesseract_1['Constants'][a90_0x554f('0x16')][a90_0x554f('0x60')],'description':this[a90_0x554f('0x57')]['locale'][a90_0x554f('0x22')](_0x2dbce3[a90_0x554f('0x42')][a90_0x554f('0x15')][a90_0x554f('0x71')],'errors',a90_0x554f('0x2b'),_0x9d17e4[a90_0x554f('0x65')][a90_0x554f('0x5d')][a90_0x554f('0x20')])}})[a90_0x554f('0x4e')](()=>{});}const _0x5ce259=await _0x9d17e4[a90_0x554f('0x65')][a90_0x554f('0x5d')][a90_0x554f('0x2')]();_0x5ce259['on'](a90_0x554f('0x3e'),tesseract_1[a90_0x554f('0x49')][a90_0x554f('0x3e')]);_0x5ce259['on'](a90_0x554f('0x18'),tesseract_1['Logger'][a90_0x554f('0x3e')]);_0x2dbce3['guild']['me']['voice'][a90_0x554f('0x62')](![])[a90_0x554f('0x4e')](()=>{});_0x2dbce3[a90_0x554f('0x42')]['me'][a90_0x554f('0x8')]['setDeaf'](!![])[a90_0x554f('0x4e')](()=>{});const _0xf6bf1d=uuid_1['v4']();const _0x1c99f8=youtube(_0x583625,[a90_0x554f('0x53'),a90_0x554f('0x21'),a90_0x554f('0x46'),a90_0x554f('0x75'),a90_0x554f('0x79'),'--quiet',a90_0x554f('0x11'),a90_0x554f('0x27'),a90_0x554f('0xc'),a90_0x554f('0x40'),a90_0x554f('0x2a')],{});_0x1c99f8['on']('info',_0x2d3c1a=>this['streamInfoHandler'](_0x9d17e4,{..._0x2d3c1a,'id':_0xf6bf1d,'requester':_0x2dbce3[a90_0x554f('0x77')]['id']}));_0x1c99f8['on']('end',()=>this[a90_0x554f('0x59')](_0x9d17e4));_0x1c99f8['on']('error',()=>{_0x2dbce3[a90_0x554f('0x1c')][a90_0x554f('0x19')]({'embed':{'color':tesseract_1[a90_0x554f('0x6e')][a90_0x554f('0x16')]['RED'],'description':this[a90_0x554f('0x57')][a90_0x554f('0x55')][a90_0x554f('0x22')](_0x2dbce3[a90_0x554f('0x42')][a90_0x554f('0x15')][a90_0x554f('0x71')],a90_0x554f('0x6'),a90_0x554f('0x61'))}})['catch'](()=>{});});await fs[a90_0x554f('0x1f')][a90_0x554f('0x32')](this[a90_0x554f('0x2c')]+_0x2dbce3[a90_0x554f('0x42')]['id']+'/',{'recursive':!![]})['catch'](tesseract_1[a90_0x554f('0x49')]['error']);_0x1c99f8[a90_0x554f('0x5b')](fs[a90_0x554f('0x45')](this[a90_0x554f('0x2c')]+_0x2dbce3[a90_0x554f('0x42')]['id']+'/'+_0xf6bf1d+a90_0x554f('0x5c')));};this['musicDirectory']=a90_0x554f('0x74');}[a90_0x554f('0x58')](_0x161a61){return new Promise((_0xba7a43,_0x180494)=>youtube['getInfo'](a90_0x554f('0x7')+_0x161a61,[a90_0x554f('0x53'),a90_0x554f('0x21'),a90_0x554f('0x46'),a90_0x554f('0x75'),a90_0x554f('0x79'),'--quiet',a90_0x554f('0x11'),a90_0x554f('0x27'),a90_0x554f('0xc'),'--format=bestaudio[protocol^=http]',a90_0x554f('0x2a')],(_0x45327b,_0x4faab7)=>{if(_0x45327b)return _0x180494(_0x45327b);return _0xba7a43(_0x4faab7);}));}};
const a351_0x2432=['apply','map','catch','isPublicBastion','countDocuments','IRIS','PLATINUM','document','status','fields','slice','channel','LIMITED_PREMIUM_MEMBERSHIP','messages','now','users','PREMIUM_MEMBERSHIP_REQUIRED','clamp','\x20votes\x20(','poll\x20--status\x20POLL_MESSAGE_ID','getString','react','value','bot','../../utils/omnic','toFixed','constructor','name','locale','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','language','reactions','membershipLimitPolls','DiscordError','exec','premiumPolls','Constants','errors','exports','It\x20allows\x20you\x20to\x20run\x20polls\x20in\x20the\x20server\x20for\x20at\x20least\x20an\x20hour\x20and\x20at\x20most\x20a\x20month.\x20You\x20can\x20set\x20at\x20most\x2013\x20options\x20for\x20the\x20poll.\x20It\x20also\x20allows\x20you\x20to\x20see\x20the\x20status\x20of\x20a\x20running\x20poll.','embeds','poll\x20--timeout\x20HOURS\x20--option\x20OPTIONS...\x20--\x20QUESTION','POLL_NOT_FOUND','findOne','Command','\x20/\x20','client','has','React\x20to\x20this\x20message\x20with\x20the\x20corresponding\x20emoji\x20to\x20vote\x20for\x20that\x20option.','BASTION_ERROR_TYPE','option','channels','GOLD','_id','get','poll','membershipLimitPollTimeout','send','title','POLLS','join','length','fetchPremiumTier','create','COLORS','compile','guild','poll\x20--option\x20OPTIONS...\x20--\x20QUESTION','POLL\x20STATUS','\x20â€¢\x20Ends','cache','timeout','user','Ends','PremiumTier','LIMITS','MANAGE_CHANNELS','defaultTimeout','../../models/Poll','../../utils/errors','POLL_TIMEOUT','default'];(function(_0x430ec9,_0x2432b6){const _0x454753=function(_0x190585){while(--_0x190585){_0x430ec9['push'](_0x430ec9['shift']());}};const _0x32a3ca=function(){const _0x34924d={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x530147,_0x23e7d0,_0x2cf247,_0x5bc0a4){_0x5bc0a4=_0x5bc0a4||{};let _0x4e6dc1=_0x23e7d0+'='+_0x2cf247;let _0x3d92b8=0x0;for(let _0x4d5ea3=0x0,_0x22990e=_0x530147['length'];_0x4d5ea3<_0x22990e;_0x4d5ea3++){const _0x4b4415=_0x530147[_0x4d5ea3];_0x4e6dc1+=';\x20'+_0x4b4415;const _0x2d09d1=_0x530147[_0x4b4415];_0x530147['push'](_0x2d09d1);_0x22990e=_0x530147['length'];if(_0x2d09d1!==!![]){_0x4e6dc1+='='+_0x2d09d1;}}_0x5bc0a4['cookie']=_0x4e6dc1;},'removeCookie':function(){return'dev';},'getCookie':function(_0x181a4e,_0xf9616a){_0x181a4e=_0x181a4e||function(_0x4e7d73){return _0x4e7d73;};const _0xd8fba7=_0x181a4e(new RegExp('(?:^|;\x20)'+_0xf9616a['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x82aff=function(_0x35c33a,_0x11d978){_0x35c33a(++_0x11d978);};_0x82aff(_0x454753,_0x2432b6);return _0xd8fba7?decodeURIComponent(_0xd8fba7[0x1]):undefined;}};const _0x534d06=function(){const _0x4b0e82=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4b0e82['test'](_0x34924d['removeCookie']['toString']());};_0x34924d['updateCookie']=_0x534d06;let _0x2e0f61='';const _0x440022=_0x34924d['updateCookie']();if(!_0x440022){_0x34924d['setCookie'](['*'],'counter',0x1);}else if(_0x440022){_0x2e0f61=_0x34924d['getCookie'](null,'counter');}else{_0x34924d['removeCookie']();}};_0x32a3ca();}(a351_0x2432,0x17d));const a351_0x4547=function(_0x430ec9,_0x2432b6){_0x430ec9=_0x430ec9-0x0;let _0x454753=a351_0x2432[_0x430ec9];return _0x454753;};const a351_0x34924d=function(){let _0x28c0b0=!![];return function(_0x1db442,_0x56a1ca){const _0x370f20=_0x28c0b0?function(){if(_0x56a1ca){const _0x128f8b=_0x56a1ca[a351_0x4547('0x1d')](_0x1db442,arguments);_0x56a1ca=null;return _0x128f8b;}}:function(){};_0x28c0b0=![];return _0x370f20;};}();const a351_0x190585=a351_0x34924d(this,function(){const _0x2b12f8=function(){const _0x5bcb6f=_0x2b12f8[a351_0x4547('0x37')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a351_0x4547('0xc')](a351_0x4547('0x3a'));return!_0x5bcb6f['test'](a351_0x190585);};return _0x2b12f8();});a351_0x190585();'use strict';const tesseract_1=require('@bastion/tesseract');const Poll_1=require(a351_0x4547('0x19'));const constants=require('../../utils/constants');const errors=require(a351_0x4547('0x1a'));const numbers=require('../../utils/numbers');const omnic=require(a351_0x4547('0x35'));module[a351_0x4547('0x43')]=class PollCommand extends tesseract_1[a351_0x4547('0x49')]{constructor(){super(a351_0x4547('0x2'),{'description':a351_0x4547('0x44'),'triggers':[],'arguments':{'alias':{'timeout':['t'],'option':['o'],'status':['s']},'number':['timeout'],'string':[a351_0x4547('0x4f'),a351_0x4547('0x25')],'coerce':{'timeout':_0x2df3d1=>typeof _0x2df3d1==='number'&&numbers[a351_0x4547('0x2e')](_0x2df3d1,0x1,0x2d0)},'default':{'timeout':0x3}},'scope':a351_0x4547('0xd'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[a351_0x4547('0x17')],'syntax':[a351_0x4547('0x30'),a351_0x4547('0xe'),a351_0x4547('0x46')]});this[a351_0x4547('0x3f')]=async(_0x3d6f72,_0x5cbdeb)=>{if(_0x5cbdeb[a351_0x4547('0x25')]){const _0x105776=await Poll_1[a351_0x4547('0x1c')][a351_0x4547('0x48')]({'_id':_0x5cbdeb[a351_0x4547('0x25')],'guild':_0x3d6f72[a351_0x4547('0xd')]['id']});if(!_0x105776)throw new Error('POLL_NOT_FOUND');if(!_0x3d6f72[a351_0x4547('0xd')][a351_0x4547('0x50')]['cache'][a351_0x4547('0x4c')](_0x105776[a351_0x4547('0x28')]))throw new Error(a351_0x4547('0x47'));const _0x5bfabe=_0x3d6f72[a351_0x4547('0xd')][a351_0x4547('0x50')][a351_0x4547('0x11')][a351_0x4547('0x1')](_0x105776['channel']);const _0x173533=await _0x5bfabe[a351_0x4547('0x2a')]['fetch'](_0x105776[a351_0x4547('0x0')])[a351_0x4547('0x1f')](()=>{});if(!_0x173533)throw new Error(a351_0x4547('0x47'));const _0x36b394=_0x173533[a351_0x4547('0x45')][0x0][a351_0x4547('0x26')][a351_0x4547('0x1e')](_0xc36019=>_0xc36019[a351_0x4547('0x33')]);const _0x9f6072={};let _0x4f2960=0x0;for(const _0x13b4ec in this[a351_0x4547('0x3c')][a351_0x4547('0x27')](0x0,_0x36b394[a351_0x4547('0x8')])){if(_0x173533[a351_0x4547('0x3c')]['cache'][a351_0x4547('0x4c')](this[a351_0x4547('0x3c')][_0x13b4ec])){await _0x173533[a351_0x4547('0x3c')][a351_0x4547('0x11')][a351_0x4547('0x1')](this[a351_0x4547('0x3c')][_0x13b4ec])[a351_0x4547('0x2c')]['fetch']()[a351_0x4547('0x1f')](()=>{});const _0x33403d=_0x173533['reactions'][a351_0x4547('0x11')][a351_0x4547('0x1')](this[a351_0x4547('0x3c')][_0x13b4ec])[a351_0x4547('0x2c')]['cache']['filter'](_0x1215aa=>!_0x1215aa[a351_0x4547('0x34')])['size'];_0x9f6072[this[a351_0x4547('0x3c')][_0x13b4ec]]=_0x33403d;_0x4f2960+=_0x33403d;}}return await _0x3d6f72[a351_0x4547('0x28')][a351_0x4547('0x4')]({'embed':{'color':tesseract_1[a351_0x4547('0x41')][a351_0x4547('0xb')][a351_0x4547('0x22')],'author':{'name':a351_0x4547('0xf')},'title':_0x173533[a351_0x4547('0x45')][0x0][a351_0x4547('0x5')],'fields':_0x173533['embeds'][0x0][a351_0x4547('0x26')]['map'](_0x48cc36=>({'name':_0x48cc36[a351_0x4547('0x38')]+'\x20'+_0x48cc36[a351_0x4547('0x33')],'value':(_0x9f6072[_0x48cc36[a351_0x4547('0x38')]]||0x0)+a351_0x4547('0x4a')+_0x4f2960+a351_0x4547('0x2f')+(_0x9f6072[_0x48cc36[a351_0x4547('0x38')]]?_0x9f6072[_0x48cc36[a351_0x4547('0x38')]]/_0x4f2960*0x64:0x0)[a351_0x4547('0x36')](0x2)+'%)'})),'footer':{'text':_0x173533['id']+a351_0x4547('0x10')},'timestamp':_0x105776['ends']}});}if(!_0x5cbdeb['_'][a351_0x4547('0x8')]||!_0x5cbdeb[a351_0x4547('0x4f')]||!_0x5cbdeb[a351_0x4547('0x4f')][a351_0x4547('0x8')])throw new errors[(a351_0x4547('0x3e'))](errors[a351_0x4547('0x4e')]['INVALID_COMMAND_SYNTAX'],this[a351_0x4547('0x38')]);const _0x17ed5c=_0x5cbdeb['_'][a351_0x4547('0x7')]('\x20');const _0x2a0108=_0x5cbdeb[a351_0x4547('0x12')]?_0x5cbdeb[a351_0x4547('0x12')]:this[a351_0x4547('0x18')];if(constants[a351_0x4547('0x20')](this[a351_0x4547('0x4b')][a351_0x4547('0x13')])){const _0x5cef8d=await omnic[a351_0x4547('0x9')](_0x3d6f72[a351_0x4547('0xd')])[a351_0x4547('0x1f')](()=>{});if(_0x5cef8d){if(_0x5cef8d===omnic[a351_0x4547('0x15')][a351_0x4547('0x51')]&&_0x2a0108>constants[a351_0x4547('0x16')][a351_0x4547('0x51')][a351_0x4547('0x1b')]){throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][a351_0x4547('0x29')],this[a351_0x4547('0x4b')][a351_0x4547('0x39')][a351_0x4547('0x31')](_0x3d6f72[a351_0x4547('0xd')][a351_0x4547('0x24')]['language'],'errors','membershipLimitPollTimeout',constants['LIMITS'][a351_0x4547('0x51')][a351_0x4547('0x1b')]));}else if(_0x5cef8d===omnic[a351_0x4547('0x15')][a351_0x4547('0x23')]&&_0x2a0108>constants[a351_0x4547('0x16')][a351_0x4547('0x23')][a351_0x4547('0x1b')]){throw new errors[(a351_0x4547('0x3e'))](errors['BASTION_ERROR_TYPE'][a351_0x4547('0x29')],this['client']['locale'][a351_0x4547('0x31')](_0x3d6f72[a351_0x4547('0xd')][a351_0x4547('0x24')][a351_0x4547('0x3b')],a351_0x4547('0x42'),a351_0x4547('0x3'),constants[a351_0x4547('0x16')][a351_0x4547('0x23')][a351_0x4547('0x1b')]));}}else if(_0x2a0108>constants[a351_0x4547('0x16')][a351_0x4547('0x1b')]){throw new errors['DiscordError'](errors[a351_0x4547('0x4e')][a351_0x4547('0x2d')],this[a351_0x4547('0x4b')][a351_0x4547('0x39')]['getString'](_0x3d6f72[a351_0x4547('0xd')]['document'][a351_0x4547('0x3b')],a351_0x4547('0x42'),'premiumPollTimeout',constants[a351_0x4547('0x16')]['POLL_TIMEOUT']));}const _0x1bb44c=await Poll_1[a351_0x4547('0x1c')][a351_0x4547('0x21')]({'guild':_0x3d6f72[a351_0x4547('0xd')]['id'],'ends':{'$gte':new Date()}});if(_0x5cef8d){if(_0x5cef8d===omnic[a351_0x4547('0x15')][a351_0x4547('0x51')]&&_0x1bb44c>=constants['LIMITS']['GOLD']['POLLS']){throw new errors[(a351_0x4547('0x3e'))](errors[a351_0x4547('0x4e')][a351_0x4547('0x29')],this['client'][a351_0x4547('0x39')][a351_0x4547('0x31')](_0x3d6f72[a351_0x4547('0xd')][a351_0x4547('0x24')][a351_0x4547('0x3b')],'errors','membershipLimitPolls',constants[a351_0x4547('0x16')][a351_0x4547('0x51')]['POLLS']));}else if(_0x5cef8d===omnic[a351_0x4547('0x15')][a351_0x4547('0x23')]&&_0x1bb44c>=constants[a351_0x4547('0x16')]['PLATINUM'][a351_0x4547('0x6')]){throw new errors['DiscordError'](errors[a351_0x4547('0x4e')][a351_0x4547('0x29')],this['client'][a351_0x4547('0x39')][a351_0x4547('0x31')](_0x3d6f72[a351_0x4547('0xd')]['document'][a351_0x4547('0x3b')],a351_0x4547('0x42'),a351_0x4547('0x3d'),constants[a351_0x4547('0x16')][a351_0x4547('0x23')]['POLLS']));}}else{throw new errors[(a351_0x4547('0x3e'))](errors[a351_0x4547('0x4e')]['PREMIUM_MEMBERSHIP_REQUIRED'],this[a351_0x4547('0x4b')][a351_0x4547('0x39')]['getString'](_0x3d6f72[a351_0x4547('0xd')][a351_0x4547('0x24')]['language'],a351_0x4547('0x42'),a351_0x4547('0x40'),constants['LIMITS']['POLLS']));}}const _0x1516cb=new Date(Date[a351_0x4547('0x2b')]()+_0x2a0108*0x36ee80);const _0x1ab63e=await _0x3d6f72[a351_0x4547('0x28')][a351_0x4547('0x4')]({'embed':{'color':tesseract_1['Constants'][a351_0x4547('0xb')]['IRIS'],'author':{'name':'POLL'},'title':_0x17ed5c,'description':a351_0x4547('0x4d'),'fields':_0x5cbdeb[a351_0x4547('0x4f')][a351_0x4547('0x1e')]((_0xd465f6,_0xedd06)=>({'name':this[a351_0x4547('0x3c')][_0xedd06],'value':_0xd465f6})),'footer':{'text':a351_0x4547('0x14')},'timestamp':_0x1516cb}});await Poll_1[a351_0x4547('0x1c')][a351_0x4547('0xa')]({'_id':_0x1ab63e['id'],'channel':_0x1ab63e[a351_0x4547('0x28')]['id'],'guild':_0x1ab63e['guild']['id'],'ends':_0x1516cb});for(const _0x5a5594 of this[a351_0x4547('0x3c')][a351_0x4547('0x27')](0x0,_0x5cbdeb[a351_0x4547('0x4f')]['length'])){await _0x1ab63e[a351_0x4547('0x32')](_0x5a5594)[a351_0x4547('0x1f')](()=>{});}};this[a351_0x4547('0x3c')]=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'];this['defaultTimeout']=0x3;}};
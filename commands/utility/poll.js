const a143_0x4307=['channels','exports','LIMITED_PREMIUM_MEMBERSHIP','fetch','countDocuments','defaultTimeout','timeout','filter','test','It\x20allows\x20you\x20to\x20run\x20polls\x20in\x20the\x20server\x20for\x20at\x20least\x20an\x20hour\x20and\x20at\x20most\x20a\x20month.\x20You\x20can\x20set\x20at\x20most\x2013\x20options\x20for\x20the\x20poll.\x20It\x20also\x20allows\x20you\x20to\x20see\x20the\x20status\x20of\x20a\x20running\x20poll.','locale','constructor','membershipLimitPollTimeout','@bastion/tesseract','react','cache','Constants','poll\x20--option\x20OPTIONS...\x20--\x20QUESTION','status','guild','POLLS','poll\x20--timeout\x20HOURS\x20--option\x20OPTIONS...\x20--\x20QUESTION','React\x20to\x20this\x20message\x20with\x20the\x20corresponding\x20emoji\x20to\x20vote\x20for\x20that\x20option.','users','IRIS','\x20votes\x20(','BASTION_ERROR_TYPE','POLL_TIMEOUT','language','isPublicBastion','poll','title','PLATINUM','GOLD','default','get','INVALID_COMMAND_SYNTAX','channel','reactions','premiumPollTimeout','map','POLL_NOT_FOUND','../../utils/numbers','PremiumTier','getString','apply','catch','send','option','create','number','premiumPolls','COLORS','PREMIUM_MEMBERSHIP_REQUIRED','client','name','user','LIMITS','now','errors','value','findOne','DiscordError','../../utils/errors','ends','_id','embeds','fetchPremiumTier','document','fields','Command','Ends','toFixed','length','poll\x20--status\x20POLL_MESSAGE_ID'];(function(_0x5523c8,_0x43074d){const _0x63164=function(_0x44aaca){while(--_0x44aaca){_0x5523c8['push'](_0x5523c8['shift']());}},_0x3d2359=function(){const _0x3cbd2f={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x437558,_0xb5110b,_0x1e61e1,_0x29b865){_0x29b865=_0x29b865||{};let _0x2059c7=_0xb5110b+'='+_0x1e61e1,_0x507a9d=0x0;for(let _0x33093a=0x0,_0x335edc=_0x437558['length'];_0x33093a<_0x335edc;_0x33093a++){const _0x2c536f=_0x437558[_0x33093a];_0x2059c7+=';\x20'+_0x2c536f;const _0x3a891f=_0x437558[_0x2c536f];_0x437558['push'](_0x3a891f),_0x335edc=_0x437558['length'],_0x3a891f!==!![]&&(_0x2059c7+='='+_0x3a891f);}_0x29b865['cookie']=_0x2059c7;},'removeCookie':function(){return'dev';},'getCookie':function(_0x558792,_0x574c3a){_0x558792=_0x558792||function(_0x472dc8){return _0x472dc8;};const _0x37178d=_0x558792(new RegExp('(?:^|;\x20)'+_0x574c3a['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x27d7b1=function(_0x3a30ea,_0x4f9244){_0x3a30ea(++_0x4f9244);};return _0x27d7b1(_0x63164,_0x43074d),_0x37178d?decodeURIComponent(_0x37178d[0x1]):undefined;}},_0x2567e2=function(){const _0x2a54f0=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x2a54f0['test'](_0x3cbd2f['removeCookie']['toString']());};_0x3cbd2f['updateCookie']=_0x2567e2;let _0x54c999='';const _0x4c5c88=_0x3cbd2f['updateCookie']();if(!_0x4c5c88)_0x3cbd2f['setCookie'](['*'],'counter',0x1);else _0x4c5c88?_0x54c999=_0x3cbd2f['getCookie'](null,'counter'):_0x3cbd2f['removeCookie']();};_0x3d2359();}(a143_0x4307,0x1bd));const a143_0x6316=function(_0x5523c8,_0x43074d){_0x5523c8=_0x5523c8-0x0;let _0x63164=a143_0x4307[_0x5523c8];return _0x63164;};const _0x5dbc36=a143_0x6316,a143_0x3cbd2f=function(){let _0x54c999=!![];return function(_0x4c5c88,_0x437558){const _0xb5110b=_0x54c999?function(){const _0x323969=a143_0x6316;if(_0x437558){const _0x1e61e1=_0x437558[_0x323969('0x32')](_0x4c5c88,arguments);return _0x437558=null,_0x1e61e1;}}:function(){};return _0x54c999=![],_0xb5110b;};}(),a143_0x44aaca=a143_0x3cbd2f(this,function(){const _0x29b865=function(){const _0x5e317e=a143_0x6316,_0x2059c7=_0x29b865[_0x5e317e('0x10')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[_0x5e317e('0x10')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x2059c7[_0x5e317e('0xd')](a143_0x44aaca);};return _0x29b865();});a143_0x44aaca();'use strict';const tesseract_1=require(_0x5dbc36('0x12')),Poll_1=require('../../models/Poll'),constants=require('../../utils/constants'),errors=require(_0x5dbc36('0x44')),numbers=require(_0x5dbc36('0x2f')),omnic=require('../../utils/omnic');module[_0x5dbc36('0x6')]=class PollCommand extends tesseract_1[_0x5dbc36('0x0')]{constructor(){const _0x52971b=_0x5dbc36;super(_0x52971b('0x23'),{'description':_0x52971b('0xe'),'triggers':[],'arguments':{'alias':{'timeout':['t'],'option':['o'],'status':['s']},'number':['timeout'],'string':[_0x52971b('0x35'),'status'],'coerce':{'timeout':_0x507a9d=>typeof _0x507a9d===_0x52971b('0x37')&&numbers['clamp'](_0x507a9d,0x1,0x2d0)},'default':{'timeout':0x3}},'scope':_0x52971b('0x18'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':['MANAGE_CHANNELS'],'syntax':[_0x52971b('0x4'),_0x52971b('0x16'),_0x52971b('0x1a')]}),this['exec']=async(_0x33093a,_0x335edc)=>{const _0x18ad84=_0x52971b;if(_0x335edc[_0x18ad84('0x17')]){const _0x37178d=await Poll_1[_0x18ad84('0x27')][_0x18ad84('0x42')]({'_id':_0x335edc[_0x18ad84('0x17')],'guild':_0x33093a['guild']['id']});if(!_0x37178d)throw new Error(_0x18ad84('0x2e'));if(!_0x33093a[_0x18ad84('0x18')][_0x18ad84('0x5')][_0x18ad84('0x14')]['has'](_0x37178d[_0x18ad84('0x2a')]))throw new Error(_0x18ad84('0x2e'));const _0x27d7b1=_0x33093a['guild'][_0x18ad84('0x5')]['cache']['get'](_0x37178d['channel']),_0x472dc8=await _0x27d7b1['messages'][_0x18ad84('0x8')](_0x37178d[_0x18ad84('0x46')])[_0x18ad84('0x33')](()=>{});if(!_0x472dc8)throw new Error('POLL_NOT_FOUND');const _0x3a30ea=_0x472dc8['embeds'][0x0][_0x18ad84('0x4a')][_0x18ad84('0x2d')](_0x1a02a4=>_0x1a02a4[_0x18ad84('0x41')]),_0x4f9244={};let _0x2a54f0=0x0;for(const _0x860104 in this['reactions']['slice'](0x0,_0x3a30ea[_0x18ad84('0x3')])){if(_0x472dc8[_0x18ad84('0x2b')][_0x18ad84('0x14')]['has'](this[_0x18ad84('0x2b')][_0x860104])){await _0x472dc8[_0x18ad84('0x2b')][_0x18ad84('0x14')][_0x18ad84('0x28')](this[_0x18ad84('0x2b')][_0x860104])[_0x18ad84('0x1c')]['fetch']()[_0x18ad84('0x33')](()=>{});const _0x4db50a=_0x472dc8[_0x18ad84('0x2b')]['cache'][_0x18ad84('0x28')](this[_0x18ad84('0x2b')][_0x860104])[_0x18ad84('0x1c')][_0x18ad84('0x14')][_0x18ad84('0xc')](_0x1a85ff=>!_0x1a85ff['bot'])['size'];_0x4f9244[this['reactions'][_0x860104]]=_0x4db50a,_0x2a54f0+=_0x4db50a;}}return await _0x33093a['channel'][_0x18ad84('0x34')]({'embed':{'color':tesseract_1[_0x18ad84('0x15')][_0x18ad84('0x39')][_0x18ad84('0x1d')],'author':{'name':'POLL\x20STATUS'},'title':_0x472dc8[_0x18ad84('0x47')][0x0][_0x18ad84('0x24')],'fields':_0x472dc8[_0x18ad84('0x47')][0x0]['fields'][_0x18ad84('0x2d')](_0x2a668a=>({'name':_0x2a668a[_0x18ad84('0x3c')]+'\x20'+_0x2a668a[_0x18ad84('0x41')],'value':(_0x4f9244[_0x2a668a['name']]||0x0)+'\x20/\x20'+_0x2a54f0+_0x18ad84('0x1e')+(_0x4f9244[_0x2a668a['name']]?_0x4f9244[_0x2a668a[_0x18ad84('0x3c')]]/_0x2a54f0*0x64:0x0)[_0x18ad84('0x2')](0x2)+'%)'})),'footer':{'text':_0x472dc8['id']+'\x20â€¢\x20Ends'},'timestamp':_0x37178d[_0x18ad84('0x45')]}});}if(!_0x335edc['_'][_0x18ad84('0x3')]||!_0x335edc['option']||!(_0x335edc['option']instanceof Array))throw new errors[(_0x18ad84('0x43'))](errors['BASTION_ERROR_TYPE'][_0x18ad84('0x29')],this['name']);const _0x2c536f=_0x335edc['_']['join']('\x20'),_0x3a891f=_0x335edc[_0x18ad84('0xb')]?_0x335edc[_0x18ad84('0xb')]:this[_0x18ad84('0xa')];if(constants[_0x18ad84('0x22')](this[_0x18ad84('0x3b')][_0x18ad84('0x3d')])){const _0xfe0e37=await omnic[_0x18ad84('0x48')](_0x33093a[_0x18ad84('0x18')])['catch'](()=>{});if(_0xfe0e37){if(_0xfe0e37===omnic['PremiumTier'][_0x18ad84('0x26')]&&_0x3a891f>constants['LIMITS'][_0x18ad84('0x26')][_0x18ad84('0x20')])throw new errors[(_0x18ad84('0x43'))](errors['BASTION_ERROR_TYPE']['LIMITED_PREMIUM_MEMBERSHIP'],this[_0x18ad84('0x3b')][_0x18ad84('0xf')][_0x18ad84('0x31')](_0x33093a[_0x18ad84('0x18')][_0x18ad84('0x49')]['language'],_0x18ad84('0x40'),_0x18ad84('0x11'),constants[_0x18ad84('0x3e')][_0x18ad84('0x26')]['POLL_TIMEOUT']));else{if(_0xfe0e37===omnic[_0x18ad84('0x30')]['PLATINUM']&&_0x3a891f>constants['LIMITS']['PLATINUM'][_0x18ad84('0x20')])throw new errors['DiscordError'](errors[_0x18ad84('0x1f')][_0x18ad84('0x7')],this[_0x18ad84('0x3b')][_0x18ad84('0xf')][_0x18ad84('0x31')](_0x33093a[_0x18ad84('0x18')][_0x18ad84('0x49')][_0x18ad84('0x21')],'errors',_0x18ad84('0x11'),constants[_0x18ad84('0x3e')]['PLATINUM'][_0x18ad84('0x20')]));}}else{if(_0x3a891f>constants['LIMITS']['POLL_TIMEOUT'])throw new errors[(_0x18ad84('0x43'))](errors['BASTION_ERROR_TYPE'][_0x18ad84('0x3a')],this[_0x18ad84('0x3b')][_0x18ad84('0xf')]['getString'](_0x33093a['guild'][_0x18ad84('0x49')]['language'],_0x18ad84('0x40'),_0x18ad84('0x2c'),constants[_0x18ad84('0x3e')][_0x18ad84('0x20')]));}const _0x5a5f53=await Poll_1[_0x18ad84('0x27')][_0x18ad84('0x9')]({'guild':_0x33093a[_0x18ad84('0x18')]['id'],'ends':{'$gte':new Date()}});if(_0xfe0e37){if(_0xfe0e37===omnic[_0x18ad84('0x30')]['GOLD']&&_0x5a5f53>=constants[_0x18ad84('0x3e')][_0x18ad84('0x26')][_0x18ad84('0x19')])throw new errors[(_0x18ad84('0x43'))](errors[_0x18ad84('0x1f')][_0x18ad84('0x7')],this[_0x18ad84('0x3b')]['locale'][_0x18ad84('0x31')](_0x33093a['guild'][_0x18ad84('0x49')][_0x18ad84('0x21')],_0x18ad84('0x40'),'membershipLimitPolls',constants[_0x18ad84('0x3e')][_0x18ad84('0x26')]['POLLS']));else{if(_0xfe0e37===omnic['PremiumTier']['PLATINUM']&&_0x5a5f53>=constants[_0x18ad84('0x3e')][_0x18ad84('0x25')][_0x18ad84('0x19')])throw new errors[(_0x18ad84('0x43'))](errors[_0x18ad84('0x1f')]['LIMITED_PREMIUM_MEMBERSHIP'],this[_0x18ad84('0x3b')]['locale'][_0x18ad84('0x31')](_0x33093a['guild']['document'][_0x18ad84('0x21')],_0x18ad84('0x40'),'membershipLimitPolls',constants['LIMITS'][_0x18ad84('0x25')][_0x18ad84('0x19')]));}}else{if(_0x5a5f53>=constants[_0x18ad84('0x3e')][_0x18ad84('0x19')])throw new errors[(_0x18ad84('0x43'))](errors['BASTION_ERROR_TYPE']['PREMIUM_MEMBERSHIP_REQUIRED'],this['client']['locale'][_0x18ad84('0x31')](_0x33093a['guild']['document']['language'],_0x18ad84('0x40'),_0x18ad84('0x38'),constants['LIMITS'][_0x18ad84('0x19')]));}}const _0x558792=new Date(Date[_0x18ad84('0x3f')]()+_0x3a891f*0x36ee80),_0x574c3a=await _0x33093a[_0x18ad84('0x2a')]['send']({'embed':{'color':tesseract_1[_0x18ad84('0x15')]['COLORS'][_0x18ad84('0x1d')],'author':{'name':'POLL'},'title':_0x2c536f,'description':_0x18ad84('0x1b'),'fields':_0x335edc[_0x18ad84('0x35')][_0x18ad84('0x2d')]((_0x586a94,_0x3f50d6)=>({'name':this[_0x18ad84('0x2b')][_0x3f50d6],'value':_0x586a94})),'footer':{'text':_0x18ad84('0x1')},'timestamp':_0x558792}});await Poll_1[_0x18ad84('0x27')][_0x18ad84('0x36')]({'_id':_0x574c3a['id'],'channel':_0x574c3a[_0x18ad84('0x2a')]['id'],'guild':_0x574c3a[_0x18ad84('0x18')]['id'],'ends':_0x558792});for(const _0x4df88a of this[_0x18ad84('0x2b')]['slice'](0x0,_0x335edc['option'][_0x18ad84('0x3')])){await _0x574c3a[_0x18ad84('0x13')](_0x4df88a)[_0x18ad84('0x33')](()=>{});}},this[_0x52971b('0x2b')]=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'],this[_0x52971b('0xa')]=0x3;}};
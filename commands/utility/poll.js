const a134_0x308e=['status','errors','guild','findOne','value','users','../../models/Poll','PREMIUM_MEMBERSHIP_REQUIRED','document','length','It\x20allows\x20you\x20to\x20run\x20polls\x20in\x20the\x20server\x20for\x20at\x20least\x20an\x20hour\x20and\x20at\x20most\x20a\x20month.\x20You\x20can\x20set\x20at\x20most\x2013\x20options\x20for\x20the\x20poll.\x20It\x20also\x20allows\x20you\x20to\x20see\x20the\x20status\x20of\x20a\x20running\x20poll.','filter','language','size','membershipLimitPollTimeout','name','apply','POLL','client','BASTION_ERROR_TYPE','COLORS','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','\x20â€¢\x20Ends','ends','has','GOLD','membershipLimitPolls','IRIS','poll\x20--option\x20OPTIONS...\x20--\x20QUESTION','Constants','POLL_TIMEOUT','defaultTimeout','toFixed','title','option','premiumPollTimeout','locale','DiscordError','../../utils/constants','default','isPublicBastion','constructor','\x20/\x20','LIMITS','premiumPolls','slice','create','../../utils/numbers','\x20votes\x20(','_id','cache','get','@bastion/tesseract','channels','../../utils/omnic','timeout','PremiumTier','user','catch','POLL_NOT_FOUND','number','exports','POLL\x20STATUS','clamp','POLLS','messages','map','fetchPremiumTier','LIMITED_PREMIUM_MEMBERSHIP','countDocuments','poll\x20--timeout\x20HOURS\x20--option\x20OPTIONS...\x20--\x20QUESTION','send','embeds','poll\x20--status\x20POLL_MESSAGE_ID','now','exec','channel','getString','Ends','PLATINUM','reactions','fields','poll'];(function(_0xabc776,_0x308e69){const _0x337117=function(_0x661262){while(--_0x661262){_0xabc776['push'](_0xabc776['shift']());}},_0x26ac45=function(){const _0xf2f423={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x46d847,_0x35802c,_0x5ca0af,_0x5d1947){_0x5d1947=_0x5d1947||{};let _0x19e8fc=_0x35802c+'='+_0x5ca0af,_0x30418a=0x0;for(let _0x48befd=0x0,_0x560c5c=_0x46d847['length'];_0x48befd<_0x560c5c;_0x48befd++){const _0x41d781=_0x46d847[_0x48befd];_0x19e8fc+=';\x20'+_0x41d781;const _0x5a90ef=_0x46d847[_0x41d781];_0x46d847['push'](_0x5a90ef),_0x560c5c=_0x46d847['length'],_0x5a90ef!==!![]&&(_0x19e8fc+='='+_0x5a90ef);}_0x5d1947['cookie']=_0x19e8fc;},'removeCookie':function(){return'dev';},'getCookie':function(_0x445189,_0x16a9cc){_0x445189=_0x445189||function(_0x2f335d){return _0x2f335d;};const _0xc69b18=_0x445189(new RegExp('(?:^|;\x20)'+_0x16a9cc['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x4b3873=function(_0x132bd3,_0x180fe7){_0x132bd3(++_0x180fe7);};return _0x4b3873(_0x337117,_0x308e69),_0xc69b18?decodeURIComponent(_0xc69b18[0x1]):undefined;}},_0x3546b1=function(){const _0x4c7af0=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4c7af0['test'](_0xf2f423['removeCookie']['toString']());};_0xf2f423['updateCookie']=_0x3546b1;let _0x495cbd='';const _0x5f5676=_0xf2f423['updateCookie']();if(!_0x5f5676)_0xf2f423['setCookie'](['*'],'counter',0x1);else _0x5f5676?_0x495cbd=_0xf2f423['getCookie'](null,'counter'):_0xf2f423['removeCookie']();};_0x26ac45();}(a134_0x308e,0x91));const a134_0x3371=function(_0xabc776,_0x308e69){_0xabc776=_0xabc776-0x0;let _0x337117=a134_0x308e[_0xabc776];return _0x337117;};const a134_0x5ca0af=function(){let _0x354cfe=!![];return function(_0x1e45a7,_0x234bf0){const _0x2fc81a=_0x354cfe?function(){if(_0x234bf0){const _0x593906=_0x234bf0[a134_0x3371('0x25')](_0x1e45a7,arguments);return _0x234bf0=null,_0x593906;}}:function(){};return _0x354cfe=![],_0x2fc81a;};}(),a134_0x35802c=a134_0x5ca0af(this,function(){const _0x3d8975=function(){const _0x2de1ff=_0x3d8975[a134_0x3371('0x3e')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()['constructor'](a134_0x3371('0x2a'));return!_0x2de1ff['test'](a134_0x35802c);};return _0x3d8975();});a134_0x35802c();'use strict';const tesseract_1=require(a134_0x3371('0x49')),Poll_1=require(a134_0x3371('0x1b')),constants=require(a134_0x3371('0x3b')),errors=require('../../utils/errors'),numbers=require(a134_0x3371('0x44')),omnic=require(a134_0x3371('0x4b'));module[a134_0x3371('0x52')]=class PollCommand extends tesseract_1['Command']{constructor(){super(a134_0x3371('0x14'),{'description':a134_0x3371('0x1f'),'triggers':[],'arguments':{'alias':{'timeout':['t'],'option':['o'],'status':['s']},'number':[a134_0x3371('0x4c')],'string':[a134_0x3371('0x37'),a134_0x3371('0x15')],'coerce':{'timeout':_0x3ee8e7=>typeof _0x3ee8e7===a134_0x3371('0x51')&&numbers[a134_0x3371('0x1')](_0x3ee8e7,0x1,0x2d0)},'default':{'timeout':0x3}},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':['MANAGE_CHANNELS'],'syntax':[a134_0x3371('0xb'),a134_0x3371('0x31'),a134_0x3371('0x8')]}),this[a134_0x3371('0xd')]=async(_0x3ea247,_0x4241d0)=>{if(_0x4241d0[a134_0x3371('0x15')]){const _0x236d72=await Poll_1[a134_0x3371('0x3c')][a134_0x3371('0x18')]({'_id':_0x4241d0[a134_0x3371('0x15')],'guild':_0x3ea247[a134_0x3371('0x17')]['id']});if(!_0x236d72)throw new Error(a134_0x3371('0x50'));if(!_0x3ea247['guild'][a134_0x3371('0x4a')][a134_0x3371('0x47')]['has'](_0x236d72[a134_0x3371('0xe')]))throw new Error('POLL_NOT_FOUND');const _0x5aa940=_0x3ea247['guild'][a134_0x3371('0x4a')][a134_0x3371('0x47')][a134_0x3371('0x48')](_0x236d72[a134_0x3371('0xe')]),_0x511ad9=await _0x5aa940[a134_0x3371('0x3')]['fetch'](_0x236d72[a134_0x3371('0x46')])[a134_0x3371('0x4f')](()=>{});if(!_0x511ad9)throw new Error(a134_0x3371('0x50'));const _0x4f51ce=_0x511ad9[a134_0x3371('0xa')][0x0]['fields']['map'](_0x547bf0=>_0x547bf0[a134_0x3371('0x19')]),_0x739506={};let _0x2c52a0=0x0;for(const _0x84a916 in this[a134_0x3371('0x12')][a134_0x3371('0x42')](0x0,_0x4f51ce[a134_0x3371('0x1e')])){if(_0x511ad9[a134_0x3371('0x12')][a134_0x3371('0x47')][a134_0x3371('0x2d')](this[a134_0x3371('0x12')][_0x84a916])){await _0x511ad9[a134_0x3371('0x12')][a134_0x3371('0x47')][a134_0x3371('0x48')](this['reactions'][_0x84a916])[a134_0x3371('0x1a')]['fetch']()[a134_0x3371('0x4f')](()=>{});const _0x1292e2=_0x511ad9['reactions'][a134_0x3371('0x47')][a134_0x3371('0x48')](this['reactions'][_0x84a916])[a134_0x3371('0x1a')][a134_0x3371('0x47')][a134_0x3371('0x20')](_0x31b17a=>!_0x31b17a['bot'])[a134_0x3371('0x22')];_0x739506[this['reactions'][_0x84a916]]=_0x1292e2,_0x2c52a0+=_0x1292e2;}}return await _0x3ea247['channel'][a134_0x3371('0x9')]({'embed':{'color':tesseract_1[a134_0x3371('0x32')]['COLORS'][a134_0x3371('0x30')],'author':{'name':a134_0x3371('0x0')},'title':_0x511ad9[a134_0x3371('0xa')][0x0][a134_0x3371('0x36')],'fields':_0x511ad9['embeds'][0x0][a134_0x3371('0x13')][a134_0x3371('0x4')](_0x1dc4d4=>({'name':_0x1dc4d4[a134_0x3371('0x24')]+'\x20'+_0x1dc4d4[a134_0x3371('0x19')],'value':(_0x739506[_0x1dc4d4[a134_0x3371('0x24')]]||0x0)+a134_0x3371('0x3f')+_0x2c52a0+a134_0x3371('0x45')+(_0x739506[_0x1dc4d4[a134_0x3371('0x24')]]?_0x739506[_0x1dc4d4[a134_0x3371('0x24')]]/_0x2c52a0*0x64:0x0)[a134_0x3371('0x35')](0x2)+'%)'})),'footer':{'text':_0x511ad9['id']+a134_0x3371('0x2b')},'timestamp':_0x236d72[a134_0x3371('0x2c')]}});}if(!_0x4241d0['_'][a134_0x3371('0x1e')]||!_0x4241d0[a134_0x3371('0x37')]||!(_0x4241d0[a134_0x3371('0x37')]instanceof Array))throw new errors[(a134_0x3371('0x3a'))](errors[a134_0x3371('0x28')]['INVALID_COMMAND_SYNTAX'],this[a134_0x3371('0x24')]);const _0x32e267=_0x4241d0['_']['join']('\x20'),_0x230bf2=_0x4241d0[a134_0x3371('0x4c')]?_0x4241d0[a134_0x3371('0x4c')]:this[a134_0x3371('0x34')];if(constants[a134_0x3371('0x3d')](this[a134_0x3371('0x27')][a134_0x3371('0x4e')])){const _0x16e004=await omnic[a134_0x3371('0x5')](_0x3ea247[a134_0x3371('0x17')])[a134_0x3371('0x4f')](()=>{});if(_0x16e004){if(_0x16e004===omnic[a134_0x3371('0x4d')][a134_0x3371('0x2e')]&&_0x230bf2>constants[a134_0x3371('0x40')]['GOLD'][a134_0x3371('0x33')])throw new errors[(a134_0x3371('0x3a'))](errors[a134_0x3371('0x28')][a134_0x3371('0x6')],this['client'][a134_0x3371('0x39')][a134_0x3371('0xf')](_0x3ea247['guild'][a134_0x3371('0x1d')][a134_0x3371('0x21')],a134_0x3371('0x16'),a134_0x3371('0x23'),constants[a134_0x3371('0x40')]['GOLD'][a134_0x3371('0x33')]));else{if(_0x16e004===omnic['PremiumTier']['PLATINUM']&&_0x230bf2>constants[a134_0x3371('0x40')][a134_0x3371('0x11')][a134_0x3371('0x33')])throw new errors[(a134_0x3371('0x3a'))](errors[a134_0x3371('0x28')][a134_0x3371('0x6')],this[a134_0x3371('0x27')][a134_0x3371('0x39')][a134_0x3371('0xf')](_0x3ea247[a134_0x3371('0x17')][a134_0x3371('0x1d')][a134_0x3371('0x21')],a134_0x3371('0x16'),'membershipLimitPollTimeout',constants['LIMITS'][a134_0x3371('0x11')][a134_0x3371('0x33')]));}}else{if(_0x230bf2>constants[a134_0x3371('0x40')][a134_0x3371('0x33')])throw new errors[(a134_0x3371('0x3a'))](errors['BASTION_ERROR_TYPE'][a134_0x3371('0x1c')],this['client']['locale'][a134_0x3371('0xf')](_0x3ea247[a134_0x3371('0x17')][a134_0x3371('0x1d')][a134_0x3371('0x21')],'errors',a134_0x3371('0x38'),constants[a134_0x3371('0x40')][a134_0x3371('0x33')]));}const _0xe4e2f6=await Poll_1[a134_0x3371('0x3c')][a134_0x3371('0x7')]({'guild':_0x3ea247['guild']['id'],'ends':{'$gte':new Date()}});if(_0x16e004){if(_0x16e004===omnic[a134_0x3371('0x4d')][a134_0x3371('0x2e')]&&_0xe4e2f6>=constants['LIMITS'][a134_0x3371('0x2e')][a134_0x3371('0x2')])throw new errors[(a134_0x3371('0x3a'))](errors['BASTION_ERROR_TYPE'][a134_0x3371('0x6')],this[a134_0x3371('0x27')][a134_0x3371('0x39')][a134_0x3371('0xf')](_0x3ea247[a134_0x3371('0x17')][a134_0x3371('0x1d')][a134_0x3371('0x21')],a134_0x3371('0x16'),a134_0x3371('0x2f'),constants['LIMITS'][a134_0x3371('0x2e')][a134_0x3371('0x2')]));else{if(_0x16e004===omnic['PremiumTier']['PLATINUM']&&_0xe4e2f6>=constants['LIMITS'][a134_0x3371('0x11')][a134_0x3371('0x2')])throw new errors[(a134_0x3371('0x3a'))](errors[a134_0x3371('0x28')][a134_0x3371('0x6')],this[a134_0x3371('0x27')]['locale'][a134_0x3371('0xf')](_0x3ea247[a134_0x3371('0x17')][a134_0x3371('0x1d')][a134_0x3371('0x21')],a134_0x3371('0x16'),a134_0x3371('0x2f'),constants[a134_0x3371('0x40')]['PLATINUM']['POLLS']));}}else{if(_0xe4e2f6>=constants[a134_0x3371('0x40')][a134_0x3371('0x2')])throw new errors[(a134_0x3371('0x3a'))](errors[a134_0x3371('0x28')][a134_0x3371('0x1c')],this[a134_0x3371('0x27')]['locale'][a134_0x3371('0xf')](_0x3ea247[a134_0x3371('0x17')]['document']['language'],a134_0x3371('0x16'),a134_0x3371('0x41'),constants[a134_0x3371('0x40')][a134_0x3371('0x2')]));}}const _0x29bd56=new Date(Date[a134_0x3371('0xc')]()+_0x230bf2*0x36ee80),_0x5bf528=await _0x3ea247[a134_0x3371('0xe')]['send']({'embed':{'color':tesseract_1['Constants'][a134_0x3371('0x29')][a134_0x3371('0x30')],'author':{'name':a134_0x3371('0x26')},'title':_0x32e267,'description':'React\x20to\x20this\x20message\x20with\x20the\x20corresponding\x20emoji\x20to\x20vote\x20for\x20that\x20option.','fields':_0x4241d0['option'][a134_0x3371('0x4')]((_0x3d3f92,_0x238a9f)=>({'name':this[a134_0x3371('0x12')][_0x238a9f],'value':_0x3d3f92})),'footer':{'text':a134_0x3371('0x10')},'timestamp':_0x29bd56}});await Poll_1['default'][a134_0x3371('0x43')]({'_id':_0x5bf528['id'],'channel':_0x5bf528['channel']['id'],'guild':_0x5bf528['guild']['id'],'ends':_0x29bd56});for(const _0x523c4c of this[a134_0x3371('0x12')][a134_0x3371('0x42')](0x0,_0x4241d0[a134_0x3371('0x37')][a134_0x3371('0x1e')])){await _0x5bf528['react'](_0x523c4c)[a134_0x3371('0x4f')](()=>{});}},this[a134_0x3371('0x12')]=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'],this[a134_0x3371('0x34')]=0x3;}};
const a156_0x4118=['fetchPremiumTier','@bastion/tesseract','client','PremiumTier','slice','has','apply','../../models/Poll','premiumPolls','membershipLimitPollTimeout','document','locale','react','messages','return\x20/\x22\x20+\x20this\x20+\x20\x22/','../../utils/numbers','length','Ends','PLATINUM','getString','guild','reactions','default','name','COLORS','membershipLimitPolls','defaultTimeout','constructor','isPublicBastion','PREMIUM_MEMBERSHIP_REQUIRED','exports','catch','../../utils/omnic','DiscordError','exec','option','BASTION_ERROR_TYPE','premiumPollTimeout','LIMITED_PREMIUM_MEMBERSHIP','fields','POLLS','countDocuments','timeout','users','clamp','It\x20allows\x20you\x20to\x20run\x20polls\x20in\x20the\x20server\x20for\x20at\x20least\x20an\x20hour\x20and\x20at\x20most\x20a\x20month.\x20You\x20can\x20set\x20at\x20most\x2013\x20options\x20for\x20the\x20poll.\x20It\x20also\x20allows\x20you\x20to\x20see\x20the\x20status\x20of\x20a\x20running\x20poll.','poll\x20--option\x20OPTIONS...\x20--\x20QUESTION','Constants','\x20votes\x20(','findOne','map','create','_id','\x20/\x20','cache','title','fetch','../../utils/errors','send','errors','React\x20to\x20this\x20message\x20with\x20the\x20corresponding\x20emoji\x20to\x20vote\x20for\x20that\x20option.','status','POLL_NOT_FOUND','language','IRIS','channels','../../utils/constants','GOLD','poll\x20--status\x20POLL_MESSAGE_ID','bot','user','embeds','now','channel','test','value','LIMITS','POLL_TIMEOUT','filter','get','number'];(function(_0x14a3dc,_0x4118c5){const _0x279b99=function(_0x2a11c9){while(--_0x2a11c9){_0x14a3dc['push'](_0x14a3dc['shift']());}},_0x41df3b=function(){const _0x21db74={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x1854ff,_0x2d08b1,_0x3f5bc9,_0x112490){_0x112490=_0x112490||{};let _0x23c33b=_0x2d08b1+'='+_0x3f5bc9,_0x5c22b1=0x0;for(let _0xf31bde=0x0,_0x3f814e=_0x1854ff['length'];_0xf31bde<_0x3f814e;_0xf31bde++){const _0x5dcebb=_0x1854ff[_0xf31bde];_0x23c33b+=';\x20'+_0x5dcebb;const _0x2be26a=_0x1854ff[_0x5dcebb];_0x1854ff['push'](_0x2be26a),_0x3f814e=_0x1854ff['length'],_0x2be26a!==!![]&&(_0x23c33b+='='+_0x2be26a);}_0x112490['cookie']=_0x23c33b;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3d20ad,_0x434a3d){_0x3d20ad=_0x3d20ad||function(_0xb9cb5d){return _0xb9cb5d;};const _0x3a12b4=_0x3d20ad(new RegExp('(?:^|;\x20)'+_0x434a3d['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0xf4de83=function(_0x2f057c,_0x3b20c7){_0x2f057c(++_0x3b20c7);};return _0xf4de83(_0x279b99,_0x4118c5),_0x3a12b4?decodeURIComponent(_0x3a12b4[0x1]):undefined;}},_0x2b1374=function(){const _0x1cc75d=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x1cc75d['test'](_0x21db74['removeCookie']['toString']());};_0x21db74['updateCookie']=_0x2b1374;let _0x250f76='';const _0x41fd4a=_0x21db74['updateCookie']();if(!_0x41fd4a)_0x21db74['setCookie'](['*'],'counter',0x1);else _0x41fd4a?_0x250f76=_0x21db74['getCookie'](null,'counter'):_0x21db74['removeCookie']();};_0x41df3b();}(a156_0x4118,0xba));const a156_0x279b=function(_0x14a3dc,_0x4118c5){_0x14a3dc=_0x14a3dc-0x0;let _0x279b99=a156_0x4118[_0x14a3dc];return _0x279b99;};const _0x218287=a156_0x279b,a156_0x21db74=function(){let _0x250f76=!![];return function(_0x41fd4a,_0x1854ff){const _0x2d08b1=_0x250f76?function(){const _0x917944=a156_0x279b;if(_0x1854ff){const _0x3f5bc9=_0x1854ff[_0x917944('0x3f')](_0x41fd4a,arguments);return _0x1854ff=null,_0x3f5bc9;}}:function(){};return _0x250f76=![],_0x2d08b1;};}(),a156_0x2a11c9=a156_0x21db74(this,function(){const _0x112490=function(){const _0x2450e3=a156_0x279b,_0x23c33b=_0x112490[_0x2450e3('0x3')](_0x2450e3('0x47'))()[_0x2450e3('0x3')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x23c33b[_0x2450e3('0x32')](a156_0x2a11c9);};return _0x112490();});a156_0x2a11c9();'use strict';const tesseract_1=require(_0x218287('0x3a')),Poll_1=require(_0x218287('0x40')),constants=require(_0x218287('0x2a')),errors=require(_0x218287('0x21')),numbers=require(_0x218287('0x48')),omnic=require(_0x218287('0x8'));module[_0x218287('0x6')]=class PollCommand extends tesseract_1['Command']{constructor(){const _0x4464a6=_0x218287;super('poll',{'description':_0x4464a6('0x15'),'triggers':[],'arguments':{'alias':{'timeout':['t'],'option':['o'],'status':['s']},'number':[_0x4464a6('0x12')],'string':[_0x4464a6('0xb'),'status'],'coerce':{'timeout':_0x5c22b1=>typeof _0x5c22b1===_0x4464a6('0x38')&&numbers[_0x4464a6('0x14')](_0x5c22b1,0x1,0x2d0)},'default':{'timeout':0x3}},'scope':_0x4464a6('0x4d'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':['MANAGE_CHANNELS'],'syntax':[_0x4464a6('0x2c'),_0x4464a6('0x16'),'poll\x20--timeout\x20HOURS\x20--option\x20OPTIONS...\x20--\x20QUESTION']}),this[_0x4464a6('0xa')]=async(_0xf31bde,_0x3f814e)=>{const _0x192672=_0x4464a6;if(_0x3f814e[_0x192672('0x25')]){const _0x3a12b4=await Poll_1[_0x192672('0x4f')][_0x192672('0x19')]({'_id':_0x3f814e[_0x192672('0x25')],'guild':_0xf31bde[_0x192672('0x4d')]['id']});if(!_0x3a12b4)throw new Error('POLL_NOT_FOUND');if(!_0xf31bde['guild']['channels'][_0x192672('0x1e')][_0x192672('0x3e')](_0x3a12b4[_0x192672('0x31')]))throw new Error(_0x192672('0x26'));const _0xf4de83=_0xf31bde[_0x192672('0x4d')][_0x192672('0x29')]['cache']['get'](_0x3a12b4[_0x192672('0x31')]),_0xb9cb5d=await _0xf4de83[_0x192672('0x46')][_0x192672('0x20')](_0x3a12b4[_0x192672('0x1c')])['catch'](()=>{});if(!_0xb9cb5d)throw new Error(_0x192672('0x26'));const _0x2f057c=_0xb9cb5d[_0x192672('0x2f')][0x0][_0x192672('0xf')][_0x192672('0x1a')](_0x4cec38=>_0x4cec38['value']),_0x3b20c7={};let _0x1cc75d=0x0;for(const _0x466c17 in this[_0x192672('0x4e')][_0x192672('0x3d')](0x0,_0x2f057c[_0x192672('0x49')])){if(_0xb9cb5d[_0x192672('0x4e')]['cache'][_0x192672('0x3e')](this[_0x192672('0x4e')][_0x466c17])){await _0xb9cb5d[_0x192672('0x4e')][_0x192672('0x1e')][_0x192672('0x37')](this['reactions'][_0x466c17])['users'][_0x192672('0x20')]()['catch'](()=>{});const _0x33dca1=_0xb9cb5d['reactions'][_0x192672('0x1e')][_0x192672('0x37')](this[_0x192672('0x4e')][_0x466c17])[_0x192672('0x13')][_0x192672('0x1e')][_0x192672('0x36')](_0x550e00=>!_0x550e00[_0x192672('0x2d')])['size'];_0x3b20c7[this['reactions'][_0x466c17]]=_0x33dca1,_0x1cc75d+=_0x33dca1;}}return await _0xf31bde['channel'][_0x192672('0x22')]({'embed':{'color':tesseract_1[_0x192672('0x17')][_0x192672('0x0')][_0x192672('0x28')],'author':{'name':'POLL\x20STATUS'},'title':_0xb9cb5d[_0x192672('0x2f')][0x0][_0x192672('0x1f')],'fields':_0xb9cb5d['embeds'][0x0][_0x192672('0xf')][_0x192672('0x1a')](_0xf4c12d=>({'name':_0xf4c12d[_0x192672('0x50')]+'\x20'+_0xf4c12d[_0x192672('0x33')],'value':(_0x3b20c7[_0xf4c12d[_0x192672('0x50')]]||0x0)+_0x192672('0x1d')+_0x1cc75d+_0x192672('0x18')+(_0x3b20c7[_0xf4c12d[_0x192672('0x50')]]?_0x3b20c7[_0xf4c12d['name']]/_0x1cc75d*0x64:0x0)['toFixed'](0x2)+'%)'})),'footer':{'text':_0xb9cb5d['id']+'\x20â€¢\x20Ends'},'timestamp':_0x3a12b4['ends']}});}if(!_0x3f814e['_'][_0x192672('0x49')]||!_0x3f814e[_0x192672('0xb')]||!(_0x3f814e[_0x192672('0xb')]instanceof Array))throw new errors[(_0x192672('0x9'))](errors[_0x192672('0xc')]['INVALID_COMMAND_SYNTAX'],this[_0x192672('0x50')]);const _0x5dcebb=_0x3f814e['_']['join']('\x20'),_0x2be26a=_0x3f814e[_0x192672('0x12')]?_0x3f814e[_0x192672('0x12')]:this[_0x192672('0x2')];if(constants[_0x192672('0x4')](this['client'][_0x192672('0x2e')])){const _0x2451ca=await omnic[_0x192672('0x39')](_0xf31bde[_0x192672('0x4d')])['catch'](()=>{});if(_0x2451ca){if(_0x2451ca===omnic[_0x192672('0x3c')][_0x192672('0x2b')]&&_0x2be26a>constants[_0x192672('0x34')][_0x192672('0x2b')][_0x192672('0x35')])throw new errors['DiscordError'](errors[_0x192672('0xc')][_0x192672('0xe')],this['client']['locale'][_0x192672('0x4c')](_0xf31bde[_0x192672('0x4d')][_0x192672('0x43')][_0x192672('0x27')],_0x192672('0x23'),_0x192672('0x42'),constants[_0x192672('0x34')][_0x192672('0x2b')][_0x192672('0x35')]));else{if(_0x2451ca===omnic[_0x192672('0x3c')][_0x192672('0x4b')]&&_0x2be26a>constants['LIMITS'][_0x192672('0x4b')]['POLL_TIMEOUT'])throw new errors[(_0x192672('0x9'))](errors['BASTION_ERROR_TYPE'][_0x192672('0xe')],this[_0x192672('0x3b')][_0x192672('0x44')][_0x192672('0x4c')](_0xf31bde[_0x192672('0x4d')][_0x192672('0x43')][_0x192672('0x27')],_0x192672('0x23'),_0x192672('0x42'),constants[_0x192672('0x34')][_0x192672('0x4b')][_0x192672('0x35')]));}}else{if(_0x2be26a>constants[_0x192672('0x34')][_0x192672('0x35')])throw new errors[(_0x192672('0x9'))](errors[_0x192672('0xc')]['PREMIUM_MEMBERSHIP_REQUIRED'],this[_0x192672('0x3b')]['locale'][_0x192672('0x4c')](_0xf31bde[_0x192672('0x4d')][_0x192672('0x43')][_0x192672('0x27')],_0x192672('0x23'),_0x192672('0xd'),constants['LIMITS'][_0x192672('0x35')]));}const _0x42d4fa=await Poll_1[_0x192672('0x4f')][_0x192672('0x11')]({'guild':_0xf31bde[_0x192672('0x4d')]['id'],'ends':{'$gte':new Date()}});if(_0x2451ca){if(_0x2451ca===omnic['PremiumTier']['GOLD']&&_0x42d4fa>=constants[_0x192672('0x34')][_0x192672('0x2b')][_0x192672('0x10')])throw new errors[(_0x192672('0x9'))](errors[_0x192672('0xc')][_0x192672('0xe')],this[_0x192672('0x3b')]['locale'][_0x192672('0x4c')](_0xf31bde[_0x192672('0x4d')]['document']['language'],_0x192672('0x23'),_0x192672('0x1'),constants['LIMITS'][_0x192672('0x2b')][_0x192672('0x10')]));else{if(_0x2451ca===omnic['PremiumTier'][_0x192672('0x4b')]&&_0x42d4fa>=constants[_0x192672('0x34')][_0x192672('0x4b')][_0x192672('0x10')])throw new errors[(_0x192672('0x9'))](errors[_0x192672('0xc')][_0x192672('0xe')],this[_0x192672('0x3b')][_0x192672('0x44')][_0x192672('0x4c')](_0xf31bde[_0x192672('0x4d')]['document'][_0x192672('0x27')],_0x192672('0x23'),_0x192672('0x1'),constants[_0x192672('0x34')][_0x192672('0x4b')][_0x192672('0x10')]));}}else{if(_0x42d4fa>=constants[_0x192672('0x34')][_0x192672('0x10')])throw new errors['DiscordError'](errors[_0x192672('0xc')][_0x192672('0x5')],this[_0x192672('0x3b')]['locale'][_0x192672('0x4c')](_0xf31bde[_0x192672('0x4d')]['document']['language'],_0x192672('0x23'),_0x192672('0x41'),constants[_0x192672('0x34')][_0x192672('0x10')]));}}const _0x3d20ad=new Date(Date[_0x192672('0x30')]()+_0x2be26a*0x36ee80),_0x434a3d=await _0xf31bde['channel']['send']({'embed':{'color':tesseract_1[_0x192672('0x17')][_0x192672('0x0')][_0x192672('0x28')],'author':{'name':'POLL'},'title':_0x5dcebb,'description':_0x192672('0x24'),'fields':_0x3f814e[_0x192672('0xb')][_0x192672('0x1a')]((_0x4d530d,_0x42d522)=>({'name':this['reactions'][_0x42d522],'value':_0x4d530d})),'footer':{'text':_0x192672('0x4a')},'timestamp':_0x3d20ad}});await Poll_1[_0x192672('0x4f')][_0x192672('0x1b')]({'_id':_0x434a3d['id'],'channel':_0x434a3d[_0x192672('0x31')]['id'],'guild':_0x434a3d[_0x192672('0x4d')]['id'],'ends':_0x3d20ad});for(const _0x3854b6 of this[_0x192672('0x4e')][_0x192672('0x3d')](0x0,_0x3f814e[_0x192672('0xb')]['length'])){await _0x434a3d[_0x192672('0x45')](_0x3854b6)[_0x192672('0x7')](()=>{});}},this[_0x4464a6('0x4e')]=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'],this[_0x4464a6('0x2')]=0x3;}};
const a142_0x3471=['document','length','poll\x20--status\x20POLL_MESSAGE_ID','catch','timeout','reactions','POLL_TIMEOUT','name','IRIS','exec','option','users','getString','membershipLimitPollTimeout','POLLS','../../utils/errors','PremiumTier','constructor','user','clamp','POLL','default','../../models/Poll','\x20votes\x20(','fields','embeds','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','MANAGE_CHANNELS','test','number','value','../../utils/omnic','membershipLimitPolls','has','../../utils/numbers','@bastion/tesseract','GOLD','Command','channel','poll','language','defaultTimeout','channels','\x20/\x20','COLORS','now','title','Constants','guild','send','locale','fetchPremiumTier','size','LIMITED_PREMIUM_MEMBERSHIP','exports','status','BASTION_ERROR_TYPE','messages','ends','fetch','PREMIUM_MEMBERSHIP_REQUIRED','errors','bot','POLL\x20STATUS','DiscordError','get','React\x20to\x20this\x20message\x20with\x20the\x20corresponding\x20emoji\x20to\x20vote\x20for\x20that\x20option.','cache','poll\x20--option\x20OPTIONS...\x20--\x20QUESTION','toFixed','../../utils/constants','POLL_NOT_FOUND','poll\x20--timeout\x20HOURS\x20--option\x20OPTIONS...\x20--\x20QUESTION','PLATINUM','isPublicBastion','apply','map','client','LIMITS'];(function(_0x5ee13c,_0x3471e6){const _0x3acfe8=function(_0x51ffd7){while(--_0x51ffd7){_0x5ee13c['push'](_0x5ee13c['shift']());}},_0x3f9f64=function(){const _0x39ea72={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x22a61f,_0x4bac0f,_0x379821,_0x4a168a){_0x4a168a=_0x4a168a||{};let _0x13fc95=_0x4bac0f+'='+_0x379821,_0x56b8e7=0x0;for(let _0x2d6e48=0x0,_0x15743e=_0x22a61f['length'];_0x2d6e48<_0x15743e;_0x2d6e48++){const _0x49e68f=_0x22a61f[_0x2d6e48];_0x13fc95+=';\x20'+_0x49e68f;const _0x3b8034=_0x22a61f[_0x49e68f];_0x22a61f['push'](_0x3b8034),_0x15743e=_0x22a61f['length'],_0x3b8034!==!![]&&(_0x13fc95+='='+_0x3b8034);}_0x4a168a['cookie']=_0x13fc95;},'removeCookie':function(){return'dev';},'getCookie':function(_0x518236,_0x3ca21e){_0x518236=_0x518236||function(_0x49f619){return _0x49f619;};const _0x302641=_0x518236(new RegExp('(?:^|;\x20)'+_0x3ca21e['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x15a630=function(_0x48105d,_0x391fd7){_0x48105d(++_0x391fd7);};return _0x15a630(_0x3acfe8,_0x3471e6),_0x302641?decodeURIComponent(_0x302641[0x1]):undefined;}},_0x192656=function(){const _0x3f219a=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3f219a['test'](_0x39ea72['removeCookie']['toString']());};_0x39ea72['updateCookie']=_0x192656;let _0x39608d='';const _0x40417e=_0x39ea72['updateCookie']();if(!_0x40417e)_0x39ea72['setCookie'](['*'],'counter',0x1);else _0x40417e?_0x39608d=_0x39ea72['getCookie'](null,'counter'):_0x39ea72['removeCookie']();};_0x3f9f64();}(a142_0x3471,0x1f2));const a142_0x3acf=function(_0x5ee13c,_0x3471e6){_0x5ee13c=_0x5ee13c-0x0;let _0x3acfe8=a142_0x3471[_0x5ee13c];return _0x3acfe8;};const a142_0x39ea72=function(){let _0x39608d=!![];return function(_0x40417e,_0x22a61f){const _0x4bac0f=_0x39608d?function(){if(_0x22a61f){const _0x379821=_0x22a61f[a142_0x3acf('0x33')](_0x40417e,arguments);return _0x22a61f=null,_0x379821;}}:function(){};return _0x39608d=![],_0x4bac0f;};}(),a142_0x51ffd7=a142_0x39ea72(this,function(){const _0x4a168a=function(){const _0x13fc95=_0x4a168a[a142_0x3acf('0x48')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a142_0x3acf('0x48')](a142_0x3acf('0x2'));return!_0x13fc95[a142_0x3acf('0x4')](a142_0x51ffd7);};return _0x4a168a();});a142_0x51ffd7();'use strict';const tesseract_1=require(a142_0x3acf('0xb')),Poll_1=require(a142_0x3acf('0x4d')),constants=require(a142_0x3acf('0x2e')),errors=require(a142_0x3acf('0x46')),numbers=require(a142_0x3acf('0xa')),omnic=require(a142_0x3acf('0x7'));module[a142_0x3acf('0x1e')]=class PollCommand extends tesseract_1[a142_0x3acf('0xd')]{constructor(){super(a142_0x3acf('0xf'),{'description':'It\x20allows\x20you\x20to\x20run\x20polls\x20in\x20the\x20server\x20for\x20at\x20least\x20an\x20hour\x20and\x20at\x20most\x20a\x20month.\x20You\x20can\x20set\x20at\x20most\x2013\x20options\x20for\x20the\x20poll.\x20It\x20also\x20allows\x20you\x20to\x20see\x20the\x20status\x20of\x20a\x20running\x20poll.','triggers':[],'arguments':{'alias':{'timeout':['t'],'option':['o'],'status':['s']},'number':['timeout'],'string':[a142_0x3acf('0x41'),a142_0x3acf('0x1f')],'coerce':{'timeout':_0x56b8e7=>typeof _0x56b8e7===a142_0x3acf('0x5')&&numbers[a142_0x3acf('0x4a')](_0x56b8e7,0x1,0x2d0)},'default':{'timeout':0x3}},'scope':a142_0x3acf('0x18'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[a142_0x3acf('0x3')],'syntax':[a142_0x3acf('0x39'),a142_0x3acf('0x2c'),a142_0x3acf('0x30')]}),this[a142_0x3acf('0x40')]=async(_0x2d6e48,_0x15743e)=>{if(_0x15743e['status']){const _0x302641=await Poll_1[a142_0x3acf('0x4c')]['findOne']({'_id':_0x15743e[a142_0x3acf('0x1f')],'guild':_0x2d6e48[a142_0x3acf('0x18')]['id']});if(!_0x302641)throw new Error('POLL_NOT_FOUND');if(!_0x2d6e48[a142_0x3acf('0x18')][a142_0x3acf('0x12')][a142_0x3acf('0x2b')][a142_0x3acf('0x9')](_0x302641[a142_0x3acf('0xe')]))throw new Error(a142_0x3acf('0x2f'));const _0x15a630=_0x2d6e48[a142_0x3acf('0x18')][a142_0x3acf('0x12')][a142_0x3acf('0x2b')][a142_0x3acf('0x29')](_0x302641[a142_0x3acf('0xe')]),_0x49f619=await _0x15a630[a142_0x3acf('0x21')]['fetch'](_0x302641['_id'])[a142_0x3acf('0x3a')](()=>{});if(!_0x49f619)throw new Error('POLL_NOT_FOUND');const _0x48105d=_0x49f619[a142_0x3acf('0x1')][0x0][a142_0x3acf('0x0')][a142_0x3acf('0x34')](_0xe47afb=>_0xe47afb[a142_0x3acf('0x6')]),_0x391fd7={};let _0x3f219a=0x0;for(const _0x5a9e32 in this['reactions']['slice'](0x0,_0x48105d[a142_0x3acf('0x38')])){if(_0x49f619[a142_0x3acf('0x3c')][a142_0x3acf('0x2b')][a142_0x3acf('0x9')](this['reactions'][_0x5a9e32])){await _0x49f619[a142_0x3acf('0x3c')][a142_0x3acf('0x2b')][a142_0x3acf('0x29')](this['reactions'][_0x5a9e32])['users'][a142_0x3acf('0x23')]()[a142_0x3acf('0x3a')](()=>{});const _0x329422=_0x49f619[a142_0x3acf('0x3c')]['cache'][a142_0x3acf('0x29')](this[a142_0x3acf('0x3c')][_0x5a9e32])[a142_0x3acf('0x42')][a142_0x3acf('0x2b')]['filter'](_0x491ea7=>!_0x491ea7[a142_0x3acf('0x26')])[a142_0x3acf('0x1c')];_0x391fd7[this[a142_0x3acf('0x3c')][_0x5a9e32]]=_0x329422,_0x3f219a+=_0x329422;}}return await _0x2d6e48[a142_0x3acf('0xe')]['send']({'embed':{'color':tesseract_1[a142_0x3acf('0x17')]['COLORS'][a142_0x3acf('0x3f')],'author':{'name':a142_0x3acf('0x27')},'title':_0x49f619[a142_0x3acf('0x1')][0x0][a142_0x3acf('0x16')],'fields':_0x49f619[a142_0x3acf('0x1')][0x0][a142_0x3acf('0x0')][a142_0x3acf('0x34')](_0x1f95f1=>({'name':_0x1f95f1[a142_0x3acf('0x3e')]+'\x20'+_0x1f95f1[a142_0x3acf('0x6')],'value':(_0x391fd7[_0x1f95f1['name']]||0x0)+a142_0x3acf('0x13')+_0x3f219a+a142_0x3acf('0x4e')+(_0x391fd7[_0x1f95f1[a142_0x3acf('0x3e')]]?_0x391fd7[_0x1f95f1[a142_0x3acf('0x3e')]]/_0x3f219a*0x64:0x0)[a142_0x3acf('0x2d')](0x2)+'%)'})),'footer':{'text':_0x49f619['id']+'\x20â€¢\x20Ends'},'timestamp':_0x302641[a142_0x3acf('0x22')]}});}if(!_0x15743e['_']['length']||!_0x15743e[a142_0x3acf('0x41')]||!(_0x15743e[a142_0x3acf('0x41')]instanceof Array))throw new errors[(a142_0x3acf('0x28'))](errors[a142_0x3acf('0x20')]['INVALID_COMMAND_SYNTAX'],this[a142_0x3acf('0x3e')]);const _0x49e68f=_0x15743e['_']['join']('\x20'),_0x3b8034=_0x15743e[a142_0x3acf('0x3b')]?_0x15743e['timeout']:this['defaultTimeout'];if(constants[a142_0x3acf('0x32')](this[a142_0x3acf('0x35')][a142_0x3acf('0x49')])){const _0x44bf09=await omnic[a142_0x3acf('0x1b')](_0x2d6e48['guild'])[a142_0x3acf('0x3a')](()=>{});if(_0x44bf09){if(_0x44bf09===omnic[a142_0x3acf('0x47')][a142_0x3acf('0xc')]&&_0x3b8034>constants['LIMITS']['GOLD'][a142_0x3acf('0x3d')])throw new errors[(a142_0x3acf('0x28'))](errors[a142_0x3acf('0x20')]['LIMITED_PREMIUM_MEMBERSHIP'],this['client']['locale'][a142_0x3acf('0x43')](_0x2d6e48['guild'][a142_0x3acf('0x37')][a142_0x3acf('0x10')],a142_0x3acf('0x25'),a142_0x3acf('0x44'),constants[a142_0x3acf('0x36')][a142_0x3acf('0xc')][a142_0x3acf('0x3d')]));else{if(_0x44bf09===omnic[a142_0x3acf('0x47')][a142_0x3acf('0x31')]&&_0x3b8034>constants['LIMITS']['PLATINUM'][a142_0x3acf('0x3d')])throw new errors[(a142_0x3acf('0x28'))](errors['BASTION_ERROR_TYPE'][a142_0x3acf('0x1d')],this[a142_0x3acf('0x35')][a142_0x3acf('0x1a')][a142_0x3acf('0x43')](_0x2d6e48[a142_0x3acf('0x18')][a142_0x3acf('0x37')][a142_0x3acf('0x10')],a142_0x3acf('0x25'),'membershipLimitPollTimeout',constants[a142_0x3acf('0x36')][a142_0x3acf('0x31')][a142_0x3acf('0x3d')]));}}else{if(_0x3b8034>constants[a142_0x3acf('0x36')][a142_0x3acf('0x3d')])throw new errors[(a142_0x3acf('0x28'))](errors[a142_0x3acf('0x20')][a142_0x3acf('0x24')],this[a142_0x3acf('0x35')][a142_0x3acf('0x1a')][a142_0x3acf('0x43')](_0x2d6e48[a142_0x3acf('0x18')][a142_0x3acf('0x37')][a142_0x3acf('0x10')],a142_0x3acf('0x25'),'premiumPollTimeout',constants[a142_0x3acf('0x36')][a142_0x3acf('0x3d')]));}const _0x38539a=await Poll_1[a142_0x3acf('0x4c')]['countDocuments']({'guild':_0x2d6e48[a142_0x3acf('0x18')]['id'],'ends':{'$gte':new Date()}});if(_0x44bf09){if(_0x44bf09===omnic[a142_0x3acf('0x47')][a142_0x3acf('0xc')]&&_0x38539a>=constants[a142_0x3acf('0x36')][a142_0x3acf('0xc')]['POLLS'])throw new errors[(a142_0x3acf('0x28'))](errors[a142_0x3acf('0x20')]['LIMITED_PREMIUM_MEMBERSHIP'],this[a142_0x3acf('0x35')][a142_0x3acf('0x1a')][a142_0x3acf('0x43')](_0x2d6e48[a142_0x3acf('0x18')][a142_0x3acf('0x37')]['language'],'errors',a142_0x3acf('0x8'),constants[a142_0x3acf('0x36')][a142_0x3acf('0xc')][a142_0x3acf('0x45')]));else{if(_0x44bf09===omnic[a142_0x3acf('0x47')][a142_0x3acf('0x31')]&&_0x38539a>=constants[a142_0x3acf('0x36')][a142_0x3acf('0x31')][a142_0x3acf('0x45')])throw new errors[(a142_0x3acf('0x28'))](errors['BASTION_ERROR_TYPE'][a142_0x3acf('0x1d')],this['client']['locale'][a142_0x3acf('0x43')](_0x2d6e48[a142_0x3acf('0x18')]['document'][a142_0x3acf('0x10')],a142_0x3acf('0x25'),a142_0x3acf('0x8'),constants['LIMITS'][a142_0x3acf('0x31')]['POLLS']));}}else{if(_0x38539a>=constants['LIMITS'][a142_0x3acf('0x45')])throw new errors[(a142_0x3acf('0x28'))](errors[a142_0x3acf('0x20')][a142_0x3acf('0x24')],this[a142_0x3acf('0x35')][a142_0x3acf('0x1a')][a142_0x3acf('0x43')](_0x2d6e48[a142_0x3acf('0x18')]['document'][a142_0x3acf('0x10')],a142_0x3acf('0x25'),'premiumPolls',constants['LIMITS'][a142_0x3acf('0x45')]));}}const _0x518236=new Date(Date[a142_0x3acf('0x15')]()+_0x3b8034*0x36ee80),_0x3ca21e=await _0x2d6e48[a142_0x3acf('0xe')][a142_0x3acf('0x19')]({'embed':{'color':tesseract_1[a142_0x3acf('0x17')][a142_0x3acf('0x14')][a142_0x3acf('0x3f')],'author':{'name':a142_0x3acf('0x4b')},'title':_0x49e68f,'description':a142_0x3acf('0x2a'),'fields':_0x15743e[a142_0x3acf('0x41')]['map']((_0x4eada1,_0xf39cac)=>({'name':this[a142_0x3acf('0x3c')][_0xf39cac],'value':_0x4eada1})),'footer':{'text':'Ends'},'timestamp':_0x518236}});await Poll_1[a142_0x3acf('0x4c')]['create']({'_id':_0x3ca21e['id'],'channel':_0x3ca21e['channel']['id'],'guild':_0x3ca21e[a142_0x3acf('0x18')]['id'],'ends':_0x518236});for(const _0x5cbeb0 of this[a142_0x3acf('0x3c')]['slice'](0x0,_0x15743e[a142_0x3acf('0x41')][a142_0x3acf('0x38')])){await _0x3ca21e['react'](_0x5cbeb0)[a142_0x3acf('0x3a')](()=>{});}},this[a142_0x3acf('0x3c')]=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'],this[a142_0x3acf('0x11')]=0x3;}};
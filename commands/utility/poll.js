const a144_0x1b62=['POLL_TIMEOUT','name','exports','reactions','BASTION_ERROR_TYPE','Command','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','POLL','LIMITS','channel','defaultTimeout','guild','now','\x20â€¢\x20Ends','getString','membershipLimitPolls','MANAGE_CHANNELS','filter','ends','client','toFixed','@bastion/tesseract','It\x20allows\x20you\x20to\x20run\x20polls\x20in\x20the\x20server\x20for\x20at\x20least\x20an\x20hour\x20and\x20at\x20most\x20a\x20month.\x20You\x20can\x20set\x20at\x20most\x2013\x20options\x20for\x20the\x20poll.\x20It\x20also\x20allows\x20you\x20to\x20see\x20the\x20status\x20of\x20a\x20running\x20poll.','IRIS','poll\x20--option\x20OPTIONS...\x20--\x20QUESTION','isPublicBastion','channels','language','findOne','clamp','document','POLL_NOT_FOUND','fetch','value','LIMITED_PREMIUM_MEMBERSHIP','COLORS','length','user','PREMIUM_MEMBERSHIP_REQUIRED','test','cache','embeds','DiscordError','option','errors','membershipLimitPollTimeout','bot','return\x20/\x22\x20+\x20this\x20+\x20\x22/','PremiumTier','fields','send','countDocuments','get','../../utils/omnic','status','exec','map','fetchPremiumTier','catch','users','../../utils/numbers','../../models/Poll','locale','INVALID_COMMAND_SYNTAX','poll\x20--timeout\x20HOURS\x20--option\x20OPTIONS...\x20--\x20QUESTION','has','default','size','poll','PLATINUM','\x20/\x20','Constants','POLLS','slice','timeout','POLL\x20STATUS','premiumPolls','_id','../../utils/constants','premiumPollTimeout','messages','number','GOLD','react','create'];(function(_0x554321,_0x1b6234){const _0x26e39d=function(_0x2fdc07){while(--_0x2fdc07){_0x554321['push'](_0x554321['shift']());}},_0x45003c=function(){const _0x1d91d8={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4b7aee,_0x29ddca,_0x3967a3,_0x4afdb0){_0x4afdb0=_0x4afdb0||{};let _0x3851e2=_0x29ddca+'='+_0x3967a3,_0x1147e0=0x0;for(let _0x4bbf44=0x0,_0x387bc5=_0x4b7aee['length'];_0x4bbf44<_0x387bc5;_0x4bbf44++){const _0xbb3c7e=_0x4b7aee[_0x4bbf44];_0x3851e2+=';\x20'+_0xbb3c7e;const _0x1a72bd=_0x4b7aee[_0xbb3c7e];_0x4b7aee['push'](_0x1a72bd),_0x387bc5=_0x4b7aee['length'],_0x1a72bd!==!![]&&(_0x3851e2+='='+_0x1a72bd);}_0x4afdb0['cookie']=_0x3851e2;},'removeCookie':function(){return'dev';},'getCookie':function(_0x388cb8,_0x248182){_0x388cb8=_0x388cb8||function(_0x4233bf){return _0x4233bf;};const _0x48074c=_0x388cb8(new RegExp('(?:^|;\x20)'+_0x248182['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x57d780=function(_0x179082,_0x41140d){_0x179082(++_0x41140d);};return _0x57d780(_0x26e39d,_0x1b6234),_0x48074c?decodeURIComponent(_0x48074c[0x1]):undefined;}},_0x451d83=function(){const _0x37681b=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x37681b['test'](_0x1d91d8['removeCookie']['toString']());};_0x1d91d8['updateCookie']=_0x451d83;let _0x18958f='';const _0x55334e=_0x1d91d8['updateCookie']();if(!_0x55334e)_0x1d91d8['setCookie'](['*'],'counter',0x1);else _0x55334e?_0x18958f=_0x1d91d8['getCookie'](null,'counter'):_0x1d91d8['removeCookie']();};_0x45003c();}(a144_0x1b62,0x18a));const a144_0x26e3=function(_0x554321,_0x1b6234){_0x554321=_0x554321-0x0;let _0x26e39d=a144_0x1b62[_0x554321];return _0x26e39d;};const _0x489cc4=a144_0x26e3,a144_0x1d91d8=function(){let _0x18958f=!![];return function(_0x55334e,_0x4b7aee){const _0x29ddca=_0x18958f?function(){if(_0x4b7aee){const _0x3967a3=_0x4b7aee['apply'](_0x55334e,arguments);return _0x4b7aee=null,_0x3967a3;}}:function(){};return _0x18958f=![],_0x29ddca;};}(),a144_0x2fdc07=a144_0x1d91d8(this,function(){const _0x4afdb0=function(){const _0x5732a2=a144_0x26e3,_0x3851e2=_0x4afdb0['constructor'](_0x5732a2('0x4e'))()['constructor'](_0x5732a2('0x25'));return!_0x3851e2[_0x5732a2('0x46')](a144_0x2fdc07);};return _0x4afdb0();});a144_0x2fdc07();'use strict';const tesseract_1=require(_0x489cc4('0x34')),Poll_1=require(_0x489cc4('0x7')),constants=require(_0x489cc4('0x18')),errors=require('../../utils/errors'),numbers=require(_0x489cc4('0x6')),omnic=require(_0x489cc4('0x54'));module[_0x489cc4('0x21')]=class PollCommand extends tesseract_1[_0x489cc4('0x24')]{constructor(){const _0x510f68=_0x489cc4;super(_0x510f68('0xe'),{'description':_0x510f68('0x35'),'triggers':[],'arguments':{'alias':{'timeout':['t'],'option':['o'],'status':['s']},'number':['timeout'],'string':[_0x510f68('0x4a'),'status'],'coerce':{'timeout':_0x1147e0=>typeof _0x1147e0===_0x510f68('0x1b')&&numbers[_0x510f68('0x3c')](_0x1147e0,0x1,0x2d0)},'default':{'timeout':0x3}},'scope':_0x510f68('0x2a'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[_0x510f68('0x2f')],'syntax':['poll\x20--status\x20POLL_MESSAGE_ID',_0x510f68('0x37'),_0x510f68('0xa')]}),this[_0x510f68('0x1')]=async(_0x4bbf44,_0x387bc5)=>{const _0x8a4e00=_0x510f68;if(_0x387bc5['status']){const _0x48074c=await Poll_1[_0x8a4e00('0xc')][_0x8a4e00('0x3b')]({'_id':_0x387bc5[_0x8a4e00('0x0')],'guild':_0x4bbf44[_0x8a4e00('0x2a')]['id']});if(!_0x48074c)throw new Error(_0x8a4e00('0x3e'));if(!_0x4bbf44[_0x8a4e00('0x2a')]['channels']['cache']['has'](_0x48074c[_0x8a4e00('0x28')]))throw new Error(_0x8a4e00('0x3e'));const _0x57d780=_0x4bbf44[_0x8a4e00('0x2a')][_0x8a4e00('0x39')][_0x8a4e00('0x47')][_0x8a4e00('0x53')](_0x48074c[_0x8a4e00('0x28')]),_0x4233bf=await _0x57d780[_0x8a4e00('0x1a')][_0x8a4e00('0x3f')](_0x48074c[_0x8a4e00('0x17')])[_0x8a4e00('0x4')](()=>{});if(!_0x4233bf)throw new Error('POLL_NOT_FOUND');const _0x179082=_0x4233bf[_0x8a4e00('0x48')][0x0][_0x8a4e00('0x50')]['map'](_0x23fd0e=>_0x23fd0e[_0x8a4e00('0x40')]),_0x41140d={};let _0x37681b=0x0;for(const _0x38c802 in this['reactions'][_0x8a4e00('0x13')](0x0,_0x179082[_0x8a4e00('0x43')])){if(_0x4233bf[_0x8a4e00('0x22')][_0x8a4e00('0x47')][_0x8a4e00('0xb')](this[_0x8a4e00('0x22')][_0x38c802])){await _0x4233bf['reactions']['cache'][_0x8a4e00('0x53')](this['reactions'][_0x38c802])[_0x8a4e00('0x5')][_0x8a4e00('0x3f')]()[_0x8a4e00('0x4')](()=>{});const _0xa66978=_0x4233bf[_0x8a4e00('0x22')][_0x8a4e00('0x47')][_0x8a4e00('0x53')](this['reactions'][_0x38c802])['users'][_0x8a4e00('0x47')][_0x8a4e00('0x30')](_0x44925a=>!_0x44925a[_0x8a4e00('0x4d')])[_0x8a4e00('0xd')];_0x41140d[this[_0x8a4e00('0x22')][_0x38c802]]=_0xa66978,_0x37681b+=_0xa66978;}}return await _0x4bbf44[_0x8a4e00('0x28')][_0x8a4e00('0x51')]({'embed':{'color':tesseract_1[_0x8a4e00('0x11')]['COLORS'][_0x8a4e00('0x36')],'author':{'name':_0x8a4e00('0x15')},'title':_0x4233bf[_0x8a4e00('0x48')][0x0]['title'],'fields':_0x4233bf[_0x8a4e00('0x48')][0x0]['fields'][_0x8a4e00('0x2')](_0x38a2eb=>({'name':_0x38a2eb['name']+'\x20'+_0x38a2eb['value'],'value':(_0x41140d[_0x38a2eb[_0x8a4e00('0x20')]]||0x0)+_0x8a4e00('0x10')+_0x37681b+'\x20votes\x20('+(_0x41140d[_0x38a2eb[_0x8a4e00('0x20')]]?_0x41140d[_0x38a2eb[_0x8a4e00('0x20')]]/_0x37681b*0x64:0x0)[_0x8a4e00('0x33')](0x2)+'%)'})),'footer':{'text':_0x4233bf['id']+_0x8a4e00('0x2c')},'timestamp':_0x48074c[_0x8a4e00('0x31')]}});}if(!_0x387bc5['_'][_0x8a4e00('0x43')]||!_0x387bc5[_0x8a4e00('0x4a')]||!(_0x387bc5[_0x8a4e00('0x4a')]instanceof Array))throw new errors['DiscordError'](errors[_0x8a4e00('0x23')][_0x8a4e00('0x9')],this['name']);const _0xbb3c7e=_0x387bc5['_']['join']('\x20'),_0x1a72bd=_0x387bc5[_0x8a4e00('0x14')]?_0x387bc5[_0x8a4e00('0x14')]:this[_0x8a4e00('0x29')];if(constants[_0x8a4e00('0x38')](this[_0x8a4e00('0x32')][_0x8a4e00('0x44')])){const _0x30b935=await omnic[_0x8a4e00('0x3')](_0x4bbf44[_0x8a4e00('0x2a')])[_0x8a4e00('0x4')](()=>{});if(_0x30b935){if(_0x30b935===omnic[_0x8a4e00('0x4f')][_0x8a4e00('0x1c')]&&_0x1a72bd>constants[_0x8a4e00('0x27')][_0x8a4e00('0x1c')]['POLL_TIMEOUT'])throw new errors[(_0x8a4e00('0x49'))](errors[_0x8a4e00('0x23')][_0x8a4e00('0x41')],this['client'][_0x8a4e00('0x8')][_0x8a4e00('0x2d')](_0x4bbf44[_0x8a4e00('0x2a')][_0x8a4e00('0x3d')][_0x8a4e00('0x3a')],_0x8a4e00('0x4b'),'membershipLimitPollTimeout',constants['LIMITS'][_0x8a4e00('0x1c')][_0x8a4e00('0x1f')]));else{if(_0x30b935===omnic[_0x8a4e00('0x4f')][_0x8a4e00('0xf')]&&_0x1a72bd>constants[_0x8a4e00('0x27')][_0x8a4e00('0xf')][_0x8a4e00('0x1f')])throw new errors[(_0x8a4e00('0x49'))](errors['BASTION_ERROR_TYPE']['LIMITED_PREMIUM_MEMBERSHIP'],this[_0x8a4e00('0x32')][_0x8a4e00('0x8')][_0x8a4e00('0x2d')](_0x4bbf44['guild'][_0x8a4e00('0x3d')][_0x8a4e00('0x3a')],_0x8a4e00('0x4b'),_0x8a4e00('0x4c'),constants[_0x8a4e00('0x27')]['PLATINUM']['POLL_TIMEOUT']));}}else{if(_0x1a72bd>constants[_0x8a4e00('0x27')][_0x8a4e00('0x1f')])throw new errors[(_0x8a4e00('0x49'))](errors['BASTION_ERROR_TYPE'][_0x8a4e00('0x45')],this[_0x8a4e00('0x32')][_0x8a4e00('0x8')][_0x8a4e00('0x2d')](_0x4bbf44['guild'][_0x8a4e00('0x3d')][_0x8a4e00('0x3a')],_0x8a4e00('0x4b'),_0x8a4e00('0x19'),constants[_0x8a4e00('0x27')]['POLL_TIMEOUT']));}const _0x4285a6=await Poll_1[_0x8a4e00('0xc')][_0x8a4e00('0x52')]({'guild':_0x4bbf44['guild']['id'],'ends':{'$gte':new Date()}});if(_0x30b935){if(_0x30b935===omnic[_0x8a4e00('0x4f')][_0x8a4e00('0x1c')]&&_0x4285a6>=constants[_0x8a4e00('0x27')][_0x8a4e00('0x1c')]['POLLS'])throw new errors[(_0x8a4e00('0x49'))](errors[_0x8a4e00('0x23')][_0x8a4e00('0x41')],this[_0x8a4e00('0x32')]['locale'][_0x8a4e00('0x2d')](_0x4bbf44[_0x8a4e00('0x2a')][_0x8a4e00('0x3d')]['language'],'errors',_0x8a4e00('0x2e'),constants[_0x8a4e00('0x27')][_0x8a4e00('0x1c')]['POLLS']));else{if(_0x30b935===omnic[_0x8a4e00('0x4f')][_0x8a4e00('0xf')]&&_0x4285a6>=constants[_0x8a4e00('0x27')]['PLATINUM']['POLLS'])throw new errors['DiscordError'](errors[_0x8a4e00('0x23')][_0x8a4e00('0x41')],this[_0x8a4e00('0x32')][_0x8a4e00('0x8')]['getString'](_0x4bbf44['guild'][_0x8a4e00('0x3d')]['language'],_0x8a4e00('0x4b'),'membershipLimitPolls',constants[_0x8a4e00('0x27')][_0x8a4e00('0xf')][_0x8a4e00('0x12')]));}}else{if(_0x4285a6>=constants[_0x8a4e00('0x27')]['POLLS'])throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][_0x8a4e00('0x45')],this[_0x8a4e00('0x32')][_0x8a4e00('0x8')][_0x8a4e00('0x2d')](_0x4bbf44[_0x8a4e00('0x2a')][_0x8a4e00('0x3d')]['language'],_0x8a4e00('0x4b'),_0x8a4e00('0x16'),constants[_0x8a4e00('0x27')]['POLLS']));}}const _0x388cb8=new Date(Date[_0x8a4e00('0x2b')]()+_0x1a72bd*0x36ee80),_0x248182=await _0x4bbf44[_0x8a4e00('0x28')]['send']({'embed':{'color':tesseract_1[_0x8a4e00('0x11')][_0x8a4e00('0x42')][_0x8a4e00('0x36')],'author':{'name':_0x8a4e00('0x26')},'title':_0xbb3c7e,'description':'React\x20to\x20this\x20message\x20with\x20the\x20corresponding\x20emoji\x20to\x20vote\x20for\x20that\x20option.','fields':_0x387bc5['option'][_0x8a4e00('0x2')]((_0x4d0901,_0x5256bb)=>({'name':this[_0x8a4e00('0x22')][_0x5256bb],'value':_0x4d0901})),'footer':{'text':'Ends'},'timestamp':_0x388cb8}});await Poll_1[_0x8a4e00('0xc')][_0x8a4e00('0x1e')]({'_id':_0x248182['id'],'channel':_0x248182[_0x8a4e00('0x28')]['id'],'guild':_0x248182[_0x8a4e00('0x2a')]['id'],'ends':_0x388cb8});for(const _0x4d33a5 of this[_0x8a4e00('0x22')][_0x8a4e00('0x13')](0x0,_0x387bc5[_0x8a4e00('0x4a')][_0x8a4e00('0x43')])){await _0x248182[_0x8a4e00('0x1d')](_0x4d33a5)[_0x8a4e00('0x4')](()=>{});}},this['reactions']=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'],this['defaultTimeout']=0x3;}};
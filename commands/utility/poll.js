const a160_0x10ce=['filter','locale','premiumPollTimeout','Constants','../../utils/numbers','ends','test','LIMITS','../../utils/errors','GOLD','poll','has','language','return\x20/\x22\x20+\x20this\x20+\x20\x22/','user','guild','title','size','fetch','defaultTimeout','fields','LIMITED_PREMIUM_MEMBERSHIP','channel','catch','option','client','isPublicBastion','countDocuments','getString','exports','@bastion/tesseract','React\x20to\x20this\x20message\x20with\x20the\x20corresponding\x20emoji\x20to\x20vote\x20for\x20that\x20option.','POLLS','poll\x20--timeout\x20HOURS\x20--option\x20OPTIONS...\x20--\x20QUESTION','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','timeout','COLORS','IRIS','poll\x20--option\x20OPTIONS...\x20--\x20QUESTION','poll\x20--status\x20POLL_MESSAGE_ID','membershipLimitPolls','PREMIUM_MEMBERSHIP_REQUIRED','now','reactions','clamp','get','map','default','POLL','bot','POLL_NOT_FOUND','PLATINUM','POLL_TIMEOUT','exec','INVALID_COMMAND_SYNTAX','document','DiscordError','constructor','join','users','PremiumTier','cache','findOne','length','membershipLimitPollTimeout','apply','../../utils/constants','Command','value','create','status','\x20votes\x20(','embeds','fetchPremiumTier','slice','../../utils/omnic','Ends','messages','react','BASTION_ERROR_TYPE','errors','It\x20allows\x20you\x20to\x20run\x20polls\x20in\x20the\x20server\x20for\x20at\x20least\x20an\x20hour\x20and\x20at\x20most\x20a\x20month.\x20You\x20can\x20set\x20at\x20most\x2013\x20options\x20for\x20the\x20poll.\x20It\x20also\x20allows\x20you\x20to\x20see\x20the\x20status\x20of\x20a\x20running\x20poll.','POLL\x20STATUS','name'];(function(_0x49e40e,_0x401898){const _0x10ceda=function(_0x13cfae){while(--_0x13cfae){_0x49e40e['push'](_0x49e40e['shift']());}},_0x2661dd=function(){const _0x39578d={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x376dfc,_0x43b6cb,_0x42523f,_0x40b5ab){_0x40b5ab=_0x40b5ab||{};let _0x97ed59=_0x43b6cb+'='+_0x42523f,_0x2749b6=0x0;for(let _0x2e9deb=0x0,_0xd3264f=_0x376dfc['length'];_0x2e9deb<_0xd3264f;_0x2e9deb++){const _0x2a4ab7=_0x376dfc[_0x2e9deb];_0x97ed59+=';\x20'+_0x2a4ab7;const _0x3a331e=_0x376dfc[_0x2a4ab7];_0x376dfc['push'](_0x3a331e),_0xd3264f=_0x376dfc['length'],_0x3a331e!==!![]&&(_0x97ed59+='='+_0x3a331e);}_0x40b5ab['cookie']=_0x97ed59;},'removeCookie':function(){return'dev';},'getCookie':function(_0x358e83,_0x52d2bf){_0x358e83=_0x358e83||function(_0x135c1b){return _0x135c1b;};const _0x4fc6c2=_0x358e83(new RegExp('(?:^|;\x20)'+_0x52d2bf['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x3ac92e=function(_0x57ea9f,_0x19be97){_0x57ea9f(++_0x19be97);};return _0x3ac92e(_0x10ceda,_0x401898),_0x4fc6c2?decodeURIComponent(_0x4fc6c2[0x1]):undefined;}},_0x36bc5f=function(){const _0x280e8e=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x280e8e['test'](_0x39578d['removeCookie']['toString']());};_0x39578d['updateCookie']=_0x36bc5f;let _0x1a3e1d='';const _0x5e2738=_0x39578d['updateCookie']();if(!_0x5e2738)_0x39578d['setCookie'](['*'],'counter',0x1);else _0x5e2738?_0x1a3e1d=_0x39578d['getCookie'](null,'counter'):_0x39578d['removeCookie']();};_0x2661dd();}(a160_0x10ce,0x10f));const a160_0x2661=function(_0x49e40e,_0x401898){_0x49e40e=_0x49e40e-0xf0;let _0x10ceda=a160_0x10ce[_0x49e40e];return _0x10ceda;};const a160_0x4ef60c=a160_0x2661,a160_0x36bc5f=function(){let _0x5e2738=!![];return function(_0x376dfc,_0x43b6cb){const _0x42523f=_0x5e2738?function(){const _0x278666=a160_0x2661;if(_0x43b6cb){const _0x40b5ab=_0x43b6cb[_0x278666(0x11e)](_0x376dfc,arguments);return _0x43b6cb=null,_0x40b5ab;}}:function(){};return _0x5e2738=![],_0x42523f;};}(),a160_0x39578d=a160_0x36bc5f(this,function(){const _0x97ed59=function(){const _0x52b849=a160_0x2661,_0x2749b6=_0x97ed59[_0x52b849(0x116)](_0x52b849(0x13e))()[_0x52b849(0x116)](_0x52b849(0xff));return!_0x2749b6[_0x52b849(0x137)](a160_0x39578d);};return _0x97ed59();});a160_0x39578d();'use strict';const tesseract_1=require(a160_0x4ef60c(0xfb)),Poll_1=require('../../models/Poll'),constants=require(a160_0x4ef60c(0x11f)),errors=require(a160_0x4ef60c(0x139)),numbers=require(a160_0x4ef60c(0x135)),omnic=require(a160_0x4ef60c(0x128));module[a160_0x4ef60c(0xfa)]=class PollCommand extends tesseract_1[a160_0x4ef60c(0x120)]{constructor(){const _0x27b835=a160_0x4ef60c;super(_0x27b835(0x13b),{'description':_0x27b835(0x12e),'triggers':[],'arguments':{'alias':{'timeout':['t'],'option':['o'],'status':['s']},'number':[_0x27b835(0x100)],'string':[_0x27b835(0xf5),'status'],'coerce':{'timeout':_0x2e9deb=>typeof _0x2e9deb==='number'&&numbers[_0x27b835(0x109)](_0x2e9deb,0x1,0x2d0)},'default':{'timeout':0x3}},'scope':_0x27b835(0x140),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':['MANAGE_CHANNELS'],'syntax':[_0x27b835(0x104),_0x27b835(0x103),_0x27b835(0xfe)]}),this[_0x27b835(0x112)]=async(_0xd3264f,_0x2a4ab7)=>{const _0x26ca17=_0x27b835;if(_0x2a4ab7[_0x26ca17(0x123)]){const _0x3ac92e=await Poll_1[_0x26ca17(0x10c)][_0x26ca17(0x11b)]({'_id':_0x2a4ab7[_0x26ca17(0x123)],'guild':_0xd3264f[_0x26ca17(0x140)]['id']});if(!_0x3ac92e)throw new Error('POLL_NOT_FOUND');if(!_0xd3264f['guild']['channels'][_0x26ca17(0x11a)]['has'](_0x3ac92e[_0x26ca17(0xf3)]))throw new Error(_0x26ca17(0x10f));const _0x135c1b=_0xd3264f['guild']['channels'][_0x26ca17(0x11a)]['get'](_0x3ac92e[_0x26ca17(0xf3)]),_0x57ea9f=await _0x135c1b[_0x26ca17(0x12a)][_0x26ca17(0x143)](_0x3ac92e['_id'])[_0x26ca17(0xf4)](()=>{});if(!_0x57ea9f)throw new Error('POLL_NOT_FOUND');const _0x19be97=_0x57ea9f[_0x26ca17(0x125)][0x0][_0x26ca17(0xf1)][_0x26ca17(0x10b)](_0x59727f=>_0x59727f[_0x26ca17(0x121)]),_0x280e8e={};let _0x420920=0x0;for(const _0x4f57d8 in this[_0x26ca17(0x108)][_0x26ca17(0x127)](0x0,_0x19be97[_0x26ca17(0x11c)])){if(_0x57ea9f[_0x26ca17(0x108)][_0x26ca17(0x11a)][_0x26ca17(0x13c)](this[_0x26ca17(0x108)][_0x4f57d8])){await _0x57ea9f[_0x26ca17(0x108)][_0x26ca17(0x11a)][_0x26ca17(0x10a)](this[_0x26ca17(0x108)][_0x4f57d8])[_0x26ca17(0x118)][_0x26ca17(0x143)]()[_0x26ca17(0xf4)](()=>{});const _0x1290a9=_0x57ea9f[_0x26ca17(0x108)][_0x26ca17(0x11a)][_0x26ca17(0x10a)](this['reactions'][_0x4f57d8])[_0x26ca17(0x118)][_0x26ca17(0x11a)][_0x26ca17(0x131)](_0x31c5f1=>!_0x31c5f1[_0x26ca17(0x10e)])[_0x26ca17(0x142)];_0x280e8e[this['reactions'][_0x4f57d8]]=_0x1290a9,_0x420920+=_0x1290a9;}}return await _0xd3264f[_0x26ca17(0xf3)]['send']({'embed':{'color':tesseract_1[_0x26ca17(0x134)][_0x26ca17(0x101)][_0x26ca17(0x102)],'author':{'name':_0x26ca17(0x12f)},'title':_0x57ea9f[_0x26ca17(0x125)][0x0][_0x26ca17(0x141)],'fields':_0x57ea9f[_0x26ca17(0x125)][0x0][_0x26ca17(0xf1)][_0x26ca17(0x10b)](_0x298b68=>({'name':_0x298b68[_0x26ca17(0x130)]+'\x20'+_0x298b68[_0x26ca17(0x121)],'value':(_0x280e8e[_0x298b68[_0x26ca17(0x130)]]||0x0)+'\x20/\x20'+_0x420920+_0x26ca17(0x124)+(_0x280e8e[_0x298b68['name']]?_0x280e8e[_0x298b68[_0x26ca17(0x130)]]/_0x420920*0x64:0x0)['toFixed'](0x2)+'%)'})),'footer':{'text':_0x57ea9f['id']+'\x20â€¢\x20Ends'},'timestamp':_0x3ac92e[_0x26ca17(0x136)]}});}if(!_0x2a4ab7['_'][_0x26ca17(0x11c)]||!_0x2a4ab7[_0x26ca17(0xf5)]||!(_0x2a4ab7[_0x26ca17(0xf5)]instanceof Array))throw new errors[(_0x26ca17(0x115))](errors[_0x26ca17(0x12c)][_0x26ca17(0x113)],this[_0x26ca17(0x130)]);const _0x3a331e=_0x2a4ab7['_'][_0x26ca17(0x117)]('\x20'),_0x358e83=_0x2a4ab7[_0x26ca17(0x100)]?_0x2a4ab7[_0x26ca17(0x100)]:this[_0x26ca17(0xf0)];if(constants[_0x26ca17(0xf7)](this[_0x26ca17(0xf6)][_0x26ca17(0x13f)])){const _0x4f58a7=await omnic[_0x26ca17(0x126)](_0xd3264f[_0x26ca17(0x140)])[_0x26ca17(0xf4)](()=>{});if(_0x4f58a7){if(_0x4f58a7===omnic[_0x26ca17(0x119)][_0x26ca17(0x13a)]&&_0x358e83>constants['LIMITS'][_0x26ca17(0x13a)][_0x26ca17(0x111)])throw new errors[(_0x26ca17(0x115))](errors['BASTION_ERROR_TYPE']['LIMITED_PREMIUM_MEMBERSHIP'],this[_0x26ca17(0xf6)][_0x26ca17(0x132)]['getString'](_0xd3264f[_0x26ca17(0x140)][_0x26ca17(0x114)][_0x26ca17(0x13d)],_0x26ca17(0x12d),_0x26ca17(0x11d),constants['LIMITS'][_0x26ca17(0x13a)][_0x26ca17(0x111)]));else{if(_0x4f58a7===omnic['PremiumTier']['PLATINUM']&&_0x358e83>constants[_0x26ca17(0x138)][_0x26ca17(0x110)][_0x26ca17(0x111)])throw new errors[(_0x26ca17(0x115))](errors[_0x26ca17(0x12c)][_0x26ca17(0xf2)],this[_0x26ca17(0xf6)][_0x26ca17(0x132)][_0x26ca17(0xf9)](_0xd3264f[_0x26ca17(0x140)][_0x26ca17(0x114)][_0x26ca17(0x13d)],_0x26ca17(0x12d),'membershipLimitPollTimeout',constants[_0x26ca17(0x138)][_0x26ca17(0x110)][_0x26ca17(0x111)]));}}else{if(_0x358e83>constants[_0x26ca17(0x138)][_0x26ca17(0x111)])throw new errors['DiscordError'](errors[_0x26ca17(0x12c)][_0x26ca17(0x106)],this[_0x26ca17(0xf6)][_0x26ca17(0x132)]['getString'](_0xd3264f[_0x26ca17(0x140)][_0x26ca17(0x114)][_0x26ca17(0x13d)],_0x26ca17(0x12d),_0x26ca17(0x133),constants[_0x26ca17(0x138)]['POLL_TIMEOUT']));}const _0x59485=await Poll_1[_0x26ca17(0x10c)][_0x26ca17(0xf8)]({'guild':_0xd3264f['guild']['id'],'ends':{'$gte':new Date()}});if(_0x4f58a7){if(_0x4f58a7===omnic[_0x26ca17(0x119)][_0x26ca17(0x13a)]&&_0x59485>=constants[_0x26ca17(0x138)][_0x26ca17(0x13a)][_0x26ca17(0xfd)])throw new errors[(_0x26ca17(0x115))](errors[_0x26ca17(0x12c)][_0x26ca17(0xf2)],this[_0x26ca17(0xf6)][_0x26ca17(0x132)][_0x26ca17(0xf9)](_0xd3264f[_0x26ca17(0x140)][_0x26ca17(0x114)][_0x26ca17(0x13d)],_0x26ca17(0x12d),_0x26ca17(0x105),constants[_0x26ca17(0x138)][_0x26ca17(0x13a)]['POLLS']));else{if(_0x4f58a7===omnic[_0x26ca17(0x119)][_0x26ca17(0x110)]&&_0x59485>=constants['LIMITS'][_0x26ca17(0x110)][_0x26ca17(0xfd)])throw new errors['DiscordError'](errors[_0x26ca17(0x12c)][_0x26ca17(0xf2)],this[_0x26ca17(0xf6)][_0x26ca17(0x132)][_0x26ca17(0xf9)](_0xd3264f[_0x26ca17(0x140)]['document'][_0x26ca17(0x13d)],_0x26ca17(0x12d),_0x26ca17(0x105),constants[_0x26ca17(0x138)][_0x26ca17(0x110)]['POLLS']));}}else{if(_0x59485>=constants['LIMITS'][_0x26ca17(0xfd)])throw new errors[(_0x26ca17(0x115))](errors['BASTION_ERROR_TYPE'][_0x26ca17(0x106)],this[_0x26ca17(0xf6)][_0x26ca17(0x132)][_0x26ca17(0xf9)](_0xd3264f[_0x26ca17(0x140)][_0x26ca17(0x114)]['language'],_0x26ca17(0x12d),'premiumPolls',constants[_0x26ca17(0x138)][_0x26ca17(0xfd)]));}}const _0x52d2bf=new Date(Date[_0x26ca17(0x107)]()+_0x358e83*0x36ee80),_0x4fc6c2=await _0xd3264f[_0x26ca17(0xf3)]['send']({'embed':{'color':tesseract_1[_0x26ca17(0x134)][_0x26ca17(0x101)][_0x26ca17(0x102)],'author':{'name':_0x26ca17(0x10d)},'title':_0x3a331e,'description':_0x26ca17(0xfc),'fields':_0x2a4ab7[_0x26ca17(0xf5)][_0x26ca17(0x10b)]((_0x37b227,_0x1da628)=>({'name':this['reactions'][_0x1da628],'value':_0x37b227})),'footer':{'text':_0x26ca17(0x129)},'timestamp':_0x52d2bf}});await Poll_1[_0x26ca17(0x10c)][_0x26ca17(0x122)]({'_id':_0x4fc6c2['id'],'channel':_0x4fc6c2[_0x26ca17(0xf3)]['id'],'guild':_0x4fc6c2[_0x26ca17(0x140)]['id'],'ends':_0x52d2bf});for(const _0x50eff5 of this[_0x26ca17(0x108)]['slice'](0x0,_0x2a4ab7[_0x26ca17(0xf5)][_0x26ca17(0x11c)])){await _0x4fc6c2[_0x26ca17(0x12b)](_0x50eff5)['catch'](()=>{});}},this[_0x27b835(0x108)]=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'],this[_0x27b835(0xf0)]=0x3;}};
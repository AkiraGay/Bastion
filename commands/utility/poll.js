const a134_0x5350=['user','react','language','LIMITS','get','ends','React\x20to\x20this\x20message\x20with\x20the\x20corresponding\x20emoji\x20to\x20vote\x20for\x20that\x20option.','getString','apply','defaultTimeout','PremiumTier','Ends','join','poll','exports','now','poll\x20--status\x20POLL_MESSAGE_ID','../../utils/constants','LIMITED_PREMIUM_MEMBERSHIP','toFixed','reactions','messages','@bastion/tesseract','option','\x20â€¢\x20Ends','poll\x20--timeout\x20HOURS\x20--option\x20OPTIONS...\x20--\x20QUESTION','return\x20/\x22\x20+\x20this\x20+\x20\x22/','status','poll\x20--option\x20OPTIONS...\x20--\x20QUESTION','has','number','POLL\x20STATUS','errors','fetch','channel','name','DiscordError','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','locale','countDocuments','exec','guild','POLL_NOT_FOUND','../../utils/omnic','premiumPolls','GOLD','client','title','embeds','membershipLimitPolls','default','Command','\x20votes\x20(','BASTION_ERROR_TYPE','isPublicBastion','POLL_TIMEOUT','PLATINUM','findOne','INVALID_COMMAND_SYNTAX','bot','channels','Constants','size','value','timeout','POLLS','It\x20allows\x20you\x20to\x20run\x20polls\x20in\x20the\x20server\x20for\x20at\x20least\x20an\x20hour\x20and\x20at\x20most\x20a\x20month.\x20You\x20can\x20set\x20at\x20most\x2013\x20options\x20for\x20the\x20poll.\x20It\x20also\x20allows\x20you\x20to\x20see\x20the\x20status\x20of\x20a\x20running\x20poll.','filter','COLORS','length','premiumPollTimeout','create','IRIS','PREMIUM_MEMBERSHIP_REQUIRED','fields','cache','slice','map','\x20/\x20','document','_id','catch'];(function(_0xc4e757,_0x5350e0){const _0x427380=function(_0x2a2fff){while(--_0x2a2fff){_0xc4e757['push'](_0xc4e757['shift']());}},_0x379818=function(){const _0x112d1f={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4eee34,_0x3b419f,_0x40d704,_0x101af3){_0x101af3=_0x101af3||{};let _0xd8c27c=_0x3b419f+'='+_0x40d704,_0x4e8352=0x0;for(let _0x3c6648=0x0,_0x4b9a3e=_0x4eee34['length'];_0x3c6648<_0x4b9a3e;_0x3c6648++){const _0x3a9a94=_0x4eee34[_0x3c6648];_0xd8c27c+=';\x20'+_0x3a9a94;const _0x585880=_0x4eee34[_0x3a9a94];_0x4eee34['push'](_0x585880),_0x4b9a3e=_0x4eee34['length'],_0x585880!==!![]&&(_0xd8c27c+='='+_0x585880);}_0x101af3['cookie']=_0xd8c27c;},'removeCookie':function(){return'dev';},'getCookie':function(_0x279981,_0x5c2f68){_0x279981=_0x279981||function(_0x54f318){return _0x54f318;};const _0x324830=_0x279981(new RegExp('(?:^|;\x20)'+_0x5c2f68['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x59e7bb=function(_0x3c8a7c,_0x34e574){_0x3c8a7c(++_0x34e574);};return _0x59e7bb(_0x427380,_0x5350e0),_0x324830?decodeURIComponent(_0x324830[0x1]):undefined;}},_0xb5b666=function(){const _0x45386c=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x45386c['test'](_0x112d1f['removeCookie']['toString']());};_0x112d1f['updateCookie']=_0xb5b666;let _0x4b7f8f='';const _0x28b376=_0x112d1f['updateCookie']();if(!_0x28b376)_0x112d1f['setCookie'](['*'],'counter',0x1);else _0x28b376?_0x4b7f8f=_0x112d1f['getCookie'](null,'counter'):_0x112d1f['removeCookie']();};_0x379818();}(a134_0x5350,0x97));const a134_0x4273=function(_0xc4e757,_0x5350e0){_0xc4e757=_0xc4e757-0x0;let _0x427380=a134_0x5350[_0xc4e757];return _0x427380;};const a134_0x40d704=function(){let _0x29c7be=!![];return function(_0x1b3c42,_0x4474d2){const _0x558032=_0x29c7be?function(){if(_0x4474d2){const _0x596d75=_0x4474d2[a134_0x4273('0x15')](_0x1b3c42,arguments);return _0x4474d2=null,_0x596d75;}}:function(){};return _0x29c7be=![],_0x558032;};}(),a134_0x3b419f=a134_0x40d704(this,function(){const _0x3e8d2a=function(){const _0x140fd0=_0x3e8d2a['constructor'](a134_0x4273('0x27'))()['constructor'](a134_0x4273('0x32'));return!_0x140fd0['test'](a134_0x3b419f);};return _0x3e8d2a();});a134_0x3b419f();'use strict';const tesseract_1=require(a134_0x4273('0x23')),Poll_1=require('../../models/Poll'),constants=require(a134_0x4273('0x1e')),errors=require('../../utils/errors'),numbers=require('../../utils/numbers'),omnic=require(a134_0x4273('0x38'));module[a134_0x4273('0x1b')]=class PollCommand extends tesseract_1[a134_0x4273('0x40')]{constructor(){super(a134_0x4273('0x1a'),{'description':a134_0x4273('0x4f'),'triggers':[],'arguments':{'alias':{'timeout':['t'],'option':['o'],'status':['s']},'number':[a134_0x4273('0x4d')],'string':[a134_0x4273('0x24'),a134_0x4273('0x28')],'coerce':{'timeout':_0x2af681=>typeof _0x2af681===a134_0x4273('0x2b')&&numbers['clamp'](_0x2af681,0x1,0x2d0)},'default':{'timeout':0x3}},'scope':a134_0x4273('0x36'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':['MANAGE_CHANNELS'],'syntax':[a134_0x4273('0x1d'),a134_0x4273('0x29'),a134_0x4273('0x26')]}),this[a134_0x4273('0x35')]=async(_0x29d15d,_0x466d75)=>{if(_0x466d75[a134_0x4273('0x28')]){const _0x5c4ced=await Poll_1['default'][a134_0x4273('0x46')]({'_id':_0x466d75[a134_0x4273('0x28')],'guild':_0x29d15d[a134_0x4273('0x36')]['id']});if(!_0x5c4ced)throw new Error(a134_0x4273('0x37'));if(!_0x29d15d['guild'][a134_0x4273('0x49')][a134_0x4273('0x6')][a134_0x4273('0x2a')](_0x5c4ced[a134_0x4273('0x2f')]))throw new Error(a134_0x4273('0x37'));const _0x3032e4=_0x29d15d[a134_0x4273('0x36')][a134_0x4273('0x49')][a134_0x4273('0x6')][a134_0x4273('0x11')](_0x5c4ced[a134_0x4273('0x2f')]),_0x27ba14=await _0x3032e4[a134_0x4273('0x22')][a134_0x4273('0x2e')](_0x5c4ced[a134_0x4273('0xb')])[a134_0x4273('0xc')](()=>{});if(!_0x27ba14)throw new Error(a134_0x4273('0x37'));const _0x48555c=_0x27ba14[a134_0x4273('0x3d')][0x0]['fields'][a134_0x4273('0x8')](_0x5d72e0=>_0x5d72e0[a134_0x4273('0x4c')]),_0x40e086={};let _0xeafb92=0x0;for(const _0x33b79c in this[a134_0x4273('0x21')][a134_0x4273('0x7')](0x0,_0x48555c[a134_0x4273('0x0')])){if(_0x27ba14['reactions'][a134_0x4273('0x6')]['has'](this[a134_0x4273('0x21')][_0x33b79c])){await _0x27ba14[a134_0x4273('0x21')]['cache'][a134_0x4273('0x11')](this[a134_0x4273('0x21')][_0x33b79c])['users'][a134_0x4273('0x2e')]()[a134_0x4273('0xc')](()=>{});const _0xbb2b01=_0x27ba14[a134_0x4273('0x21')][a134_0x4273('0x6')]['get'](this[a134_0x4273('0x21')][_0x33b79c])['users'][a134_0x4273('0x6')][a134_0x4273('0x50')](_0x2b2187=>!_0x2b2187[a134_0x4273('0x48')])[a134_0x4273('0x4b')];_0x40e086[this[a134_0x4273('0x21')][_0x33b79c]]=_0xbb2b01,_0xeafb92+=_0xbb2b01;}}return await _0x29d15d[a134_0x4273('0x2f')]['send']({'embed':{'color':tesseract_1[a134_0x4273('0x4a')][a134_0x4273('0x51')][a134_0x4273('0x3')],'author':{'name':a134_0x4273('0x2c')},'title':_0x27ba14[a134_0x4273('0x3d')][0x0][a134_0x4273('0x3c')],'fields':_0x27ba14[a134_0x4273('0x3d')][0x0][a134_0x4273('0x5')][a134_0x4273('0x8')](_0x16c5df=>({'name':_0x16c5df[a134_0x4273('0x30')]+'\x20'+_0x16c5df[a134_0x4273('0x4c')],'value':(_0x40e086[_0x16c5df['name']]||0x0)+a134_0x4273('0x9')+_0xeafb92+a134_0x4273('0x41')+(_0x40e086[_0x16c5df[a134_0x4273('0x30')]]?_0x40e086[_0x16c5df['name']]/_0xeafb92*0x64:0x0)[a134_0x4273('0x20')](0x2)+'%)'})),'footer':{'text':_0x27ba14['id']+a134_0x4273('0x25')},'timestamp':_0x5c4ced[a134_0x4273('0x12')]}});}if(!_0x466d75['_']['length']||!_0x466d75[a134_0x4273('0x24')]||!(_0x466d75['option']instanceof Array))throw new errors[(a134_0x4273('0x31'))](errors[a134_0x4273('0x42')][a134_0x4273('0x47')],this[a134_0x4273('0x30')]);const _0x274494=_0x466d75['_'][a134_0x4273('0x19')]('\x20'),_0x38f06f=_0x466d75[a134_0x4273('0x4d')]?_0x466d75[a134_0x4273('0x4d')]:this[a134_0x4273('0x16')];if(constants[a134_0x4273('0x43')](this[a134_0x4273('0x3b')][a134_0x4273('0xd')])){const _0x25fc3=await omnic['fetchPremiumTier'](_0x29d15d['guild'])['catch'](()=>{});if(_0x25fc3){if(_0x25fc3===omnic[a134_0x4273('0x17')]['GOLD']&&_0x38f06f>constants[a134_0x4273('0x10')][a134_0x4273('0x3a')][a134_0x4273('0x44')])throw new errors[(a134_0x4273('0x31'))](errors['BASTION_ERROR_TYPE'][a134_0x4273('0x1f')],this[a134_0x4273('0x3b')][a134_0x4273('0x33')][a134_0x4273('0x14')](_0x29d15d[a134_0x4273('0x36')][a134_0x4273('0xa')]['language'],a134_0x4273('0x2d'),'membershipLimitPollTimeout',constants[a134_0x4273('0x10')][a134_0x4273('0x3a')]['POLL_TIMEOUT']));else{if(_0x25fc3===omnic[a134_0x4273('0x17')][a134_0x4273('0x45')]&&_0x38f06f>constants[a134_0x4273('0x10')][a134_0x4273('0x45')][a134_0x4273('0x44')])throw new errors[(a134_0x4273('0x31'))](errors[a134_0x4273('0x42')][a134_0x4273('0x1f')],this[a134_0x4273('0x3b')][a134_0x4273('0x33')][a134_0x4273('0x14')](_0x29d15d[a134_0x4273('0x36')][a134_0x4273('0xa')]['language'],a134_0x4273('0x2d'),'membershipLimitPollTimeout',constants[a134_0x4273('0x10')]['PLATINUM'][a134_0x4273('0x44')]));}}else{if(_0x38f06f>constants[a134_0x4273('0x10')][a134_0x4273('0x44')])throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][a134_0x4273('0x4')],this[a134_0x4273('0x3b')][a134_0x4273('0x33')]['getString'](_0x29d15d['guild'][a134_0x4273('0xa')][a134_0x4273('0xf')],'errors',a134_0x4273('0x1'),constants[a134_0x4273('0x10')][a134_0x4273('0x44')]));}const _0x2eda40=await Poll_1[a134_0x4273('0x3f')][a134_0x4273('0x34')]({'guild':_0x29d15d[a134_0x4273('0x36')]['id'],'ends':{'$gte':new Date()}});if(_0x25fc3){if(_0x25fc3===omnic[a134_0x4273('0x17')][a134_0x4273('0x3a')]&&_0x2eda40>=constants['LIMITS'][a134_0x4273('0x3a')][a134_0x4273('0x4e')])throw new errors[(a134_0x4273('0x31'))](errors[a134_0x4273('0x42')][a134_0x4273('0x1f')],this['client'][a134_0x4273('0x33')][a134_0x4273('0x14')](_0x29d15d[a134_0x4273('0x36')]['document'][a134_0x4273('0xf')],a134_0x4273('0x2d'),a134_0x4273('0x3e'),constants[a134_0x4273('0x10')]['GOLD'][a134_0x4273('0x4e')]));else{if(_0x25fc3===omnic[a134_0x4273('0x17')][a134_0x4273('0x45')]&&_0x2eda40>=constants[a134_0x4273('0x10')][a134_0x4273('0x45')][a134_0x4273('0x4e')])throw new errors['DiscordError'](errors[a134_0x4273('0x42')]['LIMITED_PREMIUM_MEMBERSHIP'],this[a134_0x4273('0x3b')]['locale'][a134_0x4273('0x14')](_0x29d15d[a134_0x4273('0x36')][a134_0x4273('0xa')]['language'],'errors',a134_0x4273('0x3e'),constants['LIMITS']['PLATINUM'][a134_0x4273('0x4e')]));}}else{if(_0x2eda40>=constants[a134_0x4273('0x10')][a134_0x4273('0x4e')])throw new errors['DiscordError'](errors[a134_0x4273('0x42')]['PREMIUM_MEMBERSHIP_REQUIRED'],this[a134_0x4273('0x3b')][a134_0x4273('0x33')]['getString'](_0x29d15d[a134_0x4273('0x36')][a134_0x4273('0xa')][a134_0x4273('0xf')],'errors',a134_0x4273('0x39'),constants[a134_0x4273('0x10')][a134_0x4273('0x4e')]));}}const _0x51a26b=new Date(Date[a134_0x4273('0x1c')]()+_0x38f06f*0x36ee80),_0x5d39ee=await _0x29d15d[a134_0x4273('0x2f')]['send']({'embed':{'color':tesseract_1['Constants'][a134_0x4273('0x51')][a134_0x4273('0x3')],'author':{'name':'POLL'},'title':_0x274494,'description':a134_0x4273('0x13'),'fields':_0x466d75['option'][a134_0x4273('0x8')]((_0x139974,_0x204a61)=>({'name':this[a134_0x4273('0x21')][_0x204a61],'value':_0x139974})),'footer':{'text':a134_0x4273('0x18')},'timestamp':_0x51a26b}});await Poll_1[a134_0x4273('0x3f')][a134_0x4273('0x2')]({'_id':_0x5d39ee['id'],'channel':_0x5d39ee['channel']['id'],'guild':_0x5d39ee[a134_0x4273('0x36')]['id'],'ends':_0x51a26b});for(const _0x332232 of this[a134_0x4273('0x21')][a134_0x4273('0x7')](0x0,_0x466d75['option'][a134_0x4273('0x0')])){await _0x5d39ee[a134_0x4273('0xe')](_0x332232)[a134_0x4273('0xc')](()=>{});}},this['reactions']=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'],this[a134_0x4273('0x16')]=0x3;}};
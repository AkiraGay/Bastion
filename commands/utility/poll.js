const a142_0x5a1c=['React\x20to\x20this\x20message\x20with\x20the\x20corresponding\x20emoji\x20to\x20vote\x20for\x20that\x20option.','document','user','membershipLimitPolls','constructor','../../models/Poll','poll\x20--option\x20OPTIONS...\x20--\x20QUESTION','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','slice','COLORS','language','test','channels','poll\x20--timeout\x20HOURS\x20--option\x20OPTIONS...\x20--\x20QUESTION','map','membershipLimitPollTimeout','title','POLLS','poll','../../utils/omnic','errors','return\x20/\x22\x20+\x20this\x20+\x20\x22/','fields','channel','exports','POLL_TIMEOUT','length','react','create','catch','DiscordError','LIMITS','exec','guild','countDocuments','getString','POLL','PREMIUM_MEMBERSHIP_REQUIRED','\x20votes\x20(','timeout','embeds','IRIS','INVALID_COMMAND_SYNTAX','BASTION_ERROR_TYPE','../../utils/errors','value','name','../../utils/numbers','size','defaultTimeout','premiumPolls','\x20â€¢\x20Ends','POLL_NOT_FOUND','bot','reactions','cache','locale','Constants','premiumPollTimeout','send','default','apply','ends','now','status','option','get','PremiumTier','client','users','_id','\x20/\x20','join','has','number','Command','fetch','LIMITED_PREMIUM_MEMBERSHIP','../../utils/constants','PLATINUM','GOLD'];(function(_0x11e713,_0x5a1cdf){const _0x354fa9=function(_0x562aa1){while(--_0x562aa1){_0x11e713['push'](_0x11e713['shift']());}},_0x43c522=function(){const _0x42ee0={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3de7fc,_0x408f94,_0x4d4d7e,_0x33b680){_0x33b680=_0x33b680||{};let _0x94004c=_0x408f94+'='+_0x4d4d7e,_0x354af6=0x0;for(let _0x23f1c4=0x0,_0x1ff748=_0x3de7fc['length'];_0x23f1c4<_0x1ff748;_0x23f1c4++){const _0x66c99e=_0x3de7fc[_0x23f1c4];_0x94004c+=';\x20'+_0x66c99e;const _0xfd3f2b=_0x3de7fc[_0x66c99e];_0x3de7fc['push'](_0xfd3f2b),_0x1ff748=_0x3de7fc['length'],_0xfd3f2b!==!![]&&(_0x94004c+='='+_0xfd3f2b);}_0x33b680['cookie']=_0x94004c;},'removeCookie':function(){return'dev';},'getCookie':function(_0x7e10f5,_0xe6fb10){_0x7e10f5=_0x7e10f5||function(_0x313e09){return _0x313e09;};const _0x395cbc=_0x7e10f5(new RegExp('(?:^|;\x20)'+_0xe6fb10['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x28462c=function(_0x8e66ff,_0x323f1a){_0x8e66ff(++_0x323f1a);};return _0x28462c(_0x354fa9,_0x5a1cdf),_0x395cbc?decodeURIComponent(_0x395cbc[0x1]):undefined;}},_0x20be41=function(){const _0x1f2c53=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x1f2c53['test'](_0x42ee0['removeCookie']['toString']());};_0x42ee0['updateCookie']=_0x20be41;let _0x13437c='';const _0xfd75fc=_0x42ee0['updateCookie']();if(!_0xfd75fc)_0x42ee0['setCookie'](['*'],'counter',0x1);else _0xfd75fc?_0x13437c=_0x42ee0['getCookie'](null,'counter'):_0x42ee0['removeCookie']();};_0x43c522();}(a142_0x5a1c,0xaf));const a142_0x354f=function(_0x11e713,_0x5a1cdf){_0x11e713=_0x11e713-0x0;let _0x354fa9=a142_0x5a1c[_0x11e713];return _0x354fa9;};const a142_0x42ee0=function(){let _0x13437c=!![];return function(_0xfd75fc,_0x3de7fc){const _0x408f94=_0x13437c?function(){if(_0x3de7fc){const _0x4d4d7e=_0x3de7fc[a142_0x354f('0x30')](_0xfd75fc,arguments);return _0x3de7fc=null,_0x4d4d7e;}}:function(){};return _0x13437c=![],_0x408f94;};}(),a142_0x562aa1=a142_0x42ee0(this,function(){const _0x33b680=function(){const _0x94004c=_0x33b680['constructor'](a142_0x354f('0x8'))()[a142_0x354f('0x48')](a142_0x354f('0x4b'));return!_0x94004c[a142_0x354f('0x4f')](a142_0x562aa1);};return _0x33b680();});a142_0x562aa1();'use strict';const tesseract_1=require('@bastion/tesseract'),Poll_1=require(a142_0x354f('0x49')),constants=require(a142_0x354f('0x41')),errors=require(a142_0x354f('0x1f')),numbers=require(a142_0x354f('0x22')),omnic=require(a142_0x354f('0x6'));module[a142_0x354f('0xb')]=class PollCommand extends tesseract_1[a142_0x354f('0x3e')]{constructor(){super(a142_0x354f('0x5'),{'description':'It\x20allows\x20you\x20to\x20run\x20polls\x20in\x20the\x20server\x20for\x20at\x20least\x20an\x20hour\x20and\x20at\x20most\x20a\x20month.\x20You\x20can\x20set\x20at\x20most\x2013\x20options\x20for\x20the\x20poll.\x20It\x20also\x20allows\x20you\x20to\x20see\x20the\x20status\x20of\x20a\x20running\x20poll.','triggers':[],'arguments':{'alias':{'timeout':['t'],'option':['o'],'status':['s']},'number':[a142_0x354f('0x1a')],'string':[a142_0x354f('0x34'),a142_0x354f('0x33')],'coerce':{'timeout':_0x354af6=>typeof _0x354af6===a142_0x354f('0x3d')&&numbers['clamp'](_0x354af6,0x1,0x2d0)},'default':{'timeout':0x3}},'scope':a142_0x354f('0x14'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':['MANAGE_CHANNELS'],'syntax':['poll\x20--status\x20POLL_MESSAGE_ID',a142_0x354f('0x4a'),a142_0x354f('0x0')]}),this[a142_0x354f('0x13')]=async(_0x23f1c4,_0x1ff748)=>{if(_0x1ff748[a142_0x354f('0x33')]){const _0x395cbc=await Poll_1[a142_0x354f('0x2f')]['findOne']({'_id':_0x1ff748[a142_0x354f('0x33')],'guild':_0x23f1c4[a142_0x354f('0x14')]['id']});if(!_0x395cbc)throw new Error(a142_0x354f('0x27'));if(!_0x23f1c4['guild'][a142_0x354f('0x50')][a142_0x354f('0x2a')]['has'](_0x395cbc[a142_0x354f('0xa')]))throw new Error(a142_0x354f('0x27'));const _0x28462c=_0x23f1c4['guild'][a142_0x354f('0x50')]['cache']['get'](_0x395cbc[a142_0x354f('0xa')]),_0x313e09=await _0x28462c['messages'][a142_0x354f('0x3f')](_0x395cbc[a142_0x354f('0x39')])[a142_0x354f('0x10')](()=>{});if(!_0x313e09)throw new Error(a142_0x354f('0x27'));const _0x8e66ff=_0x313e09['embeds'][0x0][a142_0x354f('0x9')][a142_0x354f('0x1')](_0x8540af=>_0x8540af[a142_0x354f('0x20')]),_0x323f1a={};let _0x1f2c53=0x0;for(const _0x2286f3 in this[a142_0x354f('0x29')][a142_0x354f('0x4c')](0x0,_0x8e66ff[a142_0x354f('0xd')])){if(_0x313e09[a142_0x354f('0x29')][a142_0x354f('0x2a')][a142_0x354f('0x3c')](this[a142_0x354f('0x29')][_0x2286f3])){await _0x313e09[a142_0x354f('0x29')][a142_0x354f('0x2a')][a142_0x354f('0x35')](this[a142_0x354f('0x29')][_0x2286f3])[a142_0x354f('0x38')]['fetch']()[a142_0x354f('0x10')](()=>{});const _0x3b78f7=_0x313e09[a142_0x354f('0x29')][a142_0x354f('0x2a')]['get'](this[a142_0x354f('0x29')][_0x2286f3])[a142_0x354f('0x38')][a142_0x354f('0x2a')]['filter'](_0x298f28=>!_0x298f28[a142_0x354f('0x28')])[a142_0x354f('0x23')];_0x323f1a[this['reactions'][_0x2286f3]]=_0x3b78f7,_0x1f2c53+=_0x3b78f7;}}return await _0x23f1c4[a142_0x354f('0xa')][a142_0x354f('0x2e')]({'embed':{'color':tesseract_1[a142_0x354f('0x2c')]['COLORS'][a142_0x354f('0x1c')],'author':{'name':'POLL\x20STATUS'},'title':_0x313e09[a142_0x354f('0x1b')][0x0][a142_0x354f('0x3')],'fields':_0x313e09[a142_0x354f('0x1b')][0x0][a142_0x354f('0x9')][a142_0x354f('0x1')](_0x4acd91=>({'name':_0x4acd91[a142_0x354f('0x21')]+'\x20'+_0x4acd91[a142_0x354f('0x20')],'value':(_0x323f1a[_0x4acd91[a142_0x354f('0x21')]]||0x0)+a142_0x354f('0x3a')+_0x1f2c53+a142_0x354f('0x19')+(_0x323f1a[_0x4acd91[a142_0x354f('0x21')]]?_0x323f1a[_0x4acd91[a142_0x354f('0x21')]]/_0x1f2c53*0x64:0x0)['toFixed'](0x2)+'%)'})),'footer':{'text':_0x313e09['id']+a142_0x354f('0x26')},'timestamp':_0x395cbc[a142_0x354f('0x31')]}});}if(!_0x1ff748['_']['length']||!_0x1ff748[a142_0x354f('0x34')]||!(_0x1ff748[a142_0x354f('0x34')]instanceof Array))throw new errors[(a142_0x354f('0x11'))](errors[a142_0x354f('0x1e')][a142_0x354f('0x1d')],this[a142_0x354f('0x21')]);const _0x66c99e=_0x1ff748['_'][a142_0x354f('0x3b')]('\x20'),_0xfd3f2b=_0x1ff748['timeout']?_0x1ff748[a142_0x354f('0x1a')]:this[a142_0x354f('0x24')];if(constants['isPublicBastion'](this['client'][a142_0x354f('0x46')])){const _0x43ee39=await omnic['fetchPremiumTier'](_0x23f1c4[a142_0x354f('0x14')])[a142_0x354f('0x10')](()=>{});if(_0x43ee39){if(_0x43ee39===omnic[a142_0x354f('0x36')][a142_0x354f('0x43')]&&_0xfd3f2b>constants['LIMITS'][a142_0x354f('0x43')][a142_0x354f('0xc')])throw new errors[(a142_0x354f('0x11'))](errors['BASTION_ERROR_TYPE'][a142_0x354f('0x40')],this[a142_0x354f('0x37')][a142_0x354f('0x2b')]['getString'](_0x23f1c4[a142_0x354f('0x14')][a142_0x354f('0x45')][a142_0x354f('0x4e')],a142_0x354f('0x7'),'membershipLimitPollTimeout',constants[a142_0x354f('0x12')][a142_0x354f('0x43')][a142_0x354f('0xc')]));else{if(_0x43ee39===omnic[a142_0x354f('0x36')][a142_0x354f('0x42')]&&_0xfd3f2b>constants[a142_0x354f('0x12')][a142_0x354f('0x42')]['POLL_TIMEOUT'])throw new errors[(a142_0x354f('0x11'))](errors[a142_0x354f('0x1e')][a142_0x354f('0x40')],this[a142_0x354f('0x37')]['locale'][a142_0x354f('0x16')](_0x23f1c4[a142_0x354f('0x14')][a142_0x354f('0x45')][a142_0x354f('0x4e')],a142_0x354f('0x7'),a142_0x354f('0x2'),constants[a142_0x354f('0x12')][a142_0x354f('0x42')][a142_0x354f('0xc')]));}}else{if(_0xfd3f2b>constants[a142_0x354f('0x12')]['POLL_TIMEOUT'])throw new errors['DiscordError'](errors[a142_0x354f('0x1e')][a142_0x354f('0x18')],this[a142_0x354f('0x37')]['locale'][a142_0x354f('0x16')](_0x23f1c4['guild'][a142_0x354f('0x45')][a142_0x354f('0x4e')],'errors',a142_0x354f('0x2d'),constants[a142_0x354f('0x12')][a142_0x354f('0xc')]));}const _0x40ba2f=await Poll_1['default'][a142_0x354f('0x15')]({'guild':_0x23f1c4[a142_0x354f('0x14')]['id'],'ends':{'$gte':new Date()}});if(_0x43ee39){if(_0x43ee39===omnic[a142_0x354f('0x36')][a142_0x354f('0x43')]&&_0x40ba2f>=constants['LIMITS'][a142_0x354f('0x43')][a142_0x354f('0x4')])throw new errors[(a142_0x354f('0x11'))](errors[a142_0x354f('0x1e')][a142_0x354f('0x40')],this[a142_0x354f('0x37')][a142_0x354f('0x2b')][a142_0x354f('0x16')](_0x23f1c4['guild'][a142_0x354f('0x45')]['language'],a142_0x354f('0x7'),a142_0x354f('0x47'),constants['LIMITS'][a142_0x354f('0x43')][a142_0x354f('0x4')]));else{if(_0x43ee39===omnic[a142_0x354f('0x36')][a142_0x354f('0x42')]&&_0x40ba2f>=constants['LIMITS']['PLATINUM'][a142_0x354f('0x4')])throw new errors[(a142_0x354f('0x11'))](errors[a142_0x354f('0x1e')]['LIMITED_PREMIUM_MEMBERSHIP'],this[a142_0x354f('0x37')][a142_0x354f('0x2b')][a142_0x354f('0x16')](_0x23f1c4[a142_0x354f('0x14')]['document'][a142_0x354f('0x4e')],'errors',a142_0x354f('0x47'),constants[a142_0x354f('0x12')]['PLATINUM'][a142_0x354f('0x4')]));}}else{if(_0x40ba2f>=constants[a142_0x354f('0x12')][a142_0x354f('0x4')])throw new errors[(a142_0x354f('0x11'))](errors[a142_0x354f('0x1e')]['PREMIUM_MEMBERSHIP_REQUIRED'],this[a142_0x354f('0x37')][a142_0x354f('0x2b')][a142_0x354f('0x16')](_0x23f1c4[a142_0x354f('0x14')][a142_0x354f('0x45')][a142_0x354f('0x4e')],a142_0x354f('0x7'),a142_0x354f('0x25'),constants[a142_0x354f('0x12')][a142_0x354f('0x4')]));}}const _0x7e10f5=new Date(Date[a142_0x354f('0x32')]()+_0xfd3f2b*0x36ee80),_0xe6fb10=await _0x23f1c4[a142_0x354f('0xa')][a142_0x354f('0x2e')]({'embed':{'color':tesseract_1[a142_0x354f('0x2c')][a142_0x354f('0x4d')][a142_0x354f('0x1c')],'author':{'name':a142_0x354f('0x17')},'title':_0x66c99e,'description':a142_0x354f('0x44'),'fields':_0x1ff748[a142_0x354f('0x34')]['map']((_0x65d697,_0xe3f2cd)=>({'name':this[a142_0x354f('0x29')][_0xe3f2cd],'value':_0x65d697})),'footer':{'text':'Ends'},'timestamp':_0x7e10f5}});await Poll_1[a142_0x354f('0x2f')][a142_0x354f('0xf')]({'_id':_0xe6fb10['id'],'channel':_0xe6fb10[a142_0x354f('0xa')]['id'],'guild':_0xe6fb10[a142_0x354f('0x14')]['id'],'ends':_0x7e10f5});for(const _0x486604 of this[a142_0x354f('0x29')]['slice'](0x0,_0x1ff748[a142_0x354f('0x34')][a142_0x354f('0xd')])){await _0xe6fb10[a142_0x354f('0xe')](_0x486604)[a142_0x354f('0x10')](()=>{});}},this['reactions']=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'],this[a142_0x354f('0x24')]=0x3;}};
const a141_0x157e=['countDocuments','name','apply','fields','map','GOLD','get','reactions','toFixed','PLATINUM','ends','default','POLL_NOT_FOUND','\x20votes\x20(','length','document','membershipLimitPolls','PremiumTier','user','Constants','LIMITED_PREMIUM_MEMBERSHIP','LIMITS','IRIS','PREMIUM_MEMBERSHIP_REQUIRED','POLLS','users','MANAGE_CHANNELS','timeout','return\x20/\x22\x20+\x20this\x20+\x20\x22/','exports','value','status','premiumPolls','../../utils/constants','isPublicBastion','POLL\x20STATUS','messages','number','test','poll\x20--option\x20OPTIONS...\x20--\x20QUESTION','client','POLL_TIMEOUT','Command','now','guild','\x20â€¢\x20Ends','premiumPollTimeout','../../utils/numbers','../../utils/omnic','option','findOne','BASTION_ERROR_TYPE','clamp','channels','poll','@bastion/tesseract','poll\x20--timeout\x20HOURS\x20--option\x20OPTIONS...\x20--\x20QUESTION','poll\x20--status\x20POLL_MESSAGE_ID','constructor','size','catch','defaultTimeout','embeds','locale','errors','exec','react','getString','membershipLimitPollTimeout','cache','\x20/\x20','POLL','fetch','channel','COLORS','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','DiscordError','send','slice','title','filter','language'];(function(_0x36b49a,_0x157eb6){const _0xdaf0ad=function(_0x3ef4d2){while(--_0x3ef4d2){_0x36b49a['push'](_0x36b49a['shift']());}},_0x3de916=function(){const _0x154422={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x24bf2d,_0x35b007,_0x39b3eb,_0xf63100){_0xf63100=_0xf63100||{};let _0x19032a=_0x35b007+'='+_0x39b3eb,_0xa3dde2=0x0;for(let _0x28d4d4=0x0,_0x172e8d=_0x24bf2d['length'];_0x28d4d4<_0x172e8d;_0x28d4d4++){const _0x227f5c=_0x24bf2d[_0x28d4d4];_0x19032a+=';\x20'+_0x227f5c;const _0x557b9c=_0x24bf2d[_0x227f5c];_0x24bf2d['push'](_0x557b9c),_0x172e8d=_0x24bf2d['length'],_0x557b9c!==!![]&&(_0x19032a+='='+_0x557b9c);}_0xf63100['cookie']=_0x19032a;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4fd9a7,_0x200e60){_0x4fd9a7=_0x4fd9a7||function(_0x21595e){return _0x21595e;};const _0x4ef1c6=_0x4fd9a7(new RegExp('(?:^|;\x20)'+_0x200e60['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x144332=function(_0x5a1f72,_0x45fa97){_0x5a1f72(++_0x45fa97);};return _0x144332(_0xdaf0ad,_0x157eb6),_0x4ef1c6?decodeURIComponent(_0x4ef1c6[0x1]):undefined;}},_0x493788=function(){const _0x5bca06=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x5bca06['test'](_0x154422['removeCookie']['toString']());};_0x154422['updateCookie']=_0x493788;let _0x583aa9='';const _0x48042c=_0x154422['updateCookie']();if(!_0x48042c)_0x154422['setCookie'](['*'],'counter',0x1);else _0x48042c?_0x583aa9=_0x154422['getCookie'](null,'counter'):_0x154422['removeCookie']();};_0x3de916();}(a141_0x157e,0x14a));const a141_0xdaf0=function(_0x36b49a,_0x157eb6){_0x36b49a=_0x36b49a-0x0;let _0xdaf0ad=a141_0x157e[_0x36b49a];return _0xdaf0ad;};const a141_0x154422=function(){let _0x583aa9=!![];return function(_0x48042c,_0x24bf2d){const _0x35b007=_0x583aa9?function(){if(_0x24bf2d){const _0x39b3eb=_0x24bf2d[a141_0xdaf0('0x0')](_0x48042c,arguments);return _0x24bf2d=null,_0x39b3eb;}}:function(){};return _0x583aa9=![],_0x35b007;};}(),a141_0x3ef4d2=a141_0x154422(this,function(){const _0xf63100=function(){const _0x19032a=_0xf63100[a141_0xdaf0('0x38')](a141_0xdaf0('0x1a'))()[a141_0xdaf0('0x38')](a141_0xdaf0('0x49'));return!_0x19032a[a141_0xdaf0('0x24')](a141_0x3ef4d2);};return _0xf63100();});a141_0x3ef4d2();'use strict';const tesseract_1=require(a141_0xdaf0('0x35')),Poll_1=require('../../models/Poll'),constants=require(a141_0xdaf0('0x1f')),errors=require('../../utils/errors'),numbers=require(a141_0xdaf0('0x2d')),omnic=require(a141_0xdaf0('0x2e'));module[a141_0xdaf0('0x1b')]=class PollCommand extends tesseract_1[a141_0xdaf0('0x28')]{constructor(){super(a141_0xdaf0('0x34'),{'description':'It\x20allows\x20you\x20to\x20run\x20polls\x20in\x20the\x20server\x20for\x20at\x20least\x20an\x20hour\x20and\x20at\x20most\x20a\x20month.\x20You\x20can\x20set\x20at\x20most\x2013\x20options\x20for\x20the\x20poll.\x20It\x20also\x20allows\x20you\x20to\x20see\x20the\x20status\x20of\x20a\x20running\x20poll.','triggers':[],'arguments':{'alias':{'timeout':['t'],'option':['o'],'status':['s']},'number':[a141_0xdaf0('0x19')],'string':['option',a141_0xdaf0('0x1d')],'coerce':{'timeout':_0xa3dde2=>typeof _0xa3dde2===a141_0xdaf0('0x23')&&numbers[a141_0xdaf0('0x32')](_0xa3dde2,0x1,0x2d0)},'default':{'timeout':0x3}},'scope':a141_0xdaf0('0x2a'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[a141_0xdaf0('0x18')],'syntax':[a141_0xdaf0('0x37'),a141_0xdaf0('0x25'),a141_0xdaf0('0x36')]}),this[a141_0xdaf0('0x3f')]=async(_0x28d4d4,_0x172e8d)=>{if(_0x172e8d[a141_0xdaf0('0x1d')]){const _0x4ef1c6=await Poll_1[a141_0xdaf0('0x9')][a141_0xdaf0('0x30')]({'_id':_0x172e8d[a141_0xdaf0('0x1d')],'guild':_0x28d4d4[a141_0xdaf0('0x2a')]['id']});if(!_0x4ef1c6)throw new Error('POLL_NOT_FOUND');if(!_0x28d4d4[a141_0xdaf0('0x2a')]['channels'][a141_0xdaf0('0x43')]['has'](_0x4ef1c6[a141_0xdaf0('0x47')]))throw new Error(a141_0xdaf0('0xa'));const _0x144332=_0x28d4d4['guild'][a141_0xdaf0('0x33')][a141_0xdaf0('0x43')][a141_0xdaf0('0x4')](_0x4ef1c6['channel']),_0x21595e=await _0x144332[a141_0xdaf0('0x22')]['fetch'](_0x4ef1c6['_id'])['catch'](()=>{});if(!_0x21595e)throw new Error(a141_0xdaf0('0xa'));const _0x5a1f72=_0x21595e[a141_0xdaf0('0x3c')][0x0][a141_0xdaf0('0x1')]['map'](_0x1c8cbc=>_0x1c8cbc[a141_0xdaf0('0x1c')]),_0x45fa97={};let _0x5bca06=0x0;for(const _0x1313f9 in this[a141_0xdaf0('0x5')]['slice'](0x0,_0x5a1f72[a141_0xdaf0('0xc')])){if(_0x21595e[a141_0xdaf0('0x5')]['cache']['has'](this[a141_0xdaf0('0x5')][_0x1313f9])){await _0x21595e[a141_0xdaf0('0x5')][a141_0xdaf0('0x43')][a141_0xdaf0('0x4')](this[a141_0xdaf0('0x5')][_0x1313f9])[a141_0xdaf0('0x17')][a141_0xdaf0('0x46')]()[a141_0xdaf0('0x3a')](()=>{});const _0x2122b6=_0x21595e['reactions'][a141_0xdaf0('0x43')]['get'](this[a141_0xdaf0('0x5')][_0x1313f9])['users'][a141_0xdaf0('0x43')][a141_0xdaf0('0x4e')](_0x75b053=>!_0x75b053['bot'])[a141_0xdaf0('0x39')];_0x45fa97[this[a141_0xdaf0('0x5')][_0x1313f9]]=_0x2122b6,_0x5bca06+=_0x2122b6;}}return await _0x28d4d4[a141_0xdaf0('0x47')][a141_0xdaf0('0x4b')]({'embed':{'color':tesseract_1[a141_0xdaf0('0x11')][a141_0xdaf0('0x48')][a141_0xdaf0('0x14')],'author':{'name':a141_0xdaf0('0x21')},'title':_0x21595e['embeds'][0x0][a141_0xdaf0('0x4d')],'fields':_0x21595e['embeds'][0x0][a141_0xdaf0('0x1')][a141_0xdaf0('0x2')](_0x497506=>({'name':_0x497506['name']+'\x20'+_0x497506[a141_0xdaf0('0x1c')],'value':(_0x45fa97[_0x497506[a141_0xdaf0('0x51')]]||0x0)+a141_0xdaf0('0x44')+_0x5bca06+a141_0xdaf0('0xb')+(_0x45fa97[_0x497506[a141_0xdaf0('0x51')]]?_0x45fa97[_0x497506[a141_0xdaf0('0x51')]]/_0x5bca06*0x64:0x0)[a141_0xdaf0('0x6')](0x2)+'%)'})),'footer':{'text':_0x21595e['id']+a141_0xdaf0('0x2b')},'timestamp':_0x4ef1c6[a141_0xdaf0('0x8')]}});}if(!_0x172e8d['_'][a141_0xdaf0('0xc')]||!_0x172e8d[a141_0xdaf0('0x2f')]||!(_0x172e8d['option']instanceof Array))throw new errors[(a141_0xdaf0('0x4a'))](errors[a141_0xdaf0('0x31')]['INVALID_COMMAND_SYNTAX'],this['name']);const _0x227f5c=_0x172e8d['_']['join']('\x20'),_0x557b9c=_0x172e8d[a141_0xdaf0('0x19')]?_0x172e8d[a141_0xdaf0('0x19')]:this[a141_0xdaf0('0x3b')];if(constants[a141_0xdaf0('0x20')](this['client'][a141_0xdaf0('0x10')])){const _0x1ed6a9=await omnic['fetchPremiumTier'](_0x28d4d4[a141_0xdaf0('0x2a')])[a141_0xdaf0('0x3a')](()=>{});if(_0x1ed6a9){if(_0x1ed6a9===omnic['PremiumTier']['GOLD']&&_0x557b9c>constants[a141_0xdaf0('0x13')]['GOLD'][a141_0xdaf0('0x27')])throw new errors['DiscordError'](errors[a141_0xdaf0('0x31')][a141_0xdaf0('0x12')],this[a141_0xdaf0('0x26')][a141_0xdaf0('0x3d')][a141_0xdaf0('0x41')](_0x28d4d4[a141_0xdaf0('0x2a')][a141_0xdaf0('0xd')]['language'],a141_0xdaf0('0x3e'),a141_0xdaf0('0x42'),constants[a141_0xdaf0('0x13')]['GOLD'][a141_0xdaf0('0x27')]));else{if(_0x1ed6a9===omnic[a141_0xdaf0('0xf')][a141_0xdaf0('0x7')]&&_0x557b9c>constants[a141_0xdaf0('0x13')][a141_0xdaf0('0x7')]['POLL_TIMEOUT'])throw new errors['DiscordError'](errors[a141_0xdaf0('0x31')]['LIMITED_PREMIUM_MEMBERSHIP'],this['client'][a141_0xdaf0('0x3d')][a141_0xdaf0('0x41')](_0x28d4d4['guild'][a141_0xdaf0('0xd')]['language'],a141_0xdaf0('0x3e'),a141_0xdaf0('0x42'),constants['LIMITS']['PLATINUM']['POLL_TIMEOUT']));}}else{if(_0x557b9c>constants[a141_0xdaf0('0x13')][a141_0xdaf0('0x27')])throw new errors[(a141_0xdaf0('0x4a'))](errors[a141_0xdaf0('0x31')][a141_0xdaf0('0x15')],this[a141_0xdaf0('0x26')]['locale'][a141_0xdaf0('0x41')](_0x28d4d4[a141_0xdaf0('0x2a')][a141_0xdaf0('0xd')]['language'],a141_0xdaf0('0x3e'),a141_0xdaf0('0x2c'),constants[a141_0xdaf0('0x13')][a141_0xdaf0('0x27')]));}const _0x23e78c=await Poll_1[a141_0xdaf0('0x9')][a141_0xdaf0('0x50')]({'guild':_0x28d4d4[a141_0xdaf0('0x2a')]['id'],'ends':{'$gte':new Date()}});if(_0x1ed6a9){if(_0x1ed6a9===omnic[a141_0xdaf0('0xf')][a141_0xdaf0('0x3')]&&_0x23e78c>=constants[a141_0xdaf0('0x13')][a141_0xdaf0('0x3')][a141_0xdaf0('0x16')])throw new errors[(a141_0xdaf0('0x4a'))](errors['BASTION_ERROR_TYPE'][a141_0xdaf0('0x12')],this[a141_0xdaf0('0x26')][a141_0xdaf0('0x3d')][a141_0xdaf0('0x41')](_0x28d4d4[a141_0xdaf0('0x2a')]['document'][a141_0xdaf0('0x4f')],a141_0xdaf0('0x3e'),'membershipLimitPolls',constants[a141_0xdaf0('0x13')][a141_0xdaf0('0x3')][a141_0xdaf0('0x16')]));else{if(_0x1ed6a9===omnic[a141_0xdaf0('0xf')][a141_0xdaf0('0x7')]&&_0x23e78c>=constants[a141_0xdaf0('0x13')]['PLATINUM'][a141_0xdaf0('0x16')])throw new errors[(a141_0xdaf0('0x4a'))](errors[a141_0xdaf0('0x31')]['LIMITED_PREMIUM_MEMBERSHIP'],this['client'][a141_0xdaf0('0x3d')][a141_0xdaf0('0x41')](_0x28d4d4['guild']['document'][a141_0xdaf0('0x4f')],a141_0xdaf0('0x3e'),a141_0xdaf0('0xe'),constants[a141_0xdaf0('0x13')]['PLATINUM'][a141_0xdaf0('0x16')]));}}else{if(_0x23e78c>=constants[a141_0xdaf0('0x13')][a141_0xdaf0('0x16')])throw new errors[(a141_0xdaf0('0x4a'))](errors[a141_0xdaf0('0x31')][a141_0xdaf0('0x15')],this[a141_0xdaf0('0x26')][a141_0xdaf0('0x3d')][a141_0xdaf0('0x41')](_0x28d4d4['guild']['document'][a141_0xdaf0('0x4f')],a141_0xdaf0('0x3e'),a141_0xdaf0('0x1e'),constants['LIMITS'][a141_0xdaf0('0x16')]));}}const _0x4fd9a7=new Date(Date[a141_0xdaf0('0x29')]()+_0x557b9c*0x36ee80),_0x200e60=await _0x28d4d4[a141_0xdaf0('0x47')][a141_0xdaf0('0x4b')]({'embed':{'color':tesseract_1[a141_0xdaf0('0x11')][a141_0xdaf0('0x48')][a141_0xdaf0('0x14')],'author':{'name':a141_0xdaf0('0x45')},'title':_0x227f5c,'description':'React\x20to\x20this\x20message\x20with\x20the\x20corresponding\x20emoji\x20to\x20vote\x20for\x20that\x20option.','fields':_0x172e8d[a141_0xdaf0('0x2f')][a141_0xdaf0('0x2')]((_0x197eba,_0x475d62)=>({'name':this[a141_0xdaf0('0x5')][_0x475d62],'value':_0x197eba})),'footer':{'text':'Ends'},'timestamp':_0x4fd9a7}});await Poll_1[a141_0xdaf0('0x9')]['create']({'_id':_0x200e60['id'],'channel':_0x200e60[a141_0xdaf0('0x47')]['id'],'guild':_0x200e60['guild']['id'],'ends':_0x4fd9a7});for(const _0x11fab1 of this[a141_0xdaf0('0x5')][a141_0xdaf0('0x4c')](0x0,_0x172e8d['option'][a141_0xdaf0('0xc')])){await _0x200e60[a141_0xdaf0('0x40')](_0x11fab1)[a141_0xdaf0('0x3a')](()=>{});}},this[a141_0xdaf0('0x5')]=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'],this[a141_0xdaf0('0x3b')]=0x3;}};
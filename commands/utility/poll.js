const a131_0x1ef7=['name','ends','channel','PREMIUM_MEMBERSHIP_REQUIRED','COLORS','isPublicBastion','POLL_NOT_FOUND','embeds','../../utils/omnic','size','\x20votes\x20(','default','poll\x20--status\x20POLL_MESSAGE_ID','compile','poll\x20--timeout\x20HOURS\x20--option\x20OPTIONS...\x20--\x20QUESTION','POLL\x20STATUS','return\x20/\x22\x20+\x20this\x20+\x20\x22/','length','locale','errors','LIMITED_PREMIUM_MEMBERSHIP','fetch','test','status','_id','client','fetchPremiumTier','clamp','has','POLL_TIMEOUT','create','defaultTimeout','LIMITS','membershipLimitPollTimeout','PLATINUM','react','MANAGE_CHANNELS','channels','membershipLimitPolls','timeout','IRIS','Constants','premiumPollTimeout','BASTION_ERROR_TYPE','catch','option','DiscordError','../../utils/errors','PremiumTier','map','title','language','document','guild','send','bot','cache','now','\x20â€¢\x20Ends','messages','../../utils/numbers','POLLS','users','slice','../../models/Poll','GOLD','findOne','fields','apply','reactions','get','getString','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}'];(function(_0x23b013,_0x1ef787){const _0x38cac7=function(_0x288325){while(--_0x288325){_0x23b013['push'](_0x23b013['shift']());}};const _0x49d3e2=function(){const _0xfb770={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x22b9db,_0x3991c6,_0x27fb61,_0x1f84e0){_0x1f84e0=_0x1f84e0||{};let _0x49b7a4=_0x3991c6+'='+_0x27fb61;let _0x2aaaa5=0x0;for(let _0x4b3399=0x0,_0xd25a5b=_0x22b9db['length'];_0x4b3399<_0xd25a5b;_0x4b3399++){const _0x1373b7=_0x22b9db[_0x4b3399];_0x49b7a4+=';\x20'+_0x1373b7;const _0x2e99a4=_0x22b9db[_0x1373b7];_0x22b9db['push'](_0x2e99a4);_0xd25a5b=_0x22b9db['length'];if(_0x2e99a4!==!![]){_0x49b7a4+='='+_0x2e99a4;}}_0x1f84e0['cookie']=_0x49b7a4;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4aeeb9,_0x480bf9){_0x4aeeb9=_0x4aeeb9||function(_0x1ff7f6){return _0x1ff7f6;};const _0x531689=_0x4aeeb9(new RegExp('(?:^|;\x20)'+_0x480bf9['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x597bcb=function(_0x153b28,_0x12f2bb){_0x153b28(++_0x12f2bb);};_0x597bcb(_0x38cac7,_0x1ef787);return _0x531689?decodeURIComponent(_0x531689[0x1]):undefined;}};const _0x468493=function(){const _0x5cd473=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x5cd473['test'](_0xfb770['removeCookie']['toString']());};_0xfb770['updateCookie']=_0x468493;let _0x2d8ad4='';const _0x529bf5=_0xfb770['updateCookie']();if(!_0x529bf5){_0xfb770['setCookie'](['*'],'counter',0x1);}else if(_0x529bf5){_0x2d8ad4=_0xfb770['getCookie'](null,'counter');}else{_0xfb770['removeCookie']();}};_0x49d3e2();}(a131_0x1ef7,0xfa));const a131_0x38ca=function(_0x23b013,_0x1ef787){_0x23b013=_0x23b013-0x0;let _0x38cac7=a131_0x1ef7[_0x23b013];return _0x38cac7;};const a131_0xfb770=function(){let _0x15e6e2=!![];return function(_0x5652de,_0x3ecd66){const _0x21ced5=_0x15e6e2?function(){if(_0x3ecd66){const _0x296fb2=_0x3ecd66[a131_0x38ca('0x25')](_0x5652de,arguments);_0x3ecd66=null;return _0x296fb2;}}:function(){};_0x15e6e2=![];return _0x21ced5;};}();const a131_0x288325=a131_0xfb770(this,function(){const _0x104000=function(){const _0x5c9a11=_0x104000['constructor'](a131_0x38ca('0x3a'))()[a131_0x38ca('0x37')](a131_0x38ca('0x29'));return!_0x5c9a11[a131_0x38ca('0x40')](a131_0x288325);};return _0x104000();});a131_0x288325();'use strict';const tesseract_1=require('@bastion/tesseract');const Poll_1=require(a131_0x38ca('0x21'));const constants=require('../../utils/constants');const errors=require(a131_0x38ca('0x10'));const numbers=require(a131_0x38ca('0x1d'));const omnic=require(a131_0x38ca('0x32'));module['exports']=class PollCommand extends tesseract_1['Command']{constructor(){super('poll',{'description':'It\x20allows\x20you\x20to\x20run\x20polls\x20in\x20the\x20server\x20for\x20at\x20least\x20an\x20hour\x20and\x20at\x20most\x20a\x20month.\x20You\x20can\x20set\x20at\x20most\x2013\x20options\x20for\x20the\x20poll.\x20It\x20also\x20allows\x20you\x20to\x20see\x20the\x20status\x20of\x20a\x20running\x20poll.','triggers':[],'arguments':{'alias':{'timeout':['t'],'option':['o'],'status':['s']},'number':[a131_0x38ca('0x8')],'string':[a131_0x38ca('0xe'),a131_0x38ca('0x41')],'coerce':{'timeout':_0x204053=>typeof _0x204053==='number'&&numbers[a131_0x38ca('0x45')](_0x204053,0x1,0x2d0)},'default':{'timeout':0x3}},'scope':a131_0x38ca('0x16'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[a131_0x38ca('0x5')],'syntax':[a131_0x38ca('0x36'),'poll\x20--option\x20OPTIONS...\x20--\x20QUESTION',a131_0x38ca('0x38')]});this['exec']=async(_0x38cb12,_0x14107d)=>{if(_0x14107d[a131_0x38ca('0x41')]){const _0x4e091a=await Poll_1[a131_0x38ca('0x35')][a131_0x38ca('0x23')]({'_id':_0x14107d[a131_0x38ca('0x41')],'guild':_0x38cb12[a131_0x38ca('0x16')]['id']});if(!_0x4e091a)throw new Error(a131_0x38ca('0x30'));if(!_0x38cb12['guild'][a131_0x38ca('0x6')]['cache'][a131_0x38ca('0x46')](_0x4e091a['channel']))throw new Error(a131_0x38ca('0x30'));const _0x5584c6=_0x38cb12[a131_0x38ca('0x16')][a131_0x38ca('0x6')][a131_0x38ca('0x19')][a131_0x38ca('0x27')](_0x4e091a[a131_0x38ca('0x2c')]);const _0x5dd08a=await _0x5584c6[a131_0x38ca('0x1c')][a131_0x38ca('0x3f')](_0x4e091a[a131_0x38ca('0x42')])[a131_0x38ca('0xd')](()=>{});if(!_0x5dd08a)throw new Error(a131_0x38ca('0x30'));const _0x22d3ee=_0x5dd08a[a131_0x38ca('0x31')][0x0]['fields'][a131_0x38ca('0x12')](_0x2f6abd=>_0x2f6abd['value']);const _0x145370={};let _0x293cde=0x0;for(const _0x21621c in this['reactions'][a131_0x38ca('0x20')](0x0,_0x22d3ee[a131_0x38ca('0x3b')])){if(_0x5dd08a[a131_0x38ca('0x26')]['cache']['has'](this[a131_0x38ca('0x26')][_0x21621c])){await _0x5dd08a[a131_0x38ca('0x26')][a131_0x38ca('0x19')][a131_0x38ca('0x27')](this[a131_0x38ca('0x26')][_0x21621c])[a131_0x38ca('0x1f')][a131_0x38ca('0x3f')]()[a131_0x38ca('0xd')](()=>{});const _0xeb6c1=_0x5dd08a[a131_0x38ca('0x26')][a131_0x38ca('0x19')]['get'](this[a131_0x38ca('0x26')][_0x21621c])[a131_0x38ca('0x1f')][a131_0x38ca('0x19')]['filter'](_0x6c4cb9=>!_0x6c4cb9[a131_0x38ca('0x18')])[a131_0x38ca('0x33')];_0x145370[this['reactions'][_0x21621c]]=_0xeb6c1;_0x293cde+=_0xeb6c1;}}return await _0x38cb12[a131_0x38ca('0x2c')][a131_0x38ca('0x17')]({'embed':{'color':tesseract_1[a131_0x38ca('0xa')][a131_0x38ca('0x2e')][a131_0x38ca('0x9')],'author':{'name':a131_0x38ca('0x39')},'title':_0x5dd08a[a131_0x38ca('0x31')][0x0][a131_0x38ca('0x13')],'fields':_0x5dd08a[a131_0x38ca('0x31')][0x0][a131_0x38ca('0x24')][a131_0x38ca('0x12')](_0x158b03=>({'name':_0x158b03[a131_0x38ca('0x2a')]+'\x20'+_0x158b03['value'],'value':(_0x145370[_0x158b03[a131_0x38ca('0x2a')]]||0x0)+'\x20/\x20'+_0x293cde+a131_0x38ca('0x34')+(_0x145370[_0x158b03['name']]?_0x145370[_0x158b03[a131_0x38ca('0x2a')]]/_0x293cde*0x64:0x0)['toFixed'](0x2)+'%)'})),'footer':{'text':_0x5dd08a['id']+a131_0x38ca('0x1b')},'timestamp':_0x4e091a[a131_0x38ca('0x2b')]}});}if(!_0x14107d['_'][a131_0x38ca('0x3b')]||!_0x14107d[a131_0x38ca('0xe')]||!_0x14107d[a131_0x38ca('0xe')][a131_0x38ca('0x3b')])throw new errors[(a131_0x38ca('0xf'))](errors['BASTION_ERROR_TYPE']['INVALID_COMMAND_SYNTAX'],this['name']);const _0x28b50b=_0x14107d['_']['join']('\x20');const _0x9f1d4c=_0x14107d[a131_0x38ca('0x8')]?_0x14107d['timeout']:this[a131_0x38ca('0x0')];if(constants[a131_0x38ca('0x2f')](this['client']['user'])){const _0x2eb3f6=await omnic[a131_0x38ca('0x44')](_0x38cb12[a131_0x38ca('0x16')])[a131_0x38ca('0xd')](()=>{});if(_0x2eb3f6){if(_0x2eb3f6===omnic[a131_0x38ca('0x11')][a131_0x38ca('0x22')]&&_0x9f1d4c>constants['LIMITS']['GOLD'][a131_0x38ca('0x47')]){throw new errors[(a131_0x38ca('0xf'))](errors[a131_0x38ca('0xc')][a131_0x38ca('0x3e')],this[a131_0x38ca('0x43')][a131_0x38ca('0x3c')][a131_0x38ca('0x28')](_0x38cb12[a131_0x38ca('0x16')][a131_0x38ca('0x15')][a131_0x38ca('0x14')],a131_0x38ca('0x3d'),a131_0x38ca('0x2'),constants['LIMITS'][a131_0x38ca('0x22')][a131_0x38ca('0x47')]));}else if(_0x2eb3f6===omnic[a131_0x38ca('0x11')]['PLATINUM']&&_0x9f1d4c>constants[a131_0x38ca('0x1')][a131_0x38ca('0x3')][a131_0x38ca('0x47')]){throw new errors[(a131_0x38ca('0xf'))](errors['BASTION_ERROR_TYPE']['LIMITED_PREMIUM_MEMBERSHIP'],this['client'][a131_0x38ca('0x3c')]['getString'](_0x38cb12[a131_0x38ca('0x16')][a131_0x38ca('0x15')][a131_0x38ca('0x14')],'errors','membershipLimitPollTimeout',constants[a131_0x38ca('0x1')][a131_0x38ca('0x3')][a131_0x38ca('0x47')]));}}else if(_0x9f1d4c>constants[a131_0x38ca('0x1')][a131_0x38ca('0x47')]){throw new errors[(a131_0x38ca('0xf'))](errors[a131_0x38ca('0xc')][a131_0x38ca('0x2d')],this['client'][a131_0x38ca('0x3c')][a131_0x38ca('0x28')](_0x38cb12[a131_0x38ca('0x16')][a131_0x38ca('0x15')]['language'],a131_0x38ca('0x3d'),a131_0x38ca('0xb'),constants[a131_0x38ca('0x1')][a131_0x38ca('0x47')]));}const _0x5ee9ac=await Poll_1[a131_0x38ca('0x35')]['countDocuments']({'guild':_0x38cb12[a131_0x38ca('0x16')]['id'],'ends':{'$gte':new Date()}});if(_0x2eb3f6){if(_0x2eb3f6===omnic[a131_0x38ca('0x11')][a131_0x38ca('0x22')]&&_0x5ee9ac>=constants['LIMITS'][a131_0x38ca('0x22')][a131_0x38ca('0x1e')]){throw new errors[(a131_0x38ca('0xf'))](errors[a131_0x38ca('0xc')][a131_0x38ca('0x3e')],this[a131_0x38ca('0x43')]['locale'][a131_0x38ca('0x28')](_0x38cb12[a131_0x38ca('0x16')]['document'][a131_0x38ca('0x14')],a131_0x38ca('0x3d'),a131_0x38ca('0x7'),constants[a131_0x38ca('0x1')][a131_0x38ca('0x22')][a131_0x38ca('0x1e')]));}else if(_0x2eb3f6===omnic[a131_0x38ca('0x11')]['PLATINUM']&&_0x5ee9ac>=constants[a131_0x38ca('0x1')]['PLATINUM'][a131_0x38ca('0x1e')]){throw new errors[(a131_0x38ca('0xf'))](errors['BASTION_ERROR_TYPE']['LIMITED_PREMIUM_MEMBERSHIP'],this[a131_0x38ca('0x43')][a131_0x38ca('0x3c')][a131_0x38ca('0x28')](_0x38cb12[a131_0x38ca('0x16')]['document'][a131_0x38ca('0x14')],a131_0x38ca('0x3d'),a131_0x38ca('0x7'),constants['LIMITS'][a131_0x38ca('0x3')][a131_0x38ca('0x1e')]));}}else{throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE']['PREMIUM_MEMBERSHIP_REQUIRED'],this[a131_0x38ca('0x43')][a131_0x38ca('0x3c')][a131_0x38ca('0x28')](_0x38cb12['guild'][a131_0x38ca('0x15')][a131_0x38ca('0x14')],'errors','premiumPolls',constants[a131_0x38ca('0x1')][a131_0x38ca('0x1e')]));}}const _0x153945=new Date(Date[a131_0x38ca('0x1a')]()+_0x9f1d4c*0x36ee80);const _0x3f1a70=await _0x38cb12[a131_0x38ca('0x2c')][a131_0x38ca('0x17')]({'embed':{'color':tesseract_1[a131_0x38ca('0xa')][a131_0x38ca('0x2e')][a131_0x38ca('0x9')],'author':{'name':'POLL'},'title':_0x28b50b,'description':'React\x20to\x20this\x20message\x20with\x20the\x20corresponding\x20emoji\x20to\x20vote\x20for\x20that\x20option.','fields':_0x14107d[a131_0x38ca('0xe')]['map']((_0x39fd92,_0x2ad9e6)=>({'name':this[a131_0x38ca('0x26')][_0x2ad9e6],'value':_0x39fd92})),'footer':{'text':'Ends'},'timestamp':_0x153945}});await Poll_1[a131_0x38ca('0x35')][a131_0x38ca('0x48')]({'_id':_0x3f1a70['id'],'channel':_0x3f1a70[a131_0x38ca('0x2c')]['id'],'guild':_0x3f1a70[a131_0x38ca('0x16')]['id'],'ends':_0x153945});for(const _0x5d24ff of this[a131_0x38ca('0x26')]['slice'](0x0,_0x14107d[a131_0x38ca('0xe')]['length'])){await _0x3f1a70[a131_0x38ca('0x4')](_0x5d24ff)['catch'](()=>{});}};this[a131_0x38ca('0x26')]=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'];this[a131_0x38ca('0x0')]=0x3;}};
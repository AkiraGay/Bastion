const a160_0x3542=['MANAGE_CHANNELS','guild','@bastion/tesseract','constructor','getString','POLLS','PREMIUM_MEMBERSHIP_REQUIRED','DiscordError','premiumPolls','exec','findOne','_id','filter','../../models/Poll','Command','embeds','premiumPollTimeout','cache','poll\x20--option\x20OPTIONS...\x20--\x20QUESTION','\x20â€¢\x20Ends','get','PremiumTier','return\x20/\x22\x20+\x20this\x20+\x20\x22/','default','Constants','POLL_NOT_FOUND','GOLD','users','send','membershipLimitPolls','countDocuments','slice','fetch','join','document','test','POLL_TIMEOUT','LIMITED_PREMIUM_MEMBERSHIP','exports','number','React\x20to\x20this\x20message\x20with\x20the\x20corresponding\x20emoji\x20to\x20vote\x20for\x20that\x20option.','Ends','fetchPremiumTier','client','../../utils/constants','option','size','errors','membershipLimitPollTimeout','react','POLL\x20STATUS','map','catch','toFixed','PLATINUM','LIMITS','reactions','defaultTimeout','length','poll\x20--status\x20POLL_MESSAGE_ID','messages','user','now','COLORS','clamp','poll','create','\x20/\x20','name','channel','BASTION_ERROR_TYPE','apply','status','../../utils/omnic','timeout','fields','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','channels','has','poll\x20--timeout\x20HOURS\x20--option\x20OPTIONS...\x20--\x20QUESTION','bot','locale','language','IRIS','It\x20allows\x20you\x20to\x20run\x20polls\x20in\x20the\x20server\x20for\x20at\x20least\x20an\x20hour\x20and\x20at\x20most\x20a\x20month.\x20You\x20can\x20set\x20at\x20most\x2013\x20options\x20for\x20the\x20poll.\x20It\x20also\x20allows\x20you\x20to\x20see\x20the\x20status\x20of\x20a\x20running\x20poll.','INVALID_COMMAND_SYNTAX','value'];(function(_0x5dfa3e,_0x16eb4b){const _0x3542cd=function(_0x12aac9){while(--_0x12aac9){_0x5dfa3e['push'](_0x5dfa3e['shift']());}},_0x112c6b=function(){const _0x5a03e7={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x11653d,_0x33c00e,_0x3bd617,_0x33cba5){_0x33cba5=_0x33cba5||{};let _0x25faa8=_0x33c00e+'='+_0x3bd617,_0x1b0716=0x0;for(let _0x2be03e=0x0,_0x28803c=_0x11653d['length'];_0x2be03e<_0x28803c;_0x2be03e++){const _0xedaebc=_0x11653d[_0x2be03e];_0x25faa8+=';\x20'+_0xedaebc;const _0x2db3a4=_0x11653d[_0xedaebc];_0x11653d['push'](_0x2db3a4),_0x28803c=_0x11653d['length'],_0x2db3a4!==!![]&&(_0x25faa8+='='+_0x2db3a4);}_0x33cba5['cookie']=_0x25faa8;},'removeCookie':function(){return'dev';},'getCookie':function(_0x14aeb4,_0x18a9dc){_0x14aeb4=_0x14aeb4||function(_0x217cf4){return _0x217cf4;};const _0x390f14=_0x14aeb4(new RegExp('(?:^|;\x20)'+_0x18a9dc['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x3fa543=function(_0x4f520e,_0xaf3fea){_0x4f520e(++_0xaf3fea);};return _0x3fa543(_0x3542cd,_0x16eb4b),_0x390f14?decodeURIComponent(_0x390f14[0x1]):undefined;}},_0xf9afa6=function(){const _0x449336=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x449336['test'](_0x5a03e7['removeCookie']['toString']());};_0x5a03e7['updateCookie']=_0xf9afa6;let _0x5f3a96='';const _0x38f243=_0x5a03e7['updateCookie']();if(!_0x38f243)_0x5a03e7['setCookie'](['*'],'counter',0x1);else _0x38f243?_0x5f3a96=_0x5a03e7['getCookie'](null,'counter'):_0x5a03e7['removeCookie']();};_0x112c6b();}(a160_0x3542,0x12e));const a160_0x112c=function(_0x5dfa3e,_0x16eb4b){_0x5dfa3e=_0x5dfa3e-0x9e;let _0x3542cd=a160_0x3542[_0x5dfa3e];return _0x3542cd;};const a160_0x221768=a160_0x112c,a160_0xf9afa6=function(){let _0x38f243=!![];return function(_0x11653d,_0x33c00e){const _0x3bd617=_0x38f243?function(){const _0x35e2a0=a160_0x112c;if(_0x33c00e){const _0x33cba5=_0x33c00e[_0x35e2a0(0xbc)](_0x11653d,arguments);return _0x33c00e=null,_0x33cba5;}}:function(){};return _0x38f243=![],_0x3bd617;};}(),a160_0x5a03e7=a160_0xf9afa6(this,function(){const _0x25faa8=function(){const _0x5071d9=a160_0x112c,_0x1b0716=_0x25faa8['constructor'](_0x5071d9(0xe2))()[_0x5071d9(0xcf)](_0x5071d9(0xc1));return!_0x1b0716[_0x5071d9(0xef)](a160_0x5a03e7);};return _0x25faa8();});a160_0x5a03e7();'use strict';const tesseract_1=require(a160_0x221768(0xce)),Poll_1=require(a160_0x221768(0xd9)),constants=require(a160_0x221768(0xa1)),errors=require('../../utils/errors'),numbers=require('../../utils/numbers'),omnic=require(a160_0x221768(0xbe));module[a160_0x221768(0xf2)]=class PollCommand extends tesseract_1[a160_0x221768(0xda)]{constructor(){const _0x20adc3=a160_0x221768;super(_0x20adc3(0xb6),{'description':_0x20adc3(0xc9),'triggers':[],'arguments':{'alias':{'timeout':['t'],'option':['o'],'status':['s']},'number':['timeout'],'string':[_0x20adc3(0xa2),_0x20adc3(0xbd)],'coerce':{'timeout':_0x2be03e=>typeof _0x2be03e===_0x20adc3(0xf3)&&numbers[_0x20adc3(0xb5)](_0x2be03e,0x1,0x2d0)},'default':{'timeout':0x3}},'scope':_0x20adc3(0xcd),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[_0x20adc3(0xcc)],'syntax':[_0x20adc3(0xb0),_0x20adc3(0xde),_0x20adc3(0xc4)]}),this[_0x20adc3(0xd5)]=async(_0x28803c,_0xedaebc)=>{const _0x1975f6=_0x20adc3;if(_0xedaebc[_0x1975f6(0xbd)]){const _0x3fa543=await Poll_1[_0x1975f6(0xe3)][_0x1975f6(0xd6)]({'_id':_0xedaebc[_0x1975f6(0xbd)],'guild':_0x28803c[_0x1975f6(0xcd)]['id']});if(!_0x3fa543)throw new Error('POLL_NOT_FOUND');if(!_0x28803c['guild'][_0x1975f6(0xc2)][_0x1975f6(0xdd)][_0x1975f6(0xc3)](_0x3fa543[_0x1975f6(0xba)]))throw new Error(_0x1975f6(0xe5));const _0x217cf4=_0x28803c[_0x1975f6(0xcd)][_0x1975f6(0xc2)][_0x1975f6(0xdd)][_0x1975f6(0xe0)](_0x3fa543['channel']),_0x4f520e=await _0x217cf4[_0x1975f6(0xb1)][_0x1975f6(0xec)](_0x3fa543[_0x1975f6(0xd7)])[_0x1975f6(0xa9)](()=>{});if(!_0x4f520e)throw new Error(_0x1975f6(0xe5));const _0xaf3fea=_0x4f520e['embeds'][0x0][_0x1975f6(0xc0)][_0x1975f6(0xa8)](_0x34f650=>_0x34f650[_0x1975f6(0xcb)]),_0x449336={};let _0x32cb2f=0x0;for(const _0xa7dcfa in this[_0x1975f6(0xad)][_0x1975f6(0xeb)](0x0,_0xaf3fea['length'])){if(_0x4f520e[_0x1975f6(0xad)][_0x1975f6(0xdd)][_0x1975f6(0xc3)](this['reactions'][_0xa7dcfa])){await _0x4f520e[_0x1975f6(0xad)][_0x1975f6(0xdd)][_0x1975f6(0xe0)](this['reactions'][_0xa7dcfa])[_0x1975f6(0xe7)][_0x1975f6(0xec)]()[_0x1975f6(0xa9)](()=>{});const _0x75ff17=_0x4f520e[_0x1975f6(0xad)][_0x1975f6(0xdd)]['get'](this[_0x1975f6(0xad)][_0xa7dcfa])['users'][_0x1975f6(0xdd)][_0x1975f6(0xd8)](_0x18c3dd=>!_0x18c3dd[_0x1975f6(0xc5)])[_0x1975f6(0xa3)];_0x449336[this[_0x1975f6(0xad)][_0xa7dcfa]]=_0x75ff17,_0x32cb2f+=_0x75ff17;}}return await _0x28803c[_0x1975f6(0xba)][_0x1975f6(0xe8)]({'embed':{'color':tesseract_1['Constants'][_0x1975f6(0xb4)][_0x1975f6(0xc8)],'author':{'name':_0x1975f6(0xa7)},'title':_0x4f520e[_0x1975f6(0xdb)][0x0]['title'],'fields':_0x4f520e['embeds'][0x0][_0x1975f6(0xc0)]['map'](_0x2e713f=>({'name':_0x2e713f[_0x1975f6(0xb9)]+'\x20'+_0x2e713f[_0x1975f6(0xcb)],'value':(_0x449336[_0x2e713f[_0x1975f6(0xb9)]]||0x0)+_0x1975f6(0xb8)+_0x32cb2f+'\x20votes\x20('+(_0x449336[_0x2e713f['name']]?_0x449336[_0x2e713f[_0x1975f6(0xb9)]]/_0x32cb2f*0x64:0x0)[_0x1975f6(0xaa)](0x2)+'%)'})),'footer':{'text':_0x4f520e['id']+_0x1975f6(0xdf)},'timestamp':_0x3fa543['ends']}});}if(!_0xedaebc['_'][_0x1975f6(0xaf)]||!_0xedaebc[_0x1975f6(0xa2)]||!(_0xedaebc[_0x1975f6(0xa2)]instanceof Array))throw new errors[(_0x1975f6(0xd3))](errors[_0x1975f6(0xbb)][_0x1975f6(0xca)],this[_0x1975f6(0xb9)]);const _0x2db3a4=_0xedaebc['_'][_0x1975f6(0xed)]('\x20'),_0x14aeb4=_0xedaebc[_0x1975f6(0xbf)]?_0xedaebc[_0x1975f6(0xbf)]:this[_0x1975f6(0xae)];if(constants['isPublicBastion'](this['client'][_0x1975f6(0xb2)])){const _0x29cf6b=await omnic[_0x1975f6(0x9f)](_0x28803c[_0x1975f6(0xcd)])[_0x1975f6(0xa9)](()=>{});if(_0x29cf6b){if(_0x29cf6b===omnic['PremiumTier']['GOLD']&&_0x14aeb4>constants['LIMITS'][_0x1975f6(0xe6)][_0x1975f6(0xf0)])throw new errors[(_0x1975f6(0xd3))](errors['BASTION_ERROR_TYPE'][_0x1975f6(0xf1)],this[_0x1975f6(0xa0)]['locale'][_0x1975f6(0xd0)](_0x28803c[_0x1975f6(0xcd)]['document'][_0x1975f6(0xc7)],'errors',_0x1975f6(0xa5),constants['LIMITS'][_0x1975f6(0xe6)]['POLL_TIMEOUT']));else{if(_0x29cf6b===omnic['PremiumTier']['PLATINUM']&&_0x14aeb4>constants[_0x1975f6(0xac)]['PLATINUM']['POLL_TIMEOUT'])throw new errors[(_0x1975f6(0xd3))](errors[_0x1975f6(0xbb)][_0x1975f6(0xf1)],this['client'][_0x1975f6(0xc6)][_0x1975f6(0xd0)](_0x28803c[_0x1975f6(0xcd)][_0x1975f6(0xee)][_0x1975f6(0xc7)],'errors','membershipLimitPollTimeout',constants[_0x1975f6(0xac)][_0x1975f6(0xab)][_0x1975f6(0xf0)]));}}else{if(_0x14aeb4>constants['LIMITS'][_0x1975f6(0xf0)])throw new errors['DiscordError'](errors[_0x1975f6(0xbb)][_0x1975f6(0xd2)],this[_0x1975f6(0xa0)][_0x1975f6(0xc6)][_0x1975f6(0xd0)](_0x28803c[_0x1975f6(0xcd)]['document']['language'],_0x1975f6(0xa4),_0x1975f6(0xdc),constants[_0x1975f6(0xac)][_0x1975f6(0xf0)]));}const _0x7cf801=await Poll_1['default'][_0x1975f6(0xea)]({'guild':_0x28803c[_0x1975f6(0xcd)]['id'],'ends':{'$gte':new Date()}});if(_0x29cf6b){if(_0x29cf6b===omnic['PremiumTier'][_0x1975f6(0xe6)]&&_0x7cf801>=constants[_0x1975f6(0xac)][_0x1975f6(0xe6)][_0x1975f6(0xd1)])throw new errors[(_0x1975f6(0xd3))](errors[_0x1975f6(0xbb)]['LIMITED_PREMIUM_MEMBERSHIP'],this[_0x1975f6(0xa0)][_0x1975f6(0xc6)][_0x1975f6(0xd0)](_0x28803c[_0x1975f6(0xcd)][_0x1975f6(0xee)][_0x1975f6(0xc7)],_0x1975f6(0xa4),_0x1975f6(0xe9),constants['LIMITS'][_0x1975f6(0xe6)][_0x1975f6(0xd1)]));else{if(_0x29cf6b===omnic[_0x1975f6(0xe1)][_0x1975f6(0xab)]&&_0x7cf801>=constants[_0x1975f6(0xac)][_0x1975f6(0xab)][_0x1975f6(0xd1)])throw new errors[(_0x1975f6(0xd3))](errors[_0x1975f6(0xbb)][_0x1975f6(0xf1)],this[_0x1975f6(0xa0)]['locale'][_0x1975f6(0xd0)](_0x28803c[_0x1975f6(0xcd)]['document']['language'],_0x1975f6(0xa4),_0x1975f6(0xe9),constants[_0x1975f6(0xac)][_0x1975f6(0xab)][_0x1975f6(0xd1)]));}}else{if(_0x7cf801>=constants['LIMITS'][_0x1975f6(0xd1)])throw new errors[(_0x1975f6(0xd3))](errors['BASTION_ERROR_TYPE'][_0x1975f6(0xd2)],this['client'][_0x1975f6(0xc6)][_0x1975f6(0xd0)](_0x28803c[_0x1975f6(0xcd)][_0x1975f6(0xee)]['language'],_0x1975f6(0xa4),_0x1975f6(0xd4),constants[_0x1975f6(0xac)][_0x1975f6(0xd1)]));}}const _0x18a9dc=new Date(Date[_0x1975f6(0xb3)]()+_0x14aeb4*0x36ee80),_0x390f14=await _0x28803c[_0x1975f6(0xba)]['send']({'embed':{'color':tesseract_1[_0x1975f6(0xe4)]['COLORS'][_0x1975f6(0xc8)],'author':{'name':'POLL'},'title':_0x2db3a4,'description':_0x1975f6(0xf4),'fields':_0xedaebc[_0x1975f6(0xa2)][_0x1975f6(0xa8)]((_0x4f9430,_0x231fa9)=>({'name':this['reactions'][_0x231fa9],'value':_0x4f9430})),'footer':{'text':_0x1975f6(0x9e)},'timestamp':_0x18a9dc}});await Poll_1[_0x1975f6(0xe3)][_0x1975f6(0xb7)]({'_id':_0x390f14['id'],'channel':_0x390f14[_0x1975f6(0xba)]['id'],'guild':_0x390f14['guild']['id'],'ends':_0x18a9dc});for(const _0x177a70 of this[_0x1975f6(0xad)][_0x1975f6(0xeb)](0x0,_0xedaebc[_0x1975f6(0xa2)][_0x1975f6(0xaf)])){await _0x390f14[_0x1975f6(0xa6)](_0x177a70)[_0x1975f6(0xa9)](()=>{});}},this[_0x20adc3(0xad)]=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'],this[_0x20adc3(0xae)]=0x3;}};
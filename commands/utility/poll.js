const a139_0x2534=['POLLS','document','poll\x20--option\x20OPTIONS...\x20--\x20QUESTION','default','Constants','reactions','client','PremiumTier','INVALID_COMMAND_SYNTAX','\x20â€¢\x20Ends','slice','errors','IRIS','apply','toFixed','language','React\x20to\x20this\x20message\x20with\x20the\x20corresponding\x20emoji\x20to\x20vote\x20for\x20that\x20option.','exec','number','send','COLORS','name','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','title','../../utils/omnic','membershipLimitPolls','../../models/Poll','join','value','Ends','exports','POLL_TIMEOUT','DiscordError','channels','embeds','fetchPremiumTier','fetch','PREMIUM_MEMBERSHIP_REQUIRED','bot','@bastion/tesseract','guild','findOne','LIMITS','LIMITED_PREMIUM_MEMBERSHIP','premiumPollTimeout','membershipLimitPollTimeout','poll\x20--timeout\x20HOURS\x20--option\x20OPTIONS...\x20--\x20QUESTION','PLATINUM','defaultTimeout','countDocuments','poll','fields','channel','get','option','_id','POLL\x20STATUS','status','clamp','map','length','create','cache','catch','getString','users','POLL','BASTION_ERROR_TYPE','locale','GOLD','ends','MANAGE_CHANNELS','premiumPolls','\x20votes\x20(','user','../../utils/errors','POLL_NOT_FOUND','test'];(function(_0x2317db,_0x2534ff){const _0x84eaff=function(_0x3446a0){while(--_0x3446a0){_0x2317db['push'](_0x2317db['shift']());}},_0xd7fbc6=function(){const _0x36e33f={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x1579c9,_0xa17865,_0x41b910,_0x35316b){_0x35316b=_0x35316b||{};let _0x3434b2=_0xa17865+'='+_0x41b910,_0x5a9c97=0x0;for(let _0x5f569d=0x0,_0x5c60f9=_0x1579c9['length'];_0x5f569d<_0x5c60f9;_0x5f569d++){const _0xff1d=_0x1579c9[_0x5f569d];_0x3434b2+=';\x20'+_0xff1d;const _0x4704d2=_0x1579c9[_0xff1d];_0x1579c9['push'](_0x4704d2),_0x5c60f9=_0x1579c9['length'],_0x4704d2!==!![]&&(_0x3434b2+='='+_0x4704d2);}_0x35316b['cookie']=_0x3434b2;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1bd5cd,_0x300b06){_0x1bd5cd=_0x1bd5cd||function(_0x57255a){return _0x57255a;};const _0x5d6635=_0x1bd5cd(new RegExp('(?:^|;\x20)'+_0x300b06['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x2ac0d4=function(_0x7f3efe,_0x258a61){_0x7f3efe(++_0x258a61);};return _0x2ac0d4(_0x84eaff,_0x2534ff),_0x5d6635?decodeURIComponent(_0x5d6635[0x1]):undefined;}},_0x4e6b9f=function(){const _0x4b7734=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4b7734['test'](_0x36e33f['removeCookie']['toString']());};_0x36e33f['updateCookie']=_0x4e6b9f;let _0x4826c9='';const _0x509a74=_0x36e33f['updateCookie']();if(!_0x509a74)_0x36e33f['setCookie'](['*'],'counter',0x1);else _0x509a74?_0x4826c9=_0x36e33f['getCookie'](null,'counter'):_0x36e33f['removeCookie']();};_0xd7fbc6();}(a139_0x2534,0x6d));const a139_0x84ea=function(_0x2317db,_0x2534ff){_0x2317db=_0x2317db-0x0;let _0x84eaff=a139_0x2534[_0x2317db];return _0x84eaff;};const a139_0x41b910=function(){let _0x1971fb=!![];return function(_0x183b57,_0x4e7c17){const _0x2a0a60=_0x1971fb?function(){if(_0x4e7c17){const _0x11658c=_0x4e7c17[a139_0x84ea('0x3c')](_0x183b57,arguments);return _0x4e7c17=null,_0x11658c;}}:function(){};return _0x1971fb=![],_0x2a0a60;};}(),a139_0xa17865=a139_0x41b910(this,function(){const _0x259cec=function(){const _0x48c677=_0x259cec['constructor']('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()['constructor'](a139_0x84ea('0x45'));return!_0x48c677[a139_0x84ea('0x2e')](a139_0xa17865);};return _0x259cec();});a139_0xa17865();'use strict';const tesseract_1=require(a139_0x84ea('0x8')),Poll_1=require(a139_0x84ea('0x49')),constants=require('../../utils/constants'),errors=require(a139_0x84ea('0x2c')),numbers=require('../../utils/numbers'),omnic=require(a139_0x84ea('0x47'));module[a139_0x84ea('0x4d')]=class PollCommand extends tesseract_1['Command']{constructor(){super(a139_0x84ea('0x13'),{'description':'It\x20allows\x20you\x20to\x20run\x20polls\x20in\x20the\x20server\x20for\x20at\x20least\x20an\x20hour\x20and\x20at\x20most\x20a\x20month.\x20You\x20can\x20set\x20at\x20most\x2013\x20options\x20for\x20the\x20poll.\x20It\x20also\x20allows\x20you\x20to\x20see\x20the\x20status\x20of\x20a\x20running\x20poll.','triggers':[],'arguments':{'alias':{'timeout':['t'],'option':['o'],'status':['s']},'number':['timeout'],'string':['option','status'],'coerce':{'timeout':_0xd85635=>typeof _0xd85635===a139_0x84ea('0x41')&&numbers[a139_0x84ea('0x1b')](_0xd85635,0x1,0x2d0)},'default':{'timeout':0x3}},'scope':a139_0x84ea('0x9'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[a139_0x84ea('0x28')],'syntax':['poll\x20--status\x20POLL_MESSAGE_ID',a139_0x84ea('0x31'),a139_0x84ea('0xf')]}),this[a139_0x84ea('0x40')]=async(_0x599595,_0x8488a7)=>{if(_0x8488a7[a139_0x84ea('0x1a')]){const _0x33eed4=await Poll_1['default'][a139_0x84ea('0xa')]({'_id':_0x8488a7[a139_0x84ea('0x1a')],'guild':_0x599595[a139_0x84ea('0x9')]['id']});if(!_0x33eed4)throw new Error(a139_0x84ea('0x2d'));if(!_0x599595['guild']['channels']['cache']['has'](_0x33eed4['channel']))throw new Error(a139_0x84ea('0x2d'));const _0x2eb2d4=_0x599595[a139_0x84ea('0x9')][a139_0x84ea('0x2')][a139_0x84ea('0x1f')][a139_0x84ea('0x16')](_0x33eed4[a139_0x84ea('0x15')]),_0x1355dc=await _0x2eb2d4['messages'][a139_0x84ea('0x5')](_0x33eed4[a139_0x84ea('0x18')])[a139_0x84ea('0x20')](()=>{});if(!_0x1355dc)throw new Error('POLL_NOT_FOUND');const _0xb49b38=_0x1355dc['embeds'][0x0][a139_0x84ea('0x14')][a139_0x84ea('0x1c')](_0x21279e=>_0x21279e[a139_0x84ea('0x4b')]),_0x3b3662={};let _0x53e521=0x0;for(const _0x2ca627 in this[a139_0x84ea('0x34')][a139_0x84ea('0x39')](0x0,_0xb49b38[a139_0x84ea('0x1d')])){if(_0x1355dc['reactions']['cache']['has'](this[a139_0x84ea('0x34')][_0x2ca627])){await _0x1355dc['reactions'][a139_0x84ea('0x1f')]['get'](this['reactions'][_0x2ca627])[a139_0x84ea('0x22')]['fetch']()[a139_0x84ea('0x20')](()=>{});const _0x3b494e=_0x1355dc[a139_0x84ea('0x34')]['cache'][a139_0x84ea('0x16')](this['reactions'][_0x2ca627])[a139_0x84ea('0x22')][a139_0x84ea('0x1f')]['filter'](_0x454ff5=>!_0x454ff5[a139_0x84ea('0x7')])['size'];_0x3b3662[this[a139_0x84ea('0x34')][_0x2ca627]]=_0x3b494e,_0x53e521+=_0x3b494e;}}return await _0x599595[a139_0x84ea('0x15')][a139_0x84ea('0x42')]({'embed':{'color':tesseract_1[a139_0x84ea('0x33')][a139_0x84ea('0x43')][a139_0x84ea('0x3b')],'author':{'name':a139_0x84ea('0x19')},'title':_0x1355dc['embeds'][0x0][a139_0x84ea('0x46')],'fields':_0x1355dc[a139_0x84ea('0x3')][0x0][a139_0x84ea('0x14')][a139_0x84ea('0x1c')](_0x3c0327=>({'name':_0x3c0327['name']+'\x20'+_0x3c0327[a139_0x84ea('0x4b')],'value':(_0x3b3662[_0x3c0327[a139_0x84ea('0x44')]]||0x0)+'\x20/\x20'+_0x53e521+a139_0x84ea('0x2a')+(_0x3b3662[_0x3c0327[a139_0x84ea('0x44')]]?_0x3b3662[_0x3c0327[a139_0x84ea('0x44')]]/_0x53e521*0x64:0x0)[a139_0x84ea('0x3d')](0x2)+'%)'})),'footer':{'text':_0x1355dc['id']+a139_0x84ea('0x38')},'timestamp':_0x33eed4[a139_0x84ea('0x27')]}});}if(!_0x8488a7['_']['length']||!_0x8488a7[a139_0x84ea('0x17')]||!(_0x8488a7[a139_0x84ea('0x17')]instanceof Array))throw new errors[(a139_0x84ea('0x1'))](errors[a139_0x84ea('0x24')][a139_0x84ea('0x37')],this[a139_0x84ea('0x44')]);const _0x1a4624=_0x8488a7['_'][a139_0x84ea('0x4a')]('\x20'),_0x201ff0=_0x8488a7['timeout']?_0x8488a7['timeout']:this['defaultTimeout'];if(constants['isPublicBastion'](this[a139_0x84ea('0x35')][a139_0x84ea('0x2b')])){const _0x3ba334=await omnic[a139_0x84ea('0x4')](_0x599595['guild'])['catch'](()=>{});if(_0x3ba334){if(_0x3ba334===omnic['PremiumTier'][a139_0x84ea('0x26')]&&_0x201ff0>constants[a139_0x84ea('0xb')][a139_0x84ea('0x26')][a139_0x84ea('0x0')])throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][a139_0x84ea('0xc')],this[a139_0x84ea('0x35')]['locale']['getString'](_0x599595['guild'][a139_0x84ea('0x30')][a139_0x84ea('0x3e')],a139_0x84ea('0x3a'),'membershipLimitPollTimeout',constants[a139_0x84ea('0xb')][a139_0x84ea('0x26')]['POLL_TIMEOUT']));else{if(_0x3ba334===omnic[a139_0x84ea('0x36')]['PLATINUM']&&_0x201ff0>constants[a139_0x84ea('0xb')][a139_0x84ea('0x10')]['POLL_TIMEOUT'])throw new errors['DiscordError'](errors[a139_0x84ea('0x24')][a139_0x84ea('0xc')],this[a139_0x84ea('0x35')][a139_0x84ea('0x25')][a139_0x84ea('0x21')](_0x599595['guild']['document'][a139_0x84ea('0x3e')],a139_0x84ea('0x3a'),a139_0x84ea('0xe'),constants[a139_0x84ea('0xb')][a139_0x84ea('0x10')]['POLL_TIMEOUT']));}}else{if(_0x201ff0>constants[a139_0x84ea('0xb')][a139_0x84ea('0x0')])throw new errors['DiscordError'](errors[a139_0x84ea('0x24')][a139_0x84ea('0x6')],this[a139_0x84ea('0x35')]['locale'][a139_0x84ea('0x21')](_0x599595[a139_0x84ea('0x9')][a139_0x84ea('0x30')]['language'],a139_0x84ea('0x3a'),a139_0x84ea('0xd'),constants[a139_0x84ea('0xb')][a139_0x84ea('0x0')]));}const _0x9d0585=await Poll_1[a139_0x84ea('0x32')][a139_0x84ea('0x12')]({'guild':_0x599595[a139_0x84ea('0x9')]['id'],'ends':{'$gte':new Date()}});if(_0x3ba334){if(_0x3ba334===omnic['PremiumTier'][a139_0x84ea('0x26')]&&_0x9d0585>=constants[a139_0x84ea('0xb')]['GOLD'][a139_0x84ea('0x2f')])throw new errors[(a139_0x84ea('0x1'))](errors[a139_0x84ea('0x24')][a139_0x84ea('0xc')],this['client'][a139_0x84ea('0x25')][a139_0x84ea('0x21')](_0x599595[a139_0x84ea('0x9')][a139_0x84ea('0x30')][a139_0x84ea('0x3e')],a139_0x84ea('0x3a'),a139_0x84ea('0x48'),constants[a139_0x84ea('0xb')]['GOLD'][a139_0x84ea('0x2f')]));else{if(_0x3ba334===omnic[a139_0x84ea('0x36')][a139_0x84ea('0x10')]&&_0x9d0585>=constants[a139_0x84ea('0xb')][a139_0x84ea('0x10')]['POLLS'])throw new errors[(a139_0x84ea('0x1'))](errors[a139_0x84ea('0x24')][a139_0x84ea('0xc')],this['client'][a139_0x84ea('0x25')][a139_0x84ea('0x21')](_0x599595[a139_0x84ea('0x9')][a139_0x84ea('0x30')][a139_0x84ea('0x3e')],a139_0x84ea('0x3a'),a139_0x84ea('0x48'),constants['LIMITS'][a139_0x84ea('0x10')][a139_0x84ea('0x2f')]));}}else{if(_0x9d0585>=constants[a139_0x84ea('0xb')][a139_0x84ea('0x2f')])throw new errors[(a139_0x84ea('0x1'))](errors[a139_0x84ea('0x24')][a139_0x84ea('0x6')],this[a139_0x84ea('0x35')][a139_0x84ea('0x25')]['getString'](_0x599595['guild'][a139_0x84ea('0x30')][a139_0x84ea('0x3e')],a139_0x84ea('0x3a'),a139_0x84ea('0x29'),constants['LIMITS'][a139_0x84ea('0x2f')]));}}const _0x1d1ac6=new Date(Date['now']()+_0x201ff0*0x36ee80),_0x2c99da=await _0x599595[a139_0x84ea('0x15')][a139_0x84ea('0x42')]({'embed':{'color':tesseract_1[a139_0x84ea('0x33')]['COLORS'][a139_0x84ea('0x3b')],'author':{'name':a139_0x84ea('0x23')},'title':_0x1a4624,'description':a139_0x84ea('0x3f'),'fields':_0x8488a7[a139_0x84ea('0x17')][a139_0x84ea('0x1c')]((_0x400535,_0x48cfb1)=>({'name':this[a139_0x84ea('0x34')][_0x48cfb1],'value':_0x400535})),'footer':{'text':a139_0x84ea('0x4c')},'timestamp':_0x1d1ac6}});await Poll_1[a139_0x84ea('0x32')][a139_0x84ea('0x1e')]({'_id':_0x2c99da['id'],'channel':_0x2c99da[a139_0x84ea('0x15')]['id'],'guild':_0x2c99da[a139_0x84ea('0x9')]['id'],'ends':_0x1d1ac6});for(const _0x34cd62 of this[a139_0x84ea('0x34')][a139_0x84ea('0x39')](0x0,_0x8488a7[a139_0x84ea('0x17')]['length'])){await _0x2c99da['react'](_0x34cd62)[a139_0x84ea('0x20')](()=>{});}},this[a139_0x84ea('0x34')]=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'],this[a139_0x84ea('0x11')]=0x3;}};
const a152_0x3aba=['Constants','POLL_TIMEOUT','\x20/\x20','LIMITED_PREMIUM_MEMBERSHIP','fetchPremiumTier','bot','PLATINUM','getString','client','slice','../../utils/numbers','timeout','@bastion/tesseract','fields','IRIS','value','BASTION_ERROR_TYPE','INVALID_COMMAND_SYNTAX','cache','send','document','return\x20/\x22\x20+\x20this\x20+\x20\x22/','exec','guild','has','Command','fetch','apply','React\x20to\x20this\x20message\x20with\x20the\x20corresponding\x20emoji\x20to\x20vote\x20for\x20that\x20option.','countDocuments','title','DiscordError','../../models/Poll','language','poll','COLORS','create','channel','LIMITS','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','channels','react','option','reactions','POLL_NOT_FOUND','exports','\x20votes\x20(','findOne','locale','errors','membershipLimitPolls','POLL\x20STATUS','get','../../utils/omnic','length','membershipLimitPollTimeout','join','poll\x20--timeout\x20HOURS\x20--option\x20OPTIONS...\x20--\x20QUESTION','status','constructor','default','It\x20allows\x20you\x20to\x20run\x20polls\x20in\x20the\x20server\x20for\x20at\x20least\x20an\x20hour\x20and\x20at\x20most\x20a\x20month.\x20You\x20can\x20set\x20at\x20most\x2013\x20options\x20for\x20the\x20poll.\x20It\x20also\x20allows\x20you\x20to\x20see\x20the\x20status\x20of\x20a\x20running\x20poll.','map','user','users','embeds','defaultTimeout','PremiumTier','../../utils/constants','../../utils/errors','ends','isPublicBastion','PREMIUM_MEMBERSHIP_REQUIRED','POLLS','name','GOLD','_id','number','catch','poll\x20--status\x20POLL_MESSAGE_ID','now','premiumPolls'];(function(_0x532cce,_0x3aba78){const _0x5cab9c=function(_0xe4cca1){while(--_0xe4cca1){_0x532cce['push'](_0x532cce['shift']());}},_0x484232=function(){const _0x7a2d5c={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4264a8,_0x45d1b8,_0x576f5a,_0x42c3e4){_0x42c3e4=_0x42c3e4||{};let _0x548059=_0x45d1b8+'='+_0x576f5a,_0x350e76=0x0;for(let _0xa5e2e8=0x0,_0x5dc201=_0x4264a8['length'];_0xa5e2e8<_0x5dc201;_0xa5e2e8++){const _0x45f4c8=_0x4264a8[_0xa5e2e8];_0x548059+=';\x20'+_0x45f4c8;const _0x18b0f9=_0x4264a8[_0x45f4c8];_0x4264a8['push'](_0x18b0f9),_0x5dc201=_0x4264a8['length'],_0x18b0f9!==!![]&&(_0x548059+='='+_0x18b0f9);}_0x42c3e4['cookie']=_0x548059;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1b3430,_0x5a11e6){_0x1b3430=_0x1b3430||function(_0x2cfd3e){return _0x2cfd3e;};const _0x1e2847=_0x1b3430(new RegExp('(?:^|;\x20)'+_0x5a11e6['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x2e7680=function(_0x1d6dbe,_0x16f356){_0x1d6dbe(++_0x16f356);};return _0x2e7680(_0x5cab9c,_0x3aba78),_0x1e2847?decodeURIComponent(_0x1e2847[0x1]):undefined;}},_0x151e79=function(){const _0x2c7d49=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x2c7d49['test'](_0x7a2d5c['removeCookie']['toString']());};_0x7a2d5c['updateCookie']=_0x151e79;let _0x53d080='';const _0x5ab1dd=_0x7a2d5c['updateCookie']();if(!_0x5ab1dd)_0x7a2d5c['setCookie'](['*'],'counter',0x1);else _0x5ab1dd?_0x53d080=_0x7a2d5c['getCookie'](null,'counter'):_0x7a2d5c['removeCookie']();};_0x484232();}(a152_0x3aba,0xe3));const a152_0x5cab=function(_0x532cce,_0x3aba78){_0x532cce=_0x532cce-0x0;let _0x5cab9c=a152_0x3aba[_0x532cce];return _0x5cab9c;};const _0x3b6c9a=a152_0x5cab,a152_0x7a2d5c=function(){let _0x53d080=!![];return function(_0x5ab1dd,_0x4264a8){const _0x45d1b8=_0x53d080?function(){const _0x213e98=a152_0x5cab;if(_0x4264a8){const _0x576f5a=_0x4264a8[_0x213e98('0x2e')](_0x5ab1dd,arguments);return _0x4264a8=null,_0x576f5a;}}:function(){};return _0x53d080=![],_0x45d1b8;};}(),a152_0xe4cca1=a152_0x7a2d5c(this,function(){const _0x42c3e4=function(){const _0x2ea81b=a152_0x5cab,_0x548059=_0x42c3e4[_0x2ea81b('0x4e')](_0x2ea81b('0x28'))()[_0x2ea81b('0x4e')](_0x2ea81b('0x3a'));return!_0x548059['test'](a152_0xe4cca1);};return _0x42c3e4();});a152_0xe4cca1();'use strict';const tesseract_1=require(_0x3b6c9a('0x1f')),Poll_1=require(_0x3b6c9a('0x33')),constants=require(_0x3b6c9a('0x5')),errors=require(_0x3b6c9a('0x6')),numbers=require(_0x3b6c9a('0x1d')),omnic=require(_0x3b6c9a('0x48'));module[_0x3b6c9a('0x40')]=class PollCommand extends tesseract_1[_0x3b6c9a('0x2c')]{constructor(){const _0x28e3e1=_0x3b6c9a;super(_0x28e3e1('0x35'),{'description':_0x28e3e1('0x50'),'triggers':[],'arguments':{'alias':{'timeout':['t'],'option':['o'],'status':['s']},'number':['timeout'],'string':[_0x28e3e1('0x3d'),_0x28e3e1('0x4d')],'coerce':{'timeout':_0x350e76=>typeof _0x350e76===_0x28e3e1('0xe')&&numbers['clamp'](_0x350e76,0x1,0x2d0)},'default':{'timeout':0x3}},'scope':_0x28e3e1('0x2a'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':['MANAGE_CHANNELS'],'syntax':[_0x28e3e1('0x10'),'poll\x20--option\x20OPTIONS...\x20--\x20QUESTION',_0x28e3e1('0x4c')]}),this[_0x28e3e1('0x29')]=async(_0xa5e2e8,_0x5dc201)=>{const _0x4e53d8=_0x28e3e1;if(_0x5dc201['status']){const _0x1e2847=await Poll_1[_0x4e53d8('0x4f')][_0x4e53d8('0x42')]({'_id':_0x5dc201[_0x4e53d8('0x4d')],'guild':_0xa5e2e8['guild']['id']});if(!_0x1e2847)throw new Error(_0x4e53d8('0x3f'));if(!_0xa5e2e8[_0x4e53d8('0x2a')][_0x4e53d8('0x3b')]['cache'][_0x4e53d8('0x2b')](_0x1e2847[_0x4e53d8('0x38')]))throw new Error(_0x4e53d8('0x3f'));const _0x2e7680=_0xa5e2e8[_0x4e53d8('0x2a')][_0x4e53d8('0x3b')]['cache'][_0x4e53d8('0x47')](_0x1e2847[_0x4e53d8('0x38')]),_0x2cfd3e=await _0x2e7680['messages']['fetch'](_0x1e2847[_0x4e53d8('0xd')])[_0x4e53d8('0xf')](()=>{});if(!_0x2cfd3e)throw new Error(_0x4e53d8('0x3f'));const _0x1d6dbe=_0x2cfd3e[_0x4e53d8('0x2')][0x0]['fields'][_0x4e53d8('0x51')](_0x5652f4=>_0x5652f4[_0x4e53d8('0x22')]),_0x16f356={};let _0x2c7d49=0x0;for(const _0x18a2ac in this[_0x4e53d8('0x3e')][_0x4e53d8('0x1c')](0x0,_0x1d6dbe[_0x4e53d8('0x49')])){if(_0x2cfd3e['reactions'][_0x4e53d8('0x25')][_0x4e53d8('0x2b')](this[_0x4e53d8('0x3e')][_0x18a2ac])){await _0x2cfd3e[_0x4e53d8('0x3e')]['cache']['get'](this[_0x4e53d8('0x3e')][_0x18a2ac])['users'][_0x4e53d8('0x2d')]()['catch'](()=>{});const _0x17c96c=_0x2cfd3e[_0x4e53d8('0x3e')]['cache'][_0x4e53d8('0x47')](this[_0x4e53d8('0x3e')][_0x18a2ac])[_0x4e53d8('0x1')][_0x4e53d8('0x25')]['filter'](_0x1fd4a2=>!_0x1fd4a2[_0x4e53d8('0x18')])['size'];_0x16f356[this[_0x4e53d8('0x3e')][_0x18a2ac]]=_0x17c96c,_0x2c7d49+=_0x17c96c;}}return await _0xa5e2e8['channel'][_0x4e53d8('0x26')]({'embed':{'color':tesseract_1[_0x4e53d8('0x13')][_0x4e53d8('0x36')][_0x4e53d8('0x21')],'author':{'name':_0x4e53d8('0x46')},'title':_0x2cfd3e['embeds'][0x0][_0x4e53d8('0x31')],'fields':_0x2cfd3e[_0x4e53d8('0x2')][0x0][_0x4e53d8('0x20')]['map'](_0x142d5b=>({'name':_0x142d5b['name']+'\x20'+_0x142d5b['value'],'value':(_0x16f356[_0x142d5b['name']]||0x0)+_0x4e53d8('0x15')+_0x2c7d49+_0x4e53d8('0x41')+(_0x16f356[_0x142d5b[_0x4e53d8('0xb')]]?_0x16f356[_0x142d5b[_0x4e53d8('0xb')]]/_0x2c7d49*0x64:0x0)['toFixed'](0x2)+'%)'})),'footer':{'text':_0x2cfd3e['id']+'\x20â€¢\x20Ends'},'timestamp':_0x1e2847[_0x4e53d8('0x7')]}});}if(!_0x5dc201['_'][_0x4e53d8('0x49')]||!_0x5dc201[_0x4e53d8('0x3d')]||!(_0x5dc201[_0x4e53d8('0x3d')]instanceof Array))throw new errors[(_0x4e53d8('0x32'))](errors['BASTION_ERROR_TYPE'][_0x4e53d8('0x24')],this[_0x4e53d8('0xb')]);const _0x45f4c8=_0x5dc201['_'][_0x4e53d8('0x4b')]('\x20'),_0x18b0f9=_0x5dc201[_0x4e53d8('0x1e')]?_0x5dc201[_0x4e53d8('0x1e')]:this[_0x4e53d8('0x3')];if(constants[_0x4e53d8('0x8')](this[_0x4e53d8('0x1b')][_0x4e53d8('0x0')])){const _0x4bad5c=await omnic[_0x4e53d8('0x17')](_0xa5e2e8[_0x4e53d8('0x2a')])[_0x4e53d8('0xf')](()=>{});if(_0x4bad5c){if(_0x4bad5c===omnic['PremiumTier'][_0x4e53d8('0xc')]&&_0x18b0f9>constants['LIMITS'][_0x4e53d8('0xc')][_0x4e53d8('0x14')])throw new errors[(_0x4e53d8('0x32'))](errors[_0x4e53d8('0x23')][_0x4e53d8('0x16')],this['client']['locale'][_0x4e53d8('0x1a')](_0xa5e2e8[_0x4e53d8('0x2a')][_0x4e53d8('0x27')]['language'],'errors',_0x4e53d8('0x4a'),constants[_0x4e53d8('0x39')][_0x4e53d8('0xc')][_0x4e53d8('0x14')]));else{if(_0x4bad5c===omnic[_0x4e53d8('0x4')][_0x4e53d8('0x19')]&&_0x18b0f9>constants[_0x4e53d8('0x39')][_0x4e53d8('0x19')][_0x4e53d8('0x14')])throw new errors[(_0x4e53d8('0x32'))](errors[_0x4e53d8('0x23')]['LIMITED_PREMIUM_MEMBERSHIP'],this[_0x4e53d8('0x1b')][_0x4e53d8('0x43')][_0x4e53d8('0x1a')](_0xa5e2e8['guild'][_0x4e53d8('0x27')][_0x4e53d8('0x34')],'errors',_0x4e53d8('0x4a'),constants[_0x4e53d8('0x39')][_0x4e53d8('0x19')]['POLL_TIMEOUT']));}}else{if(_0x18b0f9>constants[_0x4e53d8('0x39')][_0x4e53d8('0x14')])throw new errors[(_0x4e53d8('0x32'))](errors[_0x4e53d8('0x23')][_0x4e53d8('0x9')],this[_0x4e53d8('0x1b')][_0x4e53d8('0x43')][_0x4e53d8('0x1a')](_0xa5e2e8['guild']['document'][_0x4e53d8('0x34')],'errors','premiumPollTimeout',constants[_0x4e53d8('0x39')]['POLL_TIMEOUT']));}const _0x1bc4d6=await Poll_1[_0x4e53d8('0x4f')][_0x4e53d8('0x30')]({'guild':_0xa5e2e8[_0x4e53d8('0x2a')]['id'],'ends':{'$gte':new Date()}});if(_0x4bad5c){if(_0x4bad5c===omnic[_0x4e53d8('0x4')][_0x4e53d8('0xc')]&&_0x1bc4d6>=constants[_0x4e53d8('0x39')][_0x4e53d8('0xc')][_0x4e53d8('0xa')])throw new errors[(_0x4e53d8('0x32'))](errors['BASTION_ERROR_TYPE'][_0x4e53d8('0x16')],this[_0x4e53d8('0x1b')]['locale'][_0x4e53d8('0x1a')](_0xa5e2e8['guild']['document'][_0x4e53d8('0x34')],_0x4e53d8('0x44'),'membershipLimitPolls',constants[_0x4e53d8('0x39')]['GOLD'][_0x4e53d8('0xa')]));else{if(_0x4bad5c===omnic[_0x4e53d8('0x4')][_0x4e53d8('0x19')]&&_0x1bc4d6>=constants[_0x4e53d8('0x39')][_0x4e53d8('0x19')][_0x4e53d8('0xa')])throw new errors[(_0x4e53d8('0x32'))](errors[_0x4e53d8('0x23')][_0x4e53d8('0x16')],this[_0x4e53d8('0x1b')][_0x4e53d8('0x43')][_0x4e53d8('0x1a')](_0xa5e2e8['guild'][_0x4e53d8('0x27')][_0x4e53d8('0x34')],_0x4e53d8('0x44'),_0x4e53d8('0x45'),constants[_0x4e53d8('0x39')]['PLATINUM'][_0x4e53d8('0xa')]));}}else{if(_0x1bc4d6>=constants[_0x4e53d8('0x39')][_0x4e53d8('0xa')])throw new errors['DiscordError'](errors[_0x4e53d8('0x23')]['PREMIUM_MEMBERSHIP_REQUIRED'],this[_0x4e53d8('0x1b')][_0x4e53d8('0x43')][_0x4e53d8('0x1a')](_0xa5e2e8[_0x4e53d8('0x2a')][_0x4e53d8('0x27')]['language'],_0x4e53d8('0x44'),_0x4e53d8('0x12'),constants['LIMITS'][_0x4e53d8('0xa')]));}}const _0x1b3430=new Date(Date[_0x4e53d8('0x11')]()+_0x18b0f9*0x36ee80),_0x5a11e6=await _0xa5e2e8[_0x4e53d8('0x38')][_0x4e53d8('0x26')]({'embed':{'color':tesseract_1[_0x4e53d8('0x13')]['COLORS']['IRIS'],'author':{'name':'POLL'},'title':_0x45f4c8,'description':_0x4e53d8('0x2f'),'fields':_0x5dc201[_0x4e53d8('0x3d')][_0x4e53d8('0x51')]((_0x57b5c9,_0x2a768f)=>({'name':this[_0x4e53d8('0x3e')][_0x2a768f],'value':_0x57b5c9})),'footer':{'text':'Ends'},'timestamp':_0x1b3430}});await Poll_1[_0x4e53d8('0x4f')][_0x4e53d8('0x37')]({'_id':_0x5a11e6['id'],'channel':_0x5a11e6[_0x4e53d8('0x38')]['id'],'guild':_0x5a11e6[_0x4e53d8('0x2a')]['id'],'ends':_0x1b3430});for(const _0x49eadd of this[_0x4e53d8('0x3e')][_0x4e53d8('0x1c')](0x0,_0x5dc201[_0x4e53d8('0x3d')][_0x4e53d8('0x49')])){await _0x5a11e6[_0x4e53d8('0x3c')](_0x49eadd)['catch'](()=>{});}},this['reactions']=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'],this[_0x28e3e1('0x3')]=0x3;}};
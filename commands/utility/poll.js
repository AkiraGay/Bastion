const a138_0x58c7=['PremiumTier','@bastion/tesseract','POLL_NOT_FOUND','\x20/\x20','bot','PREMIUM_MEMBERSHIP_REQUIRED','messages','premiumPollTimeout','POLL\x20STATUS','constructor','map','../../utils/errors','catch','../../utils/constants','\x20votes\x20(','join','slice','poll\x20--option\x20OPTIONS...\x20--\x20QUESTION','POLL','MANAGE_CHANNELS','test','membershipLimitPollTimeout','INVALID_COMMAND_SYNTAX','POLL_TIMEOUT','membershipLimitPolls','user','has','Command','../../utils/omnic','default','LIMITS','users','countDocuments','toFixed','reactions','POLLS','channel','fields','It\x20allows\x20you\x20to\x20run\x20polls\x20in\x20the\x20server\x20for\x20at\x20least\x20an\x20hour\x20and\x20at\x20most\x20a\x20month.\x20You\x20can\x20set\x20at\x20most\x2013\x20options\x20for\x20the\x20poll.\x20It\x20also\x20allows\x20you\x20to\x20see\x20the\x20status\x20of\x20a\x20running\x20poll.','defaultTimeout','number','isPublicBastion','poll','filter','send','document','create','apply','status','value','LIMITED_PREMIUM_MEMBERSHIP','Constants','COLORS','option','Ends','cache','poll\x20--timeout\x20HOURS\x20--option\x20OPTIONS...\x20--\x20QUESTION','../../models/Poll','BASTION_ERROR_TYPE','title','GOLD','timeout','now','fetch','../../utils/numbers','_id','PLATINUM','IRIS','fetchPremiumTier','locale','size','getString','embeds','language','channels','return\x20/\x22\x20+\x20this\x20+\x20\x22/','guild','DiscordError','client','get','premiumPolls','findOne','clamp','ends','errors','name','length'];(function(_0x34c234,_0x58c742){const _0x3b5f2f=function(_0x4214eb){while(--_0x4214eb){_0x34c234['push'](_0x34c234['shift']());}},_0x501939=function(){const _0x20a81a={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3fea88,_0x3117af,_0x1ea8ed,_0x51bce7){_0x51bce7=_0x51bce7||{};let _0xf1d6e4=_0x3117af+'='+_0x1ea8ed,_0x275c37=0x0;for(let _0x91c764=0x0,_0x1eec4b=_0x3fea88['length'];_0x91c764<_0x1eec4b;_0x91c764++){const _0x51558a=_0x3fea88[_0x91c764];_0xf1d6e4+=';\x20'+_0x51558a;const _0x367685=_0x3fea88[_0x51558a];_0x3fea88['push'](_0x367685),_0x1eec4b=_0x3fea88['length'],_0x367685!==!![]&&(_0xf1d6e4+='='+_0x367685);}_0x51bce7['cookie']=_0xf1d6e4;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3550a4,_0x47435b){_0x3550a4=_0x3550a4||function(_0x1b35e2){return _0x1b35e2;};const _0x4557d3=_0x3550a4(new RegExp('(?:^|;\x20)'+_0x47435b['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x400e28=function(_0xcfde6b,_0x4b7d60){_0xcfde6b(++_0x4b7d60);};return _0x400e28(_0x3b5f2f,_0x58c742),_0x4557d3?decodeURIComponent(_0x4557d3[0x1]):undefined;}},_0x598e6b=function(){const _0xf3fef0=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0xf3fef0['test'](_0x20a81a['removeCookie']['toString']());};_0x20a81a['updateCookie']=_0x598e6b;let _0x3842d3='';const _0x14c798=_0x20a81a['updateCookie']();if(!_0x14c798)_0x20a81a['setCookie'](['*'],'counter',0x1);else _0x14c798?_0x3842d3=_0x20a81a['getCookie'](null,'counter'):_0x20a81a['removeCookie']();};_0x501939();}(a138_0x58c7,0x141));const a138_0x3b5f=function(_0x34c234,_0x58c742){_0x34c234=_0x34c234-0x0;let _0x3b5f2f=a138_0x58c7[_0x34c234];return _0x3b5f2f;};const a138_0x1ea8ed=function(){let _0x382f37=!![];return function(_0x2a629f,_0x4b8070){const _0x1de820=_0x382f37?function(){if(_0x4b8070){const _0x11b106=_0x4b8070[a138_0x3b5f('0x4a')](_0x2a629f,arguments);return _0x4b8070=null,_0x11b106;}}:function(){};return _0x382f37=![],_0x1de820;};}(),a138_0x3117af=a138_0x1ea8ed(this,function(){const _0x13e6f4=function(){const _0x51d042=_0x13e6f4[a138_0x3b5f('0x24')](a138_0x3b5f('0xf'))()[a138_0x3b5f('0x24')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x51d042[a138_0x3b5f('0x2f')](a138_0x3117af);};return _0x13e6f4();});a138_0x3117af();'use strict';const tesseract_1=require(a138_0x3b5f('0x1c')),Poll_1=require(a138_0x3b5f('0x54')),constants=require(a138_0x3b5f('0x28')),errors=require(a138_0x3b5f('0x26')),numbers=require(a138_0x3b5f('0x4')),omnic=require(a138_0x3b5f('0x37'));module['exports']=class PollCommand extends tesseract_1[a138_0x3b5f('0x36')]{constructor(){super(a138_0x3b5f('0x45'),{'description':a138_0x3b5f('0x41'),'triggers':[],'arguments':{'alias':{'timeout':['t'],'option':['o'],'status':['s']},'number':[a138_0x3b5f('0x1')],'string':[a138_0x3b5f('0x50'),'status'],'coerce':{'timeout':_0x3386b5=>typeof _0x3386b5===a138_0x3b5f('0x43')&&numbers[a138_0x3b5f('0x16')](_0x3386b5,0x1,0x2d0)},'default':{'timeout':0x3}},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[a138_0x3b5f('0x2e')],'syntax':['poll\x20--status\x20POLL_MESSAGE_ID',a138_0x3b5f('0x2c'),a138_0x3b5f('0x53')]}),this['exec']=async(_0x198f2a,_0x56dd3f)=>{if(_0x56dd3f[a138_0x3b5f('0x4b')]){const _0x50e6d4=await Poll_1[a138_0x3b5f('0x38')][a138_0x3b5f('0x15')]({'_id':_0x56dd3f['status'],'guild':_0x198f2a[a138_0x3b5f('0x10')]['id']});if(!_0x50e6d4)throw new Error(a138_0x3b5f('0x1d'));if(!_0x198f2a[a138_0x3b5f('0x10')][a138_0x3b5f('0xe')][a138_0x3b5f('0x52')][a138_0x3b5f('0x35')](_0x50e6d4[a138_0x3b5f('0x3f')]))throw new Error(a138_0x3b5f('0x1d'));const _0x47300b=_0x198f2a[a138_0x3b5f('0x10')][a138_0x3b5f('0xe')][a138_0x3b5f('0x52')][a138_0x3b5f('0x13')](_0x50e6d4[a138_0x3b5f('0x3f')]),_0x32693a=await _0x47300b[a138_0x3b5f('0x21')][a138_0x3b5f('0x3')](_0x50e6d4[a138_0x3b5f('0x5')])[a138_0x3b5f('0x27')](()=>{});if(!_0x32693a)throw new Error(a138_0x3b5f('0x1d'));const _0x246316=_0x32693a[a138_0x3b5f('0xc')][0x0]['fields'][a138_0x3b5f('0x25')](_0x4ecabd=>_0x4ecabd[a138_0x3b5f('0x4c')]),_0x8b0b0e={};let _0x2bae52=0x0;for(const _0xb68337 in this['reactions'][a138_0x3b5f('0x2b')](0x0,_0x246316['length'])){if(_0x32693a['reactions'][a138_0x3b5f('0x52')][a138_0x3b5f('0x35')](this['reactions'][_0xb68337])){await _0x32693a['reactions'][a138_0x3b5f('0x52')][a138_0x3b5f('0x13')](this[a138_0x3b5f('0x3d')][_0xb68337])[a138_0x3b5f('0x3a')][a138_0x3b5f('0x3')]()['catch'](()=>{});const _0x510a4b=_0x32693a[a138_0x3b5f('0x3d')]['cache']['get'](this[a138_0x3b5f('0x3d')][_0xb68337])[a138_0x3b5f('0x3a')][a138_0x3b5f('0x52')][a138_0x3b5f('0x46')](_0xd8245=>!_0xd8245[a138_0x3b5f('0x1f')])[a138_0x3b5f('0xa')];_0x8b0b0e[this['reactions'][_0xb68337]]=_0x510a4b,_0x2bae52+=_0x510a4b;}}return await _0x198f2a[a138_0x3b5f('0x3f')][a138_0x3b5f('0x47')]({'embed':{'color':tesseract_1['Constants'][a138_0x3b5f('0x4f')][a138_0x3b5f('0x7')],'author':{'name':a138_0x3b5f('0x23')},'title':_0x32693a[a138_0x3b5f('0xc')][0x0][a138_0x3b5f('0x56')],'fields':_0x32693a['embeds'][0x0][a138_0x3b5f('0x40')][a138_0x3b5f('0x25')](_0x5c43be=>({'name':_0x5c43be[a138_0x3b5f('0x19')]+'\x20'+_0x5c43be[a138_0x3b5f('0x4c')],'value':(_0x8b0b0e[_0x5c43be['name']]||0x0)+a138_0x3b5f('0x1e')+_0x2bae52+a138_0x3b5f('0x29')+(_0x8b0b0e[_0x5c43be[a138_0x3b5f('0x19')]]?_0x8b0b0e[_0x5c43be['name']]/_0x2bae52*0x64:0x0)[a138_0x3b5f('0x3c')](0x2)+'%)'})),'footer':{'text':_0x32693a['id']+'\x20â€¢\x20Ends'},'timestamp':_0x50e6d4[a138_0x3b5f('0x17')]}});}if(!_0x56dd3f['_']['length']||!_0x56dd3f[a138_0x3b5f('0x50')]||!(_0x56dd3f['option']instanceof Array))throw new errors[(a138_0x3b5f('0x11'))](errors[a138_0x3b5f('0x55')][a138_0x3b5f('0x31')],this[a138_0x3b5f('0x19')]);const _0x14ba6c=_0x56dd3f['_'][a138_0x3b5f('0x2a')]('\x20'),_0x8f850=_0x56dd3f['timeout']?_0x56dd3f[a138_0x3b5f('0x1')]:this[a138_0x3b5f('0x42')];if(constants[a138_0x3b5f('0x44')](this[a138_0x3b5f('0x12')][a138_0x3b5f('0x34')])){const _0x52f42a=await omnic[a138_0x3b5f('0x8')](_0x198f2a[a138_0x3b5f('0x10')])[a138_0x3b5f('0x27')](()=>{});if(_0x52f42a){if(_0x52f42a===omnic[a138_0x3b5f('0x1b')][a138_0x3b5f('0x0')]&&_0x8f850>constants[a138_0x3b5f('0x39')][a138_0x3b5f('0x0')][a138_0x3b5f('0x32')])throw new errors[(a138_0x3b5f('0x11'))](errors[a138_0x3b5f('0x55')][a138_0x3b5f('0x4d')],this[a138_0x3b5f('0x12')][a138_0x3b5f('0x9')][a138_0x3b5f('0xb')](_0x198f2a[a138_0x3b5f('0x10')]['document']['language'],a138_0x3b5f('0x18'),a138_0x3b5f('0x30'),constants['LIMITS']['GOLD'][a138_0x3b5f('0x32')]));else{if(_0x52f42a===omnic[a138_0x3b5f('0x1b')]['PLATINUM']&&_0x8f850>constants['LIMITS'][a138_0x3b5f('0x6')][a138_0x3b5f('0x32')])throw new errors[(a138_0x3b5f('0x11'))](errors[a138_0x3b5f('0x55')][a138_0x3b5f('0x4d')],this['client'][a138_0x3b5f('0x9')][a138_0x3b5f('0xb')](_0x198f2a[a138_0x3b5f('0x10')][a138_0x3b5f('0x48')]['language'],a138_0x3b5f('0x18'),a138_0x3b5f('0x30'),constants['LIMITS'][a138_0x3b5f('0x6')]['POLL_TIMEOUT']));}}else{if(_0x8f850>constants[a138_0x3b5f('0x39')][a138_0x3b5f('0x32')])throw new errors[(a138_0x3b5f('0x11'))](errors['BASTION_ERROR_TYPE'][a138_0x3b5f('0x20')],this[a138_0x3b5f('0x12')][a138_0x3b5f('0x9')]['getString'](_0x198f2a['guild'][a138_0x3b5f('0x48')]['language'],a138_0x3b5f('0x18'),a138_0x3b5f('0x22'),constants[a138_0x3b5f('0x39')][a138_0x3b5f('0x32')]));}const _0xda1657=await Poll_1[a138_0x3b5f('0x38')][a138_0x3b5f('0x3b')]({'guild':_0x198f2a[a138_0x3b5f('0x10')]['id'],'ends':{'$gte':new Date()}});if(_0x52f42a){if(_0x52f42a===omnic[a138_0x3b5f('0x1b')][a138_0x3b5f('0x0')]&&_0xda1657>=constants['LIMITS'][a138_0x3b5f('0x0')][a138_0x3b5f('0x3e')])throw new errors[(a138_0x3b5f('0x11'))](errors[a138_0x3b5f('0x55')][a138_0x3b5f('0x4d')],this[a138_0x3b5f('0x12')][a138_0x3b5f('0x9')][a138_0x3b5f('0xb')](_0x198f2a[a138_0x3b5f('0x10')][a138_0x3b5f('0x48')][a138_0x3b5f('0xd')],a138_0x3b5f('0x18'),'membershipLimitPolls',constants[a138_0x3b5f('0x39')][a138_0x3b5f('0x0')][a138_0x3b5f('0x3e')]));else{if(_0x52f42a===omnic[a138_0x3b5f('0x1b')]['PLATINUM']&&_0xda1657>=constants[a138_0x3b5f('0x39')]['PLATINUM'][a138_0x3b5f('0x3e')])throw new errors[(a138_0x3b5f('0x11'))](errors[a138_0x3b5f('0x55')][a138_0x3b5f('0x4d')],this[a138_0x3b5f('0x12')]['locale'][a138_0x3b5f('0xb')](_0x198f2a[a138_0x3b5f('0x10')][a138_0x3b5f('0x48')][a138_0x3b5f('0xd')],a138_0x3b5f('0x18'),a138_0x3b5f('0x33'),constants[a138_0x3b5f('0x39')][a138_0x3b5f('0x6')]['POLLS']));}}else{if(_0xda1657>=constants[a138_0x3b5f('0x39')]['POLLS'])throw new errors['DiscordError'](errors[a138_0x3b5f('0x55')]['PREMIUM_MEMBERSHIP_REQUIRED'],this[a138_0x3b5f('0x12')][a138_0x3b5f('0x9')][a138_0x3b5f('0xb')](_0x198f2a['guild'][a138_0x3b5f('0x48')]['language'],a138_0x3b5f('0x18'),a138_0x3b5f('0x14'),constants[a138_0x3b5f('0x39')][a138_0x3b5f('0x3e')]));}}const _0x5758a8=new Date(Date[a138_0x3b5f('0x2')]()+_0x8f850*0x36ee80),_0x1c542d=await _0x198f2a[a138_0x3b5f('0x3f')][a138_0x3b5f('0x47')]({'embed':{'color':tesseract_1[a138_0x3b5f('0x4e')][a138_0x3b5f('0x4f')]['IRIS'],'author':{'name':a138_0x3b5f('0x2d')},'title':_0x14ba6c,'description':'React\x20to\x20this\x20message\x20with\x20the\x20corresponding\x20emoji\x20to\x20vote\x20for\x20that\x20option.','fields':_0x56dd3f[a138_0x3b5f('0x50')][a138_0x3b5f('0x25')]((_0x2d032d,_0x4a8ede)=>({'name':this[a138_0x3b5f('0x3d')][_0x4a8ede],'value':_0x2d032d})),'footer':{'text':a138_0x3b5f('0x51')},'timestamp':_0x5758a8}});await Poll_1['default'][a138_0x3b5f('0x49')]({'_id':_0x1c542d['id'],'channel':_0x1c542d[a138_0x3b5f('0x3f')]['id'],'guild':_0x1c542d['guild']['id'],'ends':_0x5758a8});for(const _0x1fe0b0 of this['reactions'][a138_0x3b5f('0x2b')](0x0,_0x56dd3f[a138_0x3b5f('0x50')][a138_0x3b5f('0x1a')])){await _0x1c542d['react'](_0x1fe0b0)[a138_0x3b5f('0x27')](()=>{});}},this[a138_0x3b5f('0x3d')]=['ðŸ‡¦','ðŸ‡§','ðŸ‡¨','ðŸ‡©','ðŸ‡ª','ðŸ‡«','ðŸ‡¬','ðŸ‡­','ðŸ‡®','ðŸ‡¯','ðŸ‡°','ðŸ‡±','ðŸ‡²'],this[a138_0x3b5f('0x42')]=0x3;}};
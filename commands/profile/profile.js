const a109_0xa231=['About','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','document','resolveGuildMember','client','\x20/\x20','language','resolveBadges','return\x20/\x22\x20+\x20this\x20+\x20\x22/','cakeDay','errors','profile\x20USER','Experience','find','color','emoji','then','json','Bastion\x20Coins','default','level','karma','location','length','backdrop','member','map','info','tag','test','findOne','resolver','Oh,\x20hey!\x20Here\x27s\x20my\x20developer!','gamification','IRIS','../../utils/constants','profileNotFound','isPublicBastion','getConstant','balance','COLORS','It\x20allows\x20you\x20to\x20see\x20your\x20(or\x20any\x20of\x20the\x20server\x20member\x27s)\x20Bastion\x20Profile.','user','apply','Location','getString','author','memberNotFound','locale','toDateString','nextLevel','currentLevel','compile','catch','exec','author.discord.id','Progress\x20-\x20','constructor','Constants','channel','badgeValue','Command','profile','experience','multiplier','computeExperience','guild','Bastion\x20Profile','send','DEFAUL_LEVELUP_MULTIPLIER','round','Karma','Rank','displayAvatarURL','Cake\x20Day'];(function(_0x1cbbc4,_0xa231a8){const _0x1e2229=function(_0x2c7eba){while(--_0x2c7eba){_0x1cbbc4['push'](_0x1cbbc4['shift']());}};const _0x4ecf5b=function(){const _0x153248={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x1b5215,_0x2eec49,_0x22d760,_0x41ab7e){_0x41ab7e=_0x41ab7e||{};let _0x53b916=_0x2eec49+'='+_0x22d760;let _0x47dd88=0x0;for(let _0x5e8b08=0x0,_0x581881=_0x1b5215['length'];_0x5e8b08<_0x581881;_0x5e8b08++){const _0x156687=_0x1b5215[_0x5e8b08];_0x53b916+=';\x20'+_0x156687;const _0x5467c5=_0x1b5215[_0x156687];_0x1b5215['push'](_0x5467c5);_0x581881=_0x1b5215['length'];if(_0x5467c5!==!![]){_0x53b916+='='+_0x5467c5;}}_0x41ab7e['cookie']=_0x53b916;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5e7049,_0x5ddd6d){_0x5e7049=_0x5e7049||function(_0xd41ffe){return _0xd41ffe;};const _0x2c3b51=_0x5e7049(new RegExp('(?:^|;\x20)'+_0x5ddd6d['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x1ed117=function(_0x261b06,_0x3a9849){_0x261b06(++_0x3a9849);};_0x1ed117(_0x1e2229,_0xa231a8);return _0x2c3b51?decodeURIComponent(_0x2c3b51[0x1]):undefined;}};const _0x1c10e6=function(){const _0x26fd5e=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x26fd5e['test'](_0x153248['removeCookie']['toString']());};_0x153248['updateCookie']=_0x1c10e6;let _0x1b525d='';const _0x35e6df=_0x153248['updateCookie']();if(!_0x35e6df){_0x153248['setCookie'](['*'],'counter',0x1);}else if(_0x35e6df){_0x1b525d=_0x153248['getCookie'](null,'counter');}else{_0x153248['removeCookie']();}};_0x4ecf5b();}(a109_0xa231,0xdc));const a109_0x1e22=function(_0x1cbbc4,_0xa231a8){_0x1cbbc4=_0x1cbbc4-0x0;let _0x1e2229=a109_0xa231[_0x1cbbc4];return _0x1e2229;};const a109_0x153248=function(){let _0x1b856f=!![];return function(_0x278a4d,_0x1ba2f2){const _0x19ad55=_0x1b856f?function(){if(_0x1ba2f2){const _0x4e57c0=_0x1ba2f2[a109_0x1e22('0x30')](_0x278a4d,arguments);_0x1ba2f2=null;return _0x4e57c0;}}:function(){};_0x1b856f=![];return _0x19ad55;};}();const a109_0x2c7eba=a109_0x153248(this,function(){const _0x3f3edb=function(){const _0x3554d1=_0x3f3edb[a109_0x1e22('0x3e')](a109_0x1e22('0xd'))()[a109_0x1e22('0x39')](a109_0x1e22('0x6'));return!_0x3554d1[a109_0x1e22('0x22')](a109_0x2c7eba);};return _0x3f3edb();});a109_0x2c7eba();'use strict';const tesseract_1=require('@bastion/tesseract');const Member_1=require('../../models/Member');const User_1=require('../../models/User');const badges=require('../../utils/badges');const constants=require(a109_0x1e22('0x28'));const gamification=require('../../utils/gamification');const progress_1=require('../../utils/progress');module['exports']=class ProfileCommand extends tesseract_1[a109_0x1e22('0x42')]{constructor(){super(a109_0x1e22('0x43'),{'description':a109_0x1e22('0x2e'),'triggers':[],'arguments':{},'scope':a109_0x1e22('0x47'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[],'syntax':[a109_0x1e22('0x43'),a109_0x1e22('0x10')]});this[a109_0x1e22('0x3b')]=async(_0x1e1b76,_0x22dd8a)=>{const _0x1d1b10=_0x22dd8a['_'][a109_0x1e22('0x1c')]?_0x22dd8a['_'][0x0]:_0x1e1b76[a109_0x1e22('0x33')]['id'];const _0x19ce56=_0x1d1b10===_0x1e1b76['author']['id']?_0x1e1b76[a109_0x1e22('0x1e')]:this['client'][a109_0x1e22('0x24')][a109_0x1e22('0x8')](_0x1e1b76[a109_0x1e22('0x47')],_0x1d1b10);if(!_0x19ce56)throw new Error(this[a109_0x1e22('0x9')]['locale'][a109_0x1e22('0x32')](_0x1e1b76[a109_0x1e22('0x47')][a109_0x1e22('0x7')][a109_0x1e22('0xb')],'errors',a109_0x1e22('0x34')));const _0x176037=_0x1d1b10===_0x1e1b76[a109_0x1e22('0x33')]['id']?_0x1e1b76[a109_0x1e22('0x33')][a109_0x1e22('0x7')]:await User_1[a109_0x1e22('0x18')]['findById'](_0x1d1b10);const _0x414bb8=_0x1d1b10===_0x1e1b76[a109_0x1e22('0x33')]['id']?_0x19ce56[a109_0x1e22('0x7')]:await Member_1[a109_0x1e22('0x18')][a109_0x1e22('0x23')]({'user':_0x1d1b10,'guild':_0x1e1b76[a109_0x1e22('0x47')]['id']});if(!_0x176037||!_0x414bb8)throw new Error(this[a109_0x1e22('0x9')][a109_0x1e22('0x35')][a109_0x1e22('0x32')](_0x1e1b76['guild'][a109_0x1e22('0x7')][a109_0x1e22('0xb')],a109_0x1e22('0xf'),a109_0x1e22('0x29')));const _0x2ab7ff=await Member_1[a109_0x1e22('0x18')][a109_0x1e22('0x12')]({'guild':_0x1e1b76[a109_0x1e22('0x47')]['id']},null,{'sort':{'level':-0x1,'experience':-0x1,'karma':-0x1,'balance':-0x1}})['countDocuments']({'$or':[{'level':{'$gt':_0x414bb8[a109_0x1e22('0x19')]}},{'level':_0x414bb8[a109_0x1e22('0x19')],'experience':{'$gt':_0x414bb8['experience']}},{'level':_0x414bb8[a109_0x1e22('0x19')],'experience':_0x414bb8['experience'],'karma':{'$gt':_0x414bb8['karma']}},{'level':_0x414bb8[a109_0x1e22('0x19')],'experience':_0x414bb8[a109_0x1e22('0x44')],'karma':_0x414bb8['karma'],'balance':{'$gt':_0x414bb8['balance']}}]});const _0x2ec79d={'currentLevel':gamification[a109_0x1e22('0x46')](_0x414bb8['level'],_0x1e1b76[a109_0x1e22('0x47')][a109_0x1e22('0x7')][a109_0x1e22('0x26')]?_0x1e1b76[a109_0x1e22('0x47')][a109_0x1e22('0x7')][a109_0x1e22('0x26')][a109_0x1e22('0x45')]:gamification[a109_0x1e22('0x4a')]),'nextLevel':gamification[a109_0x1e22('0x46')](_0x414bb8[a109_0x1e22('0x19')]+0x1,_0x1e1b76['guild'][a109_0x1e22('0x7')][a109_0x1e22('0x26')]?_0x1e1b76[a109_0x1e22('0x47')][a109_0x1e22('0x7')][a109_0x1e22('0x26')]['multiplier']:gamification[a109_0x1e22('0x4a')])};const _0x4c3ab2={'currentLevel':_0x414bb8[a109_0x1e22('0x44')]-_0x2ec79d[a109_0x1e22('0x38')],'nextLevel':_0x2ec79d[a109_0x1e22('0x37')]-_0x2ec79d['currentLevel']};const _0x48d011=_0x4c3ab2[a109_0x1e22('0x38')]/_0x4c3ab2['nextLevel']*0x64;const _0x44de68=constants[a109_0x1e22('0x2a')](this[a109_0x1e22('0x9')][a109_0x1e22('0x2f')])&&await badges['fetchBadges'](_0x19ce56['id'])[a109_0x1e22('0x15')](_0x397bcb=>_0x397bcb[a109_0x1e22('0x16')]())[a109_0x1e22('0x3a')](()=>{});_0x1e1b76[a109_0x1e22('0x40')][a109_0x1e22('0x49')]({'embed':{'color':_0x176037[a109_0x1e22('0x13')]||tesseract_1[a109_0x1e22('0x3f')][a109_0x1e22('0x2d')][a109_0x1e22('0x27')],'author':{'name':_0x19ce56[a109_0x1e22('0x2f')][a109_0x1e22('0x21')]},'title':a109_0x1e22('0x48'),'description':(_0x44de68&&a109_0x1e22('0x41')in _0x44de68?badges[a109_0x1e22('0xc')](_0x44de68[a109_0x1e22('0x41')]):[])[a109_0x1e22('0x1f')](_0x254ed2=>_0x254ed2[a109_0x1e22('0x14')])['join']('\x20'),'fields':[{'name':a109_0x1e22('0x5'),'value':_0x176037[a109_0x1e22('0x20')]||'-'},{'name':a109_0x1e22('0x2'),'value':_0x2ab7ff+0x1,'inline':!![]},{'name':'Level','value':_0x414bb8[a109_0x1e22('0x19')],'inline':!![]},{'name':a109_0x1e22('0x11'),'value':_0x414bb8[a109_0x1e22('0x44')],'inline':!![]},{'name':a109_0x1e22('0x1'),'value':_0x414bb8[a109_0x1e22('0x1a')],'inline':!![]},{'name':a109_0x1e22('0x17'),'value':_0x414bb8[a109_0x1e22('0x2c')],'inline':!![]},{'name':a109_0x1e22('0x3d')+_0x4c3ab2[a109_0x1e22('0x38')]+a109_0x1e22('0xa')+_0x4c3ab2[a109_0x1e22('0x37')]+'\x20-\x20'+Math[a109_0x1e22('0x0')](_0x48d011)+'%','value':'`'+progress_1[a109_0x1e22('0x18')](_0x48d011,0x23)+'`'},{'name':a109_0x1e22('0x4'),'value':_0x176037[a109_0x1e22('0xe')]?_0x176037[a109_0x1e22('0xe')][a109_0x1e22('0x36')]():'-','inline':!![]},{'name':a109_0x1e22('0x31'),'value':_0x176037[a109_0x1e22('0x1b')]||'-','inline':!![]}],'thumbnail':{'url':_0x19ce56[a109_0x1e22('0x2f')][a109_0x1e22('0x3')]({'dynamic':!![],'size':0x200})},'image':{'url':_0x176037[a109_0x1e22('0x1d')]},'footer':{'text':_0x19ce56['id']===this[a109_0x1e22('0x9')][a109_0x1e22('0x35')][a109_0x1e22('0x2b')](a109_0x1e22('0x3c'))?a109_0x1e22('0x25'):''}}})[a109_0x1e22('0x3a')](()=>{});};}};
const a117_0x5ce6=['badgeValue','karma','backdrop','DEFAUL_LEVELUP_MULTIPLIER','gamification','resolveGuildMember','currentLevel','constructor','author.discord.id','profileNotFound','multiplier','fetchBadges','findOne','getString','length','experience','nextLevel','profile','map','resolver','isPublicBastion','tag','Command','countDocuments','location','findById','profile\x20USER','level','find','Rank','default','Progress\x20-\x20','About','resolveBadges','join','../../models/User','cakeDay','COLORS','return\x20/\x22\x20+\x20this\x20+\x20\x22/','Karma','IRIS','locale','../../utils/progress','exports','json','../../utils/constants','computeExperience','document','Experience','It\x20allows\x20you\x20to\x20see\x20your\x20(or\x20any\x20of\x20the\x20server\x20member\x27s)\x20Bastion\x20Profile.','then','language','author','color','catch','\x20/\x20','guild','Constants','member','displayAvatarURL','Location','balance','user','\x20-\x20','Bastion\x20Coins','errors','round','client','emoji','Oh,\x20hey!\x20Here\x27s\x20my\x20developer!'];(function(_0x582b98,_0x5ce6bb){const _0x56ab1d=function(_0x1150bf){while(--_0x1150bf){_0x582b98['push'](_0x582b98['shift']());}},_0x2205b2=function(){const _0x300dc1={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0xd75d23,_0x19e1d0,_0x1396ad,_0x19707b){_0x19707b=_0x19707b||{};let _0x14f0dd=_0x19e1d0+'='+_0x1396ad,_0xe65961=0x0;for(let _0xa1bff6=0x0,_0x537bc9=_0xd75d23['length'];_0xa1bff6<_0x537bc9;_0xa1bff6++){const _0x479df6=_0xd75d23[_0xa1bff6];_0x14f0dd+=';\x20'+_0x479df6;const _0x3b8767=_0xd75d23[_0x479df6];_0xd75d23['push'](_0x3b8767),_0x537bc9=_0xd75d23['length'],_0x3b8767!==!![]&&(_0x14f0dd+='='+_0x3b8767);}_0x19707b['cookie']=_0x14f0dd;},'removeCookie':function(){return'dev';},'getCookie':function(_0x55547d,_0x174fef){_0x55547d=_0x55547d||function(_0x1b27ed){return _0x1b27ed;};const _0x263e8e=_0x55547d(new RegExp('(?:^|;\x20)'+_0x174fef['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x52e06a=function(_0x4113f7,_0x35b5db){_0x4113f7(++_0x35b5db);};return _0x52e06a(_0x56ab1d,_0x5ce6bb),_0x263e8e?decodeURIComponent(_0x263e8e[0x1]):undefined;}},_0x552b8e=function(){const _0x3e4ae0=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3e4ae0['test'](_0x300dc1['removeCookie']['toString']());};_0x300dc1['updateCookie']=_0x552b8e;let _0x2f0faf='';const _0x415bc9=_0x300dc1['updateCookie']();if(!_0x415bc9)_0x300dc1['setCookie'](['*'],'counter',0x1);else _0x415bc9?_0x2f0faf=_0x300dc1['getCookie'](null,'counter'):_0x300dc1['removeCookie']();};_0x2205b2();}(a117_0x5ce6,0x1d6));const a117_0x56ab=function(_0x582b98,_0x5ce6bb){_0x582b98=_0x582b98-0x0;let _0x56ab1d=a117_0x5ce6[_0x582b98];return _0x56ab1d;};const a117_0x300dc1=function(){let _0x2f0faf=!![];return function(_0x415bc9,_0xd75d23){const _0x19e1d0=_0x2f0faf?function(){if(_0xd75d23){const _0x1396ad=_0xd75d23['apply'](_0x415bc9,arguments);return _0xd75d23=null,_0x1396ad;}}:function(){};return _0x2f0faf=![],_0x19e1d0;};}(),a117_0x1150bf=a117_0x300dc1(this,function(){const _0x19707b=function(){const _0x14f0dd=_0x19707b['constructor'](a117_0x56ab('0x3a'))()[a117_0x56ab('0x1b')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x14f0dd['test'](a117_0x1150bf);};return _0x19707b();});a117_0x1150bf();'use strict';const tesseract_1=require('@bastion/tesseract'),Member_1=require('../../models/Member'),User_1=require(a117_0x56ab('0x37')),badges=require('../../utils/badges'),constants=require(a117_0x56ab('0x41')),gamification=require('../../utils/gamification'),progress_1=require(a117_0x56ab('0x3e'));module[a117_0x56ab('0x3f')]=class ProfileCommand extends tesseract_1[a117_0x56ab('0x2a')]{constructor(){super(a117_0x56ab('0x25'),{'description':a117_0x56ab('0x45'),'triggers':[],'arguments':{},'scope':a117_0x56ab('0x6'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[],'syntax':[a117_0x56ab('0x25'),a117_0x56ab('0x2e')]}),this['exec']=async(_0xe65961,_0xa1bff6)=>{const _0x537bc9=_0xa1bff6['_'][a117_0x56ab('0x22')]?_0xa1bff6['_'][0x0]:_0xe65961[a117_0x56ab('0x2')]['id'],_0x479df6=_0x537bc9===_0xe65961['author']['id']?_0xe65961[a117_0x56ab('0x8')]:this['client'][a117_0x56ab('0x27')][a117_0x56ab('0x19')](_0xe65961[a117_0x56ab('0x6')],_0x537bc9);if(!_0x479df6)throw new Error(this['client']['locale'][a117_0x56ab('0x21')](_0xe65961[a117_0x56ab('0x6')]['document'][a117_0x56ab('0x1')],a117_0x56ab('0xf'),'memberNotFound'));const _0x3b8767=_0x537bc9===_0xe65961['author']['id']?_0xe65961[a117_0x56ab('0x2')]['document']:await User_1[a117_0x56ab('0x32')][a117_0x56ab('0x2d')](_0x537bc9),_0x55547d=_0x537bc9===_0xe65961[a117_0x56ab('0x2')]['id']?_0x479df6[a117_0x56ab('0x43')]:await Member_1[a117_0x56ab('0x32')][a117_0x56ab('0x20')]({'user':_0x537bc9,'guild':_0xe65961['guild']['id']});if(!_0x3b8767||!_0x55547d)throw new Error(this[a117_0x56ab('0x11')][a117_0x56ab('0x3d')][a117_0x56ab('0x21')](_0xe65961[a117_0x56ab('0x6')][a117_0x56ab('0x43')][a117_0x56ab('0x1')],a117_0x56ab('0xf'),a117_0x56ab('0x1d'),_0x479df6[a117_0x56ab('0xc')]['tag']));const _0x174fef=await Member_1[a117_0x56ab('0x32')][a117_0x56ab('0x30')]({'guild':_0xe65961[a117_0x56ab('0x6')]['id']},null,{'sort':{'level':-0x1,'experience':-0x1,'karma':-0x1,'balance':-0x1}})[a117_0x56ab('0x2b')]({'$or':[{'level':{'$gt':_0x55547d[a117_0x56ab('0x2f')]}},{'level':_0x55547d[a117_0x56ab('0x2f')],'experience':{'$gt':_0x55547d[a117_0x56ab('0x23')]}},{'level':_0x55547d['level'],'experience':_0x55547d[a117_0x56ab('0x23')],'karma':{'$gt':_0x55547d[a117_0x56ab('0x15')]}},{'level':_0x55547d['level'],'experience':_0x55547d[a117_0x56ab('0x23')],'karma':_0x55547d[a117_0x56ab('0x15')],'balance':{'$gt':_0x55547d[a117_0x56ab('0xb')]}}]}),_0x263e8e={'currentLevel':gamification[a117_0x56ab('0x42')](_0x55547d[a117_0x56ab('0x2f')],_0xe65961[a117_0x56ab('0x6')][a117_0x56ab('0x43')][a117_0x56ab('0x18')]?_0xe65961[a117_0x56ab('0x6')]['document']['gamification'][a117_0x56ab('0x1e')]:gamification['DEFAUL_LEVELUP_MULTIPLIER']),'nextLevel':gamification[a117_0x56ab('0x42')](_0x55547d[a117_0x56ab('0x2f')]+0x1,_0xe65961[a117_0x56ab('0x6')][a117_0x56ab('0x43')][a117_0x56ab('0x18')]?_0xe65961[a117_0x56ab('0x6')][a117_0x56ab('0x43')][a117_0x56ab('0x18')][a117_0x56ab('0x1e')]:gamification[a117_0x56ab('0x17')])},_0x52e06a={'currentLevel':_0x55547d[a117_0x56ab('0x23')]-_0x263e8e[a117_0x56ab('0x1a')],'nextLevel':_0x263e8e[a117_0x56ab('0x24')]-_0x263e8e[a117_0x56ab('0x1a')]},_0x1b27ed=_0x52e06a[a117_0x56ab('0x1a')]/_0x52e06a[a117_0x56ab('0x24')]*0x64,_0x4113f7=constants[a117_0x56ab('0x28')](this[a117_0x56ab('0x11')][a117_0x56ab('0xc')])&&await badges[a117_0x56ab('0x1f')](_0x479df6['id'])[a117_0x56ab('0x0')](_0x35b5db=>_0x35b5db[a117_0x56ab('0x40')]())[a117_0x56ab('0x4')](()=>{});_0xe65961['channel']['send']({'embed':{'color':_0x3b8767[a117_0x56ab('0x3')]||tesseract_1[a117_0x56ab('0x7')][a117_0x56ab('0x39')][a117_0x56ab('0x3c')],'author':{'name':_0x479df6[a117_0x56ab('0xc')][a117_0x56ab('0x29')]},'title':'Bastion\x20Profile','description':(_0x4113f7&&a117_0x56ab('0x14')in _0x4113f7?badges[a117_0x56ab('0x35')](_0x4113f7[a117_0x56ab('0x14')]):[])[a117_0x56ab('0x26')](_0x3e4ae0=>_0x3e4ae0[a117_0x56ab('0x12')])[a117_0x56ab('0x36')]('\x20'),'fields':[{'name':a117_0x56ab('0x34'),'value':_0x3b8767['info']||'-'},{'name':a117_0x56ab('0x31'),'value':_0x174fef+0x1,'inline':!![]},{'name':'Level','value':_0x55547d[a117_0x56ab('0x2f')],'inline':!![]},{'name':a117_0x56ab('0x44'),'value':_0x55547d['experience'],'inline':!![]},{'name':a117_0x56ab('0x3b'),'value':_0x55547d[a117_0x56ab('0x15')],'inline':!![]},{'name':a117_0x56ab('0xe'),'value':_0x55547d[a117_0x56ab('0xb')],'inline':!![]},{'name':a117_0x56ab('0x33')+_0x52e06a[a117_0x56ab('0x1a')]+a117_0x56ab('0x5')+_0x52e06a['nextLevel']+a117_0x56ab('0xd')+Math[a117_0x56ab('0x10')](_0x1b27ed)+'%','value':'`'+progress_1['default'](_0x1b27ed,0x23)+'`'},{'name':'Cake\x20Day','value':_0x3b8767['cakeDay']?_0x3b8767[a117_0x56ab('0x38')]['toDateString']():'-','inline':!![]},{'name':a117_0x56ab('0xa'),'value':_0x3b8767[a117_0x56ab('0x2c')]||'-','inline':!![]}],'thumbnail':{'url':_0x479df6[a117_0x56ab('0xc')][a117_0x56ab('0x9')]({'dynamic':!![],'size':0x200})},'image':{'url':_0x3b8767[a117_0x56ab('0x16')]},'footer':{'text':_0x479df6['id']===this[a117_0x56ab('0x11')][a117_0x56ab('0x3d')]['getConstant'](a117_0x56ab('0x1c'))?a117_0x56ab('0x13'):''}}})['catch'](()=>{});};}};
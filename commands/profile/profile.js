const a108_0x4bcc=['json','author','info','experience','join','Oh,\x20hey!\x20Here\x27s\x20my\x20developer!','Cake\x20Day','apply','getString','It\x20allows\x20you\x20to\x20see\x20your\x20(or\x20any\x20of\x20the\x20server\x20member\x27s)\x20Bastion\x20Profile.','resolver','catch','backdrop','multiplier','IRIS','default','karma','Experience','../../utils/badges','findOne','Bastion\x20Coins','nextLevel','../../utils/progress','DEFAUL_LEVELUP_MULTIPLIER','compile','resolveBadges','constructor','memberNotFound','user','test','COLORS','Progress\x20-\x20','toDateString','emoji','currentLevel','level','author.discord.id','findById','getConstant','fetchBadges','client','length','\x20/\x20','computeExperience','countDocuments','balance','Level','member','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','tag','@bastion/tesseract','isPublicBastion','Command','locale','color','../../utils/constants','Rank','gamification','location','channel','badgeValue','errors','resolveGuildMember','displayAvatarURL','profile\x20USER','cakeDay','../../utils/gamification','guild','Constants','document','../../models/User'];(function(_0x4bcb4f,_0x4bcc45){const _0x277392=function(_0x35bd89){while(--_0x35bd89){_0x4bcb4f['push'](_0x4bcb4f['shift']());}};const _0x4a7b52=function(){const _0x58368f={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x47dcbf,_0x20b429,_0x19c00f,_0x1fe5de){_0x1fe5de=_0x1fe5de||{};let _0x1db2b7=_0x20b429+'='+_0x19c00f;let _0x4d75a3=0x0;for(let _0x199468=0x0,_0x462899=_0x47dcbf['length'];_0x199468<_0x462899;_0x199468++){const _0xb5d95d=_0x47dcbf[_0x199468];_0x1db2b7+=';\x20'+_0xb5d95d;const _0x35ab44=_0x47dcbf[_0xb5d95d];_0x47dcbf['push'](_0x35ab44);_0x462899=_0x47dcbf['length'];if(_0x35ab44!==!![]){_0x1db2b7+='='+_0x35ab44;}}_0x1fe5de['cookie']=_0x1db2b7;},'removeCookie':function(){return'dev';},'getCookie':function(_0x224413,_0x5a1596){_0x224413=_0x224413||function(_0x4412c9){return _0x4412c9;};const _0x254a49=_0x224413(new RegExp('(?:^|;\x20)'+_0x5a1596['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x4bcf84=function(_0x5e70c2,_0x57805e){_0x5e70c2(++_0x57805e);};_0x4bcf84(_0x277392,_0x4bcc45);return _0x254a49?decodeURIComponent(_0x254a49[0x1]):undefined;}};const _0x5925f8=function(){const _0x8c2cc6=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x8c2cc6['test'](_0x58368f['removeCookie']['toString']());};_0x58368f['updateCookie']=_0x5925f8;let _0x11beda='';const _0x4065be=_0x58368f['updateCookie']();if(!_0x4065be){_0x58368f['setCookie'](['*'],'counter',0x1);}else if(_0x4065be){_0x11beda=_0x58368f['getCookie'](null,'counter');}else{_0x58368f['removeCookie']();}};_0x4a7b52();}(a108_0x4bcc,0x1a2));const a108_0x2773=function(_0x4bcb4f,_0x4bcc45){_0x4bcb4f=_0x4bcb4f-0x0;let _0x277392=a108_0x4bcc[_0x4bcb4f];return _0x277392;};const a108_0x58368f=function(){let _0x54c44b=!![];return function(_0x229a78,_0x4de1e6){const _0x2f3a84=_0x54c44b?function(){if(_0x4de1e6){const _0x5a20fa=_0x4de1e6[a108_0x2773('0xf')](_0x229a78,arguments);_0x4de1e6=null;return _0x5a20fa;}}:function(){};_0x54c44b=![];return _0x2f3a84;};}();const a108_0x35bd89=a108_0x58368f(this,function(){const _0x5a27ec=function(){const _0x163e66=_0x5a27ec[a108_0x2773('0x22')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a108_0x2773('0x20')](a108_0x2773('0x38'));return!_0x163e66[a108_0x2773('0x25')](a108_0x35bd89);};return _0x5a27ec();});a108_0x35bd89();'use strict';const tesseract_1=require(a108_0x2773('0x3a'));const Member_1=require('../../models/Member');const User_1=require(a108_0x2773('0x7'));const badges=require(a108_0x2773('0x1a'));const constants=require(a108_0x2773('0x3f'));const gamification=require(a108_0x2773('0x3'));const progress_1=require(a108_0x2773('0x1e'));module['exports']=class ProfileCommand extends tesseract_1[a108_0x2773('0x3c')]{constructor(){super('profile',{'description':a108_0x2773('0x11'),'triggers':[],'arguments':{},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[],'syntax':['profile',a108_0x2773('0x1')]});this['exec']=async(_0x4df480,_0x3c44b6)=>{const _0x12cc0f=_0x3c44b6['_'][a108_0x2773('0x31')]?_0x3c44b6['_'][0x0]:_0x4df480[a108_0x2773('0x9')]['id'];const _0x4fadd1=_0x12cc0f===_0x4df480['author']['id']?_0x4df480[a108_0x2773('0x37')]:this[a108_0x2773('0x30')][a108_0x2773('0x12')][a108_0x2773('0x46')](_0x4df480[a108_0x2773('0x4')],_0x12cc0f);if(!_0x4fadd1)throw new Error(this[a108_0x2773('0x30')][a108_0x2773('0x3d')][a108_0x2773('0x10')](_0x4df480[a108_0x2773('0x4')][a108_0x2773('0x6')]['language'],a108_0x2773('0x45'),a108_0x2773('0x23')));const _0x31941d=_0x12cc0f===_0x4df480[a108_0x2773('0x9')]['id']?_0x4df480[a108_0x2773('0x9')]['document']:await User_1[a108_0x2773('0x17')][a108_0x2773('0x2d')](_0x12cc0f);const _0x348e3e=_0x12cc0f===_0x4df480[a108_0x2773('0x9')]['id']?_0x4fadd1[a108_0x2773('0x6')]:await Member_1[a108_0x2773('0x17')][a108_0x2773('0x1b')]({'user':_0x12cc0f,'guild':_0x4df480[a108_0x2773('0x4')]['id']});if(!_0x31941d||!_0x348e3e)throw new Error(this[a108_0x2773('0x30')]['locale']['getString'](_0x4df480['guild']['document']['language'],a108_0x2773('0x45'),'profileNotFound'));const _0x159d5c=await Member_1[a108_0x2773('0x17')]['find']({'guild':_0x4df480[a108_0x2773('0x4')]['id']},null,{'sort':{'level':-0x1,'experience':-0x1,'karma':-0x1,'balance':-0x1}})[a108_0x2773('0x34')]({'$or':[{'level':{'$gt':_0x348e3e[a108_0x2773('0x2b')]}},{'level':_0x348e3e[a108_0x2773('0x2b')],'experience':{'$gt':_0x348e3e[a108_0x2773('0xb')]}},{'level':_0x348e3e[a108_0x2773('0x2b')],'experience':_0x348e3e[a108_0x2773('0xb')],'karma':{'$gt':_0x348e3e[a108_0x2773('0x18')]}},{'level':_0x348e3e[a108_0x2773('0x2b')],'experience':_0x348e3e[a108_0x2773('0xb')],'karma':_0x348e3e[a108_0x2773('0x18')],'balance':{'$gt':_0x348e3e[a108_0x2773('0x35')]}}]});const _0xc023c2={'currentLevel':gamification['computeExperience'](_0x348e3e[a108_0x2773('0x2b')],_0x4df480[a108_0x2773('0x4')][a108_0x2773('0x6')]['gamification']?_0x4df480[a108_0x2773('0x4')][a108_0x2773('0x6')]['gamification'][a108_0x2773('0x15')]:gamification[a108_0x2773('0x1f')]),'nextLevel':gamification[a108_0x2773('0x33')](_0x348e3e[a108_0x2773('0x2b')]+0x1,_0x4df480['guild'][a108_0x2773('0x6')][a108_0x2773('0x41')]?_0x4df480[a108_0x2773('0x4')][a108_0x2773('0x6')][a108_0x2773('0x41')]['multiplier']:gamification[a108_0x2773('0x1f')])};const _0x181f48={'currentLevel':_0x348e3e[a108_0x2773('0xb')]-_0xc023c2['currentLevel'],'nextLevel':_0xc023c2[a108_0x2773('0x1d')]-_0xc023c2[a108_0x2773('0x2a')]};const _0x40c24f=_0x181f48[a108_0x2773('0x2a')]/_0x181f48[a108_0x2773('0x1d')]*0x64;const _0x32290b=constants[a108_0x2773('0x3b')](this[a108_0x2773('0x30')][a108_0x2773('0x24')])&&await badges[a108_0x2773('0x2f')](_0x4fadd1['id'])['then'](_0x47eea8=>_0x47eea8[a108_0x2773('0x8')]())[a108_0x2773('0x13')](()=>{});_0x4df480[a108_0x2773('0x43')]['send']({'embed':{'color':_0x31941d[a108_0x2773('0x3e')]||tesseract_1[a108_0x2773('0x5')][a108_0x2773('0x26')][a108_0x2773('0x16')],'author':{'name':_0x4fadd1[a108_0x2773('0x24')][a108_0x2773('0x39')]},'title':'Bastion\x20Profile','description':(_0x32290b&&a108_0x2773('0x44')in _0x32290b?badges[a108_0x2773('0x21')](_0x32290b[a108_0x2773('0x44')]):[])['map'](_0x19f2d3=>_0x19f2d3[a108_0x2773('0x29')])[a108_0x2773('0xc')]('\x20'),'fields':[{'name':'About','value':_0x31941d[a108_0x2773('0xa')]||'-'},{'name':a108_0x2773('0x40'),'value':_0x159d5c+0x1,'inline':!![]},{'name':a108_0x2773('0x36'),'value':_0x348e3e[a108_0x2773('0x2b')],'inline':!![]},{'name':a108_0x2773('0x19'),'value':_0x348e3e[a108_0x2773('0xb')],'inline':!![]},{'name':'Karma','value':_0x348e3e[a108_0x2773('0x18')],'inline':!![]},{'name':a108_0x2773('0x1c'),'value':_0x348e3e['balance'],'inline':!![]},{'name':a108_0x2773('0x27')+_0x181f48['currentLevel']+a108_0x2773('0x32')+_0x181f48[a108_0x2773('0x1d')]+'\x20-\x20'+Math['round'](_0x40c24f)+'%','value':'`'+progress_1[a108_0x2773('0x17')](_0x40c24f,0x23)+'`'},{'name':a108_0x2773('0xe'),'value':_0x31941d[a108_0x2773('0x2')]?_0x31941d[a108_0x2773('0x2')][a108_0x2773('0x28')]():'-','inline':!![]},{'name':'Location','value':_0x31941d[a108_0x2773('0x42')]||'-','inline':!![]}],'thumbnail':{'url':_0x4fadd1[a108_0x2773('0x24')][a108_0x2773('0x0')]({'dynamic':!![],'size':0x200})},'image':{'url':_0x31941d[a108_0x2773('0x14')]},'footer':{'text':_0x4fadd1['id']===this[a108_0x2773('0x30')][a108_0x2773('0x3d')][a108_0x2773('0x2e')](a108_0x2773('0x2c'))?a108_0x2773('0xd'):''}}})[a108_0x2773('0x13')](()=>{});};}};
const a108_0x5bcc=['emoji','About','badgeValue','resolveGuildMember','nextLevel','experience','currentLevel','computeExperience','gamification','Level','getString','Location','fetchBadges','backdrop','multiplier','exports','length','exec','return\x20/\x22\x20+\x20this\x20+\x20\x22/','profile','join','../../models/Member','Rank','isPublicBastion','color','\x20-\x20','location','document','displayAvatarURL','compile','../../utils/gamification','apply','author','It\x20allows\x20you\x20to\x20see\x20your\x20(or\x20any\x20of\x20the\x20server\x20member\x27s)\x20Bastion\x20Profile.','round','test','catch','errors','findById','Karma','Constants','client','default','Experience','karma','findOne','author.discord.id','find','balance','channel','Command','cakeDay','send','\x20/\x20','memberNotFound','then','language','getConstant','level','locale','../../utils/constants','DEFAUL_LEVELUP_MULTIPLIER','user','info','Oh,\x20hey!\x20Here\x27s\x20my\x20developer!','profile\x20USER','guild','Progress\x20-\x20','resolveBadges','constructor','Bastion\x20Profile','Cake\x20Day','map','resolver'];(function(_0x36c5c2,_0x5bcceb){const _0x54aaab=function(_0x4526f7){while(--_0x4526f7){_0x36c5c2['push'](_0x36c5c2['shift']());}};const _0x4fd742=function(){const _0x1d0d51={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x1908d5,_0x2d5797,_0x5aea16,_0x26cd8e){_0x26cd8e=_0x26cd8e||{};let _0x5cbf13=_0x2d5797+'='+_0x5aea16;let _0x8257dd=0x0;for(let _0x588952=0x0,_0x57853e=_0x1908d5['length'];_0x588952<_0x57853e;_0x588952++){const _0x84de7a=_0x1908d5[_0x588952];_0x5cbf13+=';\x20'+_0x84de7a;const _0x3a9e47=_0x1908d5[_0x84de7a];_0x1908d5['push'](_0x3a9e47);_0x57853e=_0x1908d5['length'];if(_0x3a9e47!==!![]){_0x5cbf13+='='+_0x3a9e47;}}_0x26cd8e['cookie']=_0x5cbf13;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5bf830,_0x3adb9a){_0x5bf830=_0x5bf830||function(_0x2112a6){return _0x2112a6;};const _0x3c1dc2=_0x5bf830(new RegExp('(?:^|;\x20)'+_0x3adb9a['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x39a3eb=function(_0xb89e24,_0x4816a8){_0xb89e24(++_0x4816a8);};_0x39a3eb(_0x54aaab,_0x5bcceb);return _0x3c1dc2?decodeURIComponent(_0x3c1dc2[0x1]):undefined;}};const _0x2e996a=function(){const _0x103720=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x103720['test'](_0x1d0d51['removeCookie']['toString']());};_0x1d0d51['updateCookie']=_0x2e996a;let _0x3bdc37='';const _0x37eab3=_0x1d0d51['updateCookie']();if(!_0x37eab3){_0x1d0d51['setCookie'](['*'],'counter',0x1);}else if(_0x37eab3){_0x3bdc37=_0x1d0d51['getCookie'](null,'counter');}else{_0x1d0d51['removeCookie']();}};_0x4fd742();}(a108_0x5bcc,0x14a));const a108_0x54aa=function(_0x36c5c2,_0x5bcceb){_0x36c5c2=_0x36c5c2-0x0;let _0x54aaab=a108_0x5bcc[_0x36c5c2];return _0x54aaab;};const a108_0x1d0d51=function(){let _0x425ad6=!![];return function(_0x31b21a,_0x21ac90){const _0x395347=_0x425ad6?function(){if(_0x21ac90){const _0x2eec6b=_0x21ac90[a108_0x54aa('0x47')](_0x31b21a,arguments);_0x21ac90=null;return _0x2eec6b;}}:function(){};_0x425ad6=![];return _0x395347;};}();const a108_0x4526f7=a108_0x1d0d51(this,function(){const _0x526576=function(){const _0x3fecbc=_0x526576[a108_0x54aa('0x23')](a108_0x54aa('0x3a'))()[a108_0x54aa('0x45')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x3fecbc[a108_0x54aa('0x1')](a108_0x4526f7);};return _0x526576();});a108_0x4526f7();'use strict';const tesseract_1=require('@bastion/tesseract');const Member_1=require(a108_0x54aa('0x3d'));const User_1=require('../../models/User');const badges=require('../../utils/badges');const constants=require(a108_0x54aa('0x1a'));const gamification=require(a108_0x54aa('0x46'));const progress_1=require('../../utils/progress');module[a108_0x54aa('0x37')]=class ProfileCommand extends tesseract_1[a108_0x54aa('0x10')]{constructor(){super(a108_0x54aa('0x3b'),{'description':a108_0x54aa('0x49'),'triggers':[],'arguments':{},'scope':a108_0x54aa('0x20'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[],'syntax':['profile',a108_0x54aa('0x1f')]});this[a108_0x54aa('0x39')]=async(_0x335bfe,_0xa28571)=>{const _0x1355b2=_0xa28571['_'][a108_0x54aa('0x38')]?_0xa28571['_'][0x0]:_0x335bfe[a108_0x54aa('0x48')]['id'];const _0x3b03fd=_0x1355b2===_0x335bfe['author']['id']?_0x335bfe['member']:this[a108_0x54aa('0x7')][a108_0x54aa('0x27')][a108_0x54aa('0x2b')](_0x335bfe[a108_0x54aa('0x20')],_0x1355b2);if(!_0x3b03fd)throw new Error(this[a108_0x54aa('0x7')][a108_0x54aa('0x19')][a108_0x54aa('0x32')](_0x335bfe[a108_0x54aa('0x20')][a108_0x54aa('0x43')][a108_0x54aa('0x16')],a108_0x54aa('0x3'),a108_0x54aa('0x14')));const _0x32e5fb=_0x1355b2===_0x335bfe[a108_0x54aa('0x48')]['id']?_0x335bfe[a108_0x54aa('0x48')][a108_0x54aa('0x43')]:await User_1['default'][a108_0x54aa('0x4')](_0x1355b2);const _0x54ed76=_0x1355b2===_0x335bfe[a108_0x54aa('0x48')]['id']?_0x3b03fd['document']:await Member_1[a108_0x54aa('0x8')][a108_0x54aa('0xb')]({'user':_0x1355b2,'guild':_0x335bfe[a108_0x54aa('0x20')]['id']});if(!_0x32e5fb||!_0x54ed76)throw new Error(this[a108_0x54aa('0x7')]['locale'][a108_0x54aa('0x32')](_0x335bfe[a108_0x54aa('0x20')][a108_0x54aa('0x43')]['language'],a108_0x54aa('0x3'),'profileNotFound'));const _0x48bc50=await Member_1['default'][a108_0x54aa('0xd')]({'guild':_0x335bfe[a108_0x54aa('0x20')]['id']},null,{'sort':{'level':-0x1,'experience':-0x1,'karma':-0x1,'balance':-0x1}})['countDocuments']({'$or':[{'level':{'$gt':_0x54ed76[a108_0x54aa('0x18')]}},{'level':_0x54ed76['level'],'experience':{'$gt':_0x54ed76[a108_0x54aa('0x2d')]}},{'level':_0x54ed76[a108_0x54aa('0x18')],'experience':_0x54ed76[a108_0x54aa('0x2d')],'karma':{'$gt':_0x54ed76[a108_0x54aa('0xa')]}},{'level':_0x54ed76[a108_0x54aa('0x18')],'experience':_0x54ed76[a108_0x54aa('0x2d')],'karma':_0x54ed76[a108_0x54aa('0xa')],'balance':{'$gt':_0x54ed76[a108_0x54aa('0xe')]}}]});const _0x5b7847={'currentLevel':gamification[a108_0x54aa('0x2f')](_0x54ed76[a108_0x54aa('0x18')],_0x335bfe[a108_0x54aa('0x20')][a108_0x54aa('0x43')][a108_0x54aa('0x30')]?_0x335bfe['guild'][a108_0x54aa('0x43')][a108_0x54aa('0x30')][a108_0x54aa('0x36')]:gamification[a108_0x54aa('0x1b')]),'nextLevel':gamification[a108_0x54aa('0x2f')](_0x54ed76['level']+0x1,_0x335bfe[a108_0x54aa('0x20')]['document'][a108_0x54aa('0x30')]?_0x335bfe[a108_0x54aa('0x20')][a108_0x54aa('0x43')][a108_0x54aa('0x30')][a108_0x54aa('0x36')]:gamification[a108_0x54aa('0x1b')])};const _0x445bdb={'currentLevel':_0x54ed76['experience']-_0x5b7847['currentLevel'],'nextLevel':_0x5b7847[a108_0x54aa('0x2c')]-_0x5b7847[a108_0x54aa('0x2e')]};const _0x426835=_0x445bdb['currentLevel']/_0x445bdb[a108_0x54aa('0x2c')]*0x64;const _0xd9b110=constants[a108_0x54aa('0x3f')](this[a108_0x54aa('0x7')]['user'])&&await badges[a108_0x54aa('0x34')](_0x3b03fd['id'])[a108_0x54aa('0x15')](_0x2fb4bb=>_0x2fb4bb['json']())[a108_0x54aa('0x2')](()=>{});_0x335bfe[a108_0x54aa('0xf')][a108_0x54aa('0x12')]({'embed':{'color':_0x32e5fb[a108_0x54aa('0x40')]||tesseract_1[a108_0x54aa('0x6')]['COLORS']['IRIS'],'author':{'name':_0x3b03fd[a108_0x54aa('0x1c')]['tag']},'title':a108_0x54aa('0x24'),'description':(_0xd9b110&&a108_0x54aa('0x2a')in _0xd9b110?badges[a108_0x54aa('0x22')](_0xd9b110[a108_0x54aa('0x2a')]):[])[a108_0x54aa('0x26')](_0x1bc171=>_0x1bc171[a108_0x54aa('0x28')])[a108_0x54aa('0x3c')]('\x20'),'fields':[{'name':a108_0x54aa('0x29'),'value':_0x32e5fb[a108_0x54aa('0x1d')]||'-'},{'name':a108_0x54aa('0x3e'),'value':_0x48bc50+0x1,'inline':!![]},{'name':a108_0x54aa('0x31'),'value':_0x54ed76[a108_0x54aa('0x18')],'inline':!![]},{'name':a108_0x54aa('0x9'),'value':_0x54ed76[a108_0x54aa('0x2d')],'inline':!![]},{'name':a108_0x54aa('0x5'),'value':_0x54ed76['karma'],'inline':!![]},{'name':'Bastion\x20Coins','value':_0x54ed76[a108_0x54aa('0xe')],'inline':!![]},{'name':a108_0x54aa('0x21')+_0x445bdb[a108_0x54aa('0x2e')]+a108_0x54aa('0x13')+_0x445bdb[a108_0x54aa('0x2c')]+a108_0x54aa('0x41')+Math[a108_0x54aa('0x0')](_0x426835)+'%','value':'`'+progress_1[a108_0x54aa('0x8')](_0x426835,0x23)+'`'},{'name':a108_0x54aa('0x25'),'value':_0x32e5fb[a108_0x54aa('0x11')]?_0x32e5fb[a108_0x54aa('0x11')]['toDateString']():'-','inline':!![]},{'name':a108_0x54aa('0x33'),'value':_0x32e5fb[a108_0x54aa('0x42')]||'-','inline':!![]}],'thumbnail':{'url':_0x3b03fd['user'][a108_0x54aa('0x44')]({'dynamic':!![],'size':0x200})},'image':{'url':_0x32e5fb[a108_0x54aa('0x35')]},'footer':{'text':_0x3b03fd['id']===this[a108_0x54aa('0x7')][a108_0x54aa('0x19')][a108_0x54aa('0x17')](a108_0x54aa('0xc'))?a108_0x54aa('0x1e'):''}}})[a108_0x54aa('0x2')](()=>{});};}};
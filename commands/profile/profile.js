const a117_0x4a9b=['multiplier','exports','Karma','profile','constructor','../../models/Member','json','toDateString','errors','location','../../utils/constants','experience','\x20/\x20','Experience','cakeDay','Rank','member','../../utils/badges','Cake\x20Day','Oh,\x20hey!\x20Here\x27s\x20my\x20developer!','backdrop','gamification','level','It\x20allows\x20you\x20to\x20see\x20your\x20(or\x20any\x20of\x20the\x20server\x20member\x27s)\x20Bastion\x20Profile.','karma','Level','nextLevel','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','Location','computeExperience','guild','COLORS','tag','memberNotFound','user','DEFAUL_LEVELUP_MULTIPLIER','exec','profile\x20USER','balance','findById','displayAvatarURL','channel','find','IRIS','getConstant','author','locale','isPublicBastion','default','../../models/User','author.discord.id','currentLevel','findOne','test','Bastion\x20Profile','../../utils/progress','color','resolveGuildMember','fetchBadges','then','Command','getString','badgeValue','client','resolver','document'];(function(_0x34ea66,_0x4a9b92){const _0x4692da=function(_0x212f9d){while(--_0x212f9d){_0x34ea66['push'](_0x34ea66['shift']());}},_0x5e0e13=function(){const _0x2ffcf9={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x46204b,_0xb12327,_0x4df64a,_0x6d274c){_0x6d274c=_0x6d274c||{};let _0x4f7f28=_0xb12327+'='+_0x4df64a,_0x5f3a38=0x0;for(let _0xf1b8ab=0x0,_0x56dc2e=_0x46204b['length'];_0xf1b8ab<_0x56dc2e;_0xf1b8ab++){const _0x4ae2f3=_0x46204b[_0xf1b8ab];_0x4f7f28+=';\x20'+_0x4ae2f3;const _0xb0c1e5=_0x46204b[_0x4ae2f3];_0x46204b['push'](_0xb0c1e5),_0x56dc2e=_0x46204b['length'],_0xb0c1e5!==!![]&&(_0x4f7f28+='='+_0xb0c1e5);}_0x6d274c['cookie']=_0x4f7f28;},'removeCookie':function(){return'dev';},'getCookie':function(_0x375444,_0x1c950c){_0x375444=_0x375444||function(_0x2acd2e){return _0x2acd2e;};const _0x19403c=_0x375444(new RegExp('(?:^|;\x20)'+_0x1c950c['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x9ffb0c=function(_0x418885,_0x22857e){_0x418885(++_0x22857e);};return _0x9ffb0c(_0x4692da,_0x4a9b92),_0x19403c?decodeURIComponent(_0x19403c[0x1]):undefined;}},_0x477225=function(){const _0x4a4a44=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4a4a44['test'](_0x2ffcf9['removeCookie']['toString']());};_0x2ffcf9['updateCookie']=_0x477225;let _0x364337='';const _0x7d6ac4=_0x2ffcf9['updateCookie']();if(!_0x7d6ac4)_0x2ffcf9['setCookie'](['*'],'counter',0x1);else _0x7d6ac4?_0x364337=_0x2ffcf9['getCookie'](null,'counter'):_0x2ffcf9['removeCookie']();};_0x5e0e13();}(a117_0x4a9b,0x142));const a117_0x4692=function(_0x34ea66,_0x4a9b92){_0x34ea66=_0x34ea66-0x0;let _0x4692da=a117_0x4a9b[_0x34ea66];return _0x4692da;};const a117_0x2ffcf9=function(){let _0x364337=!![];return function(_0x7d6ac4,_0x46204b){const _0xb12327=_0x364337?function(){if(_0x46204b){const _0x4df64a=_0x46204b['apply'](_0x7d6ac4,arguments);return _0x46204b=null,_0x4df64a;}}:function(){};return _0x364337=![],_0xb12327;};}(),a117_0x212f9d=a117_0x2ffcf9(this,function(){const _0x6d274c=function(){const _0x4f7f28=_0x6d274c[a117_0x4692('0xc')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a117_0x4692('0xc')](a117_0x4692('0x23'));return!_0x4f7f28[a117_0x4692('0x3d')](a117_0x212f9d);};return _0x6d274c();});a117_0x212f9d();'use strict';const tesseract_1=require('@bastion/tesseract'),Member_1=require(a117_0x4692('0xd')),User_1=require(a117_0x4692('0x39')),badges=require(a117_0x4692('0x19')),constants=require(a117_0x4692('0x12')),gamification=require('../../utils/gamification'),progress_1=require(a117_0x4692('0x3f'));module[a117_0x4692('0x9')]=class ProfileCommand extends tesseract_1[a117_0x4692('0x2')]{constructor(){super('profile',{'description':a117_0x4692('0x1f'),'triggers':[],'arguments':{},'scope':a117_0x4692('0x26'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[],'syntax':[a117_0x4692('0xb'),a117_0x4692('0x2d')]}),this[a117_0x4692('0x2c')]=async(_0x5f3a38,_0xf1b8ab)=>{const _0x56dc2e=_0xf1b8ab['_']['length']?_0xf1b8ab['_'][0x0]:_0x5f3a38['author']['id'],_0x4ae2f3=_0x56dc2e===_0x5f3a38[a117_0x4692('0x35')]['id']?_0x5f3a38[a117_0x4692('0x18')]:this[a117_0x4692('0x5')][a117_0x4692('0x6')][a117_0x4692('0x41')](_0x5f3a38[a117_0x4692('0x26')],_0x56dc2e);if(!_0x4ae2f3)throw new Error(this[a117_0x4692('0x5')]['locale']['getString'](_0x5f3a38[a117_0x4692('0x26')][a117_0x4692('0x7')]['language'],a117_0x4692('0x10'),a117_0x4692('0x29')));const _0xb0c1e5=_0x56dc2e===_0x5f3a38[a117_0x4692('0x35')]['id']?_0x5f3a38['author'][a117_0x4692('0x7')]:await User_1[a117_0x4692('0x38')][a117_0x4692('0x2f')](_0x56dc2e),_0x375444=_0x56dc2e===_0x5f3a38[a117_0x4692('0x35')]['id']?_0x4ae2f3[a117_0x4692('0x7')]:await Member_1[a117_0x4692('0x38')][a117_0x4692('0x3c')]({'user':_0x56dc2e,'guild':_0x5f3a38[a117_0x4692('0x26')]['id']});if(!_0xb0c1e5||!_0x375444)throw new Error(this[a117_0x4692('0x5')][a117_0x4692('0x36')][a117_0x4692('0x3')](_0x5f3a38['guild'][a117_0x4692('0x7')]['language'],'errors','profileNotFound',_0x4ae2f3['user'][a117_0x4692('0x28')]));const _0x1c950c=await Member_1[a117_0x4692('0x38')][a117_0x4692('0x32')]({'guild':_0x5f3a38[a117_0x4692('0x26')]['id']},null,{'sort':{'level':-0x1,'experience':-0x1,'karma':-0x1,'balance':-0x1}})['countDocuments']({'$or':[{'level':{'$gt':_0x375444[a117_0x4692('0x1e')]}},{'level':_0x375444['level'],'experience':{'$gt':_0x375444['experience']}},{'level':_0x375444['level'],'experience':_0x375444[a117_0x4692('0x13')],'karma':{'$gt':_0x375444[a117_0x4692('0x20')]}},{'level':_0x375444[a117_0x4692('0x1e')],'experience':_0x375444[a117_0x4692('0x13')],'karma':_0x375444['karma'],'balance':{'$gt':_0x375444['balance']}}]}),_0x19403c={'currentLevel':gamification[a117_0x4692('0x25')](_0x375444['level'],_0x5f3a38[a117_0x4692('0x26')][a117_0x4692('0x7')][a117_0x4692('0x1d')]?_0x5f3a38[a117_0x4692('0x26')][a117_0x4692('0x7')][a117_0x4692('0x1d')]['multiplier']:gamification[a117_0x4692('0x2b')]),'nextLevel':gamification['computeExperience'](_0x375444['level']+0x1,_0x5f3a38[a117_0x4692('0x26')][a117_0x4692('0x7')][a117_0x4692('0x1d')]?_0x5f3a38[a117_0x4692('0x26')]['document'][a117_0x4692('0x1d')][a117_0x4692('0x8')]:gamification[a117_0x4692('0x2b')])},_0x9ffb0c={'currentLevel':_0x375444[a117_0x4692('0x13')]-_0x19403c[a117_0x4692('0x3b')],'nextLevel':_0x19403c[a117_0x4692('0x22')]-_0x19403c[a117_0x4692('0x3b')]},_0x2acd2e=_0x9ffb0c[a117_0x4692('0x3b')]/_0x9ffb0c[a117_0x4692('0x22')]*0x64,_0x418885=constants[a117_0x4692('0x37')](this[a117_0x4692('0x5')][a117_0x4692('0x2a')])&&await badges[a117_0x4692('0x0')](_0x4ae2f3['id'])[a117_0x4692('0x1')](_0x22857e=>_0x22857e[a117_0x4692('0xe')]())['catch'](()=>{});_0x5f3a38[a117_0x4692('0x31')]['send']({'embed':{'color':_0xb0c1e5[a117_0x4692('0x40')]||tesseract_1['Constants'][a117_0x4692('0x27')][a117_0x4692('0x33')],'author':{'name':_0x4ae2f3[a117_0x4692('0x2a')]['tag']},'title':a117_0x4692('0x3e'),'description':(_0x418885&&'badgeValue'in _0x418885?badges['resolveBadges'](_0x418885[a117_0x4692('0x4')]):[])['map'](_0x4a4a44=>_0x4a4a44['emoji'])['join']('\x20'),'fields':[{'name':'About','value':_0xb0c1e5['info']||'-'},{'name':a117_0x4692('0x17'),'value':_0x1c950c+0x1,'inline':!![]},{'name':a117_0x4692('0x21'),'value':_0x375444[a117_0x4692('0x1e')],'inline':!![]},{'name':a117_0x4692('0x15'),'value':_0x375444[a117_0x4692('0x13')],'inline':!![]},{'name':a117_0x4692('0xa'),'value':_0x375444[a117_0x4692('0x20')],'inline':!![]},{'name':'Bastion\x20Coins','value':_0x375444[a117_0x4692('0x2e')],'inline':!![]},{'name':'Progress\x20-\x20'+_0x9ffb0c[a117_0x4692('0x3b')]+a117_0x4692('0x14')+_0x9ffb0c['nextLevel']+'\x20-\x20'+Math['round'](_0x2acd2e)+'%','value':'`'+progress_1[a117_0x4692('0x38')](_0x2acd2e,0x23)+'`'},{'name':a117_0x4692('0x1a'),'value':_0xb0c1e5[a117_0x4692('0x16')]?_0xb0c1e5[a117_0x4692('0x16')][a117_0x4692('0xf')]():'-','inline':!![]},{'name':a117_0x4692('0x24'),'value':_0xb0c1e5[a117_0x4692('0x11')]||'-','inline':!![]}],'thumbnail':{'url':_0x4ae2f3[a117_0x4692('0x2a')][a117_0x4692('0x30')]({'dynamic':!![],'size':0x200})},'image':{'url':_0xb0c1e5[a117_0x4692('0x1c')]},'footer':{'text':_0x4ae2f3['id']===this[a117_0x4692('0x5')]['locale'][a117_0x4692('0x34')](a117_0x4692('0x3a'))?a117_0x4692('0x1b'):''}}})['catch'](()=>{});};}};
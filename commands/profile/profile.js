const a328_0x3a4b=['findOne','compile','find','constructor','Rank','isPublicBastion','document','experience','length','findById','emoji','default','resolveGuildMember','../../utils/gamification','Bastion\x20Coins','Karma','multiplier','../../models/Member','test','client','Level','nextLevel','cakeDay','gamification','locale','info','memberNotFound','profile','author.discord.id','tag','currentLevel','backdrop','Oh,\x20hey!\x20Here\x27s\x20my\x20developer!','displayAvatarURL','color','computeExperience','../../utils/progress','guild','balance','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','getConstant','language','join','map','resolveBadges','IRIS','send','json','return\x20/\x22\x20+\x20this\x20+\x20\x22/','level','location','../../utils/constants','COLORS','../../models/User','Cake\x20Day','exports','Command','catch','DEFAUL_LEVELUP_MULTIPLIER','author','Experience','profileNotFound','user','Constants','badgeValue','getString','fetchBadges','resolver','then','toDateString','\x20/\x20','karma'];(function(_0x14033f,_0x3a4b8d){const _0xe3fe58=function(_0xf1046f){while(--_0xf1046f){_0x14033f['push'](_0x14033f['shift']());}};const _0x33ddb4=function(){const _0x42656e={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3801d5,_0x6833d8,_0x17ca67,_0xf9ed76){_0xf9ed76=_0xf9ed76||{};let _0x5aea70=_0x6833d8+'='+_0x17ca67;let _0x40cee9=0x0;for(let _0x411245=0x0,_0x5241af=_0x3801d5['length'];_0x411245<_0x5241af;_0x411245++){const _0x2c9f43=_0x3801d5[_0x411245];_0x5aea70+=';\x20'+_0x2c9f43;const _0x2ec2e9=_0x3801d5[_0x2c9f43];_0x3801d5['push'](_0x2ec2e9);_0x5241af=_0x3801d5['length'];if(_0x2ec2e9!==!![]){_0x5aea70+='='+_0x2ec2e9;}}_0xf9ed76['cookie']=_0x5aea70;},'removeCookie':function(){return'dev';},'getCookie':function(_0x79a974,_0xa7089d){_0x79a974=_0x79a974||function(_0x4cbe9a){return _0x4cbe9a;};const _0x14f2cb=_0x79a974(new RegExp('(?:^|;\x20)'+_0xa7089d['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x5c35f1=function(_0xfc2084,_0x2a8273){_0xfc2084(++_0x2a8273);};_0x5c35f1(_0xe3fe58,_0x3a4b8d);return _0x14f2cb?decodeURIComponent(_0x14f2cb[0x1]):undefined;}};const _0x19bfb5=function(){const _0x47fcb7=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x47fcb7['test'](_0x42656e['removeCookie']['toString']());};_0x42656e['updateCookie']=_0x19bfb5;let _0x547bbb='';const _0x3e7d06=_0x42656e['updateCookie']();if(!_0x3e7d06){_0x42656e['setCookie'](['*'],'counter',0x1);}else if(_0x3e7d06){_0x547bbb=_0x42656e['getCookie'](null,'counter');}else{_0x42656e['removeCookie']();}};_0x33ddb4();}(a328_0x3a4b,0xb8));const a328_0xe3fe=function(_0x14033f,_0x3a4b8d){_0x14033f=_0x14033f-0x0;let _0xe3fe58=a328_0x3a4b[_0x14033f];return _0xe3fe58;};const a328_0x42656e=function(){let _0x67fc11=!![];return function(_0xb1cd5a,_0x5e9cf4){const _0x161d50=_0x67fc11?function(){if(_0x5e9cf4){const _0xb11538=_0x5e9cf4['apply'](_0xb1cd5a,arguments);_0x5e9cf4=null;return _0xb11538;}}:function(){};_0x67fc11=![];return _0x161d50;};}();const a328_0xf1046f=a328_0x42656e(this,function(){const _0x51d3fc=function(){const _0x2c8a77=_0x51d3fc[a328_0xe3fe('0x23')](a328_0xe3fe('0x8'))()[a328_0xe3fe('0x21')](a328_0xe3fe('0x47'));return!_0x2c8a77[a328_0xe3fe('0x32')](a328_0xf1046f);};return _0x51d3fc();});a328_0xf1046f();'use strict';const tesseract_1=require('@bastion/tesseract');const Member_1=require(a328_0xe3fe('0x31'));const User_1=require(a328_0xe3fe('0xd'));const badges=require('../../utils/badges');const constants=require(a328_0xe3fe('0xb'));const gamification=require(a328_0xe3fe('0x2d'));const progress_1=require(a328_0xe3fe('0x44'));module[a328_0xe3fe('0xf')]=class ProfileCommand extends tesseract_1[a328_0xe3fe('0x10')]{constructor(){super('profile',{'description':'It\x20allows\x20you\x20to\x20see\x20your\x20(or\x20any\x20of\x20the\x20server\x20member\x27s)\x20Bastion\x20Profile.','triggers':[],'arguments':{},'scope':a328_0xe3fe('0x45'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[],'syntax':[a328_0xe3fe('0x3b'),'profile\x20USER']});this['exec']=async(_0xc19a32,_0x3ce26c)=>{const _0x39cbe3=_0x3ce26c['_'][a328_0xe3fe('0x28')]?_0x3ce26c['_'][0x0]:_0xc19a32[a328_0xe3fe('0x13')]['id'];const _0x1e7e9f=_0x39cbe3===_0xc19a32[a328_0xe3fe('0x13')]['id']?_0xc19a32['member']:this[a328_0xe3fe('0x33')][a328_0xe3fe('0x1b')][a328_0xe3fe('0x2c')](_0xc19a32[a328_0xe3fe('0x45')],_0x39cbe3);if(!_0x1e7e9f)throw new Error(this[a328_0xe3fe('0x33')][a328_0xe3fe('0x38')][a328_0xe3fe('0x19')](_0xc19a32[a328_0xe3fe('0x45')][a328_0xe3fe('0x26')][a328_0xe3fe('0x1')],'errors',a328_0xe3fe('0x3a')));const _0x4515e0=_0x39cbe3===_0xc19a32[a328_0xe3fe('0x13')]['id']?_0xc19a32[a328_0xe3fe('0x13')]['document']:await User_1[a328_0xe3fe('0x2b')][a328_0xe3fe('0x29')](_0x39cbe3);const _0x127bbd=_0x39cbe3===_0xc19a32[a328_0xe3fe('0x13')]['id']?_0x1e7e9f[a328_0xe3fe('0x26')]:await Member_1[a328_0xe3fe('0x2b')][a328_0xe3fe('0x20')]({'user':_0x39cbe3,'guild':_0xc19a32['guild']['id']});if(!_0x4515e0||!_0x127bbd)throw new Error(this[a328_0xe3fe('0x33')][a328_0xe3fe('0x38')][a328_0xe3fe('0x19')](_0xc19a32[a328_0xe3fe('0x45')][a328_0xe3fe('0x26')][a328_0xe3fe('0x1')],'errors',a328_0xe3fe('0x15')));const _0x332d7b=await Member_1[a328_0xe3fe('0x2b')][a328_0xe3fe('0x22')]({'guild':_0xc19a32['guild']['id']},null,{'sort':{'level':-0x1,'experience':-0x1,'karma':-0x1,'balance':-0x1}})['countDocuments']({'$or':[{'level':{'$gt':_0x127bbd[a328_0xe3fe('0x9')]}},{'level':_0x127bbd[a328_0xe3fe('0x9')],'experience':{'$gt':_0x127bbd[a328_0xe3fe('0x27')]}},{'level':_0x127bbd[a328_0xe3fe('0x9')],'experience':_0x127bbd['experience'],'karma':{'$gt':_0x127bbd['karma']}},{'level':_0x127bbd[a328_0xe3fe('0x9')],'experience':_0x127bbd['experience'],'karma':_0x127bbd['karma'],'balance':{'$gt':_0x127bbd[a328_0xe3fe('0x46')]}}]});const _0x3e43a5={'currentLevel':gamification[a328_0xe3fe('0x43')](_0x127bbd[a328_0xe3fe('0x9')],_0xc19a32[a328_0xe3fe('0x45')][a328_0xe3fe('0x26')][a328_0xe3fe('0x37')]?_0xc19a32['guild'][a328_0xe3fe('0x26')][a328_0xe3fe('0x37')]['multiplier']:gamification[a328_0xe3fe('0x12')]),'nextLevel':gamification[a328_0xe3fe('0x43')](_0x127bbd[a328_0xe3fe('0x9')]+0x1,_0xc19a32[a328_0xe3fe('0x45')][a328_0xe3fe('0x26')]['gamification']?_0xc19a32[a328_0xe3fe('0x45')]['document'][a328_0xe3fe('0x37')][a328_0xe3fe('0x30')]:gamification['DEFAUL_LEVELUP_MULTIPLIER'])};const _0x48d17d={'currentLevel':_0x127bbd[a328_0xe3fe('0x27')]-_0x3e43a5['currentLevel'],'nextLevel':_0x3e43a5[a328_0xe3fe('0x35')]-_0x3e43a5[a328_0xe3fe('0x3e')]};const _0x3b2edb=_0x48d17d['currentLevel']/_0x48d17d[a328_0xe3fe('0x35')]*0x64;const _0x5ebe2e=constants[a328_0xe3fe('0x25')](this[a328_0xe3fe('0x33')][a328_0xe3fe('0x16')])&&await badges[a328_0xe3fe('0x1a')](_0x1e7e9f['id'])[a328_0xe3fe('0x1c')](_0x47985e=>_0x47985e[a328_0xe3fe('0x7')]())[a328_0xe3fe('0x11')](()=>{});_0xc19a32['channel'][a328_0xe3fe('0x6')]({'embed':{'color':_0x4515e0[a328_0xe3fe('0x42')]||tesseract_1[a328_0xe3fe('0x17')][a328_0xe3fe('0xc')][a328_0xe3fe('0x5')],'author':{'name':_0x1e7e9f['user'][a328_0xe3fe('0x3d')]},'title':'Bastion\x20Profile','description':(_0x5ebe2e&&a328_0xe3fe('0x18')in _0x5ebe2e?badges[a328_0xe3fe('0x4')](_0x5ebe2e[a328_0xe3fe('0x18')]):[])[a328_0xe3fe('0x3')](_0x3e1ab3=>_0x3e1ab3[a328_0xe3fe('0x2a')])[a328_0xe3fe('0x2')]('\x20'),'fields':[{'name':'About','value':_0x4515e0[a328_0xe3fe('0x39')]||'-'},{'name':a328_0xe3fe('0x24'),'value':_0x332d7b+0x1,'inline':!![]},{'name':a328_0xe3fe('0x34'),'value':_0x127bbd['level'],'inline':!![]},{'name':a328_0xe3fe('0x14'),'value':_0x127bbd[a328_0xe3fe('0x27')],'inline':!![]},{'name':a328_0xe3fe('0x2f'),'value':_0x127bbd[a328_0xe3fe('0x1f')],'inline':!![]},{'name':a328_0xe3fe('0x2e'),'value':_0x127bbd[a328_0xe3fe('0x46')],'inline':!![]},{'name':'Progress\x20-\x20'+_0x48d17d[a328_0xe3fe('0x3e')]+a328_0xe3fe('0x1e')+_0x48d17d[a328_0xe3fe('0x35')]+'\x20-\x20'+Math['round'](_0x3b2edb)+'%','value':'`'+progress_1[a328_0xe3fe('0x2b')](_0x3b2edb,0x23)+'`'},{'name':a328_0xe3fe('0xe'),'value':_0x4515e0[a328_0xe3fe('0x36')]?_0x4515e0[a328_0xe3fe('0x36')][a328_0xe3fe('0x1d')]():'-','inline':!![]},{'name':'Location','value':_0x4515e0[a328_0xe3fe('0xa')]||'-','inline':!![]}],'thumbnail':{'url':_0x1e7e9f[a328_0xe3fe('0x16')][a328_0xe3fe('0x41')]({'dynamic':!![],'size':0x200})},'image':{'url':_0x4515e0[a328_0xe3fe('0x3f')]},'footer':{'text':_0x1e7e9f['id']===this[a328_0xe3fe('0x33')][a328_0xe3fe('0x38')][a328_0xe3fe('0x0')](a328_0xe3fe('0x3c'))?a328_0xe3fe('0x40'):''}}})[a328_0xe3fe('0x11')](()=>{});};}};
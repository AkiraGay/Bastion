const a121_0x4c64=['code','exports','cache','test','add','client','It\x20allows\x20you\x20to\x20see\x20your\x20referral\x20invite\x20that\x20you\x20can\x20use\x20to\x20invite\x20people\x20to\x20the\x20server\x20and\x20increase\x20your\x20referral\x20points.\x20It\x20can\x20also\x20be\x20used\x20to\x20claim\x20your\x20referral\x20rewards\x20set\x20by\x20the\x20server\x20managers.','send','BASTION_ERROR_TYPE','toLocaleString','apply','locale','tag','Command','COLORS','return\x20/\x22\x20+\x20this\x20+\x20\x22/','guild','language','Code','referral\x20--claim','save','length','find','channels','getString','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','roles','default','@bastion/tesseract','../../models/Role','document','noReferralRewards','member','Uses','createInvite','url','Referral\x20Reward\x20Claimed','Constants','claim','channel','author','constructor','uses','referral','Referral\x20invite\x20generated\x20for\x20','errors','ERROR','exec','findOne','IRIS','Referral\x20Invite','../../models/Member','info','get','DiscordError'];(function(_0x49aade,_0x4c645f){const _0x1b8a4f=function(_0x137ad5){while(--_0x137ad5){_0x49aade['push'](_0x49aade['shift']());}},_0x572707=function(){const _0x2d1563={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x5afb04,_0x5287e1,_0x4708e9,_0x6ac263){_0x6ac263=_0x6ac263||{};let _0x4b5f1a=_0x5287e1+'='+_0x4708e9,_0x8e7d8b=0x0;for(let _0x49c293=0x0,_0x2211c1=_0x5afb04['length'];_0x49c293<_0x2211c1;_0x49c293++){const _0x587422=_0x5afb04[_0x49c293];_0x4b5f1a+=';\x20'+_0x587422;const _0x53b18c=_0x5afb04[_0x587422];_0x5afb04['push'](_0x53b18c),_0x2211c1=_0x5afb04['length'],_0x53b18c!==!![]&&(_0x4b5f1a+='='+_0x53b18c);}_0x6ac263['cookie']=_0x4b5f1a;},'removeCookie':function(){return'dev';},'getCookie':function(_0x8e0f17,_0x3146e5){_0x8e0f17=_0x8e0f17||function(_0xd76847){return _0xd76847;};const _0x32de76=_0x8e0f17(new RegExp('(?:^|;\x20)'+_0x3146e5['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x2b96d5=function(_0x3d91b3,_0x4042dd){_0x3d91b3(++_0x4042dd);};return _0x2b96d5(_0x1b8a4f,_0x4c645f),_0x32de76?decodeURIComponent(_0x32de76[0x1]):undefined;}},_0x5bedbc=function(){const _0xd14dfe=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0xd14dfe['test'](_0x2d1563['removeCookie']['toString']());};_0x2d1563['updateCookie']=_0x5bedbc;let _0x250470='';const _0x298cc9=_0x2d1563['updateCookie']();if(!_0x298cc9)_0x2d1563['setCookie'](['*'],'counter',0x1);else _0x298cc9?_0x250470=_0x2d1563['getCookie'](null,'counter'):_0x2d1563['removeCookie']();};_0x572707();}(a121_0x4c64,0x15d));const a121_0x1b8a=function(_0x49aade,_0x4c645f){_0x49aade=_0x49aade-0x0;let _0x1b8a4f=a121_0x4c64[_0x49aade];return _0x1b8a4f;};const _0x129259=a121_0x1b8a,a121_0x2d1563=function(){let _0x250470=!![];return function(_0x298cc9,_0x5afb04){const _0x5287e1=_0x250470?function(){const _0x390224=a121_0x1b8a;if(_0x5afb04){const _0x4708e9=_0x5afb04[_0x390224('0x2e')](_0x298cc9,arguments);return _0x5afb04=null,_0x4708e9;}}:function(){};return _0x250470=![],_0x5287e1;};}(),a121_0x137ad5=a121_0x2d1563(this,function(){const _0x6ac263=function(){const _0x403ad7=a121_0x1b8a,_0x4b5f1a=_0x6ac263[_0x403ad7('0x16')](_0x403ad7('0x33'))()[_0x403ad7('0x16')](_0x403ad7('0x6'));return!_0x4b5f1a[_0x403ad7('0x27')](a121_0x137ad5);};return _0x6ac263();});a121_0x137ad5();'use strict';const tesseract_1=require(_0x129259('0x9')),Member_1=require(_0x129259('0x20')),Role_1=require(_0x129259('0xa')),errors=require('../../utils/errors');module[_0x129259('0x25')]=class ReferralCommand extends tesseract_1[_0x129259('0x31')]{constructor(){const _0x5e1d28=_0x129259;super(_0x5e1d28('0x18'),{'description':_0x5e1d28('0x2a'),'triggers':[],'arguments':{'boolean':[_0x5e1d28('0x13')]},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[],'syntax':['referral',_0x5e1d28('0x0')]}),this[_0x5e1d28('0x1c')]=async(_0x8e7d8b,_0x49c293)=>{const _0x6005c2=_0x5e1d28,_0x2211c1=await Member_1[_0x6005c2('0x8')][_0x6005c2('0x1d')]({'user':_0x8e7d8b[_0x6005c2('0x15')]['id'],'guild':_0x8e7d8b[_0x6005c2('0x34')]['id']});let _0x587422;if(_0x2211c1[_0x6005c2('0x18')]){const _0x53b18c=await _0x8e7d8b[_0x6005c2('0x34')]['fetchInvites']();_0x587422=_0x53b18c['get'](_0x2211c1[_0x6005c2('0x18')]);}if(!_0x587422){const _0x8e0f17=_0x8e7d8b[_0x6005c2('0x34')][_0x6005c2('0x4')][_0x6005c2('0x26')][_0x6005c2('0x22')](_0x8e7d8b[_0x6005c2('0x34')]['document']['referralsChannel']);if(!_0x8e0f17)throw new errors[(_0x6005c2('0x23'))](errors[_0x6005c2('0x2c')][_0x6005c2('0x1b')],this['client']['locale'][_0x6005c2('0x5')](_0x8e7d8b['guild'][_0x6005c2('0xb')]['language'],_0x6005c2('0x1a'),'noReferralsChannel'));_0x587422=await _0x8e0f17[_0x6005c2('0xf')]({'reason':_0x6005c2('0x19')+_0x8e7d8b['author'][_0x6005c2('0x30')],'temporary':![],'maxAge':0x0,'maxUses':0x0,'unique':!![]}),_0x2211c1[_0x6005c2('0x18')]=_0x587422[_0x6005c2('0x24')],await _0x2211c1[_0x6005c2('0x1')]();}if(_0x49c293[_0x6005c2('0x13')]){const _0x3146e5=await Role_1[_0x6005c2('0x8')][_0x6005c2('0x3')]({'guild':_0x8e7d8b[_0x6005c2('0x34')]['id'],'referrals':{'$lte':_0x587422['uses']}});if(!_0x3146e5[_0x6005c2('0x2')])throw new errors['DiscordError'](errors[_0x6005c2('0x2c')]['ERROR'],this[_0x6005c2('0x29')][_0x6005c2('0x2f')][_0x6005c2('0x5')](_0x8e7d8b[_0x6005c2('0x34')]['document']['language'],'errors',_0x6005c2('0xc'),_0x587422[_0x6005c2('0x17')]));await _0x8e7d8b[_0x6005c2('0xd')][_0x6005c2('0x7')][_0x6005c2('0x28')](_0x3146e5['map'](_0x32de76=>_0x32de76['id'])),await _0x8e7d8b['channel'][_0x6005c2('0x2b')]({'embed':{'color':tesseract_1[_0x6005c2('0x12')][_0x6005c2('0x32')][_0x6005c2('0x1e')],'title':_0x6005c2('0x11'),'description':this[_0x6005c2('0x29')][_0x6005c2('0x2f')]['getString'](_0x8e7d8b[_0x6005c2('0x34')][_0x6005c2('0xb')][_0x6005c2('0x35')],_0x6005c2('0x21'),'referralRewardsClaim',_0x8e7d8b['author'][_0x6005c2('0x30')],_0x587422[_0x6005c2('0x17')])}});}else await _0x8e7d8b[_0x6005c2('0x14')][_0x6005c2('0x2b')]({'embed':{'color':tesseract_1[_0x6005c2('0x12')][_0x6005c2('0x32')]['IRIS'],'title':_0x6005c2('0x1f'),'description':_0x587422[_0x6005c2('0x10')],'fields':[{'name':_0x6005c2('0x36'),'value':_0x587422[_0x6005c2('0x24')],'inline':!![]},{'name':_0x6005c2('0xe'),'value':(_0x587422[_0x6005c2('0x17')]||0x0)[_0x6005c2('0x2d')](),'inline':!![]}]}});};}};
const a120_0x4d36=['locale','It\x20allows\x20you\x20to\x20see\x20your\x20referral\x20invite\x20that\x20you\x20can\x20use\x20to\x20invite\x20people\x20to\x20the\x20server\x20and\x20increase\x20your\x20referral\x20points.\x20It\x20can\x20also\x20be\x20used\x20to\x20claim\x20your\x20referral\x20rewards\x20set\x20by\x20the\x20server\x20managers.','length','IRIS','cache','save','BASTION_ERROR_TYPE','../../models/Member','apply','member','Referral\x20Invite','guild','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','exec','Referral\x20invite\x20generated\x20for\x20','toLocaleString','add','findOne','noReferralRewards','default','roles','get','COLORS','test','../../utils/errors','channel','document','tag','author','code','Command','uses','Code','fetchInvites','constructor','return\x20/\x22\x20+\x20this\x20+\x20\x22/','channels','exports','../../models/Role','DiscordError','referral\x20--claim','url','send','find','getString','@bastion/tesseract','noReferralsChannel','referral','Uses','claim','client','ERROR','language','info','Constants','referralsChannel'];(function(_0xc2e050,_0x4d36e5){const _0x130b11=function(_0xc2c123){while(--_0xc2c123){_0xc2e050['push'](_0xc2e050['shift']());}},_0x151649=function(){const _0x157e25={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x1bbce9,_0x12b493,_0x13f376,_0x1bf33b){_0x1bf33b=_0x1bf33b||{};let _0x5318ad=_0x12b493+'='+_0x13f376,_0x18e8ba=0x0;for(let _0x4f343f=0x0,_0x312af8=_0x1bbce9['length'];_0x4f343f<_0x312af8;_0x4f343f++){const _0x191299=_0x1bbce9[_0x4f343f];_0x5318ad+=';\x20'+_0x191299;const _0x3aa983=_0x1bbce9[_0x191299];_0x1bbce9['push'](_0x3aa983),_0x312af8=_0x1bbce9['length'],_0x3aa983!==!![]&&(_0x5318ad+='='+_0x3aa983);}_0x1bf33b['cookie']=_0x5318ad;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4d1dab,_0x19cb07){_0x4d1dab=_0x4d1dab||function(_0x29e053){return _0x29e053;};const _0x75e453=_0x4d1dab(new RegExp('(?:^|;\x20)'+_0x19cb07['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x36e5c4=function(_0x2455ba,_0x55867e){_0x2455ba(++_0x55867e);};return _0x36e5c4(_0x130b11,_0x4d36e5),_0x75e453?decodeURIComponent(_0x75e453[0x1]):undefined;}},_0x593b83=function(){const _0x3535bb=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3535bb['test'](_0x157e25['removeCookie']['toString']());};_0x157e25['updateCookie']=_0x593b83;let _0x44d014='';const _0x3079a5=_0x157e25['updateCookie']();if(!_0x3079a5)_0x157e25['setCookie'](['*'],'counter',0x1);else _0x3079a5?_0x44d014=_0x157e25['getCookie'](null,'counter'):_0x157e25['removeCookie']();};_0x151649();}(a120_0x4d36,0xa1));const a120_0x130b=function(_0xc2e050,_0x4d36e5){_0xc2e050=_0xc2e050-0x0;let _0x130b11=a120_0x4d36[_0xc2e050];return _0x130b11;};const _0x16c6dc=a120_0x130b,a120_0x157e25=function(){let _0x44d014=!![];return function(_0x3079a5,_0x1bbce9){const _0x12b493=_0x44d014?function(){const _0x1d7a0d=a120_0x130b;if(_0x1bbce9){const _0x13f376=_0x1bbce9[_0x1d7a0d('0xf')](_0x3079a5,arguments);return _0x1bbce9=null,_0x13f376;}}:function(){};return _0x44d014=![],_0x12b493;};}(),a120_0xc2c123=a120_0x157e25(this,function(){const _0x1bf33b=function(){const _0x4ff53f=a120_0x130b,_0x5318ad=_0x1bf33b[_0x4ff53f('0x29')](_0x4ff53f('0x2a'))()['constructor'](_0x4ff53f('0x13'));return!_0x5318ad[_0x4ff53f('0x1e')](a120_0xc2c123);};return _0x1bf33b();});a120_0xc2c123();'use strict';const tesseract_1=require(_0x16c6dc('0x34')),Member_1=require(_0x16c6dc('0xe')),Role_1=require(_0x16c6dc('0x2d')),errors=require(_0x16c6dc('0x1f'));module[_0x16c6dc('0x2c')]=class ReferralCommand extends tesseract_1[_0x16c6dc('0x25')]{constructor(){const _0x11face=_0x16c6dc;super('referral',{'description':_0x11face('0x8'),'triggers':[],'arguments':{'boolean':[_0x11face('0x0')]},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[],'syntax':[_0x11face('0x36'),_0x11face('0x2f')]}),this[_0x11face('0x14')]=async(_0x18e8ba,_0x4f343f)=>{const _0x3b635a=_0x11face,_0x312af8=await Member_1[_0x3b635a('0x1a')][_0x3b635a('0x18')]({'user':_0x18e8ba[_0x3b635a('0x23')]['id'],'guild':_0x18e8ba['guild']['id']});let _0x191299;if(_0x312af8['referral']){const _0x3aa983=await _0x18e8ba['guild'][_0x3b635a('0x28')]();_0x191299=_0x3aa983[_0x3b635a('0x1c')](_0x312af8[_0x3b635a('0x36')]);}if(!_0x191299){const _0x4d1dab=_0x18e8ba[_0x3b635a('0x12')][_0x3b635a('0x2b')][_0x3b635a('0xb')][_0x3b635a('0x1c')](_0x18e8ba[_0x3b635a('0x12')][_0x3b635a('0x21')][_0x3b635a('0x6')]);if(!_0x4d1dab)throw new errors[(_0x3b635a('0x2e'))](errors['BASTION_ERROR_TYPE'][_0x3b635a('0x2')],this['client']['locale'][_0x3b635a('0x33')](_0x18e8ba[_0x3b635a('0x12')]['document'][_0x3b635a('0x3')],'errors',_0x3b635a('0x35')));_0x191299=await _0x4d1dab['createInvite']({'reason':_0x3b635a('0x15')+_0x18e8ba[_0x3b635a('0x23')][_0x3b635a('0x22')],'temporary':![],'maxAge':0x0,'maxUses':0x0,'unique':!![]}),_0x312af8[_0x3b635a('0x36')]=_0x191299[_0x3b635a('0x24')],await _0x312af8[_0x3b635a('0xc')]();}if(_0x4f343f[_0x3b635a('0x0')]){const _0x19cb07=await Role_1['default'][_0x3b635a('0x32')]({'guild':_0x18e8ba[_0x3b635a('0x12')]['id'],'referrals':{'$lte':_0x191299[_0x3b635a('0x26')]}});if(!_0x19cb07[_0x3b635a('0x9')])throw new errors[(_0x3b635a('0x2e'))](errors[_0x3b635a('0xd')][_0x3b635a('0x2')],this[_0x3b635a('0x1')][_0x3b635a('0x7')][_0x3b635a('0x33')](_0x18e8ba['guild'][_0x3b635a('0x21')][_0x3b635a('0x3')],'errors',_0x3b635a('0x19'),_0x191299[_0x3b635a('0x26')]));await _0x18e8ba[_0x3b635a('0x10')][_0x3b635a('0x1b')][_0x3b635a('0x17')](_0x19cb07['map'](_0x75e453=>_0x75e453['id'])),await _0x18e8ba[_0x3b635a('0x20')][_0x3b635a('0x31')]({'embed':{'color':tesseract_1[_0x3b635a('0x5')][_0x3b635a('0x1d')][_0x3b635a('0xa')],'title':'Referral\x20Reward\x20Claimed','description':this[_0x3b635a('0x1')][_0x3b635a('0x7')]['getString'](_0x18e8ba[_0x3b635a('0x12')]['document'][_0x3b635a('0x3')],_0x3b635a('0x4'),'referralRewardsClaim',_0x18e8ba[_0x3b635a('0x23')][_0x3b635a('0x22')],_0x191299[_0x3b635a('0x26')])}});}else await _0x18e8ba[_0x3b635a('0x20')][_0x3b635a('0x31')]({'embed':{'color':tesseract_1[_0x3b635a('0x5')][_0x3b635a('0x1d')]['IRIS'],'title':_0x3b635a('0x11'),'description':_0x191299[_0x3b635a('0x30')],'fields':[{'name':_0x3b635a('0x27'),'value':_0x191299[_0x3b635a('0x24')],'inline':!![]},{'name':_0x3b635a('0x37'),'value':(_0x191299[_0x3b635a('0x26')]||0x0)[_0x3b635a('0x16')](),'inline':!![]}]}});};}};
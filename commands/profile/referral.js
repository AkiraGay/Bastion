const a129_0x4edd=['COLORS','noReferralsChannel','constructor','findOne','language','add','info','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','Constants','author','../../utils/errors','Uses','find','locale','It\x20allows\x20you\x20to\x20see\x20your\x20referral\x20invite\x20that\x20you\x20can\x20use\x20to\x20invite\x20people\x20to\x20the\x20server\x20and\x20increase\x20your\x20referral\x20points.\x20It\x20can\x20also\x20be\x20used\x20to\x20claim\x20your\x20referral\x20rewards\x20set\x20by\x20the\x20server\x20managers.','code','@bastion/tesseract','errors','test','cache','exec','fetchInvites','getString','send','uses','DiscordError','member','BASTION_ERROR_TYPE','claim','toLocaleString','noReferralRewards','referralsChannel','../../models/Role','referral\x20--claim','length','Referral\x20invite\x20generated\x20for\x20','return\x20/\x22\x20+\x20this\x20+\x20\x22/','IRIS','apply','document','channels','../../models/Member','ERROR','tag','Command','exports','guild','get','channel','Referral\x20Invite','client','createInvite','map','default','save'];(function(_0x2ae8c3,_0x4edd7d){const _0x4d0159=function(_0x36577b){while(--_0x36577b){_0x2ae8c3['push'](_0x2ae8c3['shift']());}},_0xbe34fa=function(){const _0x4161c7={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x39f45a,_0x2f0ad6,_0x48f3eb,_0x9f56b3){_0x9f56b3=_0x9f56b3||{};let _0x5d9d9f=_0x2f0ad6+'='+_0x48f3eb,_0x46624f=0x0;for(let _0x2fac15=0x0,_0x3593c2=_0x39f45a['length'];_0x2fac15<_0x3593c2;_0x2fac15++){const _0x406f1f=_0x39f45a[_0x2fac15];_0x5d9d9f+=';\x20'+_0x406f1f;const _0x28d13d=_0x39f45a[_0x406f1f];_0x39f45a['push'](_0x28d13d),_0x3593c2=_0x39f45a['length'],_0x28d13d!==!![]&&(_0x5d9d9f+='='+_0x28d13d);}_0x9f56b3['cookie']=_0x5d9d9f;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2071f4,_0x16d7c0){_0x2071f4=_0x2071f4||function(_0x1e02bc){return _0x1e02bc;};const _0x1d11cc=_0x2071f4(new RegExp('(?:^|;\x20)'+_0x16d7c0['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x1c7dc7=function(_0x59e6fe,_0x19aabe){_0x59e6fe(++_0x19aabe);};return _0x1c7dc7(_0x4d0159,_0x4edd7d),_0x1d11cc?decodeURIComponent(_0x1d11cc[0x1]):undefined;}},_0x47123f=function(){const _0x5b7441=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x5b7441['test'](_0x4161c7['removeCookie']['toString']());};_0x4161c7['updateCookie']=_0x47123f;let _0x5eba04='';const _0x2da37c=_0x4161c7['updateCookie']();if(!_0x2da37c)_0x4161c7['setCookie'](['*'],'counter',0x1);else _0x2da37c?_0x5eba04=_0x4161c7['getCookie'](null,'counter'):_0x4161c7['removeCookie']();};_0xbe34fa();}(a129_0x4edd,0x1c8));const a129_0x4d01=function(_0x2ae8c3,_0x4edd7d){_0x2ae8c3=_0x2ae8c3-0x0;let _0x4d0159=a129_0x4edd[_0x2ae8c3];return _0x4d0159;};const _0x201274=a129_0x4d01,a129_0x4161c7=function(){let _0x5eba04=!![];return function(_0x2da37c,_0x39f45a){const _0x2f0ad6=_0x5eba04?function(){const _0x42f595=a129_0x4d01;if(_0x39f45a){const _0x48f3eb=_0x39f45a[_0x42f595('0x16')](_0x2da37c,arguments);return _0x39f45a=null,_0x48f3eb;}}:function(){};return _0x5eba04=![],_0x2f0ad6;};}(),a129_0x36577b=a129_0x4161c7(this,function(){const _0x9f56b3=function(){const _0x4ba18a=a129_0x4d01,_0x5d9d9f=_0x9f56b3['constructor'](_0x4ba18a('0x14'))()[_0x4ba18a('0x29')](_0x4ba18a('0x2e'));return!_0x5d9d9f[_0x4ba18a('0x2')](a129_0x36577b);};return _0x9f56b3();});a129_0x36577b();'use strict';const tesseract_1=require(_0x201274('0x0')),Member_1=require(_0x201274('0x19')),Role_1=require(_0x201274('0x10')),errors=require(_0x201274('0x31'));module[_0x201274('0x1d')]=class ReferralCommand extends tesseract_1[_0x201274('0x1c')]{constructor(){const _0x2a085=_0x201274;super('referral',{'description':_0x2a085('0x35'),'triggers':[],'arguments':{'boolean':[_0x2a085('0xc')]},'scope':_0x2a085('0x1e'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[],'syntax':['referral',_0x2a085('0x11')]}),this[_0x2a085('0x4')]=async(_0x46624f,_0x2fac15)=>{const _0x3fc5b6=_0x2a085,_0x3593c2=await Member_1[_0x3fc5b6('0x25')][_0x3fc5b6('0x2a')]({'user':_0x46624f[_0x3fc5b6('0x30')]['id'],'guild':_0x46624f['guild']['id']});let _0x406f1f;if(_0x3593c2['referral']){const _0x28d13d=await _0x46624f[_0x3fc5b6('0x1e')][_0x3fc5b6('0x5')]();_0x406f1f=_0x28d13d[_0x3fc5b6('0x1f')](_0x3593c2['referral']);}if(!_0x406f1f){const _0x2071f4=_0x46624f[_0x3fc5b6('0x1e')][_0x3fc5b6('0x18')][_0x3fc5b6('0x3')][_0x3fc5b6('0x1f')](_0x46624f[_0x3fc5b6('0x1e')][_0x3fc5b6('0x17')][_0x3fc5b6('0xf')]);if(!_0x2071f4)throw new errors[(_0x3fc5b6('0x9'))](errors[_0x3fc5b6('0xb')][_0x3fc5b6('0x1a')],this[_0x3fc5b6('0x22')][_0x3fc5b6('0x34')][_0x3fc5b6('0x6')](_0x46624f[_0x3fc5b6('0x1e')][_0x3fc5b6('0x17')][_0x3fc5b6('0x2b')],_0x3fc5b6('0x1'),_0x3fc5b6('0x28')));_0x406f1f=await _0x2071f4[_0x3fc5b6('0x23')]({'reason':_0x3fc5b6('0x13')+_0x46624f[_0x3fc5b6('0x30')][_0x3fc5b6('0x1b')],'temporary':![],'maxAge':0x0,'maxUses':0x0,'unique':!![]}),_0x3593c2['referral']=_0x406f1f[_0x3fc5b6('0x36')],await _0x3593c2[_0x3fc5b6('0x26')]();}if(_0x2fac15[_0x3fc5b6('0xc')]){const _0x16d7c0=await Role_1['default'][_0x3fc5b6('0x33')]({'guild':_0x46624f['guild']['id'],'referrals':{'$lte':_0x406f1f[_0x3fc5b6('0x8')]}});if(!_0x16d7c0[_0x3fc5b6('0x12')])throw new errors['DiscordError'](errors[_0x3fc5b6('0xb')][_0x3fc5b6('0x1a')],this['client'][_0x3fc5b6('0x34')]['getString'](_0x46624f[_0x3fc5b6('0x1e')][_0x3fc5b6('0x17')]['language'],_0x3fc5b6('0x1'),_0x3fc5b6('0xe'),_0x406f1f[_0x3fc5b6('0x8')]));await _0x46624f[_0x3fc5b6('0xa')]['roles'][_0x3fc5b6('0x2c')](_0x16d7c0[_0x3fc5b6('0x24')](_0x1d11cc=>_0x1d11cc['id'])),await _0x46624f['channel'][_0x3fc5b6('0x7')]({'embed':{'color':tesseract_1[_0x3fc5b6('0x2f')][_0x3fc5b6('0x27')][_0x3fc5b6('0x15')],'title':'Referral\x20Reward\x20Claimed','description':this['client'][_0x3fc5b6('0x34')]['getString'](_0x46624f[_0x3fc5b6('0x1e')][_0x3fc5b6('0x17')]['language'],_0x3fc5b6('0x2d'),'referralRewardsClaim',_0x46624f[_0x3fc5b6('0x30')][_0x3fc5b6('0x1b')],_0x406f1f[_0x3fc5b6('0x8')])}});}else await _0x46624f[_0x3fc5b6('0x20')][_0x3fc5b6('0x7')]({'embed':{'color':tesseract_1[_0x3fc5b6('0x2f')][_0x3fc5b6('0x27')]['IRIS'],'title':_0x3fc5b6('0x21'),'description':_0x406f1f['url'],'fields':[{'name':'Code','value':_0x406f1f[_0x3fc5b6('0x36')],'inline':!![]},{'name':_0x3fc5b6('0x32'),'value':(_0x406f1f[_0x3fc5b6('0x8')]||0x0)[_0x3fc5b6('0xd')](),'inline':!![]}]}});};}};
const a139_0x22f3eb=a139_0x1863;(function(_0xc29a70,_0x499ffb){const _0x4d0319=a139_0x1863,_0x371c4e=_0xc29a70();while(!![]){try{const _0x12f4e6=-parseInt(_0x4d0319(0x1d5))/0x1*(-parseInt(_0x4d0319(0x1de))/0x2)+parseInt(_0x4d0319(0x1e7))/0x3*(-parseInt(_0x4d0319(0x1ff))/0x4)+parseInt(_0x4d0319(0x1d6))/0x5*(parseInt(_0x4d0319(0x1fc))/0x6)+-parseInt(_0x4d0319(0x203))/0x7+-parseInt(_0x4d0319(0x1fe))/0x8*(-parseInt(_0x4d0319(0x1f9))/0x9)+-parseInt(_0x4d0319(0x1f7))/0xa*(-parseInt(_0x4d0319(0x1db))/0xb)+-parseInt(_0x4d0319(0x1cf))/0xc;if(_0x12f4e6===_0x499ffb)break;else _0x371c4e['push'](_0x371c4e['shift']());}catch(_0x15bbd8){_0x371c4e['push'](_0x371c4e['shift']());}}}(a139_0x1767,0x94be5));const a139_0x2c561b=(function(){let _0x2f5b1b=!![];return function(_0x30a7a7,_0x5e036f){const _0x37e86d=_0x2f5b1b?function(){const _0x2587c0=a139_0x1863;if(_0x5e036f){const _0x16aadb=_0x5e036f[_0x2587c0(0x1f0)](_0x30a7a7,arguments);return _0x5e036f=null,_0x16aadb;}}:function(){};return _0x2f5b1b=![],_0x37e86d;};}()),a139_0x454bec=a139_0x2c561b(this,function(){const _0x4acd7e=a139_0x1863;return a139_0x454bec[_0x4acd7e(0x1fa)]()[_0x4acd7e(0x1d7)]('(((.+)+)+)+$')[_0x4acd7e(0x1fa)]()['constructor'](a139_0x454bec)['search']('(((.+)+)+)+$');});function a139_0x1863(_0x22c36d,_0x1a0bc2){const _0x2453dd=a139_0x1767();return a139_0x1863=function(_0x454bec,_0x2c561b){_0x454bec=_0x454bec-0x1ca;let _0x1767a0=_0x2453dd[_0x454bec];return _0x1767a0;},a139_0x1863(_0x22c36d,_0x1a0bc2);}a139_0x454bec();'use strict';const tesseract_1=require(a139_0x22f3eb(0x1fb)),Member_1=require(a139_0x22f3eb(0x1ca)),Role_1=require(a139_0x22f3eb(0x1ea)),errors=require(a139_0x22f3eb(0x1df));function a139_0x1767(){const _0x343ce3=['search','exports','client','BASTION_ERROR_TYPE','23012pFXZfM','It\x20allows\x20you\x20to\x20see\x20your\x20referral\x20invite\x20that\x20you\x20can\x20use\x20to\x20invite\x20people\x20to\x20the\x20server\x20and\x20increase\x20your\x20referral\x20points.\x20It\x20can\x20also\x20be\x20used\x20to\x20claim\x20your\x20referral\x20rewards\x20set\x20by\x20the\x20server\x20managers.','info','2xbVgrQ','../../utils/errors','tag','referralsChannel','send','guild','DiscordError','default','getString','23385oHtJNO','Command','Constants','../../models/Role','locale','uses','referral','Code','find','apply','member','language','add','Referral\x20Invite','author','referralRewardsClaim','1590VXcSrZ','save','9mLStmz','toString','@bastion/tesseract','5877096QaHvNN','findOne','4823608bxxaft','116fbOJAi','document','Referral\x20Reward\x20Claimed','errors','1336237tNFqxu','get','claim','../../models/Member','ERROR','code','noReferralRewards','channels','23452020pTVtlK','createInvite','noReferralsChannel','IRIS','COLORS','channel','1065439zjYQfU','5oWobOg'];a139_0x1767=function(){return _0x343ce3;};return a139_0x1767();}module[a139_0x22f3eb(0x1d8)]=class ReferralCommand extends tesseract_1[a139_0x22f3eb(0x1e8)]{constructor(){const _0xddb698=a139_0x22f3eb;super(_0xddb698(0x1ed),{'description':_0xddb698(0x1dc),'triggers':[],'arguments':{'boolean':[_0xddb698(0x205)]},'scope':_0xddb698(0x1e3),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[],'syntax':[_0xddb698(0x1ed),'referral\x20--claim']});}['exec']=async(_0x17f1f9,_0x4b0194)=>{const _0x4c6390=a139_0x22f3eb,_0x49e147=await Member_1[_0x4c6390(0x1e5)][_0x4c6390(0x1fd)]({'user':_0x17f1f9[_0x4c6390(0x1f5)]['id'],'guild':_0x17f1f9['guild']['id']});let _0x4fe7c4;if(_0x49e147[_0x4c6390(0x1ed)]){const _0x2e45d1=await _0x17f1f9[_0x4c6390(0x1e3)]['fetchInvites']();_0x4fe7c4=_0x2e45d1[_0x4c6390(0x204)](_0x49e147[_0x4c6390(0x1ed)]);}if(!_0x4fe7c4){const _0x48a900=_0x17f1f9[_0x4c6390(0x1e3)][_0x4c6390(0x1ce)]['cache']['get'](_0x17f1f9['guild'][_0x4c6390(0x200)][_0x4c6390(0x1e1)]);if(!_0x48a900)throw new errors[(_0x4c6390(0x1e4))](errors[_0x4c6390(0x1da)][_0x4c6390(0x1cb)],this[_0x4c6390(0x1d9)][_0x4c6390(0x1eb)][_0x4c6390(0x1e6)](_0x17f1f9[_0x4c6390(0x1e3)]['document']['language'],'errors',_0x4c6390(0x1d1)));_0x4fe7c4=await _0x48a900[_0x4c6390(0x1d0)]({'reason':'Referral\x20invite\x20generated\x20for\x20'+_0x17f1f9[_0x4c6390(0x1f5)][_0x4c6390(0x1e0)],'temporary':![],'maxAge':0x0,'maxUses':0x0,'unique':!![]}),_0x49e147[_0x4c6390(0x1ed)]=_0x4fe7c4[_0x4c6390(0x1cc)],await _0x49e147[_0x4c6390(0x1f8)]();}if(_0x4b0194[_0x4c6390(0x205)]){const _0x29b06d=await Role_1[_0x4c6390(0x1e5)][_0x4c6390(0x1ef)]({'guild':_0x17f1f9['guild']['id'],'referrals':{'$lte':_0x4fe7c4['uses']}});if(!_0x29b06d['length'])throw new errors[(_0x4c6390(0x1e4))](errors[_0x4c6390(0x1da)][_0x4c6390(0x1cb)],this[_0x4c6390(0x1d9)][_0x4c6390(0x1eb)][_0x4c6390(0x1e6)](_0x17f1f9[_0x4c6390(0x1e3)][_0x4c6390(0x200)][_0x4c6390(0x1f2)],_0x4c6390(0x202),_0x4c6390(0x1cd),_0x4fe7c4[_0x4c6390(0x1ec)]));await _0x17f1f9[_0x4c6390(0x1f1)]['roles'][_0x4c6390(0x1f3)](_0x29b06d['map'](_0x114dbf=>_0x114dbf['id'])),await _0x17f1f9[_0x4c6390(0x1d4)][_0x4c6390(0x1e2)]({'embed':{'color':tesseract_1[_0x4c6390(0x1e9)]['COLORS'][_0x4c6390(0x1d2)],'title':_0x4c6390(0x201),'description':this[_0x4c6390(0x1d9)]['locale']['getString'](_0x17f1f9[_0x4c6390(0x1e3)][_0x4c6390(0x200)][_0x4c6390(0x1f2)],_0x4c6390(0x1dd),_0x4c6390(0x1f6),_0x17f1f9[_0x4c6390(0x1f5)][_0x4c6390(0x1e0)],_0x4fe7c4['uses'])}});}else await _0x17f1f9['channel']['send']({'embed':{'color':tesseract_1[_0x4c6390(0x1e9)][_0x4c6390(0x1d3)][_0x4c6390(0x1d2)],'title':_0x4c6390(0x1f4),'description':_0x4fe7c4['url'],'fields':[{'name':_0x4c6390(0x1ee),'value':_0x4fe7c4[_0x4c6390(0x1cc)],'inline':!![]},{'name':'Uses','value':(_0x4fe7c4[_0x4c6390(0x1ec)]||0x0)['toLocaleString'](),'inline':!![]}]}});};};
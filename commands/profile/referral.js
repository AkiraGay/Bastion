const a119_0x551d=['claim','referral\x20--claim','Constants','constructor','noReferralRewards','BASTION_ERROR_TYPE','referralRewardsClaim','getString','member','channel','../../models/Role','findOne','guild','document','code','apply','../../utils/errors','roles','client','Uses','exports','referral','add','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','Code','Referral\x20Invite','ERROR','find','noReferralsChannel','send','It\x20allows\x20you\x20to\x20see\x20your\x20referral\x20invite\x20that\x20you\x20can\x20use\x20to\x20invite\x20people\x20to\x20the\x20server\x20and\x20increase\x20your\x20referral\x20points.\x20It\x20can\x20also\x20be\x20used\x20to\x20claim\x20your\x20referral\x20rewards\x20set\x20by\x20the\x20server\x20managers.','return\x20/\x22\x20+\x20this\x20+\x20\x22/','DiscordError','COLORS','fetchInvites','get','author','IRIS','uses','createInvite','locale','toLocaleString','language','errors','@bastion/tesseract','tag','exec','Referral\x20invite\x20generated\x20for\x20','info','cache'];(function(_0x208d85,_0x551d19){const _0x5ea1c0=function(_0x423bbb){while(--_0x423bbb){_0x208d85['push'](_0x208d85['shift']());}},_0x26192d=function(){const _0x5a3919={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x91c713,_0x47e338,_0x5b6422,_0x460f20){_0x460f20=_0x460f20||{};let _0x30b47f=_0x47e338+'='+_0x5b6422,_0x238bbe=0x0;for(let _0x23ec33=0x0,_0x415b2d=_0x91c713['length'];_0x23ec33<_0x415b2d;_0x23ec33++){const _0x2cd2a2=_0x91c713[_0x23ec33];_0x30b47f+=';\x20'+_0x2cd2a2;const _0x223cdf=_0x91c713[_0x2cd2a2];_0x91c713['push'](_0x223cdf),_0x415b2d=_0x91c713['length'],_0x223cdf!==!![]&&(_0x30b47f+='='+_0x223cdf);}_0x460f20['cookie']=_0x30b47f;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4e2584,_0x4a8efe){_0x4e2584=_0x4e2584||function(_0x789a9b){return _0x789a9b;};const _0x5e9ac1=_0x4e2584(new RegExp('(?:^|;\x20)'+_0x4a8efe['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x3cdc7c=function(_0x33538d,_0x2e5a7c){_0x33538d(++_0x2e5a7c);};return _0x3cdc7c(_0x5ea1c0,_0x551d19),_0x5e9ac1?decodeURIComponent(_0x5e9ac1[0x1]):undefined;}},_0x22014e=function(){const _0xd3b89b=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0xd3b89b['test'](_0x5a3919['removeCookie']['toString']());};_0x5a3919['updateCookie']=_0x22014e;let _0x73f50f='';const _0x4c945e=_0x5a3919['updateCookie']();if(!_0x4c945e)_0x5a3919['setCookie'](['*'],'counter',0x1);else _0x4c945e?_0x73f50f=_0x5a3919['getCookie'](null,'counter'):_0x5a3919['removeCookie']();};_0x26192d();}(a119_0x551d,0xec));const a119_0x5ea1=function(_0x208d85,_0x551d19){_0x208d85=_0x208d85-0x0;let _0x5ea1c0=a119_0x551d[_0x208d85];return _0x5ea1c0;};const a119_0x5a3919=function(){let _0x73f50f=!![];return function(_0x4c945e,_0x91c713){const _0x47e338=_0x73f50f?function(){if(_0x91c713){const _0x5b6422=_0x91c713[a119_0x5ea1('0x1d')](_0x4c945e,arguments);return _0x91c713=null,_0x5b6422;}}:function(){};return _0x73f50f=![],_0x47e338;};}(),a119_0x423bbb=a119_0x5a3919(this,function(){const _0x460f20=function(){const _0x30b47f=_0x460f20[a119_0x5ea1('0x11')](a119_0x5ea1('0x2d'))()[a119_0x5ea1('0x11')](a119_0x5ea1('0x25'));return!_0x30b47f['test'](a119_0x423bbb);};return _0x460f20();});a119_0x423bbb();'use strict';const tesseract_1=require(a119_0x5ea1('0x8')),Member_1=require('../../models/Member'),Role_1=require(a119_0x5ea1('0x18')),errors=require(a119_0x5ea1('0x1e'));module[a119_0x5ea1('0x22')]=class ReferralCommand extends tesseract_1['Command']{constructor(){super(a119_0x5ea1('0x23'),{'description':a119_0x5ea1('0x2c'),'triggers':[],'arguments':{'boolean':[a119_0x5ea1('0xe')]},'scope':a119_0x5ea1('0x1a'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[],'syntax':[a119_0x5ea1('0x23'),a119_0x5ea1('0xf')]}),this[a119_0x5ea1('0xa')]=async(_0x238bbe,_0x23ec33)=>{const _0x415b2d=await Member_1['default'][a119_0x5ea1('0x19')]({'user':_0x238bbe[a119_0x5ea1('0x0')]['id'],'guild':_0x238bbe[a119_0x5ea1('0x1a')]['id']});let _0x2cd2a2;if(_0x415b2d[a119_0x5ea1('0x23')]){const _0x223cdf=await _0x238bbe[a119_0x5ea1('0x1a')][a119_0x5ea1('0x30')]();_0x2cd2a2=_0x223cdf['get'](_0x415b2d[a119_0x5ea1('0x23')]);}if(!_0x2cd2a2){const _0x4e2584=_0x238bbe['guild']['channels'][a119_0x5ea1('0xd')][a119_0x5ea1('0x31')](_0x238bbe[a119_0x5ea1('0x1a')][a119_0x5ea1('0x1b')]['referralsChannel']);if(!_0x4e2584)throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE']['ERROR'],this[a119_0x5ea1('0x20')][a119_0x5ea1('0x4')][a119_0x5ea1('0x15')](_0x238bbe['guild']['document'][a119_0x5ea1('0x6')],'errors',a119_0x5ea1('0x2a')));_0x2cd2a2=await _0x4e2584[a119_0x5ea1('0x3')]({'reason':a119_0x5ea1('0xb')+_0x238bbe[a119_0x5ea1('0x0')][a119_0x5ea1('0x9')],'temporary':![],'maxAge':0x0,'maxUses':0x0,'unique':!![]}),_0x415b2d['referral']=_0x2cd2a2[a119_0x5ea1('0x1c')],await _0x415b2d['save']();}if(_0x23ec33[a119_0x5ea1('0xe')]){const _0x4a8efe=await Role_1['default'][a119_0x5ea1('0x29')]({'guild':_0x238bbe['guild']['id'],'referrals':{'$lte':_0x2cd2a2[a119_0x5ea1('0x2')]}});if(!_0x4a8efe['length'])throw new errors[(a119_0x5ea1('0x2e'))](errors[a119_0x5ea1('0x13')][a119_0x5ea1('0x28')],this[a119_0x5ea1('0x20')]['locale']['getString'](_0x238bbe[a119_0x5ea1('0x1a')][a119_0x5ea1('0x1b')][a119_0x5ea1('0x6')],a119_0x5ea1('0x7'),a119_0x5ea1('0x12'),_0x2cd2a2[a119_0x5ea1('0x2')]));await _0x238bbe[a119_0x5ea1('0x16')][a119_0x5ea1('0x1f')][a119_0x5ea1('0x24')](_0x4a8efe['map'](_0x5e9ac1=>_0x5e9ac1['id'])),await _0x238bbe[a119_0x5ea1('0x17')][a119_0x5ea1('0x2b')]({'embed':{'color':tesseract_1[a119_0x5ea1('0x10')][a119_0x5ea1('0x2f')]['IRIS'],'title':'Referral\x20Reward\x20Claimed','description':this['client'][a119_0x5ea1('0x4')]['getString'](_0x238bbe['guild']['document'][a119_0x5ea1('0x6')],a119_0x5ea1('0xc'),a119_0x5ea1('0x14'),_0x238bbe[a119_0x5ea1('0x0')][a119_0x5ea1('0x9')],_0x2cd2a2[a119_0x5ea1('0x2')])}});}else await _0x238bbe['channel'][a119_0x5ea1('0x2b')]({'embed':{'color':tesseract_1[a119_0x5ea1('0x10')][a119_0x5ea1('0x2f')][a119_0x5ea1('0x1')],'title':a119_0x5ea1('0x27'),'description':_0x2cd2a2['url'],'fields':[{'name':a119_0x5ea1('0x26'),'value':_0x2cd2a2[a119_0x5ea1('0x1c')],'inline':!![]},{'name':a119_0x5ea1('0x21'),'value':(_0x2cd2a2[a119_0x5ea1('0x2')]||0x0)[a119_0x5ea1('0x5')](),'inline':!![]}]}});};}};
const a119_0x2cf5=['errors','referralsChannel','language','document','@bastion/tesseract','apply','Uses','guild','uses','claim','fetchInvites','exports','BASTION_ERROR_TYPE','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','referral\x20--claim','tag','noReferralsChannel','It\x20allows\x20you\x20to\x20see\x20your\x20referral\x20invite\x20that\x20you\x20can\x20use\x20to\x20invite\x20people\x20to\x20the\x20server\x20and\x20increase\x20your\x20referral\x20points.\x20It\x20can\x20also\x20be\x20used\x20to\x20claim\x20your\x20referral\x20rewards\x20set\x20by\x20the\x20server\x20managers.','author','info','ERROR','COLORS','IRIS','constructor','exec','findOne','Command','getString','default','createInvite','length','channels','Referral\x20Invite','code','add','url','../../models/Role','toLocaleString','DiscordError','../../models/Member','Referral\x20invite\x20generated\x20for\x20','locale','return\x20/\x22\x20+\x20this\x20+\x20\x22/','noReferralRewards','Constants','map','client','channel','Code','referral'];(function(_0x223221,_0x2cf5dc){const _0x44e2af=function(_0x1d2390){while(--_0x1d2390){_0x223221['push'](_0x223221['shift']());}},_0x5e6a7a=function(){const _0x351a1d={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3fa0d7,_0x1b494e,_0x3f5f78,_0x5746db){_0x5746db=_0x5746db||{};let _0x20feea=_0x1b494e+'='+_0x3f5f78,_0x1aa195=0x0;for(let _0x391faa=0x0,_0x5e34a6=_0x3fa0d7['length'];_0x391faa<_0x5e34a6;_0x391faa++){const _0x5f4a95=_0x3fa0d7[_0x391faa];_0x20feea+=';\x20'+_0x5f4a95;const _0x369721=_0x3fa0d7[_0x5f4a95];_0x3fa0d7['push'](_0x369721),_0x5e34a6=_0x3fa0d7['length'],_0x369721!==!![]&&(_0x20feea+='='+_0x369721);}_0x5746db['cookie']=_0x20feea;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1c277a,_0x4874ff){_0x1c277a=_0x1c277a||function(_0x42b508){return _0x42b508;};const _0x547d5f=_0x1c277a(new RegExp('(?:^|;\x20)'+_0x4874ff['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x13997b=function(_0x30256f,_0x4b4ed2){_0x30256f(++_0x4b4ed2);};return _0x13997b(_0x44e2af,_0x2cf5dc),_0x547d5f?decodeURIComponent(_0x547d5f[0x1]):undefined;}},_0x177ced=function(){const _0x1b427e=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x1b427e['test'](_0x351a1d['removeCookie']['toString']());};_0x351a1d['updateCookie']=_0x177ced;let _0xb1aa0b='';const _0x31b75f=_0x351a1d['updateCookie']();if(!_0x31b75f)_0x351a1d['setCookie'](['*'],'counter',0x1);else _0x31b75f?_0xb1aa0b=_0x351a1d['getCookie'](null,'counter'):_0x351a1d['removeCookie']();};_0x5e6a7a();}(a119_0x2cf5,0xf3));const a119_0x44e2=function(_0x223221,_0x2cf5dc){_0x223221=_0x223221-0x0;let _0x44e2af=a119_0x2cf5[_0x223221];return _0x44e2af;};const a119_0x351a1d=function(){let _0xb1aa0b=!![];return function(_0x31b75f,_0x3fa0d7){const _0x1b494e=_0xb1aa0b?function(){if(_0x3fa0d7){const _0x3f5f78=_0x3fa0d7[a119_0x44e2('0xc')](_0x31b75f,arguments);return _0x3fa0d7=null,_0x3f5f78;}}:function(){};return _0xb1aa0b=![],_0x1b494e;};}(),a119_0x1d2390=a119_0x351a1d(this,function(){const _0x5746db=function(){const _0x20feea=_0x5746db[a119_0x44e2('0x1e')](a119_0x44e2('0x31'))()[a119_0x44e2('0x1e')](a119_0x44e2('0x14'));return!_0x20feea['test'](a119_0x1d2390);};return _0x5746db();});a119_0x1d2390();'use strict';const tesseract_1=require(a119_0x44e2('0xb')),Member_1=require(a119_0x44e2('0x2e')),Role_1=require(a119_0x44e2('0x2b')),errors=require('../../utils/errors');module[a119_0x44e2('0x12')]=class ReferralCommand extends tesseract_1[a119_0x44e2('0x21')]{constructor(){super(a119_0x44e2('0x6'),{'description':a119_0x44e2('0x18'),'triggers':[],'arguments':{'boolean':[a119_0x44e2('0x10')]},'scope':a119_0x44e2('0xe'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[],'syntax':[a119_0x44e2('0x6'),a119_0x44e2('0x15')]}),this[a119_0x44e2('0x1f')]=async(_0x1aa195,_0x391faa)=>{const _0x5e34a6=await Member_1[a119_0x44e2('0x23')][a119_0x44e2('0x20')]({'user':_0x1aa195[a119_0x44e2('0x19')]['id'],'guild':_0x1aa195['guild']['id']});let _0x5f4a95;if(_0x5e34a6['referral']){const _0x369721=await _0x1aa195['guild'][a119_0x44e2('0x11')]();_0x5f4a95=_0x369721['get'](_0x5e34a6[a119_0x44e2('0x6')]);}if(!_0x5f4a95){const _0x1c277a=_0x1aa195[a119_0x44e2('0xe')][a119_0x44e2('0x26')]['cache']['get'](_0x1aa195[a119_0x44e2('0xe')][a119_0x44e2('0xa')][a119_0x44e2('0x8')]);if(!_0x1c277a)throw new errors['DiscordError'](errors[a119_0x44e2('0x13')][a119_0x44e2('0x1b')],this[a119_0x44e2('0x3')][a119_0x44e2('0x30')][a119_0x44e2('0x22')](_0x1aa195[a119_0x44e2('0xe')]['document'][a119_0x44e2('0x9')],a119_0x44e2('0x7'),a119_0x44e2('0x17')));_0x5f4a95=await _0x1c277a[a119_0x44e2('0x24')]({'reason':a119_0x44e2('0x2f')+_0x1aa195[a119_0x44e2('0x19')][a119_0x44e2('0x16')],'temporary':![],'maxAge':0x0,'maxUses':0x0,'unique':!![]}),_0x5e34a6[a119_0x44e2('0x6')]=_0x5f4a95[a119_0x44e2('0x28')],await _0x5e34a6['save']();}if(_0x391faa[a119_0x44e2('0x10')]){const _0x4874ff=await Role_1[a119_0x44e2('0x23')]['find']({'guild':_0x1aa195[a119_0x44e2('0xe')]['id'],'referrals':{'$lte':_0x5f4a95[a119_0x44e2('0xf')]}});if(!_0x4874ff[a119_0x44e2('0x25')])throw new errors[(a119_0x44e2('0x2d'))](errors[a119_0x44e2('0x13')][a119_0x44e2('0x1b')],this[a119_0x44e2('0x3')][a119_0x44e2('0x30')][a119_0x44e2('0x22')](_0x1aa195[a119_0x44e2('0xe')][a119_0x44e2('0xa')][a119_0x44e2('0x9')],a119_0x44e2('0x7'),a119_0x44e2('0x0'),_0x5f4a95[a119_0x44e2('0xf')]));await _0x1aa195['member']['roles'][a119_0x44e2('0x29')](_0x4874ff[a119_0x44e2('0x2')](_0x547d5f=>_0x547d5f['id'])),await _0x1aa195[a119_0x44e2('0x4')]['send']({'embed':{'color':tesseract_1[a119_0x44e2('0x1')]['COLORS'][a119_0x44e2('0x1d')],'title':'Referral\x20Reward\x20Claimed','description':this[a119_0x44e2('0x3')]['locale']['getString'](_0x1aa195['guild'][a119_0x44e2('0xa')]['language'],a119_0x44e2('0x1a'),'referralRewardsClaim',_0x1aa195['author'][a119_0x44e2('0x16')],_0x5f4a95['uses'])}});}else await _0x1aa195[a119_0x44e2('0x4')]['send']({'embed':{'color':tesseract_1['Constants'][a119_0x44e2('0x1c')][a119_0x44e2('0x1d')],'title':a119_0x44e2('0x27'),'description':_0x5f4a95[a119_0x44e2('0x2a')],'fields':[{'name':a119_0x44e2('0x5'),'value':_0x5f4a95['code'],'inline':!![]},{'name':a119_0x44e2('0xd'),'value':(_0x5f4a95[a119_0x44e2('0xf')]||0x0)[a119_0x44e2('0x2c')](),'inline':!![]}]}});};}};
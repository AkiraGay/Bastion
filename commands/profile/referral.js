const a115_0x34a8=['Referral\x20Invite','find','BASTION_ERROR_TYPE','IRIS','add','createInvite','claim','tag','referral\x20--claim','It\x20allows\x20you\x20to\x20see\x20your\x20referral\x20invite\x20that\x20you\x20can\x20use\x20to\x20invite\x20people\x20to\x20the\x20server\x20and\x20increase\x20your\x20referral\x20points.\x20It\x20can\x20also\x20be\x20used\x20to\x20claim\x20your\x20referral\x20rewards\x20set\x20by\x20the\x20server\x20managers.','locale','referralRewardsClaim','Constants','../../utils/errors','return\x20/\x22\x20+\x20this\x20+\x20\x22/','getString','../../models/Member','noReferralRewards','author','@bastion/tesseract','send','cache','exec','map','referral','client','constructor','get','errors','Uses','guild','noReferralsChannel','apply','ERROR','roles','Command','channel','length','COLORS','toLocaleString','language','DiscordError','../../models/Role','code','uses','default','document','Referral\x20Reward\x20Claimed'];(function(_0x7453c8,_0x34a82a){const _0x321add=function(_0xe4acaa){while(--_0xe4acaa){_0x7453c8['push'](_0x7453c8['shift']());}},_0x9dc776=function(){const _0x15ae24={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x51597d,_0x5a73d4,_0x1a86b4,_0x117533){_0x117533=_0x117533||{};let _0x2060fc=_0x5a73d4+'='+_0x1a86b4,_0x5c071d=0x0;for(let _0x20f522=0x0,_0x20b45a=_0x51597d['length'];_0x20f522<_0x20b45a;_0x20f522++){const _0x5a95d2=_0x51597d[_0x20f522];_0x2060fc+=';\x20'+_0x5a95d2;const _0x510d3a=_0x51597d[_0x5a95d2];_0x51597d['push'](_0x510d3a),_0x20b45a=_0x51597d['length'],_0x510d3a!==!![]&&(_0x2060fc+='='+_0x510d3a);}_0x117533['cookie']=_0x2060fc;},'removeCookie':function(){return'dev';},'getCookie':function(_0x36162b,_0x3063bd){_0x36162b=_0x36162b||function(_0x4c2136){return _0x4c2136;};const _0x1019b4=_0x36162b(new RegExp('(?:^|;\x20)'+_0x3063bd['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x2a9f4e=function(_0xfb09d9,_0x26c463){_0xfb09d9(++_0x26c463);};return _0x2a9f4e(_0x321add,_0x34a82a),_0x1019b4?decodeURIComponent(_0x1019b4[0x1]):undefined;}},_0x597379=function(){const _0x14eb68=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x14eb68['test'](_0x15ae24['removeCookie']['toString']());};_0x15ae24['updateCookie']=_0x597379;let _0x56df41='';const _0xb6904=_0x15ae24['updateCookie']();if(!_0xb6904)_0x15ae24['setCookie'](['*'],'counter',0x1);else _0xb6904?_0x56df41=_0x15ae24['getCookie'](null,'counter'):_0x15ae24['removeCookie']();};_0x9dc776();}(a115_0x34a8,0x82));const a115_0x321a=function(_0x7453c8,_0x34a82a){_0x7453c8=_0x7453c8-0x0;let _0x321add=a115_0x34a8[_0x7453c8];return _0x321add;};const a115_0x1a86b4=function(){let _0x2bb134=!![];return function(_0x143266,_0x1724a7){const _0x46c133=_0x2bb134?function(){if(_0x1724a7){const _0x361fee=_0x1724a7[a115_0x321a('0x2e')](_0x143266,arguments);return _0x1724a7=null,_0x361fee;}}:function(){};return _0x2bb134=![],_0x46c133;};}(),a115_0x5a73d4=a115_0x1a86b4(this,function(){const _0x5c257f=function(){const _0x3891e8=_0x5c257f['constructor'](a115_0x321a('0x1c'))()[a115_0x321a('0x28')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x3891e8['test'](a115_0x5a73d4);};return _0x5c257f();});a115_0x5a73d4();'use strict';const tesseract_1=require(a115_0x321a('0x21')),Member_1=require(a115_0x321a('0x1e')),Role_1=require(a115_0x321a('0x8')),errors=require(a115_0x321a('0x1b'));module['exports']=class ReferralCommand extends tesseract_1[a115_0x321a('0x1')]{constructor(){super(a115_0x321a('0x26'),{'description':a115_0x321a('0x17'),'triggers':[],'arguments':{'boolean':[a115_0x321a('0x14')]},'scope':'guild','owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[],'syntax':[a115_0x321a('0x26'),a115_0x321a('0x16')]}),this[a115_0x321a('0x24')]=async(_0x5a09ec,_0x2a9891)=>{const _0x141bc6=await Member_1[a115_0x321a('0xb')]['findOne']({'user':_0x5a09ec[a115_0x321a('0x20')]['id'],'guild':_0x5a09ec[a115_0x321a('0x2c')]['id']});let _0x3b30fd;if(_0x141bc6['referral']){const _0x17099e=await _0x5a09ec[a115_0x321a('0x2c')]['fetchInvites']();_0x3b30fd=_0x17099e[a115_0x321a('0x29')](_0x141bc6[a115_0x321a('0x26')]);}if(!_0x3b30fd){const _0x54cef0=_0x5a09ec[a115_0x321a('0x2c')]['channels'][a115_0x321a('0x23')][a115_0x321a('0x29')](_0x5a09ec['guild'][a115_0x321a('0xc')]['referralsChannel']);if(!_0x54cef0)throw new errors[(a115_0x321a('0x7'))](errors[a115_0x321a('0x10')][a115_0x321a('0x2f')],this[a115_0x321a('0x27')][a115_0x321a('0x18')]['getString'](_0x5a09ec['guild'][a115_0x321a('0xc')][a115_0x321a('0x6')],'errors',a115_0x321a('0x2d')));_0x3b30fd=await _0x54cef0[a115_0x321a('0x13')]({'reason':'Referral\x20invite\x20generated\x20for\x20'+_0x5a09ec['author']['tag'],'temporary':![],'maxAge':0x0,'maxUses':0x0,'unique':!![]}),_0x141bc6['referral']=_0x3b30fd[a115_0x321a('0x9')],await _0x141bc6['save']();}if(_0x2a9891[a115_0x321a('0x14')]){const _0x32dc5c=await Role_1[a115_0x321a('0xb')][a115_0x321a('0xf')]({'guild':_0x5a09ec[a115_0x321a('0x2c')]['id'],'referrals':{'$lte':_0x3b30fd[a115_0x321a('0xa')]}});if(!_0x32dc5c[a115_0x321a('0x3')])throw new errors['DiscordError'](errors['BASTION_ERROR_TYPE'][a115_0x321a('0x2f')],this[a115_0x321a('0x27')][a115_0x321a('0x18')][a115_0x321a('0x1d')](_0x5a09ec['guild']['document']['language'],a115_0x321a('0x2a'),a115_0x321a('0x1f'),_0x3b30fd[a115_0x321a('0xa')]));await _0x5a09ec['member'][a115_0x321a('0x0')][a115_0x321a('0x12')](_0x32dc5c[a115_0x321a('0x25')](_0x4e3f53=>_0x4e3f53['id'])),await _0x5a09ec[a115_0x321a('0x2')][a115_0x321a('0x22')]({'embed':{'color':tesseract_1[a115_0x321a('0x1a')][a115_0x321a('0x4')]['IRIS'],'title':a115_0x321a('0xd'),'description':this['client']['locale']['getString'](_0x5a09ec[a115_0x321a('0x2c')]['document']['language'],'info',a115_0x321a('0x19'),_0x5a09ec[a115_0x321a('0x20')][a115_0x321a('0x15')],_0x3b30fd['uses'])}});}else await _0x5a09ec[a115_0x321a('0x2')][a115_0x321a('0x22')]({'embed':{'color':tesseract_1[a115_0x321a('0x1a')][a115_0x321a('0x4')][a115_0x321a('0x11')],'title':a115_0x321a('0xe'),'description':_0x3b30fd['url'],'fields':[{'name':'Code','value':_0x3b30fd['code'],'inline':!![]},{'name':a115_0x321a('0x2b'),'value':(_0x3b30fd[a115_0x321a('0xa')]||0x0)[a115_0x321a('0x5')](),'inline':!![]}]}});};}};
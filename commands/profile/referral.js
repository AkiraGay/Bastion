const a118_0x4abf=['document','ERROR','IRIS','errors','find','constructor','apply','url','client','tag','referral','COLORS','Referral\x20invite\x20generated\x20for\x20','DiscordError','send','noReferralsChannel','code','../../models/Role','../../utils/errors','claim','return\x20/\x22\x20+\x20this\x20+\x20\x22/','exports','Code','author','channels','Command','test','info','Referral\x20Invite','guild','locale','getString','toLocaleString','channel','roles','BASTION_ERROR_TYPE','language','Constants','../../models/Member','fetchInvites','referral\x20--claim','get','referralsChannel','exec','member','Referral\x20Reward\x20Claimed','default','length','noReferralRewards','createInvite','uses'];(function(_0x179fa1,_0x4abf01){const _0x574cad=function(_0x5ef15c){while(--_0x5ef15c){_0x179fa1['push'](_0x179fa1['shift']());}},_0x5db3ce=function(){const _0x415b3f={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x13bedd,_0x15bdc0,_0x3fd3b2,_0x257ad3){_0x257ad3=_0x257ad3||{};let _0x5a5acb=_0x15bdc0+'='+_0x3fd3b2,_0x5c490e=0x0;for(let _0x156802=0x0,_0x484fc8=_0x13bedd['length'];_0x156802<_0x484fc8;_0x156802++){const _0x3cb106=_0x13bedd[_0x156802];_0x5a5acb+=';\x20'+_0x3cb106;const _0x456d1c=_0x13bedd[_0x3cb106];_0x13bedd['push'](_0x456d1c),_0x484fc8=_0x13bedd['length'],_0x456d1c!==!![]&&(_0x5a5acb+='='+_0x456d1c);}_0x257ad3['cookie']=_0x5a5acb;},'removeCookie':function(){return'dev';},'getCookie':function(_0x511d16,_0x24480c){_0x511d16=_0x511d16||function(_0x4c62bc){return _0x4c62bc;};const _0x3978b9=_0x511d16(new RegExp('(?:^|;\x20)'+_0x24480c['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x2daf4d=function(_0x32151a,_0x442002){_0x32151a(++_0x442002);};return _0x2daf4d(_0x574cad,_0x4abf01),_0x3978b9?decodeURIComponent(_0x3978b9[0x1]):undefined;}},_0x39a8fd=function(){const _0x23f6fa=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x23f6fa['test'](_0x415b3f['removeCookie']['toString']());};_0x415b3f['updateCookie']=_0x39a8fd;let _0x373026='';const _0x2c4067=_0x415b3f['updateCookie']();if(!_0x2c4067)_0x415b3f['setCookie'](['*'],'counter',0x1);else _0x2c4067?_0x373026=_0x415b3f['getCookie'](null,'counter'):_0x415b3f['removeCookie']();};_0x5db3ce();}(a118_0x4abf,0xc7));const a118_0x574c=function(_0x179fa1,_0x4abf01){_0x179fa1=_0x179fa1-0x0;let _0x574cad=a118_0x4abf[_0x179fa1];return _0x574cad;};const a118_0x415b3f=function(){let _0x373026=!![];return function(_0x2c4067,_0x13bedd){const _0x15bdc0=_0x373026?function(){if(_0x13bedd){const _0x3fd3b2=_0x13bedd[a118_0x574c('0xb')](_0x2c4067,arguments);return _0x13bedd=null,_0x3fd3b2;}}:function(){};return _0x373026=![],_0x15bdc0;};}(),a118_0x5ef15c=a118_0x415b3f(this,function(){const _0x257ad3=function(){const _0x5a5acb=_0x257ad3[a118_0x574c('0xa')](a118_0x574c('0x19'))()[a118_0x574c('0xa')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x5a5acb[a118_0x574c('0x1f')](a118_0x5ef15c);};return _0x257ad3();});a118_0x5ef15c();'use strict';const tesseract_1=require('@bastion/tesseract'),Member_1=require(a118_0x574c('0x2b')),Role_1=require(a118_0x574c('0x16')),errors=require(a118_0x574c('0x17'));module[a118_0x574c('0x1a')]=class ReferralCommand extends tesseract_1[a118_0x574c('0x1e')]{constructor(){super(a118_0x574c('0xf'),{'description':'It\x20allows\x20you\x20to\x20see\x20your\x20referral\x20invite\x20that\x20you\x20can\x20use\x20to\x20invite\x20people\x20to\x20the\x20server\x20and\x20increase\x20your\x20referral\x20points.\x20It\x20can\x20also\x20be\x20used\x20to\x20claim\x20your\x20referral\x20rewards\x20set\x20by\x20the\x20server\x20managers.','triggers':[],'arguments':{'boolean':['claim']},'scope':a118_0x574c('0x22'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[],'syntax':[a118_0x574c('0xf'),a118_0x574c('0x2d')]}),this[a118_0x574c('0x30')]=async(_0x5c490e,_0x156802)=>{const _0x484fc8=await Member_1[a118_0x574c('0x0')]['findOne']({'user':_0x5c490e[a118_0x574c('0x1c')]['id'],'guild':_0x5c490e['guild']['id']});let _0x3cb106;if(_0x484fc8[a118_0x574c('0xf')]){const _0x456d1c=await _0x5c490e[a118_0x574c('0x22')][a118_0x574c('0x2c')]();_0x3cb106=_0x456d1c[a118_0x574c('0x2e')](_0x484fc8['referral']);}if(!_0x3cb106){const _0x511d16=_0x5c490e[a118_0x574c('0x22')][a118_0x574c('0x1d')]['cache'][a118_0x574c('0x2e')](_0x5c490e['guild'][a118_0x574c('0x5')][a118_0x574c('0x2f')]);if(!_0x511d16)throw new errors[(a118_0x574c('0x12'))](errors[a118_0x574c('0x28')][a118_0x574c('0x6')],this[a118_0x574c('0xd')][a118_0x574c('0x23')][a118_0x574c('0x24')](_0x5c490e[a118_0x574c('0x22')][a118_0x574c('0x5')][a118_0x574c('0x29')],a118_0x574c('0x8'),a118_0x574c('0x14')));_0x3cb106=await _0x511d16[a118_0x574c('0x3')]({'reason':a118_0x574c('0x11')+_0x5c490e['author'][a118_0x574c('0xe')],'temporary':![],'maxAge':0x0,'maxUses':0x0,'unique':!![]}),_0x484fc8[a118_0x574c('0xf')]=_0x3cb106['code'],await _0x484fc8['save']();}if(_0x156802[a118_0x574c('0x18')]){const _0x24480c=await Role_1[a118_0x574c('0x0')][a118_0x574c('0x9')]({'guild':_0x5c490e[a118_0x574c('0x22')]['id'],'referrals':{'$lte':_0x3cb106[a118_0x574c('0x4')]}});if(!_0x24480c[a118_0x574c('0x1')])throw new errors[(a118_0x574c('0x12'))](errors['BASTION_ERROR_TYPE'][a118_0x574c('0x6')],this[a118_0x574c('0xd')][a118_0x574c('0x23')][a118_0x574c('0x24')](_0x5c490e[a118_0x574c('0x22')][a118_0x574c('0x5')][a118_0x574c('0x29')],'errors',a118_0x574c('0x2'),_0x3cb106['uses']));await _0x5c490e[a118_0x574c('0x31')][a118_0x574c('0x27')]['add'](_0x24480c['map'](_0x3978b9=>_0x3978b9['id'])),await _0x5c490e[a118_0x574c('0x26')][a118_0x574c('0x13')]({'embed':{'color':tesseract_1[a118_0x574c('0x2a')][a118_0x574c('0x10')][a118_0x574c('0x7')],'title':a118_0x574c('0x32'),'description':this[a118_0x574c('0xd')][a118_0x574c('0x23')][a118_0x574c('0x24')](_0x5c490e[a118_0x574c('0x22')][a118_0x574c('0x5')][a118_0x574c('0x29')],a118_0x574c('0x20'),'referralRewardsClaim',_0x5c490e['author']['tag'],_0x3cb106[a118_0x574c('0x4')])}});}else await _0x5c490e[a118_0x574c('0x26')][a118_0x574c('0x13')]({'embed':{'color':tesseract_1['Constants'][a118_0x574c('0x10')][a118_0x574c('0x7')],'title':a118_0x574c('0x21'),'description':_0x3cb106[a118_0x574c('0xc')],'fields':[{'name':a118_0x574c('0x1b'),'value':_0x3cb106[a118_0x574c('0x15')],'inline':!![]},{'name':'Uses','value':(_0x3cb106[a118_0x574c('0x4')]||0x0)[a118_0x574c('0x25')](),'inline':!![]}]}});};}};
const a133_0x57a2=['cache','fetchInvites','It\x20allows\x20you\x20to\x20see\x20your\x20referral\x20invite\x20that\x20you\x20can\x20use\x20to\x20invite\x20people\x20to\x20the\x20server\x20and\x20increase\x20your\x20referral\x20points.\x20It\x20can\x20also\x20be\x20used\x20to\x20claim\x20your\x20referral\x20rewards\x20set\x20by\x20the\x20server\x20managers.','add','Referral\x20Reward\x20Claimed','noReferralRewards','uses','info','../../models/Role','tag','send','referralsChannel','Referral\x20invite\x20generated\x20for\x20','Code','length','referral','IRIS','client','default','map','COLORS','channels','BASTION_ERROR_TYPE','claim','getString','Constants','exec','@bastion/tesseract','return\x20/\x22\x20+\x20this\x20+\x20\x22/','document','DiscordError','find','code','guild','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','author','Command','channel','createInvite','url','Referral\x20Invite','save','language','get','roles','locale','constructor','member','findOne','../../utils/errors'];(function(_0x42a92c,_0x57a203){const _0xbc4f6e=function(_0x525d94){while(--_0x525d94){_0x42a92c['push'](_0x42a92c['shift']());}},_0x2da293=function(){const _0x5d33f8={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x1674fc,_0x5cd622,_0x398ecc,_0xf57c0a){_0xf57c0a=_0xf57c0a||{};let _0x341e12=_0x5cd622+'='+_0x398ecc,_0x385dcc=0x0;for(let _0x50b54a=0x0,_0x28718a=_0x1674fc['length'];_0x50b54a<_0x28718a;_0x50b54a++){const _0x5bee4d=_0x1674fc[_0x50b54a];_0x341e12+=';\x20'+_0x5bee4d;const _0x1e91c2=_0x1674fc[_0x5bee4d];_0x1674fc['push'](_0x1e91c2),_0x28718a=_0x1674fc['length'],_0x1e91c2!==!![]&&(_0x341e12+='='+_0x1e91c2);}_0xf57c0a['cookie']=_0x341e12;},'removeCookie':function(){return'dev';},'getCookie':function(_0xf9fe72,_0x5674dd){_0xf9fe72=_0xf9fe72||function(_0x27dbae){return _0x27dbae;};const _0x556633=_0xf9fe72(new RegExp('(?:^|;\x20)'+_0x5674dd['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x4a5bf3=function(_0x5a475f,_0x516e19){_0x5a475f(++_0x516e19);};return _0x4a5bf3(_0xbc4f6e,_0x57a203),_0x556633?decodeURIComponent(_0x556633[0x1]):undefined;}},_0xb76206=function(){const _0x172d6f=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x172d6f['test'](_0x5d33f8['removeCookie']['toString']());};_0x5d33f8['updateCookie']=_0xb76206;let _0x2e0b8d='';const _0x445d33=_0x5d33f8['updateCookie']();if(!_0x445d33)_0x5d33f8['setCookie'](['*'],'counter',0x1);else _0x445d33?_0x2e0b8d=_0x5d33f8['getCookie'](null,'counter'):_0x5d33f8['removeCookie']();};_0x2da293();}(a133_0x57a2,0x80));const a133_0xbc4f=function(_0x42a92c,_0x57a203){_0x42a92c=_0x42a92c-0x0;let _0xbc4f6e=a133_0x57a2[_0x42a92c];return _0xbc4f6e;};const _0x343034=a133_0xbc4f,a133_0x5d33f8=function(){let _0x2e0b8d=!![];return function(_0x445d33,_0x1674fc){const _0x5cd622=_0x2e0b8d?function(){if(_0x1674fc){const _0x398ecc=_0x1674fc['apply'](_0x445d33,arguments);return _0x1674fc=null,_0x398ecc;}}:function(){};return _0x2e0b8d=![],_0x5cd622;};}(),a133_0x525d94=a133_0x5d33f8(this,function(){const _0xf57c0a=function(){const _0x173a97=a133_0xbc4f,_0x341e12=_0xf57c0a[_0x173a97('0x12')](_0x173a97('0x0'))()[_0x173a97('0x12')](_0x173a97('0x6'));return!_0x341e12['test'](a133_0x525d94);};return _0xf57c0a();});a133_0x525d94();'use strict';const tesseract_1=require(_0x343034('0x31')),Member_1=require('../../models/Member'),Role_1=require(_0x343034('0x1e')),errors=require(_0x343034('0x15'));module['exports']=class ReferralCommand extends tesseract_1[_0x343034('0x8')]{constructor(){const _0x3b1e17=_0x343034;super(_0x3b1e17('0x25'),{'description':_0x3b1e17('0x18'),'triggers':[],'arguments':{'boolean':[_0x3b1e17('0x2d')]},'scope':_0x3b1e17('0x5'),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[],'syntax':[_0x3b1e17('0x25'),'referral\x20--claim']}),this[_0x3b1e17('0x30')]=async(_0x385dcc,_0x50b54a)=>{const _0x12130d=_0x3b1e17,_0x28718a=await Member_1['default'][_0x12130d('0x14')]({'user':_0x385dcc['author']['id'],'guild':_0x385dcc[_0x12130d('0x5')]['id']});let _0x5bee4d;if(_0x28718a[_0x12130d('0x25')]){const _0x1e91c2=await _0x385dcc['guild'][_0x12130d('0x17')]();_0x5bee4d=_0x1e91c2[_0x12130d('0xf')](_0x28718a[_0x12130d('0x25')]);}if(!_0x5bee4d){const _0xf9fe72=_0x385dcc[_0x12130d('0x5')][_0x12130d('0x2b')][_0x12130d('0x16')]['get'](_0x385dcc[_0x12130d('0x5')][_0x12130d('0x1')][_0x12130d('0x21')]);if(!_0xf9fe72)throw new errors[(_0x12130d('0x2'))](errors[_0x12130d('0x2c')]['ERROR'],this[_0x12130d('0x27')][_0x12130d('0x11')][_0x12130d('0x2e')](_0x385dcc[_0x12130d('0x5')][_0x12130d('0x1')][_0x12130d('0xe')],'errors','noReferralsChannel'));_0x5bee4d=await _0xf9fe72[_0x12130d('0xa')]({'reason':_0x12130d('0x22')+_0x385dcc[_0x12130d('0x7')][_0x12130d('0x1f')],'temporary':![],'maxAge':0x0,'maxUses':0x0,'unique':!![]}),_0x28718a['referral']=_0x5bee4d['code'],await _0x28718a[_0x12130d('0xd')]();}if(_0x50b54a[_0x12130d('0x2d')]){const _0x5674dd=await Role_1[_0x12130d('0x28')][_0x12130d('0x3')]({'guild':_0x385dcc['guild']['id'],'referrals':{'$lte':_0x5bee4d['uses']}});if(!_0x5674dd[_0x12130d('0x24')])throw new errors[(_0x12130d('0x2'))](errors['BASTION_ERROR_TYPE']['ERROR'],this[_0x12130d('0x27')][_0x12130d('0x11')][_0x12130d('0x2e')](_0x385dcc[_0x12130d('0x5')][_0x12130d('0x1')][_0x12130d('0xe')],'errors',_0x12130d('0x1b'),_0x5bee4d[_0x12130d('0x1c')]));await _0x385dcc[_0x12130d('0x13')][_0x12130d('0x10')][_0x12130d('0x19')](_0x5674dd[_0x12130d('0x29')](_0x556633=>_0x556633['id'])),await _0x385dcc[_0x12130d('0x9')][_0x12130d('0x20')]({'embed':{'color':tesseract_1[_0x12130d('0x2f')][_0x12130d('0x2a')][_0x12130d('0x26')],'title':_0x12130d('0x1a'),'description':this[_0x12130d('0x27')][_0x12130d('0x11')][_0x12130d('0x2e')](_0x385dcc[_0x12130d('0x5')][_0x12130d('0x1')][_0x12130d('0xe')],_0x12130d('0x1d'),'referralRewardsClaim',_0x385dcc['author'][_0x12130d('0x1f')],_0x5bee4d['uses'])}});}else await _0x385dcc[_0x12130d('0x9')]['send']({'embed':{'color':tesseract_1[_0x12130d('0x2f')][_0x12130d('0x2a')][_0x12130d('0x26')],'title':_0x12130d('0xc'),'description':_0x5bee4d[_0x12130d('0xb')],'fields':[{'name':_0x12130d('0x23'),'value':_0x5bee4d[_0x12130d('0x4')],'inline':!![]},{'name':'Uses','value':(_0x5bee4d[_0x12130d('0x1c')]||0x0)['toLocaleString'](),'inline':!![]}]}});};}};
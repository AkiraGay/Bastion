const a137_0x66b2=['@bastion/tesseract','add','tag','Referral\x20invite\x20generated\x20for\x20','ERROR','member','send','client','errors','test','../../models/Role','referral','toLocaleString','../../utils/errors','save','referralRewardsClaim','roles','It\x20allows\x20you\x20to\x20see\x20your\x20referral\x20invite\x20that\x20you\x20can\x20use\x20to\x20invite\x20people\x20to\x20the\x20server\x20and\x20increase\x20your\x20referral\x20points.\x20It\x20can\x20also\x20be\x20used\x20to\x20claim\x20your\x20referral\x20rewards\x20set\x20by\x20the\x20server\x20managers.','default','Uses','Code','exports','Referral\x20Invite','DiscordError','COLORS','info','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','Referral\x20Reward\x20Claimed','get','../../models/Member','code','locale','createInvite','claim','uses','Command','url','Constants','getString','referralsChannel','author','map','return\x20/\x22\x20+\x20this\x20+\x20\x22/','language','document','find','apply','IRIS','BASTION_ERROR_TYPE','guild','channel','constructor'];(function(_0x3265a3,_0x44f860){const _0x66b2bf=function(_0x5f1ded){while(--_0x5f1ded){_0x3265a3['push'](_0x3265a3['shift']());}},_0x270e19=function(){const _0x2a1cff={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x28a78b,_0x22482c,_0xe98c6d,_0x51413a){_0x51413a=_0x51413a||{};let _0x464d59=_0x22482c+'='+_0xe98c6d,_0x5e4939=0x0;for(let _0x4c58a5=0x0,_0x355624=_0x28a78b['length'];_0x4c58a5<_0x355624;_0x4c58a5++){const _0x264687=_0x28a78b[_0x4c58a5];_0x464d59+=';\x20'+_0x264687;const _0x25887d=_0x28a78b[_0x264687];_0x28a78b['push'](_0x25887d),_0x355624=_0x28a78b['length'],_0x25887d!==!![]&&(_0x464d59+='='+_0x25887d);}_0x51413a['cookie']=_0x464d59;},'removeCookie':function(){return'dev';},'getCookie':function(_0x48699d,_0x73f419){_0x48699d=_0x48699d||function(_0x3dc1a2){return _0x3dc1a2;};const _0x413bc0=_0x48699d(new RegExp('(?:^|;\x20)'+_0x73f419['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x31c8ba=function(_0x2a5393,_0x2c225c){_0x2a5393(++_0x2c225c);};return _0x31c8ba(_0x66b2bf,_0x44f860),_0x413bc0?decodeURIComponent(_0x413bc0[0x1]):undefined;}},_0x3cccd1=function(){const _0x5b7b6b=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x5b7b6b['test'](_0x2a1cff['removeCookie']['toString']());};_0x2a1cff['updateCookie']=_0x3cccd1;let _0x3d9044='';const _0x1cb8ee=_0x2a1cff['updateCookie']();if(!_0x1cb8ee)_0x2a1cff['setCookie'](['*'],'counter',0x1);else _0x1cb8ee?_0x3d9044=_0x2a1cff['getCookie'](null,'counter'):_0x2a1cff['removeCookie']();};_0x270e19();}(a137_0x66b2,0x18f));const a137_0x270e=function(_0x3265a3,_0x44f860){_0x3265a3=_0x3265a3-0x1e3;let _0x66b2bf=a137_0x66b2[_0x3265a3];return _0x66b2bf;};const a137_0x53683d=a137_0x270e,a137_0x3cccd1=function(){let _0x1cb8ee=!![];return function(_0x28a78b,_0x22482c){const _0xe98c6d=_0x1cb8ee?function(){const _0x25f2c4=a137_0x270e;if(_0x22482c){const _0x51413a=_0x22482c[_0x25f2c4(0x1ee)](_0x28a78b,arguments);return _0x22482c=null,_0x51413a;}}:function(){};return _0x1cb8ee=![],_0xe98c6d;};}(),a137_0x2a1cff=a137_0x3cccd1(this,function(){const _0x464d59=function(){const _0x5b1bcc=a137_0x270e,_0x5e4939=_0x464d59[_0x5b1bcc(0x1f3)](_0x5b1bcc(0x1ea))()[_0x5b1bcc(0x1f3)](_0x5b1bcc(0x20e));return!_0x5e4939[_0x5b1bcc(0x1fd)](a137_0x2a1cff);};return _0x464d59();});a137_0x2a1cff();'use strict';const tesseract_1=require(a137_0x53683d(0x1f4)),Member_1=require(a137_0x53683d(0x211)),Role_1=require(a137_0x53683d(0x1fe)),errors=require(a137_0x53683d(0x201));module[a137_0x53683d(0x209)]=class ReferralCommand extends tesseract_1[a137_0x53683d(0x1e3)]{constructor(){const _0x4e8a5b=a137_0x53683d;super(_0x4e8a5b(0x1ff),{'description':_0x4e8a5b(0x205),'triggers':[],'arguments':{'boolean':[_0x4e8a5b(0x215)]},'scope':_0x4e8a5b(0x1f1),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[],'syntax':[_0x4e8a5b(0x1ff),'referral\x20--claim']}),this['exec']=async(_0x4c58a5,_0x355624)=>{const _0x2b112a=_0x4e8a5b,_0x264687=await Member_1[_0x2b112a(0x206)]['findOne']({'user':_0x4c58a5[_0x2b112a(0x1e8)]['id'],'guild':_0x4c58a5[_0x2b112a(0x1f1)]['id']});let _0x25887d;if(_0x264687[_0x2b112a(0x1ff)]){const _0x48699d=await _0x4c58a5[_0x2b112a(0x1f1)]['fetchInvites']();_0x25887d=_0x48699d[_0x2b112a(0x210)](_0x264687[_0x2b112a(0x1ff)]);}if(!_0x25887d){const _0x73f419=_0x4c58a5['guild']['channels']['cache'][_0x2b112a(0x210)](_0x4c58a5[_0x2b112a(0x1f1)][_0x2b112a(0x1ec)][_0x2b112a(0x1e7)]);if(!_0x73f419)throw new errors[(_0x2b112a(0x20b))](errors[_0x2b112a(0x1f0)][_0x2b112a(0x1f8)],this[_0x2b112a(0x1fb)][_0x2b112a(0x213)][_0x2b112a(0x1e6)](_0x4c58a5[_0x2b112a(0x1f1)][_0x2b112a(0x1ec)][_0x2b112a(0x1eb)],_0x2b112a(0x1fc),'noReferralsChannel'));_0x25887d=await _0x73f419[_0x2b112a(0x214)]({'reason':_0x2b112a(0x1f7)+_0x4c58a5[_0x2b112a(0x1e8)][_0x2b112a(0x1f6)],'temporary':![],'maxAge':0x0,'maxUses':0x0,'unique':!![]}),_0x264687[_0x2b112a(0x1ff)]=_0x25887d[_0x2b112a(0x212)],await _0x264687[_0x2b112a(0x202)]();}if(_0x355624[_0x2b112a(0x215)]){const _0x413bc0=await Role_1[_0x2b112a(0x206)][_0x2b112a(0x1ed)]({'guild':_0x4c58a5[_0x2b112a(0x1f1)]['id'],'referrals':{'$lte':_0x25887d[_0x2b112a(0x216)]}});if(!_0x413bc0['length'])throw new errors[(_0x2b112a(0x20b))](errors[_0x2b112a(0x1f0)][_0x2b112a(0x1f8)],this[_0x2b112a(0x1fb)][_0x2b112a(0x213)][_0x2b112a(0x1e6)](_0x4c58a5[_0x2b112a(0x1f1)][_0x2b112a(0x1ec)][_0x2b112a(0x1eb)],_0x2b112a(0x1fc),'noReferralRewards',_0x25887d['uses']));await _0x4c58a5[_0x2b112a(0x1f9)][_0x2b112a(0x204)][_0x2b112a(0x1f5)](_0x413bc0[_0x2b112a(0x1e9)](_0x31c8ba=>_0x31c8ba['id'])),await _0x4c58a5['channel']['send']({'embed':{'color':tesseract_1[_0x2b112a(0x1e5)]['COLORS'][_0x2b112a(0x1ef)],'title':_0x2b112a(0x20f),'description':this[_0x2b112a(0x1fb)][_0x2b112a(0x213)][_0x2b112a(0x1e6)](_0x4c58a5['guild'][_0x2b112a(0x1ec)][_0x2b112a(0x1eb)],_0x2b112a(0x20d),_0x2b112a(0x203),_0x4c58a5[_0x2b112a(0x1e8)][_0x2b112a(0x1f6)],_0x25887d[_0x2b112a(0x216)])}});}else await _0x4c58a5[_0x2b112a(0x1f2)][_0x2b112a(0x1fa)]({'embed':{'color':tesseract_1[_0x2b112a(0x1e5)][_0x2b112a(0x20c)]['IRIS'],'title':_0x2b112a(0x20a),'description':_0x25887d[_0x2b112a(0x1e4)],'fields':[{'name':_0x2b112a(0x208),'value':_0x25887d[_0x2b112a(0x212)],'inline':!![]},{'name':_0x2b112a(0x207),'value':(_0x25887d[_0x2b112a(0x216)]||0x0)[_0x2b112a(0x200)](),'inline':!![]}]}});};}};
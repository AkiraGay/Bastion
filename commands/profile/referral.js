const a137_0x1292=['Referral\x20Invite','tag','constructor','save','document','noReferralsChannel','getString','fetchInvites','uses','add','send','2727000AYFlwm','author','referralRewardsClaim','toLocaleString','apply','DiscordError','Referral\x20Reward\x20Claimed','124069mIkyOj','5UelxlB','referralsChannel','2crjKzO','createInvite','return\x20/\x22\x20+\x20this\x20+\x20\x22/','It\x20allows\x20you\x20to\x20see\x20your\x20referral\x20invite\x20that\x20you\x20can\x20use\x20to\x20invite\x20people\x20to\x20the\x20server\x20and\x20increase\x20your\x20referral\x20points.\x20It\x20can\x20also\x20be\x20used\x20to\x20claim\x20your\x20referral\x20rewards\x20set\x20by\x20the\x20server\x20managers.','locale','code','noReferralRewards','find','215022ZjiiVk','claim','get','url','cache','584284CVZQhl','COLORS','Uses','default','client','1NZUVBV','Referral\x20invite\x20generated\x20for\x20','Code','channel','733946wbsldy','Constants','IRIS','referral','map','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','member','errors','guild','541471KUZdNl','length','180069NrMkuT','@bastion/tesseract','language','info'];const a137_0x3c79=function(_0x590a56,_0x4c5df2){_0x590a56=_0x590a56-0x1bd;let _0x286e1f=a137_0x1292[_0x590a56];return _0x286e1f;};const a137_0x312d45=a137_0x3c79;(function(_0x1908b8,_0x18f5d6){const _0x10f515=a137_0x3c79;while(!![]){try{const _0xadd5e=-parseInt(_0x10f515(0x1f6))*-parseInt(_0x10f515(0x1d5))+-parseInt(_0x10f515(0x1e2))+parseInt(_0x10f515(0x1d3))*-parseInt(_0x10f515(0x1d2))+-parseInt(_0x10f515(0x1dd))+-parseInt(_0x10f515(0x1eb))+parseInt(_0x10f515(0x1e7))*-parseInt(_0x10f515(0x1f4))+parseInt(_0x10f515(0x1cb));if(_0xadd5e===_0x18f5d6)break;else _0x1908b8['push'](_0x1908b8['shift']());}catch(_0x2ec776){_0x1908b8['push'](_0x1908b8['shift']());}}}(a137_0x1292,0x5fb86));const a137_0x275623=function(){let _0x1c02f1=!![];return function(_0x3f93ce,_0xc75bda){const _0x32035e=_0x1c02f1?function(){const _0x267ab8=a137_0x3c79;if(_0xc75bda){const _0x47ba15=_0xc75bda[_0x267ab8(0x1cf)](_0x3f93ce,arguments);return _0xc75bda=null,_0x47ba15;}}:function(){};return _0x1c02f1=![],_0x32035e;};}(),a137_0x421e60=a137_0x275623(this,function(){const _0x50602c=function(){const _0x320c11=a137_0x3c79,_0x1dc7d8=_0x50602c[_0x320c11(0x1c2)](_0x320c11(0x1d7))()[_0x320c11(0x1c2)](_0x320c11(0x1f0));return!_0x1dc7d8['test'](a137_0x421e60);};return _0x50602c();});a137_0x421e60();'use strict';const tesseract_1=require(a137_0x312d45(0x1bd)),Member_1=require('../../models/Member'),Role_1=require('../../models/Role'),errors=require('../../utils/errors');module['exports']=class ReferralCommand extends tesseract_1['Command']{constructor(){const _0x27c5c9=a137_0x312d45;super(_0x27c5c9(0x1ee),{'description':_0x27c5c9(0x1d8),'triggers':[],'arguments':{'boolean':[_0x27c5c9(0x1de)]},'scope':_0x27c5c9(0x1f3),'owner':![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[],'syntax':[_0x27c5c9(0x1ee),'referral\x20--claim']}),this['exec']=async(_0x33721c,_0x172138)=>{const _0x2b8ba8=_0x27c5c9,_0x3f1f5e=await Member_1[_0x2b8ba8(0x1e5)]['findOne']({'user':_0x33721c[_0x2b8ba8(0x1cc)]['id'],'guild':_0x33721c[_0x2b8ba8(0x1f3)]['id']});let _0x2a803e;if(_0x3f1f5e[_0x2b8ba8(0x1ee)]){const _0x12828f=await _0x33721c['guild'][_0x2b8ba8(0x1c7)]();_0x2a803e=_0x12828f[_0x2b8ba8(0x1df)](_0x3f1f5e['referral']);}if(!_0x2a803e){const _0x3c71eb=_0x33721c[_0x2b8ba8(0x1f3)]['channels'][_0x2b8ba8(0x1e1)][_0x2b8ba8(0x1df)](_0x33721c[_0x2b8ba8(0x1f3)][_0x2b8ba8(0x1c4)][_0x2b8ba8(0x1d4)]);if(!_0x3c71eb)throw new errors[(_0x2b8ba8(0x1d0))](errors['BASTION_ERROR_TYPE']['ERROR'],this[_0x2b8ba8(0x1e6)][_0x2b8ba8(0x1d9)][_0x2b8ba8(0x1c6)](_0x33721c[_0x2b8ba8(0x1f3)][_0x2b8ba8(0x1c4)]['language'],'errors',_0x2b8ba8(0x1c5)));_0x2a803e=await _0x3c71eb[_0x2b8ba8(0x1d6)]({'reason':_0x2b8ba8(0x1e8)+_0x33721c[_0x2b8ba8(0x1cc)][_0x2b8ba8(0x1c1)],'temporary':![],'maxAge':0x0,'maxUses':0x0,'unique':!![]}),_0x3f1f5e[_0x2b8ba8(0x1ee)]=_0x2a803e[_0x2b8ba8(0x1da)],await _0x3f1f5e[_0x2b8ba8(0x1c3)]();}if(_0x172138[_0x2b8ba8(0x1de)]){const _0x302d0a=await Role_1[_0x2b8ba8(0x1e5)][_0x2b8ba8(0x1dc)]({'guild':_0x33721c['guild']['id'],'referrals':{'$lte':_0x2a803e['uses']}});if(!_0x302d0a[_0x2b8ba8(0x1f5)])throw new errors[(_0x2b8ba8(0x1d0))](errors['BASTION_ERROR_TYPE']['ERROR'],this[_0x2b8ba8(0x1e6)][_0x2b8ba8(0x1d9)][_0x2b8ba8(0x1c6)](_0x33721c['guild'][_0x2b8ba8(0x1c4)]['language'],_0x2b8ba8(0x1f2),_0x2b8ba8(0x1db),_0x2a803e[_0x2b8ba8(0x1c8)]));await _0x33721c[_0x2b8ba8(0x1f1)]['roles'][_0x2b8ba8(0x1c9)](_0x302d0a[_0x2b8ba8(0x1ef)](_0x1586b5=>_0x1586b5['id'])),await _0x33721c['channel'][_0x2b8ba8(0x1ca)]({'embed':{'color':tesseract_1[_0x2b8ba8(0x1ec)][_0x2b8ba8(0x1e3)][_0x2b8ba8(0x1ed)],'title':_0x2b8ba8(0x1d1),'description':this[_0x2b8ba8(0x1e6)][_0x2b8ba8(0x1d9)]['getString'](_0x33721c['guild'][_0x2b8ba8(0x1c4)][_0x2b8ba8(0x1be)],_0x2b8ba8(0x1bf),_0x2b8ba8(0x1cd),_0x33721c[_0x2b8ba8(0x1cc)][_0x2b8ba8(0x1c1)],_0x2a803e[_0x2b8ba8(0x1c8)])}});}else await _0x33721c[_0x2b8ba8(0x1ea)][_0x2b8ba8(0x1ca)]({'embed':{'color':tesseract_1[_0x2b8ba8(0x1ec)][_0x2b8ba8(0x1e3)]['IRIS'],'title':_0x2b8ba8(0x1c0),'description':_0x2a803e[_0x2b8ba8(0x1e0)],'fields':[{'name':_0x2b8ba8(0x1e9),'value':_0x2a803e[_0x2b8ba8(0x1da)],'inline':!![]},{'name':_0x2b8ba8(0x1e4),'value':(_0x2a803e['uses']||0x0)[_0x2b8ba8(0x1ce)](),'inline':!![]}]}});};}};
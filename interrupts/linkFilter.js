const a169_0x3814=['MANAGE_CHANNELS','apply','safelist','has','deletable','discord.js','content','deleteLink','Channel','channel','permissionsFor','exec','member','tag','roles','guild','return\x20/\x22\x20+\x20this\x20+\x20\x22/','toLowerCase','length','exports','constructor','TextChannel','test','linkFilter','enabled','filters','URI','cache','catch','whitelist','Interrupt','includes','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','\x20/\x20','some','document','name'];(function(_0x4e58c1,_0x4f0c9e){const _0x381449=function(_0x4f2b50){while(--_0x4f2b50){_0x4e58c1['push'](_0x4e58c1['shift']());}},_0x2a74c4=function(){const _0x1826aa={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x40161b,_0x390a8d,_0x49ea77,_0x3e475f){_0x3e475f=_0x3e475f||{};let _0x3ed1ae=_0x390a8d+'='+_0x49ea77,_0x35d14b=0x0;for(let _0x53f372=0x0,_0x5a12aa=_0x40161b['length'];_0x53f372<_0x5a12aa;_0x53f372++){const _0x24fc34=_0x40161b[_0x53f372];_0x3ed1ae+=';\x20'+_0x24fc34;const _0x30bdc6=_0x40161b[_0x24fc34];_0x40161b['push'](_0x30bdc6),_0x5a12aa=_0x40161b['length'],_0x30bdc6!==!![]&&(_0x3ed1ae+='='+_0x30bdc6);}_0x3e475f['cookie']=_0x3ed1ae;},'removeCookie':function(){return'dev';},'getCookie':function(_0x398ba7,_0x310742){_0x398ba7=_0x398ba7||function(_0x2e9391){return _0x2e9391;};const _0x5f2880=_0x398ba7(new RegExp('(?:^|;\x20)'+_0x310742['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0xaffa3a=function(_0x63b673,_0x488bd5){_0x63b673(++_0x488bd5);};return _0xaffa3a(_0x381449,_0x4f0c9e),_0x5f2880?decodeURIComponent(_0x5f2880[0x1]):undefined;}},_0x4f676e=function(){const _0x13f106=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x13f106['test'](_0x1826aa['removeCookie']['toString']());};_0x1826aa['updateCookie']=_0x4f676e;let _0x4ec1d7='';const _0x257041=_0x1826aa['updateCookie']();if(!_0x257041)_0x1826aa['setCookie'](['*'],'counter',0x1);else _0x257041?_0x4ec1d7=_0x1826aa['getCookie'](null,'counter'):_0x1826aa['removeCookie']();};_0x2a74c4();}(a169_0x3814,0x19e));const a169_0x2a74=function(_0x4e58c1,_0x4f0c9e){_0x4e58c1=_0x4e58c1-0xc3;let _0x381449=a169_0x3814[_0x4e58c1];return _0x381449;};const _0x25dd8e=a169_0x2a74,a169_0x4f676e=function(){let _0x257041=!![];return function(_0x40161b,_0x390a8d){const _0x49ea77=_0x257041?function(){const _0x57ef05=a169_0x2a74;if(_0x390a8d){const _0x3e475f=_0x390a8d[_0x57ef05(0xe2)](_0x40161b,arguments);return _0x390a8d=null,_0x3e475f;}}:function(){};return _0x257041=![],_0x49ea77;};}(),a169_0x1826aa=a169_0x4f676e(this,function(){const _0x3ed1ae=function(){const _0x3bfafc=a169_0x2a74,_0x35d14b=_0x3ed1ae[_0x3bfafc(0xd0)](_0x3bfafc(0xcc))()[_0x3bfafc(0xd0)](_0x3bfafc(0xdc));return!_0x35d14b[_0x3bfafc(0xd2)](a169_0x1826aa);};return _0x3ed1ae();});a169_0x1826aa();'use strict';const tesseract_1=require('@bastion/tesseract'),discord_js_1=require(_0x25dd8e(0xe6)),regex=require('../utils/regex');module[_0x25dd8e(0xcf)]=class LinkFilter extends tesseract_1[_0x25dd8e(0xda)]{constructor(){const _0x2f816a=_0x25dd8e;super(_0x2f816a(0xd3),{'type':0x0}),this[_0x2f816a(0xc3)]=_0x53f372=>{const _0x1004e8=_0x2f816a;if(_0x53f372[_0x1004e8(0xe5)])_0x53f372['delete']()['catch'](()=>{});},this[_0x2f816a(0xc7)]=async _0x5a12aa=>{const _0x2409b4=_0x2f816a;if(!_0x5a12aa['guild'])return;if(!(_0x5a12aa[_0x2409b4(0xc5)]instanceof discord_js_1[_0x2409b4(0xd1)]))return;if(!_0x5a12aa[_0x2409b4(0xe7)]||!_0x5a12aa[_0x2409b4(0xe7)][_0x2409b4(0xce)])return![];const _0x24fc34=_0x5a12aa[_0x2409b4(0xcb)];if(_0x5a12aa['member']&&_0x5a12aa['member'][_0x2409b4(0xca)][_0x2409b4(0xd7)]['some'](_0x30bdc6=>_0x30bdc6[_0x2409b4(0xe0)][_0x2409b4(0xcd)]()===_0x2409b4(0xe3)))return![];if(_0x5a12aa[_0x2409b4(0xc5)][_0x2409b4(0xc6)](_0x5a12aa[_0x2409b4(0xc8)])&&_0x5a12aa[_0x2409b4(0xc5)]['permissionsFor'](_0x5a12aa[_0x2409b4(0xc8)])[_0x2409b4(0xe4)]([_0x2409b4(0xe1),'MANAGE_MESSAGES']))return![];if(!_0x24fc34[_0x2409b4(0xdf)]||!_0x24fc34[_0x2409b4(0xdf)][_0x2409b4(0xd5)]||!_0x24fc34['document'][_0x2409b4(0xd5)][_0x2409b4(0xd3)]||!_0x24fc34['document'][_0x2409b4(0xd5)][_0x2409b4(0xd3)][_0x2409b4(0xd4)])return![];if(_0x24fc34[_0x2409b4(0xdf)][_0x2409b4(0xd5)][_0x2409b4(0xd3)][_0x2409b4(0xd9)]){if(_0x24fc34[_0x2409b4(0xdf)][_0x2409b4(0xd5)]['linkFilter']['whitelist'][_0x2409b4(0xdb)](_0x5a12aa[_0x2409b4(0xc5)]['id']))return![];if(_0x24fc34[_0x2409b4(0xdf)][_0x2409b4(0xd5)][_0x2409b4(0xd3)][_0x2409b4(0xd9)][_0x2409b4(0xde)](_0x398ba7=>_0x5a12aa[_0x2409b4(0xc8)]['roles'][_0x2409b4(0xd7)]['has'](_0x398ba7)))return![];}if(regex[_0x2409b4(0xd6)][_0x2409b4(0xd2)](_0x5a12aa['content']))return _0x5a12aa[_0x2409b4(0xc8)]['addInfraction']('Unauthorized\x20to\x20send\x20links.'),this[_0x2409b4(0xc3)](_0x5a12aa),_0x24fc34['createModerationLog']({'event':_0x2409b4(0xd3),'fields':[{'name':'User','value':_0x5a12aa['author'][_0x2409b4(0xc9)]+_0x2409b4(0xdd)+_0x5a12aa['author']['id']},{'name':_0x2409b4(0xc4),'value':_0x5a12aa[_0x2409b4(0xc5)][_0x2409b4(0xe0)]+_0x2409b4(0xdd)+_0x5a12aa[_0x2409b4(0xc5)]['id']}]})[_0x2409b4(0xd8)](()=>{}),!![];return![];};}};
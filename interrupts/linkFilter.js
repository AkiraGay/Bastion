const a154_0x5b45=['@bastion/tesseract','permissionsFor','whitelist','\x20/\x20','Interrupt','User','cache','apply','length','name','author','channel','linkFilter','roles','has','createModerationLog','tag','enabled','guild','URI','return\x20/\x22\x20+\x20this\x20+\x20\x22/','member','document','MANAGE_MESSAGES','constructor','exec','catch','Unauthorized\x20to\x20send\x20links.','delete','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','includes','content','../utils/regex','addInfraction','deleteLink','discord.js','Channel','filters','some','test'];(function(_0x227110,_0x5b45dd){const _0x3db1d8=function(_0x53a867){while(--_0x53a867){_0x227110['push'](_0x227110['shift']());}},_0x1ab937=function(){const _0x8f4362={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x5bcd21,_0x524652,_0x34ab0e,_0x120759){_0x120759=_0x120759||{};let _0x29eb68=_0x524652+'='+_0x34ab0e,_0x221c27=0x0;for(let _0xd49bc4=0x0,_0x119240=_0x5bcd21['length'];_0xd49bc4<_0x119240;_0xd49bc4++){const _0x523f6b=_0x5bcd21[_0xd49bc4];_0x29eb68+=';\x20'+_0x523f6b;const _0x5c64d4=_0x5bcd21[_0x523f6b];_0x5bcd21['push'](_0x5c64d4),_0x119240=_0x5bcd21['length'],_0x5c64d4!==!![]&&(_0x29eb68+='='+_0x5c64d4);}_0x120759['cookie']=_0x29eb68;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1157e8,_0x1d896e){_0x1157e8=_0x1157e8||function(_0x92fe30){return _0x92fe30;};const _0x27d9ab=_0x1157e8(new RegExp('(?:^|;\x20)'+_0x1d896e['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x3678b7=function(_0x3fa49e,_0x555b01){_0x3fa49e(++_0x555b01);};return _0x3678b7(_0x3db1d8,_0x5b45dd),_0x27d9ab?decodeURIComponent(_0x27d9ab[0x1]):undefined;}},_0x2b6b72=function(){const _0x1e8b39=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x1e8b39['test'](_0x8f4362['removeCookie']['toString']());};_0x8f4362['updateCookie']=_0x2b6b72;let _0x3929b5='';const _0x191fe5=_0x8f4362['updateCookie']();if(!_0x191fe5)_0x8f4362['setCookie'](['*'],'counter',0x1);else _0x191fe5?_0x3929b5=_0x8f4362['getCookie'](null,'counter'):_0x8f4362['removeCookie']();};_0x1ab937();}(a154_0x5b45,0x11a));const a154_0x3db1=function(_0x227110,_0x5b45dd){_0x227110=_0x227110-0x0;let _0x3db1d8=a154_0x5b45[_0x227110];return _0x3db1d8;};const _0x1d8a24=a154_0x3db1,a154_0x8f4362=function(){let _0x3929b5=!![];return function(_0x191fe5,_0x5bcd21){const _0x524652=_0x3929b5?function(){const _0x481f6a=a154_0x3db1;if(_0x5bcd21){const _0x34ab0e=_0x5bcd21[_0x481f6a('0x5')](_0x191fe5,arguments);return _0x5bcd21=null,_0x34ab0e;}}:function(){};return _0x3929b5=![],_0x524652;};}(),a154_0x53a867=a154_0x8f4362(this,function(){const _0x120759=function(){const _0xac13e0=a154_0x3db1,_0x29eb68=_0x120759[_0xac13e0('0x16')](_0xac13e0('0x12'))()['constructor'](_0xac13e0('0x1b'));return!_0x29eb68[_0xac13e0('0x25')](a154_0x53a867);};return _0x120759();});a154_0x53a867();'use strict';const tesseract_1=require(_0x1d8a24('0x26')),discord_js_1=require(_0x1d8a24('0x21')),regex=require(_0x1d8a24('0x1e'));module['exports']=class LinkFilter extends tesseract_1[_0x1d8a24('0x2')]{constructor(){const _0x3e3cf9=_0x1d8a24;super('linkFilter',{'type':0x0}),this[_0x3e3cf9('0x20')]=_0x221c27=>{const _0x156fad=_0x3e3cf9;if(_0x221c27['deletable'])_0x221c27[_0x156fad('0x1a')]()[_0x156fad('0x18')](()=>{});},this[_0x3e3cf9('0x17')]=async _0xd49bc4=>{const _0x547303=_0x3e3cf9;if(!_0xd49bc4[_0x547303('0x10')])return;if(!(_0xd49bc4[_0x547303('0x9')]instanceof discord_js_1['TextChannel']))return;if(!_0xd49bc4[_0x547303('0x1d')]||!_0xd49bc4[_0x547303('0x1d')][_0x547303('0x6')])return![];const _0x119240=_0xd49bc4[_0x547303('0x10')];if(_0xd49bc4[_0x547303('0x13')]&&_0xd49bc4['member'][_0x547303('0xb')][_0x547303('0x4')][_0x547303('0x24')](_0x523f6b=>_0x523f6b[_0x547303('0x7')]['toLowerCase']()==='safelist'))return![];if(_0xd49bc4['channel'][_0x547303('0x27')](_0xd49bc4[_0x547303('0x13')])&&_0xd49bc4['channel']['permissionsFor'](_0xd49bc4[_0x547303('0x13')])[_0x547303('0xc')](['MANAGE_CHANNELS',_0x547303('0x15')]))return![];if(!_0x119240[_0x547303('0x14')]||!_0x119240[_0x547303('0x14')][_0x547303('0x23')]||!_0x119240[_0x547303('0x14')][_0x547303('0x23')]['linkFilter']||!_0x119240[_0x547303('0x14')]['filters'][_0x547303('0xa')][_0x547303('0xf')])return![];if(_0x119240[_0x547303('0x14')]['filters'][_0x547303('0xa')][_0x547303('0x0')]){if(_0x119240['document'][_0x547303('0x23')][_0x547303('0xa')][_0x547303('0x0')][_0x547303('0x1c')](_0xd49bc4['channel']['id']))return![];if(_0x119240[_0x547303('0x14')][_0x547303('0x23')][_0x547303('0xa')]['whitelist']['some'](_0x5c64d4=>_0xd49bc4[_0x547303('0x13')][_0x547303('0xb')][_0x547303('0x4')][_0x547303('0xc')](_0x5c64d4)))return![];}if(regex[_0x547303('0x11')][_0x547303('0x25')](_0xd49bc4['content']))return _0xd49bc4[_0x547303('0x13')][_0x547303('0x1f')](_0x547303('0x19')),this['deleteLink'](_0xd49bc4),_0x119240[_0x547303('0xd')]({'event':_0x547303('0xa'),'fields':[{'name':_0x547303('0x3'),'value':_0xd49bc4[_0x547303('0x8')][_0x547303('0xe')]+'\x20/\x20'+_0xd49bc4[_0x547303('0x8')]['id']},{'name':_0x547303('0x22'),'value':_0xd49bc4[_0x547303('0x9')]['name']+_0x547303('0x1')+_0xd49bc4[_0x547303('0x9')]['id']}]})[_0x547303('0x18')](()=>{}),!![];return![];};}};
const a184_0x2447=['concat','Greetings!','createDM','uses','forUsers','../utils/embeds','stringify','LISTENER_MODE','../utils/variables','delete','privateMessage','map','Logger','find','fetch','Auto\x20added\x20via\x20Auto\x20Roles','handleInviteRoles','catch','send','length','handleAutoRoles','replaceMemberVariables','then','@bastion/tesseract','client','guild','filter','channels','../assets/greetings.json','has','autoAssignable','deletable','values','channelId','getDocument','Member','floor','Member\x20ID','handleGreetings','message','code','isPublicBastion','Greetings\x20from\x20','timeout','default','Member\x20Type','get','random','.\x20Welcome\x20to\x20our\x20server!','parse','Listener','add','../models/Role','exports','test','guildMemberAdd','tag','greeting','cache','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','exec','apply','joinedTimestamp','_id','invites','bot','roles','user','createLog','createdAt','Joined\x20using\x20the\x20invite\x20','constructor','generateEmbed','Bot'];(function(_0x33abb8,_0x283ec9){const _0x2447c2=function(_0x4d1d8c){while(--_0x4d1d8c){_0x33abb8['push'](_0x33abb8['shift']());}},_0x48025b=function(){const _0x5af570={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x501815,_0x3a4a05,_0x197e98,_0x33ec7b){_0x33ec7b=_0x33ec7b||{};let _0x30caab=_0x3a4a05+'='+_0x197e98,_0x404c90=0x0;for(let _0x550ee5=0x0,_0x52b709=_0x501815['length'];_0x550ee5<_0x52b709;_0x550ee5++){const _0x540472=_0x501815[_0x550ee5];_0x30caab+=';\x20'+_0x540472;const _0x5104d7=_0x501815[_0x540472];_0x501815['push'](_0x5104d7),_0x52b709=_0x501815['length'],_0x5104d7!==!![]&&(_0x30caab+='='+_0x5104d7);}_0x33ec7b['cookie']=_0x30caab;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3b5650,_0x4539ac){_0x3b5650=_0x3b5650||function(_0x18dd00){return _0x18dd00;};const _0x3022d9=_0x3b5650(new RegExp('(?:^|;\x20)'+_0x4539ac['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x3681f1=function(_0x2d7c9b,_0x2ac4f5){_0x2d7c9b(++_0x2ac4f5);};return _0x3681f1(_0x2447c2,_0x283ec9),_0x3022d9?decodeURIComponent(_0x3022d9[0x1]):undefined;}},_0x2b10e8=function(){const _0x3d51bf=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3d51bf['test'](_0x5af570['removeCookie']['toString']());};_0x5af570['updateCookie']=_0x2b10e8;let _0x31385b='';const _0x1037be=_0x5af570['updateCookie']();if(!_0x1037be)_0x5af570['setCookie'](['*'],'counter',0x1);else _0x1037be?_0x31385b=_0x5af570['getCookie'](null,'counter'):_0x5af570['removeCookie']();};_0x48025b();}(a184_0x2447,0x1e9));const a184_0x4802=function(_0x33abb8,_0x283ec9){_0x33abb8=_0x33abb8-0x89;let _0x2447c2=a184_0x2447[_0x33abb8];return _0x2447c2;};const _0x127827=a184_0x4802,a184_0x2b10e8=function(){let _0x1037be=!![];return function(_0x501815,_0x3a4a05){const _0x197e98=_0x1037be?function(){const _0xcb9b2d=a184_0x4802;if(_0x3a4a05){const _0x33ec7b=_0x3a4a05[_0xcb9b2d(0x99)](_0x501815,arguments);return _0x3a4a05=null,_0x33ec7b;}}:function(){};return _0x1037be=![],_0x197e98;};}(),a184_0x5af570=a184_0x2b10e8(this,function(){const _0x30caab=function(){const _0x78ba0f=a184_0x4802,_0x404c90=_0x30caab[_0x78ba0f(0xa3)]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()['constructor'](_0x78ba0f(0x97));return!_0x404c90[_0x78ba0f(0x92)](a184_0x5af570);};return _0x30caab();});a184_0x5af570();'use strict';const tesseract_1=require(_0x127827(0xbd)),Role_1=require(_0x127827(0x90)),constants=require('../utils/constants'),embeds=require(_0x127827(0xab)),variables=require(_0x127827(0xae)),greetings=require(_0x127827(0xc2));module[_0x127827(0x91)]=class GuildMemberAddListener extends tesseract_1[_0x127827(0x8e)]{constructor(){const _0x598956=_0x127827;super(_0x598956(0x93),{'mode':tesseract_1['Constants'][_0x598956(0xad)]['ON']}),this['handleAutoRoles']=async(_0x550ee5,_0x52b709)=>{const _0x26a830=_0x598956,_0x540472=await Role_1[_0x26a830(0xd2)][_0x26a830(0xb3)]({'guild':_0x52b709['id'],'autoAssignable':{'$exists':!![],'$ne':null}}),_0x5104d7=_0x540472['filter'](_0x3022d9=>_0x3022d9[_0x26a830(0xc4)]&&_0x3022d9['autoAssignable']['forBots'])[_0x26a830(0xb1)](_0x3681f1=>_0x3681f1[_0x26a830(0x9b)]),_0x3b5650=_0x540472['filter'](_0x18dd00=>_0x18dd00[_0x26a830(0xc4)]&&_0x18dd00['autoAssignable'][_0x26a830(0xaa)])[_0x26a830(0xb1)](_0x2d7c9b=>_0x2d7c9b[_0x26a830(0x9b)]),_0x4539ac=_0x540472[_0x26a830(0xc0)](_0x2ac4f5=>_0x2ac4f5[_0x26a830(0xc4)]&&(Number(_0x2ac4f5[_0x26a830(0xc4)]['forBots'])^Number(_0x2ac4f5[_0x26a830(0xc4)]['forUsers']))===0x0)[_0x26a830(0xb1)](_0x3d51bf=>_0x3d51bf[_0x26a830(0x9b)]);(_0x5104d7[_0x26a830(0xb9)]||_0x3b5650[_0x26a830(0xb9)]||_0x4539ac['length'])&&_0x550ee5[_0x26a830(0x9e)][_0x26a830(0x8f)](_0x4539ac[_0x26a830(0xa6)](_0x550ee5[_0x26a830(0x9f)][_0x26a830(0x9d)]?_0x5104d7:_0x3b5650),_0x26a830(0xb5));},this[_0x598956(0xcc)]=(_0x267e07,_0x1f6555)=>{const _0x18d578=_0x598956;if(!_0x1f6555['greeting'])return;_0x1f6555[_0x18d578(0x95)][_0x18d578(0xb0)]&&_0x267e07[_0x18d578(0xa8)]()[_0x18d578(0xbc)](_0x275118=>{const _0x608381=_0x18d578;_0x275118['send']({'embed':{...JSON[_0x608381(0x8d)](variables['replaceMemberVariables'](JSON['stringify'](_0x387849),_0x267e07)),'footer':{'text':_0x608381(0xd0)+_0x267e07[_0x608381(0xbf)]['name']+_0x608381(0x8c)}}})[_0x608381(0xb7)](()=>{});})[_0x18d578(0xb7)](()=>{});if(!_0x1f6555[_0x18d578(0x95)][_0x18d578(0xc7)])return;if(!_0x267e07['guild'][_0x18d578(0xc1)][_0x18d578(0x96)][_0x18d578(0xc3)](_0x1f6555[_0x18d578(0x95)][_0x18d578(0xc7)]))return;const _0x49517d=_0x267e07['guild'][_0x18d578(0xc1)][_0x18d578(0x96)][_0x18d578(0x8a)](_0x1f6555[_0x18d578(0x95)][_0x18d578(0xc7)]),_0x387849=embeds[_0x18d578(0xa4)](_0x1f6555[_0x18d578(0x95)]['message']?_0x1f6555['greeting'][_0x18d578(0xcd)]:greetings[Math[_0x18d578(0xca)](Math[_0x18d578(0x8b)]()*greetings[_0x18d578(0xb9)])]);_0x49517d[_0x18d578(0xb8)]({'embed':{...JSON[_0x18d578(0x8d)](variables[_0x18d578(0xbb)](JSON[_0x18d578(0xac)](_0x387849),_0x267e07)),'footer':{'text':_0x18d578(0xa7)}}})[_0x18d578(0xbc)](_0x51e866=>{const _0x286cbb=_0x18d578;_0x1f6555[_0x286cbb(0x95)][_0x286cbb(0xd1)]&&_0x51e866[_0x286cbb(0xc5)]&&_0x51e866[_0x286cbb(0xaf)]({'timeout':_0x1f6555[_0x286cbb(0x95)][_0x286cbb(0xd1)]*0xea60})[_0x286cbb(0xb7)](()=>{});})['catch'](()=>{});},this[_0x598956(0xb6)]=async _0x8428bb=>{const _0x5af6f=_0x598956;if(constants[_0x5af6f(0xcf)](_0x8428bb[_0x5af6f(0xbe)][_0x5af6f(0x9f)]))return;const _0x18ea78=await _0x8428bb['guild']['fetchInvites'](),_0x1aee10=_0x18ea78[_0x5af6f(0xb3)](_0x4377a8=>_0x4377a8[_0x5af6f(0xa9)]>_0x8428bb[_0x5af6f(0xbf)][_0x5af6f(0x9c)][_0x4377a8[_0x5af6f(0xce)]]);for(const _0x2f2a2f of _0x18ea78[_0x5af6f(0xc6)]()){_0x8428bb['guild']['invites'][_0x2f2a2f[_0x5af6f(0xce)]]=_0x2f2a2f[_0x5af6f(0xa9)]||0x0;}const _0x144f8e=await Role_1[_0x5af6f(0xd2)]['find']({'guild':_0x8428bb['guild']['id'],'invite':_0x1aee10[_0x5af6f(0xce)]});_0x144f8e&&_0x144f8e[_0x5af6f(0xb9)]&&await _0x8428bb['roles']['add'](_0x144f8e[_0x5af6f(0xb1)](_0x299fa6=>_0x299fa6['_id']),_0x5af6f(0xa2)+_0x1aee10[_0x5af6f(0xce)]);},this[_0x598956(0x98)]=async _0x3566fd=>{const _0x40f31f=_0x598956;_0x3566fd['partial']&&await _0x3566fd[_0x40f31f(0xb4)]();const _0x8982b5=_0x3566fd[_0x40f31f(0xbf)],_0x5f1c0a=await _0x8982b5[_0x40f31f(0xc8)]();this[_0x40f31f(0xcc)](_0x3566fd,_0x5f1c0a),this[_0x40f31f(0xba)](_0x3566fd,_0x8982b5),this['handleInviteRoles'](_0x3566fd)[_0x40f31f(0xb7)](tesseract_1[_0x40f31f(0xb2)]['error']),_0x8982b5[_0x40f31f(0xa0)]({'event':_0x40f31f(0x93),'fields':[{'name':_0x40f31f(0xc9),'value':_0x3566fd[_0x40f31f(0x9f)][_0x40f31f(0x94)],'inline':!![]},{'name':_0x40f31f(0xcb),'value':_0x3566fd['id'],'inline':!![]},{'name':_0x40f31f(0x89),'value':_0x3566fd['user'][_0x40f31f(0x9d)]?_0x40f31f(0xa5):'Human','inline':!![]},{'name':'Joined\x20Discord','value':_0x3566fd[_0x40f31f(0x9f)][_0x40f31f(0xa1)]['toUTCString'](),'inline':!![]}],'timestamp':_0x3566fd[_0x40f31f(0x9a)]});};}};
const a177_0x1899=['uses','Joined\x20Discord','default','autoAssignable','channelId','error','client','roles','generateEmbed','@bastion/tesseract','partial','catch','delete','constructor','deletable','Human','exec','return\x20/\x22\x20+\x20this\x20+\x20\x22/','getDocument','channels','handleGreetings','Bot','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','values','length','message','send','filter','user','forBots','code','tag','guild','Greetings\x20from\x20','forUsers','greeting','Joined\x20using\x20the\x20invite\x20','find','LISTENER_MODE','toUTCString','../utils/variables','Listener','get','createDM','fetch','map','random','handleInviteRoles','replaceMemberVariables','_id','add','createdAt','joinedTimestamp','guildMemberAdd','createLog','fetchInvites','Greetings!','then','apply','handleAutoRoles','test','Member','stringify','isPublicBastion','../utils/constants','cache','floor','Member\x20Type','parse'];(function(_0x269fd6,_0x18994a){const _0x2c86cc=function(_0x5dfd1b){while(--_0x5dfd1b){_0x269fd6['push'](_0x269fd6['shift']());}},_0x2f2061=function(){const _0x489530={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x282246,_0x5607d6,_0x4eae15,_0x1fa1fc){_0x1fa1fc=_0x1fa1fc||{};let _0x22438f=_0x5607d6+'='+_0x4eae15,_0x4a3973=0x0;for(let _0x290362=0x0,_0x18bb89=_0x282246['length'];_0x290362<_0x18bb89;_0x290362++){const _0xeabf6f=_0x282246[_0x290362];_0x22438f+=';\x20'+_0xeabf6f;const _0x571ab4=_0x282246[_0xeabf6f];_0x282246['push'](_0x571ab4),_0x18bb89=_0x282246['length'],_0x571ab4!==!![]&&(_0x22438f+='='+_0x571ab4);}_0x1fa1fc['cookie']=_0x22438f;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3e5581,_0x4a627d){_0x3e5581=_0x3e5581||function(_0x243711){return _0x243711;};const _0x1f1706=_0x3e5581(new RegExp('(?:^|;\x20)'+_0x4a627d['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x2a8785=function(_0x5a2b61,_0x1d04cb){_0x5a2b61(++_0x1d04cb);};return _0x2a8785(_0x2c86cc,_0x18994a),_0x1f1706?decodeURIComponent(_0x1f1706[0x1]):undefined;}},_0x5119a0=function(){const _0x46451a=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x46451a['test'](_0x489530['removeCookie']['toString']());};_0x489530['updateCookie']=_0x5119a0;let _0x3062eb='';const _0x3c7af8=_0x489530['updateCookie']();if(!_0x3c7af8)_0x489530['setCookie'](['*'],'counter',0x1);else _0x3c7af8?_0x3062eb=_0x489530['getCookie'](null,'counter'):_0x489530['removeCookie']();};_0x2f2061();}(a177_0x1899,0x10a));const a177_0x2c86=function(_0x269fd6,_0x18994a){_0x269fd6=_0x269fd6-0x0;let _0x2c86cc=a177_0x1899[_0x269fd6];return _0x2c86cc;};const _0x14910f=a177_0x2c86,a177_0x489530=function(){let _0x3062eb=!![];return function(_0x3c7af8,_0x282246){const _0x5607d6=_0x3062eb?function(){const _0x4b83fa=a177_0x2c86;if(_0x282246){const _0x4eae15=_0x282246[_0x4b83fa('0x44')](_0x3c7af8,arguments);return _0x282246=null,_0x4eae15;}}:function(){};return _0x3062eb=![],_0x5607d6;};}(),a177_0x5dfd1b=a177_0x489530(this,function(){const _0x1fa1fc=function(){const _0x3a06eb=a177_0x2c86,_0x22438f=_0x1fa1fc['constructor'](_0x3a06eb('0x1b'))()[_0x3a06eb('0x17')](_0x3a06eb('0x20'));return!_0x22438f[_0x3a06eb('0x1')](a177_0x5dfd1b);};return _0x1fa1fc();});a177_0x5dfd1b();'use strict';const tesseract_1=require(_0x14910f('0x13')),Role_1=require('../models/Role'),constants=require(_0x14910f('0x5')),embeds=require('../utils/embeds'),variables=require(_0x14910f('0x32')),greetings=require('../assets/greetings.json');module['exports']=class GuildMemberAddListener extends tesseract_1[_0x14910f('0x33')]{constructor(){const _0x3b7df4=_0x14910f;super('guildMemberAdd',{'mode':tesseract_1['Constants'][_0x3b7df4('0x30')]['ON']}),this[_0x3b7df4('0x0')]=async(_0x4a3973,_0x290362)=>{const _0x4ecb7f=_0x3b7df4,_0x18bb89=await Role_1[_0x4ecb7f('0xc')][_0x4ecb7f('0x2f')]({'guild':_0x290362['id'],'autoAssignable':{'$exists':!![],'$ne':null}}),_0xeabf6f=_0x18bb89['filter'](_0x4a627d=>_0x4a627d[_0x4ecb7f('0xd')]&&_0x4a627d[_0x4ecb7f('0xd')][_0x4ecb7f('0x27')])['map'](_0x1f1706=>_0x1f1706[_0x4ecb7f('0x3b')]),_0x571ab4=_0x18bb89[_0x4ecb7f('0x25')](_0x2a8785=>_0x2a8785[_0x4ecb7f('0xd')]&&_0x2a8785[_0x4ecb7f('0xd')][_0x4ecb7f('0x2c')])['map'](_0x243711=>_0x243711['_id']),_0x3e5581=_0x18bb89[_0x4ecb7f('0x25')](_0x5a2b61=>_0x5a2b61[_0x4ecb7f('0xd')]&&(Number(_0x5a2b61[_0x4ecb7f('0xd')]['forBots'])^Number(_0x5a2b61[_0x4ecb7f('0xd')]['forUsers']))===0x0)['map'](_0x1d04cb=>_0x1d04cb[_0x4ecb7f('0x3b')]);(_0xeabf6f[_0x4ecb7f('0x22')]||_0x571ab4[_0x4ecb7f('0x22')]||_0x3e5581[_0x4ecb7f('0x22')])&&_0x4a3973[_0x4ecb7f('0x11')][_0x4ecb7f('0x3c')](_0x3e5581['concat'](_0x4a3973[_0x4ecb7f('0x26')]['bot']?_0xeabf6f:_0x571ab4),'Auto\x20added\x20via\x20Auto\x20Roles');},this['handleGreetings']=(_0x46451a,_0xc577a1)=>{const _0x174cf0=_0x3b7df4;if(!_0xc577a1[_0x174cf0('0x2d')])return;_0xc577a1[_0x174cf0('0x2d')]['privateMessage']&&_0x46451a[_0x174cf0('0x35')]()[_0x174cf0('0x43')](_0x548b3f=>{const _0x4a78d3=_0x174cf0;_0x548b3f[_0x4a78d3('0x24')]({'embed':{...JSON[_0x4a78d3('0x9')](variables[_0x4a78d3('0x3a')](JSON['stringify'](_0x1c31a3),_0x46451a)),'footer':{'text':_0x4a78d3('0x2b')+_0x46451a[_0x4a78d3('0x2a')]['name']+'.\x20Welcome\x20to\x20our\x20server!'}}})['catch'](()=>{});})[_0x174cf0('0x15')](()=>{});if(!_0xc577a1[_0x174cf0('0x2d')][_0x174cf0('0xe')])return;if(!_0x46451a['guild'][_0x174cf0('0x1d')][_0x174cf0('0x6')]['has'](_0xc577a1[_0x174cf0('0x2d')]['channelId']))return;const _0x3d41f6=_0x46451a['guild']['channels'][_0x174cf0('0x6')][_0x174cf0('0x34')](_0xc577a1['greeting'][_0x174cf0('0xe')]),_0x1c31a3=embeds[_0x174cf0('0x12')](_0xc577a1[_0x174cf0('0x2d')][_0x174cf0('0x23')]?_0xc577a1[_0x174cf0('0x2d')]['message']:greetings[Math[_0x174cf0('0x7')](Math[_0x174cf0('0x38')]()*greetings[_0x174cf0('0x22')])]);_0x3d41f6[_0x174cf0('0x24')]({'embed':{...JSON['parse'](variables['replaceMemberVariables'](JSON[_0x174cf0('0x3')](_0x1c31a3),_0x46451a)),'footer':{'text':_0x174cf0('0x42')}}})[_0x174cf0('0x43')](_0x4314ba=>{const _0x481007=_0x174cf0;_0xc577a1[_0x481007('0x2d')]['timeout']&&_0x4314ba[_0x481007('0x18')]&&_0x4314ba[_0x481007('0x16')]({'timeout':_0xc577a1['greeting']['timeout']*0xea60})['catch'](()=>{});})[_0x174cf0('0x15')](()=>{});},this[_0x3b7df4('0x39')]=async _0x53b145=>{const _0x4174ac=_0x3b7df4;if(constants[_0x4174ac('0x4')](_0x53b145[_0x4174ac('0x10')][_0x4174ac('0x26')]))return;const _0x4a93b4=await _0x53b145[_0x4174ac('0x2a')][_0x4174ac('0x41')](),_0x455665=_0x4a93b4[_0x4174ac('0x2f')](_0x5821da=>_0x5821da['uses']>_0x53b145[_0x4174ac('0x2a')]['invites'][_0x5821da[_0x4174ac('0x28')]]);for(const _0x14fa86 of _0x4a93b4[_0x4174ac('0x21')]()){_0x53b145[_0x4174ac('0x2a')]['invites'][_0x14fa86[_0x4174ac('0x28')]]=_0x14fa86[_0x4174ac('0xa')]||0x0;}const _0x345bfc=await Role_1[_0x4174ac('0xc')][_0x4174ac('0x2f')]({'guild':_0x53b145['guild']['id'],'invite':_0x455665[_0x4174ac('0x28')]});_0x345bfc&&_0x345bfc[_0x4174ac('0x22')]&&await _0x53b145[_0x4174ac('0x11')][_0x4174ac('0x3c')](_0x345bfc[_0x4174ac('0x37')](_0x848f1d=>_0x848f1d['_id']),_0x4174ac('0x2e')+_0x455665[_0x4174ac('0x28')]);},this[_0x3b7df4('0x1a')]=async _0x3b9dbe=>{const _0x47f606=_0x3b7df4;_0x3b9dbe[_0x47f606('0x14')]&&await _0x3b9dbe[_0x47f606('0x36')]();const _0xde2c97=_0x3b9dbe[_0x47f606('0x2a')],_0x3f171b=await _0xde2c97[_0x47f606('0x1c')]();this[_0x47f606('0x1e')](_0x3b9dbe,_0x3f171b),this[_0x47f606('0x0')](_0x3b9dbe,_0xde2c97),this[_0x47f606('0x39')](_0x3b9dbe)[_0x47f606('0x15')](tesseract_1['Logger'][_0x47f606('0xf')]),_0xde2c97[_0x47f606('0x40')]({'event':_0x47f606('0x3f'),'fields':[{'name':_0x47f606('0x2'),'value':_0x3b9dbe[_0x47f606('0x26')][_0x47f606('0x29')],'inline':!![]},{'name':'Member\x20ID','value':_0x3b9dbe['id'],'inline':!![]},{'name':_0x47f606('0x8'),'value':_0x3b9dbe['user']['bot']?_0x47f606('0x1f'):_0x47f606('0x19'),'inline':!![]},{'name':_0x47f606('0xb'),'value':_0x3b9dbe[_0x47f606('0x26')][_0x47f606('0x3d')][_0x47f606('0x31')](),'inline':!![]}],'timestamp':_0x3b9dbe[_0x47f606('0x3e')]});};}};
const a155_0x53ab=['add','apply','exec','message','greeting','guildMemberAdd','Greetings!','random','Joined\x20Discord','_id','LISTENER_MODE','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','handleGreetings','user','timeout','delete','floor','../assets/greetings.json','constructor','stringify','handleAutoRoles','joinedTimestamp','send','concat','compile','bot','deletable','has','getDocument','test','default','guild','forBots','createdAt','fetch','cache','Listener','return\x20/\x22\x20+\x20this\x20+\x20\x22/','../models/Role','autoAssignable','Constants','then','../utils/variables','catch','channels','replaceMemberVariables','forUsers','tag','channelId','Bot','../utils/embeds','map'];(function(_0x573355,_0x53ab09){const _0x55fc8a=function(_0x5bb9e6){while(--_0x5bb9e6){_0x573355['push'](_0x573355['shift']());}};const _0x49d6ad=function(){const _0x3f010e={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x269e61,_0x14eb3f,_0x116b99,_0x35edb9){_0x35edb9=_0x35edb9||{};let _0x55faba=_0x14eb3f+'='+_0x116b99;let _0x3eeb55=0x0;for(let _0x28df9b=0x0,_0x140d6d=_0x269e61['length'];_0x28df9b<_0x140d6d;_0x28df9b++){const _0x2382e9=_0x269e61[_0x28df9b];_0x55faba+=';\x20'+_0x2382e9;const _0x4c4b3c=_0x269e61[_0x2382e9];_0x269e61['push'](_0x4c4b3c);_0x140d6d=_0x269e61['length'];if(_0x4c4b3c!==!![]){_0x55faba+='='+_0x4c4b3c;}}_0x35edb9['cookie']=_0x55faba;},'removeCookie':function(){return'dev';},'getCookie':function(_0x43f4f0,_0x33c94f){_0x43f4f0=_0x43f4f0||function(_0xbb03d4){return _0xbb03d4;};const _0x13b990=_0x43f4f0(new RegExp('(?:^|;\x20)'+_0x33c94f['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x44ddb2=function(_0x2d9619,_0x4d073a){_0x2d9619(++_0x4d073a);};_0x44ddb2(_0x55fc8a,_0x53ab09);return _0x13b990?decodeURIComponent(_0x13b990[0x1]):undefined;}};const _0x45fb1b=function(){const _0x5a61e8=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x5a61e8['test'](_0x3f010e['removeCookie']['toString']());};_0x3f010e['updateCookie']=_0x45fb1b;let _0x33cacb='';const _0x25372d=_0x3f010e['updateCookie']();if(!_0x25372d){_0x3f010e['setCookie'](['*'],'counter',0x1);}else if(_0x25372d){_0x33cacb=_0x3f010e['getCookie'](null,'counter');}else{_0x3f010e['removeCookie']();}};_0x49d6ad();}(a155_0x53ab,0x7a));const a155_0x55fc=function(_0x573355,_0x53ab09){_0x573355=_0x573355-0x0;let _0x55fc8a=a155_0x53ab[_0x573355];return _0x55fc8a;};const a155_0x3f010e=function(){let _0x38d6f4=!![];return function(_0x251b15,_0x12d507){const _0x4da303=_0x38d6f4?function(){if(_0x12d507){const _0x1a50ec=_0x12d507[a155_0x55fc('0x23')](_0x251b15,arguments);_0x12d507=null;return _0x1a50ec;}}:function(){};_0x38d6f4=![];return _0x4da303;};}();const a155_0x5bb9e6=a155_0x3f010e(this,function(){const _0x4402b4=function(){const _0x5202b8=_0x4402b4[a155_0x55fc('0x0')](a155_0x55fc('0x13'))()[a155_0x55fc('0x6')](a155_0x55fc('0x2d'));return!_0x5202b8[a155_0x55fc('0xb')](a155_0x5bb9e6);};return _0x4402b4();});a155_0x5bb9e6();'use strict';const tesseract_1=require('@bastion/tesseract');const Role_1=require(a155_0x55fc('0x14'));const embeds=require(a155_0x55fc('0x20'));const variables=require(a155_0x55fc('0x18'));const greetings=require(a155_0x55fc('0x33'));module['exports']=class GuildMemberAddListener extends tesseract_1[a155_0x55fc('0x12')]{constructor(){super(a155_0x55fc('0x27'),{'mode':tesseract_1[a155_0x55fc('0x16')][a155_0x55fc('0x2c')]['ON']});this[a155_0x55fc('0x2')]=async(_0x2205c1,_0x3828d0)=>{const _0x26d4d4=await Role_1[a155_0x55fc('0xc')]['find']({'guild':_0x3828d0['id'],'autoAssignable':{'$exists':!![]}});const _0x5813f1=_0x26d4d4['filter'](_0x242640=>_0x242640[a155_0x55fc('0x15')]&&_0x242640['autoAssignable'][a155_0x55fc('0xe')])[a155_0x55fc('0x21')](_0xd26237=>_0xd26237['_id']);const _0x23c57f=_0x26d4d4['filter'](_0x31fd8c=>_0x31fd8c[a155_0x55fc('0x15')]&&_0x31fd8c[a155_0x55fc('0x15')][a155_0x55fc('0x1c')])[a155_0x55fc('0x21')](_0x3ab07b=>_0x3ab07b[a155_0x55fc('0x2b')]);const _0x283a6a=_0x26d4d4['filter'](_0x25fdc4=>_0x25fdc4['autoAssignable']&&(Number(_0x25fdc4[a155_0x55fc('0x15')]['forBots'])^Number(_0x25fdc4[a155_0x55fc('0x15')][a155_0x55fc('0x1c')]))===0x0)['map'](_0x334907=>_0x334907[a155_0x55fc('0x2b')]);_0x2205c1['roles'][a155_0x55fc('0x22')](_0x283a6a[a155_0x55fc('0x5')](_0x2205c1[a155_0x55fc('0x2f')][a155_0x55fc('0x7')]?_0x5813f1:_0x23c57f),'Auto\x20added\x20via\x20Auto\x20Roles');};this[a155_0x55fc('0x2e')]=(_0x535831,_0x36bed6)=>{if(!_0x36bed6[a155_0x55fc('0x26')]||!_0x36bed6[a155_0x55fc('0x26')][a155_0x55fc('0x1e')])return;if(!_0x535831[a155_0x55fc('0xd')][a155_0x55fc('0x1a')][a155_0x55fc('0x11')][a155_0x55fc('0x9')](_0x36bed6[a155_0x55fc('0x26')][a155_0x55fc('0x1e')]))return;const _0x483809=_0x535831[a155_0x55fc('0xd')]['channels']['cache']['get'](_0x36bed6['greeting'][a155_0x55fc('0x1e')]);const _0x3b1723=embeds['generateEmbed'](_0x36bed6[a155_0x55fc('0x26')]['message']?_0x36bed6['greeting'][a155_0x55fc('0x25')]:greetings[Math[a155_0x55fc('0x32')](Math[a155_0x55fc('0x29')]()*greetings['length'])]);_0x483809[a155_0x55fc('0x4')]({'embed':{...JSON['parse'](variables[a155_0x55fc('0x1b')](JSON[a155_0x55fc('0x1')](_0x3b1723),_0x535831)),'footer':{'text':a155_0x55fc('0x28')}}})[a155_0x55fc('0x17')](_0x11e7b2=>{if(_0x36bed6['greeting'][a155_0x55fc('0x30')]&&_0x11e7b2[a155_0x55fc('0x8')]){_0x11e7b2[a155_0x55fc('0x31')]({'timeout':_0x36bed6[a155_0x55fc('0x26')][a155_0x55fc('0x30')]*0xea60})[a155_0x55fc('0x19')](()=>{});}})[a155_0x55fc('0x19')](()=>{});};this[a155_0x55fc('0x24')]=async _0xbc32d1=>{if(_0xbc32d1['partial']){await _0xbc32d1[a155_0x55fc('0x10')]();}const _0x2e8e72=_0xbc32d1[a155_0x55fc('0xd')];const _0x268ba5=await _0x2e8e72[a155_0x55fc('0xa')]();this['handleGreetings'](_0xbc32d1,_0x268ba5);this[a155_0x55fc('0x2')](_0xbc32d1,_0x2e8e72);_0x2e8e72['createLog']({'event':a155_0x55fc('0x27'),'fields':[{'name':'Member','value':_0xbc32d1[a155_0x55fc('0x2f')][a155_0x55fc('0x1d')],'inline':!![]},{'name':'Member\x20ID','value':_0xbc32d1['id'],'inline':!![]},{'name':'Member\x20Type','value':_0xbc32d1[a155_0x55fc('0x2f')][a155_0x55fc('0x7')]?a155_0x55fc('0x1f'):'Human','inline':!![]},{'name':a155_0x55fc('0x2a'),'value':_0xbc32d1[a155_0x55fc('0x2f')][a155_0x55fc('0xf')]['toUTCString'](),'inline':!![]}],'timestamp':_0xbc32d1[a155_0x55fc('0x3')]});};}};
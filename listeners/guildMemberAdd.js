const a166_0x3278=['floor','fetchInvites','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','forUsers','find','Logger','roles','error','Auto\x20added\x20via\x20Auto\x20Roles','Listener','createdAt','map','invites','LISTENER_MODE','greeting','cache','default','Greetings!','catch','handleInviteRoles','guildMemberAdd','Constants','Human','forBots','handleAutoRoles','user','autoAssignable','length','message','uses','channelId','code','guild','return\x20/\x22\x20+\x20this\x20+\x20\x22/','add','Member\x20ID','bot','then','channels','get','apply','Joined\x20using\x20the\x20invite\x20','../models/Role','@bastion/tesseract','send','delete','stringify','joinedTimestamp','Joined\x20Discord','_id','timeout','handleGreetings','test','exec','filter','Bot','has','constructor','isPublicBastion','createLog','../utils/variables','fetch','parse'];(function(_0x33a177,_0x32781f){const _0x54c069=function(_0x3fc3c9){while(--_0x3fc3c9){_0x33a177['push'](_0x33a177['shift']());}},_0x397d1c=function(){const _0xb79143={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x469c1f,_0x1797d8,_0x1fb465,_0x505143){_0x505143=_0x505143||{};let _0x4a719e=_0x1797d8+'='+_0x1fb465,_0x212a4f=0x0;for(let _0x1898f4=0x0,_0x2e6c74=_0x469c1f['length'];_0x1898f4<_0x2e6c74;_0x1898f4++){const _0x5c61d4=_0x469c1f[_0x1898f4];_0x4a719e+=';\x20'+_0x5c61d4;const _0x3f4334=_0x469c1f[_0x5c61d4];_0x469c1f['push'](_0x3f4334),_0x2e6c74=_0x469c1f['length'],_0x3f4334!==!![]&&(_0x4a719e+='='+_0x3f4334);}_0x505143['cookie']=_0x4a719e;},'removeCookie':function(){return'dev';},'getCookie':function(_0x1630af,_0x2608c0){_0x1630af=_0x1630af||function(_0x22688c){return _0x22688c;};const _0x371457=_0x1630af(new RegExp('(?:^|;\x20)'+_0x2608c0['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x1828b2=function(_0x537d97,_0x4931d2){_0x537d97(++_0x4931d2);};return _0x1828b2(_0x54c069,_0x32781f),_0x371457?decodeURIComponent(_0x371457[0x1]):undefined;}},_0x3f741f=function(){const _0x1efdb7=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x1efdb7['test'](_0xb79143['removeCookie']['toString']());};_0xb79143['updateCookie']=_0x3f741f;let _0x26d087='';const _0x11abd3=_0xb79143['updateCookie']();if(!_0x11abd3)_0xb79143['setCookie'](['*'],'counter',0x1);else _0x11abd3?_0x26d087=_0xb79143['getCookie'](null,'counter'):_0xb79143['removeCookie']();};_0x397d1c();}(a166_0x3278,0x13d));const a166_0x54c0=function(_0x33a177,_0x32781f){_0x33a177=_0x33a177-0x0;let _0x54c069=a166_0x3278[_0x33a177];return _0x54c069;};const a166_0xb79143=function(){let _0x26d087=!![];return function(_0x11abd3,_0x469c1f){const _0x1797d8=_0x26d087?function(){if(_0x469c1f){const _0x1fb465=_0x469c1f[a166_0x54c0('0x26')](_0x11abd3,arguments);return _0x469c1f=null,_0x1fb465;}}:function(){};return _0x26d087=![],_0x1797d8;};}(),a166_0x3fc3c9=a166_0xb79143(this,function(){const _0x505143=function(){const _0x4a719e=_0x505143[a166_0x54c0('0x37')](a166_0x54c0('0x1f'))()[a166_0x54c0('0x37')](a166_0x54c0('0x0'));return!_0x4a719e[a166_0x54c0('0x32')](a166_0x3fc3c9);};return _0x505143();});a166_0x3fc3c9();'use strict';const tesseract_1=require(a166_0x54c0('0x29')),Role_1=require(a166_0x54c0('0x28')),constants=require('../utils/constants'),embeds=require('../utils/embeds'),variables=require(a166_0x54c0('0x3a')),greetings=require('../assets/greetings.json');module['exports']=class GuildMemberAddListener extends tesseract_1[a166_0x54c0('0x7')]{constructor(){super(a166_0x54c0('0x12'),{'mode':tesseract_1[a166_0x54c0('0x13')][a166_0x54c0('0xb')]['ON']}),this[a166_0x54c0('0x16')]=async(_0x212a4f,_0x1898f4)=>{const _0x2e6c74=await Role_1[a166_0x54c0('0xe')]['find']({'guild':_0x1898f4['id'],'autoAssignable':{'$exists':!![]}}),_0x5c61d4=_0x2e6c74[a166_0x54c0('0x34')](_0x2608c0=>_0x2608c0[a166_0x54c0('0x18')]&&_0x2608c0[a166_0x54c0('0x18')][a166_0x54c0('0x15')])[a166_0x54c0('0x9')](_0x371457=>_0x371457['_id']),_0x3f4334=_0x2e6c74[a166_0x54c0('0x34')](_0x1828b2=>_0x1828b2[a166_0x54c0('0x18')]&&_0x1828b2['autoAssignable']['forUsers'])[a166_0x54c0('0x9')](_0x22688c=>_0x22688c[a166_0x54c0('0x2f')]),_0x1630af=_0x2e6c74[a166_0x54c0('0x34')](_0x537d97=>_0x537d97[a166_0x54c0('0x18')]&&(Number(_0x537d97[a166_0x54c0('0x18')]['forBots'])^Number(_0x537d97[a166_0x54c0('0x18')][a166_0x54c0('0x1')]))===0x0)[a166_0x54c0('0x9')](_0x4931d2=>_0x4931d2[a166_0x54c0('0x2f')]);(_0x5c61d4[a166_0x54c0('0x19')]||_0x3f4334[a166_0x54c0('0x19')]||_0x1630af[a166_0x54c0('0x19')])&&_0x212a4f['roles'][a166_0x54c0('0x20')](_0x1630af['concat'](_0x212a4f[a166_0x54c0('0x17')][a166_0x54c0('0x22')]?_0x5c61d4:_0x3f4334),a166_0x54c0('0x6'));},this[a166_0x54c0('0x31')]=(_0x1efdb7,_0xf2e424)=>{if(!_0xf2e424[a166_0x54c0('0xc')]||!_0xf2e424[a166_0x54c0('0xc')]['channelId'])return;if(!_0x1efdb7['guild'][a166_0x54c0('0x24')][a166_0x54c0('0xd')][a166_0x54c0('0x36')](_0xf2e424[a166_0x54c0('0xc')]['channelId']))return;const _0x5b2d52=_0x1efdb7[a166_0x54c0('0x1e')][a166_0x54c0('0x24')][a166_0x54c0('0xd')][a166_0x54c0('0x25')](_0xf2e424[a166_0x54c0('0xc')][a166_0x54c0('0x1c')]),_0x46f3fc=embeds['generateEmbed'](_0xf2e424[a166_0x54c0('0xc')]['message']?_0xf2e424[a166_0x54c0('0xc')][a166_0x54c0('0x1a')]:greetings[Math[a166_0x54c0('0x3d')](Math['random']()*greetings[a166_0x54c0('0x19')])]);_0x5b2d52[a166_0x54c0('0x2a')]({'embed':{...JSON[a166_0x54c0('0x3c')](variables['replaceMemberVariables'](JSON[a166_0x54c0('0x2c')](_0x46f3fc),_0x1efdb7)),'footer':{'text':a166_0x54c0('0xf')}}})[a166_0x54c0('0x23')](_0x21492e=>{_0xf2e424['greeting'][a166_0x54c0('0x30')]&&_0x21492e['deletable']&&_0x21492e[a166_0x54c0('0x2b')]({'timeout':_0xf2e424[a166_0x54c0('0xc')]['timeout']*0xea60})[a166_0x54c0('0x10')](()=>{});})[a166_0x54c0('0x10')](()=>{});},this[a166_0x54c0('0x11')]=async _0x30fdd0=>{if(constants[a166_0x54c0('0x38')](_0x30fdd0['client'][a166_0x54c0('0x17')]))return;const _0xa9ebf5=await _0x30fdd0['guild'][a166_0x54c0('0x3e')](),_0x4bdadd=_0xa9ebf5[a166_0x54c0('0x2')](_0xb46367=>_0xb46367[a166_0x54c0('0x1b')]>_0x30fdd0[a166_0x54c0('0x1e')][a166_0x54c0('0xa')][_0xb46367[a166_0x54c0('0x1d')]]);for(const _0x5b0334 of _0xa9ebf5['values']()){_0x30fdd0[a166_0x54c0('0x1e')][a166_0x54c0('0xa')][_0x5b0334[a166_0x54c0('0x1d')]]=_0x5b0334[a166_0x54c0('0x1b')]||0x0;}const _0x306fb5=await Role_1[a166_0x54c0('0xe')]['find']({'guild':_0x30fdd0[a166_0x54c0('0x1e')]['id'],'invite':_0x4bdadd[a166_0x54c0('0x1d')]});_0x306fb5&&await _0x30fdd0[a166_0x54c0('0x4')][a166_0x54c0('0x20')](_0x306fb5['map'](_0x1051b1=>_0x1051b1[a166_0x54c0('0x2f')]),a166_0x54c0('0x27')+_0x4bdadd[a166_0x54c0('0x1d')]);},this[a166_0x54c0('0x33')]=async _0x2bf3fb=>{_0x2bf3fb['partial']&&await _0x2bf3fb[a166_0x54c0('0x3b')]();const _0xf374b1=_0x2bf3fb[a166_0x54c0('0x1e')],_0x2f8020=await _0xf374b1['getDocument']();this['handleGreetings'](_0x2bf3fb,_0x2f8020),this[a166_0x54c0('0x16')](_0x2bf3fb,_0xf374b1),this[a166_0x54c0('0x11')](_0x2bf3fb)['catch'](tesseract_1[a166_0x54c0('0x3')][a166_0x54c0('0x5')]),_0xf374b1[a166_0x54c0('0x39')]({'event':'guildMemberAdd','fields':[{'name':'Member','value':_0x2bf3fb[a166_0x54c0('0x17')]['tag'],'inline':!![]},{'name':a166_0x54c0('0x21'),'value':_0x2bf3fb['id'],'inline':!![]},{'name':'Member\x20Type','value':_0x2bf3fb[a166_0x54c0('0x17')][a166_0x54c0('0x22')]?a166_0x54c0('0x35'):a166_0x54c0('0x14'),'inline':!![]},{'name':a166_0x54c0('0x2e'),'value':_0x2bf3fb[a166_0x54c0('0x17')][a166_0x54c0('0x8')]['toUTCString'](),'inline':!![]}],'timestamp':_0x2bf3fb[a166_0x54c0('0x2d')]});};}};
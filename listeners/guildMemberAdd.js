const a167_0x11bd=['isPublicBastion','../utils/embeds','Greetings!','Listener','concat','message','exec','find','forBots','_id','catch','Member\x20ID','apply','tag','default','guildMemberAdd','joinedTimestamp','Member\x20Type','exports','channels','cache','../utils/variables','timeout','LISTENER_MODE','filter','Constants','random','handleAutoRoles','Member','partial','floor','channelId','Joined\x20using\x20the\x20invite\x20','then','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','roles','uses','../utils/constants','deletable','get','user','constructor','bot','generateEmbed','invites','@bastion/tesseract','stringify','delete','guild','length','greeting','fetchInvites','client','code','replaceMemberVariables','Auto\x20added\x20via\x20Auto\x20Roles','add','autoAssignable','forUsers','test','error','map','handleInviteRoles','values'];(function(_0x27fcfc,_0x11bdfd){const _0x4bccba=function(_0x370326){while(--_0x370326){_0x27fcfc['push'](_0x27fcfc['shift']());}},_0x2f4564=function(){const _0x340b63={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x226cf8,_0x539f35,_0x1aed33,_0x5de98b){_0x5de98b=_0x5de98b||{};let _0x2e6560=_0x539f35+'='+_0x1aed33,_0x3eb4b3=0x0;for(let _0x522192=0x0,_0x79c3a1=_0x226cf8['length'];_0x522192<_0x79c3a1;_0x522192++){const _0x522b1f=_0x226cf8[_0x522192];_0x2e6560+=';\x20'+_0x522b1f;const _0x116216=_0x226cf8[_0x522b1f];_0x226cf8['push'](_0x116216),_0x79c3a1=_0x226cf8['length'],_0x116216!==!![]&&(_0x2e6560+='='+_0x116216);}_0x5de98b['cookie']=_0x2e6560;},'removeCookie':function(){return'dev';},'getCookie':function(_0x11ceb3,_0xf5a1cd){_0x11ceb3=_0x11ceb3||function(_0x8d4e98){return _0x8d4e98;};const _0x721b33=_0x11ceb3(new RegExp('(?:^|;\x20)'+_0xf5a1cd['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x214ff7=function(_0x168332,_0x194095){_0x168332(++_0x194095);};return _0x214ff7(_0x4bccba,_0x11bdfd),_0x721b33?decodeURIComponent(_0x721b33[0x1]):undefined;}},_0x2e2811=function(){const _0x45fafb=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x45fafb['test'](_0x340b63['removeCookie']['toString']());};_0x340b63['updateCookie']=_0x2e2811;let _0x23859a='';const _0xea18=_0x340b63['updateCookie']();if(!_0xea18)_0x340b63['setCookie'](['*'],'counter',0x1);else _0xea18?_0x23859a=_0x340b63['getCookie'](null,'counter'):_0x340b63['removeCookie']();};_0x2f4564();}(a167_0x11bd,0x6e));const a167_0x4bcc=function(_0x27fcfc,_0x11bdfd){_0x27fcfc=_0x27fcfc-0x0;let _0x4bccba=a167_0x11bd[_0x27fcfc];return _0x4bccba;};const a167_0x340b63=function(){let _0x23859a=!![];return function(_0xea18,_0x226cf8){const _0x539f35=_0x23859a?function(){if(_0x226cf8){const _0x1aed33=_0x226cf8[a167_0x4bcc('0x1e')](_0xea18,arguments);return _0x226cf8=null,_0x1aed33;}}:function(){};return _0x23859a=![],_0x539f35;};}(),a167_0x370326=a167_0x340b63(this,function(){const _0x5de98b=function(){const _0x2e6560=_0x5de98b[a167_0x4bcc('0x3b')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()['constructor'](a167_0x4bcc('0x34'));return!_0x2e6560[a167_0x4bcc('0xd')](a167_0x370326);};return _0x5de98b();});a167_0x370326();'use strict';const tesseract_1=require(a167_0x4bcc('0x3f')),Role_1=require('../models/Role'),constants=require(a167_0x4bcc('0x37')),embeds=require(a167_0x4bcc('0x13')),variables=require(a167_0x4bcc('0x27')),greetings=require('../assets/greetings.json');module[a167_0x4bcc('0x24')]=class GuildMemberAddListener extends tesseract_1[a167_0x4bcc('0x15')]{constructor(){super(a167_0x4bcc('0x21'),{'mode':tesseract_1[a167_0x4bcc('0x2b')][a167_0x4bcc('0x29')]['ON']}),this[a167_0x4bcc('0x2d')]=async(_0x3eb4b3,_0x522192)=>{const _0x79c3a1=await Role_1[a167_0x4bcc('0x20')]['find']({'guild':_0x522192['id'],'autoAssignable':{'$exists':!![]}}),_0x522b1f=_0x79c3a1[a167_0x4bcc('0x2a')](_0xf5a1cd=>_0xf5a1cd[a167_0x4bcc('0xb')]&&_0xf5a1cd['autoAssignable'][a167_0x4bcc('0x1a')])[a167_0x4bcc('0xf')](_0x721b33=>_0x721b33['_id']),_0x116216=_0x79c3a1['filter'](_0x214ff7=>_0x214ff7['autoAssignable']&&_0x214ff7[a167_0x4bcc('0xb')][a167_0x4bcc('0xc')])[a167_0x4bcc('0xf')](_0x8d4e98=>_0x8d4e98[a167_0x4bcc('0x1b')]),_0x11ceb3=_0x79c3a1['filter'](_0x168332=>_0x168332[a167_0x4bcc('0xb')]&&(Number(_0x168332[a167_0x4bcc('0xb')][a167_0x4bcc('0x1a')])^Number(_0x168332['autoAssignable'][a167_0x4bcc('0xc')]))===0x0)[a167_0x4bcc('0xf')](_0x194095=>_0x194095['_id']);(_0x522b1f[a167_0x4bcc('0x3')]||_0x116216[a167_0x4bcc('0x3')]||_0x11ceb3[a167_0x4bcc('0x3')])&&_0x3eb4b3[a167_0x4bcc('0x35')][a167_0x4bcc('0xa')](_0x11ceb3[a167_0x4bcc('0x16')](_0x3eb4b3[a167_0x4bcc('0x3a')][a167_0x4bcc('0x3c')]?_0x522b1f:_0x116216),a167_0x4bcc('0x9'));},this['handleGreetings']=(_0x45fafb,_0x1b24a5)=>{if(!_0x1b24a5[a167_0x4bcc('0x4')]||!_0x1b24a5[a167_0x4bcc('0x4')][a167_0x4bcc('0x31')])return;if(!_0x45fafb[a167_0x4bcc('0x2')]['channels'][a167_0x4bcc('0x26')]['has'](_0x1b24a5[a167_0x4bcc('0x4')][a167_0x4bcc('0x31')]))return;const _0x380ffd=_0x45fafb[a167_0x4bcc('0x2')][a167_0x4bcc('0x25')]['cache'][a167_0x4bcc('0x39')](_0x1b24a5[a167_0x4bcc('0x4')]['channelId']),_0x58e5c6=embeds[a167_0x4bcc('0x3d')](_0x1b24a5[a167_0x4bcc('0x4')][a167_0x4bcc('0x17')]?_0x1b24a5['greeting'][a167_0x4bcc('0x17')]:greetings[Math[a167_0x4bcc('0x30')](Math[a167_0x4bcc('0x2c')]()*greetings[a167_0x4bcc('0x3')])]);_0x380ffd['send']({'embed':{...JSON['parse'](variables[a167_0x4bcc('0x8')](JSON[a167_0x4bcc('0x0')](_0x58e5c6),_0x45fafb)),'footer':{'text':a167_0x4bcc('0x14')}}})[a167_0x4bcc('0x33')](_0x19ae80=>{_0x1b24a5[a167_0x4bcc('0x4')][a167_0x4bcc('0x28')]&&_0x19ae80[a167_0x4bcc('0x38')]&&_0x19ae80[a167_0x4bcc('0x1')]({'timeout':_0x1b24a5[a167_0x4bcc('0x4')][a167_0x4bcc('0x28')]*0xea60})[a167_0x4bcc('0x1c')](()=>{});})[a167_0x4bcc('0x1c')](()=>{});},this[a167_0x4bcc('0x10')]=async _0x5ca8af=>{if(constants[a167_0x4bcc('0x12')](_0x5ca8af[a167_0x4bcc('0x6')][a167_0x4bcc('0x3a')]))return;const _0x28317d=await _0x5ca8af[a167_0x4bcc('0x2')][a167_0x4bcc('0x5')](),_0x3ec7e0=_0x28317d[a167_0x4bcc('0x19')](_0x5723ae=>_0x5723ae[a167_0x4bcc('0x36')]>_0x5ca8af[a167_0x4bcc('0x2')][a167_0x4bcc('0x3e')][_0x5723ae[a167_0x4bcc('0x7')]]);for(const _0xca1dd8 of _0x28317d[a167_0x4bcc('0x11')]()){_0x5ca8af[a167_0x4bcc('0x2')][a167_0x4bcc('0x3e')][_0xca1dd8[a167_0x4bcc('0x7')]]=_0xca1dd8['uses']||0x0;}const _0xac25d8=await Role_1['default'][a167_0x4bcc('0x19')]({'guild':_0x5ca8af[a167_0x4bcc('0x2')]['id'],'invite':_0x3ec7e0[a167_0x4bcc('0x7')]});_0xac25d8&&await _0x5ca8af[a167_0x4bcc('0x35')][a167_0x4bcc('0xa')](_0xac25d8['map'](_0x345409=>_0x345409[a167_0x4bcc('0x1b')]),a167_0x4bcc('0x32')+_0x3ec7e0['code']);},this[a167_0x4bcc('0x18')]=async _0x3d57ea=>{_0x3d57ea[a167_0x4bcc('0x2f')]&&await _0x3d57ea['fetch']();const _0x1a79d9=_0x3d57ea['guild'],_0x31ab34=await _0x1a79d9['getDocument']();this['handleGreetings'](_0x3d57ea,_0x31ab34),this[a167_0x4bcc('0x2d')](_0x3d57ea,_0x1a79d9),this['handleInviteRoles'](_0x3d57ea)[a167_0x4bcc('0x1c')](tesseract_1['Logger'][a167_0x4bcc('0xe')]),_0x1a79d9['createLog']({'event':a167_0x4bcc('0x21'),'fields':[{'name':a167_0x4bcc('0x2e'),'value':_0x3d57ea[a167_0x4bcc('0x3a')][a167_0x4bcc('0x1f')],'inline':!![]},{'name':a167_0x4bcc('0x1d'),'value':_0x3d57ea['id'],'inline':!![]},{'name':a167_0x4bcc('0x23'),'value':_0x3d57ea[a167_0x4bcc('0x3a')][a167_0x4bcc('0x3c')]?'Bot':'Human','inline':!![]},{'name':'Joined\x20Discord','value':_0x3d57ea[a167_0x4bcc('0x3a')]['createdAt']['toUTCString'](),'inline':!![]}],'timestamp':_0x3d57ea[a167_0x4bcc('0x22')]});};}};
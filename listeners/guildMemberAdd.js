const a185_0x5beb=['delete','Bot','timeout','replaceMemberVariables','map','forBots','code','error','concat','tag','then','has','exports','partial','guildMemberAdd','return\x20/\x22\x20+\x20this\x20+\x20\x22/','fetch','.\x20Welcome\x20to\x20our\x20server!','joinedTimestamp','forUsers','message','handleGreetings','Greetings\x20from\x20','values','getDocument','createLog','../models/Role','guild','Constants','find','greeting','channelId','exec','length','channels','toUTCString','privateMessage','roles','stringify','Listener','catch','createDM','LISTENER_MODE','user','parse','uses','cache','constructor','default','Member','createdAt','../utils/variables','bot','test','add','@bastion/tesseract','generateEmbed','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','../utils/embeds','Member\x20ID','handleInviteRoles','Member\x20Type','Human','client','deletable','handleAutoRoles','get','../assets/greetings.json','_id','send','fetchInvites','name','autoAssignable'];(function(_0x16be60,_0x3ed391){const _0x5bebfa=function(_0x297cd0){while(--_0x297cd0){_0x16be60['push'](_0x16be60['shift']());}},_0x43c9d7=function(){const _0x1a13a2={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3f41c7,_0x463f4c,_0x192487,_0x3f8d45){_0x3f8d45=_0x3f8d45||{};let _0x7e5abc=_0x463f4c+'='+_0x192487,_0x2bf8b9=0x0;for(let _0x368ac2=0x0,_0x36b420=_0x3f41c7['length'];_0x368ac2<_0x36b420;_0x368ac2++){const _0x528a98=_0x3f41c7[_0x368ac2];_0x7e5abc+=';\x20'+_0x528a98;const _0x363344=_0x3f41c7[_0x528a98];_0x3f41c7['push'](_0x363344),_0x36b420=_0x3f41c7['length'],_0x363344!==!![]&&(_0x7e5abc+='='+_0x363344);}_0x3f8d45['cookie']=_0x7e5abc;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5b6ad1,_0x35b434){_0x5b6ad1=_0x5b6ad1||function(_0x5dd52f){return _0x5dd52f;};const _0x47861a=_0x5b6ad1(new RegExp('(?:^|;\x20)'+_0x35b434['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x20ebed=function(_0x253dbd,_0x4b6743){_0x253dbd(++_0x4b6743);};return _0x20ebed(_0x5bebfa,_0x3ed391),_0x47861a?decodeURIComponent(_0x47861a[0x1]):undefined;}},_0x12a23d=function(){const _0x28faab=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x28faab['test'](_0x1a13a2['removeCookie']['toString']());};_0x1a13a2['updateCookie']=_0x12a23d;let _0x11e061='';const _0x1635f9=_0x1a13a2['updateCookie']();if(!_0x1635f9)_0x1a13a2['setCookie'](['*'],'counter',0x1);else _0x1635f9?_0x11e061=_0x1a13a2['getCookie'](null,'counter'):_0x1a13a2['removeCookie']();};_0x43c9d7();}(a185_0x5beb,0x104));const a185_0x43c9=function(_0x16be60,_0x3ed391){_0x16be60=_0x16be60-0x73;let _0x5bebfa=a185_0x5beb[_0x16be60];return _0x5bebfa;};const a185_0x54689c=a185_0x43c9,a185_0x12a23d=function(){let _0x1635f9=!![];return function(_0x3f41c7,_0x463f4c){const _0x192487=_0x1635f9?function(){if(_0x463f4c){const _0x3f8d45=_0x463f4c['apply'](_0x3f41c7,arguments);return _0x463f4c=null,_0x3f8d45;}}:function(){};return _0x1635f9=![],_0x192487;};}(),a185_0x1a13a2=a185_0x12a23d(this,function(){const _0x7e5abc=function(){const _0x454a71=a185_0x43c9,_0x2bf8b9=_0x7e5abc[_0x454a71(0x79)](_0x454a71(0xa2))()[_0x454a71(0x79)](_0x454a71(0x83));return!_0x2bf8b9[_0x454a71(0x7f)](a185_0x1a13a2);};return _0x7e5abc();});a185_0x1a13a2();'use strict';const tesseract_1=require(a185_0x54689c(0x81)),Role_1=require(a185_0x54689c(0xad)),constants=require('../utils/constants'),embeds=require(a185_0x54689c(0x84)),variables=require(a185_0x54689c(0x7d)),greetings=require(a185_0x54689c(0x8d));module[a185_0x54689c(0x9f)]=class GuildMemberAddListener extends tesseract_1[a185_0x54689c(0xba)]{constructor(){const _0x9fa381=a185_0x54689c;super(_0x9fa381(0xa1),{'mode':tesseract_1[_0x9fa381(0xaf)][_0x9fa381(0x74)]['ON']}),this[_0x9fa381(0x8b)]=async(_0x368ac2,_0x36b420)=>{const _0x254866=_0x9fa381,_0x528a98=await Role_1[_0x254866(0x7a)][_0x254866(0xb0)]({'guild':_0x36b420['id'],'autoAssignable':{'$exists':!![],'$ne':null}}),_0x363344=_0x528a98['filter'](_0x47861a=>_0x47861a[_0x254866(0x92)]&&_0x47861a['autoAssignable'][_0x254866(0x98)])[_0x254866(0x97)](_0x20ebed=>_0x20ebed[_0x254866(0x8e)]),_0x5b6ad1=_0x528a98['filter'](_0x5dd52f=>_0x5dd52f[_0x254866(0x92)]&&_0x5dd52f[_0x254866(0x92)][_0x254866(0xa6)])[_0x254866(0x97)](_0x253dbd=>_0x253dbd['_id']),_0x35b434=_0x528a98['filter'](_0x4b6743=>_0x4b6743[_0x254866(0x92)]&&(Number(_0x4b6743[_0x254866(0x92)][_0x254866(0x98)])^Number(_0x4b6743['autoAssignable'][_0x254866(0xa6)]))===0x0)['map'](_0x28faab=>_0x28faab['_id']);(_0x363344[_0x254866(0xb4)]||_0x5b6ad1[_0x254866(0xb4)]||_0x35b434['length'])&&_0x368ac2[_0x254866(0xb8)]['add'](_0x35b434[_0x254866(0x9b)](_0x368ac2[_0x254866(0x75)]['bot']?_0x363344:_0x5b6ad1),'Auto\x20added\x20via\x20Auto\x20Roles');},this[_0x9fa381(0xa8)]=(_0x4098bf,_0x1950be)=>{const _0x9ad826=_0x9fa381;if(!_0x1950be[_0x9ad826(0xb1)])return;_0x1950be[_0x9ad826(0xb1)][_0x9ad826(0xb7)]&&_0x4098bf[_0x9ad826(0x73)]()['then'](_0x4244a9=>{const _0x34d3af=_0x9ad826;_0x4244a9[_0x34d3af(0x8f)]({'embed':{...JSON[_0x34d3af(0x76)](variables[_0x34d3af(0x96)](JSON[_0x34d3af(0xb9)](_0x7eb0c9),_0x4098bf)),'footer':{'text':_0x34d3af(0xa9)+_0x4098bf[_0x34d3af(0xae)][_0x34d3af(0x91)]+_0x34d3af(0xa4)}}})[_0x34d3af(0xbb)](()=>{});})['catch'](()=>{});if(!_0x1950be[_0x9ad826(0xb1)][_0x9ad826(0xb2)])return;if(!_0x4098bf[_0x9ad826(0xae)]['channels'][_0x9ad826(0x78)][_0x9ad826(0x9e)](_0x1950be[_0x9ad826(0xb1)][_0x9ad826(0xb2)]))return;const _0x5c85b8=_0x4098bf['guild'][_0x9ad826(0xb5)][_0x9ad826(0x78)][_0x9ad826(0x8c)](_0x1950be[_0x9ad826(0xb1)][_0x9ad826(0xb2)]),_0x7eb0c9=embeds[_0x9ad826(0x82)](_0x1950be[_0x9ad826(0xb1)][_0x9ad826(0xa7)]?_0x1950be['greeting']['message']:greetings[Math['floor'](Math['random']()*greetings[_0x9ad826(0xb4)])]);_0x5c85b8[_0x9ad826(0x8f)]({'embed':{...JSON['parse'](variables[_0x9ad826(0x96)](JSON[_0x9ad826(0xb9)](_0x7eb0c9),_0x4098bf)),'footer':{'text':'Greetings!'}}})[_0x9ad826(0x9d)](_0x2fa9e2=>{const _0x5cdf4e=_0x9ad826;_0x1950be['greeting'][_0x5cdf4e(0x95)]&&_0x2fa9e2[_0x5cdf4e(0x8a)]&&_0x2fa9e2[_0x5cdf4e(0x93)]({'timeout':_0x1950be['greeting']['timeout']*0xea60})[_0x5cdf4e(0xbb)](()=>{});})[_0x9ad826(0xbb)](()=>{});},this[_0x9fa381(0x86)]=async _0x555ab9=>{const _0x717afa=_0x9fa381;if(constants['isPublicBastion'](_0x555ab9[_0x717afa(0x89)][_0x717afa(0x75)]))return;const _0x416029=await _0x555ab9[_0x717afa(0xae)][_0x717afa(0x90)](),_0x2e5131=_0x416029[_0x717afa(0xb0)](_0x548951=>_0x548951[_0x717afa(0x77)]>_0x555ab9[_0x717afa(0xae)]['invites'][_0x548951[_0x717afa(0x99)]]);for(const _0x1a77b7 of _0x416029[_0x717afa(0xaa)]()){_0x555ab9[_0x717afa(0xae)]['invites'][_0x1a77b7[_0x717afa(0x99)]]=_0x1a77b7[_0x717afa(0x77)]||0x0;}const _0x3c268a=await Role_1[_0x717afa(0x7a)][_0x717afa(0xb0)]({'guild':_0x555ab9[_0x717afa(0xae)]['id'],'invite':_0x2e5131['code']});_0x3c268a&&_0x3c268a[_0x717afa(0xb4)]&&await _0x555ab9[_0x717afa(0xb8)][_0x717afa(0x80)](_0x3c268a['map'](_0x4d5b9c=>_0x4d5b9c[_0x717afa(0x8e)]),'Joined\x20using\x20the\x20invite\x20'+_0x2e5131[_0x717afa(0x99)]);},this[_0x9fa381(0xb3)]=async _0xd7cf47=>{const _0x2e75c9=_0x9fa381;_0xd7cf47[_0x2e75c9(0xa0)]&&await _0xd7cf47[_0x2e75c9(0xa3)]();const _0x1d2281=_0xd7cf47[_0x2e75c9(0xae)],_0x23d674=await _0x1d2281[_0x2e75c9(0xab)]();this[_0x2e75c9(0xa8)](_0xd7cf47,_0x23d674),this[_0x2e75c9(0x8b)](_0xd7cf47,_0x1d2281),this[_0x2e75c9(0x86)](_0xd7cf47)[_0x2e75c9(0xbb)](tesseract_1['Logger'][_0x2e75c9(0x9a)]),_0x1d2281[_0x2e75c9(0xac)]({'event':_0x2e75c9(0xa1),'fields':[{'name':_0x2e75c9(0x7b),'value':_0xd7cf47[_0x2e75c9(0x75)][_0x2e75c9(0x9c)],'inline':!![]},{'name':_0x2e75c9(0x85),'value':_0xd7cf47['id'],'inline':!![]},{'name':_0x2e75c9(0x87),'value':_0xd7cf47[_0x2e75c9(0x75)][_0x2e75c9(0x7e)]?_0x2e75c9(0x94):_0x2e75c9(0x88),'inline':!![]},{'name':'Joined\x20Discord','value':_0xd7cf47[_0x2e75c9(0x75)][_0x2e75c9(0x7c)][_0x2e75c9(0xb6)](),'inline':!![]}],'timestamp':_0xd7cf47[_0x2e75c9(0xa5)]});};}};
const a178_0x25b1=['../models/Guild','constructor','cache','Listener','type','roles','Constants','STREAMING','catch','size','fetch','default','every','return\x20/\x22\x20+\x20this\x20+\x20\x22/','streamerRoleId','some','test','exports','findById','apply','LISTENER_MODE','member','exec','has','activities','presenceUpdate','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','guild'];(function(_0x3ed849,_0x25b1ac){const _0x5c71ac=function(_0x219e9b){while(--_0x219e9b){_0x3ed849['push'](_0x3ed849['shift']());}},_0x1722e7=function(){const _0x2f6f8e={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x470a22,_0x214241,_0x19ce2c,_0x568650){_0x568650=_0x568650||{};let _0x563024=_0x214241+'='+_0x19ce2c,_0x1d0339=0x0;for(let _0x4c2680=0x0,_0x2d2e82=_0x470a22['length'];_0x4c2680<_0x2d2e82;_0x4c2680++){const _0x234737=_0x470a22[_0x4c2680];_0x563024+=';\x20'+_0x234737;const _0x48c6be=_0x470a22[_0x234737];_0x470a22['push'](_0x48c6be),_0x2d2e82=_0x470a22['length'],_0x48c6be!==!![]&&(_0x563024+='='+_0x48c6be);}_0x568650['cookie']=_0x563024;},'removeCookie':function(){return'dev';},'getCookie':function(_0x748a0,_0x5767b2){_0x748a0=_0x748a0||function(_0x3d4e25){return _0x3d4e25;};const _0x488a48=_0x748a0(new RegExp('(?:^|;\x20)'+_0x5767b2['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x434a4d=function(_0x2152d8,_0x5386af){_0x2152d8(++_0x5386af);};return _0x434a4d(_0x5c71ac,_0x25b1ac),_0x488a48?decodeURIComponent(_0x488a48[0x1]):undefined;}},_0x5439d2=function(){const _0x3ec55c=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3ec55c['test'](_0x2f6f8e['removeCookie']['toString']());};_0x2f6f8e['updateCookie']=_0x5439d2;let _0x2152c2='';const _0x4912d4=_0x2f6f8e['updateCookie']();if(!_0x4912d4)_0x2f6f8e['setCookie'](['*'],'counter',0x1);else _0x4912d4?_0x2152c2=_0x2f6f8e['getCookie'](null,'counter'):_0x2f6f8e['removeCookie']();};_0x1722e7();}(a178_0x25b1,0x74));const a178_0x5c71=function(_0x3ed849,_0x25b1ac){_0x3ed849=_0x3ed849-0x0;let _0x5c71ac=a178_0x25b1[_0x3ed849];return _0x5c71ac;};const a178_0x2f6f8e=function(){let _0x2152c2=!![];return function(_0x4912d4,_0x470a22){const _0x214241=_0x2152c2?function(){if(_0x470a22){const _0x19ce2c=_0x470a22[a178_0x5c71('0xf')](_0x4912d4,arguments);return _0x470a22=null,_0x19ce2c;}}:function(){};return _0x2152c2=![],_0x214241;};}(),a178_0x219e9b=a178_0x2f6f8e(this,function(){const _0x568650=function(){const _0x563024=_0x568650[a178_0x5c71('0x19')](a178_0x5c71('0x9'))()[a178_0x5c71('0x19')](a178_0x5c71('0x16'));return!_0x563024[a178_0x5c71('0xc')](a178_0x219e9b);};return _0x568650();});a178_0x219e9b();'use strict';const tesseract_1=require('@bastion/tesseract'),Guild_1=require(a178_0x5c71('0x18'));module[a178_0x5c71('0xd')]=class PresenceListener extends tesseract_1[a178_0x5c71('0x1b')]{constructor(){super(a178_0x5c71('0x15'),{'mode':tesseract_1[a178_0x5c71('0x2')][a178_0x5c71('0x10')]['ON']}),this[a178_0x5c71('0x12')]=async(_0x1d0339,_0x4c2680)=>{if(!_0x4c2680)return;if(!_0x4c2680['guild'])return;let _0x2d2e82;if((!_0x1d0339||_0x1d0339[a178_0x5c71('0x14')][a178_0x5c71('0x8')](_0x48c6be=>_0x48c6be[a178_0x5c71('0x0')]!=='STREAMING'))&&_0x4c2680[a178_0x5c71('0x14')][a178_0x5c71('0xb')](_0x748a0=>_0x748a0['type']===a178_0x5c71('0x3')))_0x2d2e82=!![];else{if(_0x1d0339&&_0x1d0339[a178_0x5c71('0x14')][a178_0x5c71('0xb')](_0x5767b2=>_0x5767b2[a178_0x5c71('0x0')]==='STREAMING')&&_0x4c2680[a178_0x5c71('0x14')][a178_0x5c71('0x8')](_0x488a48=>_0x488a48[a178_0x5c71('0x0')]!==a178_0x5c71('0x3')))_0x2d2e82=![];else return;}_0x4c2680['member']['partial']&&await _0x4c2680[a178_0x5c71('0x11')][a178_0x5c71('0x6')]();if(_0x4c2680[a178_0x5c71('0x11')]['roles'][a178_0x5c71('0x1a')][a178_0x5c71('0x5')]<=0x2)return;const _0x234737=await Guild_1[a178_0x5c71('0x7')][a178_0x5c71('0xe')](_0x4c2680[a178_0x5c71('0x17')]['id']);if(!_0x234737[a178_0x5c71('0xa')])return;if(!_0x4c2680['guild'][a178_0x5c71('0x1')]['cache'][a178_0x5c71('0x13')](_0x234737[a178_0x5c71('0xa')]))return;_0x2d2e82?_0x4c2680['member']['roles']['add'](_0x234737[a178_0x5c71('0xa')])['catch'](()=>{}):_0x4c2680[a178_0x5c71('0x11')]['roles']['remove'](_0x234737['streamerRoleId'])[a178_0x5c71('0x4')](()=>{});};}};
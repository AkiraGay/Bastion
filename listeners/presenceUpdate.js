const a179_0x59c4=['remove','some','add','cache','catch','apply','presenceUpdate','guild','every','size','test','@bastion/tesseract','exec','roles','../models/Guild','constructor','streamerRoleId','has','default','LISTENER_MODE','STREAMING','exports','Constants','member','activities','type'];(function(_0x5674bf,_0x59c46f){const _0x14b85c=function(_0x251e14){while(--_0x251e14){_0x5674bf['push'](_0x5674bf['shift']());}},_0x57288f=function(){const _0x591db1={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x1d7c99,_0x46e5ef,_0xce98ad,_0x2e8dbf){_0x2e8dbf=_0x2e8dbf||{};let _0x54bd59=_0x46e5ef+'='+_0xce98ad,_0x2e1740=0x0;for(let _0x26c33c=0x0,_0x58e747=_0x1d7c99['length'];_0x26c33c<_0x58e747;_0x26c33c++){const _0x5cf6a0=_0x1d7c99[_0x26c33c];_0x54bd59+=';\x20'+_0x5cf6a0;const _0x401dd4=_0x1d7c99[_0x5cf6a0];_0x1d7c99['push'](_0x401dd4),_0x58e747=_0x1d7c99['length'],_0x401dd4!==!![]&&(_0x54bd59+='='+_0x401dd4);}_0x2e8dbf['cookie']=_0x54bd59;},'removeCookie':function(){return'dev';},'getCookie':function(_0x6a7d4d,_0x247e36){_0x6a7d4d=_0x6a7d4d||function(_0x53f6b2){return _0x53f6b2;};const _0x221bcf=_0x6a7d4d(new RegExp('(?:^|;\x20)'+_0x247e36['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x2b7ff2=function(_0x352231,_0x3e0414){_0x352231(++_0x3e0414);};return _0x2b7ff2(_0x14b85c,_0x59c46f),_0x221bcf?decodeURIComponent(_0x221bcf[0x1]):undefined;}},_0x52cce6=function(){const _0x58317c=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x58317c['test'](_0x591db1['removeCookie']['toString']());};_0x591db1['updateCookie']=_0x52cce6;let _0x2835c8='';const _0x21dc75=_0x591db1['updateCookie']();if(!_0x21dc75)_0x591db1['setCookie'](['*'],'counter',0x1);else _0x21dc75?_0x2835c8=_0x591db1['getCookie'](null,'counter'):_0x591db1['removeCookie']();};_0x57288f();}(a179_0x59c4,0x1cf));const a179_0x14b8=function(_0x5674bf,_0x59c46f){_0x5674bf=_0x5674bf-0x0;let _0x14b85c=a179_0x59c4[_0x5674bf];return _0x14b85c;};const a179_0x591db1=function(){let _0x2835c8=!![];return function(_0x21dc75,_0x1d7c99){const _0x46e5ef=_0x2835c8?function(){if(_0x1d7c99){const _0xce98ad=_0x1d7c99[a179_0x14b8('0xa')](_0x21dc75,arguments);return _0x1d7c99=null,_0xce98ad;}}:function(){};return _0x2835c8=![],_0x46e5ef;};}(),a179_0x251e14=a179_0x591db1(this,function(){const _0x2e8dbf=function(){const _0x54bd59=_0x2e8dbf[a179_0x14b8('0x14')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a179_0x14b8('0x14')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x54bd59[a179_0x14b8('0xf')](a179_0x251e14);};return _0x2e8dbf();});a179_0x251e14();'use strict';const tesseract_1=require(a179_0x14b8('0x10')),Guild_1=require(a179_0x14b8('0x13'));module[a179_0x14b8('0x0')]=class PresenceListener extends tesseract_1['Listener']{constructor(){super(a179_0x14b8('0xb'),{'mode':tesseract_1[a179_0x14b8('0x1')][a179_0x14b8('0x18')]['ON']}),this[a179_0x14b8('0x11')]=async(_0x2e1740,_0x26c33c)=>{if(!_0x26c33c)return;if(!_0x26c33c[a179_0x14b8('0xc')])return;let _0x58e747;if((!_0x2e1740||_0x2e1740[a179_0x14b8('0x3')][a179_0x14b8('0xd')](_0x401dd4=>_0x401dd4[a179_0x14b8('0x4')]!==a179_0x14b8('0x19')))&&_0x26c33c[a179_0x14b8('0x3')][a179_0x14b8('0x6')](_0x6a7d4d=>_0x6a7d4d['type']===a179_0x14b8('0x19')))_0x58e747=!![];else{if(_0x2e1740&&_0x2e1740[a179_0x14b8('0x3')]['some'](_0x247e36=>_0x247e36[a179_0x14b8('0x4')]==='STREAMING')&&_0x26c33c[a179_0x14b8('0x3')][a179_0x14b8('0xd')](_0x221bcf=>_0x221bcf[a179_0x14b8('0x4')]!==a179_0x14b8('0x19')))_0x58e747=![];else return;}_0x26c33c['member']['partial']&&await _0x26c33c[a179_0x14b8('0x2')]['fetch']();if(_0x26c33c[a179_0x14b8('0x2')]['roles']['cache'][a179_0x14b8('0xe')]<=0x2)return;const _0x5cf6a0=await Guild_1[a179_0x14b8('0x17')]['findById'](_0x26c33c[a179_0x14b8('0xc')]['id']);if(!_0x5cf6a0[a179_0x14b8('0x15')])return;if(!_0x26c33c[a179_0x14b8('0xc')][a179_0x14b8('0x12')][a179_0x14b8('0x8')][a179_0x14b8('0x16')](_0x5cf6a0['streamerRoleId']))return;_0x58e747?_0x26c33c['member'][a179_0x14b8('0x12')][a179_0x14b8('0x7')](_0x5cf6a0[a179_0x14b8('0x15')])[a179_0x14b8('0x9')](()=>{}):_0x26c33c['member'][a179_0x14b8('0x12')][a179_0x14b8('0x5')](_0x5cf6a0[a179_0x14b8('0x15')])[a179_0x14b8('0x9')](()=>{});};}};
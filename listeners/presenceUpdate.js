const a197_0xdd6e=['has','catch','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','remove','STREAMING','../models/Guild','test','constructor','findById','fetch','add','activities','size','type','presenceUpdate','apply','@bastion/tesseract','roles','every','member','exports','some','exec','return\x20/\x22\x20+\x20this\x20+\x20\x22/','streamerRoleId','cache','guild'];(function(_0x2af3b7,_0x3804d9){const _0xdd6ef0=function(_0x3ccd30){while(--_0x3ccd30){_0x2af3b7['push'](_0x2af3b7['shift']());}},_0x4eb9a1=function(){const _0x48eea6={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x29fdad,_0x38b377,_0x4ac337,_0x31fddd){_0x31fddd=_0x31fddd||{};let _0x25e950=_0x38b377+'='+_0x4ac337,_0x21119f=0x0;for(let _0x5c60b8=0x0,_0x317b55=_0x29fdad['length'];_0x5c60b8<_0x317b55;_0x5c60b8++){const _0x2ce8f4=_0x29fdad[_0x5c60b8];_0x25e950+=';\x20'+_0x2ce8f4;const _0x42624c=_0x29fdad[_0x2ce8f4];_0x29fdad['push'](_0x42624c),_0x317b55=_0x29fdad['length'],_0x42624c!==!![]&&(_0x25e950+='='+_0x42624c);}_0x31fddd['cookie']=_0x25e950;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2b8262,_0x212855){_0x2b8262=_0x2b8262||function(_0x1c4380){return _0x1c4380;};const _0x46a9f6=_0x2b8262(new RegExp('(?:^|;\x20)'+_0x212855['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x3cb2a3=function(_0x4bb600,_0x30e40e){_0x4bb600(++_0x30e40e);};return _0x3cb2a3(_0xdd6ef0,_0x3804d9),_0x46a9f6?decodeURIComponent(_0x46a9f6[0x1]):undefined;}},_0x15b196=function(){const _0x375b98=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x375b98['test'](_0x48eea6['removeCookie']['toString']());};_0x48eea6['updateCookie']=_0x15b196;let _0x12ea15='';const _0x23811b=_0x48eea6['updateCookie']();if(!_0x23811b)_0x48eea6['setCookie'](['*'],'counter',0x1);else _0x23811b?_0x12ea15=_0x48eea6['getCookie'](null,'counter'):_0x48eea6['removeCookie']();};_0x4eb9a1();}(a197_0xdd6e,0x98));const a197_0x4eb9=function(_0x2af3b7,_0x3804d9){_0x2af3b7=_0x2af3b7-0xb4;let _0xdd6ef0=a197_0xdd6e[_0x2af3b7];return _0xdd6ef0;};const a197_0x456999=a197_0x4eb9,a197_0x15b196=function(){let _0x23811b=!![];return function(_0x29fdad,_0x38b377){const _0x4ac337=_0x23811b?function(){const _0x96a2f8=a197_0x4eb9;if(_0x38b377){const _0x31fddd=_0x38b377[_0x96a2f8(0xcd)](_0x29fdad,arguments);return _0x38b377=null,_0x31fddd;}}:function(){};return _0x23811b=![],_0x4ac337;};}(),a197_0x48eea6=a197_0x15b196(this,function(){const _0x25e950=function(){const _0x2330f4=a197_0x4eb9,_0x21119f=_0x25e950[_0x2330f4(0xc5)](_0x2330f4(0xba))()['constructor'](_0x2330f4(0xc0));return!_0x21119f[_0x2330f4(0xc4)](a197_0x48eea6);};return _0x25e950();});a197_0x48eea6();'use strict';const tesseract_1=require(a197_0x456999(0xce)),Guild_1=require(a197_0x456999(0xc3));module[a197_0x456999(0xb7)]=class PresenceListener extends tesseract_1['Listener']{constructor(){const _0x544b4f=a197_0x456999;super(_0x544b4f(0xcc),{'mode':tesseract_1['Constants']['LISTENER_MODE']['ON']}),this[_0x544b4f(0xb9)]=async(_0x5c60b8,_0x317b55)=>{const _0x360914=_0x544b4f;if(!_0x317b55)return;if(!_0x317b55[_0x360914(0xbd)])return;let _0x2ce8f4;if((!_0x5c60b8||_0x5c60b8[_0x360914(0xc9)][_0x360914(0xb5)](_0x2b8262=>_0x2b8262[_0x360914(0xcb)]!==_0x360914(0xc2)))&&_0x317b55[_0x360914(0xc9)][_0x360914(0xb8)](_0x212855=>_0x212855['type']==='STREAMING'))_0x2ce8f4=!![];else{if(_0x5c60b8&&_0x5c60b8[_0x360914(0xc9)]['some'](_0x46a9f6=>_0x46a9f6[_0x360914(0xcb)]===_0x360914(0xc2))&&_0x317b55[_0x360914(0xc9)][_0x360914(0xb5)](_0x3cb2a3=>_0x3cb2a3[_0x360914(0xcb)]!=='STREAMING'))_0x2ce8f4=![];else return;}_0x317b55[_0x360914(0xb6)]['partial']&&await _0x317b55[_0x360914(0xb6)][_0x360914(0xc7)]();if(_0x317b55[_0x360914(0xb6)][_0x360914(0xb4)][_0x360914(0xbc)][_0x360914(0xca)]<=0x2)return;const _0x42624c=await Guild_1['default'][_0x360914(0xc6)](_0x317b55['guild']['id']);if(!_0x42624c[_0x360914(0xbb)])return;if(!_0x317b55[_0x360914(0xbd)]['roles']['cache'][_0x360914(0xbe)](_0x42624c[_0x360914(0xbb)]))return;_0x2ce8f4?_0x317b55[_0x360914(0xb6)][_0x360914(0xb4)][_0x360914(0xc8)](_0x42624c[_0x360914(0xbb)])[_0x360914(0xbf)](()=>{}):_0x317b55[_0x360914(0xb6)][_0x360914(0xb4)][_0x360914(0xc1)](_0x42624c[_0x360914(0xbb)])[_0x360914(0xbf)](()=>{});};}};
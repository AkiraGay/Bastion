const a197_0x248d=['member','partial','exec','@bastion/tesseract','some','Listener','has','fetch','streamerRoleId','test','constructor','return\x20/\x22\x20+\x20this\x20+\x20\x22/','STREAMING','findById','exports','apply','default','type','guild','roles','size','catch','LISTENER_MODE','Constants','every','../models/Guild','presenceUpdate','activities'];(function(_0x2e46d3,_0x236b56){const _0x248d00=function(_0x52a360){while(--_0x52a360){_0x2e46d3['push'](_0x2e46d3['shift']());}},_0x1168ce=function(){const _0x33fa0c={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x1a3e22,_0x1586f5,_0x46de2c,_0x292ed3){_0x292ed3=_0x292ed3||{};let _0x57be9d=_0x1586f5+'='+_0x46de2c,_0x1e2ede=0x0;for(let _0x571961=0x0,_0x5d0432=_0x1a3e22['length'];_0x571961<_0x5d0432;_0x571961++){const _0x31ecd0=_0x1a3e22[_0x571961];_0x57be9d+=';\x20'+_0x31ecd0;const _0x38d66e=_0x1a3e22[_0x31ecd0];_0x1a3e22['push'](_0x38d66e),_0x5d0432=_0x1a3e22['length'],_0x38d66e!==!![]&&(_0x57be9d+='='+_0x38d66e);}_0x292ed3['cookie']=_0x57be9d;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4c65ed,_0x4fae40){_0x4c65ed=_0x4c65ed||function(_0x1aacf3){return _0x1aacf3;};const _0x156b1c=_0x4c65ed(new RegExp('(?:^|;\x20)'+_0x4fae40['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x213481=function(_0x466f56,_0x50ca7d){_0x466f56(++_0x50ca7d);};return _0x213481(_0x248d00,_0x236b56),_0x156b1c?decodeURIComponent(_0x156b1c[0x1]):undefined;}},_0x35c5b7=function(){const _0x6201fa=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x6201fa['test'](_0x33fa0c['removeCookie']['toString']());};_0x33fa0c['updateCookie']=_0x35c5b7;let _0x1e9e6f='';const _0x408d92=_0x33fa0c['updateCookie']();if(!_0x408d92)_0x33fa0c['setCookie'](['*'],'counter',0x1);else _0x408d92?_0x1e9e6f=_0x33fa0c['getCookie'](null,'counter'):_0x33fa0c['removeCookie']();};_0x1168ce();}(a197_0x248d,0x1d3));const a197_0x1168=function(_0x2e46d3,_0x236b56){_0x2e46d3=_0x2e46d3-0xe8;let _0x248d00=a197_0x248d[_0x2e46d3];return _0x248d00;};const a197_0x5ec7aa=a197_0x1168,a197_0x35c5b7=function(){let _0x408d92=!![];return function(_0x1a3e22,_0x1586f5){const _0x46de2c=_0x408d92?function(){const _0x2cb114=a197_0x1168;if(_0x1586f5){const _0x292ed3=_0x1586f5[_0x2cb114(0x100)](_0x1a3e22,arguments);return _0x1586f5=null,_0x292ed3;}}:function(){};return _0x408d92=![],_0x46de2c;};}(),a197_0x33fa0c=a197_0x35c5b7(this,function(){const _0x57be9d=function(){const _0x4ff11f=a197_0x1168,_0x1e2ede=_0x57be9d['constructor'](_0x4ff11f(0xfc))()[_0x4ff11f(0xfb)]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x1e2ede[_0x4ff11f(0xfa)](a197_0x33fa0c);};return _0x57be9d();});a197_0x33fa0c();'use strict';const tesseract_1=require(a197_0x5ec7aa(0xf4)),Guild_1=require(a197_0x5ec7aa(0xee));module[a197_0x5ec7aa(0xff)]=class PresenceListener extends tesseract_1[a197_0x5ec7aa(0xf6)]{constructor(){const _0x49dd3e=a197_0x5ec7aa;super(_0x49dd3e(0xef),{'mode':tesseract_1[_0x49dd3e(0xec)][_0x49dd3e(0xeb)]['ON']}),this[_0x49dd3e(0xf3)]=async(_0x571961,_0x5d0432)=>{const _0x1f2549=_0x49dd3e;if(!_0x5d0432)return;if(!_0x5d0432['guild'])return;let _0x31ecd0;if((!_0x571961||_0x571961['activities'][_0x1f2549(0xed)](_0x4c65ed=>_0x4c65ed['type']!==_0x1f2549(0xfd)))&&_0x5d0432[_0x1f2549(0xf0)]['some'](_0x4fae40=>_0x4fae40[_0x1f2549(0x102)]===_0x1f2549(0xfd)))_0x31ecd0=!![];else{if(_0x571961&&_0x571961[_0x1f2549(0xf0)][_0x1f2549(0xf5)](_0x156b1c=>_0x156b1c['type']===_0x1f2549(0xfd))&&_0x5d0432[_0x1f2549(0xf0)]['every'](_0x213481=>_0x213481['type']!==_0x1f2549(0xfd)))_0x31ecd0=![];else return;}_0x5d0432[_0x1f2549(0xf1)][_0x1f2549(0xf2)]&&await _0x5d0432[_0x1f2549(0xf1)][_0x1f2549(0xf8)]();if(_0x5d0432[_0x1f2549(0xf1)][_0x1f2549(0xe8)]['cache'][_0x1f2549(0xe9)]<=0x2)return;const _0x38d66e=await Guild_1[_0x1f2549(0x101)][_0x1f2549(0xfe)](_0x5d0432['guild']['id']);if(!_0x38d66e['streamerRoleId'])return;if(!_0x5d0432[_0x1f2549(0x103)][_0x1f2549(0xe8)]['cache'][_0x1f2549(0xf7)](_0x38d66e['streamerRoleId']))return;_0x31ecd0?_0x5d0432[_0x1f2549(0xf1)]['roles']['add'](_0x38d66e[_0x1f2549(0xf9)])[_0x1f2549(0xea)](()=>{}):_0x5d0432[_0x1f2549(0xf1)][_0x1f2549(0xe8)]['remove'](_0x38d66e['streamerRoleId'])[_0x1f2549(0xea)](()=>{});};}};
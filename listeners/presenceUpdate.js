const a189_0xe781=['STREAMING','default','fetch','../models/Guild','@bastion/tesseract','size','type','test','remove','exec','roles','LISTENER_MODE','catch','Constants','constructor','streamerRoleId','guild','cache','Listener','activities','apply','exports','some','member','return\x20/\x22\x20+\x20this\x20+\x20\x22/','presenceUpdate','has','every'];(function(_0x200755,_0xe781d9){const _0x1df94c=function(_0x48ae2e){while(--_0x48ae2e){_0x200755['push'](_0x200755['shift']());}},_0x2a7498=function(){const _0x585a8f={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x317151,_0x4230af,_0x3c0bcf,_0x2b0a3d){_0x2b0a3d=_0x2b0a3d||{};let _0x42b459=_0x4230af+'='+_0x3c0bcf,_0x410aee=0x0;for(let _0x3b245f=0x0,_0x229a26=_0x317151['length'];_0x3b245f<_0x229a26;_0x3b245f++){const _0x161699=_0x317151[_0x3b245f];_0x42b459+=';\x20'+_0x161699;const _0x3d5859=_0x317151[_0x161699];_0x317151['push'](_0x3d5859),_0x229a26=_0x317151['length'],_0x3d5859!==!![]&&(_0x42b459+='='+_0x3d5859);}_0x2b0a3d['cookie']=_0x42b459;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5d2255,_0x3ad137){_0x5d2255=_0x5d2255||function(_0x142fa3){return _0x142fa3;};const _0x3251ae=_0x5d2255(new RegExp('(?:^|;\x20)'+_0x3ad137['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x229e5d=function(_0x2e5700,_0x1ab0bf){_0x2e5700(++_0x1ab0bf);};return _0x229e5d(_0x1df94c,_0xe781d9),_0x3251ae?decodeURIComponent(_0x3251ae[0x1]):undefined;}},_0x4d92cb=function(){const _0x2f6463=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x2f6463['test'](_0x585a8f['removeCookie']['toString']());};_0x585a8f['updateCookie']=_0x4d92cb;let _0x357dad='';const _0x2a2d3c=_0x585a8f['updateCookie']();if(!_0x2a2d3c)_0x585a8f['setCookie'](['*'],'counter',0x1);else _0x2a2d3c?_0x357dad=_0x585a8f['getCookie'](null,'counter'):_0x585a8f['removeCookie']();};_0x2a7498();}(a189_0xe781,0x1d6));const a189_0x1df9=function(_0x200755,_0xe781d9){_0x200755=_0x200755-0x0;let _0x1df94c=a189_0xe781[_0x200755];return _0x1df94c;};const _0x43a1ad=a189_0x1df9,a189_0x585a8f=function(){let _0x357dad=!![];return function(_0x2a2d3c,_0x317151){const _0x4230af=_0x357dad?function(){const _0x3b2c72=a189_0x1df9;if(_0x317151){const _0x3c0bcf=_0x317151[_0x3b2c72('0x1a')](_0x2a2d3c,arguments);return _0x317151=null,_0x3c0bcf;}}:function(){};return _0x357dad=![],_0x4230af;};}(),a189_0x48ae2e=a189_0x585a8f(this,function(){const _0x2b0a3d=function(){const _0x4a22b6=a189_0x1df9,_0x42b459=_0x2b0a3d[_0x4a22b6('0x14')](_0x4a22b6('0x2'))()[_0x4a22b6('0x14')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x42b459[_0x4a22b6('0xd')](a189_0x48ae2e);};return _0x2b0a3d();});a189_0x48ae2e();'use strict';const tesseract_1=require(_0x43a1ad('0xa')),Guild_1=require(_0x43a1ad('0x9'));module[_0x43a1ad('0x1b')]=class PresenceListener extends tesseract_1[_0x43a1ad('0x18')]{constructor(){const _0xfad5e7=_0x43a1ad;super(_0xfad5e7('0x3'),{'mode':tesseract_1[_0xfad5e7('0x13')][_0xfad5e7('0x11')]['ON']}),this[_0xfad5e7('0xf')]=async(_0x410aee,_0x3b245f)=>{const _0x507038=_0xfad5e7;if(!_0x3b245f)return;if(!_0x3b245f[_0x507038('0x16')])return;let _0x229a26;if((!_0x410aee||_0x410aee[_0x507038('0x19')]['every'](_0x3d5859=>_0x3d5859[_0x507038('0xc')]!==_0x507038('0x6')))&&_0x3b245f[_0x507038('0x19')]['some'](_0x5d2255=>_0x5d2255[_0x507038('0xc')]===_0x507038('0x6')))_0x229a26=!![];else{if(_0x410aee&&_0x410aee[_0x507038('0x19')][_0x507038('0x0')](_0x3ad137=>_0x3ad137[_0x507038('0xc')]==='STREAMING')&&_0x3b245f[_0x507038('0x19')][_0x507038('0x5')](_0x3251ae=>_0x3251ae[_0x507038('0xc')]!==_0x507038('0x6')))_0x229a26=![];else return;}_0x3b245f[_0x507038('0x1')]['partial']&&await _0x3b245f[_0x507038('0x1')][_0x507038('0x8')]();if(_0x3b245f[_0x507038('0x1')][_0x507038('0x10')][_0x507038('0x17')][_0x507038('0xb')]<=0x2)return;const _0x161699=await Guild_1[_0x507038('0x7')]['findById'](_0x3b245f[_0x507038('0x16')]['id']);if(!_0x161699['streamerRoleId'])return;if(!_0x3b245f[_0x507038('0x16')][_0x507038('0x10')][_0x507038('0x17')][_0x507038('0x4')](_0x161699[_0x507038('0x15')]))return;_0x229a26?_0x3b245f[_0x507038('0x1')]['roles']['add'](_0x161699[_0x507038('0x15')])[_0x507038('0x12')](()=>{}):_0x3b245f[_0x507038('0x1')][_0x507038('0x10')][_0x507038('0xe')](_0x161699[_0x507038('0x15')])[_0x507038('0x12')](()=>{});};}};
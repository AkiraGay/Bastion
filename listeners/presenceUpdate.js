const a168_0xb9b9=['roles','fetch','Constants','has','constructor','remove','../models/Guild','test','activities','compile','catch','exec','guild','type','streamerRoleId','return\x20/\x22\x20+\x20this\x20+\x20\x22/','member','cache','size','some','STREAMING','every','partial','apply'];(function(_0x463679,_0xb9b994){const _0x4803b4=function(_0x2a3070){while(--_0x2a3070){_0x463679['push'](_0x463679['shift']());}};const _0x4fc4de=function(){const _0x216508={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0xa5b438,_0x1d7a44,_0x5a83e9,_0x2f3d0f){_0x2f3d0f=_0x2f3d0f||{};let _0x58cf2a=_0x1d7a44+'='+_0x5a83e9;let _0x4560b6=0x0;for(let _0x4da2d4=0x0,_0x54f2a8=_0xa5b438['length'];_0x4da2d4<_0x54f2a8;_0x4da2d4++){const _0x55bcc5=_0xa5b438[_0x4da2d4];_0x58cf2a+=';\x20'+_0x55bcc5;const _0x337f0d=_0xa5b438[_0x55bcc5];_0xa5b438['push'](_0x337f0d);_0x54f2a8=_0xa5b438['length'];if(_0x337f0d!==!![]){_0x58cf2a+='='+_0x337f0d;}}_0x2f3d0f['cookie']=_0x58cf2a;},'removeCookie':function(){return'dev';},'getCookie':function(_0x47b45b,_0x913eb6){_0x47b45b=_0x47b45b||function(_0x5a7be8){return _0x5a7be8;};const _0x11984c=_0x47b45b(new RegExp('(?:^|;\x20)'+_0x913eb6['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x4d72fa=function(_0x2c3aae,_0x1838d9){_0x2c3aae(++_0x1838d9);};_0x4d72fa(_0x4803b4,_0xb9b994);return _0x11984c?decodeURIComponent(_0x11984c[0x1]):undefined;}};const _0x441226=function(){const _0x31ea74=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x31ea74['test'](_0x216508['removeCookie']['toString']());};_0x216508['updateCookie']=_0x441226;let _0x3b12b2='';const _0x10a351=_0x216508['updateCookie']();if(!_0x10a351){_0x216508['setCookie'](['*'],'counter',0x1);}else if(_0x10a351){_0x3b12b2=_0x216508['getCookie'](null,'counter');}else{_0x216508['removeCookie']();}};_0x4fc4de();}(a168_0xb9b9,0x18b));const a168_0x4803=function(_0x463679,_0xb9b994){_0x463679=_0x463679-0x0;let _0x4803b4=a168_0xb9b9[_0x463679];return _0x4803b4;};const a168_0x216508=function(){let _0xefc707=!![];return function(_0x15ce76,_0x491e7c){const _0x31b876=_0xefc707?function(){if(_0x491e7c){const _0xe56e20=_0x491e7c[a168_0x4803('0xc')](_0x15ce76,arguments);_0x491e7c=null;return _0xe56e20;}}:function(){};_0xefc707=![];return _0x31b876;};}();const a168_0x2a3070=a168_0x216508(this,function(){const _0x17848e=function(){const _0x17bf67=_0x17848e[a168_0x4803('0x11')](a168_0x4803('0x4'))()[a168_0x4803('0x16')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x17bf67[a168_0x4803('0x14')](a168_0x2a3070);};return _0x17848e();});a168_0x2a3070();'use strict';const tesseract_1=require('@bastion/tesseract');const Guild_1=require(a168_0x4803('0x13'));module['exports']=class PresenceListener extends tesseract_1['Listener']{constructor(){super('presenceUpdate',{'mode':tesseract_1[a168_0x4803('0xf')]['LISTENER_MODE']['ON']});this[a168_0x4803('0x0')]=async(_0x19fb2e,_0x338f05)=>{if(!_0x338f05)return;if(!_0x338f05[a168_0x4803('0x1')])return;let _0x1cb424;if((!_0x19fb2e||_0x19fb2e['activities']['every'](_0x55e3a3=>_0x55e3a3[a168_0x4803('0x2')]!==a168_0x4803('0x9')))&&_0x338f05[a168_0x4803('0x15')]['some'](_0x35c2e8=>_0x35c2e8['type']===a168_0x4803('0x9'))){_0x1cb424=!![];}else if(_0x19fb2e&&_0x19fb2e['activities'][a168_0x4803('0x8')](_0x2b24d4=>_0x2b24d4['type']===a168_0x4803('0x9'))&&_0x338f05[a168_0x4803('0x15')][a168_0x4803('0xa')](_0x71c590=>_0x71c590[a168_0x4803('0x2')]!=='STREAMING')){_0x1cb424=![];}else return;if(_0x338f05['member'][a168_0x4803('0xb')]){await _0x338f05[a168_0x4803('0x5')][a168_0x4803('0xe')]();}if(_0x338f05[a168_0x4803('0x5')][a168_0x4803('0xd')][a168_0x4803('0x6')][a168_0x4803('0x7')]<=0x2)return;const _0x2ad92b=await Guild_1['default']['findById'](_0x338f05[a168_0x4803('0x1')]['id']);if(!_0x2ad92b[a168_0x4803('0x3')])return;if(!_0x338f05['guild'][a168_0x4803('0xd')]['cache'][a168_0x4803('0x10')](_0x2ad92b[a168_0x4803('0x3')]))return;if(_0x1cb424){_0x338f05['member'][a168_0x4803('0xd')]['add'](_0x2ad92b[a168_0x4803('0x3')])[a168_0x4803('0x17')](()=>{});}else{_0x338f05[a168_0x4803('0x5')][a168_0x4803('0xd')][a168_0x4803('0x12')](_0x2ad92b['streamerRoleId'])[a168_0x4803('0x17')](()=>{});}};}};
const a167_0x3565=['roles','return\x20/\x22\x20+\x20this\x20+\x20\x22/','STREAMING','LISTENER_MODE','remove','presenceUpdate','constructor','has','default','guild','apply','findById','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','Constants','activities','some','member','catch','compile','type','streamerRoleId','@bastion/tesseract','every','cache','exports','exec','Listener'];(function(_0x28aa75,_0x35658e){const _0x1b5cf9=function(_0x39146e){while(--_0x39146e){_0x28aa75['push'](_0x28aa75['shift']());}};const _0xaf5bf9=function(){const _0x56e165={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3c599b,_0x3b82e8,_0x2230e7,_0x47ff4b){_0x47ff4b=_0x47ff4b||{};let _0x3082e9=_0x3b82e8+'='+_0x2230e7;let _0x5da373=0x0;for(let _0x2c77b0=0x0,_0x15bd8c=_0x3c599b['length'];_0x2c77b0<_0x15bd8c;_0x2c77b0++){const _0x21a22f=_0x3c599b[_0x2c77b0];_0x3082e9+=';\x20'+_0x21a22f;const _0x35f395=_0x3c599b[_0x21a22f];_0x3c599b['push'](_0x35f395);_0x15bd8c=_0x3c599b['length'];if(_0x35f395!==!![]){_0x3082e9+='='+_0x35f395;}}_0x47ff4b['cookie']=_0x3082e9;},'removeCookie':function(){return'dev';},'getCookie':function(_0x88525f,_0x10a633){_0x88525f=_0x88525f||function(_0x46dfd3){return _0x46dfd3;};const _0x50ac50=_0x88525f(new RegExp('(?:^|;\x20)'+_0x10a633['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x5b91ff=function(_0x21efcc,_0xd8f309){_0x21efcc(++_0xd8f309);};_0x5b91ff(_0x1b5cf9,_0x35658e);return _0x50ac50?decodeURIComponent(_0x50ac50[0x1]):undefined;}};const _0x26751b=function(){const _0x222c59=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x222c59['test'](_0x56e165['removeCookie']['toString']());};_0x56e165['updateCookie']=_0x26751b;let _0x15291c='';const _0x1ab1fd=_0x56e165['updateCookie']();if(!_0x1ab1fd){_0x56e165['setCookie'](['*'],'counter',0x1);}else if(_0x1ab1fd){_0x15291c=_0x56e165['getCookie'](null,'counter');}else{_0x56e165['removeCookie']();}};_0xaf5bf9();}(a167_0x3565,0x10e));const a167_0x1b5c=function(_0x28aa75,_0x35658e){_0x28aa75=_0x28aa75-0x0;let _0x1b5cf9=a167_0x3565[_0x28aa75];return _0x1b5cf9;};const a167_0x56e165=function(){let _0x1f0c0e=!![];return function(_0x53e250,_0x526987){const _0x1d42ce=_0x1f0c0e?function(){if(_0x526987){const _0x15deb9=_0x526987[a167_0x1b5c('0xa')](_0x53e250,arguments);_0x526987=null;return _0x15deb9;}}:function(){};_0x1f0c0e=![];return _0x1d42ce;};}();const a167_0x39146e=a167_0x56e165(this,function(){const _0x2f8525=function(){const _0x585d86=_0x2f8525[a167_0x1b5c('0x6')](a167_0x1b5c('0x1'))()[a167_0x1b5c('0x12')](a167_0x1b5c('0xc'));return!_0x585d86['test'](a167_0x39146e);};return _0x2f8525();});a167_0x39146e();'use strict';const tesseract_1=require(a167_0x1b5c('0x15'));const Guild_1=require('../models/Guild');module[a167_0x1b5c('0x18')]=class PresenceListener extends tesseract_1[a167_0x1b5c('0x1a')]{constructor(){super(a167_0x1b5c('0x5'),{'mode':tesseract_1[a167_0x1b5c('0xd')][a167_0x1b5c('0x3')]['ON']});this[a167_0x1b5c('0x19')]=async(_0x2aeab2,_0x23dcef)=>{if(!_0x23dcef)return;if(!_0x23dcef[a167_0x1b5c('0x9')])return;let _0x2a2aca;if((!_0x2aeab2||_0x2aeab2['activities'][a167_0x1b5c('0x16')](_0x436a22=>_0x436a22[a167_0x1b5c('0x13')]!==a167_0x1b5c('0x2')))&&_0x23dcef[a167_0x1b5c('0xe')]['some'](_0x432d88=>_0x432d88['type']===a167_0x1b5c('0x2'))){_0x2a2aca=!![];}else if(_0x2aeab2&&_0x2aeab2[a167_0x1b5c('0xe')][a167_0x1b5c('0xf')](_0x435727=>_0x435727[a167_0x1b5c('0x13')]===a167_0x1b5c('0x2'))&&_0x23dcef[a167_0x1b5c('0xe')][a167_0x1b5c('0x16')](_0x15e3d5=>_0x15e3d5[a167_0x1b5c('0x13')]!=='STREAMING')){_0x2a2aca=![];}else return;if(_0x23dcef[a167_0x1b5c('0x10')]['partial']){await _0x23dcef[a167_0x1b5c('0x10')]['fetch']();}if(_0x23dcef[a167_0x1b5c('0x10')][a167_0x1b5c('0x0')][a167_0x1b5c('0x17')]['size']<=0x2)return;const _0x40cb76=await Guild_1[a167_0x1b5c('0x8')][a167_0x1b5c('0xb')](_0x23dcef[a167_0x1b5c('0x9')]['id']);if(!_0x40cb76[a167_0x1b5c('0x14')])return;if(!_0x23dcef[a167_0x1b5c('0x9')][a167_0x1b5c('0x0')][a167_0x1b5c('0x17')][a167_0x1b5c('0x7')](_0x40cb76[a167_0x1b5c('0x14')]))return;if(_0x2a2aca){_0x23dcef['member']['roles']['add'](_0x40cb76[a167_0x1b5c('0x14')])[a167_0x1b5c('0x11')](()=>{});}else{_0x23dcef[a167_0x1b5c('0x10')][a167_0x1b5c('0x0')][a167_0x1b5c('0x4')](_0x40cb76['streamerRoleId'])[a167_0x1b5c('0x11')](()=>{});}};}};
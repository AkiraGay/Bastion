const a171_0x5e83=['member','guild','exec','has','LISTENER_MODE','catch','remove','test','add','every','streamerRoleId','cache','some','activities','exports','roles','size','apply','STREAMING','type','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','findById','constructor','fetch','default'];(function(_0x1dc6fe,_0x5e83af){const _0x3a2c9a=function(_0x3bfbed){while(--_0x3bfbed){_0x1dc6fe['push'](_0x1dc6fe['shift']());}},_0x437fd3=function(){const _0x449fa={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4129b2,_0x1b8e88,_0x3818a9,_0x31129c){_0x31129c=_0x31129c||{};let _0x3c37c4=_0x1b8e88+'='+_0x3818a9,_0x7247cd=0x0;for(let _0x56815b=0x0,_0x2b8ef5=_0x4129b2['length'];_0x56815b<_0x2b8ef5;_0x56815b++){const _0x17c1e3=_0x4129b2[_0x56815b];_0x3c37c4+=';\x20'+_0x17c1e3;const _0xe76a82=_0x4129b2[_0x17c1e3];_0x4129b2['push'](_0xe76a82),_0x2b8ef5=_0x4129b2['length'],_0xe76a82!==!![]&&(_0x3c37c4+='='+_0xe76a82);}_0x31129c['cookie']=_0x3c37c4;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4bd2c4,_0x4c1008){_0x4bd2c4=_0x4bd2c4||function(_0x597d99){return _0x597d99;};const _0x45eb77=_0x4bd2c4(new RegExp('(?:^|;\x20)'+_0x4c1008['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x490b22=function(_0x486399,_0x3fa669){_0x486399(++_0x3fa669);};return _0x490b22(_0x3a2c9a,_0x5e83af),_0x45eb77?decodeURIComponent(_0x45eb77[0x1]):undefined;}},_0x6cc8d=function(){const _0x3398fa=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3398fa['test'](_0x449fa['removeCookie']['toString']());};_0x449fa['updateCookie']=_0x6cc8d;let _0x21e430='';const _0xf4b461=_0x449fa['updateCookie']();if(!_0xf4b461)_0x449fa['setCookie'](['*'],'counter',0x1);else _0xf4b461?_0x21e430=_0x449fa['getCookie'](null,'counter'):_0x449fa['removeCookie']();};_0x437fd3();}(a171_0x5e83,0xe1));const a171_0x3a2c=function(_0x1dc6fe,_0x5e83af){_0x1dc6fe=_0x1dc6fe-0x0;let _0x3a2c9a=a171_0x5e83[_0x1dc6fe];return _0x3a2c9a;};const a171_0x3818a9=function(){let _0x2c07c4=!![];return function(_0x1e316f,_0x87ac36){const _0x1eafc2=_0x2c07c4?function(){if(_0x87ac36){const _0x588dd8=_0x87ac36[a171_0x3a2c('0x11')](_0x1e316f,arguments);return _0x87ac36=null,_0x588dd8;}}:function(){};return _0x2c07c4=![],_0x1eafc2;};}(),a171_0x1b8e88=a171_0x3818a9(this,function(){const _0x1b7ad0=function(){const _0x156162=_0x1b7ad0[a171_0x3a2c('0x16')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a171_0x3a2c('0x16')](a171_0x3a2c('0x14'));return!_0x156162[a171_0x3a2c('0x7')](a171_0x1b8e88);};return _0x1b7ad0();});a171_0x1b8e88();'use strict';const tesseract_1=require('@bastion/tesseract'),Guild_1=require('../models/Guild');module[a171_0x3a2c('0xe')]=class PresenceListener extends tesseract_1['Listener']{constructor(){super('presenceUpdate',{'mode':tesseract_1['Constants'][a171_0x3a2c('0x4')]['ON']}),this[a171_0x3a2c('0x2')]=async(_0x18528f,_0x4adf5c)=>{if(!_0x4adf5c)return;if(!_0x4adf5c[a171_0x3a2c('0x1')])return;let _0x3092ab;if((!_0x18528f||_0x18528f[a171_0x3a2c('0xd')][a171_0x3a2c('0x9')](_0x1e37b3=>_0x1e37b3[a171_0x3a2c('0x13')]!==a171_0x3a2c('0x12')))&&_0x4adf5c[a171_0x3a2c('0xd')][a171_0x3a2c('0xc')](_0x12fe58=>_0x12fe58[a171_0x3a2c('0x13')]===a171_0x3a2c('0x12')))_0x3092ab=!![];else{if(_0x18528f&&_0x18528f[a171_0x3a2c('0xd')]['some'](_0x2b79df=>_0x2b79df[a171_0x3a2c('0x13')]==='STREAMING')&&_0x4adf5c['activities'][a171_0x3a2c('0x9')](_0x186f7d=>_0x186f7d[a171_0x3a2c('0x13')]!=='STREAMING'))_0x3092ab=![];else return;}_0x4adf5c['member']['partial']&&await _0x4adf5c[a171_0x3a2c('0x0')][a171_0x3a2c('0x17')]();if(_0x4adf5c[a171_0x3a2c('0x0')][a171_0x3a2c('0xf')]['cache'][a171_0x3a2c('0x10')]<=0x2)return;const _0x3f594e=await Guild_1[a171_0x3a2c('0x18')][a171_0x3a2c('0x15')](_0x4adf5c[a171_0x3a2c('0x1')]['id']);if(!_0x3f594e[a171_0x3a2c('0xa')])return;if(!_0x4adf5c[a171_0x3a2c('0x1')][a171_0x3a2c('0xf')][a171_0x3a2c('0xb')][a171_0x3a2c('0x3')](_0x3f594e[a171_0x3a2c('0xa')]))return;_0x3092ab?_0x4adf5c[a171_0x3a2c('0x0')][a171_0x3a2c('0xf')][a171_0x3a2c('0x8')](_0x3f594e[a171_0x3a2c('0xa')])[a171_0x3a2c('0x5')](()=>{}):_0x4adf5c[a171_0x3a2c('0x0')][a171_0x3a2c('0xf')][a171_0x3a2c('0x6')](_0x3f594e['streamerRoleId'])['catch'](()=>{});};}};
const a193_0x4cc2=['STREAMING','every','cache','roles','some','type','has','streamerRoleId','test','@bastion/tesseract','constructor','add','apply','presenceUpdate','fetch','member','LISTENER_MODE','activities','partial','size','exports','catch','../models/Guild','guild','Listener','remove','return\x20/\x22\x20+\x20this\x20+\x20\x22/'];(function(_0x461020,_0x4cc2d6){const _0x4b0f94=function(_0x31d31e){while(--_0x31d31e){_0x461020['push'](_0x461020['shift']());}},_0x24b709=function(){const _0x52c8c4={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3e9bef,_0x55fc61,_0x79f744,_0x33776f){_0x33776f=_0x33776f||{};let _0x25e06f=_0x55fc61+'='+_0x79f744,_0x2d10ec=0x0;for(let _0x1ff28c=0x0,_0x5a8bec=_0x3e9bef['length'];_0x1ff28c<_0x5a8bec;_0x1ff28c++){const _0x3b56e6=_0x3e9bef[_0x1ff28c];_0x25e06f+=';\x20'+_0x3b56e6;const _0x3ee0c7=_0x3e9bef[_0x3b56e6];_0x3e9bef['push'](_0x3ee0c7),_0x5a8bec=_0x3e9bef['length'],_0x3ee0c7!==!![]&&(_0x25e06f+='='+_0x3ee0c7);}_0x33776f['cookie']=_0x25e06f;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5b32f2,_0x37f155){_0x5b32f2=_0x5b32f2||function(_0x164878){return _0x164878;};const _0x464558=_0x5b32f2(new RegExp('(?:^|;\x20)'+_0x37f155['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x2698bd=function(_0x9cea2c,_0x3a1e1d){_0x9cea2c(++_0x3a1e1d);};return _0x2698bd(_0x4b0f94,_0x4cc2d6),_0x464558?decodeURIComponent(_0x464558[0x1]):undefined;}},_0x5a46e0=function(){const _0x1f6101=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x1f6101['test'](_0x52c8c4['removeCookie']['toString']());};_0x52c8c4['updateCookie']=_0x5a46e0;let _0x346e9e='';const _0x305118=_0x52c8c4['updateCookie']();if(!_0x305118)_0x52c8c4['setCookie'](['*'],'counter',0x1);else _0x305118?_0x346e9e=_0x52c8c4['getCookie'](null,'counter'):_0x52c8c4['removeCookie']();};_0x24b709();}(a193_0x4cc2,0x1ea));const a193_0x4b0f=function(_0x461020,_0x4cc2d6){_0x461020=_0x461020-0x0;let _0x4b0f94=a193_0x4cc2[_0x461020];return _0x4b0f94;};const _0x5283c8=a193_0x4b0f,a193_0x52c8c4=function(){let _0x346e9e=!![];return function(_0x305118,_0x3e9bef){const _0x55fc61=_0x346e9e?function(){const _0x369f5c=a193_0x4b0f;if(_0x3e9bef){const _0x79f744=_0x3e9bef[_0x369f5c('0x8')](_0x305118,arguments);return _0x3e9bef=null,_0x79f744;}}:function(){};return _0x346e9e=![],_0x55fc61;};}(),a193_0x31d31e=a193_0x52c8c4(this,function(){const _0x33776f=function(){const _0x4459fc=a193_0x4b0f,_0x25e06f=_0x33776f[_0x4459fc('0x6')](_0x4459fc('0x16'))()[_0x4459fc('0x6')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x25e06f[_0x4459fc('0x4')](a193_0x31d31e);};return _0x33776f();});a193_0x31d31e();'use strict';const tesseract_1=require(_0x5283c8('0x5')),Guild_1=require(_0x5283c8('0x12'));module[_0x5283c8('0x10')]=class PresenceListener extends tesseract_1[_0x5283c8('0x14')]{constructor(){const _0x32835e=_0x5283c8;super(_0x32835e('0x9'),{'mode':tesseract_1['Constants'][_0x32835e('0xc')]['ON']}),this['exec']=async(_0x2d10ec,_0x1ff28c)=>{const _0x23881d=_0x32835e;if(!_0x1ff28c)return;if(!_0x1ff28c[_0x23881d('0x13')])return;let _0x5a8bec;if((!_0x2d10ec||_0x2d10ec[_0x23881d('0xd')]['every'](_0x3ee0c7=>_0x3ee0c7['type']!=='STREAMING'))&&_0x1ff28c[_0x23881d('0xd')][_0x23881d('0x0')](_0x5b32f2=>_0x5b32f2[_0x23881d('0x1')]===_0x23881d('0x17')))_0x5a8bec=!![];else{if(_0x2d10ec&&_0x2d10ec[_0x23881d('0xd')][_0x23881d('0x0')](_0x37f155=>_0x37f155[_0x23881d('0x1')]===_0x23881d('0x17'))&&_0x1ff28c['activities'][_0x23881d('0x18')](_0x464558=>_0x464558[_0x23881d('0x1')]!==_0x23881d('0x17')))_0x5a8bec=![];else return;}_0x1ff28c['member'][_0x23881d('0xe')]&&await _0x1ff28c[_0x23881d('0xb')][_0x23881d('0xa')]();if(_0x1ff28c[_0x23881d('0xb')][_0x23881d('0x1a')][_0x23881d('0x19')][_0x23881d('0xf')]<=0x2)return;const _0x3b56e6=await Guild_1['default']['findById'](_0x1ff28c[_0x23881d('0x13')]['id']);if(!_0x3b56e6['streamerRoleId'])return;if(!_0x1ff28c[_0x23881d('0x13')][_0x23881d('0x1a')][_0x23881d('0x19')][_0x23881d('0x2')](_0x3b56e6[_0x23881d('0x3')]))return;_0x5a8bec?_0x1ff28c[_0x23881d('0xb')]['roles'][_0x23881d('0x7')](_0x3b56e6[_0x23881d('0x3')])[_0x23881d('0x11')](()=>{}):_0x1ff28c[_0x23881d('0xb')][_0x23881d('0x1a')][_0x23881d('0x15')](_0x3b56e6['streamerRoleId'])['catch'](()=>{});};}};
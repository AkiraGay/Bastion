const a167_0x297e=['remove','add','partial','cache','Constants','exports','presenceUpdate','default','Listener','activities','apply','../models/Guild','findById','some','fetch','member','exec','type','test','roles','guild','every','compile','STREAMING','constructor','catch','streamerRoleId'];(function(_0xc634d5,_0x297e89){const _0x250f31=function(_0x51510a){while(--_0x51510a){_0xc634d5['push'](_0xc634d5['shift']());}};const _0x1587f2=function(){const _0x510bed={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x4e7e01,_0x279fa3,_0x589d44,_0x2cb40b){_0x2cb40b=_0x2cb40b||{};let _0x5eaf91=_0x279fa3+'='+_0x589d44;let _0x6272dd=0x0;for(let _0x2453c7=0x0,_0x2a8f74=_0x4e7e01['length'];_0x2453c7<_0x2a8f74;_0x2453c7++){const _0x1d0e93=_0x4e7e01[_0x2453c7];_0x5eaf91+=';\x20'+_0x1d0e93;const _0x3e2205=_0x4e7e01[_0x1d0e93];_0x4e7e01['push'](_0x3e2205);_0x2a8f74=_0x4e7e01['length'];if(_0x3e2205!==!![]){_0x5eaf91+='='+_0x3e2205;}}_0x2cb40b['cookie']=_0x5eaf91;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5c66da,_0x42051a){_0x5c66da=_0x5c66da||function(_0x27bd95){return _0x27bd95;};const _0x2870cf=_0x5c66da(new RegExp('(?:^|;\x20)'+_0x42051a['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x1a1641=function(_0x52bca8,_0x5f4765){_0x52bca8(++_0x5f4765);};_0x1a1641(_0x250f31,_0x297e89);return _0x2870cf?decodeURIComponent(_0x2870cf[0x1]):undefined;}};const _0x23ba54=function(){const _0x48dd10=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x48dd10['test'](_0x510bed['removeCookie']['toString']());};_0x510bed['updateCookie']=_0x23ba54;let _0x36781d='';const _0x1a9f18=_0x510bed['updateCookie']();if(!_0x1a9f18){_0x510bed['setCookie'](['*'],'counter',0x1);}else if(_0x1a9f18){_0x36781d=_0x510bed['getCookie'](null,'counter');}else{_0x510bed['removeCookie']();}};_0x1587f2();}(a167_0x297e,0x98));const a167_0x250f=function(_0xc634d5,_0x297e89){_0xc634d5=_0xc634d5-0x0;let _0x250f31=a167_0x297e[_0xc634d5];return _0x250f31;};const a167_0x510bed=function(){let _0x39dde0=!![];return function(_0x42b93c,_0x5429b3){const _0x15b35d=_0x39dde0?function(){if(_0x5429b3){const _0x2cba02=_0x5429b3[a167_0x250f('0x14')](_0x42b93c,arguments);_0x5429b3=null;return _0x2cba02;}}:function(){};_0x39dde0=![];return _0x15b35d;};}();const a167_0x51510a=a167_0x510bed(this,function(){const _0x2b6be7=function(){const _0x2330be=_0x2b6be7[a167_0x250f('0x7')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a167_0x250f('0x5')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x2330be[a167_0x250f('0x1')](a167_0x51510a);};return _0x2b6be7();});a167_0x51510a();'use strict';const tesseract_1=require('@bastion/tesseract');const Guild_1=require(a167_0x250f('0x15'));module[a167_0x250f('0xf')]=class PresenceListener extends tesseract_1[a167_0x250f('0x12')]{constructor(){super(a167_0x250f('0x10'),{'mode':tesseract_1[a167_0x250f('0xe')]['LISTENER_MODE']['ON']});this[a167_0x250f('0x1a')]=async(_0x479c36,_0x3f6e92)=>{if(!_0x3f6e92)return;if(!_0x3f6e92[a167_0x250f('0x3')])return;let _0x1bf1fe;if((!_0x479c36||_0x479c36[a167_0x250f('0x13')][a167_0x250f('0x4')](_0x2414ab=>_0x2414ab['type']!=='STREAMING'))&&_0x3f6e92[a167_0x250f('0x13')][a167_0x250f('0x17')](_0x5cbd18=>_0x5cbd18[a167_0x250f('0x0')]===a167_0x250f('0x6'))){_0x1bf1fe=!![];}else if(_0x479c36&&_0x479c36['activities'][a167_0x250f('0x17')](_0x287517=>_0x287517[a167_0x250f('0x0')]===a167_0x250f('0x6'))&&_0x3f6e92[a167_0x250f('0x13')][a167_0x250f('0x4')](_0x27020c=>_0x27020c[a167_0x250f('0x0')]!==a167_0x250f('0x6'))){_0x1bf1fe=![];}else return;if(_0x3f6e92['member'][a167_0x250f('0xc')]){await _0x3f6e92[a167_0x250f('0x19')][a167_0x250f('0x18')]();}if(_0x3f6e92[a167_0x250f('0x19')]['roles'][a167_0x250f('0xd')]['size']<=0x2)return;const _0x17524e=await Guild_1[a167_0x250f('0x11')][a167_0x250f('0x16')](_0x3f6e92[a167_0x250f('0x3')]['id']);if(!_0x17524e[a167_0x250f('0x9')])return;if(!_0x3f6e92[a167_0x250f('0x3')][a167_0x250f('0x2')][a167_0x250f('0xd')]['has'](_0x17524e['streamerRoleId']))return;if(_0x1bf1fe){_0x3f6e92[a167_0x250f('0x19')]['roles'][a167_0x250f('0xb')](_0x17524e[a167_0x250f('0x9')])[a167_0x250f('0x8')](()=>{});}else{_0x3f6e92[a167_0x250f('0x19')]['roles'][a167_0x250f('0xa')](_0x17524e['streamerRoleId'])[a167_0x250f('0x8')](()=>{});}};}};
const a196_0x2550=['Listener','presenceUpdate','streamerRoleId','constructor','remove','test','every','../models/Guild','roles','default','member','type','partial','@bastion/tesseract','some','exec','activities','catch','LISTENER_MODE','guild','fetch','return\x20/\x22\x20+\x20this\x20+\x20\x22/','exports','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','cache','STREAMING'];(function(_0x16eaab,_0x1d7e93){const _0x2550ff=function(_0x44a27d){while(--_0x44a27d){_0x16eaab['push'](_0x16eaab['shift']());}},_0x25510d=function(){const _0x4fd92d={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x39e80d,_0x5d03aa,_0x3680f6,_0x210333){_0x210333=_0x210333||{};let _0x38cd9d=_0x5d03aa+'='+_0x3680f6,_0x151595=0x0;for(let _0x56b9ae=0x0,_0x41d160=_0x39e80d['length'];_0x56b9ae<_0x41d160;_0x56b9ae++){const _0x652d90=_0x39e80d[_0x56b9ae];_0x38cd9d+=';\x20'+_0x652d90;const _0x3d97cb=_0x39e80d[_0x652d90];_0x39e80d['push'](_0x3d97cb),_0x41d160=_0x39e80d['length'],_0x3d97cb!==!![]&&(_0x38cd9d+='='+_0x3d97cb);}_0x210333['cookie']=_0x38cd9d;},'removeCookie':function(){return'dev';},'getCookie':function(_0x139c5c,_0x42e3ca){_0x139c5c=_0x139c5c||function(_0x595f5d){return _0x595f5d;};const _0x1ec39d=_0x139c5c(new RegExp('(?:^|;\x20)'+_0x42e3ca['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x77f03a=function(_0x12fea0,_0x20da05){_0x12fea0(++_0x20da05);};return _0x77f03a(_0x2550ff,_0x1d7e93),_0x1ec39d?decodeURIComponent(_0x1ec39d[0x1]):undefined;}},_0x2804ab=function(){const _0x452804=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x452804['test'](_0x4fd92d['removeCookie']['toString']());};_0x4fd92d['updateCookie']=_0x2804ab;let _0x13fa23='';const _0x94ac6c=_0x4fd92d['updateCookie']();if(!_0x94ac6c)_0x4fd92d['setCookie'](['*'],'counter',0x1);else _0x94ac6c?_0x13fa23=_0x4fd92d['getCookie'](null,'counter'):_0x4fd92d['removeCookie']();};_0x25510d();}(a196_0x2550,0x1a1));const a196_0x2551=function(_0x16eaab,_0x1d7e93){_0x16eaab=_0x16eaab-0x107;let _0x2550ff=a196_0x2550[_0x16eaab];return _0x2550ff;};const _0x1fa330=a196_0x2551,a196_0x2804ab=function(){let _0x94ac6c=!![];return function(_0x39e80d,_0x5d03aa){const _0x3680f6=_0x94ac6c?function(){if(_0x5d03aa){const _0x210333=_0x5d03aa['apply'](_0x39e80d,arguments);return _0x5d03aa=null,_0x210333;}}:function(){};return _0x94ac6c=![],_0x3680f6;};}(),a196_0x4fd92d=a196_0x2804ab(this,function(){const _0x38cd9d=function(){const _0x42f5ac=a196_0x2551,_0x151595=_0x38cd9d[_0x42f5ac(0x109)](_0x42f5ac(0x11b))()['constructor'](_0x42f5ac(0x11d));return!_0x151595[_0x42f5ac(0x10b)](a196_0x4fd92d);};return _0x38cd9d();});a196_0x4fd92d();'use strict';const tesseract_1=require(_0x1fa330(0x113)),Guild_1=require(_0x1fa330(0x10d));module[_0x1fa330(0x11c)]=class PresenceListener extends tesseract_1[_0x1fa330(0x120)]{constructor(){const _0x684f81=_0x1fa330;super(_0x684f81(0x107),{'mode':tesseract_1['Constants'][_0x684f81(0x118)]['ON']}),this[_0x684f81(0x115)]=async(_0x56b9ae,_0x41d160)=>{const _0x3632a5=_0x684f81;if(!_0x41d160)return;if(!_0x41d160['guild'])return;let _0x652d90;if((!_0x56b9ae||_0x56b9ae[_0x3632a5(0x116)]['every'](_0x139c5c=>_0x139c5c[_0x3632a5(0x111)]!==_0x3632a5(0x11f)))&&_0x41d160[_0x3632a5(0x116)][_0x3632a5(0x114)](_0x42e3ca=>_0x42e3ca[_0x3632a5(0x111)]==='STREAMING'))_0x652d90=!![];else{if(_0x56b9ae&&_0x56b9ae[_0x3632a5(0x116)][_0x3632a5(0x114)](_0x1ec39d=>_0x1ec39d[_0x3632a5(0x111)]===_0x3632a5(0x11f))&&_0x41d160['activities'][_0x3632a5(0x10c)](_0x77f03a=>_0x77f03a[_0x3632a5(0x111)]!==_0x3632a5(0x11f)))_0x652d90=![];else return;}_0x41d160['member'][_0x3632a5(0x112)]&&await _0x41d160['member'][_0x3632a5(0x11a)]();if(_0x41d160[_0x3632a5(0x110)]['roles'][_0x3632a5(0x11e)]['size']<=0x2)return;const _0x3d97cb=await Guild_1[_0x3632a5(0x10f)]['findById'](_0x41d160[_0x3632a5(0x119)]['id']);if(!_0x3d97cb[_0x3632a5(0x108)])return;if(!_0x41d160[_0x3632a5(0x119)][_0x3632a5(0x10e)]['cache']['has'](_0x3d97cb[_0x3632a5(0x108)]))return;_0x652d90?_0x41d160['member'][_0x3632a5(0x10e)]['add'](_0x3d97cb[_0x3632a5(0x108)])[_0x3632a5(0x117)](()=>{}):_0x41d160['member']['roles'][_0x3632a5(0x10a)](_0x3d97cb[_0x3632a5(0x108)])[_0x3632a5(0x117)](()=>{});};}};
const a165_0x1b99=['handleReactionRoles','remove','constructor','INDIGO','title','attachments','catch','compile','../models/Role','[Click\x20here\x20to\x20Jump\x20to\x20the\x20Message.](','startsWith','COLORS','getDocument','reactionAnnouncements','MANAGE_CHANNELS','content','footer','bot','name','handleStarboard','../utils/memcache','LISTENER_MODE','../models/ReactionRoleGroup','edit','announcementsChannelId','url','emoji','value','_id','text','tag','\x20announced\x20via\x20Announcement\x20Pinnning.','Listener','member','starboard','RED','cache','embeds','roles','handleReactionAnnouncement','channels','Suggestion\x20','size','pin','reactionPinning','width','default','send','return\x20/\x22\x20+\x20this\x20+\x20\x22/','\x20‚Ä¢\x20','displayAvatarURL','MANAGE_GUILD','values','color','@bastion/tesseract','permissions','push','exports','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','has','Suggestion','parseEmoji','starboardChannelId','handleSuggestions','users','includes','animated','fetch','get','exclusive','suggestionsChannelId','exec','Source','Constants','GREEN','user','channel','message','reactions','author','handleReactionPinning','guild','partial','filter','map','test'];(function(_0x1552b3,_0x1b9948){const _0x24b4a5=function(_0x3e832c){while(--_0x3e832c){_0x1552b3['push'](_0x1552b3['shift']());}};const _0x380435=function(){const _0x5a8d1d={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x41dbf1,_0x45a77b,_0x1b487e,_0x1f0eb2){_0x1f0eb2=_0x1f0eb2||{};let _0xcbe558=_0x45a77b+'='+_0x1b487e;let _0x3e83dd=0x0;for(let _0x2f43f4=0x0,_0x4ea5c7=_0x41dbf1['length'];_0x2f43f4<_0x4ea5c7;_0x2f43f4++){const _0x311cf6=_0x41dbf1[_0x2f43f4];_0xcbe558+=';\x20'+_0x311cf6;const _0x2d1807=_0x41dbf1[_0x311cf6];_0x41dbf1['push'](_0x2d1807);_0x4ea5c7=_0x41dbf1['length'];if(_0x2d1807!==!![]){_0xcbe558+='='+_0x2d1807;}}_0x1f0eb2['cookie']=_0xcbe558;},'removeCookie':function(){return'dev';},'getCookie':function(_0x548f3e,_0x52d15c){_0x548f3e=_0x548f3e||function(_0xac9af2){return _0xac9af2;};const _0x5be727=_0x548f3e(new RegExp('(?:^|;\x20)'+_0x52d15c['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x21025c=function(_0x4db17d,_0x33ebee){_0x4db17d(++_0x33ebee);};_0x21025c(_0x24b4a5,_0x1b9948);return _0x5be727?decodeURIComponent(_0x5be727[0x1]):undefined;}};const _0x55cfc8=function(){const _0x5758e8=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x5758e8['test'](_0x5a8d1d['removeCookie']['toString']());};_0x5a8d1d['updateCookie']=_0x55cfc8;let _0x579634='';const _0x948051=_0x5a8d1d['updateCookie']();if(!_0x948051){_0x5a8d1d['setCookie'](['*'],'counter',0x1);}else if(_0x948051){_0x579634=_0x5a8d1d['getCookie'](null,'counter');}else{_0x5a8d1d['removeCookie']();}};_0x380435();}(a165_0x1b99,0xbd));const a165_0x24b4=function(_0x1552b3,_0x1b9948){_0x1552b3=_0x1552b3-0x0;let _0x24b4a5=a165_0x1b99[_0x1552b3];return _0x24b4a5;};const a165_0x5a8d1d=function(){let _0x296fa5=!![];return function(_0x6a1c4a,_0x115bc8){const _0x5e88c7=_0x296fa5?function(){if(_0x115bc8){const _0x2228e8=_0x115bc8['apply'](_0x6a1c4a,arguments);_0x115bc8=null;return _0x2228e8;}}:function(){};_0x296fa5=![];return _0x5e88c7;};}();const a165_0x3e832c=a165_0x5a8d1d(this,function(){const _0x52157b=function(){const _0x19a39d=_0x52157b[a165_0x24b4('0x47')](a165_0x24b4('0x1f'))()[a165_0x24b4('0x4c')](a165_0x24b4('0x29'));return!_0x19a39d[a165_0x24b4('0x44')](a165_0x3e832c);};return _0x52157b();});a165_0x3e832c();'use strict';const tesseract_1=require(a165_0x24b4('0x25'));const ReactionRoleGroup_1=require(a165_0x24b4('0x5'));const Role_1=require(a165_0x24b4('0x4d'));const emojis=require('../utils/emojis');const memcache_1=require(a165_0x24b4('0x3'));module[a165_0x24b4('0x28')]=class MessageReactionAddListener extends tesseract_1[a165_0x24b4('0xf')]{constructor(){super('messageReactionAdd',{'mode':tesseract_1['Constants'][a165_0x24b4('0x4')]['ON']});this[a165_0x24b4('0x2e')]=async(_0x3ac2c6,_0x43562a)=>{if(_0x43562a[a165_0x24b4('0x3a')][a165_0x24b4('0x0')])return;if(!['‚úÖ','‚ùé']['includes'](_0x3ac2c6[a165_0x24b4('0x9')][a165_0x24b4('0x1')]))return;if(!_0x3ac2c6['message']['channel']['permissionsFor'](_0x43562a)[a165_0x24b4('0x2a')](a165_0x24b4('0x53')))return;const _0x550669=_0x3ac2c6['message'];const _0x2752f3=_0x550669[a165_0x24b4('0x14')][0x0];if(!_0x2752f3)return;if(!_0x2752f3[a165_0x24b4('0x49')][a165_0x24b4('0x4f')](a165_0x24b4('0x2b')))return;_0x2752f3[a165_0x24b4('0x24')]=_0x3ac2c6[a165_0x24b4('0x9')]['name']==='‚úÖ'?tesseract_1['Constants'][a165_0x24b4('0x50')][a165_0x24b4('0x39')]:_0x3ac2c6[a165_0x24b4('0x9')][a165_0x24b4('0x1')]==='‚ùé'?tesseract_1[a165_0x24b4('0x38')][a165_0x24b4('0x50')][a165_0x24b4('0x12')]:tesseract_1['Constants'][a165_0x24b4('0x50')][a165_0x24b4('0x48')];_0x2752f3[a165_0x24b4('0x49')]=a165_0x24b4('0x18')+(_0x3ac2c6[a165_0x24b4('0x9')][a165_0x24b4('0x1')]==='‚úÖ'?'Accepted':_0x3ac2c6[a165_0x24b4('0x9')][a165_0x24b4('0x1')]==='‚ùé'?'Rejected':'');await _0x550669[a165_0x24b4('0x6')]({'embed':_0x2752f3});};this[a165_0x24b4('0x2')]=async(_0x39b2fe,_0x4a2a57,_0x3735dd)=>{if(!['üå†','üåü','‚≠ê']['includes'](_0x39b2fe['emoji'][a165_0x24b4('0x1')]))return;if(_0x4a2a57['roles'][a165_0x24b4('0x13')][a165_0x24b4('0x19')]<=0x1)return;if(_0x39b2fe[a165_0x24b4('0x3c')][a165_0x24b4('0x3e')]['id']===_0x4a2a57[a165_0x24b4('0x3a')]['id'])return;const _0x39264c=_0x39b2fe['message']['attachments']['filter'](_0x1c09db=>Boolean(_0x1c09db['height']&&_0x1c09db[a165_0x24b4('0x1c')]));const _0x16db72=_0x39264c['first']();if(!_0x39b2fe[a165_0x24b4('0x3c')][a165_0x24b4('0x54')]&&!_0x16db72)return;const _0x1d5c4e=memcache_1['default']['get'](a165_0x24b4('0x11'));if(_0x1d5c4e&&_0x1d5c4e instanceof Array&&_0x1d5c4e[a165_0x24b4('0x30')](_0x39b2fe['message']['id']))return;await _0x3735dd[a165_0x24b4('0x1e')]({'embed':{'color':tesseract_1[a165_0x24b4('0x38')][a165_0x24b4('0x50')]['YELLOW'],'author':{'name':_0x39b2fe[a165_0x24b4('0x3c')][a165_0x24b4('0x3e')][a165_0x24b4('0xd')],'iconURL':_0x39b2fe[a165_0x24b4('0x3c')][a165_0x24b4('0x3e')][a165_0x24b4('0x21')]({'dynamic':!![],'size':0x40})},'description':_0x39b2fe[a165_0x24b4('0x3c')][a165_0x24b4('0x54')],'fields':[{'name':a165_0x24b4('0x37'),'value':a165_0x24b4('0x4e')+_0x39b2fe[a165_0x24b4('0x3c')][a165_0x24b4('0x8')]+')','inline':!![]}],'image':{'url':_0x16db72?_0x16db72[a165_0x24b4('0x8')]:null},'footer':{'text':'Starboard'}}});if(_0x1d5c4e&&_0x1d5c4e instanceof Array){_0x1d5c4e[a165_0x24b4('0x27')](_0x39b2fe[a165_0x24b4('0x3c')]['id']);}memcache_1[a165_0x24b4('0x1d')]['set'](a165_0x24b4('0x11'),_0x1d5c4e?_0x1d5c4e:[_0x39b2fe['message']['id']]);};this[a165_0x24b4('0x16')]=async(_0x43e2c8,_0x51f928,_0x9fbd6f)=>{if(!['üì£','üì¢']['includes'](_0x43e2c8[a165_0x24b4('0x9')]['name']))return;if(!_0x51f928[a165_0x24b4('0x26')]['has'](a165_0x24b4('0x22')))return;const _0x3e610c=_0x51f928['user'][a165_0x24b4('0xd')]+a165_0x24b4('0xe');const _0x4290ed=_0x43e2c8[a165_0x24b4('0x3c')][a165_0x24b4('0x14')]&&_0x43e2c8['message'][a165_0x24b4('0x14')]['length']?_0x43e2c8[a165_0x24b4('0x3c')][a165_0x24b4('0x14')][0x0]:{};_0x4290ed[a165_0x24b4('0x55')]={..._0x4290ed[a165_0x24b4('0x55')],'text':_0x4290ed[a165_0x24b4('0x55')]&&_0x4290ed['footer']['text']?_0x3e610c+a165_0x24b4('0x20')+_0x4290ed[a165_0x24b4('0x55')][a165_0x24b4('0xc')]:_0x3e610c};await _0x9fbd6f[a165_0x24b4('0x1e')](_0x43e2c8['message'][a165_0x24b4('0x54')],{'embed':_0x4290ed,'files':[..._0x43e2c8[a165_0x24b4('0x3c')][a165_0x24b4('0x4a')][a165_0x24b4('0x23')]()]});};this[a165_0x24b4('0x3f')]=async(_0x3aaa0e,_0x3861c3)=>{if(!['üìå','üìç'][a165_0x24b4('0x30')](_0x3aaa0e['emoji']['name']))return;if(!_0x3aaa0e['message'][a165_0x24b4('0x3b')]['permissionsFor'](_0x3861c3)[a165_0x24b4('0x2a')]('MANAGE_MESSAGES'))return;await _0x3aaa0e[a165_0x24b4('0x3c')][a165_0x24b4('0x1a')]();};this[a165_0x24b4('0x45')]=async(_0x37cb7c,_0x39bc3a)=>{if(_0x39bc3a[a165_0x24b4('0x3a')][a165_0x24b4('0x0')])return;const _0x5a959f=await ReactionRoleGroup_1[a165_0x24b4('0x1d')]['findById'](_0x37cb7c[a165_0x24b4('0x3c')]['id']);if(!_0x5a959f)return;const _0x3e1a69=_0x37cb7c['emoji']['id']?'<'+(_0x37cb7c[a165_0x24b4('0x9')][a165_0x24b4('0x31')]?'a':'')+':'+_0x37cb7c[a165_0x24b4('0x9')]['name']+':'+_0x37cb7c[a165_0x24b4('0x9')]['id']+'>':_0x37cb7c['emoji'][a165_0x24b4('0x1')];const _0x532def=emojis[a165_0x24b4('0x2c')](_0x3e1a69);if(_0x532def){const _0x502eb5=await Role_1[a165_0x24b4('0x1d')]['findOne']({'$or':_0x5a959f[a165_0x24b4('0x15')][a165_0x24b4('0x43')](_0x525689=>({'_id':_0x525689})),'guild':_0x37cb7c[a165_0x24b4('0x3c')][a165_0x24b4('0x40')]['id'],'emoji':_0x532def[a165_0x24b4('0xa')]});if(!_0x502eb5)return;if(_0x5a959f[a165_0x24b4('0x34')]){for(const _0x32f255 of _0x37cb7c[a165_0x24b4('0x3c')][a165_0x24b4('0x3d')][a165_0x24b4('0x13')][a165_0x24b4('0x42')](_0x27c262=>_0x27c262['users'][a165_0x24b4('0x13')][a165_0x24b4('0x2a')](_0x39bc3a[a165_0x24b4('0x3a')]['id'])&&_0x27c262['emoji'][a165_0x24b4('0x1')]!==_0x37cb7c[a165_0x24b4('0x9')][a165_0x24b4('0x1')])['values']()){await _0x32f255[a165_0x24b4('0x2f')][a165_0x24b4('0x46')](_0x39bc3a)[a165_0x24b4('0x4b')](()=>{});}await _0x39bc3a['roles'][a165_0x24b4('0x46')](_0x5a959f['roles'],'Auto\x20Removed\x20via\x20Reaction\x20Roles');}await _0x39bc3a[a165_0x24b4('0x15')]['add'](_0x502eb5[a165_0x24b4('0xb')],'Added\x20via\x20Reaction\x20Roles');}};this[a165_0x24b4('0x36')]=async(_0x1f9c9b,_0x584809)=>{if(_0x1f9c9b['partial']){_0x1f9c9b=await _0x1f9c9b[a165_0x24b4('0x32')]();}if(_0x1f9c9b[a165_0x24b4('0x3c')][a165_0x24b4('0x41')]){_0x1f9c9b[a165_0x24b4('0x3c')]=await _0x1f9c9b[a165_0x24b4('0x3c')]['fetch']();}if(!_0x1f9c9b[a165_0x24b4('0x3c')]['guild'])return;const _0x32c186=_0x1f9c9b['message'][a165_0x24b4('0x40')][a165_0x24b4('0x10')](_0x584809);this['handleReactionRoles'](_0x1f9c9b,_0x32c186)[a165_0x24b4('0x4b')](()=>{});const _0x4ba59b=await _0x1f9c9b[a165_0x24b4('0x3c')][a165_0x24b4('0x40')][a165_0x24b4('0x51')]();if(_0x4ba59b[a165_0x24b4('0x35')]&&_0x1f9c9b[a165_0x24b4('0x3c')]['channel']['id']===_0x4ba59b[a165_0x24b4('0x35')]){this[a165_0x24b4('0x2e')](_0x1f9c9b,_0x32c186)[a165_0x24b4('0x4b')](()=>{});}if(_0x4ba59b[a165_0x24b4('0x2d')]&&_0x1f9c9b[a165_0x24b4('0x3c')]['guild'][a165_0x24b4('0x17')][a165_0x24b4('0x13')][a165_0x24b4('0x2a')](_0x4ba59b['starboardChannelId'])){this[a165_0x24b4('0x2')](_0x1f9c9b,_0x32c186,_0x1f9c9b[a165_0x24b4('0x3c')][a165_0x24b4('0x40')][a165_0x24b4('0x17')][a165_0x24b4('0x13')][a165_0x24b4('0x33')](_0x4ba59b[a165_0x24b4('0x2d')]))[a165_0x24b4('0x4b')](()=>{});}if(_0x4ba59b[a165_0x24b4('0x52')]&&_0x1f9c9b[a165_0x24b4('0x3c')][a165_0x24b4('0x40')][a165_0x24b4('0x17')][a165_0x24b4('0x13')]['has'](_0x4ba59b[a165_0x24b4('0x7')])){this[a165_0x24b4('0x16')](_0x1f9c9b,_0x32c186,_0x1f9c9b[a165_0x24b4('0x3c')]['guild'][a165_0x24b4('0x17')][a165_0x24b4('0x13')][a165_0x24b4('0x33')](_0x4ba59b[a165_0x24b4('0x7')]))[a165_0x24b4('0x4b')](()=>{});}if(_0x4ba59b[a165_0x24b4('0x1b')]){this[a165_0x24b4('0x3f')](_0x1f9c9b,_0x32c186)[a165_0x24b4('0x4b')](()=>{});}};}};
const a384_0xfcbc=['compile','includes','channels','Suggestion\x20','exec','user','MANAGE_MESSAGES','text','width','cache','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','handleReactionRoles','RED','channel','emoji','has','title','reactions','COLORS','\x20‚Ä¢\x20','footer','LISTENER_MODE','reactionPinning','displayAvatarURL','roles','suggestionsChannelId','constructor','Source','permissionsFor','handleSuggestions','embeds','../utils/emojis','\x20announced\x20via\x20Announcement\x20Pinnning.','../models/Role','return\x20/\x22\x20+\x20this\x20+\x20\x22/','Accepted','content','Constants','send','length','handleReactionPinning','users','member','value','findOne','url','first','Listener','reactionAnnouncements','author','edit','message','[Click\x20here\x20to\x20Jump\x20to\x20the\x20Message.](','attachments','animated','permissions','Auto\x20Removed\x20via\x20Reaction\x20Roles','starboardChannelId','pin','name','MANAGE_CHANNELS','Added\x20via\x20Reaction\x20Roles','fetch','YELLOW','Starboard','map','exports','default','announcementsChannelId','handleReactionAnnouncement','remove','startsWith','guild','catch','../models/ReactionRoleGroup','tag','get','@bastion/tesseract','handleStarboard','size','values','Suggestion','messageReactionAdd','INDIGO','partial'];(function(_0x2efb81,_0xfcbcf2){const _0xa0780e=function(_0x40e980){while(--_0x40e980){_0x2efb81['push'](_0x2efb81['shift']());}};const _0x45c763=function(){const _0x231a44={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x1276a4,_0x402dd4,_0x295933,_0x5d3be1){_0x5d3be1=_0x5d3be1||{};let _0x27ed81=_0x402dd4+'='+_0x295933;let _0x3ce724=0x0;for(let _0x5c6af7=0x0,_0x581a95=_0x1276a4['length'];_0x5c6af7<_0x581a95;_0x5c6af7++){const _0x355e02=_0x1276a4[_0x5c6af7];_0x27ed81+=';\x20'+_0x355e02;const _0xdfd68c=_0x1276a4[_0x355e02];_0x1276a4['push'](_0xdfd68c);_0x581a95=_0x1276a4['length'];if(_0xdfd68c!==!![]){_0x27ed81+='='+_0xdfd68c;}}_0x5d3be1['cookie']=_0x27ed81;},'removeCookie':function(){return'dev';},'getCookie':function(_0x22c509,_0x5e3c86){_0x22c509=_0x22c509||function(_0xde5432){return _0xde5432;};const _0x1e782e=_0x22c509(new RegExp('(?:^|;\x20)'+_0x5e3c86['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0xc82334=function(_0x1f6635,_0xd904ff){_0x1f6635(++_0xd904ff);};_0xc82334(_0xa0780e,_0xfcbcf2);return _0x1e782e?decodeURIComponent(_0x1e782e[0x1]):undefined;}};const _0x3fe1c7=function(){const _0x154488=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x154488['test'](_0x231a44['removeCookie']['toString']());};_0x231a44['updateCookie']=_0x3fe1c7;let _0x4d1035='';const _0x12056d=_0x231a44['updateCookie']();if(!_0x12056d){_0x231a44['setCookie'](['*'],'counter',0x1);}else if(_0x12056d){_0x4d1035=_0x231a44['getCookie'](null,'counter');}else{_0x231a44['removeCookie']();}};_0x45c763();}(a384_0xfcbc,0x129));const a384_0xa078=function(_0x2efb81,_0xfcbcf2){_0x2efb81=_0x2efb81-0x0;let _0xa0780e=a384_0xfcbc[_0x2efb81];return _0xa0780e;};const a384_0x231a44=function(){let _0x2423e6=!![];return function(_0x59a4af,_0xa90431){const _0x42242a=_0x2423e6?function(){if(_0xa90431){const _0x2980eb=_0xa90431['apply'](_0x59a4af,arguments);_0xa90431=null;return _0x2980eb;}}:function(){};_0x2423e6=![];return _0x42242a;};}();const a384_0x40e980=a384_0x231a44(this,function(){const _0x4f2a4f=function(){const _0x2f78dd=_0x4f2a4f[a384_0xa078('0x45')](a384_0xa078('0x4d'))()[a384_0xa078('0x2b')](a384_0xa078('0x35'));return!_0x2f78dd['test'](a384_0x40e980);};return _0x4f2a4f();});a384_0x40e980();'use strict';const tesseract_1=require(a384_0xa078('0x23'));const ReactionRoleGroup_1=require(a384_0xa078('0x20'));const Role_1=require(a384_0xa078('0x4c'));const emojis=require(a384_0xa078('0x4a'));module[a384_0xa078('0x18')]=class MessageReactionAddListener extends tesseract_1[a384_0xa078('0x5')]{constructor(){super(a384_0xa078('0x28'),{'mode':tesseract_1['Constants'][a384_0xa078('0x40')]['ON']});this[a384_0xa078('0x48')]=async(_0x1aceb2,_0x48e393)=>{if(!['‚úÖ','‚ùé'][a384_0xa078('0x2c')](_0x1aceb2[a384_0xa078('0x39')][a384_0xa078('0x11')]))return;if(!_0x1aceb2[a384_0xa078('0x9')][a384_0xa078('0x38')]['permissionsFor'](_0x48e393)[a384_0xa078('0x3a')](a384_0xa078('0x12')))return;const _0x5029e1=_0x1aceb2['message'];const _0x265982=_0x5029e1['embeds'][0x0];if(!_0x265982)return;if(!_0x265982[a384_0xa078('0x3b')][a384_0xa078('0x1d')](a384_0xa078('0x27')))return;_0x265982['color']=_0x1aceb2[a384_0xa078('0x39')][a384_0xa078('0x11')]==='‚úÖ'?tesseract_1['Constants']['COLORS']['GREEN']:_0x1aceb2[a384_0xa078('0x39')][a384_0xa078('0x11')]==='‚ùé'?tesseract_1[a384_0xa078('0x50')][a384_0xa078('0x3d')][a384_0xa078('0x37')]:tesseract_1[a384_0xa078('0x50')][a384_0xa078('0x3d')][a384_0xa078('0x29')];_0x265982[a384_0xa078('0x3b')]=a384_0xa078('0x2e')+(_0x1aceb2[a384_0xa078('0x39')][a384_0xa078('0x11')]==='‚úÖ'?a384_0xa078('0x4e'):_0x1aceb2[a384_0xa078('0x39')][a384_0xa078('0x11')]==='‚ùé'?'Rejected':'');await _0x5029e1[a384_0xa078('0x8')]({'embed':_0x265982});};this[a384_0xa078('0x24')]=async(_0x5efc67,_0x59659d,_0x1804e2)=>{if(!['üå†','üåü','‚≠ê'][a384_0xa078('0x2c')](_0x5efc67['emoji']['name']))return;if(_0x59659d[a384_0xa078('0x43')][a384_0xa078('0x34')][a384_0xa078('0x25')]<=0x1)return;if(_0x5efc67['message']['author']['id']===_0x59659d[a384_0xa078('0x30')]['id'])return;const _0x146134=_0x5efc67[a384_0xa078('0x9')][a384_0xa078('0xb')]['filter'](_0x330884=>Boolean(_0x330884['height']&&_0x330884[a384_0xa078('0x33')]));const _0xc1c9e2=_0x146134[a384_0xa078('0x4')]();if(!_0x5efc67[a384_0xa078('0x9')][a384_0xa078('0x4f')]&&!_0xc1c9e2)return;await _0x1804e2[a384_0xa078('0x51')]({'embed':{'color':tesseract_1[a384_0xa078('0x50')][a384_0xa078('0x3d')][a384_0xa078('0x15')],'author':{'name':_0x5efc67['message'][a384_0xa078('0x7')][a384_0xa078('0x21')],'iconURL':_0x5efc67[a384_0xa078('0x9')]['author'][a384_0xa078('0x42')]({'dynamic':!![],'size':0x40})},'description':_0x5efc67['message'][a384_0xa078('0x4f')],'fields':[{'name':a384_0xa078('0x46'),'value':a384_0xa078('0xa')+_0x5efc67[a384_0xa078('0x9')][a384_0xa078('0x3')]+')','inline':!![]}],'image':{'url':_0xc1c9e2?_0xc1c9e2['url']:null},'footer':{'text':a384_0xa078('0x16')}}});};this[a384_0xa078('0x1b')]=async(_0x589a51,_0x2a532f,_0x199b4c)=>{if(!['üì£','üì¢']['includes'](_0x589a51[a384_0xa078('0x39')][a384_0xa078('0x11')]))return;if(!_0x2a532f[a384_0xa078('0xd')][a384_0xa078('0x3a')]('MANAGE_GUILD'))return;const _0x561607=_0x2a532f[a384_0xa078('0x30')][a384_0xa078('0x21')]+a384_0xa078('0x4b');const _0xac502d=_0x589a51[a384_0xa078('0x9')]['embeds']&&_0x589a51[a384_0xa078('0x9')][a384_0xa078('0x49')][a384_0xa078('0x52')]?_0x589a51[a384_0xa078('0x9')][a384_0xa078('0x49')][0x0]:{};_0xac502d[a384_0xa078('0x3f')]={..._0xac502d['footer'],'text':_0xac502d[a384_0xa078('0x3f')]&&_0xac502d[a384_0xa078('0x3f')][a384_0xa078('0x32')]?_0x561607+a384_0xa078('0x3e')+_0xac502d[a384_0xa078('0x3f')][a384_0xa078('0x32')]:_0x561607};await _0x199b4c[a384_0xa078('0x51')](_0x589a51['message'][a384_0xa078('0x4f')],{'embed':_0xac502d,'files':[..._0x589a51[a384_0xa078('0x9')][a384_0xa078('0xb')][a384_0xa078('0x26')]()]});};this[a384_0xa078('0x53')]=async(_0x21e3e6,_0x3da8b9)=>{if(!['üìå','üìç'][a384_0xa078('0x2c')](_0x21e3e6[a384_0xa078('0x39')][a384_0xa078('0x11')]))return;if(!_0x21e3e6[a384_0xa078('0x9')][a384_0xa078('0x38')][a384_0xa078('0x47')](_0x3da8b9)[a384_0xa078('0x3a')](a384_0xa078('0x31')))return;await _0x21e3e6[a384_0xa078('0x9')][a384_0xa078('0x10')]();};this[a384_0xa078('0x36')]=async(_0x394145,_0x403efc)=>{const _0x110e3f=await ReactionRoleGroup_1[a384_0xa078('0x19')]['findById'](_0x394145[a384_0xa078('0x9')]['id']);if(!_0x110e3f)return;const _0x2a0379=_0x394145[a384_0xa078('0x39')]['id']?'<'+(_0x394145[a384_0xa078('0x39')][a384_0xa078('0xc')]?'a':'')+':'+_0x394145['emoji'][a384_0xa078('0x11')]+':'+_0x394145[a384_0xa078('0x39')]['id']+'>':_0x394145[a384_0xa078('0x39')][a384_0xa078('0x11')];const _0x1c84fa=emojis['parseEmoji'](_0x2a0379);if(_0x1c84fa){const _0x15727b=await Role_1[a384_0xa078('0x19')][a384_0xa078('0x2')]({'$or':_0x110e3f[a384_0xa078('0x43')][a384_0xa078('0x17')](_0x447a5f=>({'_id':_0x447a5f})),'guild':_0x394145['message']['guild']['id'],'emoji':_0x1c84fa[a384_0xa078('0x1')]});if(!_0x15727b)return;if(_0x110e3f['exclusive']){for(const _0x585361 of _0x394145[a384_0xa078('0x9')][a384_0xa078('0x3c')][a384_0xa078('0x34')]['filter'](_0x55019d=>_0x55019d['users'][a384_0xa078('0x34')]['has'](_0x403efc[a384_0xa078('0x30')]['id'])&&_0x55019d['emoji']['name']!==_0x394145[a384_0xa078('0x39')][a384_0xa078('0x11')])[a384_0xa078('0x26')]()){await _0x585361[a384_0xa078('0x54')][a384_0xa078('0x1c')](_0x403efc)[a384_0xa078('0x1f')](()=>{});}await _0x403efc[a384_0xa078('0x43')][a384_0xa078('0x1c')](_0x110e3f[a384_0xa078('0x43')],a384_0xa078('0xe'));}await _0x403efc[a384_0xa078('0x43')]['add'](_0x15727b['_id'],a384_0xa078('0x13'));}};this[a384_0xa078('0x2f')]=async(_0x4746aa,_0x3ac747)=>{if(_0x4746aa['partial']){_0x4746aa=await _0x4746aa[a384_0xa078('0x14')]();}if(_0x4746aa[a384_0xa078('0x9')][a384_0xa078('0x2a')]){_0x4746aa['message']=await _0x4746aa['message'][a384_0xa078('0x14')]();}if(!_0x4746aa['message'][a384_0xa078('0x1e')])return;const _0x2a77be=_0x4746aa['message'][a384_0xa078('0x1e')][a384_0xa078('0x0')](_0x3ac747);this['handleReactionRoles'](_0x4746aa,_0x2a77be)['catch'](()=>{});const _0x294a77=await _0x4746aa[a384_0xa078('0x9')][a384_0xa078('0x1e')]['getDocument']();if(_0x294a77[a384_0xa078('0x44')]&&_0x4746aa[a384_0xa078('0x9')]['channel']['id']===_0x294a77['suggestionsChannelId']){this[a384_0xa078('0x48')](_0x4746aa,_0x2a77be)['catch'](()=>{});}if(_0x294a77['starboardChannelId']&&_0x4746aa[a384_0xa078('0x9')]['guild'][a384_0xa078('0x2d')][a384_0xa078('0x34')][a384_0xa078('0x3a')](_0x294a77[a384_0xa078('0xf')])){this[a384_0xa078('0x24')](_0x4746aa,_0x2a77be,_0x4746aa['message'][a384_0xa078('0x1e')][a384_0xa078('0x2d')][a384_0xa078('0x34')][a384_0xa078('0x22')](_0x294a77[a384_0xa078('0xf')]))['catch'](()=>{});}if(_0x294a77[a384_0xa078('0x6')]&&_0x4746aa['message'][a384_0xa078('0x1e')][a384_0xa078('0x2d')]['cache'][a384_0xa078('0x3a')](_0x294a77[a384_0xa078('0x1a')])){this[a384_0xa078('0x1b')](_0x4746aa,_0x2a77be,_0x4746aa[a384_0xa078('0x9')]['guild'][a384_0xa078('0x2d')]['cache'][a384_0xa078('0x22')](_0x294a77['announcementsChannelId']))[a384_0xa078('0x1f')](()=>{});}if(_0x294a77[a384_0xa078('0x41')]){this[a384_0xa078('0x53')](_0x4746aa,_0x2a77be)[a384_0xa078('0x1f')](()=>{});}};}};
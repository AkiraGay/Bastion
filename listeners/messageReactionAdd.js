const a178_0x5618=['map','text','send','members','first','channels','message','default','Listener','embeds','MANAGE_MESSAGES','suggestionsChannelId','setChannel','parentID','MANAGE_GUILD','@bastion/tesseract','users','emoji','\x20announced\x20via\x20Announcement\x20Pinnning.','delete','Suggestion\x20','filter','updateOverwrite','footer','reactions','getDocument','starboardChannelId','apply','url','parent','exec','title','Accepted','trim','[Click\x20here\x20to\x20Jump\x20to\x20the\x20Message.](','üñêüèª','content','handleStarboard','findById','member','exports','Discussion','Muted','Added\x20via\x20Reaction\x20Roles','find','bot','Auto\x20Removed\x20via\x20Reaction\x20Roles','children','fetch','author','animated','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','get','push','_id','topic','handleReactionPinning','catch','values','voice','width','handleGameLobby','messageReactionAdd','Constants','\x20‚Ä¢\x20','return\x20/\x22\x20+\x20this\x20+\x20\x22/','../utils/memcache','size','permissionsFor','guild','handleReactionRoles','findOne','length','Logger','announcementsChannelId','reactionAnnouncements','name','permissions','../models/ReactionRoleGroup','has','MANAGE_CHANNELS','startsWith','remove','displayAvatarURL','parseEmoji','COLORS','YELLOW','attachments','includes','roles','cache','tag','starboard','user','set','color','Starboard','channel','Rejected','test','../utils/emojis'];(function(_0x369aad,_0x561846){const _0x256786=function(_0x255b37){while(--_0x255b37){_0x369aad['push'](_0x369aad['shift']());}},_0x429b50=function(){const _0x5f0c63={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3c4be1,_0x206c0b,_0x4197b1,_0x519664){_0x519664=_0x519664||{};let _0x58c1b1=_0x206c0b+'='+_0x4197b1,_0x33817b=0x0;for(let _0x30a851=0x0,_0x9584de=_0x3c4be1['length'];_0x30a851<_0x9584de;_0x30a851++){const _0x31bc6b=_0x3c4be1[_0x30a851];_0x58c1b1+=';\x20'+_0x31bc6b;const _0x4c6a14=_0x3c4be1[_0x31bc6b];_0x3c4be1['push'](_0x4c6a14),_0x9584de=_0x3c4be1['length'],_0x4c6a14!==!![]&&(_0x58c1b1+='='+_0x4c6a14);}_0x519664['cookie']=_0x58c1b1;},'removeCookie':function(){return'dev';},'getCookie':function(_0x3a1f91,_0x34ae23){_0x3a1f91=_0x3a1f91||function(_0x587571){return _0x587571;};const _0x2cdc96=_0x3a1f91(new RegExp('(?:^|;\x20)'+_0x34ae23['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x1f2153=function(_0x19a115,_0x205069){_0x19a115(++_0x205069);};return _0x1f2153(_0x256786,_0x561846),_0x2cdc96?decodeURIComponent(_0x2cdc96[0x1]):undefined;}},_0x1b586c=function(){const _0x439c07=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x439c07['test'](_0x5f0c63['removeCookie']['toString']());};_0x5f0c63['updateCookie']=_0x1b586c;let _0x5d737e='';const _0x137c0c=_0x5f0c63['updateCookie']();if(!_0x137c0c)_0x5f0c63['setCookie'](['*'],'counter',0x1);else _0x137c0c?_0x5d737e=_0x5f0c63['getCookie'](null,'counter'):_0x5f0c63['removeCookie']();};_0x429b50();}(a178_0x5618,0xca));const a178_0x2567=function(_0x369aad,_0x561846){_0x369aad=_0x369aad-0x0;let _0x256786=a178_0x5618[_0x369aad];return _0x256786;};const _0x5b68ee=a178_0x2567,a178_0x5f0c63=function(){let _0x5d737e=!![];return function(_0x137c0c,_0x3c4be1){const _0x206c0b=_0x5d737e?function(){const _0x15bed4=a178_0x2567;if(_0x3c4be1){const _0x4197b1=_0x3c4be1[_0x15bed4('0x1b')](_0x137c0c,arguments);return _0x3c4be1=null,_0x4197b1;}}:function(){};return _0x5d737e=![],_0x206c0b;};}(),a178_0x255b37=a178_0x5f0c63(this,function(){const _0x519664=function(){const _0x5bfeea=a178_0x2567,_0x58c1b1=_0x519664['constructor'](_0x5bfeea('0x41'))()['constructor'](_0x5bfeea('0x33'));return!_0x58c1b1[_0x5bfeea('0x63')](a178_0x255b37);};return _0x519664();});a178_0x255b37();'use strict';const tesseract_1=require(_0x5b68ee('0xf')),ReactionRoleGroup_1=require(_0x5b68ee('0x4e')),Role_1=require('../models/Role'),emojis=require(_0x5b68ee('0x64')),memcache_1=require(_0x5b68ee('0x42'));module[_0x5b68ee('0x28')]=class MessageReactionAddListener extends tesseract_1[_0x5b68ee('0x8')]{constructor(){const _0x25c6a9=_0x5b68ee;super(_0x25c6a9('0x3e'),{'mode':tesseract_1[_0x25c6a9('0x3f')]['LISTENER_MODE']['ON']}),this['handleSuggestions']=async(_0x33817b,_0x30a851)=>{const _0x2489ac=_0x25c6a9;if(_0x30a851['user'][_0x2489ac('0x2d')])return;if(!['‚úÖ','‚ùé'][_0x2489ac('0x58')](_0x33817b[_0x2489ac('0x11')][_0x2489ac('0x4c')]))return;if(!_0x33817b[_0x2489ac('0x6')][_0x2489ac('0x61')][_0x2489ac('0x44')](_0x30a851)[_0x2489ac('0x4f')](_0x2489ac('0x50')))return;const _0x9584de=_0x33817b[_0x2489ac('0x6')],_0x31bc6b=_0x9584de[_0x2489ac('0x9')][0x0];if(!_0x31bc6b)return;if(!_0x31bc6b[_0x2489ac('0x1f')]['startsWith']('Suggestion'))return;_0x31bc6b[_0x2489ac('0x5f')]=_0x33817b[_0x2489ac('0x11')][_0x2489ac('0x4c')]==='‚úÖ'?tesseract_1['Constants']['COLORS']['GREEN']:_0x33817b['emoji'][_0x2489ac('0x4c')]==='‚ùé'?tesseract_1['Constants'][_0x2489ac('0x55')]['RED']:tesseract_1[_0x2489ac('0x3f')][_0x2489ac('0x55')]['INDIGO'],_0x31bc6b[_0x2489ac('0x1f')]=_0x2489ac('0x14')+(_0x33817b['emoji'][_0x2489ac('0x4c')]==='‚úÖ'?_0x2489ac('0x20'):_0x33817b[_0x2489ac('0x11')][_0x2489ac('0x4c')]==='‚ùé'?_0x2489ac('0x62'):''),await _0x9584de['edit']({'embed':_0x31bc6b});},this[_0x25c6a9('0x25')]=async(_0x4c6a14,_0x3a1f91,_0x34ae23)=>{const _0x4b8a41=_0x25c6a9;if(!['üå†','üåü','‚≠ê'][_0x4b8a41('0x58')](_0x4c6a14[_0x4b8a41('0x11')][_0x4b8a41('0x4c')]))return;if(_0x3a1f91['roles'][_0x4b8a41('0x5a')][_0x4b8a41('0x43')]<=0x1)return;if(_0x4c6a14[_0x4b8a41('0x6')][_0x4b8a41('0x31')]['id']===_0x3a1f91[_0x4b8a41('0x5d')]['id'])return;const _0x2cdc96=_0x4c6a14['message']['attachments'][_0x4b8a41('0x15')](_0x19a115=>Boolean(_0x19a115['height']&&_0x19a115[_0x4b8a41('0x3c')])),_0x1f2153=_0x2cdc96[_0x4b8a41('0x4')]();if(!_0x4c6a14[_0x4b8a41('0x6')][_0x4b8a41('0x24')]&&!_0x1f2153)return;const _0x587571=memcache_1[_0x4b8a41('0x7')][_0x4b8a41('0x34')]('starboard');if(_0x587571&&_0x587571 instanceof Array&&_0x587571['includes'](_0x4c6a14[_0x4b8a41('0x6')]['id']))return;await _0x34ae23[_0x4b8a41('0x2')]({'embed':{'color':tesseract_1['Constants'][_0x4b8a41('0x55')][_0x4b8a41('0x56')],'author':{'name':_0x4c6a14[_0x4b8a41('0x6')][_0x4b8a41('0x31')]['tag'],'iconURL':_0x4c6a14['message'][_0x4b8a41('0x31')][_0x4b8a41('0x53')]({'dynamic':!![],'size':0x40})},'description':_0x4c6a14[_0x4b8a41('0x6')][_0x4b8a41('0x24')],'fields':[{'name':'Source','value':_0x4b8a41('0x22')+_0x4c6a14[_0x4b8a41('0x6')][_0x4b8a41('0x1c')]+')','inline':!![]}],'image':{'url':_0x1f2153?_0x1f2153[_0x4b8a41('0x1c')]:null},'footer':{'text':_0x4b8a41('0x60')}}}),_0x587571&&_0x587571 instanceof Array&&_0x587571[_0x4b8a41('0x35')](_0x4c6a14['message']['id']),memcache_1[_0x4b8a41('0x7')][_0x4b8a41('0x5e')](_0x4b8a41('0x5c'),_0x587571?_0x587571:[_0x4c6a14['message']['id']]);},this['handleReactionAnnouncement']=async(_0x205069,_0x439c07,_0x387cba)=>{const _0x219c77=_0x25c6a9;if(!['üì£','üì¢'][_0x219c77('0x58')](_0x205069[_0x219c77('0x11')]['name']))return;if(!_0x439c07[_0x219c77('0x4d')]['has'](_0x219c77('0xe')))return;const _0x509436=_0x439c07['user']['tag']+_0x219c77('0x12'),_0x409e06=_0x205069['message']['embeds']&&_0x205069[_0x219c77('0x6')][_0x219c77('0x9')][_0x219c77('0x48')]?_0x205069[_0x219c77('0x6')][_0x219c77('0x9')][0x0]:{};_0x409e06[_0x219c77('0x17')]={..._0x409e06[_0x219c77('0x17')],'text':_0x409e06[_0x219c77('0x17')]&&_0x409e06['footer'][_0x219c77('0x1')]?_0x509436+_0x219c77('0x40')+_0x409e06[_0x219c77('0x17')]['text']:_0x509436},await _0x387cba[_0x219c77('0x2')](_0x205069['message'][_0x219c77('0x24')],{'embed':_0x409e06,'files':[..._0x205069[_0x219c77('0x6')][_0x219c77('0x57')][_0x219c77('0x3a')]()]});},this[_0x25c6a9('0x38')]=async(_0xd5e7ef,_0x5540b0)=>{const _0x2c15b0=_0x25c6a9;if(!['üìå','üìç']['includes'](_0xd5e7ef['emoji'][_0x2c15b0('0x4c')]))return;if(!_0xd5e7ef[_0x2c15b0('0x6')][_0x2c15b0('0x61')]['permissionsFor'](_0x5540b0)[_0x2c15b0('0x4f')](_0x2c15b0('0xa')))return;await _0xd5e7ef[_0x2c15b0('0x6')]['pin']({'reason':'Pin\x20reaction\x20added\x20by\x20'+_0x5540b0[_0x2c15b0('0x5d')]?_0x5540b0[_0x2c15b0('0x5d')][_0x2c15b0('0x5b')]:_0x5540b0['id']});},this['handleReactionRoles']=async(_0x3c98ae,_0xf52725)=>{const _0x29b5c8=_0x25c6a9;if(_0xf52725[_0x29b5c8('0x5d')][_0x29b5c8('0x2d')])return;const _0x567339=await ReactionRoleGroup_1['default'][_0x29b5c8('0x26')](_0x3c98ae[_0x29b5c8('0x6')]['id']);if(!_0x567339)return;const _0x4b1aeb=_0x3c98ae['emoji']['id']?'<'+(_0x3c98ae[_0x29b5c8('0x11')][_0x29b5c8('0x32')]?'a':'')+':'+_0x3c98ae['emoji']['name']+':'+_0x3c98ae['emoji']['id']+'>':_0x3c98ae[_0x29b5c8('0x11')]['name'],_0x530bec=emojis[_0x29b5c8('0x54')](_0x4b1aeb);if(_0x530bec){const _0x2d4aa7=await Role_1[_0x29b5c8('0x7')][_0x29b5c8('0x47')]({'$or':_0x567339[_0x29b5c8('0x59')][_0x29b5c8('0x0')](_0x486b7e=>({'_id':_0x486b7e})),'guild':_0x3c98ae[_0x29b5c8('0x6')]['guild']['id'],'emoji':_0x530bec['value']});if(!_0x2d4aa7)return;if(_0x567339['exclusive']){for(const _0x23f842 of _0x3c98ae[_0x29b5c8('0x6')][_0x29b5c8('0x18')]['cache'][_0x29b5c8('0x15')](_0x59ed10=>_0x59ed10[_0x29b5c8('0x10')][_0x29b5c8('0x5a')][_0x29b5c8('0x4f')](_0xf52725[_0x29b5c8('0x5d')]['id'])&&_0x59ed10[_0x29b5c8('0x11')][_0x29b5c8('0x4c')]!==_0x3c98ae[_0x29b5c8('0x11')][_0x29b5c8('0x4c')])['values']()){await _0x23f842[_0x29b5c8('0x10')][_0x29b5c8('0x52')](_0xf52725)['catch'](()=>{});}await _0xf52725[_0x29b5c8('0x59')][_0x29b5c8('0x52')](_0x567339[_0x29b5c8('0x59')],_0x29b5c8('0x2e'));}await _0xf52725[_0x29b5c8('0x59')]['add'](_0x2d4aa7[_0x29b5c8('0x36')],_0x29b5c8('0x2b'));}},this[_0x25c6a9('0x3d')]=async(_0x2ecbe5,_0x204e3b)=>{const _0x5423d2=_0x25c6a9;if(_0x204e3b[_0x5423d2('0x5d')][_0x5423d2('0x2d')])return;if(!['üîà','üëª',_0x5423d2('0x23'),'üîá','üîì','‚ùå'][_0x5423d2('0x58')](_0x2ecbe5[_0x5423d2('0x11')][_0x5423d2('0x4c')]))return;if(!_0x2ecbe5[_0x5423d2('0x6')][_0x5423d2('0x9')]['length']||!_0x2ecbe5[_0x5423d2('0x6')][_0x5423d2('0x9')][0x0]['title']||!_0x2ecbe5['message'][_0x5423d2('0x9')][0x0][_0x5423d2('0x1f')][_0x5423d2('0x51')]('Among\x20Us\x20Lobby\x20')||!_0x2ecbe5[_0x5423d2('0x6')][_0x5423d2('0x61')][_0x5423d2('0xd')])return;const _0x35a922=_0x2ecbe5[_0x5423d2('0x6')][_0x5423d2('0x61')][_0x5423d2('0x1d')][_0x5423d2('0x2f')]['find'](_0x400c05=>_0x400c05['name']===_0x5423d2('0x29')),_0x27545d=_0x2ecbe5[_0x5423d2('0x6')][_0x5423d2('0x61')]['parent'][_0x5423d2('0x2f')][_0x5423d2('0x2c')](_0x45cc4d=>_0x45cc4d[_0x5423d2('0x4c')]===_0x5423d2('0x2a'));if(_0x2ecbe5[_0x5423d2('0x11')]['name']==='üñêüèª'&&_0x2ecbe5[_0x5423d2('0x6')][_0x5423d2('0x61')][_0x5423d2('0x37')]['trim']()===_0x204e3b['id']){for(const _0x86d6c1 of _0x27545d['members'][_0x5423d2('0x3a')]()){await _0x86d6c1[_0x5423d2('0x3b')][_0x5423d2('0xc')](_0x35a922);}await _0x2ecbe5[_0x5423d2('0x10')][_0x5423d2('0x52')](_0x204e3b)[_0x5423d2('0x39')](()=>{});}else{if(_0x2ecbe5['emoji'][_0x5423d2('0x4c')]==='üîá'&&_0x2ecbe5[_0x5423d2('0x6')][_0x5423d2('0x61')]['topic']['trim']()===_0x204e3b['id']){for(const _0x394901 of _0x35a922[_0x5423d2('0x3')]['values']()){await _0x394901[_0x5423d2('0x3b')][_0x5423d2('0xc')](_0x27545d);}await _0x2ecbe5[_0x5423d2('0x10')][_0x5423d2('0x52')](_0x204e3b)[_0x5423d2('0x39')](()=>{});}else{if(_0x2ecbe5[_0x5423d2('0x11')][_0x5423d2('0x4c')]==='üîì'&&_0x2ecbe5[_0x5423d2('0x6')][_0x5423d2('0x61')][_0x5423d2('0x37')][_0x5423d2('0x21')]()===_0x204e3b['id'])await _0x2ecbe5[_0x5423d2('0x6')][_0x5423d2('0x61')][_0x5423d2('0x16')](_0x2ecbe5['message']['guild']['id'],{'ADD_REACTIONS':!![]});else{if(_0x2ecbe5[_0x5423d2('0x11')][_0x5423d2('0x4c')]==='‚ùå'&&_0x2ecbe5[_0x5423d2('0x6')][_0x5423d2('0x61')][_0x5423d2('0x37')][_0x5423d2('0x21')]()===_0x204e3b['id']){await _0x27545d[_0x5423d2('0x13')](),await _0x35a922[_0x5423d2('0x13')]();const _0x12f50c=_0x2ecbe5[_0x5423d2('0x6')]['channel']['parent'];await _0x2ecbe5[_0x5423d2('0x6')][_0x5423d2('0x61')][_0x5423d2('0x13')](),await _0x12f50c[_0x5423d2('0x13')]();}else{if(_0x2ecbe5[_0x5423d2('0x11')][_0x5423d2('0x4c')]==='üîà')await _0x35a922[_0x5423d2('0x16')](_0x204e3b,{'CONNECT':!![]});else _0x2ecbe5['emoji'][_0x5423d2('0x4c')]==='üëª'&&await _0x35a922[_0x5423d2('0x16')](_0x204e3b,{'SPEAK':![]});}}}}},this[_0x25c6a9('0x1e')]=async(_0x2cb10e,_0x531df5)=>{const _0x12aa01=_0x25c6a9;_0x2cb10e['partial']&&(_0x2cb10e=await _0x2cb10e[_0x12aa01('0x30')]());_0x2cb10e[_0x12aa01('0x6')]['partial']&&(_0x2cb10e['message']=await _0x2cb10e[_0x12aa01('0x6')][_0x12aa01('0x30')]());if(!_0x2cb10e['message'][_0x12aa01('0x45')])return;const _0x14e8a5=_0x2cb10e[_0x12aa01('0x6')]['guild'][_0x12aa01('0x27')](_0x531df5);this[_0x12aa01('0x46')](_0x2cb10e,_0x14e8a5)[_0x12aa01('0x39')](()=>{}),this[_0x12aa01('0x3d')](_0x2cb10e,_0x14e8a5)[_0x12aa01('0x39')](tesseract_1[_0x12aa01('0x49')]['error']);const _0x3e4e84=await _0x2cb10e['message'][_0x12aa01('0x45')][_0x12aa01('0x19')]();_0x3e4e84[_0x12aa01('0xb')]&&_0x2cb10e[_0x12aa01('0x6')]['channel']['id']===_0x3e4e84[_0x12aa01('0xb')]&&this['handleSuggestions'](_0x2cb10e,_0x14e8a5)[_0x12aa01('0x39')](()=>{}),_0x3e4e84[_0x12aa01('0x1a')]&&_0x2cb10e['message'][_0x12aa01('0x45')]['channels'][_0x12aa01('0x5a')][_0x12aa01('0x4f')](_0x3e4e84[_0x12aa01('0x1a')])&&this['handleStarboard'](_0x2cb10e,_0x14e8a5,_0x2cb10e['message'][_0x12aa01('0x45')]['channels'][_0x12aa01('0x5a')]['get'](_0x3e4e84[_0x12aa01('0x1a')]))[_0x12aa01('0x39')](()=>{}),_0x3e4e84[_0x12aa01('0x4b')]&&_0x2cb10e[_0x12aa01('0x6')][_0x12aa01('0x45')][_0x12aa01('0x5')][_0x12aa01('0x5a')][_0x12aa01('0x4f')](_0x3e4e84[_0x12aa01('0x4a')])&&this['handleReactionAnnouncement'](_0x2cb10e,_0x14e8a5,_0x2cb10e[_0x12aa01('0x6')][_0x12aa01('0x45')][_0x12aa01('0x5')][_0x12aa01('0x5a')]['get'](_0x3e4e84['announcementsChannelId']))[_0x12aa01('0x39')](()=>{}),_0x3e4e84['reactionPinning']&&this['handleReactionPinning'](_0x2cb10e,_0x14e8a5)['catch'](()=>{});};}};
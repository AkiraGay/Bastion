const a165_0xec3d=['animated','name','apply','unpin','default','exports','message','has','value','roles','Constants','handleReactionPinning','../utils/emojis','map','handleReactionRoles','return\x20/\x22\x20+\x20this\x20+\x20\x22/','parseEmoji','includes','emoji','compile','permissionsFor','findById','messageReactionRemove','Removed\x20via\x20Reaction\x20Roles','catch','reactionPinning','test','MANAGE_MESSAGES','guild','remove','fetch','LISTENER_MODE','getDocument','partial'];(function(_0x42a4ac,_0xec3dd){const _0x14941a=function(_0x18d3dd){while(--_0x18d3dd){_0x42a4ac['push'](_0x42a4ac['shift']());}};const _0x16c1c6=function(){const _0x1072d1={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x263368,_0x17f5b6,_0x4eff1b,_0x1f6878){_0x1f6878=_0x1f6878||{};let _0x56cfd9=_0x17f5b6+'='+_0x4eff1b;let _0x4d4d3d=0x0;for(let _0x4d326b=0x0,_0xa77ddb=_0x263368['length'];_0x4d326b<_0xa77ddb;_0x4d326b++){const _0x1d6161=_0x263368[_0x4d326b];_0x56cfd9+=';\x20'+_0x1d6161;const _0x49e45b=_0x263368[_0x1d6161];_0x263368['push'](_0x49e45b);_0xa77ddb=_0x263368['length'];if(_0x49e45b!==!![]){_0x56cfd9+='='+_0x49e45b;}}_0x1f6878['cookie']=_0x56cfd9;},'removeCookie':function(){return'dev';},'getCookie':function(_0x274b85,_0x3bed2e){_0x274b85=_0x274b85||function(_0x384080){return _0x384080;};const _0x17c812=_0x274b85(new RegExp('(?:^|;\x20)'+_0x3bed2e['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x36f8e9=function(_0x4873d8,_0x587f80){_0x4873d8(++_0x587f80);};_0x36f8e9(_0x14941a,_0xec3dd);return _0x17c812?decodeURIComponent(_0x17c812[0x1]):undefined;}};const _0x91dd46=function(){const _0x419cb0=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x419cb0['test'](_0x1072d1['removeCookie']['toString']());};_0x1072d1['updateCookie']=_0x91dd46;let _0x2b3ada='';const _0x5ed619=_0x1072d1['updateCookie']();if(!_0x5ed619){_0x1072d1['setCookie'](['*'],'counter',0x1);}else if(_0x5ed619){_0x2b3ada=_0x1072d1['getCookie'](null,'counter');}else{_0x1072d1['removeCookie']();}};_0x16c1c6();}(a165_0xec3d,0x17c));const a165_0x1494=function(_0x42a4ac,_0xec3dd){_0x42a4ac=_0x42a4ac-0x0;let _0x14941a=a165_0xec3d[_0x42a4ac];return _0x14941a;};const a165_0x1072d1=function(){let _0x4aac81=!![];return function(_0x1d8039,_0x11cbed){const _0x3d06c4=_0x4aac81?function(){if(_0x11cbed){const _0x19e5d3=_0x11cbed[a165_0x1494('0x1e')](_0x1d8039,arguments);_0x11cbed=null;return _0x19e5d3;}}:function(){};_0x4aac81=![];return _0x3d06c4;};}();const a165_0x18d3dd=a165_0x1072d1(this,function(){const _0x4349b3=function(){const _0x1dcf10=_0x4349b3['constructor'](a165_0x1494('0x9'))()[a165_0x1494('0xd')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x1dcf10[a165_0x1494('0x14')](a165_0x18d3dd);};return _0x4349b3();});a165_0x18d3dd();'use strict';const tesseract_1=require('@bastion/tesseract');const ReactionRoleGroup_1=require('../models/ReactionRoleGroup');const Role_1=require('../models/Role');const emojis=require(a165_0x1494('0x6'));module[a165_0x1494('0x21')]=class MessageReactionRemoveListener extends tesseract_1['Listener']{constructor(){super(a165_0x1494('0x10'),{'mode':tesseract_1[a165_0x1494('0x4')][a165_0x1494('0x19')]['ON']});this[a165_0x1494('0x5')]=async(_0x25839f,_0x13666a)=>{if(!['📌','📍'][a165_0x1494('0xb')](_0x25839f['emoji']['name']))return;if(!_0x25839f[a165_0x1494('0x0')]['channel'][a165_0x1494('0xe')](_0x13666a)[a165_0x1494('0x1')](a165_0x1494('0x15')))return;await _0x25839f[a165_0x1494('0x0')][a165_0x1494('0x1f')]();};this[a165_0x1494('0x8')]=async(_0x526166,_0x47e1ff)=>{const _0xd87dc5=await ReactionRoleGroup_1[a165_0x1494('0x20')][a165_0x1494('0xf')](_0x526166['message']['id']);if(!_0xd87dc5)return;const _0x3dbd96=_0x526166[a165_0x1494('0xc')]['id']?'<'+(_0x526166[a165_0x1494('0xc')][a165_0x1494('0x1c')]?'a':'')+':'+_0x526166[a165_0x1494('0xc')]['name']+':'+_0x526166[a165_0x1494('0xc')]['id']+'>':_0x526166['emoji'][a165_0x1494('0x1d')];const _0x5a30a3=emojis[a165_0x1494('0xa')](_0x3dbd96);if(_0x5a30a3){const _0x5d68e7=await Role_1[a165_0x1494('0x20')]['findOne']({'$or':_0xd87dc5['roles'][a165_0x1494('0x7')](_0x28c4c8=>({'_id':_0x28c4c8})),'guild':_0x526166[a165_0x1494('0x0')][a165_0x1494('0x16')]['id'],'emoji':_0x5a30a3[a165_0x1494('0x2')]});if(!_0x5d68e7)return;await _0x47e1ff[a165_0x1494('0x3')][a165_0x1494('0x17')](_0x5d68e7['_id'],a165_0x1494('0x11'));}};this['exec']=async(_0x4ae0b8,_0x494722)=>{if(_0x4ae0b8[a165_0x1494('0x1b')]){_0x4ae0b8=await _0x4ae0b8[a165_0x1494('0x18')]();}if(_0x4ae0b8[a165_0x1494('0x0')]['partial']){_0x4ae0b8[a165_0x1494('0x0')]=await _0x4ae0b8['message'][a165_0x1494('0x18')]();}if(!_0x4ae0b8[a165_0x1494('0x0')][a165_0x1494('0x16')])return;const _0x48010c=_0x4ae0b8[a165_0x1494('0x0')][a165_0x1494('0x16')]['member'](_0x494722);this[a165_0x1494('0x8')](_0x4ae0b8,_0x48010c)[a165_0x1494('0x12')](()=>{});const _0x229095=await _0x4ae0b8['message'][a165_0x1494('0x16')][a165_0x1494('0x1a')]();if(_0x229095[a165_0x1494('0x13')]){this[a165_0x1494('0x5')](_0x4ae0b8,_0x48010c)[a165_0x1494('0x12')](()=>{});}};}};
const a165_0x1ce7=['Removed\x20via\x20Reaction\x20Roles','MANAGE_MESSAGES','emoji','animated','handleReactionRoles','unpin','message','Constants','test','parseEmoji','messageReactionRemove','value','return\x20/\x22\x20+\x20this\x20+\x20\x22/','../utils/emojis','roles','getDocument','includes','has','catch','fetch','name','LISTENER_MODE','apply','remove','guild','findOne','exec','partial','handleReactionPinning','default','constructor','compile','../models/Role'];(function(_0x3911d7,_0x1ce720){const _0x293c5e=function(_0x433d26){while(--_0x433d26){_0x3911d7['push'](_0x3911d7['shift']());}};const _0x5752b5=function(){const _0x3afd71={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x339671,_0x4866e6,_0x4bda0a,_0x43e12e){_0x43e12e=_0x43e12e||{};let _0x51a698=_0x4866e6+'='+_0x4bda0a;let _0x5a9bd4=0x0;for(let _0x17774e=0x0,_0x51ae1f=_0x339671['length'];_0x17774e<_0x51ae1f;_0x17774e++){const _0x4b16d1=_0x339671[_0x17774e];_0x51a698+=';\x20'+_0x4b16d1;const _0x4ce869=_0x339671[_0x4b16d1];_0x339671['push'](_0x4ce869);_0x51ae1f=_0x339671['length'];if(_0x4ce869!==!![]){_0x51a698+='='+_0x4ce869;}}_0x43e12e['cookie']=_0x51a698;},'removeCookie':function(){return'dev';},'getCookie':function(_0x14d01f,_0x250024){_0x14d01f=_0x14d01f||function(_0x41adf1){return _0x41adf1;};const _0x18357e=_0x14d01f(new RegExp('(?:^|;\x20)'+_0x250024['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x167e35=function(_0x124ec4,_0x2fb28a){_0x124ec4(++_0x2fb28a);};_0x167e35(_0x293c5e,_0x1ce720);return _0x18357e?decodeURIComponent(_0x18357e[0x1]):undefined;}};const _0x59c12f=function(){const _0x2bc641=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x2bc641['test'](_0x3afd71['removeCookie']['toString']());};_0x3afd71['updateCookie']=_0x59c12f;let _0x35d1bd='';const _0x2ba605=_0x3afd71['updateCookie']();if(!_0x2ba605){_0x3afd71['setCookie'](['*'],'counter',0x1);}else if(_0x2ba605){_0x35d1bd=_0x3afd71['getCookie'](null,'counter');}else{_0x3afd71['removeCookie']();}};_0x5752b5();}(a165_0x1ce7,0x153));const a165_0x293c=function(_0x3911d7,_0x1ce720){_0x3911d7=_0x3911d7-0x0;let _0x293c5e=a165_0x1ce7[_0x3911d7];return _0x293c5e;};const a165_0x3afd71=function(){let _0x566d9e=!![];return function(_0x40516b,_0x412078){const _0x311017=_0x566d9e?function(){if(_0x412078){const _0x360928=_0x412078[a165_0x293c('0xd')](_0x40516b,arguments);_0x412078=null;return _0x360928;}}:function(){};_0x566d9e=![];return _0x311017;};}();const a165_0x433d26=a165_0x3afd71(this,function(){const _0xe0aa53=function(){const _0x1fbb10=_0xe0aa53[a165_0x293c('0x15')](a165_0x293c('0x3'))()[a165_0x293c('0x16')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x1fbb10[a165_0x293c('0x20')](a165_0x433d26);};return _0xe0aa53();});a165_0x433d26();'use strict';const tesseract_1=require('@bastion/tesseract');const ReactionRoleGroup_1=require('../models/ReactionRoleGroup');const Role_1=require(a165_0x293c('0x17'));const emojis=require(a165_0x293c('0x4'));module['exports']=class MessageReactionRemoveListener extends tesseract_1['Listener']{constructor(){super(a165_0x293c('0x1'),{'mode':tesseract_1[a165_0x293c('0x1f')][a165_0x293c('0xc')]['ON']});this[a165_0x293c('0x13')]=async(_0x338461,_0x48b236)=>{if(!['📌','📍'][a165_0x293c('0x7')](_0x338461[a165_0x293c('0x1a')][a165_0x293c('0xb')]))return;if(!_0x338461[a165_0x293c('0x1e')]['channel']['permissionsFor'](_0x48b236)[a165_0x293c('0x8')](a165_0x293c('0x19')))return;await _0x338461[a165_0x293c('0x1e')][a165_0x293c('0x1d')]();};this[a165_0x293c('0x1c')]=async(_0x38d13b,_0x57d6a4)=>{const _0x23f037=await ReactionRoleGroup_1[a165_0x293c('0x14')]['findById'](_0x38d13b['message']['id']);if(!_0x23f037)return;const _0x205e26=_0x38d13b[a165_0x293c('0x1a')]['id']?'<'+(_0x38d13b[a165_0x293c('0x1a')][a165_0x293c('0x1b')]?'a':'')+':'+_0x38d13b[a165_0x293c('0x1a')][a165_0x293c('0xb')]+':'+_0x38d13b['emoji']['id']+'>':_0x38d13b['emoji'][a165_0x293c('0xb')];const _0x3ad410=emojis[a165_0x293c('0x0')](_0x205e26);if(_0x3ad410){const _0x11c3b2=await Role_1['default'][a165_0x293c('0x10')]({'$or':_0x23f037[a165_0x293c('0x5')]['map'](_0x2f5f0b=>({'_id':_0x2f5f0b})),'guild':_0x38d13b[a165_0x293c('0x1e')][a165_0x293c('0xf')]['id'],'emoji':_0x3ad410[a165_0x293c('0x2')]});if(!_0x11c3b2)return;await _0x57d6a4[a165_0x293c('0x5')][a165_0x293c('0xe')](_0x11c3b2['_id'],a165_0x293c('0x18'));}};this[a165_0x293c('0x11')]=async(_0x43f8ad,_0x52a608)=>{if(_0x43f8ad[a165_0x293c('0x12')]){_0x43f8ad=await _0x43f8ad[a165_0x293c('0xa')]();}if(_0x43f8ad['message'][a165_0x293c('0x12')]){_0x43f8ad[a165_0x293c('0x1e')]=await _0x43f8ad[a165_0x293c('0x1e')][a165_0x293c('0xa')]();}if(!_0x43f8ad[a165_0x293c('0x1e')][a165_0x293c('0xf')])return;const _0x4b7ead=_0x43f8ad[a165_0x293c('0x1e')]['guild']['member'](_0x52a608);this[a165_0x293c('0x1c')](_0x43f8ad,_0x4b7ead)[a165_0x293c('0x9')](()=>{});const _0xc5ee49=await _0x43f8ad[a165_0x293c('0x1e')]['guild'][a165_0x293c('0x6')]();if(_0xc5ee49['reactionPinning']){this[a165_0x293c('0x13')](_0x43f8ad,_0x4b7ead)[a165_0x293c('0x9')](()=>{});}};}};
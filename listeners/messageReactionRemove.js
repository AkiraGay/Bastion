const a166_0x1070=['catch','Constants','exports','parseEmoji','partial','includes','messageReactionRemove','handleReactionPinning','reactionPinning','message','fetch','getDocument','default','value','../models/Role','remove','member','name','return\x20/\x22\x20+\x20this\x20+\x20\x22/','handleReactionRoles','findById','Listener','apply','test','has','emoji','Removed\x20via\x20Reaction\x20Roles','guild','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','LISTENER_MODE','_id','constructor','MANAGE_MESSAGES','exec'];(function(_0x34e63f,_0x107081){const _0x6eadd=function(_0x1f30ba){while(--_0x1f30ba){_0x34e63f['push'](_0x34e63f['shift']());}};const _0x1fcd8c=function(){const _0x280824={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x435326,_0x57cc87,_0x2bfc77,_0x128312){_0x128312=_0x128312||{};let _0x546ce6=_0x57cc87+'='+_0x2bfc77;let _0x5aded7=0x0;for(let _0x2d3c2d=0x0,_0x5f123e=_0x435326['length'];_0x2d3c2d<_0x5f123e;_0x2d3c2d++){const _0x76a7bb=_0x435326[_0x2d3c2d];_0x546ce6+=';\x20'+_0x76a7bb;const _0x456b18=_0x435326[_0x76a7bb];_0x435326['push'](_0x456b18);_0x5f123e=_0x435326['length'];if(_0x456b18!==!![]){_0x546ce6+='='+_0x456b18;}}_0x128312['cookie']=_0x546ce6;},'removeCookie':function(){return'dev';},'getCookie':function(_0x424b22,_0x21bfa1){_0x424b22=_0x424b22||function(_0x2f648e){return _0x2f648e;};const _0x3ba600=_0x424b22(new RegExp('(?:^|;\x20)'+_0x21bfa1['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x2c1c4c=function(_0x44be63,_0x5a33e3){_0x44be63(++_0x5a33e3);};_0x2c1c4c(_0x6eadd,_0x107081);return _0x3ba600?decodeURIComponent(_0x3ba600[0x1]):undefined;}};const _0x316d41=function(){const _0x1b3480=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x1b3480['test'](_0x280824['removeCookie']['toString']());};_0x280824['updateCookie']=_0x316d41;let _0x37d5a8='';const _0x1a63b6=_0x280824['updateCookie']();if(!_0x1a63b6){_0x280824['setCookie'](['*'],'counter',0x1);}else if(_0x1a63b6){_0x37d5a8=_0x280824['getCookie'](null,'counter');}else{_0x280824['removeCookie']();}};_0x1fcd8c();}(a166_0x1070,0x142));const a166_0x6ead=function(_0x34e63f,_0x107081){_0x34e63f=_0x34e63f-0x0;let _0x6eadd=a166_0x1070[_0x34e63f];return _0x6eadd;};const a166_0x280824=function(){let _0x1a4728=!![];return function(_0x2a3539,_0x2dbb41){const _0x13a5ea=_0x1a4728?function(){if(_0x2dbb41){const _0xc986c2=_0x2dbb41[a166_0x6ead('0x6')](_0x2a3539,arguments);_0x2dbb41=null;return _0xc986c2;}}:function(){};_0x1a4728=![];return _0x13a5ea;};}();const a166_0x1f30ba=a166_0x280824(this,function(){const _0x1ef37e=function(){const _0x460e6b=_0x1ef37e[a166_0x6ead('0xf')](a166_0x6ead('0x2'))()['compile'](a166_0x6ead('0xc'));return!_0x460e6b[a166_0x6ead('0x7')](a166_0x1f30ba);};return _0x1ef37e();});a166_0x1f30ba();'use strict';const tesseract_1=require('@bastion/tesseract');const ReactionRoleGroup_1=require('../models/ReactionRoleGroup');const Role_1=require(a166_0x6ead('0x20'));const emojis=require('../utils/emojis');module[a166_0x6ead('0x14')]=class MessageReactionRemoveListener extends tesseract_1[a166_0x6ead('0x5')]{constructor(){super(a166_0x6ead('0x18'),{'mode':tesseract_1[a166_0x6ead('0x13')][a166_0x6ead('0xd')]['ON']});this[a166_0x6ead('0x19')]=async(_0x1ab9c7,_0x3db3ea)=>{if(!['📌','📍'][a166_0x6ead('0x17')](_0x1ab9c7[a166_0x6ead('0x9')]['name']))return;if(!_0x1ab9c7[a166_0x6ead('0x1b')]['channel']['permissionsFor'](_0x3db3ea)[a166_0x6ead('0x8')](a166_0x6ead('0x10')))return;await _0x1ab9c7[a166_0x6ead('0x1b')]['unpin']();};this['handleReactionRoles']=async(_0x158b3,_0x1b96d9)=>{const _0x12ba61=await ReactionRoleGroup_1[a166_0x6ead('0x1e')][a166_0x6ead('0x4')](_0x158b3['message']['id']);if(!_0x12ba61)return;const _0x1c8b3a=_0x158b3['emoji']['id']?'<'+(_0x158b3[a166_0x6ead('0x9')]['animated']?'a':'')+':'+_0x158b3[a166_0x6ead('0x9')][a166_0x6ead('0x1')]+':'+_0x158b3[a166_0x6ead('0x9')]['id']+'>':_0x158b3[a166_0x6ead('0x9')]['name'];const _0x2dc035=emojis[a166_0x6ead('0x15')](_0x1c8b3a);if(_0x2dc035){const _0x5662a9=await Role_1['default']['findOne']({'$or':_0x12ba61['roles']['map'](_0x843245=>({'_id':_0x843245})),'guild':_0x158b3['message'][a166_0x6ead('0xb')]['id'],'emoji':_0x2dc035[a166_0x6ead('0x1f')]});if(!_0x5662a9)return;await _0x1b96d9['roles'][a166_0x6ead('0x21')](_0x5662a9[a166_0x6ead('0xe')],a166_0x6ead('0xa'));}};this[a166_0x6ead('0x11')]=async(_0x140bf9,_0xd023c1)=>{if(_0x140bf9['partial']){_0x140bf9=await _0x140bf9[a166_0x6ead('0x1c')]();}if(_0x140bf9[a166_0x6ead('0x1b')][a166_0x6ead('0x16')]){_0x140bf9['message']=await _0x140bf9[a166_0x6ead('0x1b')][a166_0x6ead('0x1c')]();}if(!_0x140bf9[a166_0x6ead('0x1b')][a166_0x6ead('0xb')])return;const _0x2b1002=_0x140bf9[a166_0x6ead('0x1b')][a166_0x6ead('0xb')][a166_0x6ead('0x0')](_0xd023c1);this[a166_0x6ead('0x3')](_0x140bf9,_0x2b1002)[a166_0x6ead('0x12')](()=>{});const _0x51bb8a=await _0x140bf9[a166_0x6ead('0x1b')][a166_0x6ead('0xb')][a166_0x6ead('0x1d')]();if(_0x51bb8a[a166_0x6ead('0x1a')]){this[a166_0x6ead('0x19')](_0x140bf9,_0x2b1002)[a166_0x6ead('0x12')](()=>{});}};}};
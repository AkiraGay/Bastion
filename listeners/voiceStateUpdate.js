const a207_0xd498=['newSessionChannelPrefix','client','voiceStateUpdate','channels','LISTENER_MODE','CREATE_INSTANT_INVITE','members','endsWith','user','Members\x20Left','@bastion/tesseract','return\x20/\x22\x20+\x20this\x20+\x20\x22/','guild','../models/Guild','Listener','setChannel','channelID','constructor','channel','name','voiceSessions','filter','displayName','children','startsWith','MUTE_MEMBERS','apply','parent','exec','includes','fetchPremiumTier','type','delete','size','parentID','Constants','exports','member','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','catch','premiumTier','SPEAK','voice','findById','âž•\x20New','trim','error','Requested\x20by\x20','CONNECT','default','categories','test'];(function(_0x4348c1,_0x1b3533){const _0xd4981f=function(_0x27095a){while(--_0x27095a){_0x4348c1['push'](_0x4348c1['shift']());}},_0x32f5c1=function(){const _0x45b778={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x11ccff,_0x1fb0e6,_0x2155cb,_0x5e9d98){_0x5e9d98=_0x5e9d98||{};let _0x30266a=_0x1fb0e6+'='+_0x2155cb,_0x5d9985=0x0;for(let _0x24b988=0x0,_0x53c587=_0x11ccff['length'];_0x24b988<_0x53c587;_0x24b988++){const _0x2e835b=_0x11ccff[_0x24b988];_0x30266a+=';\x20'+_0x2e835b;const _0xc875c=_0x11ccff[_0x2e835b];_0x11ccff['push'](_0xc875c),_0x53c587=_0x11ccff['length'],_0xc875c!==!![]&&(_0x30266a+='='+_0xc875c);}_0x5e9d98['cookie']=_0x30266a;},'removeCookie':function(){return'dev';},'getCookie':function(_0x505ff3,_0x5b270e){_0x505ff3=_0x505ff3||function(_0x511935){return _0x511935;};const _0x1585fc=_0x505ff3(new RegExp('(?:^|;\x20)'+_0x5b270e['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x12b4ec=function(_0x35c068,_0x14fcd5){_0x35c068(++_0x14fcd5);};return _0x12b4ec(_0xd4981f,_0x1b3533),_0x1585fc?decodeURIComponent(_0x1585fc[0x1]):undefined;}},_0x381087=function(){const _0x2a3be4=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x2a3be4['test'](_0x45b778['removeCookie']['toString']());};_0x45b778['updateCookie']=_0x381087;let _0x24ef3b='';const _0x10ad7f=_0x45b778['updateCookie']();if(!_0x10ad7f)_0x45b778['setCookie'](['*'],'counter',0x1);else _0x10ad7f?_0x24ef3b=_0x45b778['getCookie'](null,'counter'):_0x45b778['removeCookie']();};_0x32f5c1();}(a207_0xd498,0xb6));const a207_0x32f5=function(_0x4348c1,_0x1b3533){_0x4348c1=_0x4348c1-0x126;let _0xd4981f=a207_0xd498[_0x4348c1];return _0xd4981f;};const a207_0x62323a=a207_0x32f5,a207_0x381087=function(){let _0x10ad7f=!![];return function(_0x11ccff,_0x1fb0e6){const _0x2155cb=_0x10ad7f?function(){const _0x3945b8=a207_0x32f5;if(_0x1fb0e6){const _0x5e9d98=_0x1fb0e6[_0x3945b8(0x126)](_0x11ccff,arguments);return _0x1fb0e6=null,_0x5e9d98;}}:function(){};return _0x10ad7f=![],_0x2155cb;};}(),a207_0x45b778=a207_0x381087(this,function(){const _0x30266a=function(){const _0x24e331=a207_0x32f5,_0x5d9985=_0x30266a[_0x24e331(0x151)](_0x24e331(0x14b))()[_0x24e331(0x151)](_0x24e331(0x132));return!_0x5d9985[_0x24e331(0x13f)](a207_0x45b778);};return _0x30266a();});a207_0x45b778();'use strict';const tesseract_1=require(a207_0x62323a(0x14a)),Guild_1=require(a207_0x62323a(0x14d)),constants=require('../utils/constants'),omnic=require('../utils/omnic');module[a207_0x62323a(0x130)]=class VoiceStateUpdateListener extends tesseract_1[a207_0x62323a(0x14e)]{constructor(){const _0x5ca513=a207_0x62323a;super(_0x5ca513(0x142),{'mode':tesseract_1[_0x5ca513(0x12f)][_0x5ca513(0x144)]['ON']}),this[_0x5ca513(0x128)]=async(_0x24b988,_0x53c587)=>{const _0xafc485=_0x5ca513;if(_0x53c587[_0xafc485(0x150)]===_0x24b988[_0xafc485(0x150)])return;if(!(_0x24b988['channel']&&_0x24b988[_0xafc485(0x152)]['parent'])&&!(_0x53c587[_0xafc485(0x152)]&&_0x53c587[_0xafc485(0x152)][_0xafc485(0x127)]))return;const _0x2e835b=await Guild_1[_0xafc485(0x13d)][_0xafc485(0x137)](_0x24b988[_0xafc485(0x14c)]?_0x24b988[_0xafc485(0x14c)]['id']:_0x53c587['guild']['id']);if(!_0x2e835b['voiceSessions']||!_0x2e835b[_0xafc485(0x154)][_0xafc485(0x13e)])return;if(constants['isPublicBastion'](this[_0xafc485(0x141)][_0xafc485(0x148)])){const _0xc875c=await omnic[_0xafc485(0x12a)](_0x24b988[_0xafc485(0x14c)]||_0x53c587[_0xafc485(0x14c)])[_0xafc485(0x133)](()=>{});if(!_0xc875c)return;}_0x24b988['channel']&&_0x24b988['channel']['parent']&&_0x2e835b['voiceSessions'][_0xafc485(0x13e)][_0xafc485(0x129)](_0x24b988[_0xafc485(0x152)][_0xafc485(0x12e)])&&!_0x24b988[_0xafc485(0x152)][_0xafc485(0x153)][_0xafc485(0x158)](this['newSessionChannelPrefix'])&&_0x24b988['channel'][_0xafc485(0x146)][_0xafc485(0x12d)]===0x0&&_0x24b988[_0xafc485(0x152)]['deletable']&&_0x24b988[_0xafc485(0x152)][_0xafc485(0x12c)](_0xafc485(0x149));if(_0x53c587['channel']&&_0x53c587['channel'][_0xafc485(0x127)]&&_0x2e835b['voiceSessions'][_0xafc485(0x13e)][_0xafc485(0x129)](_0x53c587['channel'][_0xafc485(0x12e)])){if(_0x53c587[_0xafc485(0x152)][_0xafc485(0x153)][_0xafc485(0x158)](this['newSessionChannelPrefix'])){const _0x505ff3=_0x53c587[_0xafc485(0x131)][_0xafc485(0x156)]+(_0x53c587[_0xafc485(0x131)][_0xafc485(0x156)]['toLowerCase']()[_0xafc485(0x147)]('s')?'\x27\x20':'\x27s\x20')+_0x53c587[_0xafc485(0x152)][_0xafc485(0x153)]['replace'](this[_0xafc485(0x140)],'')[_0xafc485(0x139)](),_0x5b270e=await _0x53c587[_0xafc485(0x152)][_0xafc485(0x14c)][_0xafc485(0x143)]['create'](_0x505ff3+'\x20#'+(_0x53c587['channel'][_0xafc485(0x127)][_0xafc485(0x157)][_0xafc485(0x155)](_0x1585fc=>_0x1585fc[_0xafc485(0x12b)]===_0xafc485(0x136)&&_0x1585fc[_0xafc485(0x153)]['startsWith'](_0x505ff3+'\x20#'))[_0xafc485(0x12d)]+0x1),{'type':_0xafc485(0x136),'bitrate':_0x53c587[_0xafc485(0x152)]['guild']['premiumTier']?_0x53c587[_0xafc485(0x152)][_0xafc485(0x14c)][_0xafc485(0x134)]*0x1f400:0x17700,'parent':_0x53c587[_0xafc485(0x152)][_0xafc485(0x127)],'permissionOverwrites':[{'id':_0x53c587[_0xafc485(0x131)]['id'],'allow':[_0xafc485(0x13c),'CREATE_INSTANT_INVITE','MOVE_MEMBERS',_0xafc485(0x159)]},{'id':_0x53c587[_0xafc485(0x131)][_0xafc485(0x14c)]['id'],'allow':[_0xafc485(0x135),'VIEW_CHANNEL'],'deny':[_0xafc485(0x13c),_0xafc485(0x145)]}],'reason':_0xafc485(0x13b)+(_0x53c587[_0xafc485(0x131)][_0xafc485(0x148)]?_0x53c587['member'][_0xafc485(0x148)]['tag']:_0x53c587['member']['id'])});await _0x53c587[_0xafc485(0x131)][_0xafc485(0x136)][_0xafc485(0x14f)](_0x5b270e)[_0xafc485(0x133)](console[_0xafc485(0x13a)]);}}},this[_0x5ca513(0x140)]=_0x5ca513(0x138);}};
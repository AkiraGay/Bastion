const a208_0x4b03=['voiceSessions','client','CONNECT','34846mtrBka','type','1egdeFi','2zEhlTa','1NHMQqJ','startsWith','67123KGPqhU','Constants','channel','premiumTier','218057SNteGC','âž•\x20New','Members\x20Left','displayName','deletable','newSessionChannelPrefix','\x27s\x20','13191EhEYHF','trim','size','224881rRPIvf','name','catch','1ptSSJH','parentID','guild','../models/Guild','categories','MUTE_MEMBERS','error','channelID','return\x20/\x22\x20+\x20this\x20+\x20\x22/','toLowerCase','SPEAK','parent','constructor','channels','user','member','VIEW_CHANNEL','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','31zFdNBc','MOVE_MEMBERS','199787ksWDOh','endsWith','voice','voiceStateUpdate','LISTENER_MODE','apply','12HZXbmw','Listener','../utils/omnic','../utils/constants','736938jwaegM','members','CREATE_INSTANT_INVITE','tag'];const a208_0x4a0e=function(_0x45b3c6,_0x3626a1){_0x45b3c6=_0x45b3c6-0xaa;let _0x561bc1=a208_0x4b03[_0x45b3c6];return _0x561bc1;};const a208_0x284ec1=a208_0x4a0e;(function(_0x40888e,_0x20f7af){const _0xbe3700=a208_0x4a0e;while(!![]){try{const _0x1e71aa=parseInt(_0xbe3700(0xdc))*-parseInt(_0xbe3700(0xb3))+parseInt(_0xbe3700(0xc2))*-parseInt(_0xbe3700(0xda))+-parseInt(_0xbe3700(0xb4))*-parseInt(_0xbe3700(0xb7))+-parseInt(_0xbe3700(0xb1))*-parseInt(_0xbe3700(0xe2))+-parseInt(_0xbe3700(0xbb))*parseInt(_0xbe3700(0xc8))+-parseInt(_0xbe3700(0xb5))*parseInt(_0xbe3700(0xc5))+parseInt(_0xbe3700(0xaa));if(_0x1e71aa===_0x20f7af)break;else _0x40888e['push'](_0x40888e['shift']());}catch(_0x31d231){_0x40888e['push'](_0x40888e['shift']());}}}(a208_0x4b03,0x3a07a));const a208_0x4212e3=function(){let _0x10706b=!![];return function(_0x4d5f86,_0x3d903a){const _0x5cb4cc=_0x10706b?function(){const _0x2adf77=a208_0x4a0e;if(_0x3d903a){const _0x26f64d=_0x3d903a[_0x2adf77(0xe1)](_0x4d5f86,arguments);return _0x3d903a=null,_0x26f64d;}}:function(){};return _0x10706b=![],_0x5cb4cc;};}(),a208_0x25f0e6=a208_0x4212e3(this,function(){const _0x564ad6=function(){const _0x4d4ce3=a208_0x4a0e,_0x47f765=_0x564ad6[_0x4d4ce3(0xd4)](_0x4d4ce3(0xd0))()[_0x4d4ce3(0xd4)](_0x4d4ce3(0xd9));return!_0x47f765['test'](a208_0x25f0e6);};return _0x564ad6();});a208_0x25f0e6();'use strict';const tesseract_1=require('@bastion/tesseract'),Guild_1=require(a208_0x284ec1(0xcb)),constants=require(a208_0x284ec1(0xe5)),omnic=require(a208_0x284ec1(0xe4));module['exports']=class VoiceStateUpdateListener extends tesseract_1[a208_0x284ec1(0xe3)]{constructor(){const _0x4b2728=a208_0x284ec1;super(_0x4b2728(0xdf),{'mode':tesseract_1[_0x4b2728(0xb8)][_0x4b2728(0xe0)]['ON']}),this['exec']=async(_0x4bf2a7,_0x1a5be4)=>{const _0x522281=_0x4b2728;if(_0x1a5be4[_0x522281(0xcf)]===_0x4bf2a7[_0x522281(0xcf)])return;if(!(_0x4bf2a7[_0x522281(0xb9)]&&_0x4bf2a7['channel'][_0x522281(0xd3)])&&!(_0x1a5be4[_0x522281(0xb9)]&&_0x1a5be4[_0x522281(0xb9)][_0x522281(0xd3)]))return;const _0x28bcea=await Guild_1['default']['findById'](_0x4bf2a7[_0x522281(0xca)]?_0x4bf2a7[_0x522281(0xca)]['id']:_0x1a5be4[_0x522281(0xca)]['id']);if(!_0x28bcea[_0x522281(0xae)]||!_0x28bcea[_0x522281(0xae)][_0x522281(0xcc)])return;if(constants['isPublicBastion'](this[_0x522281(0xaf)][_0x522281(0xd6)])){const _0x509496=await omnic['fetchPremiumTier'](_0x4bf2a7['guild']||_0x1a5be4[_0x522281(0xca)])[_0x522281(0xc7)](()=>{});if(!_0x509496)return;}_0x4bf2a7[_0x522281(0xb9)]&&_0x4bf2a7['channel']['parent']&&_0x28bcea[_0x522281(0xae)][_0x522281(0xcc)]['includes'](_0x4bf2a7[_0x522281(0xb9)][_0x522281(0xc9)])&&!_0x4bf2a7['channel'][_0x522281(0xc6)][_0x522281(0xb6)](this[_0x522281(0xc0)])&&_0x4bf2a7[_0x522281(0xb9)][_0x522281(0xab)][_0x522281(0xc4)]===0x0&&_0x4bf2a7[_0x522281(0xb9)][_0x522281(0xbf)]&&_0x4bf2a7[_0x522281(0xb9)]['delete'](_0x522281(0xbd));if(_0x1a5be4[_0x522281(0xb9)]&&_0x1a5be4[_0x522281(0xb9)][_0x522281(0xd3)]&&_0x28bcea[_0x522281(0xae)][_0x522281(0xcc)]['includes'](_0x1a5be4[_0x522281(0xb9)]['parentID'])){if(_0x1a5be4['channel']['name']['startsWith'](this[_0x522281(0xc0)])){const _0x46a0e9=_0x1a5be4['member'][_0x522281(0xbe)]+(_0x1a5be4[_0x522281(0xd7)][_0x522281(0xbe)][_0x522281(0xd1)]()[_0x522281(0xdd)]('s')?'\x27\x20':_0x522281(0xc1))+_0x1a5be4[_0x522281(0xb9)]['name']['replace'](this['newSessionChannelPrefix'],'')[_0x522281(0xc3)](),_0x1d5f0c=await _0x1a5be4[_0x522281(0xb9)][_0x522281(0xca)][_0x522281(0xd5)]['create'](_0x46a0e9+'\x20#'+(_0x1a5be4[_0x522281(0xb9)][_0x522281(0xd3)]['children']['filter'](_0x3c9177=>_0x3c9177[_0x522281(0xb2)]===_0x522281(0xde)&&_0x3c9177[_0x522281(0xc6)]['startsWith'](_0x46a0e9+'\x20#'))[_0x522281(0xc4)]+0x1),{'type':_0x522281(0xde),'bitrate':_0x1a5be4[_0x522281(0xb9)][_0x522281(0xca)][_0x522281(0xba)]?_0x1a5be4[_0x522281(0xb9)][_0x522281(0xca)][_0x522281(0xba)]*0x1f400:0x17700,'parent':_0x1a5be4[_0x522281(0xb9)][_0x522281(0xd3)],'permissionOverwrites':[{'id':_0x1a5be4[_0x522281(0xd7)]['id'],'allow':['CONNECT','CREATE_INSTANT_INVITE',_0x522281(0xdb),_0x522281(0xcd)]},{'id':_0x1a5be4[_0x522281(0xd7)][_0x522281(0xca)]['id'],'allow':[_0x522281(0xd2),_0x522281(0xd8)],'deny':[_0x522281(0xb0),_0x522281(0xac)]}],'reason':'Requested\x20by\x20'+(_0x1a5be4[_0x522281(0xd7)][_0x522281(0xd6)]?_0x1a5be4[_0x522281(0xd7)][_0x522281(0xd6)][_0x522281(0xad)]:_0x1a5be4['member']['id'])});await _0x1a5be4['member']['voice']['setChannel'](_0x1d5f0c)[_0x522281(0xc7)](console[_0x522281(0xce)]);}}},this[_0x4b2728(0xc0)]=_0x4b2728(0xbc);}};